var xR=Object.create;var C0=Object.defineProperty,AR=Object.defineProperties,MR=Object.getOwnPropertyDescriptor,RR=Object.getOwnPropertyDescriptors,OR=Object.getOwnPropertyNames,cu=Object.getOwnPropertySymbols,PR=Object.getPrototypeOf,w0=Object.prototype.hasOwnProperty,j_=Object.prototype.propertyIsEnumerable;var q_=(n,e,i)=>e in n?C0(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i,Ee=(n,e)=>{for(var i in e||={})w0.call(e,i)&&q_(n,i,e[i]);if(cu)for(var i of cu(e))j_.call(e,i)&&q_(n,i,e[i]);return n},nn=(n,e)=>AR(n,RR(e));var oc=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var sc=(n,e)=>{var i={};for(var t in n)w0.call(n,t)&&e.indexOf(t)<0&&(i[t]=n[t]);if(n!=null&&cu)for(var t of cu(n))e.indexOf(t)<0&&j_.call(n,t)&&(i[t]=n[t]);return i};var je=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var FR=(n,e,i,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of OR(e))!w0.call(n,r)&&r!==i&&C0(n,r,{get:()=>e[r],enumerable:!(t=MR(e,r))||t.enumerable});return n};var kR=(n,e,i)=>(i=n!=null?xR(PR(n)):{},FR(e||!n||!n.__esModule?C0(i,"default",{value:n,enumerable:!0}):i,n));var ft=je(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn._registerNode=Zn.Konva=Zn.glob=void 0;var fL=Math.PI/180;function pL(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}Zn.glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{};Zn.Konva={_global:Zn.glob,version:"9.3.16",isBrowser:pL(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Zn.Konva.angleDeg?n*fL:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Zn.Konva.DD.isDragging},isTransforming(){var n;return(n=Zn.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!Zn.Konva.DD.node},releaseCanvasOnDestroy:!0,document:Zn.glob.document,_injectGlobal(n){Zn.glob.Konva=n}};var mL=n=>{Zn.Konva[n.prototype.getClassName()]=n};Zn._registerNode=mL;Zn.Konva._injectGlobal(Zn.Konva)});var Dn=je(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.Util=pn.Transform=void 0;var Jv=ft(),ny=class n{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){let i=this.m;return{x:i[0]*e.x+i[2]*e.y+i[4],y:i[1]*e.x+i[3]*e.y+i[5]}}translate(e,i){return this.m[4]+=this.m[0]*e+this.m[2]*i,this.m[5]+=this.m[1]*e+this.m[3]*i,this}scale(e,i){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=i,this.m[3]*=i,this}rotate(e){let i=Math.cos(e),t=Math.sin(e),r=this.m[0]*i+this.m[2]*t,s=this.m[1]*i+this.m[3]*t,l=this.m[0]*-t+this.m[2]*i,d=this.m[1]*-t+this.m[3]*i;return this.m[0]=r,this.m[1]=s,this.m[2]=l,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,i){let t=this.m[0]+this.m[2]*i,r=this.m[1]+this.m[3]*i,s=this.m[2]+this.m[0]*e,l=this.m[3]+this.m[1]*e;return this.m[0]=t,this.m[1]=r,this.m[2]=s,this.m[3]=l,this}multiply(e){let i=this.m[0]*e.m[0]+this.m[2]*e.m[1],t=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],l=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],d=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=i,this.m[1]=t,this.m[2]=r,this.m[3]=s,this.m[4]=l,this.m[5]=d,this}invert(){let e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*e,t=-this.m[1]*e,r=-this.m[2]*e,s=this.m[0]*e,l=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=t,this.m[2]=r,this.m[3]=s,this.m[4]=l,this.m[5]=d,this}getMatrix(){return this.m}decompose(){let e=this.m[0],i=this.m[1],t=this.m[2],r=this.m[3],s=this.m[4],l=this.m[5],d=e*r-i*t,h={x:s,y:l,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||i!=0){let p=Math.sqrt(e*e+i*i);h.rotation=i>0?Math.acos(e/p):-Math.acos(e/p),h.scaleX=p,h.scaleY=d/p,h.skewX=(e*t+i*r)/d,h.skewY=0}else if(t!=0||r!=0){let p=Math.sqrt(t*t+r*r);h.rotation=Math.PI/2-(r>0?Math.acos(-t/p):-Math.acos(t/p)),h.scaleX=d/p,h.scaleY=p,h.skewX=0,h.skewY=(e*t+i*r)/d}return h.rotation=pn.Util._getRotation(h.rotation),h}};pn.Transform=ny;var gL="[object Array]",vL="[object Number]",yL="[object String]",SL="[object Boolean]",bL=Math.PI/180,_L=180/Math.PI,ey="#",DL="",CL="0",wL="Konva warning: ",IE="Konva error: ",IL="rgb(",ty={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},EL=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Af=[],TL=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,60)};pn.Util={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===gL},_isNumber(n){return Object.prototype.toString.call(n)===vL&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===yL},_isBoolean(n){return Object.prototype.toString.call(n)===SL},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;let e=n[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){Af.push(n),Af.length===1&&TL(function(){let e=Af;Af=[],e.forEach(function(i){i()})})},createCanvasElement(){let n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,e){let i=pn.Util.createImageElement();i.onload=function(){e(i)},i.src=n},_rgbToHex(n,e,i){return((1<<24)+(n<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb(n){n=n.replace(ey,DL);let e=parseInt(n,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=CL+n;return ey+n},getRGB(n){let e;return n in ty?(e=ty[n],{r:e[0],g:e[1],b:e[2]}):n[0]===ey?this._hexToRgb(n.substring(1)):n.substr(0,4)===IL?(e=EL.exec(n.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",pn.Util._namedColorToRBA(n)||pn.Util._hex3ColorToRGBA(n)||pn.Util._hex4ColorToRGBA(n)||pn.Util._hex6ColorToRGBA(n)||pn.Util._hex8ColorToRGBA(n)||pn.Util._rgbColorToRGBA(n)||pn.Util._rgbaColorToRGBA(n)||pn.Util._hslColorToRGBA(n)},_namedColorToRBA(n){let e=ty[n.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];let e=n.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];let e=n.split(/ *, */).map((i,t)=>i.slice(-1)==="%"?t===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){let[e,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),t=Number(i[0])/360,r=Number(i[1])/100,s=Number(i[2])/100,l,d,h;if(r===0)return h=s*255,{r:Math.round(h),g:Math.round(h),b:Math.round(h),a:1};s<.5?l=s*(1+r):l=s+r-s*r;let p=2*s-l,g=[0,0,0];for(let v=0;v<3;v++)d=t+1/3*-(v-1),d<0&&d++,d>1&&d--,6*d<1?h=p+(l-p)*6*d:2*d<1?h=l:3*d<2?h=p+(l-p)*(2/3-d)*6:h=p,g[v]=h*255;return{r:Math.round(g[0]),g:Math.round(g[1]),b:Math.round(g[2]),a:1}}},haveIntersection(n,e){return!(e.x>n.x+n.width||e.x+e.width<n.x||e.y>n.y+n.height||e.y+e.height<n.y)},cloneObject(n){let e={};for(let i in n)this._isPlainObject(n[i])?e[i]=this.cloneObject(n[i]):this._isArray(n[i])?e[i]=this.cloneArray(n[i]):e[i]=n[i];return e},cloneArray(n){return n.slice(0)},degToRad(n){return n*bL},radToDeg(n){return n*_L},_degToRad(n){return pn.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),pn.Util.degToRad(n)},_radToDeg(n){return pn.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),pn.Util.radToDeg(n)},_getRotation(n){return Jv.Konva.angleDeg?pn.Util.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(IE+n)},error(n){console.error(IE+n)},warn(n){Jv.Konva.showWarnings&&console.warn(wL+n)},each(n,e){for(let i in n)e(i,n[i])},_inRange(n,e,i){return e<=n&&n<i},_getProjectionToSegment(n,e,i,t,r,s){let l,d,h,p=(n-i)*(n-i)+(e-t)*(e-t);if(p==0)l=n,d=e,h=(r-i)*(r-i)+(s-t)*(s-t);else{let g=((r-n)*(i-n)+(s-e)*(t-e))/p;g<0?(l=n,d=e,h=(n-r)*(n-r)+(e-s)*(e-s)):g>1?(l=i,d=t,h=(i-r)*(i-r)+(t-s)*(t-s)):(l=n+g*(i-n),d=e+g*(t-e),h=(l-r)*(l-r)+(d-s)*(d-s))}return[l,d,h]},_getProjectionToLine(n,e,i){let t=pn.Util.cloneObject(n),r=Number.MAX_VALUE;return e.forEach(function(s,l){if(!i&&l===e.length-1)return;let d=e[(l+1)%e.length],h=pn.Util._getProjectionToSegment(s.x,s.y,d.x,d.y,n.x,n.y),p=h[0],g=h[1],v=h[2];v<r&&(t.x=p,t.y=g,r=v)}),t},_prepareArrayForTween(n,e,i){let t,r=[],s=[];if(n.length>e.length){let d=e;e=n,n=d}for(t=0;t<n.length;t+=2)r.push({x:n[t],y:n[t+1]});for(t=0;t<e.length;t+=2)s.push({x:e[t],y:e[t+1]});let l=[];return s.forEach(function(d){let h=pn.Util._getProjectionToLine(d,r,i);l.push(h.x),l.push(h.y)}),l},_prepareToStringify(n){let e;n.visitedByCircularReferenceRemoval=!0;for(let i in n)if(n.hasOwnProperty(i)&&n[i]&&typeof n[i]=="object"){if(e=Object.getOwnPropertyDescriptor(n,i),n[i].visitedByCircularReferenceRemoval||pn.Util._isElement(n[i]))if(e.configurable)delete n[i];else return null;else if(pn.Util._prepareToStringify(n[i])===null)if(e.configurable)delete n[i];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,e){for(let i in e)n[i]=e[i];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Jv.Konva.releaseCanvasOnDestroy&&n.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(n,e,i,t){let r=0,s=0,l=0,d=0;typeof t=="number"?r=s=l=d=Math.min(t,e/2,i/2):(r=Math.min(t[0]||0,e/2,i/2),s=Math.min(t[1]||0,e/2,i/2),d=Math.min(t[2]||0,e/2,i/2),l=Math.min(t[3]||0,e/2,i/2)),n.moveTo(r,0),n.lineTo(e-s,0),n.arc(e-s,s,s,Math.PI*3/2,0,!1),n.lineTo(e,i-d),n.arc(e-d,i-d,d,0,Math.PI/2,!1),n.lineTo(l,i),n.arc(l,i-l,l,Math.PI/2,Math.PI,!1),n.lineTo(0,r),n.arc(r,r,r,Math.PI,Math.PI*3/2,!1)}}});var St=je(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});Li.RGBComponent=xL;Li.alphaComponent=AL;Li.getNumberValidator=ML;Li.getNumberOrArrayOfNumbersValidator=RL;Li.getNumberOrAutoValidator=OL;Li.getStringValidator=PL;Li.getStringOrGradientValidator=FL;Li.getFunctionValidator=kL;Li.getNumberArrayValidator=LL;Li.getBooleanValidator=NL;Li.getComponentValidator=VL;var mo=ft(),In=Dn();function go(n){return In.Util._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||In.Util._isBoolean(n)?n:Object.prototype.toString.call(n)}function xL(n){return n>255?255:n<0?0:Math.round(n)}function AL(n){return n>1?1:n<1e-4?1e-4:n}function ML(){if(mo.Konva.isUnminified)return function(n,e){return In.Util._isNumber(n)||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}}function RL(n){if(mo.Konva.isUnminified)return function(e,i){let t=In.Util._isNumber(e),r=In.Util._isArray(e)&&e.length==n;return!t&&!r&&In.Util.warn(go(e)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+n+")"),e}}function OL(){if(mo.Konva.isUnminified)return function(n,e){return In.Util._isNumber(n)||n==="auto"||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}}function PL(){if(mo.Konva.isUnminified)return function(n,e){return In.Util._isString(n)||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}}function FL(){if(mo.Konva.isUnminified)return function(n,e){let i=In.Util._isString(n),t=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return i||t||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}}function kL(){if(mo.Konva.isUnminified)return function(n,e){return In.Util._isFunction(n)||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),n}}function LL(){if(mo.Konva.isUnminified)return function(n,e){let i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&n instanceof i||(In.Util._isArray(n)?n.forEach(function(t){In.Util._isNumber(t)||In.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}}function NL(){if(mo.Konva.isUnminified)return function(n,e){return n===!0||n===!1||In.Util.warn(go(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}}function VL(n){if(mo.Konva.isUnminified)return function(e,i){return e==null||In.Util.isObject(e)||In.Util.warn(go(e)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+n),e}}});var pt=je(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.Factory=void 0;var Ni=Dn(),BL=St(),Yc="get",Xc="set";cr.Factory={addGetterSetter(n,e,i,t,r){cr.Factory.addGetter(n,e,i),cr.Factory.addSetter(n,e,t,r),cr.Factory.addOverloadedGetterSetter(n,e)},addGetter(n,e,i){let t=Yc+Ni.Util._capitalize(e);n.prototype[t]=n.prototype[t]||function(){let r=this.attrs[e];return r===void 0?i:r}},addSetter(n,e,i,t){let r=Xc+Ni.Util._capitalize(e);n.prototype[r]||cr.Factory.overWriteSetter(n,e,i,t)},overWriteSetter(n,e,i,t){let r=Xc+Ni.Util._capitalize(e);n.prototype[r]=function(s){return i&&s!==void 0&&s!==null&&(s=i.call(this,s,e)),this._setAttr(e,s),t&&t.call(this),this}},addComponentsGetterSetter(n,e,i,t,r){let s=i.length,l=Ni.Util._capitalize,d=Yc+l(e),h=Xc+l(e),p,g;n.prototype[d]=function(){let _={};for(p=0;p<s;p++)g=i[p],_[g]=this.getAttr(e+l(g));return _};let v=(0,BL.getComponentValidator)(i);n.prototype[h]=function(_){let b=this.attrs[e],C;t&&(_=t.call(this,_)),v&&v.call(this,_,e);for(C in _)_.hasOwnProperty(C)&&this._setAttr(e+l(C),_[C]);return _||i.forEach(w=>{this._setAttr(e+l(w),void 0)}),this._fireChangeEvent(e,b,_),r&&r.call(this),this},cr.Factory.addOverloadedGetterSetter(n,e)},addOverloadedGetterSetter(n,e){let i=Ni.Util._capitalize(e),t=Xc+i,r=Yc+i;n.prototype[e]=function(){return arguments.length?(this[t](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(n,e,i,t){Ni.Util.error("Adding deprecated "+e);let r=Yc+Ni.Util._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[r]=function(){Ni.Util.error(s);let l=this.attrs[e];return l===void 0?i:l},cr.Factory.addSetter(n,e,t,function(){Ni.Util.error(s)}),cr.Factory.addOverloadedGetterSetter(n,e)},backCompat(n,e){Ni.Util.each(e,function(i,t){let r=n.prototype[t],s=Yc+Ni.Util._capitalize(i),l=Xc+Ni.Util._capitalize(i);function d(){r.apply(this,arguments),Ni.Util.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+t+'" instead.')}n.prototype[i]=d,n.prototype[s]=d,n.prototype[l]=d})},afterSetFilter(){this._filterUpToDate=!1}}});var oy=je(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.HitContext=os.SceneContext=os.Context=void 0;var xE=Dn(),UL=ft();function qL(n){let e=[],i=n.length,t=xE.Util,r,s;for(r=0;r<i;r++)s=n[r],t._isNumber(s)?s=Math.round(s*1e3)/1e3:t._isString(s)||(s=s+""),e.push(s);return e}var EE=",",jL="(",GL=")",zL="([",HL="])",QL=";",WL="()",$L="=",TE=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],YL=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],XL=100,fl=class{constructor(e){this.canvas=e,UL.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,i){let t=this.traceArr,r=t.length,s="",l,d,h,p;for(l=0;l<r;l++)d=t[l],h=d.method,h?(p=d.args,s+=h,e?s+=WL:xE.Util._isArray(p[0])?s+=zL+p.join(EE)+HL:(i&&(p=p.map(g=>typeof g=="number"?Math.floor(g):g)),s+=jL+p.join(EE)+GL)):(s+=d.property,e||(s+=$L+d.val)),s+=QL;return s}clearTrace(){this.traceArr=[]}_trace(e){let i=this.traceArr,t;i.push(e),t=i.length,t>=XL&&i.shift()}reset(){let e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){let i=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(e){let i=e.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(e){let i=e.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(e){let i=e.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(e,i){this._context[e]=i}arc(e,i,t,r,s,l){this._context.arc(e,i,t,r,s,l)}arcTo(e,i,t,r,s){this._context.arcTo(e,i,t,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,i,t,r,s,l){this._context.bezierCurveTo(e,i,t,r,s,l)}clearRect(e,i,t,r){this._context.clearRect(e,i,t,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,i){let t=arguments;if(t.length===2)return this._context.createImageData(e,i);if(t.length===1)return this._context.createImageData(e)}createLinearGradient(e,i,t,r){return this._context.createLinearGradient(e,i,t,r)}createPattern(e,i){return this._context.createPattern(e,i)}createRadialGradient(e,i,t,r,s,l){return this._context.createRadialGradient(e,i,t,r,s,l)}drawImage(e,i,t,r,s,l,d,h,p){let g=arguments,v=this._context;g.length===3?v.drawImage(e,i,t):g.length===5?v.drawImage(e,i,t,r,s):g.length===9&&v.drawImage(e,i,t,r,s,l,d,h,p)}ellipse(e,i,t,r,s,l,d,h){this._context.ellipse(e,i,t,r,s,l,d,h)}isPointInPath(e,i,t,r){return t?this._context.isPointInPath(t,e,i,r):this._context.isPointInPath(e,i,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,i,t,r){this._context.fillRect(e,i,t,r)}strokeRect(e,i,t,r){this._context.strokeRect(e,i,t,r)}fillText(e,i,t,r){r?this._context.fillText(e,i,t,r):this._context.fillText(e,i,t)}measureText(e){return this._context.measureText(e)}getImageData(e,i,t,r){return this._context.getImageData(e,i,t,r)}lineTo(e,i){this._context.lineTo(e,i)}moveTo(e,i){this._context.moveTo(e,i)}rect(e,i,t,r){this._context.rect(e,i,t,r)}roundRect(e,i,t,r,s){this._context.roundRect(e,i,t,r,s)}putImageData(e,i,t){this._context.putImageData(e,i,t)}quadraticCurveTo(e,i,t,r){this._context.quadraticCurveTo(e,i,t,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,i){this._context.scale(e,i)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,i,t,r,s,l){this._context.setTransform(e,i,t,r,s,l)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,i,t,r){this._context.strokeText(e,i,t,r)}transform(e,i,t,r,s,l){this._context.transform(e,i,t,r,s,l)}translate(e,i){this._context.translate(e,i)}_enableTrace(){let e=this,i=TE.length,t=this.setAttr,r,s,l=function(d){let h=e[d],p;e[d]=function(){return s=qL(Array.prototype.slice.call(arguments,0)),p=h.apply(e,arguments),e._trace({method:d,args:s}),p}};for(r=0;r<i;r++)l(TE[r]);e.setAttr=function(){t.apply(e,arguments);let d=arguments[0],h=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(h=h/this.canvas.getPixelRatio()),e._trace({property:d,val:h})}}_applyGlobalCompositeOperation(e){let i=e.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}};os.Context=fl;YL.forEach(function(n){Object.defineProperty(fl.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});var iy=class extends fl{constructor(e,{willReadFrequently:i=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(e){let i=e.fill();this.setAttr("fillStyle",i),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){let i=e._getLinearGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fillRadialGradient(e){let i=e._getRadialGradient();i&&(this.setAttr("fillStyle",i),e._fillFunc(this))}_fill(e){let i=e.fill(),t=e.getFillPriority();if(i&&t==="color"){this._fillColor(e);return}let r=e.getFillPatternImage();if(r&&t==="pattern"){this._fillPattern(e);return}let s=e.getFillLinearGradientColorStops();if(s&&t==="linear-gradient"){this._fillLinearGradient(e);return}let l=e.getFillRadialGradientColorStops();if(l&&t==="radial-gradient"){this._fillRadialGradient(e);return}i?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):l&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let i=e.getStrokeLinearGradientStartPoint(),t=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(i.x,i.y,t.x,t.y);if(r){for(let l=0;l<r.length;l+=2)s.addColorStop(r[l],r[l+1]);this.setAttr("strokeStyle",s)}}_stroke(e){let i=e.dash(),t=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!t){this.save();let s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),i&&e.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),t||this.restore()}}_applyShadow(e){var i,t,r;let s=(i=e.getShadowRGBA())!==null&&i!==void 0?i:"black",l=(t=e.getShadowBlur())!==null&&t!==void 0?t:5,d=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},h=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),g=h.x*p,v=h.y*p;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",l*Math.min(Math.abs(g),Math.abs(v))),this.setAttr("shadowOffsetX",d.x*g),this.setAttr("shadowOffsetY",d.y*v)}};os.SceneContext=iy;var ry=class extends fl{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let i=e.getStrokeScaleEnabled();if(!i){this.save();let s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);let t=e.hitStrokeWidth(),r=t==="auto"?e.strokeWidth():t;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),i||this.restore()}}};os.HitContext=ry});var Zc=je(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.HitCanvas=ss.SceneCanvas=ss.Canvas=void 0;var Rf=Dn(),AE=oy(),ME=ft(),ZL=pt(),KL=St(),Mf;function JL(){if(Mf)return Mf;let n=Rf.Util.createCanvasElement(),e=n.getContext("2d");return Mf=function(){let i=ME.Konva._global.devicePixelRatio||1,t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return i/t}(),Rf.Util.releaseCanvas(n),Mf}var pl=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;let t=(e||{}).pixelRatio||ME.Konva.pixelRatio||JL();this.pixelRatio=t,this._canvas=Rf.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){let i=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";let i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";let i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,i){this.setWidth(e||0),this.setHeight(i||0)}toDataURL(e,i){try{return this._canvas.toDataURL(e,i)}catch{try{return this._canvas.toDataURL()}catch(r){return Rf.Util.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ss.Canvas=pl;ZL.Factory.addGetterSetter(pl,"pixelRatio",void 0,(0,KL.getNumberValidator)());var sy=class extends pl{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new AE.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};ss.SceneCanvas=sy;var ay=class extends pl{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new AE.HitContext(this),this.setSize(e.width,e.height)}};ss.HitCanvas=ay});var Of=je(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.DD=void 0;var Kc=ft(),eN=Dn();Hn.DD={get isDragging(){let n=!1;return Hn.DD._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return Hn.DD._dragElements.forEach(e=>{n=e.node}),n},_dragElements:new Map,_drag(n){let e=[];Hn.DD._dragElements.forEach((i,t)=>{let{node:r}=i,s=r.getStage();s.setPointersPositions(n),i.pointerId===void 0&&(i.pointerId=eN.Util._getFirstPointerId(n));let l=s._changedPointerPositions.find(d=>d.id===i.pointerId);if(l){if(i.dragStatus!=="dragging"){let d=r.dragDistance();if(Math.max(Math.abs(l.x-i.startPointerPos.x),Math.abs(l.y-i.startPointerPos.y))<d||(r.startDrag({evt:n}),!r.isDragging()))return}r._setDragPosition(n,i),e.push(r)}}),e.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:n},!0)})},_endDragBefore(n){let e=[];Hn.DD._dragElements.forEach(i=>{let{node:t}=i,r=t.getStage();if(n&&r.setPointersPositions(n),!r._changedPointerPositions.find(d=>d.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(Hn.DD.justDragged=!0,Kc.Konva._mouseListenClick=!1,Kc.Konva._touchListenClick=!1,Kc.Konva._pointerListenClick=!1,i.dragStatus="stopped");let l=i.node.getLayer()||i.node instanceof Kc.Konva.Stage&&i.node;l&&e.indexOf(l)===-1&&e.push(l)}),e.forEach(i=>{i.draw()})},_endDragAfter(n){Hn.DD._dragElements.forEach((e,i)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:n},!0),e.dragStatus!=="dragging"&&Hn.DD._dragElements.delete(i)})}};Kc.Konva.isBrowser&&(window.addEventListener("mouseup",Hn.DD._endDragBefore,!0),window.addEventListener("touchend",Hn.DD._endDragBefore,!0),window.addEventListener("touchcancel",Hn.DD._endDragBefore,!0),window.addEventListener("mousemove",Hn.DD._drag),window.addEventListener("touchmove",Hn.DD._drag),window.addEventListener("mouseup",Hn.DD._endDragAfter,!1),window.addEventListener("touchend",Hn.DD._endDragAfter,!1),window.addEventListener("touchcancel",Hn.DD._endDragAfter,!1))});var En=je(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.Node=void 0;var Ot=Dn(),ed=pt(),Jc=Zc(),as=ft(),Wi=Of(),Fn=St(),Ff="absoluteOpacity",Pf="allEventListeners",vo="absoluteTransform",RE="absoluteScale",la="canvas",tN="Change",nN="children",iN="konva",ly="listening",OE="mouseenter",PE="mouseleave",FE="set",kE="Shape",kf=" ",LE="stage",ls="transform",rN="Stage",cy="visible",oN=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(kf),sN=1,it=class n{constructor(e){this._id=sN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ls||e===vo)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,i){let t=this._cache.get(e);return(t===void 0||(e===ls||e===vo)&&t.dirty===!0)&&(t=i.call(this),this._cache.set(e,t)),t}_calculate(e,i,t){if(!this._attachedDepsListeners.get(e)){let r=i.map(s=>s+"Change.konva").join(kf);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,t)}_getCanvasCache(){return this._cache.get(la)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===vo&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(la)){let{scene:e,filter:i,hit:t}=this._cache.get(la);Ot.Util.releaseCanvas(e,i,t),this._cache.delete(la)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){let i=e||{},t={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(t=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(i.width||t.width),s=Math.ceil(i.height||t.height),l=i.pixelRatio,d=i.x===void 0?Math.floor(t.x):i.x,h=i.y===void 0?Math.floor(t.y):i.y,p=i.offset||0,g=i.drawBorder||!1,v=i.hitCanvasPixelRatio||1;if(!r||!s){Ot.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}let _=Math.abs(Math.round(t.x)-d)>.5?1:0,b=Math.abs(Math.round(t.y)-h)>.5?1:0;r+=p*2+_,s+=p*2+b,d-=p,h-=p;let C=new Jc.SceneCanvas({pixelRatio:l,width:r,height:s}),w=new Jc.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),x=new Jc.HitCanvas({pixelRatio:v,width:r,height:s}),M=C.getContext(),F=x.getContext();return x.isCache=!0,C.isCache=!0,this._cache.delete(la),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(C.getContext()._context.imageSmoothingEnabled=!1,w.getContext()._context.imageSmoothingEnabled=!1),M.save(),F.save(),M.translate(-d,-h),F.translate(-d,-h),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Ff),this._clearSelfAndDescendantCache(RE),this.drawScene(C,this),this.drawHit(x,this),this._isUnderCache=!1,M.restore(),F.restore(),g&&(M.save(),M.beginPath(),M.rect(0,0,r,s),M.closePath(),M.setAttr("strokeStyle","red"),M.setAttr("lineWidth",5),M.stroke(),M.restore()),this._cache.set(la,{scene:C,filter:w,hit:x,x:d,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(la)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,i){let t=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],r=1/0,s=1/0,l=-1/0,d=-1/0,h=this.getAbsoluteTransform(i);return t.forEach(function(p){let g=h.point(p);r===void 0&&(r=l=g.x,s=d=g.y),r=Math.min(r,g.x),s=Math.min(s,g.y),l=Math.max(l,g.x),d=Math.max(d,g.y)}),{x:r,y:s,width:l-r,height:d-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let i=this._getCanvasCache();e.translate(i.x,i.y);let t=this._getCachedSceneCanvas(),r=t.pixelRatio;e.drawImage(t._canvas,0,0,t.width/r,t.height/r),e.restore()}_drawCachedHitCanvas(e){let i=this._getCanvasCache(),t=i.hit;e.save(),e.translate(i.x,i.y),e.drawImage(t._canvas,0,0,t.width/t.pixelRatio,t.height/t.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),i=this._getCanvasCache(),t=i.scene,r=i.filter,s=r.getContext(),l,d,h,p;if(e){if(!this._filterUpToDate){let g=t.pixelRatio;r.setSize(t.width/t.pixelRatio,t.height/t.pixelRatio);try{for(l=e.length,s.clear(),s.drawImage(t._canvas,0,0,t.getWidth()/g,t.getHeight()/g),d=s.getImageData(0,0,r.getWidth(),r.getHeight()),h=0;h<l;h++){if(p=e[h],typeof p!="function"){Ot.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,d),s.putImageData(d,0,0)}}catch(v){Ot.Util.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return r}return t}on(e,i){if(this._cache&&this._cache.delete(Pf),arguments.length===3)return this._delegate.apply(this,arguments);let t=e.split(kf),r=t.length,s,l,d,h,p;for(s=0;s<r;s++)l=t[s],d=l.split("."),h=d[0],p=d[1]||"",this.eventListeners[h]||(this.eventListeners[h]=[]),this.eventListeners[h].push({name:p,handler:i});return this}off(e,i){let t=(e||"").split(kf),r=t.length,s,l,d,h,p,g;if(this._cache&&this._cache.delete(Pf),!e)for(l in this.eventListeners)this._off(l);for(s=0;s<r;s++)if(d=t[s],h=d.split("."),p=h[0],g=h[1],p)this.eventListeners[p]&&this._off(p,g,i);else for(l in this.eventListeners)this._off(l,g,i);return this}dispatchEvent(e){let i={target:this,type:e.type,evt:e};return this.fire(e.type,i),this}addEventListener(e,i){return this.on(e,function(t){i.call(this,t.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,i,t){let r=this;this.on(e,function(s){let l=s.target.findAncestors(i,!0,r);for(let d=0;d<l.length;d++)s=Ot.Util.cloneObject(s),s.currentTarget=l[d],t.call(l[d],s)})}remove(){return this.isDragging()&&this.stopDrag(),Wi.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(vo),this._clearSelfAndDescendantCache(Ff),this._clearSelfAndDescendantCache(RE),this._clearSelfAndDescendantCache(LE),this._clearSelfAndDescendantCache(cy),this._clearSelfAndDescendantCache(ly)}_remove(){this._clearCaches();let e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){let i="get"+Ot.Util._capitalize(e);return Ot.Util._isFunction(this[i])?this[i]():this.attrs[e]}getAncestors(){let e=this.getParent(),i=[];for(;e;)i.push(e),e=e.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let i,t;if(!e)return this;for(i in e)i!==nN&&(t=FE+Ot.Util._capitalize(i),Ot.Util._isFunction(this[t])?this[t](e[i]):this._setAttr(i,e[i]))}),this}isListening(){return this._getCache(ly,this._isListening)}_isListening(e){if(!this.listening())return!1;let t=this.getParent();return t&&t!==e&&this!==e?t._isListening(e):!0}isVisible(){return this._getCache(cy,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let t=this.getParent();return t&&t!==e&&this!==e?t._isVisible(e):!0}shouldDrawHit(e,i=!1){if(e)return this._isVisible(e)&&this._isListening(e);let t=this.getLayer(),r=!1;Wi.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===t)&&(r=!0)});let s=!i&&!as.Konva.hitOnDragEnabled&&(r||as.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),i=this,t=0,r,s,l,d;function h(g){for(r=[],s=g.length,l=0;l<s;l++)d=g[l],t++,d.nodeType!==kE&&(r=r.concat(d.getChildren().slice())),d._id===i._id&&(l=s);r.length>0&&r[0].getDepth()<=e&&h(r)}let p=this.getStage();return i.nodeType!==rN&&p&&h(p.getChildren()),t}getDepth(){let e=0,i=this.parent;for(;i;)e++,i=i.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ls),this._clearSelfAndDescendantCache(vo)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;let i=e.getPointerPosition();if(!i)return null;let t=this.getAbsoluteTransform().copy();return t.invert(),t.point(i)}getAbsolutePosition(e){let i=!1,t=this.parent;for(;t;){if(t.isCached()){i=!0;break}t=t.parent}i&&!e&&(e=!0);let r=this.getAbsoluteTransform(e).getMatrix(),s=new Ot.Transform,l=this.offset();return s.m=r.slice(),s.translate(l.x,l.y),s.getTranslation()}setAbsolutePosition(e){let l=this._clearTransform(),{x:i,y:t}=l,r=sc(l,["x","y"]);this.attrs.x=i,this.attrs.y=t,this._clearCache(ls);let s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(ls),this._clearSelfAndDescendantCache(vo),this}_setTransform(e){let i;for(i in e)this.attrs[i]=e[i]}_clearTransform(){let e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let i=e.x,t=e.y,r=this.x(),s=this.y();return i!==void 0&&(r+=i),t!==void 0&&(s+=t),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,i){let t=[],r=this.getParent(),s,l;if(!(i&&i._id===this._id)){for(t.unshift(this);r&&(!i||r._id!==i._id);)t.unshift(r),r=r.parent;for(s=t.length,l=0;l<s;l++)e(t[l])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Ot.Util.warn("Node has no parent. moveToTop function is ignored."),!1;let e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Ot.Util.warn("Node has no parent. moveUp function is ignored."),!1;let e=this.index,i=this.parent.getChildren().length;return e<i-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Ot.Util.warn("Node has no parent. moveDown function is ignored."),!1;let e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Ot.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;let e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Ot.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Ot.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");let i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Ff,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity(),i=this.getParent();return i&&!i._isUnderCache&&(e*=i.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),i,t,r,s,l,d={attrs:{},className:this.getClassName()};for(i in e)t=e[i],l=Ot.Util.isObject(t)&&!Ot.Util._isPlainObject(t)&&!Ot.Util._isArray(t),!l&&(r=typeof this[i]=="function"&&this[i],delete e[i],s=r?r.call(this):null,e[i]=t,s!==t&&(d.attrs[i]=t));return Ot.Util._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,i,t){let r=[];i&&this._isMatch(e)&&r.push(this);let s=this.parent;for(;s;){if(s===t)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,i,t){return this.findAncestors(e,i,t)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let i=e.replace(/ /g,"").split(","),t=i.length,r,s;for(r=0;r<t;r++)if(s=i[r],Ot.Util.isValidSelector(s)||(Ot.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Ot.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Ot.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){let e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(LE,this._getStage)}_getStage(){let e=this.getParent();return e?e.getStage():null}fire(e,i={},t){return i.target=i.target||this,t?this._fireAndBubble(e,i):this._fire(e,i),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(vo,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let i;if(e)return i=new Ot.Transform,this._eachAncestorReverse(function(t){let r=t.transformsEnabled();r==="all"?i.multiply(t.getTransform()):r==="position"&&i.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},e),i;{i=this._cache.get(vo)||new Ot.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();let t=this.transformsEnabled();if(t==="all")i.multiply(this.getTransform());else if(t==="position"){let r=this.attrs.x||0,s=this.attrs.y||0,l=this.attrs.offsetX||0,d=this.attrs.offsetY||0;i.translate(r-l,s-d)}return i.dirty=!1,i}}getAbsoluteScale(e){let i=this;for(;i;)i._isUnderCache&&(e=i),i=i.getParent();let r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ls,this._getTransform)}_getTransform(){var e,i;let t=this._cache.get(ls)||new Ot.Transform;t.reset();let r=this.x(),s=this.y(),l=as.Konva.getAngle(this.rotation()),d=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,h=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,p=this.attrs.skewX||0,g=this.attrs.skewY||0,v=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(r!==0||s!==0)&&t.translate(r,s),l!==0&&t.rotate(l),(p!==0||g!==0)&&t.skew(p,g),(d!==1||h!==1)&&t.scale(d,h),(v!==0||_!==0)&&t.translate(-1*v,-1*_),t.dirty=!1,t}clone(e){let i=Ot.Util.cloneObject(this.attrs),t,r,s,l,d;for(t in e)i[t]=e[t];let h=new this.constructor(i);for(t in this.eventListeners)for(r=this.eventListeners[t],s=r.length,l=0;l<s;l++)d=r[l],d.name.indexOf(iN)<0&&(h.eventListeners[t]||(h.eventListeners[t]=[]),h.eventListeners[t].push(d));return h}_toKonvaCanvas(e){e=e||{};let i=this.getClientRect(),t=this.getStage(),r=e.x!==void 0?e.x:Math.floor(i.x),s=e.y!==void 0?e.y:Math.floor(i.y),l=e.pixelRatio||1,d=new Jc.SceneCanvas({width:e.width||Math.ceil(i.width)||(t?t.width():0),height:e.height||Math.ceil(i.height)||(t?t.height():0),pixelRatio:l}),h=d.getContext(),p=new Jc.SceneCanvas({width:d.width/d.pixelRatio+Math.abs(r),height:d.height/d.pixelRatio+Math.abs(s),pixelRatio:d.pixelRatio});return e.imageSmoothingEnabled===!1&&(h._context.imageSmoothingEnabled=!1),h.save(),(r||s)&&h.translate(-1*r,-1*s),this.drawScene(d,void 0,p),h.restore(),d}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};let i=e.mimeType||null,t=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(i,t);return e.callback&&e.callback(r),r}toImage(e){return new Promise((i,t)=>{try{let r=e?.callback;r&&delete e.callback,Ot.Util._urlToImage(this.toDataURL(e),function(s){i(s),r?.(s)})}catch(r){t(r)}})}toBlob(e){return new Promise((i,t)=>{try{let r=e?.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{i(s),r?.(s)},e?.mimeType,e?.quality)}catch(r){t(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():as.Konva.dragDistance}_off(e,i,t){let r=this.eventListeners[e],s,l,d;for(s=0;s<r.length;s++)if(l=r[s].name,d=r[s].handler,(l!=="konva"||i==="konva")&&(!i||l===i)&&(!t||t===d)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,i,t){this._fire(e+tN,{oldVal:i,newVal:t})}addName(e){if(!this.hasName(e)){let i=this.name(),t=i?i+" "+e:e;this.name(t)}return this}hasName(e){if(!e)return!1;let i=this.name();return i?(i||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){let i=(this.name()||"").split(/\s/g),t=i.indexOf(e);return t!==-1&&(i.splice(t,1),this.name(i.join(" "))),this}setAttr(e,i){let t=this[FE+Ot.Util._capitalize(e)];return Ot.Util._isFunction(t)?t.call(this,i):this._setAttr(e,i),this}_requestDraw(){if(as.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,i){let t=this.attrs[e];t===i&&!Ot.Util.isObject(i)||(i==null?delete this.attrs[e]:this.attrs[e]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(e,t,i),this._requestDraw())}_setComponentAttr(e,i,t){let r;t!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][i]=t,this._fireChangeEvent(e,r,t))}_fireAndBubble(e,i,t){if(i&&this.nodeType===kE&&(i.target=this),!((e===OE||e===PE)&&(t&&(this===t||this.isAncestorOf&&this.isAncestorOf(t))||this.nodeType==="Stage"&&!t))){this._fire(e,i);let s=(e===OE||e===PE)&&t&&t.isAncestorOf&&t.isAncestorOf(this)&&!t.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!s&&(t&&t.parent?this._fireAndBubble.call(this.parent,e,i,t):this._fireAndBubble.call(this.parent,e,i))}}_getProtoListeners(e){var i,t,r;let s=(i=this._cache.get(Pf))!==null&&i!==void 0?i:{},l=s?.[e];if(l===void 0){l=[];let d=Object.getPrototypeOf(this);for(;d;){let h=(r=(t=d.eventListeners)===null||t===void 0?void 0:t[e])!==null&&r!==void 0?r:[];l.push(...h),d=Object.getPrototypeOf(d)}s[e]=l,this._cache.set(Pf,s)}return l}_fire(e,i){i=i||{},i.currentTarget=this,i.type=e;let t=this._getProtoListeners(e);if(t)for(var r=0;r<t.length;r++)t[r].handler.call(this,i);let s=this.eventListeners[e];if(s)for(var r=0;r<s.length;r++)s[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){let i=e?e.pointerId:void 0,t=this.getStage(),r=this.getAbsolutePosition();if(!t)return;let s=t._getPointerById(i)||t._changedPointerPositions[0]||r;Wi.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:i})}startDrag(e,i=!0){Wi.DD._dragElements.has(this._id)||this._createDragElement(e);let t=Wi.DD._dragElements.get(this._id);t.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},i)}_setDragPosition(e,i){let t=this.getStage()._getPointerById(i.pointerId);if(!t)return;let r={x:t.x-i.offset.x,y:t.y-i.offset.y},s=this.dragBoundFunc();if(s!==void 0){let l=s.call(this,r,e);l?r=l:Ot.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){let i=Wi.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),Wi.DD._endDragBefore(e),Wi.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=Wi.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||as.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let r=!1;Wi.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let i=Wi.DD._dragElements.get(this._id),t=i&&i.dragStatus==="dragging",r=i&&i.dragStatus==="ready";t?this.stopDrag():r&&Wi.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let i=this.getStage();if(!i)return!1;let t={x:-e.x,y:-e.y,width:i.width()+2*e.x,height:i.height()+2*e.y};return Ot.Util.haveIntersection(t,this.getClientRect())}static create(e,i){return Ot.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,i)}static _createNode(e,i){let t=n.prototype.getClassName.call(e),r=e.children,s,l,d;i&&(e.attrs.container=i),as.Konva[t]||(Ot.Util.warn('Can not find a node with class name "'+t+'". Fallback to "Shape".'),t="Shape");let h=as.Konva[t];if(s=new h(e.attrs),r)for(l=r.length,d=0;d<l;d++)s.add(n._createNode(r[d]));return s}};Lf.Node=it;it.prototype.nodeType="Node";it.prototype._attrsAffectingSize=[];it.prototype.eventListeners={};it.prototype.on.call(it.prototype,oN,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ls),this._clearSelfAndDescendantCache(vo)});it.prototype.on.call(it.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(cy)});it.prototype.on.call(it.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ly)});it.prototype.on.call(it.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Ff)});var dn=ed.Factory.addGetterSetter;dn(it,"zIndex");dn(it,"absolutePosition");dn(it,"position");dn(it,"x",0,(0,Fn.getNumberValidator)());dn(it,"y",0,(0,Fn.getNumberValidator)());dn(it,"globalCompositeOperation","source-over",(0,Fn.getStringValidator)());dn(it,"opacity",1,(0,Fn.getNumberValidator)());dn(it,"name","",(0,Fn.getStringValidator)());dn(it,"id","",(0,Fn.getStringValidator)());dn(it,"rotation",0,(0,Fn.getNumberValidator)());ed.Factory.addComponentsGetterSetter(it,"scale",["x","y"]);dn(it,"scaleX",1,(0,Fn.getNumberValidator)());dn(it,"scaleY",1,(0,Fn.getNumberValidator)());ed.Factory.addComponentsGetterSetter(it,"skew",["x","y"]);dn(it,"skewX",0,(0,Fn.getNumberValidator)());dn(it,"skewY",0,(0,Fn.getNumberValidator)());ed.Factory.addComponentsGetterSetter(it,"offset",["x","y"]);dn(it,"offsetX",0,(0,Fn.getNumberValidator)());dn(it,"offsetY",0,(0,Fn.getNumberValidator)());dn(it,"dragDistance",null,(0,Fn.getNumberValidator)());dn(it,"width",0,(0,Fn.getNumberValidator)());dn(it,"height",0,(0,Fn.getNumberValidator)());dn(it,"listening",!0,(0,Fn.getBooleanValidator)());dn(it,"preventDefault",!0,(0,Fn.getBooleanValidator)());dn(it,"filters",null,function(n){return this._filterUpToDate=!1,n});dn(it,"visible",!0,(0,Fn.getBooleanValidator)());dn(it,"transformsEnabled","all",(0,Fn.getStringValidator)());dn(it,"size");dn(it,"dragBoundFunc");dn(it,"draggable",!1,(0,Fn.getBooleanValidator)());ed.Factory.backCompat(it,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})});var td=je(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.Container=void 0;var ml=pt(),dy=En(),Nf=St(),yo=class extends dy.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let i=this.children||[],t=[];return i.forEach(function(r){e(r)&&t.push(r)}),t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let t=0;t<e.length;t++)this.add(e[t]);return this}let i=e[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){let i=this._generalFind(e,!0);return i.length>0?i[0]:void 0}_generalFind(e,i){let t=[];return this._descendants(r=>{let s=r._isMatch(e);return s&&t.push(r),!!(s&&i)}),t}_descendants(e){let i=!1,t=this.getChildren();for(let r of t){if(i=e(r),i)return!0;if(r.hasChildren()&&(i=r._descendants(e),i))return!0}return!1}toObject(){let e=dy.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(i=>{e.children.push(i.toObject())}),e}isAncestorOf(e){let i=e.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(e){let i=dy.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(t){i.add(t.clone())}),i}getAllIntersections(e){let i=[];return this.find("Shape").forEach(t=>{t.isVisible()&&t.intersects(e)&&i.push(t)}),i}_clearSelfAndDescendantCache(e){var i;super._clearSelfAndDescendantCache(e),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(t){t._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(i,t){i.index=t}),this._requestDraw()}drawScene(e,i,t){let r=this.getLayer(),s=e||r&&r.getCanvas(),l=s&&s.getContext(),d=this._getCanvasCache(),h=d&&d.scene,p=s&&s.isCache;if(!this.isVisible()&&!p)return this;if(h){l.save();let g=this.getAbsoluteTransform(i).getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,i,t);return this}drawHit(e,i){if(!this.shouldDrawHit(i))return this;let t=this.getLayer(),r=e||t&&t.hitCanvas,s=r&&r.getContext(),l=this._getCanvasCache();if(l&&l.hit){s.save();let h=this.getAbsoluteTransform(i).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,i);return this}_drawChildren(e,i,t,r){var s;let l=i&&i.getContext(),d=this.clipWidth(),h=this.clipHeight(),p=this.clipFunc(),g=typeof d=="number"&&typeof h=="number"||p,v=t===this;if(g){l.save();let b=this.getAbsoluteTransform(t),C=b.getMatrix();l.transform(C[0],C[1],C[2],C[3],C[4],C[5]),l.beginPath();let w;if(p)w=p.call(this,l,this);else{let x=this.clipX(),M=this.clipY();l.rect(x||0,M||0,d,h)}l.clip.apply(l,w),C=b.copy().invert().getMatrix(),l.transform(C[0],C[1],C[2],C[3],C[4],C[5])}let _=!v&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";_&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(b){b[e](i,t,r)}),_&&l.restore(),g&&l.restore()}getClientRect(e={}){var i;let t=e.skipTransform,r=e.relativeTo,s,l,d,h,p={x:1/0,y:1/0,width:0,height:0},g=this;(i=this.children)===null||i===void 0||i.forEach(function(b){if(!b.visible())return;let C=b.getClientRect({relativeTo:g,skipShadow:e.skipShadow,skipStroke:e.skipStroke});C.width===0&&C.height===0||(s===void 0?(s=C.x,l=C.y,d=C.x+C.width,h=C.y+C.height):(s=Math.min(s,C.x),l=Math.min(l,C.y),d=Math.max(d,C.x+C.width),h=Math.max(h,C.y+C.height)))});let v=this.find("Shape"),_=!1;for(let b=0;b<v.length;b++)if(v[b]._isVisible(this)){_=!0;break}return _&&s!==void 0?p={x:s,y:l,width:d-s,height:h-l}:p={x:0,y:0,width:0,height:0},t?p:this._transformedRect(p,r)}};Vf.Container=yo;ml.Factory.addComponentsGetterSetter(yo,"clip",["x","y","width","height"]);ml.Factory.addGetterSetter(yo,"clipX",void 0,(0,Nf.getNumberValidator)());ml.Factory.addGetterSetter(yo,"clipY",void 0,(0,Nf.getNumberValidator)());ml.Factory.addGetterSetter(yo,"clipWidth",void 0,(0,Nf.getNumberValidator)());ml.Factory.addGetterSetter(yo,"clipHeight",void 0,(0,Nf.getNumberValidator)());ml.Factory.addGetterSetter(yo,"clipFunc")});var hy=je(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.getCapturedShape=lN;ca.createEvent=uy;ca.hasPointerCapture=cN;ca.setPointerCapture=dN;ca.releaseCapture=VE;var aN=ft(),nd=new Map,NE=aN.Konva._global.PointerEvent!==void 0;function lN(n){return nd.get(n)}function uy(n){return{evt:n,pointerId:n.pointerId}}function cN(n,e){return nd.get(n)===e}function dN(n,e){VE(n),e.getStage()&&(nd.set(n,e),NE&&e._fire("gotpointercapture",uy(new PointerEvent("gotpointercapture"))))}function VE(n,e){let i=nd.get(n);if(!i)return;let t=i.getStage();t&&t.content,nd.delete(n),NE&&i._fire("lostpointercapture",uy(new PointerEvent("lostpointercapture")))}});var KE=je(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.Stage=Br.stages=void 0;var Vr=Dn(),uN=pt(),BE=td(),kn=ft(),fy=Zc(),py=Of(),hN=ft(),So=hy(),fN="Stage",pN="string",UE="px",mN="mouseout",jE="mouseleave",GE="mouseover",zE="mouseenter",HE="mousemove",QE="mousedown",WE="mouseup",id="pointermove",rd="pointerdown",vl="pointerup",od="pointercancel",gN="lostpointercapture",Bf="pointerout",Uf="pointerleave",qf="pointerover",jf="pointerenter",gy="contextmenu",$E="touchstart",YE="touchend",XE="touchmove",ZE="touchcancel",vy="wheel",vN=5,yN=[[zE,"_pointerenter"],[QE,"_pointerdown"],[HE,"_pointermove"],[WE,"_pointerup"],[jE,"_pointerleave"],[$E,"_pointerdown"],[XE,"_pointermove"],[YE,"_pointerup"],[ZE,"_pointercancel"],[GE,"_pointerover"],[vy,"_wheel"],[gy,"_contextmenu"],[rd,"_pointerdown"],[id,"_pointermove"],[vl,"_pointerup"],[od,"_pointercancel"],[gN,"_lostpointercapture"]],my={mouse:{[Bf]:mN,[Uf]:jE,[qf]:GE,[jf]:zE,[id]:HE,[rd]:QE,[vl]:WE,[od]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Bf]:"touchout",[Uf]:"touchleave",[qf]:"touchover",[jf]:"touchenter",[id]:XE,[rd]:$E,[vl]:YE,[od]:ZE,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Bf]:Bf,[Uf]:Uf,[qf]:qf,[jf]:jf,[id]:id,[rd]:rd,[vl]:vl,[od]:od,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},sd=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",gl=n=>{let e=sd(n);if(e==="pointer")return kn.Konva.pointerEventsEnabled&&my.pointer;if(e==="touch")return my.touch;if(e==="mouse")return my.mouse};function qE(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&Vr.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}var SN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";Br.stages=[];var yl=class extends BE.Container{constructor(e){super(qE(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Br.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{qE(this.attrs)}),this._checkVisibility()}_validateAdd(e){let i=e.getType()==="Layer",t=e.getType()==="FastLayer";i||t||Vr.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===pN){if(e.charAt(0)==="."){let t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var i;e.charAt(0)!=="#"?i=e:i=e.slice(1),e=document.getElementById(i)}if(!e)throw"Can not find container in document with id "+i}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let e=this.children,i=e.length,t;for(t=0;t<i;t++)e[t].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),BE.Container.prototype.clone.call(this,e)}destroy(){super.destroy();let e=this.content;e&&Vr.Util._isInDocument(e)&&this.container().removeChild(e);let i=Br.stages.indexOf(this);return i>-1&&Br.stages.splice(i,1),Vr.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Vr.Util.warn(SN),null)}_getPointerById(e){return this._pointerPositions.find(i=>i.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();let i=new fy.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),t=i.getContext()._context,r=this.children;return(e.x||e.y)&&t.translate(-1*e.x,-1*e.y),r.forEach(function(s){if(!s.isVisible())return;let l=s._toKonvaCanvas(e);t.drawImage(l._canvas,e.x,e.y,l.getWidth()/l.getPixelRatio(),l.getHeight()/l.getPixelRatio())}),i}getIntersection(e){if(!e)return null;let i=this.children,t=i.length,r=t-1,s;for(s=r;s>=0;s--){let l=i[s].getIntersection(e);if(l)return l}return null}_resizeDOM(){let e=this.width(),i=this.height();this.content&&(this.content.style.width=e+UE,this.content.style.height=i+UE),this.bufferCanvas.setSize(e,i),this.bufferHitCanvas.setSize(e,i),this.children.forEach(t=>{t.setSize({width:e,height:i}),t.draw()})}add(e,...i){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);let t=this.children.length;return t>vN&&Vr.Util.warn("The stage has "+t+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),kn.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return So.hasPointerCapture(e,this)}setPointerCapture(e){So.setPointerCapture(e,this)}releaseCapture(e){So.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){kn.Konva.isBrowser&&yN.forEach(([e,i])=>{this.content.addEventListener(e,t=>{this[i](t)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let i=gl(e.type);i&&this._fire(i.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let i=gl(e.type);i&&this._fire(i.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let i=this[e+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(e){let i=gl(e.type),t=sd(e.type);if(!i)return;this.setPointersPositions(e);let r=this._getTargetShape(t),s=!(kn.Konva.isDragging()||kn.Konva.isTransforming())||kn.Konva.hitOnDragEnabled;r&&s?(r._fireAndBubble(i.pointerout,{evt:e}),r._fireAndBubble(i.pointerleave,{evt:e}),this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this[t+"targetShape"]=null):s&&(this._fire(i.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){let i=gl(e.type),t=sd(e.type);if(!i)return;this.setPointersPositions(e);let r=!1;this._changedPointerPositions.forEach(s=>{let l=this.getIntersection(s);if(py.DD.justDragged=!1,kn.Konva["_"+t+"ListenClick"]=!0,!l||!l.isListening()){this[t+"ClickStartShape"]=void 0;return}kn.Konva.capturePointerEventsEnabled&&l.setPointerCapture(s.id),this[t+"ClickStartShape"]=l,l._fireAndBubble(i.pointerdown,{evt:e,pointerId:s.id}),r=!0;let d=e.type.indexOf("touch")>=0;l.preventDefault()&&e.cancelable&&d&&e.preventDefault()}),r||this._fire(i.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){let i=gl(e.type),t=sd(e.type);if(!i||(kn.Konva.isDragging()&&py.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!(kn.Konva.isDragging()||kn.Konva.isTransforming())||kn.Konva.hitOnDragEnabled)))return;let s={},l=!1,d=this._getTargetShape(t);this._changedPointerPositions.forEach(h=>{let p=So.getCapturedShape(h.id)||this.getIntersection(h),g=h.id,v={evt:e,pointerId:g},_=d!==p;if(_&&d&&(d._fireAndBubble(i.pointerout,Ee({},v),p),d._fireAndBubble(i.pointerleave,Ee({},v),p)),p){if(s[p._id])return;s[p._id]=!0}p&&p.isListening()?(l=!0,_&&(p._fireAndBubble(i.pointerover,Ee({},v),d),p._fireAndBubble(i.pointerenter,Ee({},v),d),this[t+"targetShape"]=p),p._fireAndBubble(i.pointermove,Ee({},v))):d&&(this._fire(i.pointerover,{evt:e,target:this,currentTarget:this,pointerId:g}),this[t+"targetShape"]=null)}),l||this._fire(i.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let i=gl(e.type),t=sd(e.type);if(!i)return;this.setPointersPositions(e);let r=this[t+"ClickStartShape"],s=this[t+"ClickEndShape"],l={},d=!1;this._changedPointerPositions.forEach(h=>{let p=So.getCapturedShape(h.id)||this.getIntersection(h);if(p){if(p.releaseCapture(h.id),l[p._id])return;l[p._id]=!0}let g=h.id,v={evt:e,pointerId:g},_=!1;kn.Konva["_"+t+"InDblClickWindow"]?(_=!0,clearTimeout(this[t+"DblTimeout"])):py.DD.justDragged||(kn.Konva["_"+t+"InDblClickWindow"]=!0,clearTimeout(this[t+"DblTimeout"])),this[t+"DblTimeout"]=setTimeout(function(){kn.Konva["_"+t+"InDblClickWindow"]=!1},kn.Konva.dblClickWindow),p&&p.isListening()?(d=!0,this[t+"ClickEndShape"]=p,p._fireAndBubble(i.pointerup,Ee({},v)),kn.Konva["_"+t+"ListenClick"]&&r&&r===p&&(p._fireAndBubble(i.pointerclick,Ee({},v)),_&&s&&s===p&&p._fireAndBubble(i.pointerdblclick,Ee({},v)))):(this[t+"ClickEndShape"]=null,kn.Konva["_"+t+"ListenClick"]&&this._fire(i.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:g}),_&&this._fire(i.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:g}))}),d||this._fire(i.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),kn.Konva["_"+t+"ListenClick"]=!1,e.cancelable&&t!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);let i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(gy,{evt:e}):this._fire(gy,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);let i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(vy,{evt:e}):this._fire(vy,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let i=So.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(vl,So.createEvent(e)),So.releaseCapture(e.pointerId)}_lostpointercapture(e){So.releaseCapture(e.pointerId)}setPointersPositions(e){let i=this._getContentPosition(),t=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-i.left)/i.scaleX,y:(s.clientY-i.top)/i.scaleY})})):(t=(e.clientX-i.left)/i.scaleX,r=(e.clientY-i.top)/i.scaleY,this.pointerPos={x:t,y:r},this._pointerPositions=[{x:t,y:r,id:Vr.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:t,y:r,id:Vr.Util._getFirstPointerId(e)}])}_setPointerPosition(e){Vr.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};let e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new fy.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new fy.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!kn.Konva.isBrowser)return;let e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return Vr.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Br.Stage=yl;yl.prototype.nodeType=fN;(0,hN._registerNode)(yl);uN.Factory.addGetterSetter(yl,"container");kn.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{Br.stages.forEach(n=>{n.batchDraw()})})});var Qn=je(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.Shape=bo.shapes=void 0;var bN=ft(),Ur=Dn(),qe=pt(),JE=En(),Gn=St(),_N=ft(),yy=hy(),eT="hasShadow",tT="shadowRGBA",nT="patternImage",iT="linearGradient",rT="radialGradient",Gf;function Sy(){return Gf||(Gf=Ur.Util.createCanvasElement().getContext("2d"),Gf)}bo.shapes={};function DN(n){let e=this.attrs.fillRule;e?n.fill(e):n.fill()}function CN(n){n.stroke()}function wN(n){let e=this.attrs.fillRule;e?n.fill(e):n.fill()}function IN(n){n.stroke()}function EN(){this._clearCache(eT)}function TN(){this._clearCache(tT)}function xN(){this._clearCache(nT)}function AN(){this._clearCache(iT)}function MN(){this._clearCache(rT)}var Te=class extends JE.Node{constructor(e){super(e);let i;for(;i=Ur.Util.getRandomColor(),!(i&&!(i in bo.shapes)););this.colorKey=i,bo.shapes[i]=this}getContext(){return Ur.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Ur.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(eT,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(nT,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){let i=Sy().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){let t=new Ur.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(bN.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let r=t.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);i.setTransform(s)}return i}}_getLinearGradient(){return this._getCache(iT,this.__getLinearGradient)}__getLinearGradient(){let e=this.fillLinearGradientColorStops();if(e){let i=Sy(),t=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=i.createLinearGradient(t.x,t.y,r.x,r.y);for(let l=0;l<e.length;l+=2)s.addColorStop(e[l],e[l+1]);return s}}_getRadialGradient(){return this._getCache(rT,this.__getRadialGradient)}__getRadialGradient(){let e=this.fillRadialGradientColorStops();if(e){let i=Sy(),t=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=i.createRadialGradient(t.x,t.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let l=0;l<e.length;l+=2)s.addColorStop(e[l],e[l+1]);return s}}getShadowRGBA(){return this._getCache(tT,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;let e=Ur.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){let i=this.getStage();if(!i)return!1;let t=i.bufferHitCanvas;return t.getContext().clear(),this.drawHit(t,void 0,!0),t.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return JE.Node.prototype.destroy.call(this),delete bo.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;let r=e||this.hasFill(),s=this.hasStroke(),l=this.getAbsoluteOpacity()!==1;if(r&&s&&l)return!0;let d=this.hasShadow(),h=this.shadowForStrokeEnabled();return!!(r&&s&&d&&h)}setStrokeHitEnabled(e){Ur.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){let e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let i=!1,t=this.getParent();for(;t;){if(t.isCached()){i=!0;break}t=t.getParent()}let r=e.skipTransform,s=e.relativeTo||i&&this.getStage()||void 0,l=this.getSelfRect(),h=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,p=l.width+h,g=l.height+h,v=!e.skipShadow&&this.hasShadow(),_=v?this.shadowOffsetX():0,b=v?this.shadowOffsetY():0,C=p+Math.abs(_),w=g+Math.abs(b),x=v&&this.shadowBlur()||0,M=C+x*2,F=w+x*2,k={width:M,height:F,x:-(h/2+x)+Math.min(_,0)+l.x,y:-(h/2+x)+Math.min(b,0)+l.y};return r?k:this._transformedRect(k,s)}drawScene(e,i,t){let r=this.getLayer(),s=e||r.getCanvas(),l=s.getContext(),d=this._getCanvasCache(),h=this.getSceneFunc(),p=this.hasShadow(),g,v,_=s.isCache,b=i===this;if(!this.isVisible()&&!b)return this;if(d){l.save();let w=this.getAbsoluteTransform(i).getMatrix();return l.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedSceneCanvas(l),l.restore(),this}if(!h)return this;if(l.save(),this._useBufferCanvas()&&!_){g=this.getStage();let w=t||g.bufferCanvas;v=w.getContext(),v.clear(),v.save(),v._applyLineJoin(this);var C=this.getAbsoluteTransform(i).getMatrix();v.transform(C[0],C[1],C[2],C[3],C[4],C[5]),h.call(this,v,this),v.restore();let x=w.pixelRatio;p&&l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(w._canvas,0,0,w.width/x,w.height/x)}else{if(l._applyLineJoin(this),!b){var C=this.getAbsoluteTransform(i).getMatrix();l.transform(C[0],C[1],C[2],C[3],C[4],C[5]),l._applyOpacity(this),l._applyGlobalCompositeOperation(this)}p&&l._applyShadow(this),h.call(this,l,this)}return l.restore(),this}drawHit(e,i,t=!1){if(!this.shouldDrawHit(i,t))return this;let r=this.getLayer(),s=e||r.hitCanvas,l=s&&s.getContext(),d=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),p=h&&h.hit;if(this.colorKey||Ur.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){l.save();let v=this.getAbsoluteTransform(i).getMatrix();return l.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(l),l.restore(),this}if(!d)return this;if(l.save(),l._applyLineJoin(this),!(this===i)){let v=this.getAbsoluteTransform(i).getMatrix();l.transform(v[0],v[1],v[2],v[3],v[4],v[5])}return d.call(this,l,this),l.restore(),this}drawHitFromCache(e=0){let i=this._getCanvasCache(),t=this._getCachedSceneCanvas(),r=i.hit,s=r.getContext(),l=r.getWidth(),d=r.getHeight(),h,p,g,v,_,b;s.clear(),s.drawImage(t._canvas,0,0,l,d);try{for(h=s.getImageData(0,0,l,d),p=h.data,g=p.length,v=Ur.Util._hexToRgb(this.colorKey),_=0;_<g;_+=4)b=p[_+3],b>e?(p[_]=v.r,p[_+1]=v.g,p[_+2]=v.b,p[_+3]=255):p[_+3]=0;s.putImageData(h,0,0)}catch(C){Ur.Util.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(e){return yy.hasPointerCapture(e,this)}setPointerCapture(e){yy.setPointerCapture(e,this)}releaseCapture(e){yy.releaseCapture(e,this)}};bo.Shape=Te;Te.prototype._fillFunc=DN;Te.prototype._strokeFunc=CN;Te.prototype._fillFuncHit=wN;Te.prototype._strokeFuncHit=IN;Te.prototype._centroid=!1;Te.prototype.nodeType="Shape";(0,_N._registerNode)(Te);Te.prototype.eventListeners={};Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",EN);Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",TN);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",xN);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",AN);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",MN);qe.Factory.addGetterSetter(Te,"stroke",void 0,(0,Gn.getStringOrGradientValidator)());qe.Factory.addGetterSetter(Te,"strokeWidth",2,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillAfterStrokeEnabled",!1);qe.Factory.addGetterSetter(Te,"hitStrokeWidth","auto",(0,Gn.getNumberOrAutoValidator)());qe.Factory.addGetterSetter(Te,"strokeHitEnabled",!0,(0,Gn.getBooleanValidator)());qe.Factory.addGetterSetter(Te,"perfectDrawEnabled",!0,(0,Gn.getBooleanValidator)());qe.Factory.addGetterSetter(Te,"shadowForStrokeEnabled",!0,(0,Gn.getBooleanValidator)());qe.Factory.addGetterSetter(Te,"lineJoin");qe.Factory.addGetterSetter(Te,"lineCap");qe.Factory.addGetterSetter(Te,"sceneFunc");qe.Factory.addGetterSetter(Te,"hitFunc");qe.Factory.addGetterSetter(Te,"dash");qe.Factory.addGetterSetter(Te,"dashOffset",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"shadowColor",void 0,(0,Gn.getStringValidator)());qe.Factory.addGetterSetter(Te,"shadowBlur",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"shadowOpacity",1,(0,Gn.getNumberValidator)());qe.Factory.addComponentsGetterSetter(Te,"shadowOffset",["x","y"]);qe.Factory.addGetterSetter(Te,"shadowOffsetX",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"shadowOffsetY",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillPatternImage");qe.Factory.addGetterSetter(Te,"fill",void 0,(0,Gn.getStringOrGradientValidator)());qe.Factory.addGetterSetter(Te,"fillPatternX",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillPatternY",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillLinearGradientColorStops");qe.Factory.addGetterSetter(Te,"strokeLinearGradientColorStops");qe.Factory.addGetterSetter(Te,"fillRadialGradientStartRadius",0);qe.Factory.addGetterSetter(Te,"fillRadialGradientEndRadius",0);qe.Factory.addGetterSetter(Te,"fillRadialGradientColorStops");qe.Factory.addGetterSetter(Te,"fillPatternRepeat","repeat");qe.Factory.addGetterSetter(Te,"fillEnabled",!0);qe.Factory.addGetterSetter(Te,"strokeEnabled",!0);qe.Factory.addGetterSetter(Te,"shadowEnabled",!0);qe.Factory.addGetterSetter(Te,"dashEnabled",!0);qe.Factory.addGetterSetter(Te,"strokeScaleEnabled",!0);qe.Factory.addGetterSetter(Te,"fillPriority","color");qe.Factory.addComponentsGetterSetter(Te,"fillPatternOffset",["x","y"]);qe.Factory.addGetterSetter(Te,"fillPatternOffsetX",0,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillPatternOffsetY",0,(0,Gn.getNumberValidator)());qe.Factory.addComponentsGetterSetter(Te,"fillPatternScale",["x","y"]);qe.Factory.addGetterSetter(Te,"fillPatternScaleX",1,(0,Gn.getNumberValidator)());qe.Factory.addGetterSetter(Te,"fillPatternScaleY",1,(0,Gn.getNumberValidator)());qe.Factory.addComponentsGetterSetter(Te,"fillLinearGradientStartPoint",["x","y"]);qe.Factory.addComponentsGetterSetter(Te,"strokeLinearGradientStartPoint",["x","y"]);qe.Factory.addGetterSetter(Te,"fillLinearGradientStartPointX",0);qe.Factory.addGetterSetter(Te,"strokeLinearGradientStartPointX",0);qe.Factory.addGetterSetter(Te,"fillLinearGradientStartPointY",0);qe.Factory.addGetterSetter(Te,"strokeLinearGradientStartPointY",0);qe.Factory.addComponentsGetterSetter(Te,"fillLinearGradientEndPoint",["x","y"]);qe.Factory.addComponentsGetterSetter(Te,"strokeLinearGradientEndPoint",["x","y"]);qe.Factory.addGetterSetter(Te,"fillLinearGradientEndPointX",0);qe.Factory.addGetterSetter(Te,"strokeLinearGradientEndPointX",0);qe.Factory.addGetterSetter(Te,"fillLinearGradientEndPointY",0);qe.Factory.addGetterSetter(Te,"strokeLinearGradientEndPointY",0);qe.Factory.addComponentsGetterSetter(Te,"fillRadialGradientStartPoint",["x","y"]);qe.Factory.addGetterSetter(Te,"fillRadialGradientStartPointX",0);qe.Factory.addGetterSetter(Te,"fillRadialGradientStartPointY",0);qe.Factory.addComponentsGetterSetter(Te,"fillRadialGradientEndPoint",["x","y"]);qe.Factory.addGetterSetter(Te,"fillRadialGradientEndPointX",0);qe.Factory.addGetterSetter(Te,"fillRadialGradientEndPointY",0);qe.Factory.addGetterSetter(Te,"fillPatternRotation",0);qe.Factory.addGetterSetter(Te,"fillRule",void 0,(0,Gn.getStringValidator)());qe.Factory.backCompat(Te,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})});var Dy=je(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.Layer=void 0;var _o=Dn(),by=td(),Sl=En(),_y=pt(),oT=Zc(),RN=St(),ON=Qn(),PN=ft(),FN="#",kN="beforeDraw",LN="draw",sT=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],NN=sT.length,cs=class extends by.Container{constructor(e){super(e),this.canvas=new oT.SceneCanvas,this.hitCanvas=new oT.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);let i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),e<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[e+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Sl.Node.prototype.moveToTop.call(this);let e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Sl.Node.prototype.moveUp.call(this))return!1;let i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Sl.Node.prototype.moveDown.call(this)){let e=this.getStage();if(e){let i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Sl.Node.prototype.moveToBottom.call(this)){let e=this.getStage();if(e){let i=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){let e=this.getNativeCanvasElement();return Sl.Node.prototype.remove.call(this),e&&e.parentNode&&_o.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:i}){return this.canvas.setSize(e,i),this.hitCanvas.setSize(e,i),this._setSmoothEnabled(),this}_validateAdd(e){let i=e.getType();i!=="Group"&&i!=="Shape"&&_o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Sl.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){_o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){_o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,_o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let i=1,t=!1;for(;;){for(let r=0;r<NN;r++){let s=sT[r],l=this._getIntersection({x:e.x+s.x*i,y:e.y+s.y*i}),d=l.shape;if(d)return d;if(t=!!l.antialiased,!l.antialiased)break}if(t)i+=1;else return null}}_getIntersection(e){let i=this.hitCanvas.pixelRatio,t=this.hitCanvas.context.getImageData(Math.round(e.x*i),Math.round(e.y*i),1,1).data,r=t[3];if(r===255){let s=_o.Util._rgbToHex(t[0],t[1],t[2]),l=ON.shapes[FN+s];return l?{shape:l}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,i){let t=this.getLayer(),r=e||t&&t.getCanvas();return this._fire(kN,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),by.Container.prototype.drawScene.call(this,r,i),this._fire(LN,{node:this}),this}drawHit(e,i){let t=this.getLayer(),r=e||t&&t.hitCanvas;return t&&t.clearBeforeDraw()&&t.getHitCanvas().getContext().clear(),by.Container.prototype.drawHit.call(this,r,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){_o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return _o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;let e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return _o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};zf.Layer=cs;cs.prototype.nodeType="Layer";(0,PN._registerNode)(cs);_y.Factory.addGetterSetter(cs,"imageSmoothingEnabled",!0);_y.Factory.addGetterSetter(cs,"clearBeforeDraw",!0);_y.Factory.addGetterSetter(cs,"hitGraphEnabled",!0,(0,RN.getBooleanValidator)())});var aT=je(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.FastLayer=void 0;var VN=Dn(),BN=Dy(),UN=ft(),ad=class extends BN.Layer{constructor(e){super(e),this.listening(!1),VN.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};Hf.FastLayer=ad;ad.prototype.nodeType="FastLayer";(0,UN._registerNode)(ad)});var Wf=je(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.Group=void 0;var qN=Dn(),jN=td(),GN=ft(),ld=class extends jN.Container{_validateAdd(e){let i=e.getType();i!=="Group"&&i!=="Shape"&&qN.Util.throw("You may only add groups and shapes to groups.")}};Qf.Group=ld;ld.prototype.nodeType="Group";(0,GN._registerNode)(ld)});var Yf=je($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.Animation=void 0;var Cy=ft(),lT=Dn(),wy=function(){return Cy.glob.performance&&Cy.glob.performance.now?function(){return Cy.glob.performance.now()}:function(){return new Date().getTime()}}(),bl=class n{constructor(e,i){this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:wy(),frameRate:0},this.func=e,this.setLayers(i)}setLayers(e){let i=[];return e&&(i=Array.isArray(e)?e:[e]),this.layers=i,this}getLayers(){return this.layers}addLayer(e){let i=this.layers,t=i.length;for(let r=0;r<t;r++)if(i[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let i=n.animations,t=i.length;for(let r=0;r<t;r++)if(i[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=wy(),n._addAnimation(this),this}stop(){return n._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let i=e.id,t=this.animations,r=t.length;for(let s=0;s<r;s++)if(t[s].id===i){this.animations.splice(s,1);break}}static _runFrames(){let e={},i=this.animations;for(let t=0;t<i.length;t++){let r=i[t],s=r.layers,l=r.func;r._updateFrameObject(wy());let d=s.length,h;if(l?h=l.call(r,r.frame)!==!1:h=!0,!!h)for(let p=0;p<d;p++){let g=s[p];g._id!==void 0&&(e[g._id]=g)}}for(let t in e)e.hasOwnProperty(t)&&e[t].batchDraw()}static _animationLoop(){let e=n;e.animations.length?(e._runFrames(),lT.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,lT.Util.requestAnimFrame(this._animationLoop))}};$f.Animation=bl;bl.animations=[];bl.animIdCounter=0;bl.animRunning=!1});var hT=je(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.Easings=qr.Tween=void 0;var Do=Dn(),zN=Yf(),HN=En(),QN=ft(),WN={node:1,duration:1,easing:1,onFinish:1,yoyo:1},$N=1,cT=2,dT=3,YN=0,uT=["fill","stroke","shadowColor"],Iy=class{constructor(e,i,t,r,s,l,d){this.prop=e,this.propFunc=i,this.begin=r,this._pos=r,this.duration=l,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=t,this._change=s-this.begin,this.pause()}fire(e){let i=this[e];i&&i()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=cT,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=dT,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){let e=this.getTimer()-this._startTime;this.state===cT?this.setTime(e):this.state===dT&&this.setTime(this.duration-e)}pause(){this.state=$N,this.fire("onPause")}getTimer(){return new Date().getTime()}},_l=class n{constructor(e){let i=this,t=e.node,r=t._id,s,l=e.easing||qr.Easings.Linear,d=!!e.yoyo,h;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=t,this._id=YN++;let p=t.getLayer()||(t instanceof QN.Konva.Stage?t.getLayers():null);p||Do.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new zN.Animation(function(){i.tween.onEnterFrame()},p),this.tween=new Iy(h,function(g){i._tweenFunc(g)},l,0,1,s*1e3,d),this._addListeners(),n.attrs[r]||(n.attrs[r]={}),n.attrs[r][this._id]||(n.attrs[r][this._id]={}),n.tweens[r]||(n.tweens[r]={});for(h in e)WN[h]===void 0&&this._addAttr(h,e[h]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,i){let t=this.node,r=t._id,s,l,d,h,p,g,v,_;if(d=n.tweens[r][e],d&&delete n.attrs[r][d][e],s=t.getAttr(e),Do.Util._isArray(i))if(l=[],p=Math.max(i.length,s.length),e==="points"&&i.length!==s.length&&(i.length>s.length?(v=s,s=Do.Util._prepareArrayForTween(s,i,t.closed())):(g=i,i=Do.Util._prepareArrayForTween(i,s,t.closed()))),e.indexOf("fill")===0)for(h=0;h<p;h++)if(h%2===0)l.push(i[h]-s[h]);else{let b=Do.Util.colorToRGBA(s[h]);_=Do.Util.colorToRGBA(i[h]),s[h]=b,l.push({r:_.r-b.r,g:_.g-b.g,b:_.b-b.b,a:_.a-b.a})}else for(h=0;h<p;h++)l.push(i[h]-s[h]);else uT.indexOf(e)!==-1?(s=Do.Util.colorToRGBA(s),_=Do.Util.colorToRGBA(i),l={r:_.r-s.r,g:_.g-s.g,b:_.b-s.b,a:_.a-s.a}):l=i-s;n.attrs[r][this._id][e]={start:s,diff:l,end:i,trueEnd:g,trueStart:v},n.tweens[r][e]=this._id}_tweenFunc(e){let i=this.node,t=n.attrs[i._id][this._id],r,s,l,d,h,p,g,v;for(r in t){if(s=t[r],l=s.start,d=s.diff,v=s.end,Do.Util._isArray(l))if(h=[],g=Math.max(l.length,v.length),r.indexOf("fill")===0)for(p=0;p<g;p++)p%2===0?h.push((l[p]||0)+d[p]*e):h.push("rgba("+Math.round(l[p].r+d[p].r*e)+","+Math.round(l[p].g+d[p].g*e)+","+Math.round(l[p].b+d[p].b*e)+","+(l[p].a+d[p].a*e)+")");else for(p=0;p<g;p++)h.push((l[p]||0)+d[p]*e);else uT.indexOf(r)!==-1?h="rgba("+Math.round(l.r+d.r*e)+","+Math.round(l.g+d.g*e)+","+Math.round(l.b+d.b*e)+","+(l.a+d.a*e)+")":h=l+d*e;i.setAttr(r,h)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{let e=this.node,i=n.attrs[e._id][this._id];i.points&&i.points.trueEnd&&e.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{let e=this.node,i=n.attrs[e._id][this._id];i.points&&i.points.trueStart&&e.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let e=this.node._id,i=this._id,t=n.tweens[e],r;this.pause();for(r in t)delete n.tweens[e][r];delete n.attrs[e][i]}};qr.Tween=_l;_l.attrs={};_l.tweens={};HN.Node.prototype.to=function(n){let e=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),e&&e()},new _l(n).play()};qr.Easings={BackEaseIn(n,e,i,t){return i*(n/=t)*n*((1.70158+1)*n-1.70158)+e},BackEaseOut(n,e,i,t){return i*((n=n/t-1)*n*((1.70158+1)*n+1.70158)+1)+e},BackEaseInOut(n,e,i,t){let r=1.70158;return(n/=t/2)<1?i/2*(n*n*(((r*=1.525)+1)*n-r))+e:i/2*((n-=2)*n*(((r*=1.525)+1)*n+r)+2)+e},ElasticEaseIn(n,e,i,t,r,s){let l=0;return n===0?e:(n/=t)===1?e+i:(s||(s=t*.3),!r||r<Math.abs(i)?(r=i,l=s/4):l=s/(2*Math.PI)*Math.asin(i/r),-(r*Math.pow(2,10*(n-=1))*Math.sin((n*t-l)*(2*Math.PI)/s))+e)},ElasticEaseOut(n,e,i,t,r,s){let l=0;return n===0?e:(n/=t)===1?e+i:(s||(s=t*.3),!r||r<Math.abs(i)?(r=i,l=s/4):l=s/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*n)*Math.sin((n*t-l)*(2*Math.PI)/s)+i+e)},ElasticEaseInOut(n,e,i,t,r,s){let l=0;return n===0?e:(n/=t/2)===2?e+i:(s||(s=t*(.3*1.5)),!r||r<Math.abs(i)?(r=i,l=s/4):l=s/(2*Math.PI)*Math.asin(i/r),n<1?-.5*(r*Math.pow(2,10*(n-=1))*Math.sin((n*t-l)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(n-=1))*Math.sin((n*t-l)*(2*Math.PI)/s)*.5+i+e)},BounceEaseOut(n,e,i,t){return(n/=t)<1/2.75?i*(7.5625*n*n)+e:n<2/2.75?i*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?i*(7.5625*(n-=2.25/2.75)*n+.9375)+e:i*(7.5625*(n-=2.625/2.75)*n+.984375)+e},BounceEaseIn(n,e,i,t){return i-qr.Easings.BounceEaseOut(t-n,0,i,t)+e},BounceEaseInOut(n,e,i,t){return n<t/2?qr.Easings.BounceEaseIn(n*2,0,i,t)*.5+e:qr.Easings.BounceEaseOut(n*2-t,0,i,t)*.5+i*.5+e},EaseIn(n,e,i,t){return i*(n/=t)*n+e},EaseOut(n,e,i,t){return-i*(n/=t)*(n-2)+e},EaseInOut(n,e,i,t){return(n/=t/2)<1?i/2*n*n+e:-i/2*(--n*(n-2)-1)+e},StrongEaseIn(n,e,i,t){return i*(n/=t)*n*n*n*n+e},StrongEaseOut(n,e,i,t){return i*((n=n/t-1)*n*n*n*n+1)+e},StrongEaseInOut(n,e,i,t){return(n/=t/2)<1?i/2*n*n*n*n*n+e:i/2*((n-=2)*n*n*n*n+2)+e},Linear(n,e,i,t){return i*n/t+e}}});var gT=je(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.Konva=void 0;var XN=ft(),Ey=Dn(),ZN=En(),KN=td(),fT=KE(),JN=Dy(),e9=aT(),t9=Wf(),n9=Of(),pT=Qn(),i9=Yf(),mT=hT(),r9=oy(),o9=Zc();Dl.Konva=Ey.Util._assign(XN.Konva,{Util:Ey.Util,Transform:Ey.Transform,Node:ZN.Node,Container:KN.Container,Stage:fT.Stage,stages:fT.stages,Layer:JN.Layer,FastLayer:e9.FastLayer,Group:t9.Group,DD:n9.DD,Shape:pT.Shape,shapes:pT.shapes,Animation:i9.Animation,Tween:mT.Tween,Easings:mT.Easings,Context:r9.Context,Canvas:o9.Canvas});Dl.default=Dl.Konva});var yT=je(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.Arc=void 0;var Xf=pt(),s9=Qn(),vT=ft(),Zf=St(),a9=ft(),dr=class extends s9.Shape{_sceneFunc(e){let i=vT.Konva.getAngle(this.angle()),t=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,i,t),e.arc(0,0,this.innerRadius(),i,0,!t),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),i=this.outerRadius(),t=this.clockwise(),r=vT.Konva.getAngle(t?360-this.angle():this.angle()),s=Math.cos(Math.min(r,Math.PI)),l=1,d=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),h=Math.sin(Math.min(r,Math.PI/2)),p=s*(s>0?e:i),g=l*(l>0?i:e),v=d*(d>0?e:i),_=h*(h>0?i:e);return{x:p,y:t?-1*_:v,width:g-p,height:_-v}}};Kf.Arc=dr;dr.prototype._centroid=!0;dr.prototype.className="Arc";dr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,a9._registerNode)(dr);Xf.Factory.addGetterSetter(dr,"innerRadius",0,(0,Zf.getNumberValidator)());Xf.Factory.addGetterSetter(dr,"outerRadius",0,(0,Zf.getNumberValidator)());Xf.Factory.addGetterSetter(dr,"angle",0,(0,Zf.getNumberValidator)());Xf.Factory.addGetterSetter(dr,"clockwise",!1,(0,Zf.getBooleanValidator)())});var xy=je(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.Line=void 0;var Jf=pt(),l9=ft(),c9=Qn(),bT=St();function Ty(n,e,i,t,r,s,l){let d=Math.sqrt(Math.pow(i-n,2)+Math.pow(t-e,2)),h=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-t,2)),p=l*d/(d+h),g=l*h/(d+h),v=i-p*(r-n),_=t-p*(s-e),b=i+g*(r-n),C=t+g*(s-e);return[v,_,b,C]}function ST(n,e){let i=n.length,t=[];for(let r=2;r<i-2;r+=2){let s=Ty(n[r-2],n[r-1],n[r],n[r+1],n[r+2],n[r+3],e);isNaN(s[0])||(t.push(s[0]),t.push(s[1]),t.push(n[r]),t.push(n[r+1]),t.push(s[2]),t.push(s[3]))}return t}var jr=class extends c9.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let i=this.points(),t=i.length,r=this.tension(),s=this.closed(),l=this.bezier(),d,h,p;if(t){if(e.beginPath(),e.moveTo(i[0],i[1]),r!==0&&t>4){for(d=this.getTensionPoints(),h=d.length,p=s?0:4,s||e.quadraticCurveTo(d[0],d[1],d[2],d[3]);p<h-2;)e.bezierCurveTo(d[p++],d[p++],d[p++],d[p++],d[p++],d[p++]);s||e.quadraticCurveTo(d[h-2],d[h-1],i[t-2],i[t-1])}else if(l)for(p=2;p<t;)e.bezierCurveTo(i[p++],i[p++],i[p++],i[p++],i[p++],i[p++]);else for(p=2;p<t;p+=2)e.lineTo(i[p],i[p+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():ST(this.points(),this.tension())}_getTensionPointsClosed(){let e=this.points(),i=e.length,t=this.tension(),r=Ty(e[i-2],e[i-1],e[0],e[1],e[2],e[3],t),s=Ty(e[i-4],e[i-3],e[i-2],e[i-1],e[0],e[1],t),l=ST(e,t);return[r[2],r[3]].concat(l).concat([s[0],s[1],e[i-2],e[i-1],s[2],s[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let i=e[0],t=e[0],r=e[1],s=e[1],l,d;for(let h=0;h<e.length/2;h++)l=e[h*2],d=e[h*2+1],i=Math.min(i,l),t=Math.max(t,l),r=Math.min(r,d),s=Math.max(s,d);return{x:i,y:r,width:t-i,height:s-r}}};ep.Line=jr;jr.prototype.className="Line";jr.prototype._attrsAffectingSize=["points","bezier","tension"];(0,l9._registerNode)(jr);Jf.Factory.addGetterSetter(jr,"closed",!1);Jf.Factory.addGetterSetter(jr,"bezier",!1);Jf.Factory.addGetterSetter(jr,"tension",0,(0,bT.getNumberValidator)());Jf.Factory.addGetterSetter(jr,"points",[],(0,bT.getNumberArrayValidator)())});var _T=je(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.t2length=ii.getQuadraticArcLength=ii.getCubicArcLength=ii.binomialCoefficients=ii.cValues=ii.tValues=void 0;ii.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]];ii.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]];ii.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];var d9=(n,e,i)=>{let t,r,l=i/2;t=0;for(let d=0;d<20;d++)r=l*ii.tValues[20][d]+l,t+=ii.cValues[20][d]*h9(n,e,r);return l*t};ii.getCubicArcLength=d9;var u9=(n,e,i)=>{i===void 0&&(i=1);let t=n[0]-2*n[1]+n[2],r=e[0]-2*e[1]+e[2],s=2*n[1]-2*n[0],l=2*e[1]-2*e[0],d=4*(t*t+r*r),h=4*(t*s+r*l),p=s*s+l*l;if(d===0)return i*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(e[2]-e[0],2));let g=h/(2*d),v=p/d,_=i+g,b=v-g*g,C=_*_+b>0?Math.sqrt(_*_+b):0,w=g*g+b>0?Math.sqrt(g*g+b):0,x=g+Math.sqrt(g*g+b)!==0?b*Math.log(Math.abs((_+C)/(g+w))):0;return Math.sqrt(d)/2*(_*C-g*w+x)};ii.getQuadraticArcLength=u9;function h9(n,e,i){let t=Ay(1,i,n),r=Ay(1,i,e),s=t*t+r*r;return Math.sqrt(s)}var Ay=(n,e,i)=>{let t=i.length-1,r,s;if(t===0)return 0;if(n===0){s=0;for(let l=0;l<=t;l++)s+=ii.binomialCoefficients[t][l]*Math.pow(1-e,t-l)*Math.pow(e,l)*i[l];return s}else{r=new Array(t);for(let l=0;l<t;l++)r[l]=t*(i[l+1]-i[l]);return Ay(n-1,e,r)}},f9=(n,e,i)=>{let t=1,r=n/e,s=(n-i(r))/e,l=0;for(;t>.001;){let d=i(r+s),h=Math.abs(n-d)/e;if(h<t)t=h,r+=s;else{let p=i(r-s),g=Math.abs(n-p)/e;g<t?(t=g,r-=s):s/=2}if(l++,l>500)break}return r};ii.t2length=f9});var np=je(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.Path=void 0;var p9=pt(),m9=Qn(),g9=ft(),Cl=_T(),da=class n extends m9.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=n.parsePathData(this.data()),this.pathLength=n.getPathLength(this.dataArray)}_sceneFunc(e){let i=this.dataArray;e.beginPath();let t=!1;for(let w=0;w<i.length;w++){let x=i[w].command,M=i[w].points;switch(x){case"L":e.lineTo(M[0],M[1]);break;case"M":e.moveTo(M[0],M[1]);break;case"C":e.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5]);break;case"Q":e.quadraticCurveTo(M[0],M[1],M[2],M[3]);break;case"A":var r=M[0],s=M[1],l=M[2],d=M[3],h=M[4],p=M[5],g=M[6],v=M[7],_=l>d?l:d,b=l>d?1:l/d,C=l>d?d/l:1;e.translate(r,s),e.rotate(g),e.scale(b,C),e.arc(0,0,_,h,h+p,1-v),e.scale(1/b,1/C),e.rotate(-g),e.translate(-r,-s);break;case"z":t=!0,e.closePath();break}}!t&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(h){if(h.command==="A"){let p=h.points[4],g=h.points[5],v=h.points[4]+g,_=Math.PI/180;if(Math.abs(p-v)<_&&(_=Math.abs(p-v)),g<0)for(let b=p-_;b>v;b-=_){let C=n.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],b,0);e.push(C.x,C.y)}else for(let b=p+_;b<v;b+=_){let C=n.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],b,0);e.push(C.x,C.y)}}else if(h.command==="C")for(let p=0;p<=1;p+=.01){let g=n.getPointOnCubicBezier(p,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);e.push(g.x,g.y)}else e=e.concat(h.points)});let i=e[0],t=e[0],r=e[1],s=e[1],l,d;for(let h=0;h<e.length/2;h++)l=e[h*2],d=e[h*2+1],isNaN(l)||(i=Math.min(i,l),t=Math.max(t,l)),isNaN(d)||(r=Math.min(r,d),s=Math.max(s,d));return{x:i,y:r,width:t-i,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){return n.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,i,t,r){return Math.sqrt((t-e)*(t-e)+(r-i)*(r-i))}static getPathLength(e){let i=0;for(let t=0;t<e.length;++t)i+=e[t].pathLength;return i}static getPointAtLengthOfDataArray(e,i){let t,r=0,s=i.length;if(!s)return null;for(;r<s&&e>i[r].pathLength;)e-=i[r].pathLength,++r;if(r===s)return t=i[r-1].points.slice(-2),{x:t[0],y:t[1]};if(e<.01)return t=i[r].points.slice(0,2),{x:t[0],y:t[1]};let l=i[r],d=l.points;switch(l.command){case"L":return n.getPointOnLine(e,l.start.x,l.start.y,d[0],d[1]);case"C":return n.getPointOnCubicBezier((0,Cl.t2length)(e,n.getPathLength(i),w=>(0,Cl.getCubicArcLength)([l.start.x,d[0],d[2],d[4]],[l.start.y,d[1],d[3],d[5]],w)),l.start.x,l.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return n.getPointOnQuadraticBezier((0,Cl.t2length)(e,n.getPathLength(i),w=>(0,Cl.getQuadraticArcLength)([l.start.x,d[0],d[2]],[l.start.y,d[1],d[3]],w)),l.start.x,l.start.y,d[0],d[1],d[2],d[3]);case"A":var h=d[0],p=d[1],g=d[2],v=d[3],_=d[4],b=d[5],C=d[6];return _+=b*e/l.pathLength,n.getPointOnEllipticalArc(h,p,g,v,_,C)}return null}static getPointOnLine(e,i,t,r,s,l,d){l=l??i,d=d??t;let h=this.getLineLength(i,t,r,s);if(h<1e-10)return{x:i,y:t};if(r===i)return{x:l,y:d+(s>t?e:-e)};let p=(s-t)/(r-i),g=Math.sqrt(e*e/(1+p*p))*(r<i?-1:1),v=p*g;if(Math.abs(d-t-p*(l-i))<1e-10)return{x:l+g,y:d+v};let _=((l-i)*(r-i)+(d-t)*(s-t))/(h*h),b=i+_*(r-i),C=t+_*(s-t),w=this.getLineLength(l,d,b,C),x=Math.sqrt(e*e-w*w),M=Math.sqrt(x*x/(1+p*p))*(r<i?-1:1),F=p*M;return{x:b+M,y:C+F}}static getPointOnCubicBezier(e,i,t,r,s,l,d,h,p){function g(x){return x*x*x}function v(x){return 3*x*x*(1-x)}function _(x){return 3*x*(1-x)*(1-x)}function b(x){return(1-x)*(1-x)*(1-x)}let C=h*g(e)+l*v(e)+r*_(e)+i*b(e),w=p*g(e)+d*v(e)+s*_(e)+t*b(e);return{x:C,y:w}}static getPointOnQuadraticBezier(e,i,t,r,s,l,d){function h(b){return b*b}function p(b){return 2*b*(1-b)}function g(b){return(1-b)*(1-b)}let v=l*h(e)+r*p(e)+i*g(e),_=d*h(e)+s*p(e)+t*g(e);return{x:v,y:_}}static getPointOnEllipticalArc(e,i,t,r,s,l){let d=Math.cos(l),h=Math.sin(l),p={x:t*Math.cos(s),y:r*Math.sin(s)};return{x:e+(p.x*d-p.y*h),y:i+(p.x*h+p.y*d)}}static parsePathData(e){if(!e)return[];let i=e,t=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var r=0;r<t.length;r++)i=i.replace(new RegExp(t[r],"g"),"|"+t[r]);let s=i.split("|"),l=[],d=[],h=0,p=0,g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,v;for(r=1;r<s.length;r++){let $=s[r],ne=$.charAt(0);for($=$.slice(1),d.length=0;v=g.exec($);)d.push(v[0]);let O=[];for(let j=0,T=d.length;j<T;j++){if(d[j]==="00"){O.push(0,0);continue}let Z=parseFloat(d[j]);isNaN(Z)?O.push(0):O.push(Z)}for(;O.length>0&&!isNaN(O[0]);){let j="",T=[],Z=h,ge=p;var _,b,C,w,x,M,F,k,L,U;switch(ne){case"l":h+=O.shift(),p+=O.shift(),j="L",T.push(h,p);break;case"L":h=O.shift(),p=O.shift(),T.push(h,p);break;case"m":var H=O.shift(),G=O.shift();if(h+=H,p+=G,j="M",l.length>2&&l[l.length-1].command==="z"){for(let oe=l.length-2;oe>=0;oe--)if(l[oe].command==="M"){h=l[oe].points[0]+H,p=l[oe].points[1]+G;break}}T.push(h,p),ne="l";break;case"M":h=O.shift(),p=O.shift(),j="M",T.push(h,p),ne="L";break;case"h":h+=O.shift(),j="L",T.push(h,p);break;case"H":h=O.shift(),j="L",T.push(h,p);break;case"v":p+=O.shift(),j="L",T.push(h,p);break;case"V":p=O.shift(),j="L",T.push(h,p);break;case"C":T.push(O.shift(),O.shift(),O.shift(),O.shift()),h=O.shift(),p=O.shift(),T.push(h,p);break;case"c":T.push(h+O.shift(),p+O.shift(),h+O.shift(),p+O.shift()),h+=O.shift(),p+=O.shift(),j="C",T.push(h,p);break;case"S":b=h,C=p,_=l[l.length-1],_.command==="C"&&(b=h+(h-_.points[2]),C=p+(p-_.points[3])),T.push(b,C,O.shift(),O.shift()),h=O.shift(),p=O.shift(),j="C",T.push(h,p);break;case"s":b=h,C=p,_=l[l.length-1],_.command==="C"&&(b=h+(h-_.points[2]),C=p+(p-_.points[3])),T.push(b,C,h+O.shift(),p+O.shift()),h+=O.shift(),p+=O.shift(),j="C",T.push(h,p);break;case"Q":T.push(O.shift(),O.shift()),h=O.shift(),p=O.shift(),T.push(h,p);break;case"q":T.push(h+O.shift(),p+O.shift()),h+=O.shift(),p+=O.shift(),j="Q",T.push(h,p);break;case"T":b=h,C=p,_=l[l.length-1],_.command==="Q"&&(b=h+(h-_.points[0]),C=p+(p-_.points[1])),h=O.shift(),p=O.shift(),j="Q",T.push(b,C,h,p);break;case"t":b=h,C=p,_=l[l.length-1],_.command==="Q"&&(b=h+(h-_.points[0]),C=p+(p-_.points[1])),h+=O.shift(),p+=O.shift(),j="Q",T.push(b,C,h,p);break;case"A":w=O.shift(),x=O.shift(),M=O.shift(),F=O.shift(),k=O.shift(),L=h,U=p,h=O.shift(),p=O.shift(),j="A",T=this.convertEndpointToCenterParameterization(L,U,h,p,F,k,w,x,M);break;case"a":w=O.shift(),x=O.shift(),M=O.shift(),F=O.shift(),k=O.shift(),L=h,U=p,h+=O.shift(),p+=O.shift(),j="A",T=this.convertEndpointToCenterParameterization(L,U,h,p,F,k,w,x,M);break}l.push({command:j||ne,points:T,start:{x:Z,y:ge},pathLength:this.calcLength(Z,ge,j||ne,T)})}(ne==="z"||ne==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(e,i,t,r){let s,l,d,h,p=n;switch(t){case"L":return p.getLineLength(e,i,r[0],r[1]);case"C":return(0,Cl.getCubicArcLength)([e,r[0],r[2],r[4]],[i,r[1],r[3],r[5]],1);case"Q":return(0,Cl.getQuadraticArcLength)([e,r[0],r[2]],[i,r[1],r[3]],1);case"A":s=0;var g=r[4],v=r[5],_=r[4]+v,b=Math.PI/180;if(Math.abs(g-_)<b&&(b=Math.abs(g-_)),l=p.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],g,0),v<0)for(h=g-b;h>_;h-=b)d=p.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;else for(h=g+b;h<_;h+=b)d=p.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;return d=p.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],_,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),s}return 0}static convertEndpointToCenterParameterization(e,i,t,r,s,l,d,h,p){let g=p*(Math.PI/180),v=Math.cos(g)*(e-t)/2+Math.sin(g)*(i-r)/2,_=-1*Math.sin(g)*(e-t)/2+Math.cos(g)*(i-r)/2,b=v*v/(d*d)+_*_/(h*h);b>1&&(d*=Math.sqrt(b),h*=Math.sqrt(b));let C=Math.sqrt((d*d*(h*h)-d*d*(_*_)-h*h*(v*v))/(d*d*(_*_)+h*h*(v*v)));s===l&&(C*=-1),isNaN(C)&&(C=0);let w=C*d*_/h,x=C*-h*v/d,M=(e+t)/2+Math.cos(g)*w-Math.sin(g)*x,F=(i+r)/2+Math.sin(g)*w+Math.cos(g)*x,k=function(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])},L=function(O,j){return(O[0]*j[0]+O[1]*j[1])/(k(O)*k(j))},U=function(O,j){return(O[0]*j[1]<O[1]*j[0]?-1:1)*Math.acos(L(O,j))},H=U([1,0],[(v-w)/d,(_-x)/h]),G=[(v-w)/d,(_-x)/h],$=[(-1*v-w)/d,(-1*_-x)/h],ne=U(G,$);return L(G,$)<=-1&&(ne=Math.PI),L(G,$)>=1&&(ne=0),l===0&&ne>0&&(ne=ne-2*Math.PI),l===1&&ne<0&&(ne=ne+2*Math.PI),[M,F,d,h,H,ne,g,l]}};tp.Path=da;da.prototype.className="Path";da.prototype._attrsAffectingSize=["data"];(0,g9._registerNode)(da);p9.Factory.addGetterSetter(da,"data")});var wT=je(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.Arrow=void 0;var ip=pt(),v9=xy(),CT=St(),y9=ft(),DT=np(),Co=class extends v9.Line{_sceneFunc(e){super._sceneFunc(e);let i=Math.PI*2,t=this.points(),r=t,s=this.tension()!==0&&t.length>4;s&&(r=this.getTensionPoints());let l=this.pointerLength(),d=t.length,h,p;if(s){let _=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],t[d-2],t[d-1]],b=DT.Path.calcLength(r[r.length-4],r[r.length-3],"C",_),C=DT.Path.getPointOnQuadraticBezier(Math.min(1,1-l/b),_[0],_[1],_[2],_[3],_[4],_[5]);h=t[d-2]-C.x,p=t[d-1]-C.y}else h=t[d-2]-t[d-4],p=t[d-1]-t[d-3];let g=(Math.atan2(p,h)+i)%i,v=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(t[d-2],t[d-1]),e.rotate(g),e.moveTo(0,0),e.lineTo(-l,v/2),e.lineTo(-l,-v/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(t[0],t[1]),s?(h=(r[0]+r[2])/2-t[0],p=(r[1]+r[3])/2-t[1]):(h=t[2]-t[0],p=t[3]-t[1]),e.rotate((Math.atan2(-p,-h)+i)%i),e.moveTo(0,0),e.lineTo(-l,v/2),e.lineTo(-l,-v/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){let i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),i=this.pointerWidth()/2;return{x:e.x-i,y:e.y-i,width:e.width+i*2,height:e.height+i*2}}};rp.Arrow=Co;Co.prototype.className="Arrow";(0,y9._registerNode)(Co);ip.Factory.addGetterSetter(Co,"pointerLength",10,(0,CT.getNumberValidator)());ip.Factory.addGetterSetter(Co,"pointerWidth",10,(0,CT.getNumberValidator)());ip.Factory.addGetterSetter(Co,"pointerAtBeginning",!1);ip.Factory.addGetterSetter(Co,"pointerAtEnding",!0)});var IT=je(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.Circle=void 0;var S9=pt(),b9=Qn(),_9=St(),D9=ft(),ds=class extends b9.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};op.Circle=ds;ds.prototype._centroid=!0;ds.prototype.className="Circle";ds.prototype._attrsAffectingSize=["radius"];(0,D9._registerNode)(ds);S9.Factory.addGetterSetter(ds,"radius",0,(0,_9.getNumberValidator)())});var TT=je(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.Ellipse=void 0;var My=pt(),C9=Qn(),ET=St(),w9=ft(),Gr=class extends C9.Shape{_sceneFunc(e){let i=this.radiusX(),t=this.radiusY();e.beginPath(),e.save(),i!==t&&e.scale(1,t/i),e.arc(0,0,i,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};sp.Ellipse=Gr;Gr.prototype.className="Ellipse";Gr.prototype._centroid=!0;Gr.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,w9._registerNode)(Gr);My.Factory.addComponentsGetterSetter(Gr,"radius",["x","y"]);My.Factory.addGetterSetter(Gr,"radiusX",0,(0,ET.getNumberValidator)());My.Factory.addGetterSetter(Gr,"radiusY",0,(0,ET.getNumberValidator)())});var xT=je(ap=>{"use strict";Object.defineProperty(ap,"__esModule",{value:!0});ap.Image=void 0;var Ry=Dn(),ua=pt(),I9=Qn(),E9=ft(),cd=St(),$i=class n extends I9.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){let e=!!this.cornerRadius(),i=this.hasShadow();return e&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(e){let i=this.getWidth(),t=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image,l;if(s){let d=this.attrs.cropWidth,h=this.attrs.cropHeight;d&&h?l=[s,this.cropX(),this.cropY(),d,h,0,0,i,t]:l=[s,0,0,i,t]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?Ry.Util.drawRoundedRectPath(e,i,t,r):e.rect(0,0,i,t),e.closePath(),e.fillStrokeShape(this)),s&&(r&&e.clip(),e.drawImage.apply(e,l))}_hitFunc(e){let i=this.width(),t=this.height(),r=this.cornerRadius();e.beginPath(),r?Ry.Util.drawRoundedRectPath(e,i,t,r):e.rect(0,0,i,t),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,i;return(e=this.attrs.width)!==null&&e!==void 0?e:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var e,i;return(e=this.attrs.height)!==null&&e!==void 0?e:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(e,i,t=null){let r=Ry.Util.createImageElement();r.onload=function(){let s=new n({image:r});i(s)},r.onerror=t,r.crossOrigin="Anonymous",r.src=e}};ap.Image=$i;$i.prototype.className="Image";(0,E9._registerNode)($i);ua.Factory.addGetterSetter($i,"cornerRadius",0,(0,cd.getNumberOrArrayOfNumbersValidator)(4));ua.Factory.addGetterSetter($i,"image");ua.Factory.addComponentsGetterSetter($i,"crop",["x","y","width","height"]);ua.Factory.addGetterSetter($i,"cropX",0,(0,cd.getNumberValidator)());ua.Factory.addGetterSetter($i,"cropY",0,(0,cd.getNumberValidator)());ua.Factory.addGetterSetter($i,"cropWidth",0,(0,cd.getNumberValidator)());ua.Factory.addGetterSetter($i,"cropHeight",0,(0,cd.getNumberValidator)())});var RT=je(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.Tag=wl.Label=void 0;var lp=pt(),T9=Qn(),x9=Wf(),Ly=St(),AT=ft(),MT=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],A9="Change.konva",M9="none",Oy="up",Py="right",Fy="down",ky="left",R9=MT.length,dd=class extends x9.Group{constructor(e){super(e),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let i=this,t,r=function(){i._sync()};for(t=0;t<R9;t++)e.on(MT[t]+A9,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),i=this.getTag(),t,r,s,l,d,h,p;if(e&&i){switch(t=e.width(),r=e.height(),s=i.pointerDirection(),l=i.pointerWidth(),p=i.pointerHeight(),d=0,h=0,s){case Oy:d=t/2,h=-1*p;break;case Py:d=t+l,h=r/2;break;case Fy:d=t/2,h=r+p;break;case ky:d=-1*l,h=r/2;break}i.setAttrs({x:-1*d,y:-1*h,width:t,height:r}),e.setAttrs({x:-1*d,y:-1*h})}}};wl.Label=dd;dd.prototype.className="Label";(0,AT._registerNode)(dd);var wo=class extends T9.Shape{_sceneFunc(e){let i=this.width(),t=this.height(),r=this.pointerDirection(),s=this.pointerWidth(),l=this.pointerHeight(),d=this.cornerRadius(),h=0,p=0,g=0,v=0;typeof d=="number"?h=p=g=v=Math.min(d,i/2,t/2):(h=Math.min(d[0]||0,i/2,t/2),p=Math.min(d[1]||0,i/2,t/2),v=Math.min(d[2]||0,i/2,t/2),g=Math.min(d[3]||0,i/2,t/2)),e.beginPath(),e.moveTo(h,0),r===Oy&&(e.lineTo((i-s)/2,0),e.lineTo(i/2,-1*l),e.lineTo((i+s)/2,0)),e.lineTo(i-p,0),e.arc(i-p,p,p,Math.PI*3/2,0,!1),r===Py&&(e.lineTo(i,(t-l)/2),e.lineTo(i+s,t/2),e.lineTo(i,(t+l)/2)),e.lineTo(i,t-v),e.arc(i-v,t-v,v,0,Math.PI/2,!1),r===Fy&&(e.lineTo((i+s)/2,t),e.lineTo(i/2,t+l),e.lineTo((i-s)/2,t)),e.lineTo(g,t),e.arc(g,t-g,g,Math.PI/2,Math.PI,!1),r===ky&&(e.lineTo(0,(t+l)/2),e.lineTo(-1*s,t/2),e.lineTo(0,(t-l)/2)),e.lineTo(0,h),e.arc(h,h,h,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,i=0,t=this.pointerWidth(),r=this.pointerHeight(),s=this.pointerDirection(),l=this.width(),d=this.height();return s===Oy?(i-=r,d+=r):s===Fy?d+=r:s===ky?(e-=t*1.5,l+=t):s===Py&&(l+=t*1.5),{x:e,y:i,width:l,height:d}}};wl.Tag=wo;wo.prototype.className="Tag";(0,AT._registerNode)(wo);lp.Factory.addGetterSetter(wo,"pointerDirection",M9);lp.Factory.addGetterSetter(wo,"pointerWidth",0,(0,Ly.getNumberValidator)());lp.Factory.addGetterSetter(wo,"pointerHeight",0,(0,Ly.getNumberValidator)());lp.Factory.addGetterSetter(wo,"cornerRadius",0,(0,Ly.getNumberOrArrayOfNumbersValidator)(4))});var Ny=je(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.Rect=void 0;var O9=pt(),P9=Qn(),F9=ft(),k9=Dn(),L9=St(),Il=class extends P9.Shape{_sceneFunc(e){let i=this.cornerRadius(),t=this.width(),r=this.height();e.beginPath(),i?k9.Util.drawRoundedRectPath(e,t,r,i):e.rect(0,0,t,r),e.closePath(),e.fillStrokeShape(this)}};cp.Rect=Il;Il.prototype.className="Rect";(0,F9._registerNode)(Il);O9.Factory.addGetterSetter(Il,"cornerRadius",0,(0,L9.getNumberOrArrayOfNumbersValidator)(4))});var FT=je(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.RegularPolygon=void 0;var OT=pt(),N9=Qn(),PT=St(),V9=ft(),Io=class extends N9.Shape{_sceneFunc(e){let i=this._getPoints();e.beginPath(),e.moveTo(i[0].x,i[0].y);for(let t=1;t<i.length;t++)e.lineTo(i[t].x,i[t].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,i=this.attrs.radius||0,t=[];for(let r=0;r<e;r++)t.push({x:i*Math.sin(r*2*Math.PI/e),y:-1*i*Math.cos(r*2*Math.PI/e)});return t}getSelfRect(){let e=this._getPoints(),i=e[0].x,t=e[0].y,r=e[0].x,s=e[0].y;return e.forEach(l=>{i=Math.min(i,l.x),t=Math.max(t,l.x),r=Math.min(r,l.y),s=Math.max(s,l.y)}),{x:i,y:r,width:t-i,height:s-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};dp.RegularPolygon=Io;Io.prototype.className="RegularPolygon";Io.prototype._centroid=!0;Io.prototype._attrsAffectingSize=["radius"];(0,V9._registerNode)(Io);OT.Factory.addGetterSetter(Io,"radius",0,(0,PT.getNumberValidator)());OT.Factory.addGetterSetter(Io,"sides",0,(0,PT.getNumberValidator)())});var VT=je(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.Ring=void 0;var LT=pt(),B9=Qn(),NT=St(),U9=ft(),kT=Math.PI*2,Eo=class extends B9.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,kT,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),kT,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};up.Ring=Eo;Eo.prototype.className="Ring";Eo.prototype._centroid=!0;Eo.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,U9._registerNode)(Eo);LT.Factory.addGetterSetter(Eo,"innerRadius",0,(0,NT.getNumberValidator)());LT.Factory.addGetterSetter(Eo,"outerRadius",0,(0,NT.getNumberValidator)())});var UT=je(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.Sprite=void 0;var ha=pt(),q9=Qn(),j9=Yf(),BT=St(),G9=ft(),Yi=class extends q9.Shape{constructor(e){super(e),this._updated=!0,this.anim=new j9.Animation(()=>{let i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){let i=this.animation(),t=this.frameIndex(),r=t*4,s=this.animations()[i],l=this.frameOffsets(),d=s[r+0],h=s[r+1],p=s[r+2],g=s[r+3],v=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,g),e.closePath(),e.fillStrokeShape(this)),v)if(l){let _=l[i],b=t*2;e.drawImage(v,d,h,p,g,_[b+0],_[b+1],p,g)}else e.drawImage(v,d,h,p,g,0,0,p,g)}_hitFunc(e){let i=this.animation(),t=this.frameIndex(),r=t*4,s=this.animations()[i],l=this.frameOffsets(),d=s[r+2],h=s[r+3];if(e.beginPath(),l){let p=l[i],g=t*2;e.rect(p[g+0],p[g+1],d,h)}else e.rect(0,0,d,h);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){let e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;let e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){let e=this.frameIndex(),i=this.animation(),t=this.animations(),r=t[i],s=r.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}};hp.Sprite=Yi;Yi.prototype.className="Sprite";(0,G9._registerNode)(Yi);ha.Factory.addGetterSetter(Yi,"animation");ha.Factory.addGetterSetter(Yi,"animations");ha.Factory.addGetterSetter(Yi,"frameOffsets");ha.Factory.addGetterSetter(Yi,"image");ha.Factory.addGetterSetter(Yi,"frameIndex",0,(0,BT.getNumberValidator)());ha.Factory.addGetterSetter(Yi,"frameRate",17,(0,BT.getNumberValidator)());ha.Factory.backCompat(Yi,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})});var qT=je(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.Star=void 0;var Vy=pt(),z9=Qn(),By=St(),H9=ft(),zr=class extends z9.Shape{_sceneFunc(e){let i=this.innerRadius(),t=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-t);for(let s=1;s<r*2;s++){let l=s%2===0?t:i,d=l*Math.sin(s*Math.PI/r),h=-1*l*Math.cos(s*Math.PI/r);e.lineTo(d,h)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};fp.Star=zr;zr.prototype.className="Star";zr.prototype._centroid=!0;zr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,H9._registerNode)(zr);Vy.Factory.addGetterSetter(zr,"numPoints",5,(0,By.getNumberValidator)());Vy.Factory.addGetterSetter(zr,"innerRadius",0,(0,By.getNumberValidator)());Vy.Factory.addGetterSetter(zr,"outerRadius",0,(0,By.getNumberValidator)())});var zy=je(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.Text=void 0;hd.stringToArray=QT;var Gy=Dn(),di=pt(),Q9=Qn(),Uy=ft(),us=St(),W9=ft();function QT(n){return[...n].reduce((e,i,t,r)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(i)?e.push(i):new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(r[t+1]||""))?e.push(i+r[t+1]):t>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?e[e.length-1]+=i:e.push(i),e),[])}var El="auto",$9="center",WT="inherit",ud="justify",Y9="Change.konva",X9="2d",jT="-",$T="left",Z9="text",K9="Text",J9="top",e7="bottom",GT="middle",YT="normal",t7="px ",pp=" ",n7="right",zT="rtl",i7="word",r7="char",HT="none",qy="\u2026",XT=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],o7=XT.length;function s7(n){return n.split(",").map(e=>{e=e.trim();let i=e.indexOf(" ")>=0,t=e.indexOf('"')>=0||e.indexOf("'")>=0;return i&&!t&&(e=`"${e}"`),e}).join(", ")}var mp;function jy(){return mp||(mp=Gy.Util.createCanvasElement().getContext(X9),mp)}function a7(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function l7(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function c7(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}var Sn=class extends Q9.Shape{constructor(e){super(c7(e)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<o7;i++)this.on(XT[i]+Y9,this._setTextData);this._setTextData()}_sceneFunc(e){let i=this.textArr,t=i.length;if(!this.text())return;let r=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,d=this.verticalAlign(),h=this.direction(),p=0,g=this.align(),v=this.getWidth(),_=this.letterSpacing(),b=this.fill(),C=this.textDecoration(),w=C.indexOf("underline")!==-1,x=C.indexOf("line-through")!==-1,M;h=h===WT?e.direction:h;let F=l/2,k=GT;if(Uy.Konva._fixTextRendering){let Z=this.measureSize("M");k="alphabetic",F=(Z.fontBoundingBoxAscent-Z.fontBoundingBoxDescent)/2+l/2}var L=0,U=0;for(h===zT&&e.setAttr("direction",h),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",k),e.setAttr("textAlign",$T),d===GT?p=(this.getHeight()-t*l-r*2)/2:d===e7&&(p=this.getHeight()-t*l-r*2),e.translate(r,p+r),M=0;M<t;M++){var L=0,U=0,H=i[M],G=H.text,$=H.width,ne=H.lastInParagraph,O,j,T;if(e.save(),g===n7?L+=v-$-r*2:g===$9&&(L+=(v-$-r*2)/2),w){e.save(),e.beginPath();let oe=Uy.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),N=L,W=F+U+oe;e.moveTo(N,W),O=G.split(" ").length-1,j=O===0,T=g===ud&&!ne?v-r*2:$,e.lineTo(N+Math.round(T),W),e.lineWidth=s/15;let de=this._getLinearGradient();e.strokeStyle=de||b,e.stroke(),e.restore()}if(x){e.save(),e.beginPath();let oe=Uy.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(L,F+U+oe),O=G.split(" ").length-1,j=O===0,T=g===ud&&ne&&!j?v-r*2:$,e.lineTo(L+Math.round(T),F+U+oe),e.lineWidth=s/15;let N=this._getLinearGradient();e.strokeStyle=N||b,e.stroke(),e.restore()}if(h!==zT&&(_!==0||g===ud)){O=G.split(" ").length-1;let oe=QT(G);for(let N=0;N<oe.length;N++){let W=oe[N];W===" "&&!ne&&g===ud&&(L+=(v-r*2-$)/O),this._partialTextX=L,this._partialTextY=F+U,this._partialText=W,e.fillStrokeShape(this),L+=this.measureSize(W).width+_}}else _!==0&&e.setAttr("letterSpacing",`${_}px`),this._partialTextX=L,this._partialTextY=F+U,this._partialText=G,e.fillStrokeShape(this);e.restore(),t>1&&(F+=l)}}_hitFunc(e){let i=this.getWidth(),t=this.getHeight();e.beginPath(),e.rect(0,0,i,t),e.closePath(),e.fillStrokeShape(this)}setText(e){let i=Gy.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(Z9,i),this}getWidth(){return this.attrs.width===El||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===El||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Gy.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var i,t,r,s,l,d,h,p,g,v,_;let b=jy(),C=this.fontSize(),w;b.save(),b.font=this._getContextFont(),w=b.measureText(e),b.restore();let x=C/100;return{actualBoundingBoxAscent:(i=w.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*x,actualBoundingBoxDescent:(t=w.actualBoundingBoxDescent)!==null&&t!==void 0?t:0,actualBoundingBoxLeft:(r=w.actualBoundingBoxLeft)!==null&&r!==void 0?r:-7.421875*x,actualBoundingBoxRight:(s=w.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*x,alphabeticBaseline:(l=w.alphabeticBaseline)!==null&&l!==void 0?l:0,emHeightAscent:(d=w.emHeightAscent)!==null&&d!==void 0?d:100*x,emHeightDescent:(h=w.emHeightDescent)!==null&&h!==void 0?h:-20*x,fontBoundingBoxAscent:(p=w.fontBoundingBoxAscent)!==null&&p!==void 0?p:91*x,fontBoundingBoxDescent:(g=w.fontBoundingBoxDescent)!==null&&g!==void 0?g:21*x,hangingBaseline:(v=w.hangingBaseline)!==null&&v!==void 0?v:72.80000305175781*x,ideographicBaseline:(_=w.ideographicBaseline)!==null&&_!==void 0?_:-21*x,width:w.width,height:C}}_getContextFont(){return this.fontStyle()+pp+this.fontVariant()+pp+(this.fontSize()+t7)+s7(this.fontFamily())}_addTextLine(e){this.align()===ud&&(e=e.trim());let t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){let i=this.letterSpacing(),t=e.length;return jy().measureText(e).width+(t?i*(t-1):0)}_setTextData(){let e=this.text().split(`
`),i=+this.fontSize(),t=0,r=this.lineHeight()*i,s=this.attrs.width,l=this.attrs.height,d=s!==El&&s!==void 0,h=l!==El&&l!==void 0,p=this.padding(),g=s-p*2,v=l-p*2,_=0,b=this.wrap(),C=b!==HT,w=b!==r7&&C,x=this.ellipsis();this.textArr=[],jy().font=this._getContextFont();let M=x?this._getTextWidth(qy):0;for(let k=0,L=e.length;k<L;++k){let U=e[k],H=this._getTextWidth(U);if(d&&H>g)for(;U.length>0;){let G=0,$=U.length,ne="",O=0;for(;G<$;){let j=G+$>>>1,T=U.slice(0,j+1),Z=this._getTextWidth(T)+M;Z<=g?(G=j+1,ne=T,O=Z):$=j}if(ne){if(w){var F;let T=U[ne.length];(T===pp||T===jT)&&O<=g?F=ne.length:F=Math.max(ne.lastIndexOf(pp),ne.lastIndexOf(jT))+1,F>0&&(G=F,ne=ne.slice(0,G),O=this._getTextWidth(ne))}if(ne=ne.trimRight(),this._addTextLine(ne),t=Math.max(t,O),_+=r,this._shouldHandleEllipsis(_)){this._tryToAddEllipsisToLastLine();break}if(U=U.slice(G),U=U.trimLeft(),U.length>0&&(H=this._getTextWidth(U),H<=g)){this._addTextLine(U),_+=r,t=Math.max(t,H);break}}else break}else this._addTextLine(U),_+=r,t=Math.max(t,H),this._shouldHandleEllipsis(_)&&k<L-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),h&&_+r>v)break}this.textHeight=i,this.textWidth=t}_shouldHandleEllipsis(e){let i=+this.fontSize(),t=this.lineHeight()*i,r=this.attrs.height,s=r!==El&&r!==void 0,l=this.padding(),d=r-l*2;return!(this.wrap()!==HT)||s&&e+t>d}_tryToAddEllipsisToLastLine(){let e=this.attrs.width,i=e!==El&&e!==void 0,t=this.padding(),r=e-t*2,s=this.ellipsis(),l=this.textArr[this.textArr.length-1];!l||!s||(i&&(this._getTextWidth(l.text+qy)<r||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+qy))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return e&&i?!0:super._useBufferCanvas()}};hd.Text=Sn;Sn.prototype._fillFunc=a7;Sn.prototype._strokeFunc=l7;Sn.prototype.className=K9;Sn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,W9._registerNode)(Sn);di.Factory.overWriteSetter(Sn,"width",(0,us.getNumberOrAutoValidator)());di.Factory.overWriteSetter(Sn,"height",(0,us.getNumberOrAutoValidator)());di.Factory.addGetterSetter(Sn,"direction",WT);di.Factory.addGetterSetter(Sn,"fontFamily","Arial");di.Factory.addGetterSetter(Sn,"fontSize",12,(0,us.getNumberValidator)());di.Factory.addGetterSetter(Sn,"fontStyle",YT);di.Factory.addGetterSetter(Sn,"fontVariant",YT);di.Factory.addGetterSetter(Sn,"padding",0,(0,us.getNumberValidator)());di.Factory.addGetterSetter(Sn,"align",$T);di.Factory.addGetterSetter(Sn,"verticalAlign",J9);di.Factory.addGetterSetter(Sn,"lineHeight",1,(0,us.getNumberValidator)());di.Factory.addGetterSetter(Sn,"wrap",i7);di.Factory.addGetterSetter(Sn,"ellipsis",!1,(0,us.getBooleanValidator)());di.Factory.addGetterSetter(Sn,"letterSpacing",0,(0,us.getNumberValidator)());di.Factory.addGetterSetter(Sn,"text","",(0,us.getStringValidator)());di.Factory.addGetterSetter(Sn,"textDecoration","")});var tx=je(gp=>{"use strict";Object.defineProperty(gp,"__esModule",{value:!0});gp.TextPath=void 0;var Hy=Dn(),ur=pt(),d7=Qn(),fd=np(),Qy=zy(),ZT=St(),u7=ft(),h7="",KT="normal";function JT(n){n.fillText(this.partialText,0,0)}function ex(n){n.strokeText(this.partialText,0,0)}var Ln=class extends d7.Shape{constructor(e){super(e),this.dummyCanvas=Hy.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return fd.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let i=this.pathLength;return e-1>i?null:fd.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=fd.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();let i=this.textDecoration(),t=this.fill(),r=this.fontSize(),s=this.glyphInfo;i==="underline"&&e.beginPath();for(let l=0;l<s.length;l++){e.save();let d=s[l].p0;e.translate(d.x,d.y),e.rotate(s[l].rotation),this.partialText=s[l].text,e.fillStrokeShape(this),i==="underline"&&(l===0&&e.moveTo(0,r/2+1),e.lineTo(r,r/2+1)),e.restore()}i==="underline"&&(e.strokeStyle=t,e.lineWidth=r/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();let i=this.glyphInfo;if(i.length>=1){let t=i[0].p0;e.moveTo(t.x,t.y)}for(let t=0;t<i.length;t++){let r=i[t].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Hy.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Qy.Text.prototype.setText.call(this,e)}_getContextFont(){return Qy.Text.prototype._getContextFont.call(this)}_getTextSize(e){let t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();let r=t.measureText(e);return t.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:i}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=i,this.glyphInfo=[],!this.attrs.data)return null;let t=this.letterSpacing(),r=this.align(),s=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*t,0),d=0;r==="center"&&(d=Math.max(0,this.pathLength/2-l/2)),r==="right"&&(d=Math.max(0,this.pathLength-l));let h=(0,Qy.stringToArray)(this.text()),p=d;for(let g=0;g<h.length;g++){let v=this._getPointAtLength(p);if(!v)return;let _=this._getTextSize(h[g]).width+t;if(h[g]===" "&&r==="justify"){let F=this.text().split(" ").length-1;_+=(this.pathLength-l)/F}let b=this._getPointAtLength(p+_);if(!b)return;let C=fd.Path.getLineLength(v.x,v.y,b.x,b.y),w=0;if(s)try{w=s(h[g-1],h[g])*this.fontSize()}catch{w=0}v.x+=w,b.x+=w,this.textWidth+=w;let x=fd.Path.getPointOnLine(w+C/2,v.x,v.y,b.x,b.y),M=Math.atan2(b.y-v.y,b.x-v.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:h[g],rotation:M,p0:v,p1:b}),p+=_}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};let e=[];this.glyphInfo.forEach(function(p){e.push(p.p0.x),e.push(p.p0.y),e.push(p.p1.x),e.push(p.p1.y)});let i=e[0]||0,t=e[0]||0,r=e[1]||0,s=e[1]||0,l,d;for(let p=0;p<e.length/2;p++)l=e[p*2],d=e[p*2+1],i=Math.min(i,l),t=Math.max(t,l),r=Math.min(r,d),s=Math.max(s,d);let h=this.fontSize();return{x:i-h/2,y:r-h/2,width:t-i+h,height:s-r+h}}destroy(){return Hy.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};gp.TextPath=Ln;Ln.prototype._fillFunc=JT;Ln.prototype._strokeFunc=ex;Ln.prototype._fillFuncHit=JT;Ln.prototype._strokeFuncHit=ex;Ln.prototype.className="TextPath";Ln.prototype._attrsAffectingSize=["text","fontSize","data"];(0,u7._registerNode)(Ln);ur.Factory.addGetterSetter(Ln,"data");ur.Factory.addGetterSetter(Ln,"fontFamily","Arial");ur.Factory.addGetterSetter(Ln,"fontSize",12,(0,ZT.getNumberValidator)());ur.Factory.addGetterSetter(Ln,"fontStyle",KT);ur.Factory.addGetterSetter(Ln,"align","left");ur.Factory.addGetterSetter(Ln,"letterSpacing",0,(0,ZT.getNumberValidator)());ur.Factory.addGetterSetter(Ln,"textBaseline","middle");ur.Factory.addGetterSetter(Ln,"fontVariant",KT);ur.Factory.addGetterSetter(Ln,"text",h7);ur.Factory.addGetterSetter(Ln,"textDecoration",null);ur.Factory.addGetterSetter(Ln,"kerningFunc",null)});var lx=je(yp=>{"use strict";Object.defineProperty(yp,"__esModule",{value:!0});yp.Transformer=void 0;var on=Dn(),Ht=pt(),nx=En(),f7=Qn(),p7=Ny(),ix=Wf(),hr=ft(),hs=St(),m7=ft(),sx="tr-konva",g7=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${sx}`).join(" "),rx="nodesRect",v7=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],y7={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},S7="ontouchstart"in hr.Konva._global;function b7(n,e,i){if(n==="rotater")return i;e+=on.Util.degToRad(y7[n]||0);let t=(on.Util.radToDeg(e)%360+360)%360;return on.Util._inRange(t,315+22.5,360)||on.Util._inRange(t,0,22.5)?"ns-resize":on.Util._inRange(t,45-22.5,45+22.5)?"nesw-resize":on.Util._inRange(t,90-22.5,90+22.5)?"ew-resize":on.Util._inRange(t,135-22.5,135+22.5)?"nwse-resize":on.Util._inRange(t,180-22.5,180+22.5)?"ns-resize":on.Util._inRange(t,225-22.5,225+22.5)?"nesw-resize":on.Util._inRange(t,270-22.5,270+22.5)?"ew-resize":on.Util._inRange(t,315-22.5,315+22.5)?"nwse-resize":(on.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var vp=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],ox=1e8;function _7(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function ax(n,e,i){let t=i.x+(n.x-i.x)*Math.cos(e)-(n.y-i.y)*Math.sin(e),r=i.y+(n.x-i.x)*Math.sin(e)+(n.y-i.y)*Math.cos(e);return nn(Ee({},n),{rotation:n.rotation+e,x:t,y:r})}function D7(n,e){let i=_7(n);return ax(n,e,i)}function C7(n,e,i){let t=e;for(let r=0;r<n.length;r++){let s=hr.Konva.getAngle(n[r]),l=Math.abs(s-e)%(Math.PI*2);Math.min(l,Math.PI*2-l)<i&&(t=s)}return t}var Wy=0,wt=class extends ix.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(g7,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return on.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return sx+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let i=e.filter(r=>r.isAncestorOf(this)?(on.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=i,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{let s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=r._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");r.on(l,s),r.on(v7.map(d=>d+`.${this._getEventNamespace()}`).join(" "),s),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(r)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let i;e.on(`dragstart.${this._getEventNamespace()}`,t=>{i=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(t,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,t=>{if(!i)return;let r=e.getAbsolutePosition(),s=r.x-i.x,l=r.y-i.y;this.nodes().forEach(d=>{if(d===e||d.isDragging())return;let h=d.getAbsolutePosition();d.setAbsolutePosition({x:h.x+s,y:h.y+l}),d.startDrag(t)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(rx),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(rx,this.__getNodeRect)}__getNodeShape(e,i=this.rotation(),t){let r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(t),l=e.getAbsolutePosition(t),d=r.x*s.x-e.offsetX()*s.x,h=r.y*s.y-e.offsetY()*s.y,p=(hr.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),g={x:l.x+d*Math.cos(p)+h*Math.sin(-p),y:l.y+h*Math.cos(p)+d*Math.sin(p),width:r.width*s.x,height:r.height*s.y,rotation:p};return ax(g,-hr.Konva.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-ox,y:-ox,width:0,height:0,rotation:0};let i=[];this.nodes().map(p=>{let g=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),v=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}],_=p.getAbsoluteTransform();v.forEach(function(b){let C=_.point(b);i.push(C)})});let t=new on.Transform;t.rotate(-hr.Konva.getAngle(this.rotation()));let r=1/0,s=1/0,l=-1/0,d=-1/0;i.forEach(function(p){let g=t.point(p);r===void 0&&(r=l=g.x,s=d=g.y),r=Math.min(r,g.x),s=Math.min(s,g.y),l=Math.max(l,g.x),d=Math.max(d,g.y)}),t.invert();let h=t.point({x:r,y:s});return{x:h.x,y:h.y,width:l-r,height:d-s,rotation:hr.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),vp.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){let i=new p7.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:S7?10:"auto"}),t=this;i.on("mousedown touchstart",function(r){t._handleMouseDown(r)}),i.on("dragstart",r=>{i.stopDrag(),r.cancelBubble=!0}),i.on("dragend",r=>{r.cancelBubble=!0}),i.on("mouseenter",()=>{let r=hr.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),l=b7(e,r,s);i.getStage().content&&(i.getStage().content.style.cursor=l),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){let e=new f7.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(i,t){let r=t.getParent(),s=r.padding();i.beginPath(),i.rect(-s,-s,t.width()+s*2,t.height()+s*2),i.moveTo(t.width()/2,-s),r.rotateEnabled()&&r.rotateLineVisible()&&i.lineTo(t.width()/2,-r.rotateAnchorOffset()*on.Util._sign(t.height())-s),i.fillStrokeShape(t)},hitFunc:(i,t)=>{if(!this.shouldOverdrawWholeArea())return;let r=this.padding();i.beginPath(),i.rect(-r,-r,t.width()+r*2,t.height()+r*2),i.fillStrokeShape(t)}});this.add(e),this._proxyDrag(e),e.on("dragstart",i=>{i.cancelBubble=!0}),e.on("dragmove",i=>{i.cancelBubble=!0}),e.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];let i=this._getNodeRect(),t=i.width,r=i.height,s=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));this.sin=Math.abs(r/s),this.cos=Math.abs(t/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;let l=e.target.getAbsolutePosition(),d=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-l.x,y:d.y-l.y},Wy++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(h=>{h._fire("transformstart",{evt:e.evt,target:h})})}_handleMouseMove(e){let i,t,r,s=this.findOne("."+this._movingAnchorName),l=s.getStage();l.setPointersPositions(e);let d=l.getPointerPosition(),h={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y},p=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(p,h,e)),s.setAbsolutePosition(h);let g=s.getAbsolutePosition();if(p.x===g.x&&p.y===g.y)return;if(this._movingAnchorName==="rotater"){let U=this._getNodeRect();i=s.x()-U.width/2,t=-s.y()+U.height/2;let H=Math.atan2(-t,i)+Math.PI/2;U.height<0&&(H-=Math.PI);let $=hr.Konva.getAngle(this.rotation())+H,ne=hr.Konva.getAngle(this.rotationSnapTolerance()),j=C7(this.rotationSnaps(),$,ne)-U.rotation,T=D7(U,j);this._fitNodesInto(T,e);return}let v=this.shiftBehavior(),_;v==="inverted"?_=this.keepRatio()&&!e.shiftKey:v==="none"?_=this.keepRatio():_=this.keepRatio()||e.shiftKey;var M=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(_){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(b.x-s.x(),2)+Math.pow(b.y-s.y(),2));var C=this.findOne(".top-left").x()>b.x?-1:1,w=this.findOne(".top-left").y()>b.y?-1:1;i=r*this.cos*C,t=r*this.sin*w,this.findOne(".top-left").x(b.x-i),this.findOne(".top-left").y(b.y-t)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(_){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(s.x()-b.x,2)+Math.pow(b.y-s.y(),2));var C=this.findOne(".top-right").x()<b.x?-1:1,w=this.findOne(".top-right").y()>b.y?-1:1;i=r*this.cos*C,t=r*this.sin*w,this.findOne(".top-right").x(b.x+i),this.findOne(".top-right").y(b.y-t)}var x=s.position();this.findOne(".top-left").y(x.y),this.findOne(".bottom-right").x(x.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(_){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(b.x-s.x(),2)+Math.pow(s.y()-b.y,2));var C=b.x<s.x()?-1:1,w=s.y()<b.y?-1:1;i=r*this.cos*C,t=r*this.sin*w,s.x(b.x-i),s.y(b.y+t)}x=s.position(),this.findOne(".top-left").x(x.x),this.findOne(".bottom-right").y(x.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(_){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(s.x()-b.x,2)+Math.pow(s.y()-b.y,2));var C=this.findOne(".bottom-right").x()<b.x?-1:1,w=this.findOne(".bottom-right").y()<b.y?-1:1;i=r*this.cos*C,t=r*this.sin*w,this.findOne(".bottom-right").x(b.x+i),this.findOne(".bottom-right").y(b.y+t)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var M=this.centeredScaling()||e.altKey;if(M){let U=this.findOne(".top-left"),H=this.findOne(".bottom-right"),G=U.x(),$=U.y(),ne=this.getWidth()-H.x(),O=this.getHeight()-H.y();H.move({x:-G,y:-$}),U.move({x:ne,y:O})}let F=this.findOne(".top-left").getAbsolutePosition();i=F.x,t=F.y;let k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),L=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:t,width:k,height:L,rotation:hr.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));let t=this.getNode();Wy--,this._fire("transformend",{evt:e,target:t}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),t&&this._nodes.forEach(r=>{var s;r._fire("transformend",{evt:e,target:r}),(s=r.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,i){let t=this._getNodeRect(),r=1;if(on.Util._inRange(e.width,-this.padding()*2-r,r)){this.update();return}if(on.Util._inRange(e.height,-this.padding()*2-r,r)){this.update();return}let s=new on.Transform;if(s.rotate(hr.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let _=s.point({x:-this.padding()*2,y:0});e.x+=_.x,e.y+=_.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let _=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let _=s.point({x:0,y:-this.padding()*2});e.x+=_.x,e.y+=_.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let _=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){let _=this.boundBoxFunc()(t,e);_?e=_:on.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let l=1e7,d=new on.Transform;d.translate(t.x,t.y),d.rotate(t.rotation),d.scale(t.width/l,t.height/l);let h=new on.Transform,p=e.width/l,g=e.height/l;this.flipEnabled()===!1?(h.translate(e.x,e.y),h.rotate(e.rotation),h.translate(e.width<0?e.width:0,e.height<0?e.height:0),h.scale(Math.abs(p),Math.abs(g))):(h.translate(e.x,e.y),h.rotate(e.rotation),h.scale(p,g));let v=h.multiply(d.invert());this._nodes.forEach(_=>{var b;let C=_.getParent().getAbsoluteTransform(),w=_.getTransform().copy();w.translate(_.offsetX(),_.offsetY());let x=new on.Transform;x.multiply(C.copy().invert()).multiply(v).multiply(C).multiply(w);let M=x.decompose();_.setAttrs(M),(b=_.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(on.Util._getRotation(e.rotation)),this._nodes.forEach(_=>{this._fire("transform",{evt:i,target:_}),_._fire("transform",{evt:i,target:_})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,i){this.findOne(e).setAttrs(i)}update(){var e;let i=this._getNodeRect();this.rotation(on.Util._getRotation(i.rotation));let t=i.width,r=i.height,s=this.enabledAnchors(),l=this.resizeEnabled(),d=this.padding(),h=this.anchorSize(),p=this.find("._anchor");p.forEach(v=>{v.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+d,offsetY:h/2+d,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:t/2,y:0,offsetY:h/2+d,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:t,y:0,offsetX:h/2-d,offsetY:h/2+d,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:h/2+d,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:t,y:r/2,offsetX:h/2-d,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:h/2+d,offsetY:h/2-d,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:t/2,y:r,offsetY:h/2-d,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:t,y:r,offsetX:h/2-d,offsetY:h/2-d,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:t/2,y:-this.rotateAnchorOffset()*on.Util._sign(r)-d,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:t,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let g=this.anchorStyleFunc();g&&p.forEach(v=>{g(v)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();let e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ix.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return nx.Node.prototype.toObject.call(this)}clone(e){return nx.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};yp.Transformer=wt;wt.isTransforming=()=>Wy>0;function w7(n){return n instanceof Array||on.Util.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){vp.indexOf(e)===-1&&on.Util.warn("Unknown anchor name: "+e+". Available names are: "+vp.join(", "))}),n||[]}wt.prototype.className="Transformer";(0,m7._registerNode)(wt);Ht.Factory.addGetterSetter(wt,"enabledAnchors",vp,w7);Ht.Factory.addGetterSetter(wt,"flipEnabled",!0,(0,hs.getBooleanValidator)());Ht.Factory.addGetterSetter(wt,"resizeEnabled",!0);Ht.Factory.addGetterSetter(wt,"anchorSize",10,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"rotateEnabled",!0);Ht.Factory.addGetterSetter(wt,"rotateLineVisible",!0);Ht.Factory.addGetterSetter(wt,"rotationSnaps",[]);Ht.Factory.addGetterSetter(wt,"rotateAnchorOffset",50,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"rotateAnchorCursor","crosshair");Ht.Factory.addGetterSetter(wt,"rotationSnapTolerance",5,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"borderEnabled",!0);Ht.Factory.addGetterSetter(wt,"anchorStroke","rgb(0, 161, 255)");Ht.Factory.addGetterSetter(wt,"anchorStrokeWidth",1,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"anchorFill","white");Ht.Factory.addGetterSetter(wt,"anchorCornerRadius",0,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"borderStroke","rgb(0, 161, 255)");Ht.Factory.addGetterSetter(wt,"borderStrokeWidth",1,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"borderDash");Ht.Factory.addGetterSetter(wt,"keepRatio",!0);Ht.Factory.addGetterSetter(wt,"shiftBehavior","default");Ht.Factory.addGetterSetter(wt,"centeredScaling",!1);Ht.Factory.addGetterSetter(wt,"ignoreStroke",!1);Ht.Factory.addGetterSetter(wt,"padding",0,(0,hs.getNumberValidator)());Ht.Factory.addGetterSetter(wt,"node");Ht.Factory.addGetterSetter(wt,"nodes");Ht.Factory.addGetterSetter(wt,"boundBoxFunc");Ht.Factory.addGetterSetter(wt,"anchorDragBoundFunc");Ht.Factory.addGetterSetter(wt,"anchorStyleFunc");Ht.Factory.addGetterSetter(wt,"shouldOverdrawWholeArea",!1);Ht.Factory.addGetterSetter(wt,"useSingleNodeRotation",!0);Ht.Factory.backCompat(wt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})});var dx=je(bp=>{"use strict";Object.defineProperty(bp,"__esModule",{value:!0});bp.Wedge=void 0;var Sp=pt(),I7=Qn(),E7=ft(),cx=St(),T7=ft(),fr=class extends I7.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,E7.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};bp.Wedge=fr;fr.prototype.className="Wedge";fr.prototype._centroid=!0;fr.prototype._attrsAffectingSize=["radius"];(0,T7._registerNode)(fr);Sp.Factory.addGetterSetter(fr,"radius",0,(0,cx.getNumberValidator)());Sp.Factory.addGetterSetter(fr,"angle",0,(0,cx.getNumberValidator)());Sp.Factory.addGetterSetter(fr,"clockwise",!1);Sp.Factory.backCompat(fr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})});var fx=je(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.Blur=void 0;var ux=pt(),x7=En(),A7=St();function hx(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var M7=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],R7=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function O7(n,e){let i=n.data,t=n.width,r=n.height,s,l,d,h,p,g,v,_,b,C,w,x,M,F,k,L,U,H,G,$,ne,O,j,T,Z=e+e+1,ge=t-1,oe=r-1,N=e+1,W=N*(N+1)/2,de=new hx,Y=null,Q=de,De=null,ye=null,fe=M7[e],ze=R7[e];for(d=1;d<Z;d++)Q=Q.next=new hx,d===N&&(Y=Q);for(Q.next=de,v=g=0,l=0;l<r;l++){for(L=U=H=G=_=b=C=w=0,x=N*($=i[g]),M=N*(ne=i[g+1]),F=N*(O=i[g+2]),k=N*(j=i[g+3]),_+=W*$,b+=W*ne,C+=W*O,w+=W*j,Q=de,d=0;d<N;d++)Q.r=$,Q.g=ne,Q.b=O,Q.a=j,Q=Q.next;for(d=1;d<N;d++)h=g+((ge<d?ge:d)<<2),_+=(Q.r=$=i[h])*(T=N-d),b+=(Q.g=ne=i[h+1])*T,C+=(Q.b=O=i[h+2])*T,w+=(Q.a=j=i[h+3])*T,L+=$,U+=ne,H+=O,G+=j,Q=Q.next;for(De=de,ye=Y,s=0;s<t;s++)i[g+3]=j=w*fe>>ze,j!==0?(j=255/j,i[g]=(_*fe>>ze)*j,i[g+1]=(b*fe>>ze)*j,i[g+2]=(C*fe>>ze)*j):i[g]=i[g+1]=i[g+2]=0,_-=x,b-=M,C-=F,w-=k,x-=De.r,M-=De.g,F-=De.b,k-=De.a,h=v+((h=s+e+1)<ge?h:ge)<<2,L+=De.r=i[h],U+=De.g=i[h+1],H+=De.b=i[h+2],G+=De.a=i[h+3],_+=L,b+=U,C+=H,w+=G,De=De.next,x+=$=ye.r,M+=ne=ye.g,F+=O=ye.b,k+=j=ye.a,L-=$,U-=ne,H-=O,G-=j,ye=ye.next,g+=4;v+=t}for(s=0;s<t;s++){for(U=H=G=L=b=C=w=_=0,g=s<<2,x=N*($=i[g]),M=N*(ne=i[g+1]),F=N*(O=i[g+2]),k=N*(j=i[g+3]),_+=W*$,b+=W*ne,C+=W*O,w+=W*j,Q=de,d=0;d<N;d++)Q.r=$,Q.g=ne,Q.b=O,Q.a=j,Q=Q.next;for(p=t,d=1;d<=e;d++)g=p+s<<2,_+=(Q.r=$=i[g])*(T=N-d),b+=(Q.g=ne=i[g+1])*T,C+=(Q.b=O=i[g+2])*T,w+=(Q.a=j=i[g+3])*T,L+=$,U+=ne,H+=O,G+=j,Q=Q.next,d<oe&&(p+=t);for(g=s,De=de,ye=Y,l=0;l<r;l++)h=g<<2,i[h+3]=j=w*fe>>ze,j>0?(j=255/j,i[h]=(_*fe>>ze)*j,i[h+1]=(b*fe>>ze)*j,i[h+2]=(C*fe>>ze)*j):i[h]=i[h+1]=i[h+2]=0,_-=x,b-=M,C-=F,w-=k,x-=De.r,M-=De.g,F-=De.b,k-=De.a,h=s+((h=l+N)<oe?h:oe)*t<<2,_+=L+=De.r=i[h],b+=U+=De.g=i[h+1],C+=H+=De.b=i[h+2],w+=G+=De.a=i[h+3],De=De.next,x+=$=ye.r,M+=ne=ye.g,F+=O=ye.b,k+=j=ye.a,L-=$,U-=ne,H-=O,G-=j,ye=ye.next,g+=t}}var P7=function(e){let i=Math.round(this.blurRadius());i>0&&O7(e,i)};_p.Blur=P7;ux.Factory.addGetterSetter(x7.Node,"blurRadius",0,(0,A7.getNumberValidator)(),ux.Factory.afterSetFilter)});var mx=je(Dp=>{"use strict";Object.defineProperty(Dp,"__esModule",{value:!0});Dp.Brighten=void 0;var px=pt(),F7=En(),k7=St(),L7=function(n){let e=this.brightness()*255,i=n.data,t=i.length,r;for(r=0;r<t;r+=4)i[r]+=e,i[r+1]+=e,i[r+2]+=e};Dp.Brighten=L7;px.Factory.addGetterSetter(F7.Node,"brightness",0,(0,k7.getNumberValidator)(),px.Factory.afterSetFilter)});var vx=je(Cp=>{"use strict";Object.defineProperty(Cp,"__esModule",{value:!0});Cp.Contrast=void 0;var gx=pt(),N7=En(),V7=St(),B7=function(n){let e=Math.pow((this.contrast()+100)/100,2),i=n.data,t=i.length,r=150,s=150,l=150,d;for(d=0;d<t;d+=4)r=i[d],s=i[d+1],l=i[d+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,i[d]=r,i[d+1]=s,i[d+2]=l};Cp.Contrast=B7;gx.Factory.addGetterSetter(N7.Node,"contrast",0,(0,V7.getNumberValidator)(),gx.Factory.afterSetFilter)});var Sx=je(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.Emboss=void 0;var fs=pt(),wp=En(),U7=Dn(),yx=St(),q7=function(n){let e=this.embossStrength()*10,i=this.embossWhiteLevel()*255,t=this.embossDirection(),r=this.embossBlend(),s=0,l=0,d=n.data,h=n.width,p=n.height,g=h*4,v=p;switch(t){case"top-left":s=-1,l=-1;break;case"top":s=-1,l=0;break;case"top-right":s=-1,l=1;break;case"right":s=0,l=1;break;case"bottom-right":s=1,l=1;break;case"bottom":s=1,l=0;break;case"bottom-left":s=1,l=-1;break;case"left":s=0,l=-1;break;default:U7.Util.error("Unknown emboss direction: "+t)}do{let _=(v-1)*g,b=s;v+b<1&&(b=0),v+b>p&&(b=0);let C=(v-1+b)*h*4,w=h;do{let x=_+(w-1)*4,M=l;w+M<1&&(M=0),w+M>h&&(M=0);let F=C+(w-1+M)*4,k=d[x]-d[F],L=d[x+1]-d[F+1],U=d[x+2]-d[F+2],H=k,G=H>0?H:-H,$=L>0?L:-L,ne=U>0?U:-U;if($>G&&(H=L),ne>G&&(H=U),H*=e,r){let O=d[x]+H,j=d[x+1]+H,T=d[x+2]+H;d[x]=O>255?255:O<0?0:O,d[x+1]=j>255?255:j<0?0:j,d[x+2]=T>255?255:T<0?0:T}else{let O=i-H;O<0?O=0:O>255&&(O=255),d[x]=d[x+1]=d[x+2]=O}}while(--w)}while(--v)};Ip.Emboss=q7;fs.Factory.addGetterSetter(wp.Node,"embossStrength",.5,(0,yx.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(wp.Node,"embossWhiteLevel",.5,(0,yx.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(wp.Node,"embossDirection","top-left",null,fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(wp.Node,"embossBlend",!1,null,fs.Factory.afterSetFilter)});var _x=je(Ep=>{"use strict";Object.defineProperty(Ep,"__esModule",{value:!0});Ep.Enhance=void 0;var bx=pt(),j7=En(),G7=St();function $y(n,e,i,t,r){let s=i-e,l=r-t,d;return s===0?t+l/2:l===0?t:(d=(n-e)/s,d=l*d+t,d)}var z7=function(n){let e=n.data,i=e.length,t=e[0],r=t,s,l=e[1],d=l,h,p=e[2],g=p,v,_,b=this.enhance();if(b===0)return;for(_=0;_<i;_+=4)s=e[_+0],s<t?t=s:s>r&&(r=s),h=e[_+1],h<l?l=h:h>d&&(d=h),v=e[_+2],v<p?p=v:v>g&&(g=v);r===t&&(r=255,t=0),d===l&&(d=255,l=0),g===p&&(g=255,p=0);let C,w,x,M,F,k,L,U,H;for(b>0?(w=r+b*(255-r),x=t-b*(t-0),F=d+b*(255-d),k=l-b*(l-0),U=g+b*(255-g),H=p-b*(p-0)):(C=(r+t)*.5,w=r+b*(r-C),x=t+b*(t-C),M=(d+l)*.5,F=d+b*(d-M),k=l+b*(l-M),L=(g+p)*.5,U=g+b*(g-L),H=p+b*(p-L)),_=0;_<i;_+=4)e[_+0]=$y(e[_+0],t,r,x,w),e[_+1]=$y(e[_+1],l,d,k,F),e[_+2]=$y(e[_+2],p,g,H,U)};Ep.Enhance=z7;bx.Factory.addGetterSetter(j7.Node,"enhance",0,(0,G7.getNumberValidator)(),bx.Factory.afterSetFilter)});var Dx=je(Tp=>{"use strict";Object.defineProperty(Tp,"__esModule",{value:!0});Tp.Grayscale=void 0;var H7=function(n){let e=n.data,i=e.length,t,r;for(t=0;t<i;t+=4)r=.34*e[t]+.5*e[t+1]+.16*e[t+2],e[t]=r,e[t+1]=r,e[t+2]=r};Tp.Grayscale=H7});var Cx=je(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.HSL=void 0;var Tl=pt(),Yy=En(),Xy=St();Tl.Factory.addGetterSetter(Yy.Node,"hue",0,(0,Xy.getNumberValidator)(),Tl.Factory.afterSetFilter);Tl.Factory.addGetterSetter(Yy.Node,"saturation",0,(0,Xy.getNumberValidator)(),Tl.Factory.afterSetFilter);Tl.Factory.addGetterSetter(Yy.Node,"luminance",0,(0,Xy.getNumberValidator)(),Tl.Factory.afterSetFilter);var Q7=function(n){let e=n.data,i=e.length,t=1,r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=this.luminance()*127,d,h=t*r*Math.cos(s*Math.PI/180),p=t*r*Math.sin(s*Math.PI/180),g=.299*t+.701*h+.167*p,v=.587*t-.587*h+.33*p,_=.114*t-.114*h-.497*p,b=.299*t-.299*h-.328*p,C=.587*t+.413*h+.035*p,w=.114*t-.114*h+.293*p,x=.299*t-.3*h+1.25*p,M=.587*t-.586*h-1.05*p,F=.114*t+.886*h-.2*p,k,L,U,H;for(d=0;d<i;d+=4)k=e[d+0],L=e[d+1],U=e[d+2],H=e[d+3],e[d+0]=g*k+v*L+_*U+l,e[d+1]=b*k+C*L+w*U+l,e[d+2]=x*k+M*L+F*U+l,e[d+3]=H};xp.HSL=Q7});var wx=je(Ap=>{"use strict";Object.defineProperty(Ap,"__esModule",{value:!0});Ap.HSV=void 0;var xl=pt(),Zy=En(),Ky=St(),W7=function(n){let e=n.data,i=e.length,t=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=t*r*Math.cos(s*Math.PI/180),d=t*r*Math.sin(s*Math.PI/180),h=.299*t+.701*l+.167*d,p=.587*t-.587*l+.33*d,g=.114*t-.114*l-.497*d,v=.299*t-.299*l-.328*d,_=.587*t+.413*l+.035*d,b=.114*t-.114*l+.293*d,C=.299*t-.3*l+1.25*d,w=.587*t-.586*l-1.05*d,x=.114*t+.886*l-.2*d,M,F,k,L;for(let U=0;U<i;U+=4)M=e[U+0],F=e[U+1],k=e[U+2],L=e[U+3],e[U+0]=h*M+p*F+g*k,e[U+1]=v*M+_*F+b*k,e[U+2]=C*M+w*F+x*k,e[U+3]=L};Ap.HSV=W7;xl.Factory.addGetterSetter(Zy.Node,"hue",0,(0,Ky.getNumberValidator)(),xl.Factory.afterSetFilter);xl.Factory.addGetterSetter(Zy.Node,"saturation",0,(0,Ky.getNumberValidator)(),xl.Factory.afterSetFilter);xl.Factory.addGetterSetter(Zy.Node,"value",0,(0,Ky.getNumberValidator)(),xl.Factory.afterSetFilter)});var Ix=je(Mp=>{"use strict";Object.defineProperty(Mp,"__esModule",{value:!0});Mp.Invert=void 0;var $7=function(n){let e=n.data,i=e.length,t;for(t=0;t<i;t+=4)e[t]=255-e[t],e[t+1]=255-e[t+1],e[t+2]=255-e[t+2]};Mp.Invert=$7});var Ax=je(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.Kaleidoscope=void 0;var Rp=pt(),Tx=En(),Ex=Dn(),xx=St(),Y7=function(n,e,i){let t=n.data,r=e.data,s=n.width,l=n.height,d=i.polarCenterX||s/2,h=i.polarCenterY||l/2,p,g,v,_=0,b=0,C=0,w=0,x,M=Math.sqrt(d*d+h*h);g=s-d,v=l-h,x=Math.sqrt(g*g+v*v),M=x>M?x:M;let F=l,k=s,L,U,H=360/k*Math.PI/180,G,$;for(U=0;U<k;U+=1)for(G=Math.sin(U*H),$=Math.cos(U*H),L=0;L<F;L+=1)g=Math.floor(d+M*L/F*$),v=Math.floor(h+M*L/F*G),p=(v*s+g)*4,_=t[p+0],b=t[p+1],C=t[p+2],w=t[p+3],p=(U+L*s)*4,r[p+0]=_,r[p+1]=b,r[p+2]=C,r[p+3]=w},X7=function(n,e,i){let t=n.data,r=e.data,s=n.width,l=n.height,d=i.polarCenterX||s/2,h=i.polarCenterY||l/2,p,g,v,_,b,C=0,w=0,x=0,M=0,F,k=Math.sqrt(d*d+h*h);g=s-d,v=l-h,F=Math.sqrt(g*g+v*v),k=F>k?F:k;let L=l,U=s,H,G,$=i.polarRotation||0,ne,O;for(g=0;g<s;g+=1)for(v=0;v<l;v+=1)_=g-d,b=v-h,H=Math.sqrt(_*_+b*b)*L/k,G=(Math.atan2(b,_)*180/Math.PI+360+$)%360,G=G*U/360,ne=Math.floor(G),O=Math.floor(H),p=(O*s+ne)*4,C=t[p+0],w=t[p+1],x=t[p+2],M=t[p+3],p=(v*s+g)*4,r[p+0]=C,r[p+1]=w,r[p+2]=x,r[p+3]=M},Z7=function(n){let e=n.width,i=n.height,t,r,s,l,d,h,p,g,v,_,b=Math.round(this.kaleidoscopePower()),C=Math.round(this.kaleidoscopeAngle()),w=Math.floor(e*(C%360)/360);if(b<1)return;let x=Ex.Util.createCanvasElement();x.width=e,x.height=i;let M=x.getContext("2d").getImageData(0,0,e,i);Ex.Util.releaseCanvas(x),Y7(n,M,{polarCenterX:e/2,polarCenterY:i/2});let F=e/Math.pow(2,b);for(;F<=8;)F=F*2,b-=1;F=Math.ceil(F);let k=F,L=0,U=k,H=1;for(w+F>e&&(L=k,U=0,H=-1),r=0;r<i;r+=1)for(t=L;t!==U;t+=H)s=Math.round(t+w)%e,v=(e*r+s)*4,d=M.data[v+0],h=M.data[v+1],p=M.data[v+2],g=M.data[v+3],_=(e*r+t)*4,M.data[_+0]=d,M.data[_+1]=h,M.data[_+2]=p,M.data[_+3]=g;for(r=0;r<i;r+=1)for(k=Math.floor(F),l=0;l<b;l+=1){for(t=0;t<k+1;t+=1)v=(e*r+t)*4,d=M.data[v+0],h=M.data[v+1],p=M.data[v+2],g=M.data[v+3],_=(e*r+k*2-t-1)*4,M.data[_+0]=d,M.data[_+1]=h,M.data[_+2]=p,M.data[_+3]=g;k*=2}X7(M,n,{polarRotation:0})};Op.Kaleidoscope=Z7;Rp.Factory.addGetterSetter(Tx.Node,"kaleidoscopePower",2,(0,xx.getNumberValidator)(),Rp.Factory.afterSetFilter);Rp.Factory.addGetterSetter(Tx.Node,"kaleidoscopeAngle",0,(0,xx.getNumberValidator)(),Rp.Factory.afterSetFilter)});var Rx=je(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.Mask=void 0;var Mx=pt(),K7=En(),J7=St();function Pp(n,e,i){let t=(i*n.width+e)*4,r=[];return r.push(n.data[t++],n.data[t++],n.data[t++],n.data[t++]),r}function pd(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function eV(n){let e=[0,0,0];for(let i=0;i<n.length;i++)e[0]+=n[i][0],e[1]+=n[i][1],e[2]+=n[i][2];return e[0]/=n.length,e[1]/=n.length,e[2]/=n.length,e}function tV(n,e){let i=Pp(n,0,0),t=Pp(n,n.width-1,0),r=Pp(n,0,n.height-1),s=Pp(n,n.width-1,n.height-1),l=e||10;if(pd(i,t)<l&&pd(t,s)<l&&pd(s,r)<l&&pd(r,i)<l){let d=eV([t,i,s,r]),h=[];for(let p=0;p<n.width*n.height;p++){let g=pd(d,[n.data[p*4],n.data[p*4+1],n.data[p*4+2]]);h[p]=g<l?0:255}return h}}function nV(n,e){for(let i=0;i<n.width*n.height;i++)n.data[4*i+3]=e[i]}function iV(n,e,i){let t=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(t.length)),s=Math.floor(r/2),l=[];for(let d=0;d<i;d++)for(let h=0;h<e;h++){let p=d*e+h,g=0;for(let v=0;v<r;v++)for(let _=0;_<r;_++){let b=d+v-s,C=h+_-s;if(b>=0&&b<i&&C>=0&&C<e){let w=b*e+C,x=t[v*r+_];g+=n[w]*x}}l[p]=g===255*8?255:0}return l}function rV(n,e,i){let t=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(t.length)),s=Math.floor(r/2),l=[];for(let d=0;d<i;d++)for(let h=0;h<e;h++){let p=d*e+h,g=0;for(let v=0;v<r;v++)for(let _=0;_<r;_++){let b=d+v-s,C=h+_-s;if(b>=0&&b<i&&C>=0&&C<e){let w=b*e+C,x=t[v*r+_];g+=n[w]*x}}l[p]=g>=255*4?255:0}return l}function oV(n,e,i){let t=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(t.length)),s=Math.floor(r/2),l=[];for(let d=0;d<i;d++)for(let h=0;h<e;h++){let p=d*e+h,g=0;for(let v=0;v<r;v++)for(let _=0;_<r;_++){let b=d+v-s,C=h+_-s;if(b>=0&&b<i&&C>=0&&C<e){let w=b*e+C,x=t[v*r+_];g+=n[w]*x}}l[p]=g}return l}var sV=function(n){let e=this.threshold(),i=tV(n,e);return i&&(i=iV(i,n.width,n.height),i=rV(i,n.width,n.height),i=oV(i,n.width,n.height),nV(n,i)),n};Fp.Mask=sV;Mx.Factory.addGetterSetter(K7.Node,"threshold",0,(0,J7.getNumberValidator)(),Mx.Factory.afterSetFilter)});var Px=je(kp=>{"use strict";Object.defineProperty(kp,"__esModule",{value:!0});kp.Noise=void 0;var Ox=pt(),aV=En(),lV=St(),cV=function(n){let e=this.noise()*255,i=n.data,t=i.length,r=e/2;for(let s=0;s<t;s+=4)i[s+0]+=r-2*r*Math.random(),i[s+1]+=r-2*r*Math.random(),i[s+2]+=r-2*r*Math.random()};kp.Noise=cV;Ox.Factory.addGetterSetter(aV.Node,"noise",.2,(0,lV.getNumberValidator)(),Ox.Factory.afterSetFilter)});var kx=je(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.Pixelate=void 0;var Fx=pt(),dV=Dn(),uV=En(),hV=St(),fV=function(n){let e=Math.ceil(this.pixelSize()),i=n.width,t=n.height,r,s,l,d,h,p,g,v=Math.ceil(i/e),_=Math.ceil(t/e),b,C,w,x,M,F,k,L=n.data;if(e<=0){dV.Util.error("pixelSize value can not be <= 0");return}for(M=0;M<v;M+=1)for(F=0;F<_;F+=1){for(d=0,h=0,p=0,g=0,b=M*e,C=b+e,w=F*e,x=w+e,k=0,r=b;r<C;r+=1)if(!(r>=i))for(s=w;s<x;s+=1)s>=t||(l=(i*s+r)*4,d+=L[l+0],h+=L[l+1],p+=L[l+2],g+=L[l+3],k+=1);for(d=d/k,h=h/k,p=p/k,g=g/k,r=b;r<C;r+=1)if(!(r>=i))for(s=w;s<x;s+=1)s>=t||(l=(i*s+r)*4,L[l+0]=d,L[l+1]=h,L[l+2]=p,L[l+3]=g)}};Lp.Pixelate=fV;Fx.Factory.addGetterSetter(uV.Node,"pixelSize",8,(0,hV.getNumberValidator)(),Fx.Factory.afterSetFilter)});var Nx=je(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.Posterize=void 0;var Lx=pt(),pV=En(),mV=St(),gV=function(n){let e=Math.round(this.levels()*254)+1,i=n.data,t=i.length,r=255/e,s;for(s=0;s<t;s+=1)i[s]=Math.floor(i[s]/r)*r};Np.Posterize=gV;Lx.Factory.addGetterSetter(pV.Node,"levels",.5,(0,mV.getNumberValidator)(),Lx.Factory.afterSetFilter)});var Vx=je(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.RGB=void 0;var Vp=pt(),Jy=En(),vV=St(),yV=function(n){let e=n.data,i=e.length,t=this.red(),r=this.green(),s=this.blue(),l,d;for(l=0;l<i;l+=4)d=(.34*e[l]+.5*e[l+1]+.16*e[l+2])/255,e[l]=d*t,e[l+1]=d*r,e[l+2]=d*s,e[l+3]=e[l+3]};Bp.RGB=yV;Vp.Factory.addGetterSetter(Jy.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Vp.Factory.addGetterSetter(Jy.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Vp.Factory.addGetterSetter(Jy.Node,"blue",0,vV.RGBComponent,Vp.Factory.afterSetFilter)});var Bx=je(qp=>{"use strict";Object.defineProperty(qp,"__esModule",{value:!0});qp.RGBA=void 0;var md=pt(),Up=En(),SV=St(),bV=function(n){let e=n.data,i=e.length,t=this.red(),r=this.green(),s=this.blue(),l=this.alpha();for(let d=0;d<i;d+=4){let h=1-l;e[d]=t*l+e[d]*h,e[d+1]=r*l+e[d+1]*h,e[d+2]=s*l+e[d+2]*h}};qp.RGBA=bV;md.Factory.addGetterSetter(Up.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});md.Factory.addGetterSetter(Up.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});md.Factory.addGetterSetter(Up.Node,"blue",0,SV.RGBComponent,md.Factory.afterSetFilter);md.Factory.addGetterSetter(Up.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n})});var Ux=je(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.Sepia=void 0;var _V=function(n){let e=n.data,i=e.length,t,r,s,l;for(t=0;t<i;t+=4)r=e[t+0],s=e[t+1],l=e[t+2],e[t+0]=Math.min(255,r*.393+s*.769+l*.189),e[t+1]=Math.min(255,r*.349+s*.686+l*.168),e[t+2]=Math.min(255,r*.272+s*.534+l*.131)};jp.Sepia=_V});var qx=je(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.Solarize=void 0;var DV=function(n){let e=n.data,i=n.width,t=n.height,r=i*4,s=t;do{let l=(s-1)*r,d=i;do{let h=l+(d-1)*4,p=e[h],g=e[h+1],v=e[h+2];p>127&&(p=255-p),g>127&&(g=255-g),v>127&&(v=255-v),e[h]=p,e[h+1]=g,e[h+2]=v}while(--d)}while(--s)};Gp.Solarize=DV});var Gx=je(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.Threshold=void 0;var jx=pt(),CV=En(),wV=St(),IV=function(n){let e=this.threshold()*255,i=n.data,t=i.length;for(let r=0;r<t;r+=1)i[r]=i[r]<e?0:255};zp.Threshold=IV;jx.Factory.addGetterSetter(CV.Node,"threshold",.5,(0,wV.getNumberValidator)(),jx.Factory.afterSetFilter)});var Qx=je(Hp=>{"use strict";Object.defineProperty(Hp,"__esModule",{value:!0});Hp.Konva=void 0;var zx=gT(),EV=yT(),TV=wT(),xV=IT(),AV=TT(),MV=xT(),Hx=RT(),RV=xy(),OV=np(),PV=Ny(),FV=FT(),kV=VT(),LV=UT(),NV=qT(),VV=zy(),BV=tx(),UV=lx(),qV=dx(),jV=fx(),GV=mx(),zV=vx(),HV=Sx(),QV=_x(),WV=Dx(),$V=Cx(),YV=wx(),XV=Ix(),ZV=Ax(),KV=Rx(),JV=Px(),eB=kx(),tB=Nx(),nB=Vx(),iB=Bx(),rB=Ux(),oB=qx(),sB=Gx();Hp.Konva=zx.Konva.Util._assign(zx.Konva,{Arc:EV.Arc,Arrow:TV.Arrow,Circle:xV.Circle,Ellipse:AV.Ellipse,Image:MV.Image,Label:Hx.Label,Tag:Hx.Tag,Line:RV.Line,Path:OV.Path,Rect:PV.Rect,RegularPolygon:FV.RegularPolygon,Ring:kV.Ring,Sprite:LV.Sprite,Star:NV.Star,Text:VV.Text,TextPath:BV.TextPath,Transformer:UV.Transformer,Wedge:qV.Wedge,Filters:{Blur:jV.Blur,Brighten:GV.Brighten,Contrast:zV.Contrast,Emboss:HV.Emboss,Enhance:QV.Enhance,Grayscale:WV.Grayscale,HSL:$V.HSL,HSV:YV.HSV,Invert:XV.Invert,Kaleidoscope:ZV.Kaleidoscope,Mask:KV.Mask,Noise:JV.Noise,Pixelate:eB.Pixelate,Posterize:tB.Posterize,RGB:nB.RGB,RGBA:iB.RGBA,Sepia:rB.Sepia,Solarize:oB.Solarize,Threshold:sB.Threshold}})});var eS=je((Wx,$x)=>{"use strict";Object.defineProperty(Wx,"__esModule",{value:!0});var aB=Qx();$x.exports=aB.Konva});var tS=je((lK,Qp)=>{"use strict";var Yx=function(){var n={};n.floodFill=function(s,l,d,h,p,g){return g?i(s,l,d,h,p):e(s,l,d,h,p)};function e(s,l,d,h,p){var g,v,_,b,C,w,x,M,F,k,L=s.data,U=s.width,H=s.height,G=s.bytes,$=-1,ne=U+1,O=-1,j=H+1,T=d*U+l,Z=new Uint8Array(U*H),ge=new Uint8Array(p||U*H);if(ge[T]===1)return null;T=T*G;var oe=[L[T],L[T+1],L[T+2],L[T+3]],N=[{y:d,left:l-1,right:l+1,dir:1}];do{for(b=N.shift(),k=!1,v=b.left+1;v<b.right;v++)if(x=b.y*U,T=(x+v)*G,ge[x+v]!==1&&(g=L[T]-oe[0],!(g>h||g<-h)&&(g=L[T+1]-oe[1],!(g>h||g<-h)&&(g=L[T+2]-oe[2],!(g>h||g<-h))))){for(k=!0,Z[x+v]=1,ge[x+v]=1,w=v-1;w>-1&&(M=x+w,T=M*G,!(ge[M]===1||(g=L[T]-oe[0],g>h||g<-h)||(g=L[T+1]-oe[1],g>h||g<-h)||(g=L[T+2]-oe[2],g>h||g<-h)));)Z[M]=1,ge[M]=1,w--;for(C=v+1;C<U&&(F=x+C,T=F*G,!(ge[F]===1||(g=L[T]-oe[0],g>h||g<-h)||(g=L[T+1]-oe[1],g>h||g<-h)||(g=L[T+2]-oe[2],g>h||g<-h)));)Z[F]=1,ge[F]=1,C++;w<ne&&(ne=w+1),C>$&&($=C-1),_=b.y-b.dir,_>=0&&_<H&&(w<b.left&&N.push({y:_,left:w,right:b.left,dir:-b.dir}),b.right<C&&N.push({y:_,left:b.right,right:C,dir:-b.dir})),_=b.y+b.dir,_>=0&&_<H&&w<C&&N.push({y:_,left:w,right:C,dir:b.dir})}k&&(b.y<j&&(j=b.y),b.y>O&&(O=b.y))}while(N.length>0);return{data:Z,width:s.width,height:s.height,bounds:{minX:ne,minY:j,maxX:$,maxY:O}}}function i(s,l,d,h,p){var g,v,_,b,C,w,x,M,F,k,L=s.data,U=s.width,H=s.height,G=s.bytes,$=-1,ne=U+1,O=-1,j=H+1,T=d*U+l,Z=new Uint8Array(U*H),ge=new Uint8Array(p||U*H);if(ge[T]===1)return null;T=T*G;var oe=[L[T],L[T+1],L[T+2],L[T+3]],N=[{y:d,left:l-1,right:l+1,dir:1}];do{for(b=N.shift(),k=!1,v=b.left+1;v<b.right;v++)if(x=b.y*U,T=(x+v)*G,ge[x+v]!==1&&(k=!0,Z[x+v]=1,ge[x+v]=1,g=L[T]-oe[0],!(g>h||g<-h)&&(g=L[T+1]-oe[1],!(g>h||g<-h)&&(g=L[T+2]-oe[2],!(g>h||g<-h))))){for(w=v-1;w>-1&&(M=x+w,T=M*G,!(ge[M]===1||(Z[M]=1,ge[M]=1,w--,g=L[T]-oe[0],g>h||g<-h)||(g=L[T+1]-oe[1],g>h||g<-h)||(g=L[T+2]-oe[2],g>h||g<-h))););for(C=v+1;C<U&&(F=x+C,T=F*G,!(ge[F]===1||(Z[F]=1,ge[F]=1,C++,g=L[T]-oe[0],g>h||g<-h)||(g=L[T+1]-oe[1],g>h||g<-h)||(g=L[T+2]-oe[2],g>h||g<-h))););w<ne&&(ne=w+1),C>$&&($=C-1),_=b.y-b.dir,_>=0&&_<H&&(w<b.left&&N.push({y:_,left:w,right:b.left,dir:-b.dir}),b.right<C&&N.push({y:_,left:b.right,right:C,dir:-b.dir})),_=b.y+b.dir,_>=0&&_<H&&w<C&&N.push({y:_,left:w,right:C,dir:b.dir})}k&&(b.y<j&&(j=b.y),b.y>O&&(O=b.y))}while(N.length>0);return{data:Z,width:s.width,height:s.height,bounds:{minX:ne,minY:j,maxX:$,maxY:O}}}n.gaussBlur=function(s,l){var d,h,p,g,v,_,b,C,w=l*2+1,x=l*l,M=new Float32Array(w),F=0,k=s.width,L=s.height,U=s.data,H=s.bounds.minX,G=s.bounds.maxX,$=s.bounds.minY,ne=s.bounds.maxY;for(d=0;d<l;d++){var O=(l-d)*(l-d),j=Math.exp(-O/(2*x))/(2*Math.PI*x);M[l+d]=M[l-d]=j,F+=2*j}for(d=0;d<w;d++)M[d]/=F;var T=new Uint8Array(k*L),Z=l+k,ge=l+L;for(v=$;v<ne+1;v++)for(g=H;g<G+1;g++){for(_=0,h=v*k+g,b=l-g>0?l-g:0,C=Z-g<w?Z-g:w,p=h-l,d=b;d<C;d++)_+=U[p+d]*M[d];for(b=l-v>0?l-v:0,C=ge-v<w?ge-v:w,p=h-l*k,d=b;d<C;d++)_+=U[p+d*k]*M[d];T[h]=_>.5?1:0}return{data:T,width:k,height:L,bounds:{minX:H,minY:$,maxX:G,maxY:ne}}};function t(s,l,d){var h,p,g,v,_,b,C,w=s.width,x=s.height,M=s.data,F=new Uint8Array(M),k=s.bounds.minX,L=s.bounds.maxX,U=s.bounds.minY,H=s.bounds.maxY,G=w*x,$=new Uint8Array(G),ne=[],O=Math.max(k,1),j=Math.min(L,w-2),T=Math.max(U,1),Z=Math.min(H,x-2);if(d&&d.length>0)for(_=0;_<G;_++)d[_]===1&&(F[_]=1);for(v=T;v<Z+1;v++)for(h=O;h<j+1;h++)_=v*w+h,M[_]!==0&&(b=_+w,C=_-w,(F[_+1]===0||F[_-1]===0||F[b]===0||F[b+1]===0||F[b-1]===0||F[C]===0||F[C+1]===0||F[C-1]===0)&&ne.push(_));if(k==0)for(v=U;v<H+1;v++)M[v*w]===1&&ne.push(v*w);if(L==w-1)for(v=U;v<H+1;v++)M[v*w+L]===1&&ne.push(v*w+L);if(U==0)for(h=k;h<L+1;h++)M[h]===1&&ne.push(h);if(H==x-1)for(h=k;h<L+1;h++)M[H*w+h]===1&&ne.push(H*w+h);var ge=[],oe,N,W=l+w,de=l+x,Y=l*2+1;for(G=ne.length,g=0;g<G;g++){for(_=ne[g],$[_]=1,ge.push(_),h=_%w,v=(_-h)/w,oe=l-h>0?l-h:0,N=W-h<Y?W-h:Y,b=_-l,p=oe;p<N;p++)C=b+p,$[C]===0&&($[C]=1,ge.push(C));for(oe=l-v>0?l-v:0,N=de-v<Y?de-v:Y,b=_-l*w,p=oe;p<N;p++)C=b+p*w,$[C]===0&&($[C]=1,ge.push(C))}return ge}n.gaussBlurOnlyBorder=function(s,l,d){var h=t(s,l,d),p,g,v,_,b,C,w,x,M,F,k,L=l*2+1,U=2*l*l,H=new Float32Array(L),G=0,$=s.width,ne=s.height,O=s.data,j=s.bounds.minX,T=s.bounds.maxX,Z=s.bounds.minY,ge=s.bounds.maxY,oe=h.length;for(v=0;v<l;v++)g=(l-v)*(l-v),p=Math.exp(-g/U)/Math.PI,H[l+v]=H[l-v]=p,G+=2*p;for(v=0;v<L;v++)H[v]/=G;var N=new Uint8Array(O),W=l+$,de=l+ne;for(v=0;v<oe;v++){for(b=h[v],M=0,w=b%$,x=(b-w)/$,F=l-w>0?l-w:0,k=W-w<L?W-w:L,C=b-l,_=F;_<k;_++)M+=O[C+_]*H[_];if(M>.5){N[b]=1,w<j&&(j=w),w>T&&(T=w),x<Z&&(Z=x),x>ge&&(ge=x);continue}for(F=l-x>0?l-x:0,k=de-x<L?de-x:L,C=b-l*$,_=F;_<k;_++)M+=O[C+_*$]*H[_];M>.5?(N[b]=1,w<j&&(j=w),w>T&&(T=w),x<Z&&(Z=x),x>ge&&(ge=x)):N[b]=0}return{data:N,width:$,height:ne,bounds:{minX:j,minY:Z,maxX:T,maxY:ge}}},n.createBorderMask=function(s){var l,d,h,p,g,v=s.width,_=s.height,b=s.data,C=s.bounds.minX,w=s.bounds.maxX,x=s.bounds.minY,M=s.bounds.maxY,F=w-C+1,k=M-x+1,L=new Uint8Array(F*k),U=Math.max(C,1),H=Math.min(w,v-2),G=Math.max(x,1),$=Math.min(M,_-2);for(d=G;d<$+1;d++)for(l=U;l<H+1;l++)h=d*v+l,b[h]!==0&&(p=h+v,g=h-v,(b[h+1]===0||b[h-1]===0||b[p]===0||b[p+1]===0||b[p-1]===0||b[g]===0||b[g+1]===0||b[g-1]===0)&&(L[(d-x)*F+(l-C)]=1));if(C==0)for(d=x;d<M+1;d++)b[d*v]===1&&(L[(d-x)*F]=1);if(w==v-1)for(d=x;d<M+1;d++)b[d*v+w]===1&&(L[(d-x)*F+(w-C)]=1);if(x==0)for(l=C;l<w+1;l++)b[l]===1&&(L[l-C]=1);if(M==_-1)for(l=C;l<w+1;l++)b[M*v+l]===1&&(L[(M-x)*F+(l-C)]=1);return{data:L,width:F,height:k,offset:{x:C,y:x}}},n.getBorderIndices=function(s){var l,d,h,p,g,v=s.width,_=s.height,b=s.data,C=[],w=v-1,x=_-1;for(d=1;d<x;d++)for(l=1;l<w;l++)h=d*v+l,b[h]!==0&&(p=h+v,g=h-v,(b[h+1]===0||b[h-1]===0||b[p]===0||b[p+1]===0||b[p-1]===0||b[g]===0||b[g+1]===0||b[g-1]===0)&&C.push(h));for(d=0;d<_;d++)b[d*v]===1&&C.push(d*v);for(l=0;l<v;l++)b[l]===1&&C.push(l);for(h=v-1,d=0;d<_;d++)b[d*v+h]===1&&C.push(d*v+h);for(h=(_-1)*v,l=0;l<v;l++)b[h+l]===1&&C.push(h+l);return C};function r(s){var l,d,h=s.width,p=s.data,g=s.bounds.minX,v=s.bounds.maxX,_=s.bounds.minY,b=s.bounds.maxY,C=v-g+3,w=b-_+3,x=new Uint8Array(C*w);for(d=_;d<b+1;d++)for(l=g;l<v+1;l++)p[d*h+l]===1&&(x[(d-_+1)*C+(l-g+1)]=1);return{data:x,width:C,height:w,offset:{x:g-1,y:_-1}}}return n.traceContours=function(s){var l=r(s),d=[],h=0,p=l.width,g=p*2,v=l.height,_=l.data,b=l.offset.x,C=l.offset.y,w=new Uint8Array(_),x,M,F,k,L,U,H,G,$,ne,O,j,T,Z,ge,oe=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(k=1;k<v-1;k++)for(F=1;F<p-1;F++)if(L=k*p+F,_[L]===1){for(x=-p;x<g;x+=g)if(_[L+x]===0&&w[L+x]===0){for(G=x===p,h++,H=[],$=G?2:6,j=T=ne={x:F,y:k},O=null;;){for(w[j.y*p+j.x]=h,M=0;M<8;M++){if($=($+1)%8,ge=oe[$],Z={x:j.x+ge[0],y:j.y+ge[1]},U=Z.y*p+Z.x,_[U]===1){w[U]=h;break}w[U]=-1,Z=null}if(Z===null)break;if(j=Z,O){if(T.x===ne.x&&T.y===ne.y&&j.x===O.x&&j.y===O.y)break}else O=Z;H.push({x:T.x+b,y:T.y+C}),T=j,$=($+4)%8}Z!=null&&(H.push({x:ne.x+b,y:ne.y+C}),d.push({inner:G,label:h,points:H}))}}return d},n.simplifyContours=function(s,l,d){var h=s.length,p=[],g,v,_,b,C,w,x,M,F,k,L,U,H,G,$,ne,O,j,T,Z,ge;for(v=0;v<h;v++){if(b=s[v],C=b.points,w=b.points.length,w<d){for(x=[],_=0;_<w;_++)x.push({x:C[_].x,y:C[_].y});p.push({inner:b.inner,label:b.label,points:x,initialCount:w});continue}M=[0,w-1],F=[{first:0,last:w-1}];do if(k=F.shift(),!(k.last<=k.first+1)){for(L=-1,U=k.first,g=k.first+1;g<k.last;g++)T=C[g],Z=C[k.first],ge=C[k.last],O=T.x-Z.x,j=T.y-Z.y,G=Math.sqrt(O*O+j*j),O=T.x-ge.x,j=T.y-ge.y,$=Math.sqrt(O*O+j*j),O=Z.x-ge.x,j=Z.y-ge.y,ne=Math.sqrt(O*O+j*j),G>=Math.sqrt($*$+ne*ne)?H=$:$>=Math.sqrt(G*G+ne*ne)?H=G:H=Math.abs((j*T.x-O*T.y+Z.x*ge.y-ge.x*Z.y)/ne),H>L&&(U=g,L=H);L>l&&(M.push(U),F.push({first:k.first,last:U}),F.push({first:U,last:k.last}))}while(F.length>0);for(x=[],w=M.length,M.sort(function(oe,N){return oe-N}),_=0;_<w;_++)x.push({x:C[M[_]].x,y:C[M[_]].y});p.push({inner:b.inner,label:b.label,points:x,initialCount:b.points.length})}return p},n}();typeof Qp<"u"&&Qp!==null&&(Qp.exports=Yx);typeof window<"u"&&window!==null&&(window.MagicWand=Yx)});var iS=je((Xx,nS)=>{"use strict";(function(n){typeof Xx=="object"&&typeof nS<"u"?nS.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(e,i,t){function r(d,h){if(!i[d]){if(!e[d]){var p=typeof oc=="function"&&oc;if(!h&&p)return p(d,!0);if(s)return s(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var v=i[d]={exports:{}};e[d][0].call(v.exports,function(_){var b=e[d][1][_];return r(b||_)},v,v.exports,n,e,i,t)}return i[d].exports}for(var s=typeof oc=="function"&&oc,l=0;l<t.length;l++)r(t[l]);return r}({1:[function(n,e,i){"use strict";var t=n("./utils"),r=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var d,h,p,g,v,_,b,C=[],w=0,x=l.length,M=x,F=t.getTypeOf(l)!=="string";w<l.length;)M=x-w,p=F?(d=l[w++],h=w<x?l[w++]:0,w<x?l[w++]:0):(d=l.charCodeAt(w++),h=w<x?l.charCodeAt(w++):0,w<x?l.charCodeAt(w++):0),g=d>>2,v=(3&d)<<4|h>>4,_=1<M?(15&h)<<2|p>>6:64,b=2<M?63&p:64,C.push(s.charAt(g)+s.charAt(v)+s.charAt(_)+s.charAt(b));return C.join("")},i.decode=function(l){var d,h,p,g,v,_,b=0,C=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var x,M=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&M--,l.charAt(l.length-2)===s.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=r.uint8array?new Uint8Array(0|M):new Array(0|M);b<l.length;)d=s.indexOf(l.charAt(b++))<<2|(g=s.indexOf(l.charAt(b++)))>>4,h=(15&g)<<4|(v=s.indexOf(l.charAt(b++)))>>2,p=(3&v)<<6|(_=s.indexOf(l.charAt(b++))),x[C++]=d,v!==64&&(x[C++]=h),_!==64&&(x[C++]=p);return x}},{"./support":30,"./utils":32}],2:[function(n,e,i){"use strict";var t=n("./external"),r=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function d(h,p,g,v,_){this.compressedSize=h,this.uncompressedSize=p,this.crc32=g,this.compression=v,this.compressedContent=_}d.prototype={getContentWorker:function(){var h=new r(t.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return h.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new r(t.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,p,g){return h.pipe(new s).pipe(new l("uncompressedSize")).pipe(p.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},e.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,e,i){"use strict";var t=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,e,i){"use strict";var t=n("./utils"),r=function(){for(var s,l=[],d=0;d<256;d++){s=d;for(var h=0;h<8;h++)s=1&s?3988292384^s>>>1:s>>>1;l[d]=s}return l}();e.exports=function(s,l){return s!==void 0&&s.length?t.getTypeOf(s)!=="string"?function(d,h,p,g){var v=r,_=g+p;d^=-1;for(var b=g;b<_;b++)d=d>>>8^v[255&(d^h[b])];return-1^d}(0|l,s,s.length,0):function(d,h,p,g){var v=r,_=g+p;d^=-1;for(var b=g;b<_;b++)d=d>>>8^v[255&(d^h.charCodeAt(b))];return-1^d}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(n,e,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,e,i){"use strict";var t=null;t=typeof Promise<"u"?Promise:n("lie"),e.exports={Promise:t}},{lie:37}],7:[function(n,e,i){"use strict";var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",r=n("pako"),s=n("./utils"),l=n("./stream/GenericWorker"),d=t?"uint8array":"array";function h(p,g){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=g,this.meta={}}i.magic="\b\0",s.inherits(h,l),h.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(d,p.data),!1)},h.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(g){p.push({data:g,meta:p.meta})}},i.compressWorker=function(p){return new h("Deflate",p)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,e,i){"use strict";function t(v,_){var b,C="";for(b=0;b<_;b++)C+=String.fromCharCode(255&v),v>>>=8;return C}function r(v,_,b,C,w,x){var M,F,k=v.file,L=v.compression,U=x!==d.utf8encode,H=s.transformTo("string",x(k.name)),G=s.transformTo("string",d.utf8encode(k.name)),$=k.comment,ne=s.transformTo("string",x($)),O=s.transformTo("string",d.utf8encode($)),j=G.length!==k.name.length,T=O.length!==$.length,Z="",ge="",oe="",N=k.dir,W=k.date,de={crc32:0,compressedSize:0,uncompressedSize:0};_&&!b||(de.crc32=v.crc32,de.compressedSize=v.compressedSize,de.uncompressedSize=v.uncompressedSize);var Y=0;_&&(Y|=8),U||!j&&!T||(Y|=2048);var Q=0,De=0;N&&(Q|=16),w==="UNIX"?(De=798,Q|=function(fe,ze){var un=fe;return fe||(un=ze?16893:33204),(65535&un)<<16}(k.unixPermissions,N)):(De=20,Q|=function(fe){return 63&(fe||0)}(k.dosPermissions)),M=W.getUTCHours(),M<<=6,M|=W.getUTCMinutes(),M<<=5,M|=W.getUTCSeconds()/2,F=W.getUTCFullYear()-1980,F<<=4,F|=W.getUTCMonth()+1,F<<=5,F|=W.getUTCDate(),j&&(ge=t(1,1)+t(h(H),4)+G,Z+="up"+t(ge.length,2)+ge),T&&(oe=t(1,1)+t(h(ne),4)+O,Z+="uc"+t(oe.length,2)+oe);var ye="";return ye+=`
\0`,ye+=t(Y,2),ye+=L.magic,ye+=t(M,2),ye+=t(F,2),ye+=t(de.crc32,4),ye+=t(de.compressedSize,4),ye+=t(de.uncompressedSize,4),ye+=t(H.length,2),ye+=t(Z.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ye+H+Z,dirRecord:p.CENTRAL_FILE_HEADER+t(De,2)+ye+t(ne.length,2)+"\0\0\0\0"+t(Q,4)+t(C,4)+H+Z+ne}}var s=n("../utils"),l=n("../stream/GenericWorker"),d=n("../utf8"),h=n("../crc32"),p=n("../signature");function g(v,_,b,C){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=b,this.encodeFileName=C,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(g,l),g.prototype.push=function(v){var _=v.meta.percent||0,b=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,l.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:b?(_+100*(b-C-1))/b:100}}))},g.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var _=this.streamFiles&&!v.file.dir;if(_){var b=r(v,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(v){this.accumulate=!1;var _=this.streamFiles&&!v.file.dir,b=r(v,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),_)this.push({data:function(C){return p.DATA_DESCRIPTOR+t(C.crc32,4)+t(C.compressedSize,4)+t(C.uncompressedSize,4)}(v),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var v=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var b=this.bytesWritten-v,C=function(w,x,M,F,k){var L=s.transformTo("string",k(F));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+t(w,2)+t(w,2)+t(x,4)+t(M,4)+t(L.length,2)+L}(this.dirRecords.length,b,v,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(v){this._sources.push(v);var _=this;return v.on("data",function(b){_.processChunk(b)}),v.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),v.on("error",function(b){_.error(b)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(v){var _=this._sources;if(!l.prototype.error.call(this,v))return!1;for(var b=0;b<_.length;b++)try{_[b].error(v)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var v=this._sources,_=0;_<v.length;_++)v[_].lock()},e.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,e,i){"use strict";var t=n("../compressions"),r=n("./ZipFileWorker");i.generateWorker=function(s,l,d){var h=new r(l.streamFiles,d,l.platform,l.encodeFileName),p=0;try{s.forEach(function(g,v){p++;var _=function(x,M){var F=x||M,k=t[F];if(!k)throw new Error(F+" is not a valid compression method !");return k}(v.options.compression,l.compression),b=v.options.compressionOptions||l.compressionOptions||{},C=v.dir,w=v.date;v._compressWorker(_,b).withStreamInfo("file",{name:g,dir:C,date:w,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(h)}),h.entriesCount=p}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,e,i){"use strict";function t(){if(!(this instanceof t))return new t;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var r=new t;for(var s in this)typeof this[s]!="function"&&(r[s]=this[s]);return r}}(t.prototype=n("./object")).loadAsync=n("./load"),t.support=n("./support"),t.defaults=n("./defaults"),t.version="3.10.1",t.loadAsync=function(r,s){return new t().loadAsync(r,s)},t.external=n("./external"),e.exports=t},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,e,i){"use strict";var t=n("./utils"),r=n("./external"),s=n("./utf8"),l=n("./zipEntries"),d=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function p(g){return new r.Promise(function(v,_){var b=g.decompressed.getContentWorker().pipe(new d);b.on("error",function(C){_(C)}).on("end",function(){b.streamInfo.crc32!==g.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}e.exports=function(g,v){var _=this;return v=t.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),h.isNode&&h.isStream(g)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):t.prepareContent("the loaded zip file",g,!0,v.optimizedBinaryString,v.base64).then(function(b){var C=new l(v);return C.load(b),C}).then(function(b){var C=[r.Promise.resolve(b)],w=b.files;if(v.checkCRC32)for(var x=0;x<w.length;x++)C.push(p(w[x]));return r.Promise.all(C)}).then(function(b){for(var C=b.shift(),w=C.files,x=0;x<w.length;x++){var M=w[x],F=M.fileNameStr,k=t.resolve(M.fileNameStr);_.file(k,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:v.createFolders}),M.dir||(_.file(k).unsafeOriginalName=F)}return C.zipComment.length&&(_.comment=C.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,e,i){"use strict";var t=n("../utils"),r=n("../stream/GenericWorker");function s(l,d){r.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}t.inherits(s,r),s.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},s.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,e,i){"use strict";var t=n("readable-stream").Readable;function r(s,l,d){t.call(this,l),this._helper=s;var h=this;s.on("data",function(p,g){h.push(p)||h._helper.pause(),d&&d(g)}).on("error",function(p){h.emit("error",p)}).on("end",function(){h.push(null)})}n("../utils").inherits(r,t),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(n,e,i){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(t,r){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,r);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,r)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var r=new Buffer(t);return r.fill(0),r},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}},{}],15:[function(n,e,i){"use strict";function t(k,L,U){var H,G=s.getTypeOf(L),$=s.extend(U||{},h);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(k=w(k)),$.createFolders&&(H=C(k))&&x.call(this,H,!0);var ne=G==="string"&&$.binary===!1&&$.base64===!1;U&&U.binary!==void 0||($.binary=!ne),(L instanceof p&&L.uncompressedSize===0||$.dir||!L||L.length===0)&&($.base64=!1,$.binary=!0,L="",$.compression="STORE",G="string");var O=null;O=L instanceof p||L instanceof l?L:_.isNode&&_.isStream(L)?new b(k,L):s.prepareContent(k,L,$.binary,$.optimizedBinaryString,$.base64);var j=new g(k,O,$);this.files[k]=j}var r=n("./utf8"),s=n("./utils"),l=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),h=n("./defaults"),p=n("./compressedObject"),g=n("./zipObject"),v=n("./generate"),_=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),C=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var L=k.lastIndexOf("/");return 0<L?k.substring(0,L):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},x=function(k,L){return L=L!==void 0?L:h.createFolders,k=w(k),this.files[k]||t.call(this,k,null,{dir:!0,createFolders:L}),this.files[k]};function M(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var L,U,H;for(L in this.files)H=this.files[L],(U=L.slice(this.root.length,L.length))&&L.slice(0,this.root.length)===this.root&&k(U,H)},filter:function(k){var L=[];return this.forEach(function(U,H){k(U,H)&&L.push(H)}),L},file:function(k,L,U){if(arguments.length!==1)return k=this.root+k,t.call(this,k,L,U),this;if(M(k)){var H=k;return this.filter(function($,ne){return!ne.dir&&H.test($)})}var G=this.files[this.root+k];return G&&!G.dir?G:null},folder:function(k){if(!k)return this;if(M(k))return this.filter(function(G,$){return $.dir&&k.test(G)});var L=this.root+k,U=x.call(this,L),H=this.clone();return H.root=U.name,H},remove:function(k){k=this.root+k;var L=this.files[k];if(L||(k.slice(-1)!=="/"&&(k+="/"),L=this.files[k]),L&&!L.dir)delete this.files[k];else for(var U=this.filter(function(G,$){return $.name.slice(0,k.length)===k}),H=0;H<U.length;H++)delete this.files[U[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var L,U={};try{if((U=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=U.type.toLowerCase(),U.compression=U.compression.toUpperCase(),U.type==="binarystring"&&(U.type="string"),!U.type)throw new Error("No output type specified.");s.checkSupport(U.type),U.platform!=="darwin"&&U.platform!=="freebsd"&&U.platform!=="linux"&&U.platform!=="sunos"||(U.platform="UNIX"),U.platform==="win32"&&(U.platform="DOS");var H=U.comment||this.comment||"";L=v.generateWorker(this,U,H)}catch(G){(L=new l("error")).error(G)}return new d(L,U.type||"string",U.mimeType)},generateAsync:function(k,L){return this.generateInternalStream(k).accumulate(L)},generateNodeStream:function(k,L){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(L)}};e.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,e,i){"use strict";e.exports=n("stream")},{stream:void 0}],17:[function(n,e,i){"use strict";var t=n("./DataReader");function r(s){t.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}n("../utils").inherits(r,t),r.prototype.byteAt=function(s){return this.data[this.zero+s]},r.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),d=s.charCodeAt(1),h=s.charCodeAt(2),p=s.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===d&&this.data[g+2]===h&&this.data[g+3]===p)return g-this.zero;return-1},r.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),d=s.charCodeAt(1),h=s.charCodeAt(2),p=s.charCodeAt(3),g=this.readData(4);return l===g[0]&&d===g[1]&&h===g[2]&&p===g[3]},r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(n,e,i){"use strict";var t=n("../utils");function r(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,d=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=s,d},readString:function(s){return t.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},e.exports=r},{"../utils":32}],19:[function(n,e,i){"use strict";var t=n("./Uint8ArrayReader");function r(s){t.call(this,s)}n("../utils").inherits(r,t),r.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,e,i){"use strict";var t=n("./DataReader");function r(s){t.call(this,s)}n("../utils").inherits(r,t),r.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},r.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},r.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},r.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(n,e,i){"use strict";var t=n("./ArrayReader");function r(s){t.call(this,s)}n("../utils").inherits(r,t),r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(n,e,i){"use strict";var t=n("../utils"),r=n("../support"),s=n("./ArrayReader"),l=n("./StringReader"),d=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");e.exports=function(p){var g=t.getTypeOf(p);return t.checkSupport(g),g!=="string"||r.uint8array?g==="nodebuffer"?new d(p):r.uint8array?new h(t.transformTo("uint8array",p)):new s(t.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,e,i){"use strict";i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,e,i){"use strict";var t=n("./GenericWorker"),r=n("../utils");function s(l){t.call(this,"ConvertWorker to "+l),this.destType=l}r.inherits(s,t),s.prototype.processChunk=function(l){this.push({data:r.transformTo(this.destType,l.data),meta:l.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,e,i){"use strict";var t=n("./GenericWorker"),r=n("../crc32");function s(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,t),s.prototype.processChunk=function(l){this.streamInfo.crc32=r(l.data,this.streamInfo.crc32||0),this.push(l)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,e,i){"use strict";var t=n("../utils"),r=n("./GenericWorker");function s(l){r.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}t.inherits(s,r),s.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}r.prototype.processChunk.call(this,l)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,e,i){"use strict";var t=n("../utils"),r=n("./GenericWorker");function s(l){r.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=t.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}t.inherits(s,r),s.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,t.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(t.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,e,i){"use strict";function t(r){this.name=r||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}t.prototype={push:function(r){this.emit("data",r)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(r){this.emit("error",r)}return!0},error:function(r){return!this.isFinished&&(this.isPaused?this.generatedError=r:(this.isFinished=!0,this.emit("error",r),this.previous&&this.previous.error(r),this.cleanUp()),!0)},on:function(r,s){return this._listeners[r].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(r,s){if(this._listeners[r])for(var l=0;l<this._listeners[r].length;l++)this._listeners[r][l].call(this,s)},pipe:function(r){return r.registerPrevious(this)},registerPrevious:function(r){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=r.streamInfo,this.mergeStreamInfo(),this.previous=r;var s=this;return r.on("data",function(l){s.processChunk(l)}),r.on("end",function(){s.end()}),r.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var r=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),r=!0),this.previous&&this.previous.resume(),!r},flush:function(){},processChunk:function(r){this.push(r)},withStreamInfo:function(r,s){return this.extraStreamInfo[r]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var r in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,r)&&(this.streamInfo[r]=this.extraStreamInfo[r])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var r="Worker "+this.name;return this.previous?this.previous+" -> "+r:r}},e.exports=t},{}],29:[function(n,e,i){"use strict";var t=n("../utils"),r=n("./ConvertWorker"),s=n("./GenericWorker"),l=n("../base64"),d=n("../support"),h=n("../external"),p=null;if(d.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(_,b){return new h.Promise(function(C,w){var x=[],M=_._internalType,F=_._outputType,k=_._mimeType;_.on("data",function(L,U){x.push(L),b&&b(U)}).on("error",function(L){x=[],w(L)}).on("end",function(){try{var L=function(U,H,G){switch(U){case"blob":return t.newBlob(t.transformTo("arraybuffer",H),G);case"base64":return l.encode(H);default:return t.transformTo(U,H)}}(F,function(U,H){var G,$=0,ne=null,O=0;for(G=0;G<H.length;G++)O+=H[G].length;switch(U){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(ne=new Uint8Array(O),G=0;G<H.length;G++)ne.set(H[G],$),$+=H[G].length;return ne;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+U+"'")}}(M,x),k);C(L)}catch(U){w(U)}x=[]}).resume()})}function v(_,b,C){var w=b;switch(b){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=b,this._mimeType=C,t.checkSupport(w),this._worker=_.pipe(new r(w)),_.lock()}catch(x){this._worker=new s("error"),this._worker.error(x)}}v.prototype={accumulate:function(_){return g(this,_)},on:function(_,b){var C=this;return _==="data"?this._worker.on(_,function(w){b.call(C,w.data,w.meta)}):this._worker.on(_,function(){t.delay(b,arguments,C)}),this},resume:function(){return t.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(t.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},_)}},e.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,e,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var t=new ArrayBuffer(0);try{i.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(t),i.blob=r.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,e,i){"use strict";for(var t=n("./utils"),r=n("./support"),s=n("./nodejsUtils"),l=n("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}i.utf8encode=function(v){return r.nodebuffer?s.newBufferFrom(v,"utf-8"):function(_){var b,C,w,x,M,F=_.length,k=0;for(x=0;x<F;x++)(64512&(C=_.charCodeAt(x)))==55296&&x+1<F&&(64512&(w=_.charCodeAt(x+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),x++),k+=C<128?1:C<2048?2:C<65536?3:4;for(b=r.uint8array?new Uint8Array(k):new Array(k),x=M=0;M<k;x++)(64512&(C=_.charCodeAt(x)))==55296&&x+1<F&&(64512&(w=_.charCodeAt(x+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),x++),C<128?b[M++]=C:(C<2048?b[M++]=192|C>>>6:(C<65536?b[M++]=224|C>>>12:(b[M++]=240|C>>>18,b[M++]=128|C>>>12&63),b[M++]=128|C>>>6&63),b[M++]=128|63&C);return b}(v)},i.utf8decode=function(v){return r.nodebuffer?t.transformTo("nodebuffer",v).toString("utf-8"):function(_){var b,C,w,x,M=_.length,F=new Array(2*M);for(b=C=0;b<M;)if((w=_[b++])<128)F[C++]=w;else if(4<(x=d[w]))F[C++]=65533,b+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&b<M;)w=w<<6|63&_[b++],x--;1<x?F[C++]=65533:w<65536?F[C++]=w:(w-=65536,F[C++]=55296|w>>10&1023,F[C++]=56320|1023&w)}return F.length!==C&&(F.subarray?F=F.subarray(0,C):F.length=C),t.applyFromCharCode(F)}(v=t.transformTo(r.uint8array?"uint8array":"array",v))},t.inherits(p,l),p.prototype.processChunk=function(v){var _=t.transformTo(r.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var b=_;(_=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),_.set(b,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var C=function(x,M){var F;for((M=M||x.length)>x.length&&(M=x.length),F=M-1;0<=F&&(192&x[F])==128;)F--;return F<0||F===0?M:F+d[x[F]]>M?F:M}(_),w=_;C!==_.length&&(r.uint8array?(w=_.subarray(0,C),this.leftOver=_.subarray(C,_.length)):(w=_.slice(0,C),this.leftOver=_.slice(C,_.length))),this.push({data:i.utf8decode(w),meta:v.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=p,t.inherits(g,l),g.prototype.processChunk=function(v){this.push({data:i.utf8encode(v.data),meta:v.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,e,i){"use strict";var t=n("./support"),r=n("./base64"),s=n("./nodejsUtils"),l=n("./external");function d(b){return b}function h(b,C){for(var w=0;w<b.length;++w)C[w]=255&b.charCodeAt(w);return C}n("setimmediate"),i.newBlob=function(b,C){i.checkSupport("blob");try{return new Blob([b],{type:C})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(b),w.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,C,w){var x=[],M=0,F=b.length;if(F<=w)return String.fromCharCode.apply(null,b);for(;M<F;)C==="array"||C==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(M,Math.min(M+w,F)))):x.push(String.fromCharCode.apply(null,b.subarray(M,Math.min(M+w,F)))),M+=w;return x.join("")},stringifyByChar:function(b){for(var C="",w=0;w<b.length;w++)C+=String.fromCharCode(b[w]);return C},applyCanBeUsed:{uint8array:function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function g(b){var C=65536,w=i.getTypeOf(b),x=!0;if(w==="uint8array"?x=p.applyCanBeUsed.uint8array:w==="nodebuffer"&&(x=p.applyCanBeUsed.nodebuffer),x)for(;1<C;)try{return p.stringifyByChunk(b,w,C)}catch{C=Math.floor(C/2)}return p.stringifyByChar(b)}function v(b,C){for(var w=0;w<b.length;w++)C[w]=b[w];return C}i.applyFromCharCode=g;var _={};_.string={string:d,array:function(b){return h(b,new Array(b.length))},arraybuffer:function(b){return _.string.uint8array(b).buffer},uint8array:function(b){return h(b,new Uint8Array(b.length))},nodebuffer:function(b){return h(b,s.allocBuffer(b.length))}},_.array={string:g,array:d,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},_.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return v(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:d,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},_.uint8array={string:g,array:function(b){return v(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:d,nodebuffer:function(b){return s.newBufferFrom(b)}},_.nodebuffer={string:g,array:function(b){return v(b,new Array(b.length))},arraybuffer:function(b){return _.nodebuffer.uint8array(b).buffer},uint8array:function(b){return v(b,new Uint8Array(b.length))},nodebuffer:d},i.transformTo=function(b,C){if(C=C||"",!b)return C;i.checkSupport(b);var w=i.getTypeOf(C);return _[w][b](C)},i.resolve=function(b){for(var C=b.split("/"),w=[],x=0;x<C.length;x++){var M=C[x];M==="."||M===""&&x!==0&&x!==C.length-1||(M===".."?w.pop():w.push(M))}return w.join("/")},i.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":t.nodebuffer&&s.isBuffer(b)?"nodebuffer":t.uint8array&&b instanceof Uint8Array?"uint8array":t.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(b){if(!t[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(b){var C,w,x="";for(w=0;w<(b||"").length;w++)x+="\\x"+((C=b.charCodeAt(w))<16?"0":"")+C.toString(16).toUpperCase();return x},i.delay=function(b,C,w){setImmediate(function(){b.apply(w||null,C||[])})},i.inherits=function(b,C){function w(){}w.prototype=C.prototype,b.prototype=new w},i.extend=function(){var b,C,w={};for(b=0;b<arguments.length;b++)for(C in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],C)&&w[C]===void 0&&(w[C]=arguments[b][C]);return w},i.prepareContent=function(b,C,w,x,M){return l.Promise.resolve(C).then(function(F){return t.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,L){var U=new FileReader;U.onload=function(H){k(H.target.result)},U.onerror=function(H){L(H.target.error)},U.readAsArrayBuffer(F)}):F}).then(function(F){var k=i.getTypeOf(F);return k?(k==="arraybuffer"?F=i.transformTo("uint8array",F):k==="string"&&(M?F=r.decode(F):w&&x!==!0&&(F=function(L){return h(L,t.uint8array?new Uint8Array(L.length):new Array(L.length))}(F))),F):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,e,i){"use strict";var t=n("./reader/readerFor"),r=n("./utils"),s=n("./signature"),l=n("./zipEntry"),d=n("./support");function h(p){this.files=[],this.loadOptions=p}h.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(g)+", expected "+r.pretty(p)+")")}},isSignature:function(p,g){var v=this.reader.index;this.reader.setIndex(p);var _=this.reader.readString(4)===g;return this.reader.setIndex(v),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",v=r.transformTo(g,p);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,g,v,_=this.zip64EndOfCentralSize-44;0<_;)p=this.reader.readInt(2),g=this.reader.readInt(4),v=this.reader.readData(g),this.zip64ExtensibleData[p]={id:p,length:g,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,g;for(p=0;p<this.files.length;p++)g=this.files[p],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var g=p;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var _=g-v;if(0<_)this.isSignature(g,s.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(p){this.reader=t(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,e,i){"use strict";var t=n("./reader/readerFor"),r=n("./utils"),s=n("./compressedObject"),l=n("./crc32"),d=n("./utf8"),h=n("./compressions"),p=n("./support");function g(v,_){this.options=v,this.loadOptions=_}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var _,b;if(v.skip(22),this.fileNameLength=v.readInt(2),b=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(C){for(var w in h)if(Object.prototype.hasOwnProperty.call(h,w)&&h[w].magic===C)return h[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,_,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var _=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(_),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=t(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var _,b,C,w=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<w;)_=v.readInt(2),b=v.readInt(2),C=v.readData(b),this.extraFields[_]={id:_,length:b,value:C};v.setIndex(w)},handleUTF8:function(){var v=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var b=r.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var w=r.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var _=t(v.value);return _.readInt(1)!==1||l(this.fileName)!==_.readInt(4)?null:d.utf8decode(_.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var _=t(v.value);return _.readInt(1)!==1||l(this.fileComment)!==_.readInt(4)?null:d.utf8decode(_.readData(v.length-5))}return null}},e.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,e,i){"use strict";function t(_,b,C){this.name=_,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=b,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var r=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),l=n("./utf8"),d=n("./compressedObject"),h=n("./stream/GenericWorker");t.prototype={internalStream:function(_){var b=null,C="string";try{if(!_)throw new Error("No output type specified.");var w=(C=_.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!w&&(b=b.pipe(new l.Utf8EncodeWorker)),!x&&w&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(M){(b=new h("error")).error(M)}return new r(b,C,"")},async:function(_,b){return this.internalStream(_).accumulate(b)},nodeStream:function(_,b){return this.internalStream(_||"nodebuffer").toNodejsStream(b)},_compressWorker:function(_,b){if(this._data instanceof d&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(C,_,b)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new s(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<p.length;v++)t.prototype[p[v]]=g;e.exports=t},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,e,i){(function(t){"use strict";var r,s,l=t.MutationObserver||t.WebKitMutationObserver;if(l){var d=0,h=new l(_),p=t.document.createTextNode("");h.observe(p,{characterData:!0}),r=function(){p.data=d=++d%2}}else if(t.setImmediate||t.MessageChannel===void 0)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var b=t.document.createElement("script");b.onreadystatechange=function(){_(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},t.document.documentElement.appendChild(b)}:function(){setTimeout(_,0)};else{var g=new t.MessageChannel;g.port1.onmessage=_,r=function(){g.port2.postMessage(0)}}var v=[];function _(){var b,C;s=!0;for(var w=v.length;w;){for(C=v,v=[],b=-1;++b<w;)C[b]();w=v.length}s=!1}e.exports=function(b){v.push(b)!==1||s||r()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,e,i){"use strict";var t=n("immediate");function r(){}var s={},l=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function p(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,w!==r&&b(this,w)}function g(w,x,M){this.promise=w,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function v(w,x,M){t(function(){var F;try{F=x(M)}catch(k){return s.reject(w,k)}F===w?s.reject(w,new TypeError("Cannot resolve promise with itself")):s.resolve(w,F)})}function _(w){var x=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof x=="function")return function(){x.apply(w,arguments)}}function b(w,x){var M=!1;function F(U){M||(M=!0,s.reject(w,U))}function k(U){M||(M=!0,s.resolve(w,U))}var L=C(function(){x(k,F)});L.status==="error"&&F(L.value)}function C(w,x){var M={};try{M.value=w(x),M.status="success"}catch(F){M.status="error",M.value=F}return M}(e.exports=p).prototype.finally=function(w){if(typeof w!="function")return this;var x=this.constructor;return this.then(function(M){return x.resolve(w()).then(function(){return M})},function(M){return x.resolve(w()).then(function(){throw M})})},p.prototype.catch=function(w){return this.then(null,w)},p.prototype.then=function(w,x){if(typeof w!="function"&&this.state===d||typeof x!="function"&&this.state===l)return this;var M=new this.constructor(r);return this.state!==h?v(M,this.state===d?w:x,this.outcome):this.queue.push(new g(M,w,x)),M},g.prototype.callFulfilled=function(w){s.resolve(this.promise,w)},g.prototype.otherCallFulfilled=function(w){v(this.promise,this.onFulfilled,w)},g.prototype.callRejected=function(w){s.reject(this.promise,w)},g.prototype.otherCallRejected=function(w){v(this.promise,this.onRejected,w)},s.resolve=function(w,x){var M=C(_,x);if(M.status==="error")return s.reject(w,M.value);var F=M.value;if(F)b(w,F);else{w.state=d,w.outcome=x;for(var k=-1,L=w.queue.length;++k<L;)w.queue[k].callFulfilled(x)}return w},s.reject=function(w,x){w.state=l,w.outcome=x;for(var M=-1,F=w.queue.length;++M<F;)w.queue[M].callRejected(x);return w},p.resolve=function(w){return w instanceof this?w:s.resolve(new this(r),w)},p.reject=function(w){var x=new this(r);return s.reject(x,w)},p.all=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,F=!1;if(!M)return this.resolve([]);for(var k=new Array(M),L=0,U=-1,H=new this(r);++U<M;)G(w[U],U);return H;function G($,ne){x.resolve($).then(function(O){k[ne]=O,++L!==M||F||(F=!0,s.resolve(H,k))},function(O){F||(F=!0,s.reject(H,O))})}},p.race=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,F=!1;if(!M)return this.resolve([]);for(var k=-1,L=new this(r);++k<M;)U=w[k],x.resolve(U).then(function(H){F||(F=!0,s.resolve(L,H))},function(H){F||(F=!0,s.reject(L,H))});var U;return L}},{immediate:36}],38:[function(n,e,i){"use strict";var t={};(0,n("./lib/utils/common").assign)(t,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),e.exports=t},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,e,i){"use strict";var t=n("./zlib/deflate"),r=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/messages"),d=n("./zlib/zstream"),h=Object.prototype.toString,p=0,g=-1,v=0,_=8;function b(w){if(!(this instanceof b))return new b(w);this.options=r.assign({level:g,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},w||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var M=t.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(M!==p)throw new Error(l[M]);if(x.header&&t.deflateSetHeader(this.strm,x.header),x.dictionary){var F;if(F=typeof x.dictionary=="string"?s.string2buf(x.dictionary):h.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(M=t.deflateSetDictionary(this.strm,F))!==p)throw new Error(l[M]);this._dict_set=!0}}function C(w,x){var M=new b(x);if(M.push(w,!0),M.err)throw M.msg||l[M.err];return M.result}b.prototype.push=function(w,x){var M,F,k=this.strm,L=this.options.chunkSize;if(this.ended)return!1;F=x===~~x?x:x===!0?4:0,typeof w=="string"?k.input=s.string2buf(w):h.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new r.Buf8(L),k.next_out=0,k.avail_out=L),(M=t.deflate(k,F))!==1&&M!==p)return this.onEnd(M),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(r.shrinkBuf(k.output,k.next_out))):this.onData(r.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&M!==1);return F===4?(M=t.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===p):F!==2||(this.onEnd(p),!(k.avail_out=0))},b.prototype.onData=function(w){this.chunks.push(w)},b.prototype.onEnd=function(w){w===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Deflate=b,i.deflate=C,i.deflateRaw=function(w,x){return(x=x||{}).raw=!0,C(w,x)},i.gzip=function(w,x){return(x=x||{}).gzip=!0,C(w,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,e,i){"use strict";var t=n("./zlib/inflate"),r=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/constants"),d=n("./zlib/messages"),h=n("./zlib/zstream"),p=n("./zlib/gzheader"),g=Object.prototype.toString;function v(b){if(!(this instanceof v))return new v(b);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},b||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||b&&b.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var w=t.inflateInit2(this.strm,C.windowBits);if(w!==l.Z_OK)throw new Error(d[w]);this.header=new p,t.inflateGetHeader(this.strm,this.header)}function _(b,C){var w=new v(C);if(w.push(b,!0),w.err)throw w.msg||d[w.err];return w.result}v.prototype.push=function(b,C){var w,x,M,F,k,L,U=this.strm,H=this.options.chunkSize,G=this.options.dictionary,$=!1;if(this.ended)return!1;x=C===~~C?C:C===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?U.input=s.binstring2buf(b):g.call(b)==="[object ArrayBuffer]"?U.input=new Uint8Array(b):U.input=b,U.next_in=0,U.avail_in=U.input.length;do{if(U.avail_out===0&&(U.output=new r.Buf8(H),U.next_out=0,U.avail_out=H),(w=t.inflate(U,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&G&&(L=typeof G=="string"?s.string2buf(G):g.call(G)==="[object ArrayBuffer]"?new Uint8Array(G):G,w=t.inflateSetDictionary(this.strm,L)),w===l.Z_BUF_ERROR&&$===!0&&(w=l.Z_OK,$=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);U.next_out&&(U.avail_out!==0&&w!==l.Z_STREAM_END&&(U.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=s.utf8border(U.output,U.next_out),F=U.next_out-M,k=s.buf2string(U.output,M),U.next_out=F,U.avail_out=H-F,F&&r.arraySet(U.output,U.output,M,F,0),this.onData(k)):this.onData(r.shrinkBuf(U.output,U.next_out)))),U.avail_in===0&&U.avail_out===0&&($=!0)}while((0<U.avail_in||U.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(w=t.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(U.avail_out=0))},v.prototype.onData=function(b){this.chunks.push(b)},v.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},i.Inflate=v,i.inflate=_,i.inflateRaw=function(b,C){return(C=C||{}).raw=!0,_(b,C)},i.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,e,i){"use strict";var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var p in h)h.hasOwnProperty(p)&&(l[p]=h[p])}}return l},i.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var r={arraySet:function(l,d,h,p,g){if(d.subarray&&l.subarray)l.set(d.subarray(h,h+p),g);else for(var v=0;v<p;v++)l[g+v]=d[h+v]},flattenChunks:function(l){var d,h,p,g,v,_;for(d=p=0,h=l.length;d<h;d++)p+=l[d].length;for(_=new Uint8Array(p),d=g=0,h=l.length;d<h;d++)v=l[d],_.set(v,g),g+=v.length;return _}},s={arraySet:function(l,d,h,p,g){for(var v=0;v<p;v++)l[g+v]=d[h+v]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(t)},{}],42:[function(n,e,i){"use strict";var t=n("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new t.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(p,g){if(g<65537&&(p.subarray&&s||!p.subarray&&r))return String.fromCharCode.apply(null,t.shrinkBuf(p,g));for(var v="",_=0;_<g;_++)v+=String.fromCharCode(p[_]);return v}l[254]=l[254]=1,i.string2buf=function(p){var g,v,_,b,C,w=p.length,x=0;for(b=0;b<w;b++)(64512&(v=p.charCodeAt(b)))==55296&&b+1<w&&(64512&(_=p.charCodeAt(b+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),b++),x+=v<128?1:v<2048?2:v<65536?3:4;for(g=new t.Buf8(x),b=C=0;C<x;b++)(64512&(v=p.charCodeAt(b)))==55296&&b+1<w&&(64512&(_=p.charCodeAt(b+1)))==56320&&(v=65536+(v-55296<<10)+(_-56320),b++),v<128?g[C++]=v:(v<2048?g[C++]=192|v>>>6:(v<65536?g[C++]=224|v>>>12:(g[C++]=240|v>>>18,g[C++]=128|v>>>12&63),g[C++]=128|v>>>6&63),g[C++]=128|63&v);return g},i.buf2binstring=function(p){return h(p,p.length)},i.binstring2buf=function(p){for(var g=new t.Buf8(p.length),v=0,_=g.length;v<_;v++)g[v]=p.charCodeAt(v);return g},i.buf2string=function(p,g){var v,_,b,C,w=g||p.length,x=new Array(2*w);for(v=_=0;v<w;)if((b=p[v++])<128)x[_++]=b;else if(4<(C=l[b]))x[_++]=65533,v+=C-1;else{for(b&=C===2?31:C===3?15:7;1<C&&v<w;)b=b<<6|63&p[v++],C--;1<C?x[_++]=65533:b<65536?x[_++]=b:(b-=65536,x[_++]=55296|b>>10&1023,x[_++]=56320|1023&b)}return h(x,_)},i.utf8border=function(p,g){var v;for((g=g||p.length)>p.length&&(g=p.length),v=g-1;0<=v&&(192&p[v])==128;)v--;return v<0||v===0?g:v+l[p[v]]>g?v:g}},{"./common":41}],43:[function(n,e,i){"use strict";e.exports=function(t,r,s,l){for(var d=65535&t|0,h=t>>>16&65535|0,p=0;s!==0;){for(s-=p=2e3<s?2e3:s;h=h+(d=d+r[l++]|0)|0,--p;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(n,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,e,i){"use strict";var t=function(){for(var r,s=[],l=0;l<256;l++){r=l;for(var d=0;d<8;d++)r=1&r?3988292384^r>>>1:r>>>1;s[l]=r}return s}();e.exports=function(r,s,l,d){var h=t,p=d+l;r^=-1;for(var g=d;g<p;g++)r=r>>>8^h[255&(r^s[g])];return-1^r}},{}],46:[function(n,e,i){"use strict";var t,r=n("../utils/common"),s=n("./trees"),l=n("./adler32"),d=n("./crc32"),h=n("./messages"),p=0,g=4,v=0,_=-2,b=-1,C=4,w=2,x=8,M=9,F=286,k=30,L=19,U=2*F+1,H=15,G=3,$=258,ne=$+G+1,O=42,j=113,T=1,Z=2,ge=3,oe=4;function N(A,ue){return A.msg=h[ue],ue}function W(A){return(A<<1)-(4<A?9:0)}function de(A){for(var ue=A.length;0<=--ue;)A[ue]=0}function Y(A){var ue=A.state,ce=ue.pending;ce>A.avail_out&&(ce=A.avail_out),ce!==0&&(r.arraySet(A.output,ue.pending_buf,ue.pending_out,ce,A.next_out),A.next_out+=ce,ue.pending_out+=ce,A.total_out+=ce,A.avail_out-=ce,ue.pending-=ce,ue.pending===0&&(ue.pending_out=0))}function Q(A,ue){s._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,ue),A.block_start=A.strstart,Y(A.strm)}function De(A,ue){A.pending_buf[A.pending++]=ue}function ye(A,ue){A.pending_buf[A.pending++]=ue>>>8&255,A.pending_buf[A.pending++]=255&ue}function fe(A,ue){var ce,q,V=A.max_chain_length,X=A.strstart,he=A.prev_length,me=A.nice_match,ee=A.strstart>A.w_size-ne?A.strstart-(A.w_size-ne):0,be=A.window,Oe=A.w_mask,_e=A.prev,He=A.strstart+$,Jt=be[X+he-1],It=be[X+he];A.prev_length>=A.good_match&&(V>>=2),me>A.lookahead&&(me=A.lookahead);do if(be[(ce=ue)+he]===It&&be[ce+he-1]===Jt&&be[ce]===be[X]&&be[++ce]===be[X+1]){X+=2,ce++;do;while(be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&be[++X]===be[++ce]&&X<He);if(q=$-(He-X),X=He-$,he<q){if(A.match_start=ue,me<=(he=q))break;Jt=be[X+he-1],It=be[X+he]}}while((ue=_e[ue&Oe])>ee&&--V!=0);return he<=A.lookahead?he:A.lookahead}function ze(A){var ue,ce,q,V,X,he,me,ee,be,Oe,_e=A.w_size;do{if(V=A.window_size-A.lookahead-A.strstart,A.strstart>=_e+(_e-ne)){for(r.arraySet(A.window,A.window,_e,_e,0),A.match_start-=_e,A.strstart-=_e,A.block_start-=_e,ue=ce=A.hash_size;q=A.head[--ue],A.head[ue]=_e<=q?q-_e:0,--ce;);for(ue=ce=_e;q=A.prev[--ue],A.prev[ue]=_e<=q?q-_e:0,--ce;);V+=_e}if(A.strm.avail_in===0)break;if(he=A.strm,me=A.window,ee=A.strstart+A.lookahead,be=V,Oe=void 0,Oe=he.avail_in,be<Oe&&(Oe=be),ce=Oe===0?0:(he.avail_in-=Oe,r.arraySet(me,he.input,he.next_in,Oe,ee),he.state.wrap===1?he.adler=l(he.adler,me,Oe,ee):he.state.wrap===2&&(he.adler=d(he.adler,me,Oe,ee)),he.next_in+=Oe,he.total_in+=Oe,Oe),A.lookahead+=ce,A.lookahead+A.insert>=G)for(X=A.strstart-A.insert,A.ins_h=A.window[X],A.ins_h=(A.ins_h<<A.hash_shift^A.window[X+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[X+G-1])&A.hash_mask,A.prev[X&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=X,X++,A.insert--,!(A.lookahead+A.insert<G)););}while(A.lookahead<ne&&A.strm.avail_in!==0)}function un(A,ue){for(var ce,q;;){if(A.lookahead<ne){if(ze(A),A.lookahead<ne&&ue===p)return T;if(A.lookahead===0)break}if(ce=0,A.lookahead>=G&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+G-1])&A.hash_mask,ce=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),ce!==0&&A.strstart-ce<=A.w_size-ne&&(A.match_length=fe(A,ce)),A.match_length>=G)if(q=s._tr_tally(A,A.strstart-A.match_start,A.match_length-G),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=G){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+G-1])&A.hash_mask,ce=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else q=s._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(q&&(Q(A,!1),A.strm.avail_out===0))return T}return A.insert=A.strstart<G-1?A.strstart:G-1,ue===g?(Q(A,!0),A.strm.avail_out===0?ge:oe):A.last_lit&&(Q(A,!1),A.strm.avail_out===0)?T:Z}function mt(A,ue){for(var ce,q,V;;){if(A.lookahead<ne){if(ze(A),A.lookahead<ne&&ue===p)return T;if(A.lookahead===0)break}if(ce=0,A.lookahead>=G&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+G-1])&A.hash_mask,ce=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=G-1,ce!==0&&A.prev_length<A.max_lazy_match&&A.strstart-ce<=A.w_size-ne&&(A.match_length=fe(A,ce),A.match_length<=5&&(A.strategy===1||A.match_length===G&&4096<A.strstart-A.match_start)&&(A.match_length=G-1)),A.prev_length>=G&&A.match_length<=A.prev_length){for(V=A.strstart+A.lookahead-G,q=s._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-G),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=V&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+G-1])&A.hash_mask,ce=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=G-1,A.strstart++,q&&(Q(A,!1),A.strm.avail_out===0))return T}else if(A.match_available){if((q=s._tr_tally(A,0,A.window[A.strstart-1]))&&Q(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return T}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(q=s._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<G-1?A.strstart:G-1,ue===g?(Q(A,!0),A.strm.avail_out===0?ge:oe):A.last_lit&&(Q(A,!1),A.strm.avail_out===0)?T:Z}function Ze(A,ue,ce,q,V){this.good_length=A,this.max_lazy=ue,this.nice_length=ce,this.max_chain=q,this.func=V}function $t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*U),this.dyn_dtree=new r.Buf16(2*(2*k+1)),this.bl_tree=new r.Buf16(2*(2*L+1)),de(this.dyn_ltree),de(this.dyn_dtree),de(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(H+1),this.heap=new r.Buf16(2*F+1),de(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*F+1),de(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function bt(A){var ue;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=w,(ue=A.state).pending=0,ue.pending_out=0,ue.wrap<0&&(ue.wrap=-ue.wrap),ue.status=ue.wrap?O:j,A.adler=ue.wrap===2?0:1,ue.last_flush=p,s._tr_init(ue),v):N(A,_)}function Bn(A){var ue=bt(A);return ue===v&&function(ce){ce.window_size=2*ce.w_size,de(ce.head),ce.max_lazy_match=t[ce.level].max_lazy,ce.good_match=t[ce.level].good_length,ce.nice_match=t[ce.level].nice_length,ce.max_chain_length=t[ce.level].max_chain,ce.strstart=0,ce.block_start=0,ce.lookahead=0,ce.insert=0,ce.match_length=ce.prev_length=G-1,ce.match_available=0,ce.ins_h=0}(A.state),ue}function Wn(A,ue,ce,q,V,X){if(!A)return _;var he=1;if(ue===b&&(ue=6),q<0?(he=0,q=-q):15<q&&(he=2,q-=16),V<1||M<V||ce!==x||q<8||15<q||ue<0||9<ue||X<0||C<X)return N(A,_);q===8&&(q=9);var me=new $t;return(A.state=me).strm=A,me.wrap=he,me.gzhead=null,me.w_bits=q,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=V+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+G-1)/G),me.window=new r.Buf8(2*me.w_size),me.head=new r.Buf16(me.hash_size),me.prev=new r.Buf16(me.w_size),me.lit_bufsize=1<<V+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new r.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=ue,me.strategy=X,me.method=ce,Bn(A)}t=[new Ze(0,0,0,0,function(A,ue){var ce=65535;for(ce>A.pending_buf_size-5&&(ce=A.pending_buf_size-5);;){if(A.lookahead<=1){if(ze(A),A.lookahead===0&&ue===p)return T;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var q=A.block_start+ce;if((A.strstart===0||A.strstart>=q)&&(A.lookahead=A.strstart-q,A.strstart=q,Q(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-ne&&(Q(A,!1),A.strm.avail_out===0))return T}return A.insert=0,ue===g?(Q(A,!0),A.strm.avail_out===0?ge:oe):(A.strstart>A.block_start&&(Q(A,!1),A.strm.avail_out),T)}),new Ze(4,4,8,4,un),new Ze(4,5,16,8,un),new Ze(4,6,32,32,un),new Ze(4,4,16,16,mt),new Ze(8,16,32,32,mt),new Ze(8,16,128,128,mt),new Ze(8,32,128,256,mt),new Ze(32,128,258,1024,mt),new Ze(32,258,258,4096,mt)],i.deflateInit=function(A,ue){return Wn(A,ue,x,15,8,0)},i.deflateInit2=Wn,i.deflateReset=Bn,i.deflateResetKeep=bt,i.deflateSetHeader=function(A,ue){return A&&A.state?A.state.wrap!==2?_:(A.state.gzhead=ue,v):_},i.deflate=function(A,ue){var ce,q,V,X;if(!A||!A.state||5<ue||ue<0)return A?N(A,_):_;if(q=A.state,!A.output||!A.input&&A.avail_in!==0||q.status===666&&ue!==g)return N(A,A.avail_out===0?-5:_);if(q.strm=A,ce=q.last_flush,q.last_flush=ue,q.status===O)if(q.wrap===2)A.adler=0,De(q,31),De(q,139),De(q,8),q.gzhead?(De(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),De(q,255&q.gzhead.time),De(q,q.gzhead.time>>8&255),De(q,q.gzhead.time>>16&255),De(q,q.gzhead.time>>24&255),De(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),De(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(De(q,255&q.gzhead.extra.length),De(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(A.adler=d(A.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(De(q,0),De(q,0),De(q,0),De(q,0),De(q,0),De(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),De(q,3),q.status=j);else{var he=x+(q.w_bits-8<<4)<<8;he|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(he|=32),he+=31-he%31,q.status=j,ye(q,he),q.strstart!==0&&(ye(q,A.adler>>>16),ye(q,65535&A.adler)),A.adler=1}if(q.status===69)if(q.gzhead.extra){for(V=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),Y(A),V=q.pending,q.pending!==q.pending_buf_size));)De(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){V=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),Y(A),V=q.pending,q.pending===q.pending_buf_size)){X=1;break}X=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,De(q,X)}while(X!==0);q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),X===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){V=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),Y(A),V=q.pending,q.pending===q.pending_buf_size)){X=1;break}X=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,De(q,X)}while(X!==0);q.gzhead.hcrc&&q.pending>V&&(A.adler=d(A.adler,q.pending_buf,q.pending-V,V)),X===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&Y(A),q.pending+2<=q.pending_buf_size&&(De(q,255&A.adler),De(q,A.adler>>8&255),A.adler=0,q.status=j)):q.status=j),q.pending!==0){if(Y(A),A.avail_out===0)return q.last_flush=-1,v}else if(A.avail_in===0&&W(ue)<=W(ce)&&ue!==g)return N(A,-5);if(q.status===666&&A.avail_in!==0)return N(A,-5);if(A.avail_in!==0||q.lookahead!==0||ue!==p&&q.status!==666){var me=q.strategy===2?function(ee,be){for(var Oe;;){if(ee.lookahead===0&&(ze(ee),ee.lookahead===0)){if(be===p)return T;break}if(ee.match_length=0,Oe=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,Oe&&(Q(ee,!1),ee.strm.avail_out===0))return T}return ee.insert=0,be===g?(Q(ee,!0),ee.strm.avail_out===0?ge:oe):ee.last_lit&&(Q(ee,!1),ee.strm.avail_out===0)?T:Z}(q,ue):q.strategy===3?function(ee,be){for(var Oe,_e,He,Jt,It=ee.window;;){if(ee.lookahead<=$){if(ze(ee),ee.lookahead<=$&&be===p)return T;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=G&&0<ee.strstart&&(_e=It[He=ee.strstart-1])===It[++He]&&_e===It[++He]&&_e===It[++He]){Jt=ee.strstart+$;do;while(_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&_e===It[++He]&&He<Jt);ee.match_length=$-(Jt-He),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=G?(Oe=s._tr_tally(ee,1,ee.match_length-G),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(Oe=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),Oe&&(Q(ee,!1),ee.strm.avail_out===0))return T}return ee.insert=0,be===g?(Q(ee,!0),ee.strm.avail_out===0?ge:oe):ee.last_lit&&(Q(ee,!1),ee.strm.avail_out===0)?T:Z}(q,ue):t[q.level].func(q,ue);if(me!==ge&&me!==oe||(q.status=666),me===T||me===ge)return A.avail_out===0&&(q.last_flush=-1),v;if(me===Z&&(ue===1?s._tr_align(q):ue!==5&&(s._tr_stored_block(q,0,0,!1),ue===3&&(de(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),Y(A),A.avail_out===0))return q.last_flush=-1,v}return ue!==g?v:q.wrap<=0?1:(q.wrap===2?(De(q,255&A.adler),De(q,A.adler>>8&255),De(q,A.adler>>16&255),De(q,A.adler>>24&255),De(q,255&A.total_in),De(q,A.total_in>>8&255),De(q,A.total_in>>16&255),De(q,A.total_in>>24&255)):(ye(q,A.adler>>>16),ye(q,65535&A.adler)),Y(A),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?v:1)},i.deflateEnd=function(A){var ue;return A&&A.state?(ue=A.state.status)!==O&&ue!==69&&ue!==73&&ue!==91&&ue!==103&&ue!==j&&ue!==666?N(A,_):(A.state=null,ue===j?N(A,-3):v):_},i.deflateSetDictionary=function(A,ue){var ce,q,V,X,he,me,ee,be,Oe=ue.length;if(!A||!A.state||(X=(ce=A.state).wrap)===2||X===1&&ce.status!==O||ce.lookahead)return _;for(X===1&&(A.adler=l(A.adler,ue,Oe,0)),ce.wrap=0,Oe>=ce.w_size&&(X===0&&(de(ce.head),ce.strstart=0,ce.block_start=0,ce.insert=0),be=new r.Buf8(ce.w_size),r.arraySet(be,ue,Oe-ce.w_size,ce.w_size,0),ue=be,Oe=ce.w_size),he=A.avail_in,me=A.next_in,ee=A.input,A.avail_in=Oe,A.next_in=0,A.input=ue,ze(ce);ce.lookahead>=G;){for(q=ce.strstart,V=ce.lookahead-(G-1);ce.ins_h=(ce.ins_h<<ce.hash_shift^ce.window[q+G-1])&ce.hash_mask,ce.prev[q&ce.w_mask]=ce.head[ce.ins_h],ce.head[ce.ins_h]=q,q++,--V;);ce.strstart=q,ce.lookahead=G-1,ze(ce)}return ce.strstart+=ce.lookahead,ce.block_start=ce.strstart,ce.insert=ce.lookahead,ce.lookahead=0,ce.match_length=ce.prev_length=G-1,ce.match_available=0,A.next_in=me,A.input=ee,A.avail_in=he,ce.wrap=X,v},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,e,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,e,i){"use strict";e.exports=function(t,r){var s,l,d,h,p,g,v,_,b,C,w,x,M,F,k,L,U,H,G,$,ne,O,j,T,Z;s=t.state,l=t.next_in,T=t.input,d=l+(t.avail_in-5),h=t.next_out,Z=t.output,p=h-(r-t.avail_out),g=h+(t.avail_out-257),v=s.dmax,_=s.wsize,b=s.whave,C=s.wnext,w=s.window,x=s.hold,M=s.bits,F=s.lencode,k=s.distcode,L=(1<<s.lenbits)-1,U=(1<<s.distbits)-1;e:do{M<15&&(x+=T[l++]<<M,M+=8,x+=T[l++]<<M,M+=8),H=F[x&L];t:for(;;){if(x>>>=G=H>>>24,M-=G,(G=H>>>16&255)===0)Z[h++]=65535&H;else{if(!(16&G)){if(!(64&G)){H=F[(65535&H)+(x&(1<<G)-1)];continue t}if(32&G){s.mode=12;break e}t.msg="invalid literal/length code",s.mode=30;break e}$=65535&H,(G&=15)&&(M<G&&(x+=T[l++]<<M,M+=8),$+=x&(1<<G)-1,x>>>=G,M-=G),M<15&&(x+=T[l++]<<M,M+=8,x+=T[l++]<<M,M+=8),H=k[x&U];n:for(;;){if(x>>>=G=H>>>24,M-=G,!(16&(G=H>>>16&255))){if(!(64&G)){H=k[(65535&H)+(x&(1<<G)-1)];continue n}t.msg="invalid distance code",s.mode=30;break e}if(ne=65535&H,M<(G&=15)&&(x+=T[l++]<<M,(M+=8)<G&&(x+=T[l++]<<M,M+=8)),v<(ne+=x&(1<<G)-1)){t.msg="invalid distance too far back",s.mode=30;break e}if(x>>>=G,M-=G,(G=h-p)<ne){if(b<(G=ne-G)&&s.sane){t.msg="invalid distance too far back",s.mode=30;break e}if(j=w,(O=0)===C){if(O+=_-G,G<$){for($-=G;Z[h++]=w[O++],--G;);O=h-ne,j=Z}}else if(C<G){if(O+=_+C-G,(G-=C)<$){for($-=G;Z[h++]=w[O++],--G;);if(O=0,C<$){for($-=G=C;Z[h++]=w[O++],--G;);O=h-ne,j=Z}}}else if(O+=C-G,G<$){for($-=G;Z[h++]=w[O++],--G;);O=h-ne,j=Z}for(;2<$;)Z[h++]=j[O++],Z[h++]=j[O++],Z[h++]=j[O++],$-=3;$&&(Z[h++]=j[O++],1<$&&(Z[h++]=j[O++]))}else{for(O=h-ne;Z[h++]=Z[O++],Z[h++]=Z[O++],Z[h++]=Z[O++],2<($-=3););$&&(Z[h++]=Z[O++],1<$&&(Z[h++]=Z[O++]))}break}}break}}while(l<d&&h<g);l-=$=M>>3,x&=(1<<(M-=$<<3))-1,t.next_in=l,t.next_out=h,t.avail_in=l<d?d-l+5:5-(l-d),t.avail_out=h<g?g-h+257:257-(h-g),s.hold=x,s.bits=M}},{}],49:[function(n,e,i){"use strict";var t=n("../utils/common"),r=n("./adler32"),s=n("./crc32"),l=n("./inffast"),d=n("./inftrees"),h=1,p=2,g=0,v=-2,_=1,b=852,C=592;function w(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(O){var j;return O&&O.state?(j=O.state,O.total_in=O.total_out=j.total=0,O.msg="",j.wrap&&(O.adler=1&j.wrap),j.mode=_,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new t.Buf32(b),j.distcode=j.distdyn=new t.Buf32(C),j.sane=1,j.back=-1,g):v}function F(O){var j;return O&&O.state?((j=O.state).wsize=0,j.whave=0,j.wnext=0,M(O)):v}function k(O,j){var T,Z;return O&&O.state?(Z=O.state,j<0?(T=0,j=-j):(T=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?v:(Z.window!==null&&Z.wbits!==j&&(Z.window=null),Z.wrap=T,Z.wbits=j,F(O))):v}function L(O,j){var T,Z;return O?(Z=new x,(O.state=Z).window=null,(T=k(O,j))!==g&&(O.state=null),T):v}var U,H,G=!0;function $(O){if(G){var j;for(U=new t.Buf32(512),H=new t.Buf32(32),j=0;j<144;)O.lens[j++]=8;for(;j<256;)O.lens[j++]=9;for(;j<280;)O.lens[j++]=7;for(;j<288;)O.lens[j++]=8;for(d(h,O.lens,0,288,U,0,O.work,{bits:9}),j=0;j<32;)O.lens[j++]=5;d(p,O.lens,0,32,H,0,O.work,{bits:5}),G=!1}O.lencode=U,O.lenbits=9,O.distcode=H,O.distbits=5}function ne(O,j,T,Z){var ge,oe=O.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new t.Buf8(oe.wsize)),Z>=oe.wsize?(t.arraySet(oe.window,j,T-oe.wsize,oe.wsize,0),oe.wnext=0,oe.whave=oe.wsize):(Z<(ge=oe.wsize-oe.wnext)&&(ge=Z),t.arraySet(oe.window,j,T-Z,ge,oe.wnext),(Z-=ge)?(t.arraySet(oe.window,j,T-Z,Z,0),oe.wnext=Z,oe.whave=oe.wsize):(oe.wnext+=ge,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=ge))),0}i.inflateReset=F,i.inflateReset2=k,i.inflateResetKeep=M,i.inflateInit=function(O){return L(O,15)},i.inflateInit2=L,i.inflate=function(O,j){var T,Z,ge,oe,N,W,de,Y,Q,De,ye,fe,ze,un,mt,Ze,$t,bt,Bn,Wn,A,ue,ce,q,V=0,X=new t.Buf8(4),he=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return v;(T=O.state).mode===12&&(T.mode=13),N=O.next_out,ge=O.output,de=O.avail_out,oe=O.next_in,Z=O.input,W=O.avail_in,Y=T.hold,Q=T.bits,De=W,ye=de,ue=g;e:for(;;)switch(T.mode){case _:if(T.wrap===0){T.mode=13;break}for(;Q<16;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(2&T.wrap&&Y===35615){X[T.check=0]=255&Y,X[1]=Y>>>8&255,T.check=s(T.check,X,2,0),Q=Y=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&Y)<<8)+(Y>>8))%31){O.msg="incorrect header check",T.mode=30;break}if((15&Y)!=8){O.msg="unknown compression method",T.mode=30;break}if(Q-=4,A=8+(15&(Y>>>=4)),T.wbits===0)T.wbits=A;else if(A>T.wbits){O.msg="invalid window size",T.mode=30;break}T.dmax=1<<A,O.adler=T.check=1,T.mode=512&Y?10:12,Q=Y=0;break;case 2:for(;Q<16;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(T.flags=Y,(255&T.flags)!=8){O.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){O.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=Y>>8&1),512&T.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,T.check=s(T.check,X,2,0)),Q=Y=0,T.mode=3;case 3:for(;Q<32;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.head&&(T.head.time=Y),512&T.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,X[2]=Y>>>16&255,X[3]=Y>>>24&255,T.check=s(T.check,X,4,0)),Q=Y=0,T.mode=4;case 4:for(;Q<16;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.head&&(T.head.xflags=255&Y,T.head.os=Y>>8),512&T.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,T.check=s(T.check,X,2,0)),Q=Y=0,T.mode=5;case 5:if(1024&T.flags){for(;Q<16;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.length=Y,T.head&&(T.head.extra_len=Y),512&T.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,T.check=s(T.check,X,2,0)),Q=Y=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(W<(fe=T.length)&&(fe=W),fe&&(T.head&&(A=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),t.arraySet(T.head.extra,Z,oe,fe,A)),512&T.flags&&(T.check=s(T.check,Z,fe,oe)),W-=fe,oe+=fe,T.length-=fe),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(W===0)break e;for(fe=0;A=Z[oe+fe++],T.head&&A&&T.length<65536&&(T.head.name+=String.fromCharCode(A)),A&&fe<W;);if(512&T.flags&&(T.check=s(T.check,Z,fe,oe)),W-=fe,oe+=fe,A)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(W===0)break e;for(fe=0;A=Z[oe+fe++],T.head&&A&&T.length<65536&&(T.head.comment+=String.fromCharCode(A)),A&&fe<W;);if(512&T.flags&&(T.check=s(T.check,Z,fe,oe)),W-=fe,oe+=fe,A)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;Q<16;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(Y!==(65535&T.check)){O.msg="header crc mismatch",T.mode=30;break}Q=Y=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),O.adler=T.check=0,T.mode=12;break;case 10:for(;Q<32;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}O.adler=T.check=w(Y),Q=Y=0,T.mode=11;case 11:if(T.havedict===0)return O.next_out=N,O.avail_out=de,O.next_in=oe,O.avail_in=W,T.hold=Y,T.bits=Q,2;O.adler=T.check=1,T.mode=12;case 12:if(j===5||j===6)break e;case 13:if(T.last){Y>>>=7&Q,Q-=7&Q,T.mode=27;break}for(;Q<3;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}switch(T.last=1&Y,Q-=1,3&(Y>>>=1)){case 0:T.mode=14;break;case 1:if($(T),T.mode=20,j!==6)break;Y>>>=2,Q-=2;break e;case 2:T.mode=17;break;case 3:O.msg="invalid block type",T.mode=30}Y>>>=2,Q-=2;break;case 14:for(Y>>>=7&Q,Q-=7&Q;Q<32;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if((65535&Y)!=(Y>>>16^65535)){O.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&Y,Q=Y=0,T.mode=15,j===6)break e;case 15:T.mode=16;case 16:if(fe=T.length){if(W<fe&&(fe=W),de<fe&&(fe=de),fe===0)break e;t.arraySet(ge,Z,oe,fe,N),W-=fe,oe+=fe,de-=fe,N+=fe,T.length-=fe;break}T.mode=12;break;case 17:for(;Q<14;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(T.nlen=257+(31&Y),Y>>>=5,Q-=5,T.ndist=1+(31&Y),Y>>>=5,Q-=5,T.ncode=4+(15&Y),Y>>>=4,Q-=4,286<T.nlen||30<T.ndist){O.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;Q<3;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.lens[he[T.have++]]=7&Y,Y>>>=3,Q-=3}for(;T.have<19;)T.lens[he[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,ce={bits:T.lenbits},ue=d(0,T.lens,0,19,T.lencode,0,T.work,ce),T.lenbits=ce.bits,ue){O.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ze=(V=T.lencode[Y&(1<<T.lenbits)-1])>>>16&255,$t=65535&V,!((mt=V>>>24)<=Q);){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if($t<16)Y>>>=mt,Q-=mt,T.lens[T.have++]=$t;else{if($t===16){for(q=mt+2;Q<q;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(Y>>>=mt,Q-=mt,T.have===0){O.msg="invalid bit length repeat",T.mode=30;break}A=T.lens[T.have-1],fe=3+(3&Y),Y>>>=2,Q-=2}else if($t===17){for(q=mt+3;Q<q;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}Q-=mt,A=0,fe=3+(7&(Y>>>=mt)),Y>>>=3,Q-=3}else{for(q=mt+7;Q<q;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}Q-=mt,A=0,fe=11+(127&(Y>>>=mt)),Y>>>=7,Q-=7}if(T.have+fe>T.nlen+T.ndist){O.msg="invalid bit length repeat",T.mode=30;break}for(;fe--;)T.lens[T.have++]=A}}if(T.mode===30)break;if(T.lens[256]===0){O.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,ce={bits:T.lenbits},ue=d(h,T.lens,0,T.nlen,T.lencode,0,T.work,ce),T.lenbits=ce.bits,ue){O.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,ce={bits:T.distbits},ue=d(p,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,ce),T.distbits=ce.bits,ue){O.msg="invalid distances set",T.mode=30;break}if(T.mode=20,j===6)break e;case 20:T.mode=21;case 21:if(6<=W&&258<=de){O.next_out=N,O.avail_out=de,O.next_in=oe,O.avail_in=W,T.hold=Y,T.bits=Q,l(O,ye),N=O.next_out,ge=O.output,de=O.avail_out,oe=O.next_in,Z=O.input,W=O.avail_in,Y=T.hold,Q=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Ze=(V=T.lencode[Y&(1<<T.lenbits)-1])>>>16&255,$t=65535&V,!((mt=V>>>24)<=Q);){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(Ze&&!(240&Ze)){for(bt=mt,Bn=Ze,Wn=$t;Ze=(V=T.lencode[Wn+((Y&(1<<bt+Bn)-1)>>bt)])>>>16&255,$t=65535&V,!(bt+(mt=V>>>24)<=Q);){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}Y>>>=bt,Q-=bt,T.back+=bt}if(Y>>>=mt,Q-=mt,T.back+=mt,T.length=$t,Ze===0){T.mode=26;break}if(32&Ze){T.back=-1,T.mode=12;break}if(64&Ze){O.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ze,T.mode=22;case 22:if(T.extra){for(q=T.extra;Q<q;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.length+=Y&(1<<T.extra)-1,Y>>>=T.extra,Q-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ze=(V=T.distcode[Y&(1<<T.distbits)-1])>>>16&255,$t=65535&V,!((mt=V>>>24)<=Q);){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(!(240&Ze)){for(bt=mt,Bn=Ze,Wn=$t;Ze=(V=T.distcode[Wn+((Y&(1<<bt+Bn)-1)>>bt)])>>>16&255,$t=65535&V,!(bt+(mt=V>>>24)<=Q);){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}Y>>>=bt,Q-=bt,T.back+=bt}if(Y>>>=mt,Q-=mt,T.back+=mt,64&Ze){O.msg="invalid distance code",T.mode=30;break}T.offset=$t,T.extra=15&Ze,T.mode=24;case 24:if(T.extra){for(q=T.extra;Q<q;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}T.offset+=Y&(1<<T.extra)-1,Y>>>=T.extra,Q-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){O.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(de===0)break e;if(fe=ye-de,T.offset>fe){if((fe=T.offset-fe)>T.whave&&T.sane){O.msg="invalid distance too far back",T.mode=30;break}ze=fe>T.wnext?(fe-=T.wnext,T.wsize-fe):T.wnext-fe,fe>T.length&&(fe=T.length),un=T.window}else un=ge,ze=N-T.offset,fe=T.length;for(de<fe&&(fe=de),de-=fe,T.length-=fe;ge[N++]=un[ze++],--fe;);T.length===0&&(T.mode=21);break;case 26:if(de===0)break e;ge[N++]=T.length,de--,T.mode=21;break;case 27:if(T.wrap){for(;Q<32;){if(W===0)break e;W--,Y|=Z[oe++]<<Q,Q+=8}if(ye-=de,O.total_out+=ye,T.total+=ye,ye&&(O.adler=T.check=T.flags?s(T.check,ge,ye,N-ye):r(T.check,ge,ye,N-ye)),ye=de,(T.flags?Y:w(Y))!==T.check){O.msg="incorrect data check",T.mode=30;break}Q=Y=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;Q<32;){if(W===0)break e;W--,Y+=Z[oe++]<<Q,Q+=8}if(Y!==(4294967295&T.total)){O.msg="incorrect length check",T.mode=30;break}Q=Y=0}T.mode=29;case 29:ue=1;break e;case 30:ue=-3;break e;case 31:return-4;case 32:default:return v}return O.next_out=N,O.avail_out=de,O.next_in=oe,O.avail_in=W,T.hold=Y,T.bits=Q,(T.wsize||ye!==O.avail_out&&T.mode<30&&(T.mode<27||j!==4))&&ne(O,O.output,O.next_out,ye-O.avail_out)?(T.mode=31,-4):(De-=O.avail_in,ye-=O.avail_out,O.total_in+=De,O.total_out+=ye,T.total+=ye,T.wrap&&ye&&(O.adler=T.check=T.flags?s(T.check,ge,ye,O.next_out-ye):r(T.check,ge,ye,O.next_out-ye)),O.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(De==0&&ye===0||j===4)&&ue===g&&(ue=-5),ue)},i.inflateEnd=function(O){if(!O||!O.state)return v;var j=O.state;return j.window&&(j.window=null),O.state=null,g},i.inflateGetHeader=function(O,j){var T;return O&&O.state&&2&(T=O.state).wrap?((T.head=j).done=!1,g):v},i.inflateSetDictionary=function(O,j){var T,Z=j.length;return O&&O.state?(T=O.state).wrap!==0&&T.mode!==11?v:T.mode===11&&r(1,j,Z,0)!==T.check?-3:ne(O,j,Z,Z)?(T.mode=31,-4):(T.havedict=1,g):v},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,e,i){"use strict";var t=n("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(h,p,g,v,_,b,C,w){var x,M,F,k,L,U,H,G,$,ne=w.bits,O=0,j=0,T=0,Z=0,ge=0,oe=0,N=0,W=0,de=0,Y=0,Q=null,De=0,ye=new t.Buf16(16),fe=new t.Buf16(16),ze=null,un=0;for(O=0;O<=15;O++)ye[O]=0;for(j=0;j<v;j++)ye[p[g+j]]++;for(ge=ne,Z=15;1<=Z&&ye[Z]===0;Z--);if(Z<ge&&(ge=Z),Z===0)return _[b++]=20971520,_[b++]=20971520,w.bits=1,0;for(T=1;T<Z&&ye[T]===0;T++);for(ge<T&&(ge=T),O=W=1;O<=15;O++)if(W<<=1,(W-=ye[O])<0)return-1;if(0<W&&(h===0||Z!==1))return-1;for(fe[1]=0,O=1;O<15;O++)fe[O+1]=fe[O]+ye[O];for(j=0;j<v;j++)p[g+j]!==0&&(C[fe[p[g+j]]++]=j);if(U=h===0?(Q=ze=C,19):h===1?(Q=r,De-=257,ze=s,un-=257,256):(Q=l,ze=d,-1),O=T,L=b,N=j=Y=0,F=-1,k=(de=1<<(oe=ge))-1,h===1&&852<de||h===2&&592<de)return 1;for(;;){for(H=O-N,$=C[j]<U?(G=0,C[j]):C[j]>U?(G=ze[un+C[j]],Q[De+C[j]]):(G=96,0),x=1<<O-N,T=M=1<<oe;_[L+(Y>>N)+(M-=x)]=H<<24|G<<16|$|0,M!==0;);for(x=1<<O-1;Y&x;)x>>=1;if(x!==0?(Y&=x-1,Y+=x):Y=0,j++,--ye[O]==0){if(O===Z)break;O=p[g+C[j]]}if(ge<O&&(Y&k)!==F){for(N===0&&(N=ge),L+=T,W=1<<(oe=O-N);oe+N<Z&&!((W-=ye[oe+N])<=0);)oe++,W<<=1;if(de+=1<<oe,h===1&&852<de||h===2&&592<de)return 1;_[F=Y&k]=ge<<24|oe<<16|L-b|0}}return Y!==0&&(_[L+Y]=O-N<<24|64<<16|0),w.bits=ge,0}},{"../utils/common":41}],51:[function(n,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,e,i){"use strict";var t=n("../utils/common"),r=0,s=1;function l(V){for(var X=V.length;0<=--X;)V[X]=0}var d=0,h=29,p=256,g=p+1+h,v=30,_=19,b=2*g+1,C=15,w=16,x=7,M=256,F=16,k=17,L=18,U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(2*(g+2));l(ne);var O=new Array(2*v);l(O);var j=new Array(512);l(j);var T=new Array(256);l(T);var Z=new Array(h);l(Z);var ge,oe,N,W=new Array(v);function de(V,X,he,me,ee){this.static_tree=V,this.extra_bits=X,this.extra_base=he,this.elems=me,this.max_length=ee,this.has_stree=V&&V.length}function Y(V,X){this.dyn_tree=V,this.max_code=0,this.stat_desc=X}function Q(V){return V<256?j[V]:j[256+(V>>>7)]}function De(V,X){V.pending_buf[V.pending++]=255&X,V.pending_buf[V.pending++]=X>>>8&255}function ye(V,X,he){V.bi_valid>w-he?(V.bi_buf|=X<<V.bi_valid&65535,De(V,V.bi_buf),V.bi_buf=X>>w-V.bi_valid,V.bi_valid+=he-w):(V.bi_buf|=X<<V.bi_valid&65535,V.bi_valid+=he)}function fe(V,X,he){ye(V,he[2*X],he[2*X+1])}function ze(V,X){for(var he=0;he|=1&V,V>>>=1,he<<=1,0<--X;);return he>>>1}function un(V,X,he){var me,ee,be=new Array(C+1),Oe=0;for(me=1;me<=C;me++)be[me]=Oe=Oe+he[me-1]<<1;for(ee=0;ee<=X;ee++){var _e=V[2*ee+1];_e!==0&&(V[2*ee]=ze(be[_e]++,_e))}}function mt(V){var X;for(X=0;X<g;X++)V.dyn_ltree[2*X]=0;for(X=0;X<v;X++)V.dyn_dtree[2*X]=0;for(X=0;X<_;X++)V.bl_tree[2*X]=0;V.dyn_ltree[2*M]=1,V.opt_len=V.static_len=0,V.last_lit=V.matches=0}function Ze(V){8<V.bi_valid?De(V,V.bi_buf):0<V.bi_valid&&(V.pending_buf[V.pending++]=V.bi_buf),V.bi_buf=0,V.bi_valid=0}function $t(V,X,he,me){var ee=2*X,be=2*he;return V[ee]<V[be]||V[ee]===V[be]&&me[X]<=me[he]}function bt(V,X,he){for(var me=V.heap[he],ee=he<<1;ee<=V.heap_len&&(ee<V.heap_len&&$t(X,V.heap[ee+1],V.heap[ee],V.depth)&&ee++,!$t(X,me,V.heap[ee],V.depth));)V.heap[he]=V.heap[ee],he=ee,ee<<=1;V.heap[he]=me}function Bn(V,X,he){var me,ee,be,Oe,_e=0;if(V.last_lit!==0)for(;me=V.pending_buf[V.d_buf+2*_e]<<8|V.pending_buf[V.d_buf+2*_e+1],ee=V.pending_buf[V.l_buf+_e],_e++,me===0?fe(V,ee,X):(fe(V,(be=T[ee])+p+1,X),(Oe=U[be])!==0&&ye(V,ee-=Z[be],Oe),fe(V,be=Q(--me),he),(Oe=H[be])!==0&&ye(V,me-=W[be],Oe)),_e<V.last_lit;);fe(V,M,X)}function Wn(V,X){var he,me,ee,be=X.dyn_tree,Oe=X.stat_desc.static_tree,_e=X.stat_desc.has_stree,He=X.stat_desc.elems,Jt=-1;for(V.heap_len=0,V.heap_max=b,he=0;he<He;he++)be[2*he]!==0?(V.heap[++V.heap_len]=Jt=he,V.depth[he]=0):be[2*he+1]=0;for(;V.heap_len<2;)be[2*(ee=V.heap[++V.heap_len]=Jt<2?++Jt:0)]=1,V.depth[ee]=0,V.opt_len--,_e&&(V.static_len-=Oe[2*ee+1]);for(X.max_code=Jt,he=V.heap_len>>1;1<=he;he--)bt(V,be,he);for(ee=He;he=V.heap[1],V.heap[1]=V.heap[V.heap_len--],bt(V,be,1),me=V.heap[1],V.heap[--V.heap_max]=he,V.heap[--V.heap_max]=me,be[2*ee]=be[2*he]+be[2*me],V.depth[ee]=(V.depth[he]>=V.depth[me]?V.depth[he]:V.depth[me])+1,be[2*he+1]=be[2*me+1]=ee,V.heap[1]=ee++,bt(V,be,1),2<=V.heap_len;);V.heap[--V.heap_max]=V.heap[1],function(It,bi){var ys,Vi,Un,yn,yr,Mo,_i=bi.dyn_tree,Yl=bi.max_code,Bd=bi.stat_desc.static_tree,Nm=bi.stat_desc.has_stree,Ro=bi.stat_desc.extra_bits,_a=bi.stat_desc.extra_base,$n=bi.stat_desc.max_length,Ti=0;for(yn=0;yn<=C;yn++)It.bl_count[yn]=0;for(_i[2*It.heap[It.heap_max]+1]=0,ys=It.heap_max+1;ys<b;ys++)$n<(yn=_i[2*_i[2*(Vi=It.heap[ys])+1]+1]+1)&&(yn=$n,Ti++),_i[2*Vi+1]=yn,Yl<Vi||(It.bl_count[yn]++,yr=0,_a<=Vi&&(yr=Ro[Vi-_a]),Mo=_i[2*Vi],It.opt_len+=Mo*(yn+yr),Nm&&(It.static_len+=Mo*(Bd[2*Vi+1]+yr)));if(Ti!==0){do{for(yn=$n-1;It.bl_count[yn]===0;)yn--;It.bl_count[yn]--,It.bl_count[yn+1]+=2,It.bl_count[$n]--,Ti-=2}while(0<Ti);for(yn=$n;yn!==0;yn--)for(Vi=It.bl_count[yn];Vi!==0;)Yl<(Un=It.heap[--ys])||(_i[2*Un+1]!==yn&&(It.opt_len+=(yn-_i[2*Un+1])*_i[2*Un],_i[2*Un+1]=yn),Vi--)}}(V,X),un(be,Jt,V.bl_count)}function A(V,X,he){var me,ee,be=-1,Oe=X[1],_e=0,He=7,Jt=4;for(Oe===0&&(He=138,Jt=3),X[2*(he+1)+1]=65535,me=0;me<=he;me++)ee=Oe,Oe=X[2*(me+1)+1],++_e<He&&ee===Oe||(_e<Jt?V.bl_tree[2*ee]+=_e:ee!==0?(ee!==be&&V.bl_tree[2*ee]++,V.bl_tree[2*F]++):_e<=10?V.bl_tree[2*k]++:V.bl_tree[2*L]++,be=ee,Jt=(_e=0)===Oe?(He=138,3):ee===Oe?(He=6,3):(He=7,4))}function ue(V,X,he){var me,ee,be=-1,Oe=X[1],_e=0,He=7,Jt=4;for(Oe===0&&(He=138,Jt=3),me=0;me<=he;me++)if(ee=Oe,Oe=X[2*(me+1)+1],!(++_e<He&&ee===Oe)){if(_e<Jt)for(;fe(V,ee,V.bl_tree),--_e!=0;);else ee!==0?(ee!==be&&(fe(V,ee,V.bl_tree),_e--),fe(V,F,V.bl_tree),ye(V,_e-3,2)):_e<=10?(fe(V,k,V.bl_tree),ye(V,_e-3,3)):(fe(V,L,V.bl_tree),ye(V,_e-11,7));be=ee,Jt=(_e=0)===Oe?(He=138,3):ee===Oe?(He=6,3):(He=7,4)}}l(W);var ce=!1;function q(V,X,he,me){ye(V,(d<<1)+(me?1:0),3),function(ee,be,Oe,_e){Ze(ee),_e&&(De(ee,Oe),De(ee,~Oe)),t.arraySet(ee.pending_buf,ee.window,be,Oe,ee.pending),ee.pending+=Oe}(V,X,he,!0)}i._tr_init=function(V){ce||(function(){var X,he,me,ee,be,Oe=new Array(C+1);for(ee=me=0;ee<h-1;ee++)for(Z[ee]=me,X=0;X<1<<U[ee];X++)T[me++]=ee;for(T[me-1]=ee,ee=be=0;ee<16;ee++)for(W[ee]=be,X=0;X<1<<H[ee];X++)j[be++]=ee;for(be>>=7;ee<v;ee++)for(W[ee]=be<<7,X=0;X<1<<H[ee]-7;X++)j[256+be++]=ee;for(he=0;he<=C;he++)Oe[he]=0;for(X=0;X<=143;)ne[2*X+1]=8,X++,Oe[8]++;for(;X<=255;)ne[2*X+1]=9,X++,Oe[9]++;for(;X<=279;)ne[2*X+1]=7,X++,Oe[7]++;for(;X<=287;)ne[2*X+1]=8,X++,Oe[8]++;for(un(ne,g+1,Oe),X=0;X<v;X++)O[2*X+1]=5,O[2*X]=ze(X,5);ge=new de(ne,U,p+1,g,C),oe=new de(O,H,0,v,C),N=new de(new Array(0),G,0,_,x)}(),ce=!0),V.l_desc=new Y(V.dyn_ltree,ge),V.d_desc=new Y(V.dyn_dtree,oe),V.bl_desc=new Y(V.bl_tree,N),V.bi_buf=0,V.bi_valid=0,mt(V)},i._tr_stored_block=q,i._tr_flush_block=function(V,X,he,me){var ee,be,Oe=0;0<V.level?(V.strm.data_type===2&&(V.strm.data_type=function(_e){var He,Jt=4093624447;for(He=0;He<=31;He++,Jt>>>=1)if(1&Jt&&_e.dyn_ltree[2*He]!==0)return r;if(_e.dyn_ltree[18]!==0||_e.dyn_ltree[20]!==0||_e.dyn_ltree[26]!==0)return s;for(He=32;He<p;He++)if(_e.dyn_ltree[2*He]!==0)return s;return r}(V)),Wn(V,V.l_desc),Wn(V,V.d_desc),Oe=function(_e){var He;for(A(_e,_e.dyn_ltree,_e.l_desc.max_code),A(_e,_e.dyn_dtree,_e.d_desc.max_code),Wn(_e,_e.bl_desc),He=_-1;3<=He&&_e.bl_tree[2*$[He]+1]===0;He--);return _e.opt_len+=3*(He+1)+5+5+4,He}(V),ee=V.opt_len+3+7>>>3,(be=V.static_len+3+7>>>3)<=ee&&(ee=be)):ee=be=he+5,he+4<=ee&&X!==-1?q(V,X,he,me):V.strategy===4||be===ee?(ye(V,2+(me?1:0),3),Bn(V,ne,O)):(ye(V,4+(me?1:0),3),function(_e,He,Jt,It){var bi;for(ye(_e,He-257,5),ye(_e,Jt-1,5),ye(_e,It-4,4),bi=0;bi<It;bi++)ye(_e,_e.bl_tree[2*$[bi]+1],3);ue(_e,_e.dyn_ltree,He-1),ue(_e,_e.dyn_dtree,Jt-1)}(V,V.l_desc.max_code+1,V.d_desc.max_code+1,Oe+1),Bn(V,V.dyn_ltree,V.dyn_dtree)),mt(V),me&&Ze(V)},i._tr_tally=function(V,X,he){return V.pending_buf[V.d_buf+2*V.last_lit]=X>>>8&255,V.pending_buf[V.d_buf+2*V.last_lit+1]=255&X,V.pending_buf[V.l_buf+V.last_lit]=255&he,V.last_lit++,X===0?V.dyn_ltree[2*he]++:(V.matches++,X--,V.dyn_ltree[2*(T[he]+p+1)]++,V.dyn_dtree[2*Q(X)]++),V.last_lit===V.lit_bufsize-1},i._tr_align=function(V){ye(V,2,3),fe(V,M,ne),function(X){X.bi_valid===16?(De(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}(V)}},{"../utils/common":41}],53:[function(n,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,e,i){(function(t){(function(r,s){"use strict";if(!r.setImmediate){var l,d,h,p,g=1,v={},_=!1,b=r.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(r);C=C&&C.setTimeout?C:r,l={}.toString.call(r.process)==="[object process]"?function(F){process.nextTick(function(){x(F)})}:function(){if(r.postMessage&&!r.importScripts){var F=!0,k=r.onmessage;return r.onmessage=function(){F=!1},r.postMessage("","*"),r.onmessage=k,F}}()?(p="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",M,!1):r.attachEvent("onmessage",M),function(F){r.postMessage(p+F,"*")}):r.MessageChannel?((h=new MessageChannel).port1.onmessage=function(F){x(F.data)},function(F){h.port2.postMessage(F)}):b&&"onreadystatechange"in b.createElement("script")?(d=b.documentElement,function(F){var k=b.createElement("script");k.onreadystatechange=function(){x(F),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(F){setTimeout(x,0,F)},C.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var k=new Array(arguments.length-1),L=0;L<k.length;L++)k[L]=arguments[L+1];var U={callback:F,args:k};return v[g]=U,l(g),g++},C.clearImmediate=w}function w(F){delete v[F]}function x(F){if(_)setTimeout(x,0,F);else{var k=v[F];if(k){_=!0;try{(function(L){var U=L.callback,H=L.args;switch(H.length){case 0:U();break;case 1:U(H[0]);break;case 2:U(H[0],H[1]);break;case 3:U(H[0],H[1],H[2]);break;default:U.apply(s,H)}})(k)}finally{w(F),_=!1}}}}function M(F){F.source===r&&typeof F.data=="string"&&F.data.indexOf(p)===0&&x(+F.data.slice(p.length))}})(typeof self>"u"?t===void 0?this:t:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var Zx=je((gd,rS)=>{"use strict";(function(n,e){typeof gd=="object"&&typeof rS=="object"?rS.exports=e(eS(),tS(),iS()):typeof define=="function"&&define.amd?define(["konva","konmagic-wand-tool","jszip"],e):typeof gd=="object"?gd.dwv=e(eS(),tS(),iS()):n.dwv=e(n.Konva,n.MagicWand,n.JSZip)})(gd,function(n,e,i){return function(){"use strict";var t={654:function(u){u.exports=i},944:function(u){u.exports=n},324:function(u){u.exports=e}},r={};function s(u){var o=r[u];if(o!==void 0)return o.exports;var a=r[u]={exports:{}};return t[u](a,a.exports,s),a.exports}s.n=function(u){var o=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(o,{a:o}),o},s.d=function(u,o){for(var a in o)s.o(o,a)&&!s.o(u,a)&&Object.defineProperty(u,a,{enumerable:!0,get:o[a]})},s.o=function(u,o){return Object.prototype.hasOwnProperty.call(u,o)},s.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})};var l={};s.r(l),s.d(l,{Annotation:function(){return Is},AnnotationGroup:function(){return $d},AnnotationGroupFactory:function(){return lu},App:function(){return _R},AppOptions:function(){return bR},BLACK:function(){return L},ChangeSegmentColourCommand:function(){return CR},Circle:function(){return Bo},ColourMap:function(){return M},DataElement:function(){return $n},DeleteSegmentCommand:function(){return DR},DicomCode:function(){return t0},DicomData:function(){return S0},DicomParser:function(){return jm},DicomSRContent:function(){return qi},DicomWriter:function(){return SM},DrawController:function(){return l_},DrawLayer:function(){return Ia},DrawShapeHandler:function(){return u_},Ellipse:function(){return Vo},Geometry:function(){return Da},Image:function(){return _s},Index:function(){return d},LayerGroup:function(){return v_},MaskFactory:function(){return r0},MaskSegment:function(){return $b},MaskSegmentHelper:function(){return D0},MaskSegmentViewHelper:function(){return wR},Matrix33:function(){return Z},NumberRange:function(){return mM},Orientation:function(){return Sr},OverlayData:function(){return B_},PlaneHelper:function(){return o0},Point:function(){return de},Point2D:function(){return N},Point3D:function(){return W},Protractor:function(){return No},RGB:function(){return k},ROI:function(){return Bi},Rectangle:function(){return Lo},RescaleSlopeAndIntercept:function(){return qd},Scalar2D:function(){return IR},Scalar3D:function(){return ER},ScrollWheel:function(){return Kl},Size:function(){return Oo},Spacing:function(){return Po},Tag:function(){return Un},TagValueExtractor:function(){return Mb},ToolConfig:function(){return SR},ToolboxController:function(){return D_},Vector3D:function(){return O},View:function(){return r_},ViewConfig:function(){return U_},ViewController:function(){return o_},ViewLayer:function(){return oi},WindowLevel:function(){return g},WriterRule:function(){return gM},addTagsToDictionary:function(){return ce},buildMultipart:function(){return A},createImage:function(){return PM},createMaskImage:function(){return FM},createView:function(){return kM},customUI:function(){return f_},decoderScripts:function(){return nu},defaultPresets:function(){return v},defaults:function(){return Uo},getDefaultDicomSegJson:function(){return n_},getDicomSRContentItem:function(){return y0},getDwvVersion:function(){return dM},getElementsFromJSONTags:function(){return Hd},getEllipseIndices:function(){return BM},getLayerDetailsFromEvent:function(){return Lt},getMousePoint:function(){return Tn},getOrientationName:function(){return Eb},getPixelDataTag:function(){return Nm},getRectangleIndices:function(){return VM},getReverseOrientation:function(){return Vm},getSRContent:function(){return au},getTagFromKey:function(){return yr},getTouchPoints:function(){return ui},getTypedArray:function(){return ub},getUID:function(){return Fb},hasDicomPrefix:function(){return uM},i18n:function(){return Y},isEqualRgb:function(){return U},labToUintLab:function(){return H},logger:function(){return p},luts:function(){return F},precisionRound:function(){return un},srgbToCielab:function(){return $},toolList:function(){return h_},toolOptions:function(){return ec}});class d{#e;constructor(o){if(!o||o===void 0)throw new Error("Cannot create index with no values.");if(o.length===0)throw new Error("Cannot create index with empty values.");if(!o.every(function(a){return!isNaN(a)}))throw new Error("Cannot create index with non number values.");this.#e=o}get(o){return this.#e[o]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(o){return!!o&&this.length()===o.length()}equals(o){if(!this.canCompare(o))return!1;for(let a=0,c=this.length();a<c;++a)if(this.get(a)!==o.get(a))return!1;return!0}compare(o){if(!this.canCompare(o))return null;let a=[];for(let c=0,f=this.length();c<f;++c)this.get(c)!==o.get(c)&&a.push(c);return a}add(o){if(!this.canCompare(o))return null;let a=[];for(let c=0,f=this.length();c<f;++c)a.push(this.get(c)+o.get(c));return new d(a)}getWithNew2D(o,a){let c=[o,a];for(let f=2,m=this.length();f<m;++f)c.push(this.get(f));return new d(c)}}class h{#e;#t;#n;#i;constructor(o,a){if(this.#e=o,this.#t=o.isID(),this.#n=Math.pow(2,a),!this.#t){this.#i=new Float32Array(this.#n);for(let c=0;c<this.#n;++c)this.#i[c]=this.#e.apply(c)}}getRSI(){return this.#e}getLength(){return this.#n}getValue(o){return this.#t?o:this.#i[o]}}let p={levels:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},level:3,trace:function(u){this.level<=this.levels.TRACE&&console.trace(u)},debug:function(u){this.level<=this.levels.DEBUG&&console.debug(u)},info:function(u){this.level<=this.levels.INFO&&console.info(u)},warn:function(u){this.level<=this.levels.WARN&&console.warn(u)},error:function(u){this.level<=this.levels.ERROR&&console.error(u)}};class g{center;width;constructor(o,a){a<1&&(p.warn("Using minimum window width since input is not valid: "+a),a=1),this.center=o,this.width=a}equals(o){return o!=null&&this.center===o.center&&this.width===o.width}}let v={CT:{mediastinum:new g(40,400),lung:new g(-500,1500),bone:new g(500,2e3),brain:new g(40,80),head:new g(90,350)}};class _{#e;#t=0;#n=0;#i=255;#r=null;#o=null;#s=null;#a=null;constructor(o){this.#e=o,this.#c()}getWindowLevel(){return this.#e}#c(){let o=this.#e.center,a=this.#e.width,c=o+this.#t;this.#r=c-.5-(a-1)/2,this.#o=c-.5+(a-1)/2,this.#s=(this.#i-this.#n)/(a-1),this.#a=(-(c-.5)/(a-1)+.5)*(this.#i-this.#n)+this.#n}setSignedOffset(o){this.#t=o,this.#c()}apply(o){return o<=this.#r?this.#n:o>this.#o?this.#i:o*this.#s+this.#a}}class b{#e;#t;#n;#i=0;#r=!0;constructor(o,a,c){if(this.#e=o,a){let f=this.#e.getLength();this.#i=f/2}else this.#i=0;this.#r=c}getVoiLut(){return this.#t}getModalityLut(){return this.#e}setVoiLut(o){if(this.#t=o,this.#t.setSignedOffset(this.#e.getRSI().getSlope()*this.#i),this.#r){let a=this.#e.getLength();this.#n=new Uint8ClampedArray(a);for(let c=0;c<a;++c)this.#n[c]=this.#t.apply(this.#e.getValue(c))}}getValue(o){return this.#r?this.#n[o+this.#i]:Math.floor(this.#t.apply(o+this.#i))}}function C(u){let o=[];for(let a=0;a<256;++a)o.push(u(a));return o}function w(u){return u}function x(u){return 255-u}class M{red;green;blue;constructor(o,a,c){this.red=o,this.green=a,this.blue=c}}let F={plain:{red:C(w),green:C(w),blue:C(w)},invPlain:{red:C(x),green:C(x),blue:C(x)},rainbow:{blue:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,247,239,231,223,215,207,199,191,183,175,167,159,151,143,135,127,119,111,103,95,87,79,71,63,55,47,39,31,23,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,120,128,136,144,152,160,168,176,184,192,200,208,216,224,232,240,248,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,253,251,249,247,245,243,241,239,237,235,233,231,229,227,225,223,221,219,217,215,213,211,209,207,205,203,201,199,197,195,193,192,189,186,183,180,177,174,171,168,165,162,159,156,153,150,147,144,141,138,135,132,129,126,123,120,117,114,111,108,105,102,99,96,93,90,87,84,81,78,75,72,69,66,63,60,57,54,51,48,45,42,39,36,33,30,27,24,21,18,15,12,9,6,3],red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]},hot:{red:C(function(u){let o=3*u;return o>255?255:o}),green:C(function(u){let o=85.33333333333333,a=0;return u>=o&&(a=3*(u-o),a>255)?255:a}),blue:C(function(u){let o=85.33333333333333,a=0;return u>=2*o&&(a=3*(u-2*o),a>255)?255:a})},hot_iron:{red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255]},pet:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,128,126,124,122,120,118,116,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,70,68,66,64,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31,29,27,25,23,21,19,17,15,13,11,9,7,5,3,1,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,252,248,244,240,236,232,228,224,220,216,212,208,204,200,196,192,188,184,180,176,172,168,164,160,156,152,148,144,140,136,132,128,124,120,116,112,108,104,100,96,92,88,84,80,76,72,68,64,60,56,52,48,44,40,36,32,28,24,20,16,12,8,4,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,170,174,178,182,186,190,194,198,202,206,210,214,218,222,226,230,234,238,242,246,250,255]},hot_metal_blue:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,52,55,57,59,62,64,66,69,71,74,76,78,81,83,85,88,90,93,96,99,102,105,108,111,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,166,169,172,175,178,181,184,187,190,194,198,201,205,209,213,217,221,224,228,232,236,240,244,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,9,11,13,15,17,19,21,23,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,56,58,60,62,64,66,68,70,72,73,75,77,79,81,83,85,87,88,90,92,94,96,98,100,102,104,105,107,109,111,113,115,117,119,120,122,124,126,128,130,132,134,136,137,139,141,143,145,147,149,151,152,154,156,158,160,162,164,166,168,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,201,203,205,207,209,211,213,215,216,218,220,222,224,226,228,229,231,233,235,237,239,240,242,244,246,248,250,251,253,255],blue:[0,2,4,6,8,10,12,14,16,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,197,194,191,188,185,182,179,176,174,171,168,165,162,159,156,153,150,144,138,132,126,121,115,109,103,97,91,85,79,74,68,62,56,50,47,44,41,38,35,32,29,26,24,21,18,15,12,9,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,53,56,59,62,65,68,71,74,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,176,179,182,185,188,191,194,197,200,203,206,210,213,216,219,223,226,229,232,236,239,242,245,249,252,255]},pet_20step:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,192,192,192,192,192,192,192,192,192,192,192,192,192,176,176,176,176,176,176,176,176,176,176,176,176,176,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,96,96,96,96,96,96,96,96,96,96,96,96,96,144,144,144,144,144,144,144,144,144,144,144,144,144,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,176,176,176,176,176,176,176,176,176,176,176,176,176,144,144,144,144,144,144,144,144,144,144,144,144,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,128,176,176,176,176,176,176,176,176,176,176,176,176,176,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,64,64,64,64,64,64,64,64,64,64,64,64,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255]}};class k{r;g;b;constructor(o,a,c){this.r=o,this.g=a,this.b=c}}let L={r:0,g:0,b:0};function U(u,o){return u!==null&&o!==null&&u!==void 0&&o!==void 0&&u.r===o.r&&u.g===o.g&&u.b===o.b}function H(u){return{l:655.35*u.l,a:257*u.a+32896,b:257*u.b+32896}}let G={x:95.0489,y:100,z:108.884};function $(u){return function(o){function a(m){let y=null;return y=m>.008856452?Math.pow(m,.333333333):7.787037037*m+.137931034,y}let c=G,f=a(o.y/c.y);return{l:116*f-16,a:500*(a(o.x/c.x)-f),b:200*(f-a(o.z/c.z))}}(function(o){function a(y){let S=null;return S=y<=.04045?y/12.92:Math.pow((y+.055)/1.055,2.4),S}let c=a(o.r/255),f=a(o.g/255),m=a(o.b/255);return{x:100*(.4124*c+.3576*f+.1805*m),y:100*(.2126*c+.7152*f+.0722*m),z:100*(.0193*c+.1192*f+.9505*m)}}(u))}function ne(u){let o={Yellow:"#ffff00",Red:"#ff0000",White:"#ffffff",Green:"#008000",Blue:"#0000ff",Lime:"#00ff00",Fuchsia:"#ff00ff",Black:"#000000"},a="#ffff00";return o[u]!==void 0&&(a=o[u]),a}class O{#e;#t;#n;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c}getX(){return this.#e}getY(){return this.#t}getZ(){return this.#n}equals(o){return o!==null&&this.#e===o.getX()&&this.#t===o.getY()&&this.#n===o.getZ()}toString(){return"("+this.#e+", "+this.#t+", "+this.#n+")"}norm(){return Math.sqrt(this.#e*this.#e+this.#t*this.#t+this.#n*this.#n)}crossProduct(o){return new O(this.#t*o.getZ()-o.getY()*this.#n,this.#n*o.getX()-o.getZ()*this.#e,this.#e*o.getY()-o.getX()*this.#t)}dotProduct(o){return this.#e*o.getX()+this.#t*o.getY()+this.#n*o.getZ()}isCodirectional(o){return this.dotProduct(o)>0}}Number.EPSILON;let j=1e-4;function T(u,o,a){return a===void 0&&(a=Number.EPSILON),Math.abs(u-o)<a}class Z{#e;#t;constructor(o){this.#e=o}get(o,a){return this.#e[3*o+a]}getInverse(){return this.#t===void 0&&(this.#t=function(o){let a=o.get(0,0),c=o.get(0,1),f=o.get(0,2),m=o.get(1,0),y=o.get(1,1),S=o.get(1,2),D=o.get(2,0),E=o.get(2,1),I=o.get(2,2),R=y*I-S*E,P=S*D-m*I,B=m*E-y*D,z=a*R+c*P+f*B;if(z!==0)return z=1/z,new Z([z*R,z*(f*E-c*I),z*(c*S-f*y),z*P,z*(a*I-f*D),z*(f*m-a*S),z*B,z*(c*D-a*E),z*(a*y-c*m)]);p.warn("Cannot invert 3*3 matrix with zero determinant.")}(this)),this.#t}equals(o,a){for(let c=0;c<3;++c)for(let f=0;f<3;++f)if(!T(this.get(c,f),o.get(c,f),a))return!1;return!0}toString(){let o="[";for(let a=0;a<3;++a){a!==0&&(o+=`, 
 `);for(let c=0;c<3;++c)c!==0&&(o+=", "),o+=this.get(a,c)}return o+="]",o}multiply(o){let a=[];for(let c=0;c<3;++c)for(let f=0;f<3;++f){let m=0;for(let y=0;y<3;++y)m+=this.get(c,y)*o.get(y,f);a.push(m)}return new Z(a)}getAbs(){let o=[];for(let a=0;a<3;++a)for(let c=0;c<3;++c)o.push(Math.abs(this.get(a,c)));return new Z(o)}multiplyArray3D(o){if(o.length!==3)throw new Error("Cannot multiply 3x3 matrix with non 3D array: "+o.length);let a=[];for(let c=0;c<3;++c){let f=0;for(let m=0;m<3;++m)f+=this.get(c,m)*o[m];a.push(f)}return a}multiplyVector3D(o){let a=this.multiplyArray3D([o.getX(),o.getY(),o.getZ()]);return new O(a[0],a[1],a[2])}multiplyPoint3D(o){let a=this.multiplyArray3D([o.getX(),o.getY(),o.getZ()]);return new W(a[0],a[1],a[2])}multiplyIndex3D(o){let a=this.multiplyArray3D(o.getValues());return new d(a)}getRowAbsMax(o){let a=[Math.abs(this.get(o,0)),Math.abs(this.get(o,1)),Math.abs(this.get(o,2))],c=Math.max.apply(null,a),f=a.indexOf(c);return{value:this.get(o,f),index:f}}getColAbsMax(o){let a=[Math.abs(this.get(0,o)),Math.abs(this.get(1,o)),Math.abs(this.get(2,o))],c=Math.max.apply(null,a),f=a.indexOf(c);return{value:this.get(f,o),index:f}}asOneAndZeros(){let o=[];for(let a=0;a<3;++a){let c=this.getRowAbsMax(a),f=c.value>0?1:-1;for(let m=0;m<3;++m)m===c.index?o.push(1*f):o.push(0)}return new Z(o)}getThirdColMajorDirection(){return this.getColAbsMax(2).index}}function ge(){return new Z([1,0,0,0,1,0,0,0,1])}function oe(u){return u.equals(ge())}class N{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getX(){return this.#e}getY(){return this.#t}getValues(){return[this.#e,this.#t]}getCentroid(){return this}equals(o){return o!=null&&this.#e===o.getX()&&this.#t===o.getY()}toString(){return"("+this.#e+", "+this.#t+")"}getDistance(o){let a=this.#e-o.getX(),c=this.#t-o.getY();return Math.sqrt(a*a+c*c)}}class W{#e;#t;#n;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c}getX(){return this.#e}getY(){return this.#t}getZ(){return this.#n}getValues(){return[this.#e,this.#t,this.#n]}equals(o){return o!==null&&this.#e===o.getX()&&this.#t===o.getY()&&this.#n===o.getZ()}isSimilar(o,a){return o!==null&&T(this.#e,o.getX(),a)&&T(this.#t,o.getY(),a)&&T(this.#n,o.getZ(),a)}toString(){return"("+this.#e+", "+this.#t+", "+this.#n+")"}getDistance(o){return Math.sqrt(this.#i(o))}#i(o){let a=this.#e-o.getX(),c=this.#t-o.getY(),f=this.#n-o.getZ();return a*a+c*c+f*f}getClosest(o){let a=0,c=this.#i(o[a]);for(let f=0;f<o.length;++f){let m=this.#i(o[f]);m<c&&(a=f,c=m)}return a}minus(o){return new O(this.#e-o.getX(),this.#t-o.getY(),this.#n-o.getZ())}}class de{#e;constructor(o){if(!o||o===void 0)throw new Error("Cannot create point with no values.");if(o.length===0)throw new Error("Cannot create point with empty values.");if(!o.every(function(a){return!isNaN(a)}))throw new Error("Cannot create point with non number values.");this.#e=o}get(o){return this.#e[o]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(o){return!!o&&this.length()===o.length()}equals(o){if(!this.canCompare(o))return!1;for(let a=0,c=this.length();a<c;++a)if(this.get(a)!==o.get(a))return!1;return!0}compare(o){if(!this.canCompare(o))return null;let a=[];for(let c=0,f=this.length();c<f;++c)this.get(c)!==o.get(c)&&a.push(c);return a}get3D(){return new W(this.get(0),this.get(1),this.get(2))}add(o){if(!this.canCompare(o))return null;let a=[],c=this.getValues(),f=o.getValues();for(let m=0;m<c.length;++m)a.push(c[m]+f[m]);return new de(a)}mergeWith3D(o){let a=this.getValues();return a[0]=o.getX(),a[1]=o.getY(),a[2]=o.getZ(),new de(a)}}let Y={t(u){let o=u,a=u.split(".");return a.length===2&&a[0]==="unit"&&(o={mm:"mm",cm2:"cm\xB2",degree:"\xB0"}[a[1]]),o}};function Q(u,o,a){if(u==null||o==null)return!1;let c=a>0?0|a:0;return u.substring(c,c+o.length)===o}function De(u,o){return u!=null&&o!=null&&u.substring(u.length-o.length)===o}function ye(u){let o=[];if(u==null)return o;let a=/{(\w+)}/g,c=a.exec(u);for(;c;)o.push(c[1]),c=a.exec(u);return o}function fe(u){let o=null;if(u!=null&&u[0]!=="."){let a=u.toLowerCase().split(".");a.length!==1&&(o=a.pop(),/[a-z]/.test(o)&&!o.includes("/")||(o=null))}return o}function ze(u){let o=new Uint8Array(u.length);for(let a=0,c=u.length;a<c;a++)o[a]=u.charCodeAt(a);return o}function un(u,o){let a=Math.pow(10,o),c=.01/a;return Math.round(u*a+c)/a}function mt(u,o){if(o===void 0){o=[];for(let c=0;c<u.length;++c)o.push(c)}for(let c=0;c<o.length;++c)if(o[c]>=u.length)throw new Error("Non valid dimension for toStringId");let a="";for(let c=0;c<o.length;++c)c!==0&&(a+="_"),a+="#"+o[c]+"-"+u[o[c]];return a}function Ze(u,o){return u!==null&&o!==null&&u!==void 0&&o!==void 0&&$t(u.slice().sort(),o.slice().sort())}function $t(u,o){return u!==null&&o!==null&&u!==void 0&&o!==void 0&&u.length===o.length&&u.every(function(a,c){return a===o[c]})}function bt(u){return String.fromCharCode.apply(String,u)}function Bn(u,o,a,c){(a===void 0||a<0||a>=u.length)&&(a=0),(c===void 0||c<=a||c>u.length)&&(c=u.length);for(let f=a;f<c;++f)if(o(u[f],f,u))return f}function Wn(u){return function(o,a,c){for(let f=0;f<u.length;++f)if(c[a+f]!==u[f])return!1;return!0}}function A(u,o){let a=`\r
`,c=0,f=[];for(let D=0;D<u.length;++D){let E="";D!==0&&(E+=a),E+="--"+o+a;let I=Object.keys(u[D]);for(let P=0;P<I.length;++P){let B=I[P];B!=="data"&&(E+=B+": "+u[D][B]+a)}E+=a;let R=ze(E);f.push(R),c+=R.byteLength+u[D].data.byteLength}let m=ze(`\r
--`+o+"--"+a),y=new Uint8Array(c+m.byteLength),S=0;for(let D=0;D<u.length;++D)y.set(f[D],S),S+=f[D].byteLength,y.set(new Uint8Array(u[D].data),S),S+=u[D].data.byteLength;return y.set(m,S),y}let ue={"0000":{"0000":["UL","1","CommandGroupLength"],"0001":["UL","1","CommandLengthToEnd"],"0002":["UI","1","AffectedSOPClassUID"],"0003":["UI","1","RequestedSOPClassUID"],"0010":["SH","1","CommandRecognitionCode"],"0100":["US","1","CommandField"],"0110":["US","1","MessageID"],"0120":["US","1","MessageIDBeingRespondedTo"],"0200":["AE","1","Initiator"],"0300":["AE","1","Receiver"],"0400":["AE","1","FindLocation"],"0600":["AE","1","MoveDestination"],"0700":["US","1","Priority"],"0800":["US","1","CommandDataSetType"],"0850":["US","1","NumberOfMatches"],"0860":["US","1","ResponseSequenceNumber"],"0900":["US","1","Status"],"0901":["AT","1-n","OffendingElement"],"0902":["LO","1","ErrorComment"],"0903":["US","1","ErrorID"],1e3:["UI","1","AffectedSOPInstanceUID"],1001:["UI","1","RequestedSOPInstanceUID"],1002:["US","1","EventTypeID"],1005:["AT","1-n","AttributeIdentifierList"],1008:["US","1","ActionTypeID"],1020:["US","1","NumberOfRemainingSuboperations"],1021:["US","1","NumberOfCompletedSuboperations"],1022:["US","1","NumberOfFailedSuboperations"],1023:["US","1","NumberOfWarningSuboperations"],1030:["AE","1","MoveOriginatorApplicationEntityTitle"],1031:["US","1","MoveOriginatorMessageID"],4e3:["LT","1","DialogReceiver"],4010:["LT","1","TerminalType"],5010:["SH","1","MessageSetID"],5020:["SH","1","EndMessageID"],5110:["LT","1","DisplayFormat"],5120:["LT","1","PagePositionID"],5130:["CS","1","TextFormatID"],5140:["CS","1","NormalReverse"],5150:["CS","1","AddGrayScale"],5160:["CS","1","Borders"],5170:["IS","1","Copies"],5180:["CS","1","CommandMagnificationType"],5190:["CS","1","Erase"],"51A0":["CS","1","Print"],"51B0":["US","1-n","Overlays"]},"0002":{"0000":["UL","1","FileMetaInformationGroupLength"],"0001":["OB","1","FileMetaInformationVersion"],"0002":["UI","1","MediaStorageSOPClassUID"],"0003":["UI","1","MediaStorageSOPInstanceUID"],"0010":["UI","1","TransferSyntaxUID"],"0012":["UI","1","ImplementationClassUID"],"0013":["SH","1","ImplementationVersionName"],"0016":["AE","1","SourceApplicationEntityTitle"],"0017":["AE","1","SendingApplicationEntityTitle"],"0018":["AE","1","ReceivingApplicationEntityTitle"],"0026":["UR","1","SourcePresentationAddress"],"0027":["UR","1","SendingPresentationAddress"],"0028":["UR","1","ReceivingPresentationAddress"],"0031":["OB","1","RTVMetaInformationVersion"],"0032":["UI","1","RTVCommunicationSOPClassUID"],"0033":["UI","1","RTVCommunicationSOPInstanceUID"],"0035":["OB","1","RTVSourceIdentifier"],"0036":["OB","1","RTVFlowIdentifier"],"0037":["UL","1","RTVFlowRTPSamplingRate"],"0038":["FD","1","RTVFlowActualFrameDuration"],"0100":["UI","1","PrivateInformationCreatorUID"],"0102":["OB","1","PrivateInformation"]},"0004":{"0000":["UL","1","GenericGroupLength"],1130:["CS","1","FileSetID"],1141:["CS","1-8","FileSetDescriptorFileID"],1142:["CS","1","SpecificCharacterSetOfFileSetDescriptorFile"],1200:["UL","1","OffsetOfTheFirstDirectoryRecordOfTheRootDirectoryEntity"],1202:["UL","1","OffsetOfTheLastDirectoryRecordOfTheRootDirectoryEntity"],1212:["US","1","FileSetConsistencyFlag"],1220:["SQ","1","DirectoryRecordSequence"],1400:["UL","1","OffsetOfTheNextDirectoryRecord"],1410:["US","1","RecordInUseFlag"],1420:["UL","1","OffsetOfReferencedLowerLevelDirectoryEntity"],1430:["CS","1","DirectoryRecordType"],1432:["UI","1","PrivateRecordUID"],1500:["CS","1-8","ReferencedFileID"],1504:["UL","1","MRDRDirectoryRecordOffset"],1510:["UI","1","ReferencedSOPClassUIDInFile"],1511:["UI","1","ReferencedSOPInstanceUIDInFile"],1512:["UI","1","ReferencedTransferSyntaxUIDInFile"],"151A":["UI","1-n","ReferencedRelatedGeneralSOPClassUIDInFile"],1600:["UL","1","NumberOfReferences"]},"0008":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","LengthToEnd"],"0005":["CS","1-n","SpecificCharacterSet"],"0006":["SQ","1","LanguageCodeSequence"],"0008":["CS","2-n","ImageType"],"0010":["SH","1","RecognitionCode"],"0012":["DA","1","InstanceCreationDate"],"0013":["TM","1","InstanceCreationTime"],"0014":["UI","1","InstanceCreatorUID"],"0015":["DT","1","InstanceCoercionDateTime"],"0016":["UI","1","SOPClassUID"],"0018":["UI","1","SOPInstanceUID"],"001A":["UI","1-n","RelatedGeneralSOPClassUID"],"001B":["UI","1","OriginalSpecializedSOPClassUID"],"0020":["DA","1","StudyDate"],"0021":["DA","1","SeriesDate"],"0022":["DA","1","AcquisitionDate"],"0023":["DA","1","ContentDate"],"0024":["DA","1","OverlayDate"],"0025":["DA","1","CurveDate"],"002A":["DT","1","AcquisitionDateTime"],"0030":["TM","1","StudyTime"],"0031":["TM","1","SeriesTime"],"0032":["TM","1","AcquisitionTime"],"0033":["TM","1","ContentTime"],"0034":["TM","1","OverlayTime"],"0035":["TM","1","CurveTime"],"0040":["US","1","DataSetType"],"0041":["LO","1","DataSetSubtype"],"0042":["CS","1","NuclearMedicineSeriesType"],"0050":["SH","1","AccessionNumber"],"0051":["SQ","1","IssuerOfAccessionNumberSequence"],"0052":["CS","1","QueryRetrieveLevel"],"0053":["CS","1","QueryRetrieveView"],"0054":["AE","1-n","RetrieveAETitle"],"0055":["AE","1","StationAETitle"],"0056":["CS","1","InstanceAvailability"],"0058":["UI","1-n","FailedSOPInstanceUIDList"],"0060":["CS","1","Modality"],"0061":["CS","1-n","ModalitiesInStudy"],"0062":["UI","1-n","SOPClassesInStudy"],"0063":["SQ","1","AnatomicRegionsInStudyCodeSequence"],"0064":["CS","1","ConversionType"],"0068":["CS","1","PresentationIntentType"],"0070":["LO","1","Manufacturer"],"0080":["LO","1","InstitutionName"],"0081":["ST","1","InstitutionAddress"],"0082":["SQ","1","InstitutionCodeSequence"],"0090":["PN","1","ReferringPhysicianName"],"0092":["ST","1","ReferringPhysicianAddress"],"0094":["SH","1-n","ReferringPhysicianTelephoneNumbers"],"0096":["SQ","1","ReferringPhysicianIdentificationSequence"],"009C":["PN","1-n","ConsultingPhysicianName"],"009D":["SQ","1","ConsultingPhysicianIdentificationSequence"],"0100":["SH","1","CodeValue"],"0101":["LO","1","ExtendedCodeValue"],"0102":["SH","1","CodingSchemeDesignator"],"0103":["SH","1","CodingSchemeVersion"],"0104":["LO","1","CodeMeaning"],"0105":["CS","1","MappingResource"],"0106":["DT","1","ContextGroupVersion"],"0107":["DT","1","ContextGroupLocalVersion"],"0108":["LT","1","ExtendedCodeMeaning"],"0109":["SQ","1","CodingSchemeResourcesSequence"],"010A":["CS","1","CodingSchemeURLType"],"010B":["CS","1","ContextGroupExtensionFlag"],"010C":["UI","1","CodingSchemeUID"],"010D":["UI","1","ContextGroupExtensionCreatorUID"],"010E":["UR","1","CodingSchemeURL"],"010F":["CS","1","ContextIdentifier"],"0110":["SQ","1","CodingSchemeIdentificationSequence"],"0112":["LO","1","CodingSchemeRegistry"],"0114":["ST","1","CodingSchemeExternalID"],"0115":["ST","1","CodingSchemeName"],"0116":["ST","1","CodingSchemeResponsibleOrganization"],"0117":["UI","1","ContextUID"],"0118":["UI","1","MappingResourceUID"],"0119":["UC","1","LongCodeValue"],"0120":["UR","1","URNCodeValue"],"0121":["SQ","1","EquivalentCodeSequence"],"0122":["LO","1","MappingResourceName"],"0123":["SQ","1","ContextGroupIdentificationSequence"],"0124":["SQ","1","MappingResourceIdentificationSequence"],"0201":["SH","1","TimezoneOffsetFromUTC"],"0202":["","",""],"0220":["SQ","1","ResponsibleGroupCodeSequence"],"0221":["CS","1","EquipmentModality"],"0222":["LO","1","ManufacturerRelatedModelGroup"],"0300":["SQ","1","PrivateDataElementCharacteristicsSequence"],"0301":["US","1","PrivateGroupReference"],"0302":["LO","1","PrivateCreatorReference"],"0303":["CS","1","BlockIdentifyingInformationStatus"],"0304":["US","1-n","NonidentifyingPrivateElements"],"0305":["SQ","1","DeidentificationActionSequence"],"0306":["US","1-n","IdentifyingPrivateElements"],"0307":["CS","1","DeidentificationAction"],"0308":["US","1","PrivateDataElement"],"0309":["UL","1-3","PrivateDataElementValueMultiplicity"],"030A":["CS","1","PrivateDataElementValueRepresentation"],"030B":["UL","1-2","PrivateDataElementNumberOfItems"],"030C":["UC","1","PrivateDataElementName"],"030D":["UC","1","PrivateDataElementKeyword"],"030E":["UT","1","PrivateDataElementDescription"],"030F":["UT","1","PrivateDataElementEncoding"],"0310":["SQ","1","PrivateDataElementDefinitionSequence"],1e3:["AE","1","NetworkID"],1010:["SH","1","StationName"],1030:["LO","1","StudyDescription"],1032:["SQ","1","ProcedureCodeSequence"],"103E":["LO","1","SeriesDescription"],"103F":["SQ","1","SeriesDescriptionCodeSequence"],1040:["LO","1","InstitutionalDepartmentName"],1041:["SQ","1","InstitutionalDepartmentTypeCodeSequence"],1048:["PN","1-n","PhysiciansOfRecord"],1049:["SQ","1","PhysiciansOfRecordIdentificationSequence"],1050:["PN","1-n","PerformingPhysicianName"],1052:["SQ","1","PerformingPhysicianIdentificationSequence"],1060:["PN","1-n","NameOfPhysiciansReadingStudy"],1062:["SQ","1","PhysiciansReadingStudyIdentificationSequence"],1070:["PN","1-n","OperatorsName"],1072:["SQ","1","OperatorIdentificationSequence"],1080:["LO","1-n","AdmittingDiagnosesDescription"],1084:["SQ","1","AdmittingDiagnosesCodeSequence"],1090:["LO","1","ManufacturerModelName"],1100:["SQ","1","ReferencedResultsSequence"],1110:["SQ","1","ReferencedStudySequence"],1111:["SQ","1","ReferencedPerformedProcedureStepSequence"],1115:["SQ","1","ReferencedSeriesSequence"],1120:["SQ","1","ReferencedPatientSequence"],1125:["SQ","1","ReferencedVisitSequence"],1130:["SQ","1","ReferencedOverlaySequence"],1134:["SQ","1","ReferencedStereometricInstanceSequence"],"113A":["SQ","1","ReferencedWaveformSequence"],1140:["SQ","1","ReferencedImageSequence"],1145:["SQ","1","ReferencedCurveSequence"],"114A":["SQ","1","ReferencedInstanceSequence"],"114B":["SQ","1","ReferencedRealWorldValueMappingInstanceSequence"],1150:["UI","1","ReferencedSOPClassUID"],1155:["UI","1","ReferencedSOPInstanceUID"],1156:["SQ","1","DefinitionSourceSequence"],"115A":["UI","1-n","SOPClassesSupported"],1160:["IS","1-n","ReferencedFrameNumber"],1161:["UL","1-n","SimpleFrameList"],1162:["UL","3-3n","CalculatedFrameList"],1163:["FD","2","TimeRange"],1164:["SQ","1","FrameExtractionSequence"],1167:["UI","1","MultiFrameSourceSOPInstanceUID"],1190:["UR","1","RetrieveURL"],1195:["UI","1","TransactionUID"],1196:["US","1","WarningReason"],1197:["US","1","FailureReason"],1198:["SQ","1","FailedSOPSequence"],1199:["SQ","1","ReferencedSOPSequence"],"119A":["SQ","1","OtherFailuresSequence"],1200:["SQ","1","StudiesContainingOtherReferencedInstancesSequence"],1250:["SQ","1","RelatedSeriesSequence"],2110:["CS","1","LossyImageCompressionRetired"],2111:["ST","1","DerivationDescription"],2112:["SQ","1","SourceImageSequence"],2120:["SH","1","StageName"],2122:["IS","1","StageNumber"],2124:["IS","1","NumberOfStages"],2127:["SH","1","ViewName"],2128:["IS","1","ViewNumber"],2129:["IS","1","NumberOfEventTimers"],"212A":["IS","1","NumberOfViewsInStage"],2130:["DS","1-n","EventElapsedTimes"],2132:["LO","1-n","EventTimerNames"],2133:["SQ","1","EventTimerSequence"],2134:["FD","1","EventTimeOffset"],2135:["SQ","1","EventCodeSequence"],2142:["IS","1","StartTrim"],2143:["IS","1","StopTrim"],2144:["IS","1","RecommendedDisplayFrameRate"],2200:["CS","1","TransducerPosition"],2204:["CS","1","TransducerOrientation"],2208:["CS","1","AnatomicStructure"],2218:["SQ","1","AnatomicRegionSequence"],2220:["SQ","1","AnatomicRegionModifierSequence"],2228:["SQ","1","PrimaryAnatomicStructureSequence"],2229:["SQ","1","AnatomicStructureSpaceOrRegionSequence"],2230:["SQ","1","PrimaryAnatomicStructureModifierSequence"],2240:["SQ","1","TransducerPositionSequence"],2242:["SQ","1","TransducerPositionModifierSequence"],2244:["SQ","1","TransducerOrientationSequence"],2246:["SQ","1","TransducerOrientationModifierSequence"],2251:["SQ","1","AnatomicStructureSpaceOrRegionCodeSequenceTrial"],2253:["SQ","1","AnatomicPortalOfEntranceCodeSequenceTrial"],2255:["SQ","1","AnatomicApproachDirectionCodeSequenceTrial"],2256:["ST","1","AnatomicPerspectiveDescriptionTrial"],2257:["SQ","1","AnatomicPerspectiveCodeSequenceTrial"],2258:["ST","1","AnatomicLocationOfExaminingInstrumentDescriptionTrial"],2259:["SQ","1","AnatomicLocationOfExaminingInstrumentCodeSequenceTrial"],"225A":["SQ","1","AnatomicStructureSpaceOrRegionModifierCodeSequenceTrial"],"225C":["SQ","1","OnAxisBackgroundAnatomicStructureCodeSequenceTrial"],3001:["SQ","1","AlternateRepresentationSequence"],3002:["UI","1-n","AvailableTransferSyntaxUID"],3010:["UI","1-n","IrradiationEventUID"],3011:["SQ","1","SourceIrradiationEventSequence"],3012:["UI","1","RadiopharmaceuticalAdministrationEventUID"],4e3:["LT","1","IdentifyingComments"],9007:["CS","4","FrameType"],9092:["SQ","1","ReferencedImageEvidenceSequence"],9121:["SQ","1","ReferencedRawDataSequence"],9123:["UI","1","CreatorVersionUID"],9124:["SQ","1","DerivationImageSequence"],9154:["SQ","1","SourceImageEvidenceSequence"],9205:["CS","1","PixelPresentation"],9206:["CS","1","VolumetricProperties"],9207:["CS","1","VolumeBasedCalculationTechnique"],9208:["CS","1","ComplexImageComponent"],9209:["CS","1","AcquisitionContrast"],9215:["SQ","1","DerivationCodeSequence"],9237:["SQ","1","ReferencedPresentationStateSequence"],9410:["SQ","1","ReferencedOtherPlaneSequence"],9458:["SQ","1","FrameDisplaySequence"],9459:["FL","1","RecommendedDisplayFrameRateInFloat"],9460:["CS","1","SkipFrameRangeFlag"]},"0010":{"0000":["UL","1","GenericGroupLength"],"0010":["PN","1","PatientName"],"0020":["LO","1","PatientID"],"0021":["LO","1","IssuerOfPatientID"],"0022":["CS","1","TypeOfPatientID"],"0024":["SQ","1","IssuerOfPatientIDQualifiersSequence"],"0026":["SQ","1","SourcePatientGroupIdentificationSequence"],"0027":["SQ","1","GroupOfPatientsIdentificationSequence"],"0028":["US","3","SubjectRelativePositionInImage"],"0030":["DA","1","PatientBirthDate"],"0032":["TM","1","PatientBirthTime"],"0033":["LO","1","PatientBirthDateInAlternativeCalendar"],"0034":["LO","1","PatientDeathDateInAlternativeCalendar"],"0035":["CS","1","PatientAlternativeCalendar"],"0040":["CS","1","PatientSex"],"0050":["SQ","1","PatientInsurancePlanCodeSequence"],"0101":["SQ","1","PatientPrimaryLanguageCodeSequence"],"0102":["SQ","1","PatientPrimaryLanguageModifierCodeSequence"],"0200":["CS","1","QualityControlSubject"],"0201":["SQ","1","QualityControlSubjectTypeCodeSequence"],"0212":["UC","1","StrainDescription"],"0213":["LO","1","StrainNomenclature"],"0214":["LO","1","StrainStockNumber"],"0215":["SQ","1","StrainSourceRegistryCodeSequence"],"0216":["SQ","1","StrainStockSequence"],"0217":["LO","1","StrainSource"],"0218":["UT","1","StrainAdditionalInformation"],"0219":["SQ","1","StrainCodeSequence"],"0221":["SQ","1","GeneticModificationsSequence"],"0222":["UC","1","GeneticModificationsDescription"],"0223":["LO","1","GeneticModificationsNomenclature"],"0229":["SQ","1","GeneticModificationsCodeSequence"],1e3:["LO","1-n","OtherPatientIDs"],1001:["PN","1-n","OtherPatientNames"],1002:["SQ","1","OtherPatientIDsSequence"],1005:["PN","1","PatientBirthName"],1010:["AS","1","PatientAge"],1020:["DS","1","PatientSize"],1021:["SQ","1","PatientSizeCodeSequence"],1022:["DS","1","PatientBodyMassIndex"],1023:["DS","1","MeasuredAPDimension"],1024:["DS","1","MeasuredLateralDimension"],1030:["DS","1","PatientWeight"],1040:["LO","1","PatientAddress"],1050:["LO","1-n","InsurancePlanIdentification"],1060:["PN","1","PatientMotherBirthName"],1080:["LO","1","MilitaryRank"],1081:["LO","1","BranchOfService"],1090:["LO","1","MedicalRecordLocator"],1100:["SQ","1","ReferencedPatientPhotoSequence"],2e3:["LO","1-n","MedicalAlerts"],2110:["LO","1-n","Allergies"],2150:["LO","1","CountryOfResidence"],2152:["LO","1","RegionOfResidence"],2154:["SH","1-n","PatientTelephoneNumbers"],2155:["LT","1","PatientTelecomInformation"],2160:["SH","1","EthnicGroup"],2180:["SH","1","Occupation"],"21A0":["CS","1","SmokingStatus"],"21B0":["LT","1","AdditionalPatientHistory"],"21C0":["US","1","PregnancyStatus"],"21D0":["DA","1","LastMenstrualDate"],"21F0":["LO","1","PatientReligiousPreference"],2201:["LO","1","PatientSpeciesDescription"],2202:["SQ","1","PatientSpeciesCodeSequence"],2203:["CS","1","PatientSexNeutered"],2210:["CS","1","AnatomicalOrientationType"],2292:["LO","1","PatientBreedDescription"],2293:["SQ","1","PatientBreedCodeSequence"],2294:["SQ","1","BreedRegistrationSequence"],2295:["LO","1","BreedRegistrationNumber"],2296:["SQ","1","BreedRegistryCodeSequence"],2297:["PN","1","ResponsiblePerson"],2298:["CS","1","ResponsiblePersonRole"],2299:["LO","1","ResponsibleOrganization"],4e3:["LT","1","PatientComments"],9431:["FL","1","ExaminedBodyThickness"]},"0012":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ClinicalTrialSponsorName"],"0020":["LO","1","ClinicalTrialProtocolID"],"0021":["LO","1","ClinicalTrialProtocolName"],"0030":["LO","1","ClinicalTrialSiteID"],"0031":["LO","1","ClinicalTrialSiteName"],"0040":["LO","1","ClinicalTrialSubjectID"],"0042":["LO","1","ClinicalTrialSubjectReadingID"],"0050":["LO","1","ClinicalTrialTimePointID"],"0051":["ST","1","ClinicalTrialTimePointDescription"],"0052":["FD","1","LongitudinalTemporalOffsetFromEvent"],"0053":["CS","1","LongitudinalTemporalEventType"],"0060":["LO","1","ClinicalTrialCoordinatingCenterName"],"0062":["CS","1","PatientIdentityRemoved"],"0063":["LO","1-n","DeidentificationMethod"],"0064":["SQ","1","DeidentificationMethodCodeSequence"],"0071":["LO","1","ClinicalTrialSeriesID"],"0072":["LO","1","ClinicalTrialSeriesDescription"],"0081":["LO","1","ClinicalTrialProtocolEthicsCommitteeName"],"0082":["LO","1","ClinicalTrialProtocolEthicsCommitteeApprovalNumber"],"0083":["SQ","1","ConsentForClinicalTrialUseSequence"],"0084":["CS","1","DistributionType"],"0085":["CS","1","ConsentForDistributionFlag"],"0086":["DA","1","EthicsCommitteeApprovalEffectivenessStartDate"],"0087":["DA","1","EthicsCommitteeApprovalEffectivenessEndDate"]},"0014":{"0000":["UL","1","GenericGroupLength"],"0023":["ST","1","CADFileFormat"],"0024":["ST","1","ComponentReferenceSystem"],"0025":["ST","1","ComponentManufacturingProcedure"],"0028":["ST","1","ComponentManufacturer"],"0030":["DS","1-n","MaterialThickness"],"0032":["DS","1-n","MaterialPipeDiameter"],"0034":["DS","1-n","MaterialIsolationDiameter"],"0042":["ST","1","MaterialGrade"],"0044":["ST","1","MaterialPropertiesDescription"],"0045":["ST","1","MaterialPropertiesFileFormatRetired"],"0046":["LT","1","MaterialNotes"],"0050":["CS","1","ComponentShape"],"0052":["CS","1","CurvatureType"],"0054":["DS","1","OuterDiameter"],"0056":["DS","1","InnerDiameter"],"0100":["LO","1-n","ComponentWelderIDs"],"0101":["CS","1","SecondaryApprovalStatus"],"0102":["DA","1","SecondaryReviewDate"],"0103":["TM","1","SecondaryReviewTime"],"0104":["PN","1","SecondaryReviewerName"],"0105":["ST","1","RepairID"],"0106":["SQ","1","MultipleComponentApprovalSequence"],"0107":["CS","1-n","OtherApprovalStatus"],"0108":["CS","1-n","OtherSecondaryApprovalStatus"],1010:["ST","1","ActualEnvironmentalConditions"],1020:["DA","1","ExpiryDate"],1040:["ST","1","EnvironmentalConditions"],2002:["SQ","1","EvaluatorSequence"],2004:["IS","1","EvaluatorNumber"],2006:["PN","1","EvaluatorName"],2008:["IS","1","EvaluationAttempt"],2012:["SQ","1","IndicationSequence"],2014:["IS","1","IndicationNumber"],2016:["SH","1","IndicationLabel"],2018:["ST","1","IndicationDescription"],"201A":["CS","1-n","IndicationType"],"201C":["CS","1","IndicationDisposition"],"201E":["SQ","1","IndicationROISequence"],2030:["SQ","1","IndicationPhysicalPropertySequence"],2032:["SH","1","PropertyLabel"],2202:["IS","1","CoordinateSystemNumberOfAxes"],2204:["SQ","1","CoordinateSystemAxesSequence"],2206:["ST","1","CoordinateSystemAxisDescription"],2208:["CS","1","CoordinateSystemDataSetMapping"],"220A":["IS","1","CoordinateSystemAxisNumber"],"220C":["CS","1","CoordinateSystemAxisType"],"220E":["CS","1","CoordinateSystemAxisUnits"],2210:["OB","1","CoordinateSystemAxisValues"],2220:["SQ","1","CoordinateSystemTransformSequence"],2222:["ST","1","TransformDescription"],2224:["IS","1","TransformNumberOfAxes"],2226:["IS","1-n","TransformOrderOfAxes"],2228:["CS","1","TransformedAxisUnits"],"222A":["DS","1-n","CoordinateSystemTransformRotationAndScaleMatrix"],"222C":["DS","1-n","CoordinateSystemTransformTranslationMatrix"],3011:["DS","1","InternalDetectorFrameTime"],3012:["DS","1","NumberOfFramesIntegrated"],3020:["SQ","1","DetectorTemperatureSequence"],3022:["ST","1","SensorName"],3024:["DS","1","HorizontalOffsetOfSensor"],3026:["DS","1","VerticalOffsetOfSensor"],3028:["DS","1","SensorTemperature"],3040:["SQ","1","DarkCurrentSequence"],3050:["ox","1","DarkCurrentCounts"],3060:["SQ","1","GainCorrectionReferenceSequence"],3070:["ox","1","AirCounts"],3071:["DS","1","KVUsedInGainCalibration"],3072:["DS","1","MAUsedInGainCalibration"],3073:["DS","1","NumberOfFramesUsedForIntegration"],3074:["LO","1","FilterMaterialUsedInGainCalibration"],3075:["DS","1","FilterThicknessUsedInGainCalibration"],3076:["DA","1","DateOfGainCalibration"],3077:["TM","1","TimeOfGainCalibration"],3080:["OB","1","BadPixelImage"],3099:["LT","1","CalibrationNotes"],3100:["LT","1","LinearityCorrectionTechnique"],3101:["LT","1","BeamHardeningCorrectionTechnique"],4002:["SQ","1","PulserEquipmentSequence"],4004:["CS","1","PulserType"],4006:["LT","1","PulserNotes"],4008:["SQ","1","ReceiverEquipmentSequence"],"400A":["CS","1","AmplifierType"],"400C":["LT","1","ReceiverNotes"],"400E":["SQ","1","PreAmplifierEquipmentSequence"],"400F":["LT","1","PreAmplifierNotes"],4010:["SQ","1","TransmitTransducerSequence"],4011:["SQ","1","ReceiveTransducerSequence"],4012:["US","1","NumberOfElements"],4013:["CS","1","ElementShape"],4014:["DS","1","ElementDimensionA"],4015:["DS","1","ElementDimensionB"],4016:["DS","1","ElementPitchA"],4017:["DS","1","MeasuredBeamDimensionA"],4018:["DS","1","MeasuredBeamDimensionB"],4019:["DS","1","LocationOfMeasuredBeamDiameter"],"401A":["DS","1","NominalFrequency"],"401B":["DS","1","MeasuredCenterFrequency"],"401C":["DS","1","MeasuredBandwidth"],"401D":["DS","1","ElementPitchB"],4020:["SQ","1","PulserSettingsSequence"],4022:["DS","1","PulseWidth"],4024:["DS","1","ExcitationFrequency"],4026:["CS","1","ModulationType"],4028:["DS","1","Damping"],4030:["SQ","1","ReceiverSettingsSequence"],4031:["DS","1","AcquiredSoundpathLength"],4032:["CS","1","AcquisitionCompressionType"],4033:["IS","1","AcquisitionSampleSize"],4034:["DS","1","RectifierSmoothing"],4035:["SQ","1","DACSequence"],4036:["CS","1","DACType"],4038:["DS","1-n","DACGainPoints"],"403A":["DS","1-n","DACTimePoints"],"403C":["DS","1-n","DACAmplitude"],4040:["SQ","1","PreAmplifierSettingsSequence"],4050:["SQ","1","TransmitTransducerSettingsSequence"],4051:["SQ","1","ReceiveTransducerSettingsSequence"],4052:["DS","1","IncidentAngle"],4054:["ST","1","CouplingTechnique"],4056:["ST","1","CouplingMedium"],4057:["DS","1","CouplingVelocity"],4058:["DS","1","ProbeCenterLocationX"],4059:["DS","1","ProbeCenterLocationZ"],"405A":["DS","1","SoundPathLength"],"405C":["ST","1","DelayLawIdentifier"],4060:["SQ","1","GateSettingsSequence"],4062:["DS","1","GateThreshold"],4064:["DS","1","VelocityOfSound"],4070:["SQ","1","CalibrationSettingsSequence"],4072:["ST","1","CalibrationProcedure"],4074:["SH","1","ProcedureVersion"],4076:["DA","1","ProcedureCreationDate"],4078:["DA","1","ProcedureExpirationDate"],"407A":["DA","1","ProcedureLastModifiedDate"],"407C":["TM","1-n","CalibrationTime"],"407E":["DA","1-n","CalibrationDate"],4080:["SQ","1","ProbeDriveEquipmentSequence"],4081:["CS","1","DriveType"],4082:["LT","1","ProbeDriveNotes"],4083:["SQ","1","DriveProbeSequence"],4084:["DS","1","ProbeInductance"],4085:["DS","1","ProbeResistance"],4086:["SQ","1","ReceiveProbeSequence"],4087:["SQ","1","ProbeDriveSettingsSequence"],4088:["DS","1","BridgeResistors"],4089:["DS","1","ProbeOrientationAngle"],"408B":["DS","1","UserSelectedGainY"],"408C":["DS","1","UserSelectedPhase"],"408D":["DS","1","UserSelectedOffsetX"],"408E":["DS","1","UserSelectedOffsetY"],4091:["SQ","1","ChannelSettingsSequence"],4092:["DS","1","ChannelThreshold"],"409A":["SQ","1","ScannerSettingsSequence"],"409B":["ST","1","ScanProcedure"],"409C":["DS","1","TranslationRateX"],"409D":["DS","1","TranslationRateY"],"409F":["DS","1","ChannelOverlap"],"40A0":["LO","1-n","ImageQualityIndicatorType"],"40A1":["LO","1-n","ImageQualityIndicatorMaterial"],"40A2":["LO","1-n","ImageQualityIndicatorSize"],5002:["IS","1","LINACEnergy"],5004:["IS","1","LINACOutput"],5100:["US","1","ActiveAperture"],5101:["DS","1","TotalAperture"],5102:["DS","1","ApertureElevation"],5103:["DS","1","MainLobeAngle"],5104:["DS","1","MainRoofAngle"],5105:["CS","1","ConnectorType"],5106:["SH","1","WedgeModelNumber"],5107:["DS","1","WedgeAngleFloat"],5108:["DS","1","WedgeRoofAngle"],5109:["CS","1","WedgeElement1Position"],"510A":["DS","1","WedgeMaterialVelocity"],"510B":["SH","1","WedgeMaterial"],"510C":["DS","1","WedgeOffsetZ"],"510D":["DS","1","WedgeOriginOffsetX"],"510E":["DS","1","WedgeTimeDelay"],"510F":["SH","1","WedgeName"],5110:["SH","1","WedgeManufacturerName"],5111:["LO","1","WedgeDescription"],5112:["DS","1","NominalBeamAngle"],5113:["DS","1","WedgeOffsetX"],5114:["DS","1","WedgeOffsetY"],5115:["DS","1","WedgeTotalLength"],5116:["DS","1","WedgeInContactLength"],5117:["DS","1","WedgeFrontGap"],5118:["DS","1","WedgeTotalHeight"],5119:["DS","1","WedgeFrontHeight"],"511A":["DS","1","WedgeRearHeight"],"511B":["DS","1","WedgeTotalWidth"],"511C":["DS","1","WedgeInContactWidth"],"511D":["DS","1","WedgeChamferHeight"],"511E":["CS","1","WedgeCurve"],"511F":["DS","1","RadiusAlongWedge"]},"0016":{"0000":["UL","1","GenericGroupLength"],"0001":["DS","1","WhitePoint"],"0002":["DS","3","PrimaryChromaticities"],"0003":["UT","1","BatteryLevel"],"0004":["DS","1","ExposureTimeInSeconds"],"0005":["DS","1","FNumber"],"0006":["IS","1","OECFRows"],"0007":["IS","1","OECFColumns"],"0008":["UC","1-n","OECFColumnNames"],"0009":["DS","1-n","OECFValues"],"000A":["IS","1","SpatialFrequencyResponseRows"],"000B":["IS","1","SpatialFrequencyResponseColumns"],"000C":["UC","1-n","SpatialFrequencyResponseColumnNames"],"000D":["DS","1-n","SpatialFrequencyResponseValues"],"000E":["IS","1","ColorFilterArrayPatternRows"],"000F":["IS","1","ColorFilterArrayPatternColumns"],"0010":["DS","1-n","ColorFilterArrayPatternValues"],"0011":["US","1","FlashFiringStatus"],"0012":["US","1","FlashReturnStatus"],"0013":["US","1","FlashMode"],"0014":["US","1","FlashFunctionPresent"],"0015":["US","1","FlashRedEyeMode"],"0016":["US","1","ExposureProgram"],"0017":["UT","1","SpectralSensitivity"],"0018":["IS","1","PhotographicSensitivity"],"0019":["IS","1","SelfTimerMode"],"001A":["US","1","SensitivityType"],"001B":["IS","1","StandardOutputSensitivity"],"001C":["IS","1","RecommendedExposureIndex"],"001D":["IS","1","ISOSpeed"],"001E":["IS","1","ISOSpeedLatitudeyyy"],"001F":["IS","1","ISOSpeedLatitudezzz"],"0020":["UT","1","EXIFVersion"],"0021":["DS","1","ShutterSpeedValue"],"0022":["DS","1","ApertureValue"],"0023":["DS","1","BrightnessValue"],"0024":["DS","1","ExposureBiasValue"],"0025":["DS","1","MaxApertureValue"],"0026":["DS","1","SubjectDistance"],"0027":["US","1","MeteringMode"],"0028":["US","1","LightSource"],"0029":["DS","1","FocalLength"],"002A":["IS","2-4","SubjectArea"],"002B":["OB","1","MakerNote"],"0030":["DS","1","Temperature"],"0031":["DS","1","Humidity"],"0032":["DS","1","Pressure"],"0033":["DS","1","WaterDepth"],"0034":["DS","1","Acceleration"],"0035":["DS","1","CameraElevationAngle"],"0036":["DS","1-2","FlashEnergy"],"0037":["IS","2","SubjectLocation"],"0038":["DS","1","PhotographicExposureIndex"],"0039":["US","1","SensingMethod"],"003A":["US","1","FileSource"],"003B":["US","1","SceneType"],"0041":["US","1","CustomRendered"],"0042":["US","1","ExposureMode"],"0043":["US","1","WhiteBalance"],"0044":["DS","1","DigitalZoomRatio"],"0045":["IS","1","FocalLengthIn35mmFilm"],"0046":["US","1","SceneCaptureType"],"0047":["US","1","GainControl"],"0048":["US","1","Contrast"],"0049":["US","1","Saturation"],"004A":["US","1","Sharpness"],"004B":["OB","1","DeviceSettingDescription"],"004C":["US","1","SubjectDistanceRange"],"004D":["UT","1","CameraOwnerName"],"004E":["DS","4","LensSpecification"],"004F":["UT","1","LensMake"],"0050":["UT","1","LensModel"],"0051":["UT","1","LensSerialNumber"],"0061":["CS","1","InteroperabilityIndex"],"0062":["OB","1","InteroperabilityVersion"],"0070":["OB","1","GPSVersionID"],"0071":["CS","1","GPSLatitudeRef"],"0072":["DS","3","GPSLatitude"],"0073":["CS","1","GPSLongitudeRef"],"0074":["DS","3","GPSLongitude"],"0075":["US","1","GPSAltitudeRef"],"0076":["DS","1","GPSAltitude"],"0077":["DT","1","GPSTimeStamp"],"0078":["UT","1","GPSSatellites"],"0079":["CS","1","GPSStatus"],"007A":["CS","1","GPSMeasureMode"],"007B":["DS","1","GPSDOP"],"007C":["CS","1","GPSSpeedRef"],"007D":["DS","1","GPSSpeed"],"007E":["CS","1","GPSTrackRef"],"007F":["DS","1","GPSTrack"],"0080":["CS","1","GPSImgDirectionRef"],"0081":["DS","1","GPSImgDirection"],"0082":["UT","1","GPSMapDatum"],"0083":["CS","1","GPSDestLatitudeRef"],"0084":["DS","3","GPSDestLatitude"],"0085":["CS","1","GPSDestLongitudeRef"],"0086":["DS","3","GPSDestLongitude"],"0087":["CS","1","GPSDestBearingRef"],"0088":["DS","1","GPSDestBearing"],"0089":["CS","1","GPSDestDistanceRef"],"008A":["DS","1","GPSDestDistance"],"008B":["OB","1","GPSProcessingMethod"],"008C":["OB","1","GPSAreaInformation"],"008D":["DT","1","GPSDateStamp"],"008E":["IS","1","GPSDifferential"],1001:["CS","1","LightSourcePolarization"],1002:["DS","1","EmitterColorTemperature"],1003:["CS","1","ContactMethod"],1004:["CS","1-n","ImmersionMedia"],1005:["DS","1","OpticalMagnificationFactor"]},"0018":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ContrastBolusAgent"],"0012":["SQ","1","ContrastBolusAgentSequence"],"0013":["FL","1","ContrastBolusT1Relaxivity"],"0014":["SQ","1","ContrastBolusAdministrationRouteSequence"],"0015":["CS","1","BodyPartExamined"],"0020":["CS","1-n","ScanningSequence"],"0021":["CS","1-n","SequenceVariant"],"0022":["CS","1-n","ScanOptions"],"0023":["CS","1","MRAcquisitionType"],"0024":["SH","1","SequenceName"],"0025":["CS","1","AngioFlag"],"0026":["SQ","1","InterventionDrugInformationSequence"],"0027":["TM","1","InterventionDrugStopTime"],"0028":["DS","1","InterventionDrugDose"],"0029":["SQ","1","InterventionDrugCodeSequence"],"002A":["SQ","1","AdditionalDrugSequence"],"0030":["LO","1-n","Radionuclide"],"0031":["LO","1","Radiopharmaceutical"],"0032":["DS","1","EnergyWindowCenterline"],"0033":["DS","1-n","EnergyWindowTotalWidth"],"0034":["LO","1","InterventionDrugName"],"0035":["TM","1","InterventionDrugStartTime"],"0036":["SQ","1","InterventionSequence"],"0037":["CS","1","TherapyType"],"0038":["CS","1","InterventionStatus"],"0039":["CS","1","TherapyDescription"],"003A":["ST","1","InterventionDescription"],"0040":["IS","1","CineRate"],"0042":["CS","1","InitialCineRunState"],"0050":["DS","1","SliceThickness"],"0060":["DS","1","KVP"],"0061":["DS","1",""],"0070":["IS","1","CountsAccumulated"],"0071":["CS","1","AcquisitionTerminationCondition"],"0072":["DS","1","EffectiveDuration"],"0073":["CS","1","AcquisitionStartCondition"],"0074":["IS","1","AcquisitionStartConditionData"],"0075":["IS","1","AcquisitionTerminationConditionData"],"0080":["DS","1","RepetitionTime"],"0081":["DS","1","EchoTime"],"0082":["DS","1","InversionTime"],"0083":["DS","1","NumberOfAverages"],"0084":["DS","1","ImagingFrequency"],"0085":["SH","1","ImagedNucleus"],"0086":["IS","1-n","EchoNumbers"],"0087":["DS","1","MagneticFieldStrength"],"0088":["DS","1","SpacingBetweenSlices"],"0089":["IS","1","NumberOfPhaseEncodingSteps"],"0090":["DS","1","DataCollectionDiameter"],"0091":["IS","1","EchoTrainLength"],"0093":["DS","1","PercentSampling"],"0094":["DS","1","PercentPhaseFieldOfView"],"0095":["DS","1","PixelBandwidth"],1e3:["LO","1","DeviceSerialNumber"],1002:["UI","1","DeviceUID"],1003:["LO","1","DeviceID"],1004:["LO","1","PlateID"],1005:["LO","1","GeneratorID"],1006:["LO","1","GridID"],1007:["LO","1","CassetteID"],1008:["LO","1","GantryID"],1009:["UT","1","UniqueDeviceIdentifier"],"100A":["SQ","1","UDISequence"],"100B":["UI","1-n","ManufacturerDeviceClassUID"],1010:["LO","1","SecondaryCaptureDeviceID"],1011:["LO","1","HardcopyCreationDeviceID"],1012:["DA","1","DateOfSecondaryCapture"],1014:["TM","1","TimeOfSecondaryCapture"],1016:["LO","1","SecondaryCaptureDeviceManufacturer"],1017:["LO","1","HardcopyDeviceManufacturer"],1018:["LO","1","SecondaryCaptureDeviceManufacturerModelName"],1019:["LO","1-n","SecondaryCaptureDeviceSoftwareVersions"],"101A":["LO","1-n","HardcopyDeviceSoftwareVersion"],"101B":["LO","1","HardcopyDeviceManufacturerModelName"],1020:["LO","1-n","SoftwareVersions"],1022:["SH","1","VideoImageFormatAcquired"],1023:["LO","1","DigitalImageFormatAcquired"],1030:["LO","1","ProtocolName"],1040:["LO","1","ContrastBolusRoute"],1041:["DS","1","ContrastBolusVolume"],1042:["TM","1","ContrastBolusStartTime"],1043:["TM","1","ContrastBolusStopTime"],1044:["DS","1","ContrastBolusTotalDose"],1045:["IS","1","SyringeCounts"],1046:["DS","1-n","ContrastFlowRate"],1047:["DS","1-n","ContrastFlowDuration"],1048:["CS","1","ContrastBolusIngredient"],1049:["DS","1","ContrastBolusIngredientConcentration"],1050:["DS","1","SpatialResolution"],1060:["DS","1","TriggerTime"],1061:["LO","1","TriggerSourceOrType"],1062:["IS","1","NominalInterval"],1063:["DS","1","FrameTime"],1064:["LO","1","CardiacFramingType"],1065:["DS","1-n","FrameTimeVector"],1066:["DS","1","FrameDelay"],1067:["DS","1","ImageTriggerDelay"],1068:["DS","1","MultiplexGroupTimeOffset"],1069:["DS","1","TriggerTimeOffset"],"106A":["CS","1","SynchronizationTrigger"],"106C":["US","2","SynchronizationChannel"],"106E":["UL","1","TriggerSamplePosition"],1070:["LO","1","RadiopharmaceuticalRoute"],1071:["DS","1","RadiopharmaceuticalVolume"],1072:["TM","1","RadiopharmaceuticalStartTime"],1073:["TM","1","RadiopharmaceuticalStopTime"],1074:["DS","1","RadionuclideTotalDose"],1075:["DS","1","RadionuclideHalfLife"],1076:["DS","1","RadionuclidePositronFraction"],1077:["DS","1","RadiopharmaceuticalSpecificActivity"],1078:["DT","1","RadiopharmaceuticalStartDateTime"],1079:["DT","1","RadiopharmaceuticalStopDateTime"],1080:["CS","1","BeatRejectionFlag"],1081:["IS","1","LowRRValue"],1082:["IS","1","HighRRValue"],1083:["IS","1","IntervalsAcquired"],1084:["IS","1","IntervalsRejected"],1085:["LO","1","PVCRejection"],1086:["IS","1","SkipBeats"],1088:["IS","1","HeartRate"],1090:["IS","1","CardiacNumberOfImages"],1094:["IS","1","TriggerWindow"],1100:["DS","1","ReconstructionDiameter"],1110:["DS","1","DistanceSourceToDetector"],1111:["DS","1","DistanceSourceToPatient"],1114:["DS","1","EstimatedRadiographicMagnificationFactor"],1120:["DS","1","GantryDetectorTilt"],1121:["DS","1","GantryDetectorSlew"],1130:["DS","1","TableHeight"],1131:["DS","1","TableTraverse"],1134:["CS","1","TableMotion"],1135:["DS","1-n","TableVerticalIncrement"],1136:["DS","1-n","TableLateralIncrement"],1137:["DS","1-n","TableLongitudinalIncrement"],1138:["DS","1","TableAngle"],"113A":["CS","1","TableType"],1140:["CS","1","RotationDirection"],1141:["DS","1","AngularPosition"],1142:["DS","1-n","RadialPosition"],1143:["DS","1","ScanArc"],1144:["DS","1","AngularStep"],1145:["DS","1","CenterOfRotationOffset"],1146:["DS","1-n","RotationOffset"],1147:["CS","1","FieldOfViewShape"],1149:["IS","1-2","FieldOfViewDimensions"],1150:["IS","1","ExposureTime"],1151:["IS","1","XRayTubeCurrent"],1152:["IS","1","Exposure"],1153:["IS","1","ExposureInuAs"],1154:["DS","1","AveragePulseWidth"],1155:["CS","1","RadiationSetting"],1156:["CS","1","RectificationType"],"115A":["CS","1","RadiationMode"],"115E":["DS","1","ImageAndFluoroscopyAreaDoseProduct"],1160:["SH","1","FilterType"],1161:["LO","1-n","TypeOfFilters"],1162:["DS","1","IntensifierSize"],1164:["DS","2","ImagerPixelSpacing"],1166:["CS","1-n","Grid"],1170:["IS","1","GeneratorPower"],1180:["SH","1","CollimatorGridName"],1181:["CS","1","CollimatorType"],1182:["IS","1-2","FocalDistance"],1183:["DS","1-2","XFocusCenter"],1184:["DS","1-2","YFocusCenter"],1190:["DS","1-n","FocalSpots"],1191:["CS","1","AnodeTargetMaterial"],"11A0":["DS","1","BodyPartThickness"],"11A2":["DS","1","CompressionForce"],"11A3":["DS","1","CompressionPressure"],"11A4":["LO","1","PaddleDescription"],"11A5":["DS","1","CompressionContactArea"],"11B0":["LO","1","AcquisitionMode"],"11B1":["LO","1","DoseModeName"],"11B2":["CS","1","AcquiredSubtractionMaskFlag"],"11B3":["CS","1","FluoroscopyPersistenceFlag"],"11B4":["CS","1","FluoroscopyLastImageHoldPersistenceFlag"],"11B5":["IS","1","UpperLimitNumberOfPersistentFluoroscopyFrames"],"11B6":["CS","1","ContrastBolusAutoInjectionTriggerFlag"],"11B7":["FD","1","ContrastBolusInjectionDelay"],"11B8":["SQ","1","XAAcquisitionPhaseDetailsSequence"],"11B9":["FD","1","XAAcquisitionFrameRate"],"11BA":["SQ","1","XAPlaneDetailsSequence"],"11BB":["LO","1","AcquisitionFieldOfViewLabel"],"11BC":["SQ","1","XRayFilterDetailsSequence"],"11BD":["FD","1","XAAcquisitionDuration"],"11BE":["CS","1","ReconstructionPipelineType"],"11BF":["SQ","1","ImageFilterDetailsSequence"],"11C0":["CS","1","AppliedMaskSubtractionFlag"],"11C1":["SQ","1","RequestedSeriesDescriptionCodeSequence"],1200:["DA","1-n","DateOfLastCalibration"],1201:["TM","1-n","TimeOfLastCalibration"],1202:["DT","1","DateTimeOfLastCalibration"],1203:["DT","1","CalibrationDateTime"],1210:["SH","1-n","ConvolutionKernel"],1240:["IS","1-n","UpperLowerPixelValues"],1242:["IS","1","ActualFrameDuration"],1243:["IS","1","CountRate"],1244:["US","1","PreferredPlaybackSequencing"],1250:["SH","1","ReceiveCoilName"],1251:["SH","1","TransmitCoilName"],1260:["SH","1","PlateType"],1261:["LO","1","PhosphorType"],1271:["FD","1","WaterEquivalentDiameter"],1272:["SQ","1","WaterEquivalentDiameterCalculationMethodCodeSequence"],1300:["DS","1","ScanVelocity"],1301:["CS","1-n","WholeBodyTechnique"],1302:["IS","1","ScanLength"],1310:["US","4","AcquisitionMatrix"],1312:["CS","1","InPlanePhaseEncodingDirection"],1314:["DS","1","FlipAngle"],1315:["CS","1","VariableFlipAngleFlag"],1316:["DS","1","SAR"],1318:["DS","1","dBdt"],1320:["FL","1","B1rms"],1400:["LO","1","AcquisitionDeviceProcessingDescription"],1401:["LO","1","AcquisitionDeviceProcessingCode"],1402:["CS","1","CassetteOrientation"],1403:["CS","1","CassetteSize"],1404:["US","1","ExposuresOnPlate"],1405:["IS","1","RelativeXRayExposure"],1411:["DS","1","ExposureIndex"],1412:["DS","1","TargetExposureIndex"],1413:["DS","1","DeviationIndex"],1450:["DS","1","ColumnAngulation"],1460:["DS","1","TomoLayerHeight"],1470:["DS","1","TomoAngle"],1480:["DS","1","TomoTime"],1490:["CS","1","TomoType"],1491:["CS","1","TomoClass"],1495:["IS","1","NumberOfTomosynthesisSourceImages"],1500:["CS","1","PositionerMotion"],1508:["CS","1","PositionerType"],1510:["DS","1","PositionerPrimaryAngle"],1511:["DS","1","PositionerSecondaryAngle"],1520:["DS","1-n","PositionerPrimaryAngleIncrement"],1521:["DS","1-n","PositionerSecondaryAngleIncrement"],1530:["DS","1","DetectorPrimaryAngle"],1531:["DS","1","DetectorSecondaryAngle"],1600:["CS","1-3","ShutterShape"],1602:["IS","1","ShutterLeftVerticalEdge"],1604:["IS","1","ShutterRightVerticalEdge"],1606:["IS","1","ShutterUpperHorizontalEdge"],1608:["IS","1","ShutterLowerHorizontalEdge"],1610:["IS","2","CenterOfCircularShutter"],1612:["IS","1","RadiusOfCircularShutter"],1620:["IS","2-2n","VerticesOfThePolygonalShutter"],1622:["US","1","ShutterPresentationValue"],1623:["US","1","ShutterOverlayGroup"],1624:["US","3","ShutterPresentationColorCIELabValue"],1630:["CS","1","OutlineShapeType"],1631:["FD","1","OutlineLeftVerticalEdge"],1632:["FD","1","OutlineRightVerticalEdge"],1633:["FD","1","OutlineUpperHorizontalEdge"],1634:["FD","1","OutlineLowerHorizontalEdge"],1635:["FD","2","CenterOfCircularOutline"],1636:["FD","1","DiameterOfCircularOutline"],1637:["UL","1","NumberOfPolygonalVertices"],1638:["OF","1","VerticesOfThePolygonalOutline"],1700:["CS","1-3","CollimatorShape"],1702:["IS","1","CollimatorLeftVerticalEdge"],1704:["IS","1","CollimatorRightVerticalEdge"],1706:["IS","1","CollimatorUpperHorizontalEdge"],1708:["IS","1","CollimatorLowerHorizontalEdge"],1710:["IS","2","CenterOfCircularCollimator"],1712:["IS","1","RadiusOfCircularCollimator"],1720:["IS","2-2n","VerticesOfThePolygonalCollimator"],1800:["CS","1","AcquisitionTimeSynchronized"],1801:["SH","1","TimeSource"],1802:["CS","1","TimeDistributionProtocol"],1803:["LO","1","NTPSourceAddress"],2001:["IS","1-n","PageNumberVector"],2002:["SH","1-n","FrameLabelVector"],2003:["DS","1-n","FramePrimaryAngleVector"],2004:["DS","1-n","FrameSecondaryAngleVector"],2005:["DS","1-n","SliceLocationVector"],2006:["SH","1-n","DisplayWindowLabelVector"],2010:["DS","2","NominalScannedPixelSpacing"],2020:["CS","1","DigitizingDeviceTransportDirection"],2030:["DS","1","RotationOfScannedFilm"],2041:["SQ","1","BiopsyTargetSequence"],2042:["UI","1","TargetUID"],2043:["FL","2","LocalizingCursorPosition"],2044:["FL","3","CalculatedTargetPosition"],2045:["SH","1","TargetLabel"],2046:["FL","1","DisplayedZValue"],3100:["CS","1","IVUSAcquisition"],3101:["DS","1","IVUSPullbackRate"],3102:["DS","1","IVUSGatedRate"],3103:["IS","1","IVUSPullbackStartFrameNumber"],3104:["IS","1","IVUSPullbackStopFrameNumber"],3105:["IS","1-n","LesionNumber"],4e3:["LT","1","AcquisitionComments"],5e3:["SH","1-n","OutputPower"],5010:["LO","1-n","TransducerData"],5011:["SQ","1","TransducerIdentificationSequence"],5012:["DS","1","FocusDepth"],5020:["LO","1","ProcessingFunction"],5021:["LO","1","PostprocessingFunction"],5022:["DS","1","MechanicalIndex"],5024:["DS","1","BoneThermalIndex"],5026:["DS","1","CranialThermalIndex"],5027:["DS","1","SoftTissueThermalIndex"],5028:["DS","1","SoftTissueFocusThermalIndex"],5029:["DS","1","SoftTissueSurfaceThermalIndex"],5030:["DS","1","DynamicRange"],5040:["DS","1","TotalGain"],5050:["IS","1","DepthOfScanField"],5100:["CS","1","PatientPosition"],5101:["CS","1","ViewPosition"],5104:["SQ","1","ProjectionEponymousNameCodeSequence"],5210:["DS","6","ImageTransformationMatrix"],5212:["DS","3","ImageTranslationVector"],6e3:["DS","1","Sensitivity"],6011:["SQ","1","SequenceOfUltrasoundRegions"],6012:["US","1","RegionSpatialFormat"],6014:["US","1","RegionDataType"],6016:["UL","1","RegionFlags"],6018:["UL","1","RegionLocationMinX0"],"601A":["UL","1","RegionLocationMinY0"],"601C":["UL","1","RegionLocationMaxX1"],"601E":["UL","1","RegionLocationMaxY1"],6020:["SL","1","ReferencePixelX0"],6022:["SL","1","ReferencePixelY0"],6024:["US","1","PhysicalUnitsXDirection"],6026:["US","1","PhysicalUnitsYDirection"],6028:["FD","1","ReferencePixelPhysicalValueX"],"602A":["FD","1","ReferencePixelPhysicalValueY"],"602C":["FD","1","PhysicalDeltaX"],"602E":["FD","1","PhysicalDeltaY"],6030:["UL","1","TransducerFrequency"],6031:["CS","1","TransducerType"],6032:["UL","1","PulseRepetitionFrequency"],6034:["FD","1","DopplerCorrectionAngle"],6036:["FD","1","SteeringAngle"],6038:["UL","1","DopplerSampleVolumeXPositionRetired"],6039:["SL","1","DopplerSampleVolumeXPosition"],"603A":["UL","1","DopplerSampleVolumeYPositionRetired"],"603B":["SL","1","DopplerSampleVolumeYPosition"],"603C":["UL","1","TMLinePositionX0Retired"],"603D":["SL","1","TMLinePositionX0"],"603E":["UL","1","TMLinePositionY0Retired"],"603F":["SL","1","TMLinePositionY0"],6040:["UL","1","TMLinePositionX1Retired"],6041:["SL","1","TMLinePositionX1"],6042:["UL","1","TMLinePositionY1Retired"],6043:["SL","1","TMLinePositionY1"],6044:["US","1","PixelComponentOrganization"],6046:["UL","1","PixelComponentMask"],6048:["UL","1","PixelComponentRangeStart"],"604A":["UL","1","PixelComponentRangeStop"],"604C":["US","1","PixelComponentPhysicalUnits"],"604E":["US","1","PixelComponentDataType"],6050:["UL","1","NumberOfTableBreakPoints"],6052:["UL","1-n","TableOfXBreakPoints"],6054:["FD","1-n","TableOfYBreakPoints"],6056:["UL","1","NumberOfTableEntries"],6058:["UL","1-n","TableOfPixelValues"],"605A":["FL","1-n","TableOfParameterValues"],6060:["FL","1-n","RWaveTimeVector"],6070:["US","1","ActiveImageAreaOverlayGroup"],7e3:["CS","1","DetectorConditionsNominalFlag"],7001:["DS","1","DetectorTemperature"],7004:["CS","1","DetectorType"],7005:["CS","1","DetectorConfiguration"],7006:["LT","1","DetectorDescription"],7008:["LT","1","DetectorMode"],"700A":["SH","1","DetectorID"],"700C":["DA","1","DateOfLastDetectorCalibration"],"700E":["TM","1","TimeOfLastDetectorCalibration"],7010:["IS","1","ExposuresOnDetectorSinceLastCalibration"],7011:["IS","1","ExposuresOnDetectorSinceManufactured"],7012:["DS","1","DetectorTimeSinceLastExposure"],7014:["DS","1","DetectorActiveTime"],7016:["DS","1","DetectorActivationOffsetFromExposure"],"701A":["DS","2","DetectorBinning"],7020:["DS","2","DetectorElementPhysicalSize"],7022:["DS","2","DetectorElementSpacing"],7024:["CS","1","DetectorActiveShape"],7026:["DS","1-2","DetectorActiveDimensions"],7028:["DS","2","DetectorActiveOrigin"],"702A":["LO","1","DetectorManufacturerName"],"702B":["LO","1","DetectorManufacturerModelName"],7030:["DS","2","FieldOfViewOrigin"],7032:["DS","1","FieldOfViewRotation"],7034:["CS","1","FieldOfViewHorizontalFlip"],7036:["FL","2","PixelDataAreaOriginRelativeToFOV"],7038:["FL","1","PixelDataAreaRotationAngleRelativeToFOV"],7040:["LT","1","GridAbsorbingMaterial"],7041:["LT","1","GridSpacingMaterial"],7042:["DS","1","GridThickness"],7044:["DS","1","GridPitch"],7046:["IS","2","GridAspectRatio"],7048:["DS","1","GridPeriod"],"704C":["DS","1","GridFocalDistance"],7050:["CS","1-n","FilterMaterial"],7052:["DS","1-n","FilterThicknessMinimum"],7054:["DS","1-n","FilterThicknessMaximum"],7056:["FL","1-n","FilterBeamPathLengthMinimum"],7058:["FL","1-n","FilterBeamPathLengthMaximum"],7060:["CS","1","ExposureControlMode"],7062:["LT","1","ExposureControlModeDescription"],7064:["CS","1","ExposureStatus"],7065:["DS","1","PhototimerSetting"],8150:["DS","1","ExposureTimeInuS"],8151:["DS","1","XRayTubeCurrentInuA"],9004:["CS","1","ContentQualification"],9005:["SH","1","PulseSequenceName"],9006:["SQ","1","MRImagingModifierSequence"],9008:["CS","1","EchoPulseSequence"],9009:["CS","1","InversionRecovery"],9010:["CS","1","FlowCompensation"],9011:["CS","1","MultipleSpinEcho"],9012:["CS","1","MultiPlanarExcitation"],9014:["CS","1","PhaseContrast"],9015:["CS","1","TimeOfFlightContrast"],9016:["CS","1","Spoiling"],9017:["CS","1","SteadyStatePulseSequence"],9018:["CS","1","EchoPlanarPulseSequence"],9019:["FD","1","TagAngleFirstAxis"],9020:["CS","1","MagnetizationTransfer"],9021:["CS","1","T2Preparation"],9022:["CS","1","BloodSignalNulling"],9024:["CS","1","SaturationRecovery"],9025:["CS","1","SpectrallySelectedSuppression"],9026:["CS","1","SpectrallySelectedExcitation"],9027:["CS","1","SpatialPresaturation"],9028:["CS","1","Tagging"],9029:["CS","1","OversamplingPhase"],9030:["FD","1","TagSpacingFirstDimension"],9032:["CS","1","GeometryOfKSpaceTraversal"],9033:["CS","1","SegmentedKSpaceTraversal"],9034:["CS","1","RectilinearPhaseEncodeReordering"],9035:["FD","1","TagThickness"],9036:["CS","1","PartialFourierDirection"],9037:["CS","1","CardiacSynchronizationTechnique"],9041:["LO","1","ReceiveCoilManufacturerName"],9042:["SQ","1","MRReceiveCoilSequence"],9043:["CS","1","ReceiveCoilType"],9044:["CS","1","QuadratureReceiveCoil"],9045:["SQ","1","MultiCoilDefinitionSequence"],9046:["LO","1","MultiCoilConfiguration"],9047:["SH","1","MultiCoilElementName"],9048:["CS","1","MultiCoilElementUsed"],9049:["SQ","1","MRTransmitCoilSequence"],9050:["LO","1","TransmitCoilManufacturerName"],9051:["CS","1","TransmitCoilType"],9052:["FD","1-2","SpectralWidth"],9053:["FD","1-2","ChemicalShiftReference"],9054:["CS","1","VolumeLocalizationTechnique"],9058:["US","1","MRAcquisitionFrequencyEncodingSteps"],9059:["CS","1","Decoupling"],9060:["CS","1-2","DecoupledNucleus"],9061:["FD","1-2","DecouplingFrequency"],9062:["CS","1","DecouplingMethod"],9063:["FD","1-2","DecouplingChemicalShiftReference"],9064:["CS","1","KSpaceFiltering"],9065:["CS","1-2","TimeDomainFiltering"],9066:["US","1-2","NumberOfZeroFills"],9067:["CS","1","BaselineCorrection"],9069:["FD","1","ParallelReductionFactorInPlane"],9070:["FD","1","CardiacRRIntervalSpecified"],9073:["FD","1","AcquisitionDuration"],9074:["DT","1","FrameAcquisitionDateTime"],9075:["CS","1","DiffusionDirectionality"],9076:["SQ","1","DiffusionGradientDirectionSequence"],9077:["CS","1","ParallelAcquisition"],9078:["CS","1","ParallelAcquisitionTechnique"],9079:["FD","1-n","InversionTimes"],9080:["ST","1","MetaboliteMapDescription"],9081:["CS","1","PartialFourier"],9082:["FD","1","EffectiveEchoTime"],9083:["SQ","1","MetaboliteMapCodeSequence"],9084:["SQ","1","ChemicalShiftSequence"],9085:["CS","1","CardiacSignalSource"],9087:["FD","1","DiffusionBValue"],9089:["FD","3","DiffusionGradientOrientation"],9090:["FD","3","VelocityEncodingDirection"],9091:["FD","1","VelocityEncodingMinimumValue"],9092:["SQ","1","VelocityEncodingAcquisitionSequence"],9093:["US","1","NumberOfKSpaceTrajectories"],9094:["CS","1","CoverageOfKSpace"],9095:["UL","1","SpectroscopyAcquisitionPhaseRows"],9096:["FD","1","ParallelReductionFactorInPlaneRetired"],9098:["FD","1-2","TransmitterFrequency"],9100:["CS","1-2","ResonantNucleus"],9101:["CS","1","FrequencyCorrection"],9103:["SQ","1","MRSpectroscopyFOVGeometrySequence"],9104:["FD","1","SlabThickness"],9105:["FD","3","SlabOrientation"],9106:["FD","3","MidSlabPosition"],9107:["SQ","1","MRSpatialSaturationSequence"],9112:["SQ","1","MRTimingAndRelatedParametersSequence"],9114:["SQ","1","MREchoSequence"],9115:["SQ","1","MRModifierSequence"],9117:["SQ","1","MRDiffusionSequence"],9118:["SQ","1","CardiacSynchronizationSequence"],9119:["SQ","1","MRAveragesSequence"],9125:["SQ","1","MRFOVGeometrySequence"],9126:["SQ","1","VolumeLocalizationSequence"],9127:["UL","1","SpectroscopyAcquisitionDataColumns"],9147:["CS","1","DiffusionAnisotropyType"],9151:["DT","1","FrameReferenceDateTime"],9152:["SQ","1","MRMetaboliteMapSequence"],9155:["FD","1","ParallelReductionFactorOutOfPlane"],9159:["UL","1","SpectroscopyAcquisitionOutOfPlanePhaseSteps"],9166:["CS","1","BulkMotionStatus"],9168:["FD","1","ParallelReductionFactorSecondInPlane"],9169:["CS","1","CardiacBeatRejectionTechnique"],9170:["CS","1","RespiratoryMotionCompensationTechnique"],9171:["CS","1","RespiratorySignalSource"],9172:["CS","1","BulkMotionCompensationTechnique"],9173:["CS","1","BulkMotionSignalSource"],9174:["CS","1","ApplicableSafetyStandardAgency"],9175:["LO","1","ApplicableSafetyStandardDescription"],9176:["SQ","1","OperatingModeSequence"],9177:["CS","1","OperatingModeType"],9178:["CS","1","OperatingMode"],9179:["CS","1","SpecificAbsorptionRateDefinition"],9180:["CS","1","GradientOutputType"],9181:["FD","1","SpecificAbsorptionRateValue"],9182:["FD","1","GradientOutput"],9183:["CS","1","FlowCompensationDirection"],9184:["FD","1","TaggingDelay"],9185:["ST","1","RespiratoryMotionCompensationTechniqueDescription"],9186:["SH","1","RespiratorySignalSourceID"],9195:["FD","1","ChemicalShiftMinimumIntegrationLimitInHz"],9196:["FD","1","ChemicalShiftMaximumIntegrationLimitInHz"],9197:["SQ","1","MRVelocityEncodingSequence"],9198:["CS","1","FirstOrderPhaseCorrection"],9199:["CS","1","WaterReferencedPhaseCorrection"],9200:["CS","1","MRSpectroscopyAcquisitionType"],9214:["CS","1","RespiratoryCyclePosition"],9217:["FD","1","VelocityEncodingMaximumValue"],9218:["FD","1","TagSpacingSecondDimension"],9219:["SS","1","TagAngleSecondAxis"],9220:["FD","1","FrameAcquisitionDuration"],9226:["SQ","1","MRImageFrameTypeSequence"],9227:["SQ","1","MRSpectroscopyFrameTypeSequence"],9231:["US","1","MRAcquisitionPhaseEncodingStepsInPlane"],9232:["US","1","MRAcquisitionPhaseEncodingStepsOutOfPlane"],9234:["UL","1","SpectroscopyAcquisitionPhaseColumns"],9236:["CS","1","CardiacCyclePosition"],9239:["SQ","1","SpecificAbsorptionRateSequence"],9240:["US","1","RFEchoTrainLength"],9241:["US","1","GradientEchoTrainLength"],9250:["CS","1","ArterialSpinLabelingContrast"],9251:["SQ","1","MRArterialSpinLabelingSequence"],9252:["LO","1","ASLTechniqueDescription"],9253:["US","1","ASLSlabNumber"],9254:["FD","1","ASLSlabThickness"],9255:["FD","3","ASLSlabOrientation"],9256:["FD","3","ASLMidSlabPosition"],9257:["CS","1","ASLContext"],9258:["UL","1","ASLPulseTrainDuration"],9259:["CS","1","ASLCrusherFlag"],"925A":["FD","1","ASLCrusherFlowLimit"],"925B":["LO","1","ASLCrusherDescription"],"925C":["CS","1","ASLBolusCutoffFlag"],"925D":["SQ","1","ASLBolusCutoffTimingSequence"],"925E":["LO","1","ASLBolusCutoffTechnique"],"925F":["UL","1","ASLBolusCutoffDelayTime"],9260:["SQ","1","ASLSlabSequence"],9295:["FD","1","ChemicalShiftMinimumIntegrationLimitInppm"],9296:["FD","1","ChemicalShiftMaximumIntegrationLimitInppm"],9297:["CS","1","WaterReferenceAcquisition"],9298:["IS","1","EchoPeakPosition"],9301:["SQ","1","CTAcquisitionTypeSequence"],9302:["CS","1","AcquisitionType"],9303:["FD","1","TubeAngle"],9304:["SQ","1","CTAcquisitionDetailsSequence"],9305:["FD","1","RevolutionTime"],9306:["FD","1","SingleCollimationWidth"],9307:["FD","1","TotalCollimationWidth"],9308:["SQ","1","CTTableDynamicsSequence"],9309:["FD","1","TableSpeed"],9310:["FD","1","TableFeedPerRotation"],9311:["FD","1","SpiralPitchFactor"],9312:["SQ","1","CTGeometrySequence"],9313:["FD","3","DataCollectionCenterPatient"],9314:["SQ","1","CTReconstructionSequence"],9315:["CS","1","ReconstructionAlgorithm"],9316:["CS","1","ConvolutionKernelGroup"],9317:["FD","2","ReconstructionFieldOfView"],9318:["FD","3","ReconstructionTargetCenterPatient"],9319:["FD","1","ReconstructionAngle"],9320:["SH","1","ImageFilter"],9321:["SQ","1","CTExposureSequence"],9322:["FD","2","ReconstructionPixelSpacing"],9323:["CS","1-n","ExposureModulationType"],9324:["FD","1","EstimatedDoseSaving"],9325:["SQ","1","CTXRayDetailsSequence"],9326:["SQ","1","CTPositionSequence"],9327:["FD","1","TablePosition"],9328:["FD","1","ExposureTimeInms"],9329:["SQ","1","CTImageFrameTypeSequence"],9330:["FD","1","XRayTubeCurrentInmA"],9332:["FD","1","ExposureInmAs"],9333:["CS","1","ConstantVolumeFlag"],9334:["CS","1","FluoroscopyFlag"],9335:["FD","1","DistanceSourceToDataCollectionCenter"],9337:["US","1","ContrastBolusAgentNumber"],9338:["SQ","1","ContrastBolusIngredientCodeSequence"],9340:["SQ","1","ContrastAdministrationProfileSequence"],9341:["SQ","1","ContrastBolusUsageSequence"],9342:["CS","1","ContrastBolusAgentAdministered"],9343:["CS","1","ContrastBolusAgentDetected"],9344:["CS","1","ContrastBolusAgentPhase"],9345:["FD","1","CTDIvol"],9346:["SQ","1","CTDIPhantomTypeCodeSequence"],9351:["FL","1","CalciumScoringMassFactorPatient"],9352:["FL","3","CalciumScoringMassFactorDevice"],9353:["FL","1","EnergyWeightingFactor"],9360:["SQ","1","CTAdditionalXRaySourceSequence"],9361:["CS","1","MultienergyCTAcquisition"],9362:["SQ","1","MultienergyCTAcquisitionSequence"],9363:["SQ","1","MultienergyCTProcessingSequence"],9364:["SQ","1","MultienergyCTCharacteristicsSequence"],9365:["SQ","1","MultienergyCTXRaySourceSequence"],9366:["US","1","XRaySourceIndex"],9367:["UC","1","XRaySourceID"],9368:["CS","1","MultienergySourceTechnique"],9369:["DT","1","SourceStartDateTime"],"936A":["DT","1","SourceEndDateTime"],"936B":["US","1","SwitchingPhaseNumber"],"936C":["DS","1","SwitchingPhaseNominalDuration"],"936D":["DS","1","SwitchingPhaseTransitionDuration"],"936E":["DS","1","EffectiveBinEnergy"],"936F":["SQ","1","MultienergyCTXRayDetectorSequence"],9370:["US","1","XRayDetectorIndex"],9371:["UC","1","XRayDetectorID"],9372:["CS","1","MultienergyDetectorType"],9373:["ST","1","XRayDetectorLabel"],9374:["DS","1","NominalMaxEnergy"],9375:["DS","1","NominalMinEnergy"],9376:["US","1-n","ReferencedXRayDetectorIndex"],9377:["US","1-n","ReferencedXRaySourceIndex"],9378:["US","1-n","ReferencedPathIndex"],9379:["SQ","1","MultienergyCTPathSequence"],"937A":["US","1","MultienergyCTPathIndex"],"937B":["UT","1","MultienergyAcquisitionDescription"],"937C":["FD","1","MonoenergeticEnergyEquivalent"],"937D":["SQ","1","MaterialCodeSequence"],"937E":["CS","1","DecompositionMethod"],"937F":["UT","1","DecompositionDescription"],9380:["SQ","1","DecompositionAlgorithmIdentificationSequence"],9381:["SQ","1","DecompositionMaterialSequence"],9382:["SQ","1","MaterialAttenuationSequence"],9383:["DS","1","PhotonEnergy"],9384:["DS","1","XRayMassAttenuationCoefficient"],9401:["SQ","1","ProjectionPixelCalibrationSequence"],9402:["FL","1","DistanceSourceToIsocenter"],9403:["FL","1","DistanceObjectToTableTop"],9404:["FL","2","ObjectPixelSpacingInCenterOfBeam"],9405:["SQ","1","PositionerPositionSequence"],9406:["SQ","1","TablePositionSequence"],9407:["SQ","1","CollimatorShapeSequence"],9410:["CS","1","PlanesInAcquisition"],9412:["SQ","1","XAXRFFrameCharacteristicsSequence"],9417:["SQ","1","FrameAcquisitionSequence"],9420:["CS","1","XRayReceptorType"],9423:["LO","1","AcquisitionProtocolName"],9424:["LT","1","AcquisitionProtocolDescription"],9425:["CS","1","ContrastBolusIngredientOpaque"],9426:["FL","1","DistanceReceptorPlaneToDetectorHousing"],9427:["CS","1","IntensifierActiveShape"],9428:["FL","1-2","IntensifierActiveDimensions"],9429:["FL","2","PhysicalDetectorSize"],9430:["FL","2","PositionOfIsocenterProjection"],9432:["SQ","1","FieldOfViewSequence"],9433:["LO","1","FieldOfViewDescription"],9434:["SQ","1","ExposureControlSensingRegionsSequence"],9435:["CS","1","ExposureControlSensingRegionShape"],9436:["SS","1","ExposureControlSensingRegionLeftVerticalEdge"],9437:["SS","1","ExposureControlSensingRegionRightVerticalEdge"],9438:["SS","1","ExposureControlSensingRegionUpperHorizontalEdge"],9439:["SS","1","ExposureControlSensingRegionLowerHorizontalEdge"],9440:["SS","2","CenterOfCircularExposureControlSensingRegion"],9441:["US","1","RadiusOfCircularExposureControlSensingRegion"],9442:["SS","2-n","VerticesOfThePolygonalExposureControlSensingRegion"],9445:["","",""],9447:["FL","1","ColumnAngulationPatient"],9449:["FL","1","BeamAngle"],9451:["SQ","1","FrameDetectorParametersSequence"],9452:["FL","1","CalculatedAnatomyThickness"],9455:["SQ","1","CalibrationSequence"],9456:["SQ","1","ObjectThicknessSequence"],9457:["CS","1","PlaneIdentification"],9461:["FL","1-2","FieldOfViewDimensionsInFloat"],9462:["SQ","1","IsocenterReferenceSystemSequence"],9463:["FL","1","PositionerIsocenterPrimaryAngle"],9464:["FL","1","PositionerIsocenterSecondaryAngle"],9465:["FL","1","PositionerIsocenterDetectorRotationAngle"],9466:["FL","1","TableXPositionToIsocenter"],9467:["FL","1","TableYPositionToIsocenter"],9468:["FL","1","TableZPositionToIsocenter"],9469:["FL","1","TableHorizontalRotationAngle"],9470:["FL","1","TableHeadTiltAngle"],9471:["FL","1","TableCradleTiltAngle"],9472:["SQ","1","FrameDisplayShutterSequence"],9473:["FL","1","AcquiredImageAreaDoseProduct"],9474:["CS","1","CArmPositionerTabletopRelationship"],9476:["SQ","1","XRayGeometrySequence"],9477:["SQ","1","IrradiationEventIdentificationSequence"],9504:["SQ","1","XRay3DFrameTypeSequence"],9506:["SQ","1","ContributingSourcesSequence"],9507:["SQ","1","XRay3DAcquisitionSequence"],9508:["FL","1","PrimaryPositionerScanArc"],9509:["FL","1","SecondaryPositionerScanArc"],9510:["FL","1","PrimaryPositionerScanStartAngle"],9511:["FL","1","SecondaryPositionerScanStartAngle"],9514:["FL","1","PrimaryPositionerIncrement"],9515:["FL","1","SecondaryPositionerIncrement"],9516:["DT","1","StartAcquisitionDateTime"],9517:["DT","1","EndAcquisitionDateTime"],9518:["SS","1","PrimaryPositionerIncrementSign"],9519:["SS","1","SecondaryPositionerIncrementSign"],9524:["LO","1","ApplicationName"],9525:["LO","1","ApplicationVersion"],9526:["LO","1","ApplicationManufacturer"],9527:["CS","1","AlgorithmType"],9528:["LO","1","AlgorithmDescription"],9530:["SQ","1","XRay3DReconstructionSequence"],9531:["LO","1","ReconstructionDescription"],9538:["SQ","1","PerProjectionAcquisitionSequence"],9541:["SQ","1","DetectorPositionSequence"],9542:["SQ","1","XRayAcquisitionDoseSequence"],9543:["FD","1","XRaySourceIsocenterPrimaryAngle"],9544:["FD","1","XRaySourceIsocenterSecondaryAngle"],9545:["FD","1","BreastSupportIsocenterPrimaryAngle"],9546:["FD","1","BreastSupportIsocenterSecondaryAngle"],9547:["FD","1","BreastSupportXPositionToIsocenter"],9548:["FD","1","BreastSupportYPositionToIsocenter"],9549:["FD","1","BreastSupportZPositionToIsocenter"],9550:["FD","1","DetectorIsocenterPrimaryAngle"],9551:["FD","1","DetectorIsocenterSecondaryAngle"],9552:["FD","1","DetectorXPositionToIsocenter"],9553:["FD","1","DetectorYPositionToIsocenter"],9554:["FD","1","DetectorZPositionToIsocenter"],9555:["SQ","1","XRayGridSequence"],9556:["SQ","1","XRayFilterSequence"],9557:["FD","3","DetectorActiveAreaTLHCPosition"],9558:["FD","6","DetectorActiveAreaOrientation"],9559:["CS","1","PositionerPrimaryAngleDirection"],9601:["SQ","1","DiffusionBMatrixSequence"],9602:["FD","1","DiffusionBValueXX"],9603:["FD","1","DiffusionBValueXY"],9604:["FD","1","DiffusionBValueXZ"],9605:["FD","1","DiffusionBValueYY"],9606:["FD","1","DiffusionBValueYZ"],9607:["FD","1","DiffusionBValueZZ"],9621:["SQ","1","FunctionalMRSequence"],9622:["CS","1","FunctionalSettlingPhaseFramesPresent"],9623:["DT","1","FunctionalSyncPulse"],9624:["CS","1","SettlingPhaseFrame"],9701:["DT","1","DecayCorrectionDateTime"],9715:["FD","1","StartDensityThreshold"],9716:["FD","1","StartRelativeDensityDifferenceThreshold"],9717:["FD","1","StartCardiacTriggerCountThreshold"],9718:["FD","1","StartRespiratoryTriggerCountThreshold"],9719:["FD","1","TerminationCountsThreshold"],9720:["FD","1","TerminationDensityThreshold"],9721:["FD","1","TerminationRelativeDensityThreshold"],9722:["FD","1","TerminationTimeThreshold"],9723:["FD","1","TerminationCardiacTriggerCountThreshold"],9724:["FD","1","TerminationRespiratoryTriggerCountThreshold"],9725:["CS","1","DetectorGeometry"],9726:["FD","1","TransverseDetectorSeparation"],9727:["FD","1","AxialDetectorDimension"],9729:["US","1","RadiopharmaceuticalAgentNumber"],9732:["SQ","1","PETFrameAcquisitionSequence"],9733:["SQ","1","PETDetectorMotionDetailsSequence"],9734:["SQ","1","PETTableDynamicsSequence"],9735:["SQ","1","PETPositionSequence"],9736:["SQ","1","PETFrameCorrectionFactorsSequence"],9737:["SQ","1","RadiopharmaceuticalUsageSequence"],9738:["CS","1","AttenuationCorrectionSource"],9739:["US","1","NumberOfIterations"],9740:["US","1","NumberOfSubsets"],9749:["SQ","1","PETReconstructionSequence"],9751:["SQ","1","PETFrameTypeSequence"],9755:["CS","1","TimeOfFlightInformationUsed"],9756:["CS","1","ReconstructionType"],9758:["CS","1","DecayCorrected"],9759:["CS","1","AttenuationCorrected"],9760:["CS","1","ScatterCorrected"],9761:["CS","1","DeadTimeCorrected"],9762:["CS","1","GantryMotionCorrected"],9763:["CS","1","PatientMotionCorrected"],9764:["CS","1","CountLossNormalizationCorrected"],9765:["CS","1","RandomsCorrected"],9766:["CS","1","NonUniformRadialSamplingCorrected"],9767:["CS","1","SensitivityCalibrated"],9768:["CS","1","DetectorNormalizationCorrection"],9769:["CS","1","IterativeReconstructionMethod"],9770:["CS","1","AttenuationCorrectionTemporalRelationship"],9771:["SQ","1","PatientPhysiologicalStateSequence"],9772:["SQ","1","PatientPhysiologicalStateCodeSequence"],9801:["FD","1-n","DepthsOfFocus"],9803:["SQ","1","ExcludedIntervalsSequence"],9804:["DT","1","ExclusionStartDateTime"],9805:["FD","1","ExclusionDuration"],9806:["SQ","1","USImageDescriptionSequence"],9807:["SQ","1","ImageDataTypeSequence"],9808:["CS","1","DataType"],9809:["SQ","1","TransducerScanPatternCodeSequence"],"980B":["CS","1","AliasedDataType"],"980C":["CS","1","PositionMeasuringDeviceUsed"],"980D":["SQ","1","TransducerGeometryCodeSequence"],"980E":["SQ","1","TransducerBeamSteeringCodeSequence"],"980F":["SQ","1","TransducerApplicationCodeSequence"],9810:["xs","1","ZeroVelocityPixelValue"],9900:["LO","1","ReferenceLocationLabel"],9901:["UT","1","ReferenceLocationDescription"],9902:["SQ","1","ReferenceBasisCodeSequence"],9903:["SQ","1","ReferenceGeometryCodeSequence"],9904:["DS","1","OffsetDistance"],9905:["CS","1","OffsetDirection"],9906:["SQ","1","PotentialScheduledProtocolCodeSequence"],9907:["SQ","1","PotentialRequestedProcedureCodeSequence"],9908:["UC","1-n","PotentialReasonsForProcedure"],9909:["SQ","1","PotentialReasonsForProcedureCodeSequence"],"990A":["UC","1-n","PotentialDiagnosticTasks"],"990B":["SQ","1","ContraindicationsCodeSequence"],"990C":["SQ","1","ReferencedDefinedProtocolSequence"],"990D":["SQ","1","ReferencedPerformedProtocolSequence"],"990E":["SQ","1","PredecessorProtocolSequence"],"990F":["UT","1","ProtocolPlanningInformation"],9910:["UT","1","ProtocolDesignRationale"],9911:["SQ","1","PatientSpecificationSequence"],9912:["SQ","1","ModelSpecificationSequence"],9913:["SQ","1","ParametersSpecificationSequence"],9914:["SQ","1","InstructionSequence"],9915:["US","1","InstructionIndex"],9916:["LO","1","InstructionText"],9917:["UT","1","InstructionDescription"],9918:["CS","1","InstructionPerformedFlag"],9919:["DT","1","InstructionPerformedDateTime"],"991A":["UT","1","InstructionPerformanceComment"],"991B":["SQ","1","PatientPositioningInstructionSequence"],"991C":["SQ","1","PositioningMethodCodeSequence"],"991D":["SQ","1","PositioningLandmarkSequence"],"991E":["UI","1","TargetFrameOfReferenceUID"],"991F":["SQ","1","AcquisitionProtocolElementSpecificationSequence"],9920:["SQ","1","AcquisitionProtocolElementSequence"],9921:["US","1","ProtocolElementNumber"],9922:["LO","1","ProtocolElementName"],9923:["UT","1","ProtocolElementCharacteristicsSummary"],9924:["UT","1","ProtocolElementPurpose"],9930:["CS","1","AcquisitionMotion"],9931:["SQ","1","AcquisitionStartLocationSequence"],9932:["SQ","1","AcquisitionEndLocationSequence"],9933:["SQ","1","ReconstructionProtocolElementSpecificationSequence"],9934:["SQ","1","ReconstructionProtocolElementSequence"],9935:["SQ","1","StorageProtocolElementSpecificationSequence"],9936:["SQ","1","StorageProtocolElementSequence"],9937:["LO","1","RequestedSeriesDescription"],9938:["US","1-n","SourceAcquisitionProtocolElementNumber"],9939:["US","1-n","SourceAcquisitionBeamNumber"],"993A":["US","1-n","SourceReconstructionProtocolElementNumber"],"993B":["SQ","1","ReconstructionStartLocationSequence"],"993C":["SQ","1","ReconstructionEndLocationSequence"],"993D":["SQ","1","ReconstructionAlgorithmSequence"],"993E":["SQ","1","ReconstructionTargetCenterLocationSequence"],9941:["UT","1","ImageFilterDescription"],9942:["FD","1","CTDIvolNotificationTrigger"],9943:["FD","1","DLPNotificationTrigger"],9944:["CS","1","AutoKVPSelectionType"],9945:["FD","1","AutoKVPUpperBound"],9946:["FD","1","AutoKVPLowerBound"],9947:["CS","1","ProtocolDefinedPatientPosition"],A001:["SQ","1","ContributingEquipmentSequence"],A002:["DT","1","ContributionDateTime"],A003:["ST","1","ContributionDescription"]},"0020":{"0000":["UL","1","GenericGroupLength"],"000D":["UI","1","StudyInstanceUID"],"000E":["UI","1","SeriesInstanceUID"],"0010":["SH","1","StudyID"],"0011":["IS","1","SeriesNumber"],"0012":["IS","1","AcquisitionNumber"],"0013":["IS","1","InstanceNumber"],"0014":["IS","1","IsotopeNumber"],"0015":["IS","1","PhaseNumber"],"0016":["IS","1","IntervalNumber"],"0017":["IS","1","TimeSlotNumber"],"0018":["IS","1","AngleNumber"],"0019":["IS","1","ItemNumber"],"0020":["CS","2","PatientOrientation"],"0022":["IS","1","OverlayNumber"],"0024":["IS","1","CurveNumber"],"0026":["IS","1","LUTNumber"],"0030":["DS","3","ImagePosition"],"0032":["DS","3","ImagePositionPatient"],"0035":["DS","6","ImageOrientation"],"0037":["DS","6","ImageOrientationPatient"],"0050":["DS","1","Location"],"0052":["UI","1","FrameOfReferenceUID"],"0060":["CS","1","Laterality"],"0062":["CS","1","ImageLaterality"],"0070":["LO","1","ImageGeometryType"],"0080":["CS","1-n","MaskingImage"],"00AA":["IS","1","ReportNumber"],"0100":["IS","1","TemporalPositionIdentifier"],"0105":["IS","1","NumberOfTemporalPositions"],"0110":["DS","1","TemporalResolution"],"0200":["UI","1","SynchronizationFrameOfReferenceUID"],"0242":["UI","1","SOPInstanceUIDOfConcatenationSource"],1e3:["IS","1","SeriesInStudy"],1001:["IS","1","AcquisitionsInSeries"],1002:["IS","1","ImagesInAcquisition"],1003:["IS","1","ImagesInSeries"],1004:["IS","1","AcquisitionsInStudy"],1005:["IS","1","ImagesInStudy"],1020:["LO","1-n","Reference"],"103F":["LO","1","TargetPositionReferenceIndicator"],1040:["LO","1","PositionReferenceIndicator"],1041:["DS","1","SliceLocation"],1070:["IS","1-n","OtherStudyNumbers"],1200:["IS","1","NumberOfPatientRelatedStudies"],1202:["IS","1","NumberOfPatientRelatedSeries"],1204:["IS","1","NumberOfPatientRelatedInstances"],1206:["IS","1","NumberOfStudyRelatedSeries"],1208:["IS","1","NumberOfStudyRelatedInstances"],1209:["IS","1","NumberOfSeriesRelatedInstances"],3100:["CS","1-n","SourceImageIDs"],3401:["CS","1","ModifyingDeviceID"],3402:["CS","1","ModifiedImageID"],3403:["DA","1","ModifiedImageDate"],3404:["LO","1","ModifyingDeviceManufacturer"],3405:["TM","1","ModifiedImageTime"],3406:["LO","1","ModifiedImageDescription"],4e3:["LT","1","ImageComments"],5e3:["AT","1-n","OriginalImageIdentification"],5002:["LO","1-n","OriginalImageIdentificationNomenclature"],9056:["SH","1","StackID"],9057:["UL","1","InStackPositionNumber"],9071:["SQ","1","FrameAnatomySequence"],9072:["CS","1","FrameLaterality"],9111:["SQ","1","FrameContentSequence"],9113:["SQ","1","PlanePositionSequence"],9116:["SQ","1","PlaneOrientationSequence"],9128:["UL","1","TemporalPositionIndex"],9153:["FD","1","NominalCardiacTriggerDelayTime"],9154:["FL","1","NominalCardiacTriggerTimePriorToRPeak"],9155:["FL","1","ActualCardiacTriggerTimePriorToRPeak"],9156:["US","1","FrameAcquisitionNumber"],9157:["UL","1-n","DimensionIndexValues"],9158:["LT","1","FrameComments"],9161:["UI","1","ConcatenationUID"],9162:["US","1","InConcatenationNumber"],9163:["US","1","InConcatenationTotalNumber"],9164:["UI","1","DimensionOrganizationUID"],9165:["AT","1","DimensionIndexPointer"],9167:["AT","1","FunctionalGroupPointer"],9170:["SQ","1","UnassignedSharedConvertedAttributesSequence"],9171:["SQ","1","UnassignedPerFrameConvertedAttributesSequence"],9172:["SQ","1","ConversionSourceAttributesSequence"],9213:["LO","1","DimensionIndexPrivateCreator"],9221:["SQ","1","DimensionOrganizationSequence"],9222:["SQ","1","DimensionIndexSequence"],9228:["UL","1","ConcatenationFrameOffsetNumber"],9238:["LO","1","FunctionalGroupPrivateCreator"],9241:["FL","1","NominalPercentageOfCardiacPhase"],9245:["FL","1","NominalPercentageOfRespiratoryPhase"],9246:["FL","1","StartingRespiratoryAmplitude"],9247:["CS","1","StartingRespiratoryPhase"],9248:["FL","1","EndingRespiratoryAmplitude"],9249:["CS","1","EndingRespiratoryPhase"],9250:["CS","1","RespiratoryTriggerType"],9251:["FD","1","RRIntervalTimeNominal"],9252:["FD","1","ActualCardiacTriggerDelayTime"],9253:["SQ","1","RespiratorySynchronizationSequence"],9254:["FD","1","RespiratoryIntervalTime"],9255:["FD","1","NominalRespiratoryTriggerDelayTime"],9256:["FD","1","RespiratoryTriggerDelayThreshold"],9257:["FD","1","ActualRespiratoryTriggerDelayTime"],9301:["FD","3","ImagePositionVolume"],9302:["FD","6","ImageOrientationVolume"],9307:["CS","1","UltrasoundAcquisitionGeometry"],9308:["FD","3","ApexPosition"],9309:["FD","16","VolumeToTransducerMappingMatrix"],"930A":["FD","16","VolumeToTableMappingMatrix"],"930B":["CS","1","VolumeToTransducerRelationship"],"930C":["CS","1","PatientFrameOfReferenceSource"],"930D":["FD","1","TemporalPositionTimeOffset"],"930E":["SQ","1","PlanePositionVolumeSequence"],"930F":["SQ","1","PlaneOrientationVolumeSequence"],9310:["SQ","1","TemporalPositionSequence"],9311:["CS","1","DimensionOrganizationType"],9312:["UI","1","VolumeFrameOfReferenceUID"],9313:["UI","1","TableFrameOfReferenceUID"],9421:["LO","1","DimensionDescriptionLabel"],9450:["SQ","1","PatientOrientationInFrameSequence"],9453:["LO","1","FrameLabel"],9518:["US","1-n","AcquisitionIndex"],9529:["SQ","1","ContributingSOPInstancesReferenceSequence"],9536:["US","1","ReconstructionIndex"]},"0022":{"0000":["UL","1","GenericGroupLength"],"0001":["US","1","LightPathFilterPassThroughWavelength"],"0002":["US","2","LightPathFilterPassBand"],"0003":["US","1","ImagePathFilterPassThroughWavelength"],"0004":["US","2","ImagePathFilterPassBand"],"0005":["CS","1","PatientEyeMovementCommanded"],"0006":["SQ","1","PatientEyeMovementCommandCodeSequence"],"0007":["FL","1","SphericalLensPower"],"0008":["FL","1","CylinderLensPower"],"0009":["FL","1","CylinderAxis"],"000A":["FL","1","EmmetropicMagnification"],"000B":["FL","1","IntraOcularPressure"],"000C":["FL","1","HorizontalFieldOfView"],"000D":["CS","1","PupilDilated"],"000E":["FL","1","DegreeOfDilation"],"0010":["FL","1","StereoBaselineAngle"],"0011":["FL","1","StereoBaselineDisplacement"],"0012":["FL","1","StereoHorizontalPixelOffset"],"0013":["FL","1","StereoVerticalPixelOffset"],"0014":["FL","1","StereoRotation"],"0015":["SQ","1","AcquisitionDeviceTypeCodeSequence"],"0016":["SQ","1","IlluminationTypeCodeSequence"],"0017":["SQ","1","LightPathFilterTypeStackCodeSequence"],"0018":["SQ","1","ImagePathFilterTypeStackCodeSequence"],"0019":["SQ","1","LensesCodeSequence"],"001A":["SQ","1","ChannelDescriptionCodeSequence"],"001B":["SQ","1","RefractiveStateSequence"],"001C":["SQ","1","MydriaticAgentCodeSequence"],"001D":["SQ","1","RelativeImagePositionCodeSequence"],"001E":["FL","1","CameraAngleOfView"],"0020":["SQ","1","StereoPairsSequence"],"0021":["SQ","1","LeftImageSequence"],"0022":["SQ","1","RightImageSequence"],"0028":["CS","1","StereoPairsPresent"],"0030":["FL","1","AxialLengthOfTheEye"],"0031":["SQ","1","OphthalmicFrameLocationSequence"],"0032":["FL","2-2n","ReferenceCoordinates"],"0035":["FL","1","DepthSpatialResolution"],"0036":["FL","1","MaximumDepthDistortion"],"0037":["FL","1","AlongScanSpatialResolution"],"0038":["FL","1","MaximumAlongScanDistortion"],"0039":["CS","1","OphthalmicImageOrientation"],"0041":["FL","1","DepthOfTransverseImage"],"0042":["SQ","1","MydriaticAgentConcentrationUnitsSequence"],"0048":["FL","1","AcrossScanSpatialResolution"],"0049":["FL","1","MaximumAcrossScanDistortion"],"004E":["DS","1","MydriaticAgentConcentration"],"0055":["FL","1","IlluminationWaveLength"],"0056":["FL","1","IlluminationPower"],"0057":["FL","1","IlluminationBandwidth"],"0058":["SQ","1","MydriaticAgentSequence"],1007:["SQ","1","OphthalmicAxialMeasurementsRightEyeSequence"],1008:["SQ","1","OphthalmicAxialMeasurementsLeftEyeSequence"],1009:["CS","1","OphthalmicAxialMeasurementsDeviceType"],1010:["CS","1","OphthalmicAxialLengthMeasurementsType"],1012:["SQ","1","OphthalmicAxialLengthSequence"],1019:["FL","1","OphthalmicAxialLength"],1024:["SQ","1","LensStatusCodeSequence"],1025:["SQ","1","VitreousStatusCodeSequence"],1028:["SQ","1","IOLFormulaCodeSequence"],1029:["LO","1","IOLFormulaDetail"],1033:["FL","1","KeratometerIndex"],1035:["SQ","1","SourceOfOphthalmicAxialLengthCodeSequence"],1036:["SQ","1","SourceOfCornealSizeDataCodeSequence"],1037:["FL","1","TargetRefraction"],1039:["CS","1","RefractiveProcedureOccurred"],1040:["SQ","1","RefractiveSurgeryTypeCodeSequence"],1044:["SQ","1","OphthalmicUltrasoundMethodCodeSequence"],1045:["SQ","1","SurgicallyInducedAstigmatismSequence"],1046:["CS","1","TypeOfOpticalCorrection"],1047:["SQ","1","ToricIOLPowerSequence"],1048:["SQ","1","PredictedToricErrorSequence"],1049:["CS","1","PreSelectedForImplantation"],"104A":["SQ","1","ToricIOLPowerForExactEmmetropiaSequence"],"104B":["SQ","1","ToricIOLPowerForExactTargetRefractionSequence"],1050:["SQ","1","OphthalmicAxialLengthMeasurementsSequence"],1053:["FL","1","IOLPower"],1054:["FL","1","PredictedRefractiveError"],1059:["FL","1","OphthalmicAxialLengthVelocity"],1065:["LO","1","LensStatusDescription"],1066:["LO","1","VitreousStatusDescription"],1090:["SQ","1","IOLPowerSequence"],1092:["SQ","1","LensConstantSequence"],1093:["LO","1","IOLManufacturer"],1094:["LO","1","LensConstantDescription"],1095:["LO","1","ImplantName"],1096:["SQ","1","KeratometryMeasurementTypeCodeSequence"],1097:["LO","1","ImplantPartNumber"],1100:["SQ","1","ReferencedOphthalmicAxialMeasurementsSequence"],1101:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentNameCodeSequence"],1103:["SQ","1","RefractiveErrorBeforeRefractiveSurgeryCodeSequence"],1121:["FL","1","IOLPowerForExactEmmetropia"],1122:["FL","1","IOLPowerForExactTargetRefraction"],1125:["SQ","1","AnteriorChamberDepthDefinitionCodeSequence"],1127:["SQ","1","LensThicknessSequence"],1128:["SQ","1","AnteriorChamberDepthSequence"],"112A":["SQ","1","CalculationCommentSequence"],"112B":["CS","1","CalculationCommentType"],"112C":["LT","1","CalculationComment"],1130:["FL","1","LensThickness"],1131:["FL","1","AnteriorChamberDepth"],1132:["SQ","1","SourceOfLensThicknessDataCodeSequence"],1133:["SQ","1","SourceOfAnteriorChamberDepthDataCodeSequence"],1134:["SQ","1","SourceOfRefractiveMeasurementsSequence"],1135:["SQ","1","SourceOfRefractiveMeasurementsCodeSequence"],1140:["CS","1","OphthalmicAxialLengthMeasurementModified"],1150:["SQ","1","OphthalmicAxialLengthDataSourceCodeSequence"],1153:["SQ","1","OphthalmicAxialLengthAcquisitionMethodCodeSequence"],1155:["FL","1","SignalToNoiseRatio"],1159:["LO","1","OphthalmicAxialLengthDataSourceDescription"],1210:["SQ","1","OphthalmicAxialLengthMeasurementsTotalLengthSequence"],1211:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentalLengthSequence"],1212:["SQ","1","OphthalmicAxialLengthMeasurementsLengthSummationSequence"],1220:["SQ","1","UltrasoundOphthalmicAxialLengthMeasurementsSequence"],1225:["SQ","1","OpticalOphthalmicAxialLengthMeasurementsSequence"],1230:["SQ","1","UltrasoundSelectedOphthalmicAxialLengthSequence"],1250:["SQ","1","OphthalmicAxialLengthSelectionMethodCodeSequence"],1255:["SQ","1","OpticalSelectedOphthalmicAxialLengthSequence"],1257:["SQ","1","SelectedSegmentalOphthalmicAxialLengthSequence"],1260:["SQ","1","SelectedTotalOphthalmicAxialLengthSequence"],1262:["SQ","1","OphthalmicAxialLengthQualityMetricSequence"],1265:["SQ","1","OphthalmicAxialLengthQualityMetricTypeCodeSequence"],1273:["LO","1","OphthalmicAxialLengthQualityMetricTypeDescription"],1300:["SQ","1","IntraocularLensCalculationsRightEyeSequence"],1310:["SQ","1","IntraocularLensCalculationsLeftEyeSequence"],1330:["SQ","1","ReferencedOphthalmicAxialLengthMeasurementQCImageSequence"],1415:["CS","1","OphthalmicMappingDeviceType"],1420:["SQ","1","AcquisitionMethodCodeSequence"],1423:["SQ","1","AcquisitionMethodAlgorithmSequence"],1436:["SQ","1","OphthalmicThicknessMapTypeCodeSequence"],1443:["SQ","1","OphthalmicThicknessMappingNormalsSequence"],1445:["SQ","1","RetinalThicknessDefinitionCodeSequence"],1450:["SQ","1","PixelValueMappingToCodedConceptSequence"],1452:["xs","1","MappedPixelValue"],1454:["LO","1","PixelValueMappingExplanation"],1458:["SQ","1","OphthalmicThicknessMapQualityThresholdSequence"],1460:["FL","1","OphthalmicThicknessMapThresholdQualityRating"],1463:["FL","2","AnatomicStructureReferencePoint"],1465:["SQ","1","RegistrationToLocalizerSequence"],1466:["CS","1","RegisteredLocalizerUnits"],1467:["FL","2","RegisteredLocalizerTopLeftHandCorner"],1468:["FL","2","RegisteredLocalizerBottomRightHandCorner"],1470:["SQ","1","OphthalmicThicknessMapQualityRatingSequence"],1472:["SQ","1","RelevantOPTAttributesSequence"],1512:["SQ","1","TransformationMethodCodeSequence"],1513:["SQ","1","TransformationAlgorithmSequence"],1515:["CS","1","OphthalmicAxialLengthMethod"],1517:["FL","1","OphthalmicFOV"],1518:["SQ","1","TwoDimensionalToThreeDimensionalMapSequence"],1525:["SQ","1","WideFieldOphthalmicPhotographyQualityRatingSequence"],1526:["SQ","1","WideFieldOphthalmicPhotographyQualityThresholdSequence"],1527:["FL","1","WideFieldOphthalmicPhotographyThresholdQualityRating"],1528:["FL","1","XCoordinatesCenterPixelViewAngle"],1529:["FL","1","YCoordinatesCenterPixelViewAngle"],1530:["UL","1","NumberOfMapPoints"],1531:["OF","1","TwoDimensionalToThreeDimensionalMapData"],1612:["SQ","1","DerivationAlgorithmSequence"],1615:["SQ","1","OphthalmicImageTypeCodeSequence"],1616:["LO","1","OphthalmicImageTypeDescription"],1618:["SQ","1","ScanPatternTypeCodeSequence"],1620:["SQ","1","ReferencedSurfaceMeshIdentificationSequence"],1622:["CS","1","OphthalmicVolumetricPropertiesFlag"],1624:["FL","1","OphthalmicAnatomicReferencePointXCoordinate"],1626:["FL","1","OphthalmicAnatomicReferencePointYCoordinate"],1628:["SQ","1","OphthalmicEnFaceImageQualityRatingSequence"],1630:["DS","1","QualityThreshold"],1640:["SQ","1","OCTBscanAnalysisAcquisitionParametersSequence"],1642:["UL","1","NumberOfBscansPerFrame"],1643:["FL","1","BscanSlabThickness"],1644:["FL","1","DistanceBetweenBscanSlabs"],1645:["FL","1","BscanCycleTime"],1646:["FL","1-n","BscanCycleTimeVector"],1649:["FL","1","AscanRate"],1650:["FL","1","BscanRate"],1658:["UL","1","SurfaceMeshZPixelOffset"]},"0024":{"0000":["UL","1","GenericGroupLength"],"0010":["FL","1","VisualFieldHorizontalExtent"],"0011":["FL","1","VisualFieldVerticalExtent"],"0012":["CS","1","VisualFieldShape"],"0016":["SQ","1","ScreeningTestModeCodeSequence"],"0018":["FL","1","MaximumStimulusLuminance"],"0020":["FL","1","BackgroundLuminance"],"0021":["SQ","1","StimulusColorCodeSequence"],"0024":["SQ","1","BackgroundIlluminationColorCodeSequence"],"0025":["FL","1","StimulusArea"],"0028":["FL","1","StimulusPresentationTime"],"0032":["SQ","1","FixationSequence"],"0033":["SQ","1","FixationMonitoringCodeSequence"],"0034":["SQ","1","VisualFieldCatchTrialSequence"],"0035":["US","1","FixationCheckedQuantity"],"0036":["US","1","PatientNotProperlyFixatedQuantity"],"0037":["CS","1","PresentedVisualStimuliDataFlag"],"0038":["US","1","NumberOfVisualStimuli"],"0039":["CS","1","ExcessiveFixationLossesDataFlag"],"0040":["CS","1","ExcessiveFixationLosses"],"0042":["US","1","StimuliRetestingQuantity"],"0044":["LT","1","CommentsOnPatientPerformanceOfVisualField"],"0045":["CS","1","FalseNegativesEstimateFlag"],"0046":["FL","1","FalseNegativesEstimate"],"0048":["US","1","NegativeCatchTrialsQuantity"],"0050":["US","1","FalseNegativesQuantity"],"0051":["CS","1","ExcessiveFalseNegativesDataFlag"],"0052":["CS","1","ExcessiveFalseNegatives"],"0053":["CS","1","FalsePositivesEstimateFlag"],"0054":["FL","1","FalsePositivesEstimate"],"0055":["CS","1","CatchTrialsDataFlag"],"0056":["US","1","PositiveCatchTrialsQuantity"],"0057":["CS","1","TestPointNormalsDataFlag"],"0058":["SQ","1","TestPointNormalsSequence"],"0059":["CS","1","GlobalDeviationProbabilityNormalsFlag"],"0060":["US","1","FalsePositivesQuantity"],"0061":["CS","1","ExcessiveFalsePositivesDataFlag"],"0062":["CS","1","ExcessiveFalsePositives"],"0063":["CS","1","VisualFieldTestNormalsFlag"],"0064":["SQ","1","ResultsNormalsSequence"],"0065":["SQ","1","AgeCorrectedSensitivityDeviationAlgorithmSequence"],"0066":["FL","1","GlobalDeviationFromNormal"],"0067":["SQ","1","GeneralizedDefectSensitivityDeviationAlgorithmSequence"],"0068":["FL","1","LocalizedDeviationFromNormal"],"0069":["LO","1","PatientReliabilityIndicator"],"0070":["FL","1","VisualFieldMeanSensitivity"],"0071":["FL","1","GlobalDeviationProbability"],"0072":["CS","1","LocalDeviationProbabilityNormalsFlag"],"0073":["FL","1","LocalizedDeviationProbability"],"0074":["CS","1","ShortTermFluctuationCalculated"],"0075":["FL","1","ShortTermFluctuation"],"0076":["CS","1","ShortTermFluctuationProbabilityCalculated"],"0077":["FL","1","ShortTermFluctuationProbability"],"0078":["CS","1","CorrectedLocalizedDeviationFromNormalCalculated"],"0079":["FL","1","CorrectedLocalizedDeviationFromNormal"],"0080":["CS","1","CorrectedLocalizedDeviationFromNormalProbabilityCalculated"],"0081":["FL","1","CorrectedLocalizedDeviationFromNormalProbability"],"0083":["SQ","1","GlobalDeviationProbabilitySequence"],"0085":["SQ","1","LocalizedDeviationProbabilitySequence"],"0086":["CS","1","FovealSensitivityMeasured"],"0087":["FL","1","FovealSensitivity"],"0088":["FL","1","VisualFieldTestDuration"],"0089":["SQ","1","VisualFieldTestPointSequence"],"0090":["FL","1","VisualFieldTestPointXCoordinate"],"0091":["FL","1","VisualFieldTestPointYCoordinate"],"0092":["FL","1","AgeCorrectedSensitivityDeviationValue"],"0093":["CS","1","StimulusResults"],"0094":["FL","1","SensitivityValue"],"0095":["CS","1","RetestStimulusSeen"],"0096":["FL","1","RetestSensitivityValue"],"0097":["SQ","1","VisualFieldTestPointNormalsSequence"],"0098":["FL","1","QuantifiedDefect"],"0100":["FL","1","AgeCorrectedSensitivityDeviationProbabilityValue"],"0102":["CS","1","GeneralizedDefectCorrectedSensitivityDeviationFlag"],"0103":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationValue"],"0104":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationProbabilityValue"],"0105":["FL","1","MinimumSensitivityValue"],"0106":["CS","1","BlindSpotLocalized"],"0107":["FL","1","BlindSpotXCoordinate"],"0108":["FL","1","BlindSpotYCoordinate"],"0110":["SQ","1","VisualAcuityMeasurementSequence"],"0112":["SQ","1","RefractiveParametersUsedOnPatientSequence"],"0113":["CS","1","MeasurementLaterality"],"0114":["SQ","1","OphthalmicPatientClinicalInformationLeftEyeSequence"],"0115":["SQ","1","OphthalmicPatientClinicalInformationRightEyeSequence"],"0117":["CS","1","FovealPointNormativeDataFlag"],"0118":["FL","1","FovealPointProbabilityValue"],"0120":["CS","1","ScreeningBaselineMeasured"],"0122":["SQ","1","ScreeningBaselineMeasuredSequence"],"0124":["CS","1","ScreeningBaselineType"],"0126":["FL","1","ScreeningBaselineValue"],"0202":["LO","1","AlgorithmSource"],"0306":["LO","1","DataSetName"],"0307":["LO","1","DataSetVersion"],"0308":["LO","1","DataSetSource"],"0309":["LO","1","DataSetDescription"],"0317":["SQ","1","VisualFieldTestReliabilityGlobalIndexSequence"],"0320":["SQ","1","VisualFieldGlobalResultsIndexSequence"],"0325":["SQ","1","DataObservationSequence"],"0338":["CS","1","IndexNormalsFlag"],"0341":["FL","1","IndexProbability"],"0344":["SQ","1","IndexProbabilitySequence"]},"0028":{"0000":["UL","1","GenericGroupLength"],"0002":["US","1","SamplesPerPixel"],"0003":["US","1","SamplesPerPixelUsed"],"0004":["CS","1","PhotometricInterpretation"],"0005":["US","1","ImageDimensions"],"0006":["US","1","PlanarConfiguration"],"0008":["IS","1","NumberOfFrames"],"0009":["AT","1-n","FrameIncrementPointer"],"000A":["AT","1-n","FrameDimensionPointer"],"0010":["US","1","Rows"],"0011":["US","1","Columns"],"0012":["US","1","Planes"],"0014":["US","1","UltrasoundColorDataPresent"],"0020":["","",""],"0030":["DS","2","PixelSpacing"],"0031":["DS","2","ZoomFactor"],"0032":["DS","2","ZoomCenter"],"0034":["IS","2","PixelAspectRatio"],"0040":["CS","1","ImageFormat"],"0050":["LO","1-n","ManipulatedImage"],"0051":["CS","1-n","CorrectedImage"],"005F":["LO","1","CompressionRecognitionCode"],"0060":["CS","1","CompressionCode"],"0061":["SH","1","CompressionOriginator"],"0062":["LO","1","CompressionLabel"],"0063":["SH","1","CompressionDescription"],"0065":["CS","1-n","CompressionSequence"],"0066":["AT","1-n","CompressionStepPointers"],"0068":["US","1","RepeatInterval"],"0069":["US","1","BitsGrouped"],"0070":["US","1-n","PerimeterTable"],"0071":["xs","1","PerimeterValue"],"0080":["US","1","PredictorRows"],"0081":["US","1","PredictorColumns"],"0082":["US","1-n","PredictorConstants"],"0090":["CS","1","BlockedPixels"],"0091":["US","1","BlockRows"],"0092":["US","1","BlockColumns"],"0093":["US","1","RowOverlap"],"0094":["US","1","ColumnOverlap"],"0100":["US","1","BitsAllocated"],"0101":["US","1","BitsStored"],"0102":["US","1","HighBit"],"0103":["US","1","PixelRepresentation"],"0104":["xs","1","SmallestValidPixelValue"],"0105":["xs","1","LargestValidPixelValue"],"0106":["xs","1","SmallestImagePixelValue"],"0107":["xs","1","LargestImagePixelValue"],"0108":["xs","1","SmallestPixelValueInSeries"],"0109":["xs","1","LargestPixelValueInSeries"],"0110":["xs","1","SmallestImagePixelValueInPlane"],"0111":["xs","1","LargestImagePixelValueInPlane"],"0120":["xs","1","PixelPaddingValue"],"0121":["xs","1","PixelPaddingRangeLimit"],"0122":["FL","1","FloatPixelPaddingValue"],"0123":["FD","1","DoubleFloatPixelPaddingValue"],"0124":["FL","1","FloatPixelPaddingRangeLimit"],"0125":["FD","1","DoubleFloatPixelPaddingRangeLimit"],"0200":["US","1","ImageLocation"],"0300":["CS","1","QualityControlImage"],"0301":["CS","1","BurnedInAnnotation"],"0302":["CS","1","RecognizableVisualFeatures"],"0303":["CS","1","LongitudinalTemporalInformationModified"],"0304":["UI","1","ReferencedColorPaletteInstanceUID"],"0400":["LO","1","TransformLabel"],"0401":["LO","1","TransformVersionNumber"],"0402":["US","1","NumberOfTransformSteps"],"0403":["LO","1-n","SequenceOfCompressedData"],"0404":["AT","1-n","DetailsOfCoefficients"],"04x0":["US","1","RowsForNthOrderCoefficients"],"04x1":["US","1","ColumnsForNthOrderCoefficients"],"04x2":["LO","1-n","CoefficientCoding"],"04x3":["AT","1-n","CoefficientCodingPointers"],"0700":["LO","1","DCTLabel"],"0701":["CS","1-n","DataBlockDescription"],"0702":["AT","1-n","DataBlock"],"0710":["US","1","NormalizationFactorFormat"],"0720":["US","1","ZonalMapNumberFormat"],"0721":["AT","1-n","ZonalMapLocation"],"0722":["US","1","ZonalMapFormat"],"0730":["US","1","AdaptiveMapFormat"],"0740":["US","1","CodeNumberFormat"],"08x0":["CS","1-n","CodeLabel"],"08x2":["US","1","NumberOfTables"],"08x3":["AT","1-n","CodeTableLocation"],"08x4":["US","1","BitsForCodeWord"],"08x8":["AT","1-n","ImageDataLocation"],"0A02":["CS","1","PixelSpacingCalibrationType"],"0A04":["LO","1","PixelSpacingCalibrationDescription"],1040:["CS","1","PixelIntensityRelationship"],1041:["SS","1","PixelIntensityRelationshipSign"],1050:["DS","1-n","WindowCenter"],1051:["DS","1-n","WindowWidth"],1052:["DS","1","RescaleIntercept"],1053:["DS","1","RescaleSlope"],1054:["LO","1","RescaleType"],1055:["LO","1-n","WindowCenterWidthExplanation"],1056:["CS","1","VOILUTFunction"],1080:["CS","1","GrayScale"],1090:["CS","1","RecommendedViewingMode"],1100:["xs","3","GrayLookupTableDescriptor"],1101:["xs","3","RedPaletteColorLookupTableDescriptor"],1102:["xs","3","GreenPaletteColorLookupTableDescriptor"],1103:["xs","3","BluePaletteColorLookupTableDescriptor"],1104:["US","3","AlphaPaletteColorLookupTableDescriptor"],1111:["xs","4","LargeRedPaletteColorLookupTableDescriptor"],1112:["xs","4","LargeGreenPaletteColorLookupTableDescriptor"],1113:["xs","4","LargeBluePaletteColorLookupTableDescriptor"],1199:["UI","1","PaletteColorLookupTableUID"],1200:["xs","1-n or 1","GrayLookupTableData"],1201:["OW","1","RedPaletteColorLookupTableData"],1202:["OW","1","GreenPaletteColorLookupTableData"],1203:["OW","1","BluePaletteColorLookupTableData"],1204:["OW","1","AlphaPaletteColorLookupTableData"],1211:["OW","1","LargeRedPaletteColorLookupTableData"],1212:["OW","1","LargeGreenPaletteColorLookupTableData"],1213:["OW","1","LargeBluePaletteColorLookupTableData"],1214:["UI","1","LargePaletteColorLookupTableUID"],1221:["OW","1","SegmentedRedPaletteColorLookupTableData"],1222:["OW","1","SegmentedGreenPaletteColorLookupTableData"],1223:["OW","1","SegmentedBluePaletteColorLookupTableData"],1224:["OW","1","SegmentedAlphaPaletteColorLookupTableData"],1230:["SQ","1","StoredValueColorRangeSequence"],1231:["FD","1","MinimumStoredValueMapped"],1232:["FD","1","MaximumStoredValueMapped"],1300:["CS","1","BreastImplantPresent"],1350:["CS","1","PartialView"],1351:["ST","1","PartialViewDescription"],1352:["SQ","1","PartialViewCodeSequence"],"135A":["CS","1","SpatialLocationsPreserved"],1401:["SQ","1","DataFrameAssignmentSequence"],1402:["CS","1","DataPathAssignment"],1403:["US","1","BitsMappedToColorLookupTable"],1404:["SQ","1","BlendingLUT1Sequence"],1405:["CS","1","BlendingLUT1TransferFunction"],1406:["FD","1","BlendingWeightConstant"],1407:["US","3","BlendingLookupTableDescriptor"],1408:["OW","1","BlendingLookupTableData"],"140B":["SQ","1","EnhancedPaletteColorLookupTableSequence"],"140C":["SQ","1","BlendingLUT2Sequence"],"140D":["CS","1","BlendingLUT2TransferFunction"],"140E":["CS","1","DataPathID"],"140F":["CS","1","RGBLUTTransferFunction"],1410:["CS","1","AlphaLUTTransferFunction"],2e3:["OB","1","ICCProfile"],2002:["CS","1","ColorSpace"],2110:["CS","1","LossyImageCompression"],2112:["DS","1-n","LossyImageCompressionRatio"],2114:["CS","1-n","LossyImageCompressionMethod"],3e3:["SQ","1","ModalityLUTSequence"],3002:["xs","3","LUTDescriptor"],3003:["LO","1","LUTExplanation"],3004:["LO","1","ModalityLUTType"],3006:["xx","1-n or 1","LUTData"],3010:["SQ","1","VOILUTSequence"],3110:["SQ","1","SoftcopyVOILUTSequence"],4e3:["LT","1","ImagePresentationComments"],5e3:["SQ","1","BiPlaneAcquisitionSequence"],6010:["US","1","RepresentativeFrameNumber"],6020:["US","1-n","FrameNumbersOfInterest"],6022:["LO","1-n","FrameOfInterestDescription"],6023:["CS","1-n","FrameOfInterestType"],6030:["US","1-n","MaskPointers"],6040:["US","1-n","RWavePointer"],6100:["SQ","1","MaskSubtractionSequence"],6101:["CS","1","MaskOperation"],6102:["US","2-2n","ApplicableFrameRange"],6110:["US","1-n","MaskFrameNumbers"],6112:["US","1","ContrastFrameAveraging"],6114:["FL","2","MaskSubPixelShift"],6120:["SS","1","TIDOffset"],6190:["ST","1","MaskOperationExplanation"],7e3:["SQ","1","EquipmentAdministratorSequence"],7001:["US","1","NumberOfDisplaySubsystems"],7002:["US","1","CurrentConfigurationID"],7003:["US","1","DisplaySubsystemID"],7004:["SH","1","DisplaySubsystemName"],7005:["LO","1","DisplaySubsystemDescription"],7006:["CS","1","SystemStatus"],7007:["LO","1","SystemStatusComment"],7008:["SQ","1","TargetLuminanceCharacteristicsSequence"],7009:["US","1","LuminanceCharacteristicsID"],"700A":["SQ","1","DisplaySubsystemConfigurationSequence"],"700B":["US","1","ConfigurationID"],"700C":["SH","1","ConfigurationName"],"700D":["LO","1","ConfigurationDescription"],"700E":["US","1","ReferencedTargetLuminanceCharacteristicsID"],"700F":["SQ","1","QAResultsSequence"],7010:["SQ","1","DisplaySubsystemQAResultsSequence"],7011:["SQ","1","ConfigurationQAResultsSequence"],7012:["SQ","1","MeasurementEquipmentSequence"],7013:["CS","1-n","MeasurementFunctions"],7014:["CS","1","MeasurementEquipmentType"],7015:["SQ","1","VisualEvaluationResultSequence"],7016:["SQ","1","DisplayCalibrationResultSequence"],7017:["US","1","DDLValue"],7018:["FL","2","CIExyWhitePoint"],7019:["CS","1","DisplayFunctionType"],"701A":["FL","1","GammaValue"],"701B":["US","1","NumberOfLuminancePoints"],"701C":["SQ","1","LuminanceResponseSequence"],"701D":["FL","1","TargetMinimumLuminance"],"701E":["FL","1","TargetMaximumLuminance"],"701F":["FL","1","LuminanceValue"],7020:["LO","1","LuminanceResponseDescription"],7021:["CS","1","WhitePointFlag"],7022:["SQ","1","DisplayDeviceTypeCodeSequence"],7023:["SQ","1","DisplaySubsystemSequence"],7024:["SQ","1","LuminanceResultSequence"],7025:["CS","1","AmbientLightValueSource"],7026:["CS","1-n","MeasuredCharacteristics"],7027:["SQ","1","LuminanceUniformityResultSequence"],7028:["SQ","1","VisualEvaluationTestSequence"],7029:["CS","1","TestResult"],"702A":["LO","1","TestResultComment"],"702B":["CS","1","TestImageValidation"],"702C":["SQ","1","TestPatternCodeSequence"],"702D":["SQ","1","MeasurementPatternCodeSequence"],"702E":["SQ","1","VisualEvaluationMethodCodeSequence"],"7FE0":["UR","1","PixelDataProviderURL"],9001:["UL","1","DataPointRows"],9002:["UL","1","DataPointColumns"],9003:["CS","1","SignalDomainColumns"],9099:["US","1","LargestMonochromePixelValue"],9108:["CS","1","DataRepresentation"],9110:["SQ","1","PixelMeasuresSequence"],9132:["SQ","1","FrameVOILUTSequence"],9145:["SQ","1","PixelValueTransformationSequence"],9235:["CS","1","SignalDomainRows"],9411:["FL","1","DisplayFilterPercentage"],9415:["SQ","1","FramePixelShiftSequence"],9416:["US","1","SubtractionItemID"],9422:["SQ","1","PixelIntensityRelationshipLUTSequence"],9443:["SQ","1","FramePixelDataPropertiesSequence"],9444:["CS","1","GeometricalProperties"],9445:["FL","1","GeometricMaximumDistortion"],9446:["CS","1-n","ImageProcessingApplied"],9454:["CS","1","MaskSelectionMode"],9474:["CS","1","LUTFunction"],9478:["FL","1","MaskVisibilityPercentage"],9501:["SQ","1","PixelShiftSequence"],9502:["SQ","1","RegionPixelShiftSequence"],9503:["SS","2-2n","VerticesOfTheRegion"],9505:["SQ","1","MultiFramePresentationSequence"],9506:["US","2-2n","PixelShiftFrameRange"],9507:["US","2-2n","LUTFrameRange"],9520:["DS","16","ImageToEquipmentMappingMatrix"],9537:["CS","1","EquipmentCoordinateSystemIdentification"]},"0032":{"0000":["UL","1","GenericGroupLength"],"000A":["CS","1","StudyStatusID"],"000C":["CS","1","StudyPriorityID"],"0012":["LO","1","StudyIDIssuer"],"0032":["DA","1","StudyVerifiedDate"],"0033":["TM","1","StudyVerifiedTime"],"0034":["DA","1","StudyReadDate"],"0035":["TM","1","StudyReadTime"],1e3:["DA","1","ScheduledStudyStartDate"],1001:["TM","1","ScheduledStudyStartTime"],1010:["DA","1","ScheduledStudyStopDate"],1011:["TM","1","ScheduledStudyStopTime"],1020:["LO","1","ScheduledStudyLocation"],1021:["AE","1-n","ScheduledStudyLocationAETitle"],1030:["LO","1","ReasonForStudy"],1031:["SQ","1","RequestingPhysicianIdentificationSequence"],1032:["PN","1","RequestingPhysician"],1033:["LO","1","RequestingService"],1034:["SQ","1","RequestingServiceCodeSequence"],1040:["DA","1","StudyArrivalDate"],1041:["TM","1","StudyArrivalTime"],1050:["DA","1","StudyCompletionDate"],1051:["TM","1","StudyCompletionTime"],1055:["CS","1","StudyComponentStatusID"],1060:["LO","1","RequestedProcedureDescription"],1064:["SQ","1","RequestedProcedureCodeSequence"],1065:["SQ","1","RequestedLateralityCodeSequence"],1066:["UT","1","ReasonForVisit"],1067:["SQ","1","ReasonForVisitCodeSequence"],1070:["LO","1","RequestedContrastAgent"],4e3:["LT","1","StudyComments"]},"0034":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","FlowIdentifierSequence"],"0002":["OB","1","FlowIdentifier"],"0003":["UI","1","FlowTransferSyntaxUID"],"0004":["UL","1","FlowRTPSamplingRate"],"0005":["OB","1","SourceIdentifier"],"0007":["OB","1","FrameOriginTimestamp"],"0008":["CS","1","IncludesImagingSubject"],"0009":["SQ","1","FrameUsefulnessGroupSequence"],"000A":["SQ","1","RealTimeBulkDataFlowSequence"],"000B":["SQ","1","CameraPositionGroupSequence"],"000C":["CS","1","IncludesInformation"],"000D":["SQ","1","TimeOfFrameGroupSequence"]},"0038":{"0000":["UL","1","GenericGroupLength"],"0004":["SQ","1","ReferencedPatientAliasSequence"],"0008":["CS","1","VisitStatusID"],"0010":["LO","1","AdmissionID"],"0011":["LO","1","IssuerOfAdmissionID"],"0014":["SQ","1","IssuerOfAdmissionIDSequence"],"0016":["LO","1","RouteOfAdmissions"],"001A":["DA","1","ScheduledAdmissionDate"],"001B":["TM","1","ScheduledAdmissionTime"],"001C":["DA","1","ScheduledDischargeDate"],"001D":["TM","1","ScheduledDischargeTime"],"001E":["LO","1","ScheduledPatientInstitutionResidence"],"0020":["DA","1","AdmittingDate"],"0021":["TM","1","AdmittingTime"],"0030":["DA","1","DischargeDate"],"0032":["TM","1","DischargeTime"],"0040":["LO","1","DischargeDiagnosisDescription"],"0044":["SQ","1","DischargeDiagnosisCodeSequence"],"0050":["LO","1","SpecialNeeds"],"0060":["LO","1","ServiceEpisodeID"],"0061":["LO","1","IssuerOfServiceEpisodeID"],"0062":["LO","1","ServiceEpisodeDescription"],"0064":["SQ","1","IssuerOfServiceEpisodeIDSequence"],"0100":["SQ","1","PertinentDocumentsSequence"],"0101":["SQ","1","PertinentResourcesSequence"],"0102":["LO","1","ResourceDescription"],"0300":["LO","1","CurrentPatientLocation"],"0400":["LO","1","PatientInstitutionResidence"],"0500":["LO","1","PatientState"],"0502":["SQ","1","PatientClinicalTrialParticipationSequence"],4e3:["LT","1","VisitComments"]},"003A":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","WaveformOriginality"],"0005":["US","1","NumberOfWaveformChannels"],"0010":["UL","1","NumberOfWaveformSamples"],"001A":["DS","1","SamplingFrequency"],"0020":["SH","1","MultiplexGroupLabel"],"0200":["SQ","1","ChannelDefinitionSequence"],"0202":["IS","1","WaveformChannelNumber"],"0203":["SH","1","ChannelLabel"],"0205":["CS","1-n","ChannelStatus"],"0208":["SQ","1","ChannelSourceSequence"],"0209":["SQ","1","ChannelSourceModifiersSequence"],"020A":["SQ","1","SourceWaveformSequence"],"020C":["LO","1","ChannelDerivationDescription"],"0210":["DS","1","ChannelSensitivity"],"0211":["SQ","1","ChannelSensitivityUnitsSequence"],"0212":["DS","1","ChannelSensitivityCorrectionFactor"],"0213":["DS","1","ChannelBaseline"],"0214":["DS","1","ChannelTimeSkew"],"0215":["DS","1","ChannelSampleSkew"],"0218":["DS","1","ChannelOffset"],"021A":["US","1","WaveformBitsStored"],"0220":["DS","1","FilterLowFrequency"],"0221":["DS","1","FilterHighFrequency"],"0222":["DS","1","NotchFilterFrequency"],"0223":["DS","1","NotchFilterBandwidth"],"0230":["FL","1","WaveformDataDisplayScale"],"0231":["US","3","WaveformDisplayBackgroundCIELabValue"],"0240":["SQ","1","WaveformPresentationGroupSequence"],"0241":["US","1","PresentationGroupNumber"],"0242":["SQ","1","ChannelDisplaySequence"],"0244":["US","3","ChannelRecommendedDisplayCIELabValue"],"0245":["FL","1","ChannelPosition"],"0246":["CS","1","DisplayShadingFlag"],"0247":["FL","1","FractionalChannelDisplayScale"],"0248":["FL","1","AbsoluteChannelDisplayScale"],"0300":["SQ","1","MultiplexedAudioChannelsDescriptionCodeSequence"],"0301":["IS","1","ChannelIdentificationCode"],"0302":["CS","1","ChannelMode"],"0310":["UI","1","MultiplexGroupUID"],"0311":["DS","1","PowerlineFrequency"],"0312":["SQ","1","ChannelImpedanceSequence"],"0313":["DS","1","ImpedanceValue"],"0314":["DT","1","ImpedanceMeasurementDateTime"],"0315":["DS","1","ImpedanceMeasurementFrequency"],"0316":["CS","1","ImpedanceMeasurementCurrentType"]},"0040":{"0000":["UL","1","GenericGroupLength"],"0001":["AE","1-n","ScheduledStationAETitle"],"0002":["DA","1","ScheduledProcedureStepStartDate"],"0003":["TM","1","ScheduledProcedureStepStartTime"],"0004":["DA","1","ScheduledProcedureStepEndDate"],"0005":["TM","1","ScheduledProcedureStepEndTime"],"0006":["PN","1","ScheduledPerformingPhysicianName"],"0007":["LO","1","ScheduledProcedureStepDescription"],"0008":["SQ","1","ScheduledProtocolCodeSequence"],"0009":["SH","1","ScheduledProcedureStepID"],"000A":["SQ","1","StageCodeSequence"],"000B":["SQ","1","ScheduledPerformingPhysicianIdentificationSequence"],"0010":["SH","1-n","ScheduledStationName"],"0011":["SH","1","ScheduledProcedureStepLocation"],"0012":["LO","1","PreMedication"],"0020":["CS","1","ScheduledProcedureStepStatus"],"0026":["SQ","1","OrderPlacerIdentifierSequence"],"0027":["SQ","1","OrderFillerIdentifierSequence"],"0031":["UT","1","LocalNamespaceEntityID"],"0032":["UT","1","UniversalEntityID"],"0033":["CS","1","UniversalEntityIDType"],"0035":["CS","1","IdentifierTypeCode"],"0036":["SQ","1","AssigningFacilitySequence"],"0039":["SQ","1","AssigningJurisdictionCodeSequence"],"003A":["SQ","1","AssigningAgencyOrDepartmentCodeSequence"],"0100":["SQ","1","ScheduledProcedureStepSequence"],"0220":["SQ","1","ReferencedNonImageCompositeSOPInstanceSequence"],"0241":["AE","1","PerformedStationAETitle"],"0242":["SH","1","PerformedStationName"],"0243":["SH","1","PerformedLocation"],"0244":["DA","1","PerformedProcedureStepStartDate"],"0245":["TM","1","PerformedProcedureStepStartTime"],"0250":["DA","1","PerformedProcedureStepEndDate"],"0251":["TM","1","PerformedProcedureStepEndTime"],"0252":["CS","1","PerformedProcedureStepStatus"],"0253":["SH","1","PerformedProcedureStepID"],"0254":["LO","1","PerformedProcedureStepDescription"],"0255":["LO","1","PerformedProcedureTypeDescription"],"0260":["SQ","1","PerformedProtocolCodeSequence"],"0261":["CS","1","PerformedProtocolType"],"0270":["SQ","1","ScheduledStepAttributesSequence"],"0275":["SQ","1","RequestAttributesSequence"],"0280":["ST","1","CommentsOnThePerformedProcedureStep"],"0281":["SQ","1","PerformedProcedureStepDiscontinuationReasonCodeSequence"],"0293":["SQ","1","QuantitySequence"],"0294":["DS","1","Quantity"],"0295":["SQ","1","MeasuringUnitsSequence"],"0296":["SQ","1","BillingItemSequence"],"0300":["US","1","TotalTimeOfFluoroscopy"],"0301":["US","1","TotalNumberOfExposures"],"0302":["US","1","EntranceDose"],"0303":["US","1-2","ExposedArea"],"0306":["DS","1","DistanceSourceToEntrance"],"0307":["DS","1","DistanceSourceToSupport"],"030E":["SQ","1","ExposureDoseSequence"],"0310":["ST","1","CommentsOnRadiationDose"],"0312":["DS","1","XRayOutput"],"0314":["DS","1","HalfValueLayer"],"0316":["DS","1","OrganDose"],"0318":["CS","1","OrganExposed"],"0320":["SQ","1","BillingProcedureStepSequence"],"0321":["SQ","1","FilmConsumptionSequence"],"0324":["SQ","1","BillingSuppliesAndDevicesSequence"],"0330":["SQ","1","ReferencedProcedureStepSequence"],"0340":["SQ","1","PerformedSeriesSequence"],"0400":["LT","1","CommentsOnTheScheduledProcedureStep"],"0440":["SQ","1","ProtocolContextSequence"],"0441":["SQ","1","ContentItemModifierSequence"],"0500":["SQ","1","ScheduledSpecimenSequence"],"050A":["LO","1","SpecimenAccessionNumber"],"0512":["LO","1","ContainerIdentifier"],"0513":["SQ","1","IssuerOfTheContainerIdentifierSequence"],"0515":["SQ","1","AlternateContainerIdentifierSequence"],"0518":["SQ","1","ContainerTypeCodeSequence"],"051A":["LO","1","ContainerDescription"],"0520":["SQ","1","ContainerComponentSequence"],"0550":["SQ","1","SpecimenSequence"],"0551":["LO","1","SpecimenIdentifier"],"0552":["SQ","1","SpecimenDescriptionSequenceTrial"],"0553":["ST","1","SpecimenDescriptionTrial"],"0554":["UI","1","SpecimenUID"],"0555":["SQ","1","AcquisitionContextSequence"],"0556":["ST","1","AcquisitionContextDescription"],"0560":["SQ","1","SpecimenDescriptionSequence"],"0562":["SQ","1","IssuerOfTheSpecimenIdentifierSequence"],"059A":["SQ","1","SpecimenTypeCodeSequence"],"0600":["LO","1","SpecimenShortDescription"],"0602":["UT","1","SpecimenDetailedDescription"],"0610":["SQ","1","SpecimenPreparationSequence"],"0612":["SQ","1","SpecimenPreparationStepContentItemSequence"],"0620":["SQ","1","SpecimenLocalizationContentItemSequence"],"06FA":["LO","1","SlideIdentifier"],"0710":["SQ","1","WholeSlideMicroscopyImageFrameTypeSequence"],"071A":["SQ","1","ImageCenterPointCoordinatesSequence"],"072A":["DS","1","XOffsetInSlideCoordinateSystem"],"073A":["DS","1","YOffsetInSlideCoordinateSystem"],"074A":["DS","1","ZOffsetInSlideCoordinateSystem"],"08D8":["SQ","1","PixelSpacingSequence"],"08DA":["SQ","1","CoordinateSystemAxisCodeSequence"],"08EA":["SQ","1","MeasurementUnitsCodeSequence"],"09F8":["SQ","1","VitalStainCodeSequenceTrial"],1001:["SH","1","RequestedProcedureID"],1002:["LO","1","ReasonForTheRequestedProcedure"],1003:["SH","1","RequestedProcedurePriority"],1004:["LO","1","PatientTransportArrangements"],1005:["LO","1","RequestedProcedureLocation"],1006:["SH","1","PlacerOrderNumberProcedure"],1007:["SH","1","FillerOrderNumberProcedure"],1008:["LO","1","ConfidentialityCode"],1009:["SH","1","ReportingPriority"],"100A":["SQ","1","ReasonForRequestedProcedureCodeSequence"],1010:["PN","1-n","NamesOfIntendedRecipientsOfResults"],1011:["SQ","1","IntendedRecipientsOfResultsIdentificationSequence"],1012:["SQ","1","ReasonForPerformedProcedureCodeSequence"],1060:["LO","1","RequestedProcedureDescriptionTrial"],1101:["SQ","1","PersonIdentificationCodeSequence"],1102:["ST","1","PersonAddress"],1103:["LO","1-n","PersonTelephoneNumbers"],1104:["LT","1","PersonTelecomInformation"],1400:["LT","1","RequestedProcedureComments"],2001:["LO","1","ReasonForTheImagingServiceRequest"],2004:["DA","1","IssueDateOfImagingServiceRequest"],2005:["TM","1","IssueTimeOfImagingServiceRequest"],2006:["SH","1","PlacerOrderNumberImagingServiceRequestRetired"],2007:["SH","1","FillerOrderNumberImagingServiceRequestRetired"],2008:["PN","1","OrderEnteredBy"],2009:["SH","1","OrderEntererLocation"],2010:["SH","1","OrderCallbackPhoneNumber"],2011:["LT","1","OrderCallbackTelecomInformation"],2016:["LO","1","PlacerOrderNumberImagingServiceRequest"],2017:["LO","1","FillerOrderNumberImagingServiceRequest"],2400:["LT","1","ImagingServiceRequestComments"],3001:["LO","1","ConfidentialityConstraintOnPatientDataDescription"],4001:["CS","1","GeneralPurposeScheduledProcedureStepStatus"],4002:["CS","1","GeneralPurposePerformedProcedureStepStatus"],4003:["CS","1","GeneralPurposeScheduledProcedureStepPriority"],4004:["SQ","1","ScheduledProcessingApplicationsCodeSequence"],4005:["DT","1","ScheduledProcedureStepStartDateTime"],4006:["CS","1","MultipleCopiesFlag"],4007:["SQ","1","PerformedProcessingApplicationsCodeSequence"],4008:["DT","1","ScheduledProcedureStepExpirationDateTime"],4009:["SQ","1","HumanPerformerCodeSequence"],4010:["DT","1","ScheduledProcedureStepModificationDateTime"],4011:["DT","1","ExpectedCompletionDateTime"],4015:["SQ","1","ResultingGeneralPurposePerformedProcedureStepsSequence"],4016:["SQ","1","ReferencedGeneralPurposeScheduledProcedureStepSequence"],4018:["SQ","1","ScheduledWorkitemCodeSequence"],4019:["SQ","1","PerformedWorkitemCodeSequence"],4020:["CS","1","InputAvailabilityFlag"],4021:["SQ","1","InputInformationSequence"],4022:["SQ","1","RelevantInformationSequence"],4023:["UI","1","ReferencedGeneralPurposeScheduledProcedureStepTransactionUID"],4025:["SQ","1","ScheduledStationNameCodeSequence"],4026:["SQ","1","ScheduledStationClassCodeSequence"],4027:["SQ","1","ScheduledStationGeographicLocationCodeSequence"],4028:["SQ","1","PerformedStationNameCodeSequence"],4029:["SQ","1","PerformedStationClassCodeSequence"],4030:["SQ","1","PerformedStationGeographicLocationCodeSequence"],4031:["SQ","1","RequestedSubsequentWorkitemCodeSequence"],4032:["SQ","1","NonDICOMOutputCodeSequence"],4033:["SQ","1","OutputInformationSequence"],4034:["SQ","1","ScheduledHumanPerformersSequence"],4035:["SQ","1","ActualHumanPerformersSequence"],4036:["LO","1","HumanPerformerOrganization"],4037:["PN","1","HumanPerformerName"],4040:["CS","1","RawDataHandling"],4041:["CS","1","InputReadinessState"],4050:["DT","1","PerformedProcedureStepStartDateTime"],4051:["DT","1","PerformedProcedureStepEndDateTime"],4052:["DT","1","ProcedureStepCancellationDateTime"],4070:["SQ","1","OutputDestinationSequence"],4071:["SQ","1","DICOMStorageSequence"],4072:["SQ","1","STOWRSStorageSequence"],4073:["UR","1","StorageURL"],4074:["SQ","1","XDSStorageSequence"],8302:["DS","1","EntranceDoseInmGy"],8303:["CS","1","EntranceDoseDerivation"],9092:["SQ","1","ParametricMapFrameTypeSequence"],9094:["SQ","1","ReferencedImageRealWorldValueMappingSequence"],9096:["SQ","1","RealWorldValueMappingSequence"],9098:["SQ","1","PixelValueMappingCodeSequence"],9210:["SH","1","LUTLabel"],9211:["xs","1","RealWorldValueLastValueMapped"],9212:["FD","1-n","RealWorldValueLUTData"],9213:["FD","1","DoubleFloatRealWorldValueLastValueMapped"],9214:["FD","1","DoubleFloatRealWorldValueFirstValueMapped"],9216:["xs","1","RealWorldValueFirstValueMapped"],9220:["SQ","1","QuantityDefinitionSequence"],9224:["FD","1","RealWorldValueIntercept"],9225:["FD","1","RealWorldValueSlope"],A007:["CS","1","FindingsFlagTrial"],A010:["CS","1","RelationshipType"],A020:["SQ","1","FindingsSequenceTrial"],A021:["UI","1","FindingsGroupUIDTrial"],A022:["UI","1","ReferencedFindingsGroupUIDTrial"],A023:["DA","1","FindingsGroupRecordingDateTrial"],A024:["TM","1","FindingsGroupRecordingTimeTrial"],A026:["SQ","1","FindingsSourceCategoryCodeSequenceTrial"],A027:["LO","1","VerifyingOrganization"],A028:["SQ","1","DocumentingOrganizationIdentifierCodeSequenceTrial"],A030:["DT","1","VerificationDateTime"],A032:["DT","1","ObservationDateTime"],A033:["DT","1","ObservationStartDateTime"],A040:["CS","1","ValueType"],A043:["SQ","1","ConceptNameCodeSequence"],A047:["LO","1","MeasurementPrecisionDescriptionTrial"],A050:["CS","1","ContinuityOfContent"],A057:["CS","1-n","UrgencyOrPriorityAlertsTrial"],A060:["LO","1","SequencingIndicatorTrial"],A066:["SQ","1","DocumentIdentifierCodeSequenceTrial"],A067:["PN","1","DocumentAuthorTrial"],A068:["SQ","1","DocumentAuthorIdentifierCodeSequenceTrial"],A070:["SQ","1","IdentifierCodeSequenceTrial"],A073:["SQ","1","VerifyingObserverSequence"],A074:["OB","1","ObjectBinaryIdentifierTrial"],A075:["PN","1","VerifyingObserverName"],A076:["SQ","1","DocumentingObserverIdentifierCodeSequenceTrial"],A078:["SQ","1","AuthorObserverSequence"],A07A:["SQ","1","ParticipantSequence"],A07C:["SQ","1","CustodialOrganizationSequence"],A080:["CS","1","ParticipationType"],A082:["DT","1","ParticipationDateTime"],A084:["CS","1","ObserverType"],A085:["SQ","1","ProcedureIdentifierCodeSequenceTrial"],A088:["SQ","1","VerifyingObserverIdentificationCodeSequence"],A089:["OB","1","ObjectDirectoryBinaryIdentifierTrial"],A090:["SQ","1","EquivalentCDADocumentSequence"],A0B0:["US","2-2n","ReferencedWaveformChannels"],A110:["DA","1","DateOfDocumentOrVerbalTransactionTrial"],A112:["TM","1","TimeOfDocumentCreationOrVerbalTransactionTrial"],A120:["DT","1","DateTime"],A121:["DA","1","Date"],A122:["TM","1","Time"],A123:["PN","1","PersonName"],A124:["UI","1","UID"],A125:["CS","2","ReportStatusIDTrial"],A130:["CS","1","TemporalRangeType"],A132:["UL","1-n","ReferencedSamplePositions"],A136:["US","1-n","ReferencedFrameNumbers"],A138:["DS","1-n","ReferencedTimeOffsets"],A13A:["DT","1-n","ReferencedDateTime"],A160:["UT","1","TextValue"],A161:["FD","1-n","FloatingPointValue"],A162:["SL","1-n","RationalNumeratorValue"],A163:["UL","1-n","RationalDenominatorValue"],A167:["SQ","1","ObservationCategoryCodeSequenceTrial"],A168:["SQ","1","ConceptCodeSequence"],A16A:["ST","1","BibliographicCitationTrial"],A170:["SQ","1","PurposeOfReferenceCodeSequence"],A171:["UI","1","ObservationUID"],A172:["UI","1","ReferencedObservationUIDTrial"],A173:["CS","1","ReferencedObservationClassTrial"],A174:["CS","1","ReferencedObjectObservationClassTrial"],A180:["US","1","AnnotationGroupNumber"],A192:["DA","1","ObservationDateTrial"],A193:["TM","1","ObservationTimeTrial"],A194:["CS","1","MeasurementAutomationTrial"],A195:["SQ","1","ModifierCodeSequence"],A224:["ST","1","IdentificationDescriptionTrial"],A290:["CS","1","CoordinatesSetGeometricTypeTrial"],A296:["SQ","1","AlgorithmCodeSequenceTrial"],A297:["ST","1","AlgorithmDescriptionTrial"],A29A:["SL","2-2n","PixelCoordinatesSetTrial"],A300:["SQ","1","MeasuredValueSequence"],A301:["SQ","1","NumericValueQualifierCodeSequence"],A307:["PN","1","CurrentObserverTrial"],A30A:["DS","1-n","NumericValue"],A313:["SQ","1","ReferencedAccessionSequenceTrial"],A33A:["ST","1","ReportStatusCommentTrial"],A340:["SQ","1","ProcedureContextSequenceTrial"],A352:["PN","1","VerbalSourceTrial"],A353:["ST","1","AddressTrial"],A354:["LO","1","TelephoneNumberTrial"],A358:["SQ","1","VerbalSourceIdentifierCodeSequenceTrial"],A360:["SQ","1","PredecessorDocumentsSequence"],A370:["SQ","1","ReferencedRequestSequence"],A372:["SQ","1","PerformedProcedureCodeSequence"],A375:["SQ","1","CurrentRequestedProcedureEvidenceSequence"],A380:["SQ","1","ReportDetailSequenceTrial"],A385:["SQ","1","PertinentOtherEvidenceSequence"],A390:["SQ","1","HL7StructuredDocumentReferenceSequence"],A402:["UI","1","ObservationSubjectUIDTrial"],A403:["CS","1","ObservationSubjectClassTrial"],A404:["SQ","1","ObservationSubjectTypeCodeSequenceTrial"],A491:["CS","1","CompletionFlag"],A492:["LO","1","CompletionFlagDescription"],A493:["CS","1","VerificationFlag"],A494:["CS","1","ArchiveRequested"],A496:["CS","1","PreliminaryFlag"],A504:["SQ","1","ContentTemplateSequence"],A525:["SQ","1","IdenticalDocumentsSequence"],A600:["CS","1","ObservationSubjectContextFlagTrial"],A601:["CS","1","ObserverContextFlagTrial"],A603:["CS","1","ProcedureContextFlagTrial"],A730:["SQ","1","ContentSequence"],A731:["SQ","1","RelationshipSequenceTrial"],A732:["SQ","1","RelationshipTypeCodeSequenceTrial"],A744:["SQ","1","LanguageCodeSequenceTrial"],A801:["SQ","1","TabulatedValuesSequence"],A802:["UL","1","NumberOfTableRows"],A803:["UL","1","NumberOfTableColumns"],A804:["UL","1","TableRowNumber"],A805:["UL","1","TableColumnNumber"],A806:["SQ","1","TableRowDefinitionSequence"],A807:["SQ","1","TableColumnDefinitionSequence"],A808:["SQ","1","CellValuesSequence"],A992:["ST","1","UniformResourceLocatorTrial"],B020:["SQ","1","WaveformAnnotationSequence"],DB00:["CS","1","TemplateIdentifier"],DB06:["DT","1","TemplateVersion"],DB07:["DT","1","TemplateLocalVersion"],DB0B:["CS","1","TemplateExtensionFlag"],DB0C:["UI","1","TemplateExtensionOrganizationUID"],DB0D:["UI","1","TemplateExtensionCreatorUID"],DB73:["UL","1-n","ReferencedContentItemIdentifier"],E001:["ST","1","HL7InstanceIdentifier"],E004:["DT","1","HL7DocumentEffectiveTime"],E006:["SQ","1","HL7DocumentTypeCodeSequence"],E008:["SQ","1","DocumentClassCodeSequence"],E010:["UR","1","RetrieveURI"],E011:["UI","1","RetrieveLocationUID"],E020:["CS","1","TypeOfInstances"],E021:["SQ","1","DICOMRetrievalSequence"],E022:["SQ","1","DICOMMediaRetrievalSequence"],E023:["SQ","1","WADORetrievalSequence"],E024:["SQ","1","XDSRetrievalSequence"],E025:["SQ","1","WADORSRetrievalSequence"],E030:["UI","1","RepositoryUniqueID"],E031:["UI","1","HomeCommunityID"]},"0042":{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","DocumentTitle"],"0011":["OB","1","EncapsulatedDocument"],"0012":["LO","1","MIMETypeOfEncapsulatedDocument"],"0013":["SQ","1","SourceInstanceSequence"],"0014":["LO","1-n","ListOfMIMETypes"],"0015":["UL","1","EncapsulatedDocumentLength"]},"0044":{"0000":["UL","1","GenericGroupLength"],"0001":["ST","1","ProductPackageIdentifier"],"0002":["CS","1","SubstanceAdministrationApproval"],"0003":["LT","1","ApprovalStatusFurtherDescription"],"0004":["DT","1","ApprovalStatusDateTime"],"0007":["SQ","1","ProductTypeCodeSequence"],"0008":["LO","1-n","ProductName"],"0009":["LT","1","ProductDescription"],"000A":["LO","1","ProductLotIdentifier"],"000B":["DT","1","ProductExpirationDateTime"],"0010":["DT","1","SubstanceAdministrationDateTime"],"0011":["LO","1","SubstanceAdministrationNotes"],"0012":["LO","1","SubstanceAdministrationDeviceID"],"0013":["SQ","1","ProductParameterSequence"],"0019":["SQ","1","SubstanceAdministrationParameterSequence"],"0100":["SQ","1","ApprovalSequence"],"0101":["SQ","1","AssertionCodeSequence"],"0102":["UI","1","AssertionUID"],"0103":["SQ","1","AsserterIdentificationSequence"],"0104":["DT","1","AssertionDateTime"],"0105":["DT","1","AssertionExpirationDateTime"],"0106":["UT","1","AssertionComments"],"0107":["SQ","1","RelatedAssertionSequence"],"0108":["UI","1","ReferencedAssertionUID"],"0109":["SQ","1","ApprovalSubjectSequence"],"010A":["SQ","1","OrganizationalRoleCodeSequence"]},"0046":{"0000":["UL","1","GenericGroupLength"],"0012":["LO","1","LensDescription"],"0014":["SQ","1","RightLensSequence"],"0015":["SQ","1","LeftLensSequence"],"0016":["SQ","1","UnspecifiedLateralityLensSequence"],"0018":["SQ","1","CylinderSequence"],"0028":["SQ","1","PrismSequence"],"0030":["FD","1","HorizontalPrismPower"],"0032":["CS","1","HorizontalPrismBase"],"0034":["FD","1","VerticalPrismPower"],"0036":["CS","1","VerticalPrismBase"],"0038":["CS","1","LensSegmentType"],"0040":["FD","1","OpticalTransmittance"],"0042":["FD","1","ChannelWidth"],"0044":["FD","1","PupilSize"],"0046":["FD","1","CornealSize"],"0047":["SQ","1","CornealSizeSequence"],"0050":["SQ","1","AutorefractionRightEyeSequence"],"0052":["SQ","1","AutorefractionLeftEyeSequence"],"0060":["FD","1","DistancePupillaryDistance"],"0062":["FD","1","NearPupillaryDistance"],"0063":["FD","1","IntermediatePupillaryDistance"],"0064":["FD","1","OtherPupillaryDistance"],"0070":["SQ","1","KeratometryRightEyeSequence"],"0071":["SQ","1","KeratometryLeftEyeSequence"],"0074":["SQ","1","SteepKeratometricAxisSequence"],"0075":["FD","1","RadiusOfCurvature"],"0076":["FD","1","KeratometricPower"],"0077":["FD","1","KeratometricAxis"],"0080":["SQ","1","FlatKeratometricAxisSequence"],"0092":["CS","1","BackgroundColor"],"0094":["CS","1","Optotype"],"0095":["CS","1","OptotypePresentation"],"0097":["SQ","1","SubjectiveRefractionRightEyeSequence"],"0098":["SQ","1","SubjectiveRefractionLeftEyeSequence"],"0100":["SQ","1","AddNearSequence"],"0101":["SQ","1","AddIntermediateSequence"],"0102":["SQ","1","AddOtherSequence"],"0104":["FD","1","AddPower"],"0106":["FD","1","ViewingDistance"],"0110":["SQ","1","CorneaMeasurementsSequence"],"0111":["SQ","1","SourceOfCorneaMeasurementDataCodeSequence"],"0112":["SQ","1","SteepCornealAxisSequence"],"0113":["SQ","1","FlatCornealAxisSequence"],"0114":["FD","1","CornealPower"],"0115":["FD","1","CornealAxis"],"0116":["SQ","1","CorneaMeasurementMethodCodeSequence"],"0117":["FL","1","RefractiveIndexOfCornea"],"0118":["FL","1","RefractiveIndexOfAqueousHumor"],"0121":["SQ","1","VisualAcuityTypeCodeSequence"],"0122":["SQ","1","VisualAcuityRightEyeSequence"],"0123":["SQ","1","VisualAcuityLeftEyeSequence"],"0124":["SQ","1","VisualAcuityBothEyesOpenSequence"],"0125":["CS","1","ViewingDistanceType"],"0135":["SS","2","VisualAcuityModifiers"],"0137":["FD","1","DecimalVisualAcuity"],"0139":["LO","1","OptotypeDetailedDefinition"],"0145":["SQ","1","ReferencedRefractiveMeasurementsSequence"],"0146":["FD","1","SpherePower"],"0147":["FD","1","CylinderPower"],"0201":["CS","1","CornealTopographySurface"],"0202":["FL","2","CornealVertexLocation"],"0203":["FL","1","PupilCentroidXCoordinate"],"0204":["FL","1","PupilCentroidYCoordinate"],"0205":["FL","1","EquivalentPupilRadius"],"0207":["SQ","1","CornealTopographyMapTypeCodeSequence"],"0208":["IS","2-2n","VerticesOfTheOutlineOfPupil"],"0210":["SQ","1","CornealTopographyMappingNormalsSequence"],"0211":["SQ","1","MaximumCornealCurvatureSequence"],"0212":["FL","1","MaximumCornealCurvature"],"0213":["FL","2","MaximumCornealCurvatureLocation"],"0215":["SQ","1","MinimumKeratometricSequence"],"0218":["SQ","1","SimulatedKeratometricCylinderSequence"],"0220":["FL","1","AverageCornealPower"],"0224":["FL","1","CornealISValue"],"0227":["FL","1","AnalyzedArea"],"0230":["FL","1","SurfaceRegularityIndex"],"0232":["FL","1","SurfaceAsymmetryIndex"],"0234":["FL","1","CornealEccentricityIndex"],"0236":["FL","1","KeratoconusPredictionIndex"],"0238":["FL","1","DecimalPotentialVisualAcuity"],"0242":["CS","1","CornealTopographyMapQualityEvaluation"],"0244":["SQ","1","SourceImageCornealProcessedDataSequence"],"0247":["FL","3","CornealPointLocation"],"0248":["CS","1","CornealPointEstimated"],"0249":["FL","1","AxialPower"],"0250":["FL","1","TangentialPower"],"0251":["FL","1","RefractivePower"],"0252":["FL","1","RelativeElevation"],"0253":["FL","1","CornealWavefront"]},"0048":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ImagedVolumeWidth"],"0002":["FL","1","ImagedVolumeHeight"],"0003":["FL","1","ImagedVolumeDepth"],"0006":["UL","1","TotalPixelMatrixColumns"],"0007":["UL","1","TotalPixelMatrixRows"],"0008":["SQ","1","TotalPixelMatrixOriginSequence"],"0010":["CS","1","SpecimenLabelInImage"],"0011":["CS","1","FocusMethod"],"0012":["CS","1","ExtendedDepthOfField"],"0013":["US","1","NumberOfFocalPlanes"],"0014":["FL","1","DistanceBetweenFocalPlanes"],"0015":["US","3","RecommendedAbsentPixelCIELabValue"],"0100":["SQ","1","IlluminatorTypeCodeSequence"],"0102":["DS","6","ImageOrientationSlide"],"0105":["SQ","1","OpticalPathSequence"],"0106":["SH","1","OpticalPathIdentifier"],"0107":["ST","1","OpticalPathDescription"],"0108":["SQ","1","IlluminationColorCodeSequence"],"0110":["SQ","1","SpecimenReferenceSequence"],"0111":["DS","1","CondenserLensPower"],"0112":["DS","1","ObjectiveLensPower"],"0113":["DS","1","ObjectiveLensNumericalAperture"],"0120":["SQ","1","PaletteColorLookupTableSequence"],"0200":["SQ","1","ReferencedImageNavigationSequence"],"0201":["US","2","TopLeftHandCornerOfLocalizerArea"],"0202":["US","2","BottomRightHandCornerOfLocalizerArea"],"0207":["SQ","1","OpticalPathIdentificationSequence"],"021A":["SQ","1","PlanePositionSlideSequence"],"021E":["SL","1","ColumnPositionInTotalImagePixelMatrix"],"021F":["SL","1","RowPositionInTotalImagePixelMatrix"],"0301":["CS","1","PixelOriginInterpretation"],"0302":["UL","1","NumberOfOpticalPaths"],"0303":["UL","1","TotalPixelMatrixFocalPlanes"]},"0050":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","CalibrationImage"],"0010":["SQ","1","DeviceSequence"],"0012":["SQ","1","ContainerComponentTypeCodeSequence"],"0013":["FD","1","ContainerComponentThickness"],"0014":["DS","1","DeviceLength"],"0015":["FD","1","ContainerComponentWidth"],"0016":["DS","1","DeviceDiameter"],"0017":["CS","1","DeviceDiameterUnits"],"0018":["DS","1","DeviceVolume"],"0019":["DS","1","InterMarkerDistance"],"001A":["CS","1","ContainerComponentMaterial"],"001B":["LO","1","ContainerComponentID"],"001C":["FD","1","ContainerComponentLength"],"001D":["FD","1","ContainerComponentDiameter"],"001E":["LO","1","ContainerComponentDescription"],"0020":["LO","1","DeviceDescription"],"0021":["ST","1","LongDeviceDescription"]},"0052":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ContrastBolusIngredientPercentByVolume"],"0002":["FD","1","OCTFocalDistance"],"0003":["FD","1","BeamSpotSize"],"0004":["FD","1","EffectiveRefractiveIndex"],"0006":["CS","1","OCTAcquisitionDomain"],"0007":["FD","1","OCTOpticalCenterWavelength"],"0008":["FD","1","AxialResolution"],"0009":["FD","1","RangingDepth"],"0011":["FD","1","ALineRate"],"0012":["US","1","ALinesPerFrame"],"0013":["FD","1","CatheterRotationalRate"],"0014":["FD","1","ALinePixelSpacing"],"0016":["SQ","1","ModeOfPercutaneousAccessSequence"],"0025":["SQ","1","IntravascularOCTFrameTypeSequence"],"0026":["CS","1","OCTZOffsetApplied"],"0027":["SQ","1","IntravascularFrameContentSequence"],"0028":["FD","1","IntravascularLongitudinalDistance"],"0029":["SQ","1","IntravascularOCTFrameContentSequence"],"0030":["SS","1","OCTZOffsetCorrection"],"0031":["CS","1","CatheterDirectionOfRotation"],"0033":["FD","1","SeamLineLocation"],"0034":["FD","1","FirstALineLocation"],"0036":["US","1","SeamLineIndex"],"0038":["US","1","NumberOfPaddedALines"],"0039":["CS","1","InterpolationType"],"003A":["CS","1","RefractiveIndexApplied"]},"0054":{"0000":["UL","1","GenericGroupLength"],"0010":["US","1-n","EnergyWindowVector"],"0011":["US","1","NumberOfEnergyWindows"],"0012":["SQ","1","EnergyWindowInformationSequence"],"0013":["SQ","1","EnergyWindowRangeSequence"],"0014":["DS","1","EnergyWindowLowerLimit"],"0015":["DS","1","EnergyWindowUpperLimit"],"0016":["SQ","1","RadiopharmaceuticalInformationSequence"],"0017":["IS","1","ResidualSyringeCounts"],"0018":["SH","1","EnergyWindowName"],"0020":["US","1-n","DetectorVector"],"0021":["US","1","NumberOfDetectors"],"0022":["SQ","1","DetectorInformationSequence"],"0030":["US","1-n","PhaseVector"],"0031":["US","1","NumberOfPhases"],"0032":["SQ","1","PhaseInformationSequence"],"0033":["US","1","NumberOfFramesInPhase"],"0036":["IS","1","PhaseDelay"],"0038":["IS","1","PauseBetweenFrames"],"0039":["CS","1","PhaseDescription"],"0050":["US","1-n","RotationVector"],"0051":["US","1","NumberOfRotations"],"0052":["SQ","1","RotationInformationSequence"],"0053":["US","1","NumberOfFramesInRotation"],"0060":["US","1-n","RRIntervalVector"],"0061":["US","1","NumberOfRRIntervals"],"0062":["SQ","1","GatedInformationSequence"],"0063":["SQ","1","DataInformationSequence"],"0070":["US","1-n","TimeSlotVector"],"0071":["US","1","NumberOfTimeSlots"],"0072":["SQ","1","TimeSlotInformationSequence"],"0073":["DS","1","TimeSlotTime"],"0080":["US","1-n","SliceVector"],"0081":["US","1","NumberOfSlices"],"0090":["US","1-n","AngularViewVector"],"0100":["US","1-n","TimeSliceVector"],"0101":["US","1","NumberOfTimeSlices"],"0200":["DS","1","StartAngle"],"0202":["CS","1","TypeOfDetectorMotion"],"0210":["IS","1-n","TriggerVector"],"0211":["US","1","NumberOfTriggersInPhase"],"0220":["SQ","1","ViewCodeSequence"],"0222":["SQ","1","ViewModifierCodeSequence"],"0300":["SQ","1","RadionuclideCodeSequence"],"0302":["SQ","1","AdministrationRouteCodeSequence"],"0304":["SQ","1","RadiopharmaceuticalCodeSequence"],"0306":["SQ","1","CalibrationDataSequence"],"0308":["US","1","EnergyWindowNumber"],"0400":["SH","1","ImageID"],"0410":["SQ","1","PatientOrientationCodeSequence"],"0412":["SQ","1","PatientOrientationModifierCodeSequence"],"0414":["SQ","1","PatientGantryRelationshipCodeSequence"],"0500":["CS","1","SliceProgressionDirection"],"0501":["CS","1","ScanProgressionDirection"],1e3:["CS","2","SeriesType"],1001:["CS","1","Units"],1002:["CS","1","CountsSource"],1004:["CS","1","ReprojectionMethod"],1006:["CS","1","SUVType"],1100:["CS","1","RandomsCorrectionMethod"],1101:["LO","1","AttenuationCorrectionMethod"],1102:["CS","1","DecayCorrection"],1103:["LO","1","ReconstructionMethod"],1104:["LO","1","DetectorLinesOfResponseUsed"],1105:["LO","1","ScatterCorrectionMethod"],1200:["DS","1","AxialAcceptance"],1201:["IS","2","AxialMash"],1202:["IS","1","TransverseMash"],1203:["DS","2","DetectorElementSize"],1210:["DS","1","CoincidenceWindowWidth"],1220:["CS","1-n","SecondaryCountsType"],1300:["DS","1","FrameReferenceTime"],1310:["IS","1","PrimaryPromptsCountsAccumulated"],1311:["IS","1-n","SecondaryCountsAccumulated"],1320:["DS","1","SliceSensitivityFactor"],1321:["DS","1","DecayFactor"],1322:["DS","1","DoseCalibrationFactor"],1323:["DS","1","ScatterFractionFactor"],1324:["DS","1","DeadTimeFactor"],1330:["US","1","ImageIndex"],1400:["CS","1-n","CountsIncluded"],1401:["CS","1","DeadTimeCorrectionFlag"]},"0060":{"0000":["UL","1","GenericGroupLength"],3e3:["SQ","1","HistogramSequence"],3002:["US","1","HistogramNumberOfBins"],3004:["xs","1","HistogramFirstBinValue"],3006:["xs","1","HistogramLastBinValue"],3008:["US","1","HistogramBinWidth"],3010:["LO","1","HistogramExplanation"],3020:["UL","1-n","HistogramData"]},"0062":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","SegmentationType"],"0002":["SQ","1","SegmentSequence"],"0003":["SQ","1","SegmentedPropertyCategoryCodeSequence"],"0004":["US","1","SegmentNumber"],"0005":["LO","1","SegmentLabel"],"0006":["ST","1","SegmentDescription"],"0007":["SQ","1","SegmentationAlgorithmIdentificationSequence"],"0008":["CS","1","SegmentAlgorithmType"],"0009":["LO","1-n","SegmentAlgorithmName"],"000A":["SQ","1","SegmentIdentificationSequence"],"000B":["US","1-n","ReferencedSegmentNumber"],"000C":["US","1","RecommendedDisplayGrayscaleValue"],"000D":["US","3","RecommendedDisplayCIELabValue"],"000E":["US","1","MaximumFractionalValue"],"000F":["SQ","1","SegmentedPropertyTypeCodeSequence"],"0010":["CS","1","SegmentationFractionalType"],"0011":["SQ","1","SegmentedPropertyTypeModifierCodeSequence"],"0012":["SQ","1","UsedSegmentsSequence"],"0013":["CS","1","SegmentsOverlap"],"0020":["UT","1","TrackingID"],"0021":["UI","1","TrackingUID"]},"0064":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","DeformableRegistrationSequence"],"0003":["UI","1","SourceFrameOfReferenceUID"],"0005":["SQ","1","DeformableRegistrationGridSequence"],"0007":["UL","3","GridDimensions"],"0008":["FD","3","GridResolution"],"0009":["OF","1","VectorGridData"],"000F":["SQ","1","PreDeformationMatrixRegistrationSequence"],"0010":["SQ","1","PostDeformationMatrixRegistrationSequence"]},"0066":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","NumberOfSurfaces"],"0002":["SQ","1","SurfaceSequence"],"0003":["UL","1","SurfaceNumber"],"0004":["LT","1","SurfaceComments"],"0009":["CS","1","SurfaceProcessing"],"000A":["FL","1","SurfaceProcessingRatio"],"000B":["LO","1","SurfaceProcessingDescription"],"000C":["FL","1","RecommendedPresentationOpacity"],"000D":["CS","1","RecommendedPresentationType"],"000E":["CS","1","FiniteVolume"],"0010":["CS","1","Manifold"],"0011":["SQ","1","SurfacePointsSequence"],"0012":["SQ","1","SurfacePointsNormalsSequence"],"0013":["SQ","1","SurfaceMeshPrimitivesSequence"],"0015":["UL","1","NumberOfSurfacePoints"],"0016":["OF","1","PointCoordinatesData"],"0017":["FL","3","PointPositionAccuracy"],"0018":["FL","1","MeanPointDistance"],"0019":["FL","1","MaximumPointDistance"],"001A":["FL","6","PointsBoundingBoxCoordinates"],"001B":["FL","3","AxisOfRotation"],"001C":["FL","3","CenterOfRotation"],"001E":["UL","1","NumberOfVectors"],"001F":["US","1","VectorDimensionality"],"0020":["FL","1-n","VectorAccuracy"],"0021":["OF","1","VectorCoordinateData"],"0022":["OD","1","DoublePointCoordinatesData"],"0023":["OW","1","TrianglePointIndexList"],"0024":["OW","1","EdgePointIndexList"],"0025":["OW","1","VertexPointIndexList"],"0026":["SQ","1","TriangleStripSequence"],"0027":["SQ","1","TriangleFanSequence"],"0028":["SQ","1","LineSequence"],"0029":["OW","1","PrimitivePointIndexList"],"002A":["UL","1","SurfaceCount"],"002B":["SQ","1","ReferencedSurfaceSequence"],"002C":["UL","1","ReferencedSurfaceNumber"],"002D":["SQ","1","SegmentSurfaceGenerationAlgorithmIdentificationSequence"],"002E":["SQ","1","SegmentSurfaceSourceInstanceSequence"],"002F":["SQ","1","AlgorithmFamilyCodeSequence"],"0030":["SQ","1","AlgorithmNameCodeSequence"],"0031":["LO","1","AlgorithmVersion"],"0032":["LT","1","AlgorithmParameters"],"0034":["SQ","1","FacetSequence"],"0035":["SQ","1","SurfaceProcessingAlgorithmIdentificationSequence"],"0036":["LO","1","AlgorithmName"],"0037":["FL","1","RecommendedPointRadius"],"0038":["FL","1","RecommendedLineThickness"],"0040":["OL","1","LongPrimitivePointIndexList"],"0041":["OL","1","LongTrianglePointIndexList"],"0042":["OL","1","LongEdgePointIndexList"],"0043":["OL","1","LongVertexPointIndexList"],"0101":["SQ","1","TrackSetSequence"],"0102":["SQ","1","TrackSequence"],"0103":["OW","1","RecommendedDisplayCIELabValueList"],"0104":["SQ","1","TrackingAlgorithmIdentificationSequence"],"0105":["UL","1","TrackSetNumber"],"0106":["LO","1","TrackSetLabel"],"0107":["UT","1","TrackSetDescription"],"0108":["SQ","1","TrackSetAnatomicalTypeCodeSequence"],"0121":["SQ","1","MeasurementsSequence"],"0124":["SQ","1","TrackSetStatisticsSequence"],"0125":["OF","1","FloatingPointValues"],"0129":["OL","1","TrackPointIndexList"],"0130":["SQ","1","TrackStatisticsSequence"],"0132":["SQ","1","MeasurementValuesSequence"],"0133":["SQ","1","DiffusionAcquisitionCodeSequence"],"0134":["SQ","1","DiffusionModelCodeSequence"]},"0068":{"0000":["UL","1","GenericGroupLength"],6210:["LO","1","ImplantSize"],6221:["LO","1","ImplantTemplateVersion"],6222:["SQ","1","ReplacedImplantTemplateSequence"],6223:["CS","1","ImplantType"],6224:["SQ","1","DerivationImplantTemplateSequence"],6225:["SQ","1","OriginalImplantTemplateSequence"],6226:["DT","1","EffectiveDateTime"],6230:["SQ","1","ImplantTargetAnatomySequence"],6260:["SQ","1","InformationFromManufacturerSequence"],6265:["SQ","1","NotificationFromManufacturerSequence"],6270:["DT","1","InformationIssueDateTime"],6280:["ST","1","InformationSummary"],"62A0":["SQ","1","ImplantRegulatoryDisapprovalCodeSequence"],"62A5":["FD","1","OverallTemplateSpatialTolerance"],"62C0":["SQ","1","HPGLDocumentSequence"],"62D0":["US","1","HPGLDocumentID"],"62D5":["LO","1","HPGLDocumentLabel"],"62E0":["SQ","1","ViewOrientationCodeSequence"],"62F0":["SQ","1","ViewOrientationModifierCodeSequence"],"62F2":["FD","1","HPGLDocumentScaling"],6300:["OB","1","HPGLDocument"],6310:["US","1","HPGLContourPenNumber"],6320:["SQ","1","HPGLPenSequence"],6330:["US","1","HPGLPenNumber"],6340:["LO","1","HPGLPenLabel"],6345:["ST","1","HPGLPenDescription"],6346:["FD","2","RecommendedRotationPoint"],6347:["FD","4","BoundingRectangle"],6350:["US","1-n","ImplantTemplate3DModelSurfaceNumber"],6360:["SQ","1","SurfaceModelDescriptionSequence"],6380:["LO","1","SurfaceModelLabel"],6390:["FD","1","SurfaceModelScalingFactor"],"63A0":["SQ","1","MaterialsCodeSequence"],"63A4":["SQ","1","CoatingMaterialsCodeSequence"],"63A8":["SQ","1","ImplantTypeCodeSequence"],"63AC":["SQ","1","FixationMethodCodeSequence"],"63B0":["SQ","1","MatingFeatureSetsSequence"],"63C0":["US","1","MatingFeatureSetID"],"63D0":["LO","1","MatingFeatureSetLabel"],"63E0":["SQ","1","MatingFeatureSequence"],"63F0":["US","1","MatingFeatureID"],6400:["SQ","1","MatingFeatureDegreeOfFreedomSequence"],6410:["US","1","DegreeOfFreedomID"],6420:["CS","1","DegreeOfFreedomType"],6430:["SQ","1","TwoDMatingFeatureCoordinatesSequence"],6440:["US","1","ReferencedHPGLDocumentID"],6450:["FD","2","TwoDMatingPoint"],6460:["FD","4","TwoDMatingAxes"],6470:["SQ","1","TwoDDegreeOfFreedomSequence"],6490:["FD","3","ThreeDDegreeOfFreedomAxis"],"64A0":["FD","2","RangeOfFreedom"],"64C0":["FD","3","ThreeDMatingPoint"],"64D0":["FD","9","ThreeDMatingAxes"],"64F0":["FD","3","TwoDDegreeOfFreedomAxis"],6500:["SQ","1","PlanningLandmarkPointSequence"],6510:["SQ","1","PlanningLandmarkLineSequence"],6520:["SQ","1","PlanningLandmarkPlaneSequence"],6530:["US","1","PlanningLandmarkID"],6540:["LO","1","PlanningLandmarkDescription"],6545:["SQ","1","PlanningLandmarkIdentificationCodeSequence"],6550:["SQ","1","TwoDPointCoordinatesSequence"],6560:["FD","2","TwoDPointCoordinates"],6590:["FD","3","ThreeDPointCoordinates"],"65A0":["SQ","1","TwoDLineCoordinatesSequence"],"65B0":["FD","4","TwoDLineCoordinates"],"65D0":["FD","6","ThreeDLineCoordinates"],"65E0":["SQ","1","TwoDPlaneCoordinatesSequence"],"65F0":["FD","4","TwoDPlaneIntersection"],6610:["FD","3","ThreeDPlaneOrigin"],6620:["FD","3","ThreeDPlaneNormal"],7001:["CS","1","ModelModification"],7002:["CS","1","ModelMirroring"],7003:["SQ","1","ModelUsageCodeSequence"],7004:["UI","1","ModelGroupUID"],7005:["UR","1","RelativeURIReferenceWithinEncapsulatedDocument"]},"006A":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AnnotationCoordinateType"],"0002":["SQ","1","AnnotationGroupSequence"],"0003":["UI","1","AnnotationGroupUID"],"0005":["LO","1","AnnotationGroupLabel"],"0006":["UT","1","AnnotationGroupDescription"],"0007":["CS","1","AnnotationGroupGenerationType"],"0008":["SQ","1","AnnotationGroupAlgorithmIdentificationSequence"],"0009":["SQ","1","AnnotationPropertyCategoryCodeSequence"],"000A":["SQ","1","AnnotationPropertyTypeCodeSequence"],"000B":["SQ","1","AnnotationPropertyTypeModifierCodeSequence"],"000C":["UL","1","NumberOfAnnotations"],"000D":["CS","1","AnnotationAppliesToAllOpticalPaths"],"000E":["SH","1-n","ReferencedOpticalPathIdentifier"],"000F":["CS","1","AnnotationAppliesToAllZPlanes"],"0010":["FD","1-n","CommonZCoordinateValue"],"0011":["OL","1","AnnotationIndexList"]},"0070":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","GraphicAnnotationSequence"],"0002":["CS","1","GraphicLayer"],"0003":["CS","1","BoundingBoxAnnotationUnits"],"0004":["CS","1","AnchorPointAnnotationUnits"],"0005":["CS","1","GraphicAnnotationUnits"],"0006":["ST","1","UnformattedTextValue"],"0008":["SQ","1","TextObjectSequence"],"0009":["SQ","1","GraphicObjectSequence"],"0010":["FL","2","BoundingBoxTopLeftHandCorner"],"0011":["FL","2","BoundingBoxBottomRightHandCorner"],"0012":["CS","1","BoundingBoxTextHorizontalJustification"],"0014":["FL","2","AnchorPoint"],"0015":["CS","1","AnchorPointVisibility"],"0020":["US","1","GraphicDimensions"],"0021":["US","1","NumberOfGraphicPoints"],"0022":["FL","2-n","GraphicData"],"0023":["CS","1","GraphicType"],"0024":["CS","1","GraphicFilled"],"0040":["IS","1","ImageRotationRetired"],"0041":["CS","1","ImageHorizontalFlip"],"0042":["US","1","ImageRotation"],"0050":["US","2","DisplayedAreaTopLeftHandCornerTrial"],"0051":["US","2","DisplayedAreaBottomRightHandCornerTrial"],"0052":["SL","2","DisplayedAreaTopLeftHandCorner"],"0053":["SL","2","DisplayedAreaBottomRightHandCorner"],"005A":["SQ","1","DisplayedAreaSelectionSequence"],"0060":["SQ","1","GraphicLayerSequence"],"0062":["IS","1","GraphicLayerOrder"],"0066":["US","1","GraphicLayerRecommendedDisplayGrayscaleValue"],"0067":["US","3","GraphicLayerRecommendedDisplayRGBValue"],"0068":["LO","1","GraphicLayerDescription"],"0080":["CS","1","ContentLabel"],"0081":["LO","1","ContentDescription"],"0082":["DA","1","PresentationCreationDate"],"0083":["TM","1","PresentationCreationTime"],"0084":["PN","1","ContentCreatorName"],"0086":["SQ","1","ContentCreatorIdentificationCodeSequence"],"0087":["SQ","1","AlternateContentDescriptionSequence"],"0100":["CS","1","PresentationSizeMode"],"0101":["DS","2","PresentationPixelSpacing"],"0102":["IS","2","PresentationPixelAspectRatio"],"0103":["FL","1","PresentationPixelMagnificationRatio"],"0207":["LO","1","GraphicGroupLabel"],"0208":["ST","1","GraphicGroupDescription"],"0209":["SQ","1","CompoundGraphicSequence"],"0226":["UL","1","CompoundGraphicInstanceID"],"0227":["LO","1","FontName"],"0228":["CS","1","FontNameType"],"0229":["LO","1","CSSFontName"],"0230":["FD","1","RotationAngle"],"0231":["SQ","1","TextStyleSequence"],"0232":["SQ","1","LineStyleSequence"],"0233":["SQ","1","FillStyleSequence"],"0234":["SQ","1","GraphicGroupSequence"],"0241":["US","3","TextColorCIELabValue"],"0242":["CS","1","HorizontalAlignment"],"0243":["CS","1","VerticalAlignment"],"0244":["CS","1","ShadowStyle"],"0245":["FL","1","ShadowOffsetX"],"0246":["FL","1","ShadowOffsetY"],"0247":["US","3","ShadowColorCIELabValue"],"0248":["CS","1","Underlined"],"0249":["CS","1","Bold"],"0250":["CS","1","Italic"],"0251":["US","3","PatternOnColorCIELabValue"],"0252":["US","3","PatternOffColorCIELabValue"],"0253":["FL","1","LineThickness"],"0254":["CS","1","LineDashingStyle"],"0255":["UL","1","LinePattern"],"0256":["OB","1","FillPattern"],"0257":["CS","1","FillMode"],"0258":["FL","1","ShadowOpacity"],"0261":["FL","1","GapLength"],"0262":["FL","1","DiameterOfVisibility"],"0273":["FL","2","RotationPoint"],"0274":["CS","1","TickAlignment"],"0278":["CS","1","ShowTickLabel"],"0279":["CS","1","TickLabelAlignment"],"0282":["CS","1","CompoundGraphicUnits"],"0284":["FL","1","PatternOnOpacity"],"0285":["FL","1","PatternOffOpacity"],"0287":["SQ","1","MajorTicksSequence"],"0288":["FL","1","TickPosition"],"0289":["SH","1","TickLabel"],"0294":["CS","1","CompoundGraphicType"],"0295":["UL","1","GraphicGroupID"],"0306":["CS","1","ShapeType"],"0308":["SQ","1","RegistrationSequence"],"0309":["SQ","1","MatrixRegistrationSequence"],"030A":["SQ","1","MatrixSequence"],"030B":["FD","16","FrameOfReferenceToDisplayedCoordinateSystemTransformationMatrix"],"030C":["CS","1","FrameOfReferenceTransformationMatrixType"],"030D":["SQ","1","RegistrationTypeCodeSequence"],"030F":["ST","1","FiducialDescription"],"0310":["SH","1","FiducialIdentifier"],"0311":["SQ","1","FiducialIdentifierCodeSequence"],"0312":["FD","1","ContourUncertaintyRadius"],"0314":["SQ","1","UsedFiducialsSequence"],"0318":["SQ","1","GraphicCoordinatesDataSequence"],"031A":["UI","1","FiducialUID"],"031B":["UI","1","ReferencedFiducialUID"],"031C":["SQ","1","FiducialSetSequence"],"031E":["SQ","1","FiducialSequence"],"031F":["SQ","1","FiducialsPropertyCategoryCodeSequence"],"0401":["US","3","GraphicLayerRecommendedDisplayCIELabValue"],"0402":["SQ","1","BlendingSequence"],"0403":["FL","1","RelativeOpacity"],"0404":["SQ","1","ReferencedSpatialRegistrationSequence"],"0405":["CS","1","BlendingPosition"],1101:["UI","1","PresentationDisplayCollectionUID"],1102:["UI","1","PresentationSequenceCollectionUID"],1103:["US","1","PresentationSequencePositionIndex"],1104:["SQ","1","RenderedImageReferenceSequence"],1201:["SQ","1","VolumetricPresentationStateInputSequence"],1202:["CS","1","PresentationInputType"],1203:["US","1","InputSequencePositionIndex"],1204:["CS","1","Crop"],1205:["US","1-n","CroppingSpecificationIndex"],1206:["CS","1","CompositingMethod"],1207:["US","1","VolumetricPresentationInputNumber"],1208:["CS","1","ImageVolumeGeometry"],1209:["UI","1","VolumetricPresentationInputSetUID"],"120A":["SQ","1","VolumetricPresentationInputSetSequence"],"120B":["CS","1","GlobalCrop"],"120C":["US","1-n","GlobalCroppingSpecificationIndex"],"120D":["CS","1","RenderingMethod"],1301:["SQ","1","VolumeCroppingSequence"],1302:["CS","1","VolumeCroppingMethod"],1303:["FD","6","BoundingBoxCrop"],1304:["SQ","1","ObliqueCroppingPlaneSequence"],1305:["FD","4","Plane"],1306:["FD","3","PlaneNormal"],1309:["US","1","CroppingSpecificationNumber"],1501:["CS","1","MultiPlanarReconstructionStyle"],1502:["CS","1","MPRThicknessType"],1503:["FD","1","MPRSlabThickness"],1505:["FD","3","MPRTopLeftHandCorner"],1507:["FD","3","MPRViewWidthDirection"],1508:["FD","1","MPRViewWidth"],"150C":["UL","1","NumberOfVolumetricCurvePoints"],"150D":["OD","1","VolumetricCurvePoints"],1511:["FD","3","MPRViewHeightDirection"],1512:["FD","1","MPRViewHeight"],1602:["CS","1","RenderProjection"],1603:["FD","3","ViewpointPosition"],1604:["FD","3","ViewpointLookAtPoint"],1605:["FD","3","ViewpointUpDirection"],1606:["FD","6","RenderFieldOfView"],1607:["FD","1","SamplingStepSize"],1701:["CS","1","ShadingStyle"],1702:["FD","1","AmbientReflectionIntensity"],1703:["FD","3","LightDirection"],1704:["FD","1","DiffuseReflectionIntensity"],1705:["FD","1","SpecularReflectionIntensity"],1706:["FD","1","Shininess"],1801:["SQ","1","PresentationStateClassificationComponentSequence"],1802:["CS","1","ComponentType"],1803:["SQ","1","ComponentInputSequence"],1804:["US","1","VolumetricPresentationInputIndex"],1805:["SQ","1","PresentationStateCompositorComponentSequence"],1806:["SQ","1","WeightingTransferFunctionSequence"],1807:["US","3","WeightingLookupTableDescriptor"],1808:["OB","1","WeightingLookupTableData"],1901:["SQ","1","VolumetricAnnotationSequence"],1903:["SQ","1","ReferencedStructuredContextSequence"],1904:["UI","1","ReferencedContentItem"],1905:["SQ","1","VolumetricPresentationInputAnnotationSequence"],1907:["CS","1","AnnotationClipping"],"1A01":["CS","1","PresentationAnimationStyle"],"1A03":["FD","1","RecommendedAnimationRate"],"1A04":["SQ","1","AnimationCurveSequence"],"1A05":["FD","1","AnimationStepSize"],"1A06":["FD","1","SwivelRange"],"1A07":["OD","1","VolumetricCurveUpDirections"],"1A08":["SQ","1","VolumeStreamSequence"],"1A09":["LO","1","RGBATransferFunctionDescription"],"1B01":["SQ","1","AdvancedBlendingSequence"],"1B02":["US","1","BlendingInputNumber"],"1B03":["SQ","1","BlendingDisplayInputSequence"],"1B04":["SQ","1","BlendingDisplaySequence"],"1B06":["CS","1","BlendingMode"],"1B07":["CS","1","TimeSeriesBlending"],"1B08":["CS","1","GeometryForDisplay"],"1B11":["SQ","1","ThresholdSequence"],"1B12":["SQ","1","ThresholdValueSequence"],"1B13":["CS","1","ThresholdType"],"1B14":["FD","1","ThresholdValue"]},"0072":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","HangingProtocolName"],"0004":["LO","1","HangingProtocolDescription"],"0006":["CS","1","HangingProtocolLevel"],"0008":["LO","1","HangingProtocolCreator"],"000A":["DT","1","HangingProtocolCreationDateTime"],"000C":["SQ","1","HangingProtocolDefinitionSequence"],"000E":["SQ","1","HangingProtocolUserIdentificationCodeSequence"],"0010":["LO","1","HangingProtocolUserGroupName"],"0012":["SQ","1","SourceHangingProtocolSequence"],"0014":["US","1","NumberOfPriorsReferenced"],"0020":["SQ","1","ImageSetsSequence"],"0022":["SQ","1","ImageSetSelectorSequence"],"0024":["CS","1","ImageSetSelectorUsageFlag"],"0026":["AT","1","SelectorAttribute"],"0028":["US","1","SelectorValueNumber"],"0030":["SQ","1","TimeBasedImageSetsSequence"],"0032":["US","1","ImageSetNumber"],"0034":["CS","1","ImageSetSelectorCategory"],"0038":["US","2","RelativeTime"],"003A":["CS","1","RelativeTimeUnits"],"003C":["SS","2","AbstractPriorValue"],"003E":["SQ","1","AbstractPriorCodeSequence"],"0040":["LO","1","ImageSetLabel"],"0050":["CS","1","SelectorAttributeVR"],"0052":["AT","1-n","SelectorSequencePointer"],"0054":["LO","1-n","SelectorSequencePointerPrivateCreator"],"0056":["LO","1","SelectorAttributePrivateCreator"],"005E":["AE","1-n","SelectorAEValue"],"005F":["AS","1-n","SelectorASValue"],"0060":["AT","1-n","SelectorATValue"],"0061":["DA","1-n","SelectorDAValue"],"0062":["CS","1-n","SelectorCSValue"],"0063":["DT","1-n","SelectorDTValue"],"0064":["IS","1-n","SelectorISValue"],"0065":["OB","1","SelectorOBValue"],"0066":["LO","1-n","SelectorLOValue"],"0067":["OF","1","SelectorOFValue"],"0068":["LT","1","SelectorLTValue"],"0069":["OW","1","SelectorOWValue"],"006A":["PN","1-n","SelectorPNValue"],"006B":["TM","1-n","SelectorTMValue"],"006C":["SH","1-n","SelectorSHValue"],"006D":["UN","1","SelectorUNValue"],"006E":["ST","1","SelectorSTValue"],"006F":["UC","1-n","SelectorUCValue"],"0070":["UT","1","SelectorUTValue"],"0071":["UR","1","SelectorURValue"],"0072":["DS","1-n","SelectorDSValue"],"0073":["OD","1","SelectorODValue"],"0074":["FD","1-n","SelectorFDValue"],"0075":["OL","1","SelectorOLValue"],"0076":["FL","1-n","SelectorFLValue"],"0078":["UL","1-n","SelectorULValue"],"007A":["US","1-n","SelectorUSValue"],"007C":["SL","1-n","SelectorSLValue"],"007E":["SS","1-n","SelectorSSValue"],"007F":["UI","1-n","SelectorUIValue"],"0080":["SQ","1","SelectorCodeSequenceValue"],"0081":["OV","1","SelectorOVValue"],"0082":["SV","1-n","SelectorSVValue"],"0083":["UV","1-n","SelectorUVValue"],"0100":["US","1","NumberOfScreens"],"0102":["SQ","1","NominalScreenDefinitionSequence"],"0104":["US","1","NumberOfVerticalPixels"],"0106":["US","1","NumberOfHorizontalPixels"],"0108":["FD","4","DisplayEnvironmentSpatialPosition"],"010A":["US","1","ScreenMinimumGrayscaleBitDepth"],"010C":["US","1","ScreenMinimumColorBitDepth"],"010E":["US","1","ApplicationMaximumRepaintTime"],"0200":["SQ","1","DisplaySetsSequence"],"0202":["US","1","DisplaySetNumber"],"0203":["LO","1","DisplaySetLabel"],"0204":["US","1","DisplaySetPresentationGroup"],"0206":["LO","1","DisplaySetPresentationGroupDescription"],"0208":["CS","1","PartialDataDisplayHandling"],"0210":["SQ","1","SynchronizedScrollingSequence"],"0212":["US","2-n","DisplaySetScrollingGroup"],"0214":["SQ","1","NavigationIndicatorSequence"],"0216":["US","1","NavigationDisplaySet"],"0218":["US","1-n","ReferenceDisplaySets"],"0300":["SQ","1","ImageBoxesSequence"],"0302":["US","1","ImageBoxNumber"],"0304":["CS","1","ImageBoxLayoutType"],"0306":["US","1","ImageBoxTileHorizontalDimension"],"0308":["US","1","ImageBoxTileVerticalDimension"],"0310":["CS","1","ImageBoxScrollDirection"],"0312":["CS","1","ImageBoxSmallScrollType"],"0314":["US","1","ImageBoxSmallScrollAmount"],"0316":["CS","1","ImageBoxLargeScrollType"],"0318":["US","1","ImageBoxLargeScrollAmount"],"0320":["US","1","ImageBoxOverlapPriority"],"0330":["FD","1","CineRelativeToRealTime"],"0400":["SQ","1","FilterOperationsSequence"],"0402":["CS","1","FilterByCategory"],"0404":["CS","1","FilterByAttributePresence"],"0406":["CS","1","FilterByOperator"],"0420":["US","3","StructuredDisplayBackgroundCIELabValue"],"0421":["US","3","EmptyImageBoxCIELabValue"],"0422":["SQ","1","StructuredDisplayImageBoxSequence"],"0424":["SQ","1","StructuredDisplayTextBoxSequence"],"0427":["SQ","1","ReferencedFirstFrameSequence"],"0430":["SQ","1","ImageBoxSynchronizationSequence"],"0432":["US","2-n","SynchronizedImageBoxList"],"0434":["CS","1","TypeOfSynchronization"],"0500":["CS","1","BlendingOperationType"],"0510":["CS","1","ReformattingOperationType"],"0512":["FD","1","ReformattingThickness"],"0514":["FD","1","ReformattingInterval"],"0516":["CS","1","ReformattingOperationInitialViewDirection"],"0520":["CS","1-n","ThreeDRenderingType"],"0600":["SQ","1","SortingOperationsSequence"],"0602":["CS","1","SortByCategory"],"0604":["CS","1","SortingDirection"],"0700":["CS","2","DisplaySetPatientOrientation"],"0702":["CS","1","VOIType"],"0704":["CS","1","PseudoColorType"],"0705":["SQ","1","PseudoColorPaletteInstanceReferenceSequence"],"0706":["CS","1","ShowGrayscaleInverted"],"0710":["CS","1","ShowImageTrueSizeFlag"],"0712":["CS","1","ShowGraphicAnnotationFlag"],"0714":["CS","1","ShowPatientDemographicsFlag"],"0716":["CS","1","ShowAcquisitionTechniquesFlag"],"0717":["CS","1","DisplaySetHorizontalJustification"],"0718":["CS","1","DisplaySetVerticalJustification"]},"0074":{"0000":["UL","1","GenericGroupLength"],"0120":["FD","1","ContinuationStartMeterset"],"0121":["FD","1","ContinuationEndMeterset"],1e3:["CS","1","ProcedureStepState"],1002:["SQ","1","ProcedureStepProgressInformationSequence"],1004:["DS","1","ProcedureStepProgress"],1006:["ST","1","ProcedureStepProgressDescription"],1007:["SQ","1","ProcedureStepProgressParametersSequence"],1008:["SQ","1","ProcedureStepCommunicationsURISequence"],"100A":["UR","1","ContactURI"],"100C":["LO","1","ContactDisplayName"],"100E":["SQ","1","ProcedureStepDiscontinuationReasonCodeSequence"],1020:["SQ","1","BeamTaskSequence"],1022:["CS","1","BeamTaskType"],1024:["IS","1","BeamOrderIndexTrial"],1025:["CS","1","AutosequenceFlag"],1026:["FD","1","TableTopVerticalAdjustedPosition"],1027:["FD","1","TableTopLongitudinalAdjustedPosition"],1028:["FD","1","TableTopLateralAdjustedPosition"],"102A":["FD","1","PatientSupportAdjustedAngle"],"102B":["FD","1","TableTopEccentricAdjustedAngle"],"102C":["FD","1","TableTopPitchAdjustedAngle"],"102D":["FD","1","TableTopRollAdjustedAngle"],1030:["SQ","1","DeliveryVerificationImageSequence"],1032:["CS","1","VerificationImageTiming"],1034:["CS","1","DoubleExposureFlag"],1036:["CS","1","DoubleExposureOrdering"],1038:["DS","1","DoubleExposureMetersetTrial"],"103A":["DS","4","DoubleExposureFieldDeltaTrial"],1040:["SQ","1","RelatedReferenceRTImageSequence"],1042:["SQ","1","GeneralMachineVerificationSequence"],1044:["SQ","1","ConventionalMachineVerificationSequence"],1046:["SQ","1","IonMachineVerificationSequence"],1048:["SQ","1","FailedAttributesSequence"],"104A":["SQ","1","OverriddenAttributesSequence"],"104C":["SQ","1","ConventionalControlPointVerificationSequence"],"104E":["SQ","1","IonControlPointVerificationSequence"],1050:["SQ","1","AttributeOccurrenceSequence"],1052:["AT","1","AttributeOccurrencePointer"],1054:["UL","1","AttributeItemSelector"],1056:["LO","1","AttributeOccurrencePrivateCreator"],1057:["IS","1-n","SelectorSequencePointerItems"],1200:["CS","1","ScheduledProcedureStepPriority"],1202:["LO","1","WorklistLabel"],1204:["LO","1","ProcedureStepLabel"],1210:["SQ","1","ScheduledProcessingParametersSequence"],1212:["SQ","1","PerformedProcessingParametersSequence"],1216:["SQ","1","UnifiedProcedureStepPerformedProcedureSequence"],1220:["SQ","1","RelatedProcedureStepSequence"],1222:["LO","1","ProcedureStepRelationshipType"],1224:["SQ","1","ReplacedProcedureStepSequence"],1230:["LO","1","DeletionLock"],1234:["AE","1","ReceivingAE"],1236:["AE","1","RequestingAE"],1238:["LT","1","ReasonForCancellation"],1242:["CS","1","SCPStatus"],1244:["CS","1","SubscriptionListStatus"],1246:["CS","1","UnifiedProcedureStepListStatus"],1324:["UL","1","BeamOrderIndex"],1338:["FD","1","DoubleExposureMeterset"],"133A":["FD","4","DoubleExposureFieldDelta"],1401:["SQ","1","BrachyTaskSequence"],1402:["DS","1","ContinuationStartTotalReferenceAirKerma"],1403:["DS","1","ContinuationEndTotalReferenceAirKerma"],1404:["IS","1","ContinuationPulseNumber"],1405:["SQ","1","ChannelDeliveryOrderSequence"],1406:["IS","1","ReferencedChannelNumber"],1407:["DS","1","StartCumulativeTimeWeight"],1408:["DS","1","EndCumulativeTimeWeight"],1409:["SQ","1","OmittedChannelSequence"],"140A":["CS","1","ReasonForChannelOmission"],"140B":["LO","1","ReasonForChannelOmissionDescription"],"140C":["IS","1","ChannelDeliveryOrderIndex"],"140D":["SQ","1","ChannelDeliveryContinuationSequence"],"140E":["SQ","1","OmittedApplicationSetupSequence"]},"0076":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantAssemblyTemplateName"],"0003":["LO","1","ImplantAssemblyTemplateIssuer"],"0006":["LO","1","ImplantAssemblyTemplateVersion"],"0008":["SQ","1","ReplacedImplantAssemblyTemplateSequence"],"000A":["CS","1","ImplantAssemblyTemplateType"],"000C":["SQ","1","OriginalImplantAssemblyTemplateSequence"],"000E":["SQ","1","DerivationImplantAssemblyTemplateSequence"],"0010":["SQ","1","ImplantAssemblyTemplateTargetAnatomySequence"],"0020":["SQ","1","ProcedureTypeCodeSequence"],"0030":["LO","1","SurgicalTechnique"],"0032":["SQ","1","ComponentTypesSequence"],"0034":["SQ","1","ComponentTypeCodeSequence"],"0036":["CS","1","ExclusiveComponentType"],"0038":["CS","1","MandatoryComponentType"],"0040":["SQ","1","ComponentSequence"],"0055":["US","1","ComponentID"],"0060":["SQ","1","ComponentAssemblySequence"],"0070":["US","1","Component1ReferencedID"],"0080":["US","1","Component1ReferencedMatingFeatureSetID"],"0090":["US","1","Component1ReferencedMatingFeatureID"],"00A0":["US","1","Component2ReferencedID"],"00B0":["US","1","Component2ReferencedMatingFeatureSetID"],"00C0":["US","1","Component2ReferencedMatingFeatureID"]},"0078":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantTemplateGroupName"],"0010":["ST","1","ImplantTemplateGroupDescription"],"0020":["LO","1","ImplantTemplateGroupIssuer"],"0024":["LO","1","ImplantTemplateGroupVersion"],"0026":["SQ","1","ReplacedImplantTemplateGroupSequence"],"0028":["SQ","1","ImplantTemplateGroupTargetAnatomySequence"],"002A":["SQ","1","ImplantTemplateGroupMembersSequence"],"002E":["US","1","ImplantTemplateGroupMemberID"],"0050":["FD","3","ThreeDImplantTemplateGroupMemberMatchingPoint"],"0060":["FD","9","ThreeDImplantTemplateGroupMemberMatchingAxes"],"0070":["SQ","1","ImplantTemplateGroupMemberMatching2DCoordinatesSequence"],"0090":["FD","2","TwoDImplantTemplateGroupMemberMatchingPoint"],"00A0":["FD","4","TwoDImplantTemplateGroupMemberMatchingAxes"],"00B0":["SQ","1","ImplantTemplateGroupVariationDimensionSequence"],"00B2":["LO","1","ImplantTemplateGroupVariationDimensionName"],"00B4":["SQ","1","ImplantTemplateGroupVariationDimensionRankSequence"],"00B6":["US","1","ReferencedImplantTemplateGroupMemberID"],"00B8":["US","1","ImplantTemplateGroupVariationDimensionRank"]},"0080":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","SurfaceScanAcquisitionTypeCodeSequence"],"0002":["SQ","1","SurfaceScanModeCodeSequence"],"0003":["SQ","1","RegistrationMethodCodeSequence"],"0004":["FD","1","ShotDurationTime"],"0005":["FD","1","ShotOffsetTime"],"0006":["US","1-n","SurfacePointPresentationValueData"],"0007":["US","3-3n","SurfacePointColorCIELabValueData"],"0008":["SQ","1","UVMappingSequence"],"0009":["SH","1","TextureLabel"],"0010":["OF","1","UValueData"],"0011":["OF","1","VValueData"],"0012":["SQ","1","ReferencedTextureSequence"],"0013":["SQ","1","ReferencedSurfaceDataSequence"]},"0082":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AssessmentSummary"],"0003":["UT","1","AssessmentSummaryDescription"],"0004":["SQ","1","AssessedSOPInstanceSequence"],"0005":["SQ","1","ReferencedComparisonSOPInstanceSequence"],"0006":["UL","1","NumberOfAssessmentObservations"],"0007":["SQ","1","AssessmentObservationsSequence"],"0008":["CS","1","ObservationSignificance"],"000A":["UT","1","ObservationDescription"],"000C":["SQ","1","StructuredConstraintObservationSequence"],"0010":["SQ","1","AssessedAttributeValueSequence"],"0016":["LO","1","AssessmentSetID"],"0017":["SQ","1","AssessmentRequesterSequence"],"0018":["LO","1","SelectorAttributeName"],"0019":["LO","1","SelectorAttributeKeyword"],"0021":["SQ","1","AssessmentTypeCodeSequence"],"0022":["SQ","1","ObservationBasisCodeSequence"],"0023":["LO","1","AssessmentLabel"],"0032":["CS","1","ConstraintType"],"0033":["UT","1","SpecificationSelectionGuidance"],"0034":["SQ","1","ConstraintValueSequence"],"0035":["SQ","1","RecommendedDefaultValueSequence"],"0036":["CS","1","ConstraintViolationSignificance"],"0037":["UT","1","ConstraintViolationCondition"],"0038":["CS","1","ModifiableConstraintFlag"]},"0088":{"0000":["UL","1","GenericGroupLength"],"0130":["SH","1","StorageMediaFileSetID"],"0140":["UI","1","StorageMediaFileSetUID"],"0200":["SQ","1","IconImageSequence"],"0904":["LO","1","TopicTitle"],"0906":["ST","1","TopicSubject"],"0910":["LO","1","TopicAuthor"],"0912":["LO","1-32","TopicKeywords"]},"0100":{"0000":["UL","1","GenericGroupLength"],"0410":["CS","1","SOPInstanceStatus"],"0420":["DT","1","SOPAuthorizationDateTime"],"0424":["LT","1","SOPAuthorizationComment"],"0426":["LO","1","AuthorizationEquipmentCertificationNumber"]},"0400":{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","MACIDNumber"],"0010":["UI","1","MACCalculationTransferSyntaxUID"],"0015":["CS","1","MACAlgorithm"],"0020":["AT","1-n","DataElementsSigned"],"0100":["UI","1","DigitalSignatureUID"],"0105":["DT","1","DigitalSignatureDateTime"],"0110":["CS","1","CertificateType"],"0115":["OB","1","CertificateOfSigner"],"0120":["OB","1","Signature"],"0305":["CS","1","CertifiedTimestampType"],"0310":["OB","1","CertifiedTimestamp"],"0315":["FL","1",""],"0401":["SQ","1","DigitalSignaturePurposeCodeSequence"],"0402":["SQ","1","ReferencedDigitalSignatureSequence"],"0403":["SQ","1","ReferencedSOPInstanceMACSequence"],"0404":["OB","1","MAC"],"0500":["SQ","1","EncryptedAttributesSequence"],"0510":["UI","1","EncryptedContentTransferSyntaxUID"],"0520":["OB","1","EncryptedContent"],"0550":["SQ","1","ModifiedAttributesSequence"],"0551":["SQ","1","NonconformingModifiedAttributesSequence"],"0552":["OB","1","NonconformingDataElementValue"],"0561":["SQ","1","OriginalAttributesSequence"],"0562":["DT","1","AttributeModificationDateTime"],"0563":["LO","1","ModifyingSystem"],"0564":["LO","1","SourceOfPreviousValues"],"0565":["CS","1","ReasonForTheAttributeModification"],"0600":["CS","1","InstanceOriginStatus"]},1e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","3","EscapeTriplet"],"0011":["US","3","RunLengthTriplet"],"0012":["US","1","HuffmanTableSize"],"0013":["US","3","HuffmanTableTriplet"],"0014":["US","1","ShiftTableSize"],"0015":["US","3","ShiftTableTriplet"]},1010:{"0000":["UL","1","GenericGroupLength"],"0004":["US","1-n","ZonalMap"]},2e3:{"0000":["UL","1","GenericGroupLength"],"0010":["IS","1","NumberOfCopies"],"001E":["SQ","1","PrinterConfigurationSequence"],"0020":["CS","1","PrintPriority"],"0030":["CS","1","MediumType"],"0040":["CS","1","FilmDestination"],"0050":["LO","1","FilmSessionLabel"],"0060":["IS","1","MemoryAllocation"],"0061":["IS","1","MaximumMemoryAllocation"],"0062":["CS","1","ColorImagePrintingFlag"],"0063":["CS","1","CollationFlag"],"0065":["CS","1","AnnotationFlag"],"0067":["CS","1","ImageOverlayFlag"],"0069":["CS","1","PresentationLUTFlag"],"006A":["CS","1","ImageBoxPresentationLUTFlag"],"00A0":["US","1","MemoryBitDepth"],"00A1":["US","1","PrintingBitDepth"],"00A2":["SQ","1","MediaInstalledSequence"],"00A4":["SQ","1","OtherMediaAvailableSequence"],"00A8":["SQ","1","SupportedImageDisplayFormatsSequence"],"0500":["SQ","1","ReferencedFilmBoxSequence"],"0510":["SQ","1","ReferencedStoredPrintSequence"]},2010:{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","ImageDisplayFormat"],"0030":["CS","1","AnnotationDisplayFormatID"],"0040":["CS","1","FilmOrientation"],"0050":["CS","1","FilmSizeID"],"0052":["CS","1","PrinterResolutionID"],"0054":["CS","1","DefaultPrinterResolutionID"],"0060":["CS","1","MagnificationType"],"0080":["CS","1","SmoothingType"],"00A6":["CS","1","DefaultMagnificationType"],"00A7":["CS","1-n","OtherMagnificationTypesAvailable"],"00A8":["CS","1","DefaultSmoothingType"],"00A9":["CS","1-n","OtherSmoothingTypesAvailable"],"0100":["CS","1","BorderDensity"],"0110":["CS","1","EmptyImageDensity"],"0120":["US","1","MinDensity"],"0130":["US","1","MaxDensity"],"0140":["CS","1","Trim"],"0150":["ST","1","ConfigurationInformation"],"0152":["LT","1","ConfigurationInformationDescription"],"0154":["IS","1","MaximumCollatedFilms"],"015E":["US","1","Illumination"],"0160":["US","1","ReflectedAmbientLight"],"0376":["DS","2","PrinterPixelSpacing"],"0500":["SQ","1","ReferencedFilmSessionSequence"],"0510":["SQ","1","ReferencedImageBoxSequence"],"0520":["SQ","1","ReferencedBasicAnnotationBoxSequence"]},2020:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","ImageBoxPosition"],"0020":["CS","1","Polarity"],"0030":["DS","1","RequestedImageSize"],"0040":["CS","1","RequestedDecimateCropBehavior"],"0050":["CS","1","RequestedResolutionID"],"00A0":["CS","1","RequestedImageSizeFlag"],"00A2":["CS","1","DecimateCropResult"],"0110":["SQ","1","BasicGrayscaleImageSequence"],"0111":["SQ","1","BasicColorImageSequence"],"0130":["SQ","1","ReferencedImageOverlayBoxSequence"],"0140":["SQ","1","ReferencedVOILUTBoxSequence"]},2030:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","AnnotationPosition"],"0020":["LO","1","TextString"]},2040:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","ReferencedOverlayPlaneSequence"],"0011":["US","1-99","ReferencedOverlayPlaneGroups"],"0020":["SQ","1","OverlayPixelDataSequence"],"0060":["CS","1","OverlayMagnificationType"],"0070":["CS","1","OverlaySmoothingType"],"0072":["CS","1","OverlayOrImageMagnification"],"0074":["US","1","MagnifyToNumberOfColumns"],"0080":["CS","1","OverlayForegroundDensity"],"0082":["CS","1","OverlayBackgroundDensity"],"0090":["CS","1","OverlayMode"],"0100":["CS","1","ThresholdDensity"],"0500":["SQ","1","ReferencedImageBoxSequenceRetired"]},2050:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PresentationLUTSequence"],"0020":["CS","1","PresentationLUTShape"],"0500":["SQ","1","ReferencedPresentationLUTSequence"]},2100:{"0000":["UL","1","GenericGroupLength"],"0010":["SH","1","PrintJobID"],"0020":["CS","1","ExecutionStatus"],"0030":["CS","1","ExecutionStatusInfo"],"0040":["DA","1","CreationDate"],"0050":["TM","1","CreationTime"],"0070":["AE","1","Originator"],"0140":["AE","1","DestinationAE"],"0160":["SH","1","OwnerID"],"0170":["IS","1","NumberOfFilms"],"0500":["SQ","1","ReferencedPrintJobSequencePullStoredPrint"]},2110:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","PrinterStatus"],"0020":["CS","1","PrinterStatusInfo"],"0030":["LO","1","PrinterName"],"0099":["SH","1","PrintQueueID"]},2120:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","QueueStatus"],"0050":["SQ","1","PrintJobDescriptionSequence"],"0070":["SQ","1","ReferencedPrintJobSequence"]},2130:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PrintManagementCapabilitiesSequence"],"0015":["SQ","1","PrinterCharacteristicsSequence"],"0030":["SQ","1","FilmBoxContentSequence"],"0040":["SQ","1","ImageBoxContentSequence"],"0050":["SQ","1","AnnotationContentSequence"],"0060":["SQ","1","ImageOverlayBoxContentSequence"],"0080":["SQ","1","PresentationLUTContentSequence"],"00A0":["SQ","1","ProposedStudySequence"],"00C0":["SQ","1","OriginalImageSequence"]},2200:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LabelUsingInformationExtractedFromInstances"],"0002":["UT","1","LabelText"],"0003":["CS","1","LabelStyleSelection"],"0004":["LT","1","MediaDisposition"],"0005":["LT","1","BarcodeValue"],"0006":["CS","1","BarcodeSymbology"],"0007":["CS","1","AllowMediaSplitting"],"0008":["CS","1","IncludeNonDICOMObjects"],"0009":["CS","1","IncludeDisplayApplication"],"000A":["CS","1","PreserveCompositeInstancesAfterMediaCreation"],"000B":["US","1","TotalNumberOfPiecesOfMediaCreated"],"000C":["LO","1","RequestedMediaApplicationProfile"],"000D":["SQ","1","ReferencedStorageMediaSequence"],"000E":["AT","1-n","FailureAttributes"],"000F":["CS","1","AllowLossyCompression"],"0020":["CS","1","RequestPriority"]},3002:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTImageLabel"],"0003":["LO","1","RTImageName"],"0004":["ST","1","RTImageDescription"],"000A":["CS","1","ReportedValuesOrigin"],"000C":["CS","1","RTImagePlane"],"000D":["DS","3","XRayImageReceptorTranslation"],"000E":["DS","1","XRayImageReceptorAngle"],"0010":["DS","6","RTImageOrientation"],"0011":["DS","2","ImagePlanePixelSpacing"],"0012":["DS","2","RTImagePosition"],"0020":["SH","1","RadiationMachineName"],"0022":["DS","1","RadiationMachineSAD"],"0024":["DS","1","RadiationMachineSSD"],"0026":["DS","1","RTImageSID"],"0028":["DS","1","SourceToReferenceObjectDistance"],"0029":["IS","1","FractionNumber"],"0030":["SQ","1","ExposureSequence"],"0032":["DS","1","MetersetExposure"],"0034":["DS","4","DiaphragmPosition"],"0040":["SQ","1","FluenceMapSequence"],"0041":["CS","1","FluenceDataSource"],"0042":["DS","1","FluenceDataScale"],"0050":["SQ","1","PrimaryFluenceModeSequence"],"0051":["CS","1","FluenceMode"],"0052":["SH","1","FluenceModeID"]},3004:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","DVHType"],"0002":["CS","1","DoseUnits"],"0004":["CS","1","DoseType"],"0005":["CS","1","SpatialTransformOfDose"],"0006":["LO","1","DoseComment"],"0008":["DS","3","NormalizationPoint"],"000A":["CS","1","DoseSummationType"],"000C":["DS","2-n","GridFrameOffsetVector"],"000E":["DS","1","DoseGridScaling"],"0010":["SQ","1","RTDoseROISequence"],"0012":["DS","1","DoseValue"],"0014":["CS","1-3","TissueHeterogeneityCorrection"],"0040":["DS","3","DVHNormalizationPoint"],"0042":["DS","1","DVHNormalizationDoseValue"],"0050":["SQ","1","DVHSequence"],"0052":["DS","1","DVHDoseScaling"],"0054":["CS","1","DVHVolumeUnits"],"0056":["IS","1","DVHNumberOfBins"],"0058":["DS","2-2n","DVHData"],"0060":["SQ","1","DVHReferencedROISequence"],"0062":["CS","1","DVHROIContributionType"],"0070":["DS","1","DVHMinimumDose"],"0072":["DS","1","DVHMaximumDose"],"0074":["DS","1","DVHMeanDose"]},3006:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","StructureSetLabel"],"0004":["LO","1","StructureSetName"],"0006":["ST","1","StructureSetDescription"],"0008":["DA","1","StructureSetDate"],"0009":["TM","1","StructureSetTime"],"0010":["SQ","1","ReferencedFrameOfReferenceSequence"],"0012":["SQ","1","RTReferencedStudySequence"],"0014":["SQ","1","RTReferencedSeriesSequence"],"0016":["SQ","1","ContourImageSequence"],"0018":["SQ","1","PredecessorStructureSetSequence"],"0020":["SQ","1","StructureSetROISequence"],"0022":["IS","1","ROINumber"],"0024":["UI","1","ReferencedFrameOfReferenceUID"],"0026":["LO","1","ROIName"],"0028":["ST","1","ROIDescription"],"002A":["IS","3","ROIDisplayColor"],"002C":["DS","1","ROIVolume"],"0030":["SQ","1","RTRelatedROISequence"],"0033":["CS","1","RTROIRelationship"],"0036":["CS","1","ROIGenerationAlgorithm"],"0037":["SQ","1","ROIDerivationAlgorithmIdentificationSequence"],"0038":["LO","1","ROIGenerationDescription"],"0039":["SQ","1","ROIContourSequence"],"0040":["SQ","1","ContourSequence"],"0042":["CS","1","ContourGeometricType"],"0044":["DS","1","ContourSlabThickness"],"0045":["DS","3","ContourOffsetVector"],"0046":["IS","1","NumberOfContourPoints"],"0048":["IS","1","ContourNumber"],"0049":["IS","1-n","AttachedContours"],"004A":["SQ","1","SourcePixelPlanesCharacteristicsSequence"],"0050":["DS","3-3n","ContourData"],"0080":["SQ","1","RTROIObservationsSequence"],"0082":["IS","1","ObservationNumber"],"0084":["IS","1","ReferencedROINumber"],"0085":["SH","1","ROIObservationLabel"],"0086":["SQ","1","RTROIIdentificationCodeSequence"],"0088":["ST","1","ROIObservationDescription"],"00A0":["SQ","1","RelatedRTROIObservationsSequence"],"00A4":["CS","1","RTROIInterpretedType"],"00A6":["PN","1","ROIInterpreter"],"00B0":["SQ","1","ROIPhysicalPropertiesSequence"],"00B2":["CS","1","ROIPhysicalProperty"],"00B4":["DS","1","ROIPhysicalPropertyValue"],"00B6":["SQ","1","ROIElementalCompositionSequence"],"00B7":["US","1","ROIElementalCompositionAtomicNumber"],"00B8":["FL","1","ROIElementalCompositionAtomicMassFraction"],"00B9":["SQ","1","AdditionalRTROIIdentificationCodeSequence"],"00C0":["SQ","1","FrameOfReferenceRelationshipSequence"],"00C2":["UI","1","RelatedFrameOfReferenceUID"],"00C4":["CS","1","FrameOfReferenceTransformationType"],"00C6":["DS","16","FrameOfReferenceTransformationMatrix"],"00C8":["LO","1","FrameOfReferenceTransformationComment"],"00C9":["SQ","1","PatientLocationCoordinatesSequence"],"00CA":["SQ","1","PatientLocationCoordinatesCodeSequence"],"00CB":["SQ","1","PatientSupportPositionSequence"]},3008:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","MeasuredDoseReferenceSequence"],"0012":["ST","1","MeasuredDoseDescription"],"0014":["CS","1","MeasuredDoseType"],"0016":["DS","1","MeasuredDoseValue"],"0020":["SQ","1","TreatmentSessionBeamSequence"],"0021":["SQ","1","TreatmentSessionIonBeamSequence"],"0022":["IS","1","CurrentFractionNumber"],"0024":["DA","1","TreatmentControlPointDate"],"0025":["TM","1","TreatmentControlPointTime"],"002A":["CS","1","TreatmentTerminationStatus"],"002B":["SH","1","TreatmentTerminationCode"],"002C":["CS","1","TreatmentVerificationStatus"],"0030":["SQ","1","ReferencedTreatmentRecordSequence"],"0032":["DS","1","SpecifiedPrimaryMeterset"],"0033":["DS","1","SpecifiedSecondaryMeterset"],"0036":["DS","1","DeliveredPrimaryMeterset"],"0037":["DS","1","DeliveredSecondaryMeterset"],"003A":["DS","1","SpecifiedTreatmentTime"],"003B":["DS","1","DeliveredTreatmentTime"],"0040":["SQ","1","ControlPointDeliverySequence"],"0041":["SQ","1","IonControlPointDeliverySequence"],"0042":["DS","1","SpecifiedMeterset"],"0044":["DS","1","DeliveredMeterset"],"0045":["FL","1","MetersetRateSet"],"0046":["FL","1","MetersetRateDelivered"],"0047":["FL","1-n","ScanSpotMetersetsDelivered"],"0048":["DS","1","DoseRateDelivered"],"0050":["SQ","1","TreatmentSummaryCalculatedDoseReferenceSequence"],"0052":["DS","1","CumulativeDoseToDoseReference"],"0054":["DA","1","FirstTreatmentDate"],"0056":["DA","1","MostRecentTreatmentDate"],"005A":["IS","1","NumberOfFractionsDelivered"],"0060":["SQ","1","OverrideSequence"],"0061":["AT","1","ParameterSequencePointer"],"0062":["AT","1","OverrideParameterPointer"],"0063":["IS","1","ParameterItemIndex"],"0064":["IS","1","MeasuredDoseReferenceNumber"],"0065":["AT","1","ParameterPointer"],"0066":["ST","1","OverrideReason"],"0067":["US","1","ParameterValueNumber"],"0068":["SQ","1","CorrectedParameterSequence"],"006A":["FL","1","CorrectionValue"],"0070":["SQ","1","CalculatedDoseReferenceSequence"],"0072":["IS","1","CalculatedDoseReferenceNumber"],"0074":["ST","1","CalculatedDoseReferenceDescription"],"0076":["DS","1","CalculatedDoseReferenceDoseValue"],"0078":["DS","1","StartMeterset"],"007A":["DS","1","EndMeterset"],"0080":["SQ","1","ReferencedMeasuredDoseReferenceSequence"],"0082":["IS","1","ReferencedMeasuredDoseReferenceNumber"],"0090":["SQ","1","ReferencedCalculatedDoseReferenceSequence"],"0092":["IS","1","ReferencedCalculatedDoseReferenceNumber"],"00A0":["SQ","1","BeamLimitingDeviceLeafPairsSequence"],"00B0":["SQ","1","RecordedWedgeSequence"],"00C0":["SQ","1","RecordedCompensatorSequence"],"00D0":["SQ","1","RecordedBlockSequence"],"00D1":["SQ","1","RecordedBlockSlabSequence"],"00E0":["SQ","1","TreatmentSummaryMeasuredDoseReferenceSequence"],"00F0":["SQ","1","RecordedSnoutSequence"],"00F2":["SQ","1","RecordedRangeShifterSequence"],"00F4":["SQ","1","RecordedLateralSpreadingDeviceSequence"],"00F6":["SQ","1","RecordedRangeModulatorSequence"],"0100":["SQ","1","RecordedSourceSequence"],"0105":["LO","1","SourceSerialNumber"],"0110":["SQ","1","TreatmentSessionApplicationSetupSequence"],"0116":["CS","1","ApplicationSetupCheck"],"0120":["SQ","1","RecordedBrachyAccessoryDeviceSequence"],"0122":["IS","1","ReferencedBrachyAccessoryDeviceNumber"],"0130":["SQ","1","RecordedChannelSequence"],"0132":["DS","1","SpecifiedChannelTotalTime"],"0134":["DS","1","DeliveredChannelTotalTime"],"0136":["IS","1","SpecifiedNumberOfPulses"],"0138":["IS","1","DeliveredNumberOfPulses"],"013A":["DS","1","SpecifiedPulseRepetitionInterval"],"013C":["DS","1","DeliveredPulseRepetitionInterval"],"0140":["SQ","1","RecordedSourceApplicatorSequence"],"0142":["IS","1","ReferencedSourceApplicatorNumber"],"0150":["SQ","1","RecordedChannelShieldSequence"],"0152":["IS","1","ReferencedChannelShieldNumber"],"0160":["SQ","1","BrachyControlPointDeliveredSequence"],"0162":["DA","1","SafePositionExitDate"],"0164":["TM","1","SafePositionExitTime"],"0166":["DA","1","SafePositionReturnDate"],"0168":["TM","1","SafePositionReturnTime"],"0171":["SQ","1","PulseSpecificBrachyControlPointDeliveredSequence"],"0172":["US","1","PulseNumber"],"0173":["SQ","1","BrachyPulseControlPointDeliveredSequence"],"0200":["CS","1","CurrentTreatmentStatus"],"0202":["ST","1","TreatmentStatusComment"],"0220":["SQ","1","FractionGroupSummarySequence"],"0223":["IS","1","ReferencedFractionNumber"],"0224":["CS","1","FractionGroupType"],"0230":["CS","1","BeamStopperPosition"],"0240":["SQ","1","FractionStatusSummarySequence"],"0250":["DA","1","TreatmentDate"],"0251":["TM","1","TreatmentTime"]},"300A":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTPlanLabel"],"0003":["LO","1","RTPlanName"],"0004":["ST","1","RTPlanDescription"],"0006":["DA","1","RTPlanDate"],"0007":["TM","1","RTPlanTime"],"0009":["LO","1-n","TreatmentProtocols"],"000A":["CS","1","PlanIntent"],"000B":["LO","1-n","TreatmentSites"],"000C":["CS","1","RTPlanGeometry"],"000E":["ST","1","PrescriptionDescription"],"0010":["SQ","1","DoseReferenceSequence"],"0012":["IS","1","DoseReferenceNumber"],"0013":["UI","1","DoseReferenceUID"],"0014":["CS","1","DoseReferenceStructureType"],"0015":["CS","1","NominalBeamEnergyUnit"],"0016":["LO","1","DoseReferenceDescription"],"0018":["DS","3","DoseReferencePointCoordinates"],"001A":["DS","1","NominalPriorDose"],"0020":["CS","1","DoseReferenceType"],"0021":["DS","1","ConstraintWeight"],"0022":["DS","1","DeliveryWarningDose"],"0023":["DS","1","DeliveryMaximumDose"],"0025":["DS","1","TargetMinimumDose"],"0026":["DS","1","TargetPrescriptionDose"],"0027":["DS","1","TargetMaximumDose"],"0028":["DS","1","TargetUnderdoseVolumeFraction"],"002A":["DS","1","OrganAtRiskFullVolumeDose"],"002B":["DS","1","OrganAtRiskLimitDose"],"002C":["DS","1","OrganAtRiskMaximumDose"],"002D":["DS","1","OrganAtRiskOverdoseVolumeFraction"],"0040":["SQ","1","ToleranceTableSequence"],"0042":["IS","1","ToleranceTableNumber"],"0043":["SH","1","ToleranceTableLabel"],"0044":["DS","1","GantryAngleTolerance"],"0046":["DS","1","BeamLimitingDeviceAngleTolerance"],"0048":["SQ","1","BeamLimitingDeviceToleranceSequence"],"004A":["DS","1","BeamLimitingDevicePositionTolerance"],"004B":["FL","1","SnoutPositionTolerance"],"004C":["DS","1","PatientSupportAngleTolerance"],"004E":["DS","1","TableTopEccentricAngleTolerance"],"004F":["FL","1","TableTopPitchAngleTolerance"],"0050":["FL","1","TableTopRollAngleTolerance"],"0051":["DS","1","TableTopVerticalPositionTolerance"],"0052":["DS","1","TableTopLongitudinalPositionTolerance"],"0053":["DS","1","TableTopLateralPositionTolerance"],"0055":["CS","1","RTPlanRelationship"],"0070":["SQ","1","FractionGroupSequence"],"0071":["IS","1","FractionGroupNumber"],"0072":["LO","1","FractionGroupDescription"],"0078":["IS","1","NumberOfFractionsPlanned"],"0079":["IS","1","NumberOfFractionPatternDigitsPerDay"],"007A":["IS","1","RepeatFractionCycleLength"],"007B":["LT","1","FractionPattern"],"0080":["IS","1","NumberOfBeams"],"0082":["DS","3","BeamDoseSpecificationPoint"],"0083":["UI","1","ReferencedDoseReferenceUID"],"0084":["DS","1","BeamDose"],"0086":["DS","1","BeamMeterset"],"0088":["FL","1","BeamDosePointDepth"],"0089":["FL","1","BeamDosePointEquivalentDepth"],"008A":["FL","1","BeamDosePointSSD"],"008B":["CS","1","BeamDoseMeaning"],"008C":["SQ","1","BeamDoseVerificationControlPointSequence"],"008D":["FL","1","AverageBeamDosePointDepth"],"008E":["FL","1","AverageBeamDosePointEquivalentDepth"],"008F":["FL","1","AverageBeamDosePointSSD"],"0090":["CS","1","BeamDoseType"],"0091":["DS","1","AlternateBeamDose"],"0092":["CS","1","AlternateBeamDoseType"],"0093":["CS","1","DepthValueAveragingFlag"],"0094":["DS","1","BeamDosePointSourceToExternalContourDistance"],"00A0":["IS","1","NumberOfBrachyApplicationSetups"],"00A2":["DS","3","BrachyApplicationSetupDoseSpecificationPoint"],"00A4":["DS","1","BrachyApplicationSetupDose"],"00B0":["SQ","1","BeamSequence"],"00B2":["SH","1","TreatmentMachineName"],"00B3":["CS","1","PrimaryDosimeterUnit"],"00B4":["DS","1","SourceAxisDistance"],"00B6":["SQ","1","BeamLimitingDeviceSequence"],"00B8":["CS","1","RTBeamLimitingDeviceType"],"00BA":["DS","1","SourceToBeamLimitingDeviceDistance"],"00BB":["FL","1","IsocenterToBeamLimitingDeviceDistance"],"00BC":["IS","1","NumberOfLeafJawPairs"],"00BE":["DS","3-n","LeafPositionBoundaries"],"00C0":["IS","1","BeamNumber"],"00C2":["LO","1","BeamName"],"00C3":["ST","1","BeamDescription"],"00C4":["CS","1","BeamType"],"00C5":["FD","1","BeamDeliveryDurationLimit"],"00C6":["CS","1","RadiationType"],"00C7":["CS","1","HighDoseTechniqueType"],"00C8":["IS","1","ReferenceImageNumber"],"00CA":["SQ","1","PlannedVerificationImageSequence"],"00CC":["LO","1-n","ImagingDeviceSpecificAcquisitionParameters"],"00CE":["CS","1","TreatmentDeliveryType"],"00D0":["IS","1","NumberOfWedges"],"00D1":["SQ","1","WedgeSequence"],"00D2":["IS","1","WedgeNumber"],"00D3":["CS","1","WedgeType"],"00D4":["SH","1","WedgeID"],"00D5":["IS","1","WedgeAngle"],"00D6":["DS","1","WedgeFactor"],"00D7":["FL","1","TotalWedgeTrayWaterEquivalentThickness"],"00D8":["DS","1","WedgeOrientation"],"00D9":["FL","1","IsocenterToWedgeTrayDistance"],"00DA":["DS","1","SourceToWedgeTrayDistance"],"00DB":["FL","1","WedgeThinEdgePosition"],"00DC":["SH","1","BolusID"],"00DD":["ST","1","BolusDescription"],"00DE":["DS","1","EffectiveWedgeAngle"],"00E0":["IS","1","NumberOfCompensators"],"00E1":["SH","1","MaterialID"],"00E2":["DS","1","TotalCompensatorTrayFactor"],"00E3":["SQ","1","CompensatorSequence"],"00E4":["IS","1","CompensatorNumber"],"00E5":["SH","1","CompensatorID"],"00E6":["DS","1","SourceToCompensatorTrayDistance"],"00E7":["IS","1","CompensatorRows"],"00E8":["IS","1","CompensatorColumns"],"00E9":["DS","2","CompensatorPixelSpacing"],"00EA":["DS","2","CompensatorPosition"],"00EB":["DS","1-n","CompensatorTransmissionData"],"00EC":["DS","1-n","CompensatorThicknessData"],"00ED":["IS","1","NumberOfBoli"],"00EE":["CS","1","CompensatorType"],"00EF":["SH","1","CompensatorTrayID"],"00F0":["IS","1","NumberOfBlocks"],"00F2":["DS","1","TotalBlockTrayFactor"],"00F3":["FL","1","TotalBlockTrayWaterEquivalentThickness"],"00F4":["SQ","1","BlockSequence"],"00F5":["SH","1","BlockTrayID"],"00F6":["DS","1","SourceToBlockTrayDistance"],"00F7":["FL","1","IsocenterToBlockTrayDistance"],"00F8":["CS","1","BlockType"],"00F9":["LO","1","AccessoryCode"],"00FA":["CS","1","BlockDivergence"],"00FB":["CS","1","BlockMountingPosition"],"00FC":["IS","1","BlockNumber"],"00FE":["LO","1","BlockName"],"0100":["DS","1","BlockThickness"],"0102":["DS","1","BlockTransmission"],"0104":["IS","1","BlockNumberOfPoints"],"0106":["DS","2-2n","BlockData"],"0107":["SQ","1","ApplicatorSequence"],"0108":["SH","1","ApplicatorID"],"0109":["CS","1","ApplicatorType"],"010A":["LO","1","ApplicatorDescription"],"010C":["DS","1","CumulativeDoseReferenceCoefficient"],"010E":["DS","1","FinalCumulativeMetersetWeight"],"0110":["IS","1","NumberOfControlPoints"],"0111":["SQ","1","ControlPointSequence"],"0112":["IS","1","ControlPointIndex"],"0114":["DS","1","NominalBeamEnergy"],"0115":["DS","1","DoseRateSet"],"0116":["SQ","1","WedgePositionSequence"],"0118":["CS","1","WedgePosition"],"011A":["SQ","1","BeamLimitingDevicePositionSequence"],"011C":["DS","2-2n","LeafJawPositions"],"011E":["DS","1","GantryAngle"],"011F":["CS","1","GantryRotationDirection"],"0120":["DS","1","BeamLimitingDeviceAngle"],"0121":["CS","1","BeamLimitingDeviceRotationDirection"],"0122":["DS","1","PatientSupportAngle"],"0123":["CS","1","PatientSupportRotationDirection"],"0124":["DS","1","TableTopEccentricAxisDistance"],"0125":["DS","1","TableTopEccentricAngle"],"0126":["CS","1","TableTopEccentricRotationDirection"],"0128":["DS","1","TableTopVerticalPosition"],"0129":["DS","1","TableTopLongitudinalPosition"],"012A":["DS","1","TableTopLateralPosition"],"012C":["DS","3","IsocenterPosition"],"012E":["DS","3","SurfaceEntryPoint"],"0130":["DS","1","SourceToSurfaceDistance"],"0131":["FL","1","AverageBeamDosePointSourceToExternalContourDistance"],"0132":["FL","1","SourceToExternalContourDistance"],"0133":["FL","3","ExternalContourEntryPoint"],"0134":["DS","1","CumulativeMetersetWeight"],"0140":["FL","1","TableTopPitchAngle"],"0142":["CS","1","TableTopPitchRotationDirection"],"0144":["FL","1","TableTopRollAngle"],"0146":["CS","1","TableTopRollRotationDirection"],"0148":["FL","1","HeadFixationAngle"],"014A":["FL","1","GantryPitchAngle"],"014C":["CS","1","GantryPitchRotationDirection"],"014E":["FL","1","GantryPitchAngleTolerance"],"0150":["CS","1","FixationEye"],"0151":["DS","1","ChairHeadFramePosition"],"0152":["DS","1","HeadFixationAngleTolerance"],"0153":["DS","1","ChairHeadFramePositionTolerance"],"0154":["DS","1","FixationLightAzimuthalAngleTolerance"],"0155":["DS","1","FixationLightPolarAngleTolerance"],"0180":["SQ","1","PatientSetupSequence"],"0182":["IS","1","PatientSetupNumber"],"0183":["LO","1","PatientSetupLabel"],"0184":["LO","1","PatientAdditionalPosition"],"0190":["SQ","1","FixationDeviceSequence"],"0192":["CS","1","FixationDeviceType"],"0194":["SH","1","FixationDeviceLabel"],"0196":["ST","1","FixationDeviceDescription"],"0198":["SH","1","FixationDevicePosition"],"0199":["FL","1","FixationDevicePitchAngle"],"019A":["FL","1","FixationDeviceRollAngle"],"01A0":["SQ","1","ShieldingDeviceSequence"],"01A2":["CS","1","ShieldingDeviceType"],"01A4":["SH","1","ShieldingDeviceLabel"],"01A6":["ST","1","ShieldingDeviceDescription"],"01A8":["SH","1","ShieldingDevicePosition"],"01B0":["CS","1","SetupTechnique"],"01B2":["ST","1","SetupTechniqueDescription"],"01B4":["SQ","1","SetupDeviceSequence"],"01B6":["CS","1","SetupDeviceType"],"01B8":["SH","1","SetupDeviceLabel"],"01BA":["ST","1","SetupDeviceDescription"],"01BC":["DS","1","SetupDeviceParameter"],"01D0":["ST","1","SetupReferenceDescription"],"01D2":["DS","1","TableTopVerticalSetupDisplacement"],"01D4":["DS","1","TableTopLongitudinalSetupDisplacement"],"01D6":["DS","1","TableTopLateralSetupDisplacement"],"0200":["CS","1","BrachyTreatmentTechnique"],"0202":["CS","1","BrachyTreatmentType"],"0206":["SQ","1","TreatmentMachineSequence"],"0210":["SQ","1","SourceSequence"],"0212":["IS","1","SourceNumber"],"0214":["CS","1","SourceType"],"0216":["LO","1","SourceManufacturer"],"0218":["DS","1","ActiveSourceDiameter"],"021A":["DS","1","ActiveSourceLength"],"021B":["SH","1","SourceModelID"],"021C":["LO","1","SourceDescription"],"0222":["DS","1","SourceEncapsulationNominalThickness"],"0224":["DS","1","SourceEncapsulationNominalTransmission"],"0226":["LO","1","SourceIsotopeName"],"0228":["DS","1","SourceIsotopeHalfLife"],"0229":["CS","1","SourceStrengthUnits"],"022A":["DS","1","ReferenceAirKermaRate"],"022B":["DS","1","SourceStrength"],"022C":["DA","1","SourceStrengthReferenceDate"],"022E":["TM","1","SourceStrengthReferenceTime"],"0230":["SQ","1","ApplicationSetupSequence"],"0232":["CS","1","ApplicationSetupType"],"0234":["IS","1","ApplicationSetupNumber"],"0236":["LO","1","ApplicationSetupName"],"0238":["LO","1","ApplicationSetupManufacturer"],"0240":["IS","1","TemplateNumber"],"0242":["SH","1","TemplateType"],"0244":["LO","1","TemplateName"],"0250":["DS","1","TotalReferenceAirKerma"],"0260":["SQ","1","BrachyAccessoryDeviceSequence"],"0262":["IS","1","BrachyAccessoryDeviceNumber"],"0263":["SH","1","BrachyAccessoryDeviceID"],"0264":["CS","1","BrachyAccessoryDeviceType"],"0266":["LO","1","BrachyAccessoryDeviceName"],"026A":["DS","1","BrachyAccessoryDeviceNominalThickness"],"026C":["DS","1","BrachyAccessoryDeviceNominalTransmission"],"0271":["DS","1","ChannelEffectiveLength"],"0272":["DS","1","ChannelInnerLength"],"0273":["SH","1","AfterloaderChannelID"],"0274":["DS","1","SourceApplicatorTipLength"],"0280":["SQ","1","ChannelSequence"],"0282":["IS","1","ChannelNumber"],"0284":["DS","1","ChannelLength"],"0286":["DS","1","ChannelTotalTime"],"0288":["CS","1","SourceMovementType"],"028A":["IS","1","NumberOfPulses"],"028C":["DS","1","PulseRepetitionInterval"],"0290":["IS","1","SourceApplicatorNumber"],"0291":["SH","1","SourceApplicatorID"],"0292":["CS","1","SourceApplicatorType"],"0294":["LO","1","SourceApplicatorName"],"0296":["DS","1","SourceApplicatorLength"],"0298":["LO","1","SourceApplicatorManufacturer"],"029C":["DS","1","SourceApplicatorWallNominalThickness"],"029E":["DS","1","SourceApplicatorWallNominalTransmission"],"02A0":["DS","1","SourceApplicatorStepSize"],"02A1":["IS","1","ApplicatorShapeReferencedROINumber"],"02A2":["IS","1","TransferTubeNumber"],"02A4":["DS","1","TransferTubeLength"],"02B0":["SQ","1","ChannelShieldSequence"],"02B2":["IS","1","ChannelShieldNumber"],"02B3":["SH","1","ChannelShieldID"],"02B4":["LO","1","ChannelShieldName"],"02B8":["DS","1","ChannelShieldNominalThickness"],"02BA":["DS","1","ChannelShieldNominalTransmission"],"02C8":["DS","1","FinalCumulativeTimeWeight"],"02D0":["SQ","1","BrachyControlPointSequence"],"02D2":["DS","1","ControlPointRelativePosition"],"02D4":["DS","3","ControlPoint3DPosition"],"02D6":["DS","1","CumulativeTimeWeight"],"02E0":["CS","1","CompensatorDivergence"],"02E1":["CS","1","CompensatorMountingPosition"],"02E2":["DS","1-n","SourceToCompensatorDistance"],"02E3":["FL","1","TotalCompensatorTrayWaterEquivalentThickness"],"02E4":["FL","1","IsocenterToCompensatorTrayDistance"],"02E5":["FL","1","CompensatorColumnOffset"],"02E6":["FL","1-n","IsocenterToCompensatorDistances"],"02E7":["FL","1","CompensatorRelativeStoppingPowerRatio"],"02E8":["FL","1","CompensatorMillingToolDiameter"],"02EA":["SQ","1","IonRangeCompensatorSequence"],"02EB":["LT","1","CompensatorDescription"],"0302":["IS","1","RadiationMassNumber"],"0304":["IS","1","RadiationAtomicNumber"],"0306":["SS","1","RadiationChargeState"],"0308":["CS","1","ScanMode"],"0309":["CS","1","ModulatedScanModeType"],"030A":["FL","2","VirtualSourceAxisDistances"],"030C":["SQ","1","SnoutSequence"],"030D":["FL","1","SnoutPosition"],"030F":["SH","1","SnoutID"],"0312":["IS","1","NumberOfRangeShifters"],"0314":["SQ","1","RangeShifterSequence"],"0316":["IS","1","RangeShifterNumber"],"0318":["SH","1","RangeShifterID"],"0320":["CS","1","RangeShifterType"],"0322":["LO","1","RangeShifterDescription"],"0330":["IS","1","NumberOfLateralSpreadingDevices"],"0332":["SQ","1","LateralSpreadingDeviceSequence"],"0334":["IS","1","LateralSpreadingDeviceNumber"],"0336":["SH","1","LateralSpreadingDeviceID"],"0338":["CS","1","LateralSpreadingDeviceType"],"033A":["LO","1","LateralSpreadingDeviceDescription"],"033C":["FL","1","LateralSpreadingDeviceWaterEquivalentThickness"],"0340":["IS","1","NumberOfRangeModulators"],"0342":["SQ","1","RangeModulatorSequence"],"0344":["IS","1","RangeModulatorNumber"],"0346":["SH","1","RangeModulatorID"],"0348":["CS","1","RangeModulatorType"],"034A":["LO","1","RangeModulatorDescription"],"034C":["SH","1","BeamCurrentModulationID"],"0350":["CS","1","PatientSupportType"],"0352":["SH","1","PatientSupportID"],"0354":["LO","1","PatientSupportAccessoryCode"],"0355":["LO","1","TrayAccessoryCode"],"0356":["FL","1","FixationLightAzimuthalAngle"],"0358":["FL","1","FixationLightPolarAngle"],"035A":["FL","1","MetersetRate"],"0360":["SQ","1","RangeShifterSettingsSequence"],"0362":["LO","1","RangeShifterSetting"],"0364":["FL","1","IsocenterToRangeShifterDistance"],"0366":["FL","1","RangeShifterWaterEquivalentThickness"],"0370":["SQ","1","LateralSpreadingDeviceSettingsSequence"],"0372":["LO","1","LateralSpreadingDeviceSetting"],"0374":["FL","1","IsocenterToLateralSpreadingDeviceDistance"],"0380":["SQ","1","RangeModulatorSettingsSequence"],"0382":["FL","1","RangeModulatorGatingStartValue"],"0384":["FL","1","RangeModulatorGatingStopValue"],"0386":["FL","1","RangeModulatorGatingStartWaterEquivalentThickness"],"0388":["FL","1","RangeModulatorGatingStopWaterEquivalentThickness"],"038A":["FL","1","IsocenterToRangeModulatorDistance"],"038F":["FL","1-n","ScanSpotTimeOffset"],"0390":["SH","1","ScanSpotTuneID"],"0391":["IS","1-n","ScanSpotPrescribedIndices"],"0392":["IS","1","NumberOfScanSpotPositions"],"0393":["CS","1","ScanSpotReordered"],"0394":["FL","1-n","ScanSpotPositionMap"],"0395":["CS","1","ScanSpotReorderingAllowed"],"0396":["FL","1-n","ScanSpotMetersetWeights"],"0398":["FL","2","ScanningSpotSize"],"0399":["FL","2-2n","ScanSpotSizesDelivered"],"039A":["IS","1","NumberOfPaintings"],"03A0":["SQ","1","IonToleranceTableSequence"],"03A2":["SQ","1","IonBeamSequence"],"03A4":["SQ","1","IonBeamLimitingDeviceSequence"],"03A6":["SQ","1","IonBlockSequence"],"03A8":["SQ","1","IonControlPointSequence"],"03AA":["SQ","1","IonWedgeSequence"],"03AC":["SQ","1","IonWedgePositionSequence"],"0401":["SQ","1","ReferencedSetupImageSequence"],"0402":["ST","1","SetupImageComment"],"0410":["SQ","1","MotionSynchronizationSequence"],"0412":["FL","3","ControlPointOrientation"],"0420":["SQ","1","GeneralAccessorySequence"],"0421":["SH","1","GeneralAccessoryID"],"0422":["ST","1","GeneralAccessoryDescription"],"0423":["CS","1","GeneralAccessoryType"],"0424":["IS","1","GeneralAccessoryNumber"],"0425":["FL","1","SourceToGeneralAccessoryDistance"],"0426":["DS","1","IsocenterToGeneralAccessoryDistance"],"0431":["SQ","1","ApplicatorGeometrySequence"],"0432":["CS","1","ApplicatorApertureShape"],"0433":["FL","1","ApplicatorOpening"],"0434":["FL","1","ApplicatorOpeningX"],"0435":["FL","1","ApplicatorOpeningY"],"0436":["FL","1","SourceToApplicatorMountingPositionDistance"],"0440":["IS","1","NumberOfBlockSlabItems"],"0441":["SQ","1","BlockSlabSequence"],"0442":["DS","1","BlockSlabThickness"],"0443":["US","1","BlockSlabNumber"],"0450":["SQ","1","DeviceMotionControlSequence"],"0451":["CS","1","DeviceMotionExecutionMode"],"0452":["CS","1","DeviceMotionObservationMode"],"0453":["SQ","1","DeviceMotionParameterCodeSequence"],"0501":["FL","1","DistalDepthFraction"],"0502":["FL","1","DistalDepth"],"0503":["FL","2","NominalRangeModulationFractions"],"0504":["FL","2","NominalRangeModulatedRegionDepths"],"0505":["SQ","1","DepthDoseParametersSequence"],"0506":["SQ","1","DeliveredDepthDoseParametersSequence"],"0507":["FL","1","DeliveredDistalDepthFraction"],"0508":["FL","1","DeliveredDistalDepth"],"0509":["FL","2","DeliveredNominalRangeModulationFractions"],"0510":["FL","2","DeliveredNominalRangeModulatedRegionDepths"],"0511":["CS","1","DeliveredReferenceDoseDefinition"],"0512":["CS","1","ReferenceDoseDefinition"],"0600":["US","1","RTControlPointIndex"],"0601":["US","1","RadiationGenerationModeIndex"],"0602":["US","1","ReferencedDefinedDeviceIndex"],"0603":["US","1","RadiationDoseIdentificationIndex"],"0604":["US","1","NumberOfRTControlPoints"],"0605":["US","1","ReferencedRadiationGenerationModeIndex"],"0606":["US","1","TreatmentPositionIndex"],"0607":["US","1","ReferencedDeviceIndex"],"0608":["LO","1","TreatmentPositionGroupLabel"],"0609":["UI","1","TreatmentPositionGroupUID"],"060A":["SQ","1","TreatmentPositionGroupSequence"],"060B":["US","1","ReferencedTreatmentPositionIndex"],"060C":["US","1","ReferencedRadiationDoseIdentificationIndex"],"060D":["FD","1","RTAccessoryHolderWaterEquivalentThickness"],"060E":["US","1","ReferencedRTAccessoryHolderDeviceIndex"],"060F":["CS","1","RTAccessoryHolderSlotExistenceFlag"],"0610":["SQ","1","RTAccessoryHolderSlotSequence"],"0611":["LO","1","RTAccessoryHolderSlotID"],"0612":["FD","1","RTAccessoryHolderSlotDistance"],"0613":["FD","1","RTAccessorySlotDistance"],"0614":["SQ","1","RTAccessoryHolderDefinitionSequence"],"0615":["LO","1","RTAccessoryDeviceSlotID"],"0616":["SQ","1","RTRadiationSequence"],"0617":["SQ","1","RadiationDoseSequence"],"0618":["SQ","1","RadiationDoseIdentificationSequence"],"0619":["LO","1","RadiationDoseIdentificationLabel"],"061A":["CS","1","ReferenceDoseType"],"061B":["CS","1","PrimaryDoseValueIndicator"],"061C":["SQ","1","DoseValuesSequence"],"061D":["CS","1-n","DoseValuePurpose"],"061E":["FD","3","ReferenceDosePointCoordinates"],"061F":["SQ","1","RadiationDoseValuesParametersSequence"],"0620":["SQ","1","MetersetToDoseMappingSequence"],"0621":["SQ","1","ExpectedInVivoMeasurementValuesSequence"],"0622":["US","1","ExpectedInVivoMeasurementValueIndex"],"0623":["LO","1","RadiationDoseInVivoMeasurementLabel"],"0624":["FD","2","RadiationDoseCentralAxisDisplacement"],"0625":["FD","1","RadiationDoseValue"],"0626":["FD","1","RadiationDoseSourceToSkinDistance"],"0627":["FD","3","RadiationDoseMeasurementPointCoordinates"],"0628":["FD","1","RadiationDoseSourceToExternalContourDistance"],"0629":["SQ","1","RTToleranceSetSequence"],"062A":["LO","1","RTToleranceSetLabel"],"062B":["SQ","1","AttributeToleranceValuesSequence"],"062C":["FD","1","ToleranceValue"],"062D":["SQ","1","PatientSupportPositionToleranceSequence"],"062E":["FD","1","TreatmentTimeLimit"],"062F":["SQ","1","CArmPhotonElectronControlPointSequence"],"0630":["SQ","1","ReferencedRTRadiationSequence"],"0631":["SQ","1","ReferencedRTInstanceSequence"],"0632":["SQ","1","ReferencedRTPatientSetupSequence"],"0634":["FD","1","SourceToPatientSurfaceDistance"],"0635":["SQ","1","TreatmentMachineSpecialModeCodeSequence"],"0636":["US","1","IntendedNumberOfFractions"],"0637":["CS","1","RTRadiationSetIntent"],"0638":["CS","1","RTRadiationPhysicalAndGeometricContentDetailFlag"],"0639":["CS","1","RTRecordFlag"],"063A":["SQ","1","TreatmentDeviceIdentificationSequence"],"063B":["SQ","1","ReferencedRTPhysicianIntentSequence"],"063C":["FD","1","CumulativeMeterset"],"063D":["FD","1","DeliveryRate"],"063E":["SQ","1","DeliveryRateUnitSequence"],"063F":["SQ","1","TreatmentPositionSequence"],"0640":["FD","1","RadiationSourceAxisDistance"],"0641":["US","1","NumberOfRTBeamLimitingDevices"],"0642":["FD","1","RTBeamLimitingDeviceProximalDistance"],"0643":["FD","1","RTBeamLimitingDeviceDistalDistance"],"0644":["SQ","1","ParallelRTBeamDelimiterDeviceOrientationLabelCodeSequence"],"0645":["FD","1","BeamModifierOrientationAngle"],"0646":["SQ","1","FixedRTBeamDelimiterDeviceSequence"],"0647":["SQ","1","ParallelRTBeamDelimiterDeviceSequence"],"0648":["US","1","NumberOfParallelRTBeamDelimiters"],"0649":["FD","2-n","ParallelRTBeamDelimiterBoundaries"],"064A":["FD","2-n","ParallelRTBeamDelimiterPositions"],"064B":["FD","2","RTBeamLimitingDeviceOffset"],"064C":["SQ","1","RTBeamDelimiterGeometrySequence"],"064D":["SQ","1","RTBeamLimitingDeviceDefinitionSequence"],"064E":["CS","1","ParallelRTBeamDelimiterOpeningMode"],"064F":["CS","1-n","ParallelRTBeamDelimiterLeafMountingSide"],"0650":["UI","1","PatientSetupUID"],"0651":["SQ","1","WedgeDefinitionSequence"],"0652":["FD","1","RadiationBeamWedgeAngle"],"0653":["FD","1","RadiationBeamWedgeThinEdgeDistance"],"0654":["FD","1","RadiationBeamEffectiveWedgeAngle"],"0655":["US","1","NumberOfWedgePositions"],"0656":["SQ","1","RTBeamLimitingDeviceOpeningSequence"],"0657":["US","1","NumberOfRTBeamLimitingDeviceOpenings"],"0658":["SQ","1","RadiationDosimeterUnitSequence"],"0659":["SQ","1","RTDeviceDistanceReferenceLocationCodeSequence"],"065A":["SQ","1","RadiationDeviceConfigurationAndCommissioningKeySequence"],"065B":["SQ","1","PatientSupportPositionParameterSequence"],"065C":["CS","1","PatientSupportPositionSpecificationMethod"],"065D":["SQ","1","PatientSupportPositionDeviceParameterSequence"],"065E":["US","1","DeviceOrderIndex"],"065F":["US","1","PatientSupportPositionParameterOrderIndex"],"0660":["SQ","1","PatientSupportPositionDeviceToleranceSequence"],"0661":["US","1","PatientSupportPositionToleranceOrderIndex"],"0662":["SQ","1","CompensatorDefinitionSequence"],"0663":["CS","1","CompensatorMapOrientation"],"0664":["OF","1","CompensatorProximalThicknessMap"],"0665":["OF","1","CompensatorDistalThicknessMap"],"0666":["FD","1","CompensatorBasePlaneOffset"],"0667":["SQ","1","CompensatorShapeFabricationCodeSequence"],"0668":["SQ","1","CompensatorShapeSequence"],"0669":["FD","1","RadiationBeamCompensatorMillingToolDiameter"],"066A":["SQ","1","BlockDefinitionSequence"],"066B":["OF","1","BlockEdgeData"],"066C":["CS","1","BlockOrientation"],"066D":["FD","1","RadiationBeamBlockThickness"],"066E":["FD","1","RadiationBeamBlockSlabThickness"],"066F":["SQ","1","BlockEdgeDataSequence"],"0670":["US","1","NumberOfRTAccessoryHolders"],"0671":["SQ","1","GeneralAccessoryDefinitionSequence"],"0672":["US","1","NumberOfGeneralAccessories"],"0673":["SQ","1","BolusDefinitionSequence"],"0674":["US","1","NumberOfBoluses"],"0675":["UI","1","EquipmentFrameOfReferenceUID"],"0676":["ST","1","EquipmentFrameOfReferenceDescription"],"0677":["SQ","1","EquipmentReferencePointCoordinatesSequence"],"0678":["SQ","1","EquipmentReferencePointCodeSequence"],"0679":["FD","1","RTBeamLimitingDeviceAngle"],"067A":["FD","1","SourceRollAngle"],"067B":["SQ","1","RadiationGenerationModeSequence"],"067C":["SH","1","RadiationGenerationModeLabel"],"067D":["ST","1","RadiationGenerationModeDescription"],"067E":["SQ","1","RadiationGenerationModeMachineCodeSequence"],"067F":["SQ","1","RadiationTypeCodeSequence"],"0680":["DS","1","NominalEnergy"],"0681":["DS","1","MinimumNominalEnergy"],"0682":["DS","1","MaximumNominalEnergy"],"0683":["SQ","1","RadiationFluenceModifierCodeSequence"],"0684":["SQ","1","EnergyUnitCodeSequence"],"0685":["US","1","NumberOfRadiationGenerationModes"],"0686":["SQ","1","PatientSupportDevicesSequence"],"0687":["US","1","NumberOfPatientSupportDevices"],"0688":["FD","1","RTBeamModifierDefinitionDistance"],"0689":["SQ","1","BeamAreaLimitSequence"],"068A":["SQ","1","ReferencedRTPrescriptionSequence"],"0700":["UI","1","TreatmentSessionUID"],"0701":["CS","1","RTRadiationUsage"],"0702":["SQ","1","ReferencedRTRadiationSetSequence"],"0703":["SQ","1","ReferencedRTRadiationRecordSequence"],"0704":["US","1","RTRadiationSetDeliveryNumber"],"0705":["US","1","ClinicalFractionNumber"],"0706":["CS","1","RTTreatmentFractionCompletionStatus"],"0707":["CS","1","RTRadiationSetUsage"],"0708":["CS","1","TreatmentDeliveryContinuationFlag"],"0709":["CS","1","TreatmentRecordContentOrigin"],"0714":["CS","1","RTTreatmentTerminationStatus"],"0715":["SQ","1","RTTreatmentTerminationReasonCodeSequence"],"0716":["SQ","1","MachineSpecificTreatmentTerminationCodeSequence"],"0722":["SQ","1","RTRadiationSalvageRecordControlPointSequence"],"0723":["CS","1","StartingMetersetValueKnownFlag"],"0730":["ST","1","TreatmentTerminationDescription"],"0731":["SQ","1","TreatmentToleranceViolationSequence"],"0732":["CS","1","TreatmentToleranceViolationCategory"],"0733":["SQ","1","TreatmentToleranceViolationAttributeSequence"],"0734":["ST","1","TreatmentToleranceViolationDescription"],"0735":["ST","1","TreatmentToleranceViolationIdentification"],"0736":["DT","1","TreatmentToleranceViolationDateTime"],"073A":["DT","1","RecordedRTControlPointDateTime"],"073B":["US","1","ReferencedRadiationRTControlPointIndex"],"073E":["SQ","1","AlternateValueSequence"],"073F":["SQ","1","ConfirmationSequence"],"0740":["SQ","1","InterlockSequence"],"0741":["DT","1","InterlockDateTime"],"0742":["ST","1","InterlockDescription"],"0743":["SQ","1","InterlockOriginatingDeviceSequence"],"0744":["SQ","1","InterlockCodeSequence"],"0745":["SQ","1","InterlockResolutionCodeSequence"],"0746":["SQ","1","InterlockResolutionUserSequence"],"0760":["DT","1","OverrideDateTime"],"0761":["SQ","1","TreatmentToleranceViolationTypeCodeSequence"],"0762":["SQ","1","TreatmentToleranceViolationCauseCodeSequence"],"0772":["SQ","1","MeasuredMetersetToDoseMappingSequence"],"0773":["US","1","ReferencedExpectedInVivoMeasurementValueIndex"],"0774":["SQ","1","DoseMeasurementDeviceCodeSequence"],"0780":["SQ","1","AdditionalParameterRecordingInstanceSequence"],"0782":["US","1",""],"0783":["ST","1","InterlockOriginDescription"],"0784":["SQ","1","RTPatientPositionScopeSequence"],"0785":["UI","1","ReferencedTreatmentPositionGroupUID"],"0786":["US","1","RadiationOrderIndex"],"0787":["SQ","1","OmittedRadiationSequence"],"0788":["SQ","1","ReasonForOmissionCodeSequence"],"0789":["SQ","1","RTDeliveryStartPatientPositionSequence"],"078A":["SQ","1","RTTreatmentPreparationPatientPositionSequence"],"078B":["SQ","1","ReferencedRTTreatmentPreparationSequence"],"078C":["SQ","1","ReferencedPatientSetupPhotoSequence"],"078D":["SQ","1","PatientTreatmentPreparationMethodCodeSequence"],"078E":["LT","1","PatientTreatmentPreparationProcedureParameterDescription"],"078F":["SQ","1","PatientTreatmentPreparationDeviceSequence"],"0790":["SQ","1","PatientTreatmentPreparationProcedureSequence"],"0791":["SQ","1","PatientTreatmentPreparationProcedureCodeSequence"],"0792":["LT","1","PatientTreatmentPreparationMethodDescription"],"0793":["SQ","1","PatientTreatmentPreparationProcedureParameterSequence"],"0794":["LT","1","PatientSetupPhotoDescription"],"0795":["US","1","PatientTreatmentPreparationProcedureIndex"],"0796":["US","1","ReferencedPatientSetupProcedureIndex"],"0797":["SQ","1","RTRadiationTaskSequence"],"0798":["SQ","1","RTPatientPositionDisplacementSequence"],"0799":["SQ","1","RTPatientPositionSequence"],"079A":["LO","1","DisplacementReferenceLabel"],"079B":["FD","16","DisplacementMatrix"],"079C":["SQ","1","PatientSupportDisplacementSequence"],"079D":["SQ","1","DisplacementReferenceLocationCodeSequence"],"079E":["CS","1","RTRadiationSetDeliveryUsage"]},"300C":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","ReferencedRTPlanSequence"],"0004":["SQ","1","ReferencedBeamSequence"],"0006":["IS","1","ReferencedBeamNumber"],"0007":["IS","1","ReferencedReferenceImageNumber"],"0008":["DS","1","StartCumulativeMetersetWeight"],"0009":["DS","1","EndCumulativeMetersetWeight"],"000A":["SQ","1","ReferencedBrachyApplicationSetupSequence"],"000C":["IS","1","ReferencedBrachyApplicationSetupNumber"],"000E":["IS","1","ReferencedSourceNumber"],"0020":["SQ","1","ReferencedFractionGroupSequence"],"0022":["IS","1","ReferencedFractionGroupNumber"],"0040":["SQ","1","ReferencedVerificationImageSequence"],"0042":["SQ","1","ReferencedReferenceImageSequence"],"0050":["SQ","1","ReferencedDoseReferenceSequence"],"0051":["IS","1","ReferencedDoseReferenceNumber"],"0055":["SQ","1","BrachyReferencedDoseReferenceSequence"],"0060":["SQ","1","ReferencedStructureSetSequence"],"006A":["IS","1","ReferencedPatientSetupNumber"],"0080":["SQ","1","ReferencedDoseSequence"],"00A0":["IS","1","ReferencedToleranceTableNumber"],"00B0":["SQ","1","ReferencedBolusSequence"],"00C0":["IS","1","ReferencedWedgeNumber"],"00D0":["IS","1","ReferencedCompensatorNumber"],"00E0":["IS","1","ReferencedBlockNumber"],"00F0":["IS","1","ReferencedControlPointIndex"],"00F2":["SQ","1","ReferencedControlPointSequence"],"00F4":["IS","1","ReferencedStartControlPointIndex"],"00F6":["IS","1","ReferencedStopControlPointIndex"],"0100":["IS","1","ReferencedRangeShifterNumber"],"0102":["IS","1","ReferencedLateralSpreadingDeviceNumber"],"0104":["IS","1","ReferencedRangeModulatorNumber"],"0111":["SQ","1","OmittedBeamTaskSequence"],"0112":["CS","1","ReasonForOmission"],"0113":["LO","1","ReasonForOmissionDescription"],"0114":["SQ","1","PrescriptionOverviewSequence"],"0115":["FL","1","TotalPrescriptionDose"],"0116":["SQ","1","PlanOverviewSequence"],"0117":["US","1","PlanOverviewIndex"],"0118":["US","1","ReferencedPlanOverviewIndex"],"0119":["US","1","NumberOfFractionsIncluded"],"0120":["SQ","1","DoseCalibrationConditionsSequence"],"0121":["FD","1","AbsorbedDoseToMetersetRatio"],"0122":["FD","2","DelineatedRadiationFieldSize"],"0123":["CS","1","DoseCalibrationConditionsVerifiedFlag"],"0124":["FD","1","CalibrationReferencePointDepth"],"0125":["SQ","1","GatingBeamHoldTransitionSequence"],"0126":["CS","1","BeamHoldTransition"],"0127":["DT","1","BeamHoldTransitionDateTime"],"0128":["SQ","1","BeamHoldOriginatingDeviceSequence"]},"300E":{"0000":["UL","1","GenericGroupLength"],"0002":["CS","1","ApprovalStatus"],"0004":["DA","1","ReviewDate"],"0005":["TM","1","ReviewTime"],"0008":["PN","1","ReviewerName"]},3010:{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","RadiobiologicalDoseEffectSequence"],"0002":["CS","1","RadiobiologicalDoseEffectFlag"],"0003":["SQ","1","EffectiveDoseCalculationMethodCategoryCodeSequence"],"0004":["SQ","1","EffectiveDoseCalculationMethodCodeSequence"],"0005":["LO","1","EffectiveDoseCalculationMethodDescription"],"0006":["UI","1","ConceptualVolumeUID"],"0007":["SQ","1","OriginatingSOPInstanceReferenceSequence"],"0008":["SQ","1","ConceptualVolumeConstituentSequence"],"0009":["SQ","1","EquivalentConceptualVolumeInstanceReferenceSequence"],"000A":["SQ","1","EquivalentConceptualVolumesSequence"],"000B":["UI","1","ReferencedConceptualVolumeUID"],"000C":["UT","1","ConceptualVolumeCombinationExpression"],"000D":["US","1","ConceptualVolumeConstituentIndex"],"000E":["CS","1","ConceptualVolumeCombinationFlag"],"000F":["ST","1","ConceptualVolumeCombinationDescription"],"0010":["CS","1","ConceptualVolumeSegmentationDefinedFlag"],"0011":["SQ","1","ConceptualVolumeSegmentationReferenceSequence"],"0012":["SQ","1","ConceptualVolumeConstituentSegmentationReferenceSequence"],"0013":["UI","1","ConstituentConceptualVolumeUID"],"0014":["SQ","1","DerivationConceptualVolumeSequence"],"0015":["UI","1","SourceConceptualVolumeUID"],"0016":["SQ","1","ConceptualVolumeDerivationAlgorithmSequence"],"0017":["ST","1","ConceptualVolumeDescription"],"0018":["SQ","1","SourceConceptualVolumeSequence"],"0019":["SQ","1","AuthorIdentificationSequence"],"001A":["LO","1","ManufacturerModelVersion"],"001B":["UC","1","DeviceAlternateIdentifier"],"001C":["CS","1","DeviceAlternateIdentifierType"],"001D":["LT","1","DeviceAlternateIdentifierFormat"],"001E":["LO","1","SegmentationCreationTemplateLabel"],"001F":["UI","1","SegmentationTemplateUID"],"0020":["US","1","ReferencedSegmentReferenceIndex"],"0021":["SQ","1","SegmentReferenceSequence"],"0022":["US","1","SegmentReferenceIndex"],"0023":["SQ","1","DirectSegmentReferenceSequence"],"0024":["SQ","1","CombinationSegmentReferenceSequence"],"0025":["SQ","1","ConceptualVolumeSequence"],"0026":["SQ","1","SegmentedRTAccessoryDeviceSequence"],"0027":["SQ","1","SegmentCharacteristicsSequence"],"0028":["SQ","1","RelatedSegmentCharacteristicsSequence"],"0029":["US","1","SegmentCharacteristicsPrecedence"],"002A":["SQ","1","RTSegmentAnnotationSequence"],"002B":["SQ","1","SegmentAnnotationCategoryCodeSequence"],"002C":["SQ","1","SegmentAnnotationTypeCodeSequence"],"002D":["LO","1","DeviceLabel"],"002E":["SQ","1","DeviceTypeCodeSequence"],"002F":["SQ","1","SegmentAnnotationTypeModifierCodeSequence"],"0030":["SQ","1","PatientEquipmentRelationshipCodeSequence"],"0031":["UI","1","ReferencedFiducialsUID"],"0032":["SQ","1","PatientTreatmentOrientationSequence"],"0033":["SH","1","UserContentLabel"],"0034":["LO","1","UserContentLongLabel"],"0035":["SH","1","EntityLabel"],"0036":["LO","1","EntityName"],"0037":["ST","1","EntityDescription"],"0038":["LO","1","EntityLongLabel"],"0039":["US","1","DeviceIndex"],"003A":["US","1","RTTreatmentPhaseIndex"],"003B":["UI","1","RTTreatmentPhaseUID"],"003C":["US","1","RTPrescriptionIndex"],"003D":["US","1","RTSegmentAnnotationIndex"],"003E":["US","1","BasisRTTreatmentPhaseIndex"],"003F":["US","1","RelatedRTTreatmentPhaseIndex"],"0040":["US","1","ReferencedRTTreatmentPhaseIndex"],"0041":["US","1","ReferencedRTPrescriptionIndex"],"0042":["US","1","ReferencedParentRTPrescriptionIndex"],"0043":["ST","1","ManufacturerDeviceIdentifier"],"0044":["SQ","1","InstanceLevelReferencedPerformedProcedureStepSequence"],"0045":["CS","1","RTTreatmentPhaseIntentPresenceFlag"],"0046":["CS","1","RadiotherapyTreatmentType"],"0047":["CS","1-n","TeletherapyRadiationType"],"0048":["CS","1-n","BrachytherapySourceType"],"0049":["SQ","1","ReferencedRTTreatmentPhaseSequence"],"004A":["SQ","1","ReferencedDirectSegmentInstanceSequence"],"004B":["SQ","1","IntendedRTTreatmentPhaseSequence"],"004C":["DA","1","IntendedPhaseStartDate"],"004D":["DA","1","IntendedPhaseEndDate"],"004E":["SQ","1","RTTreatmentPhaseIntervalSequence"],"004F":["CS","1","TemporalRelationshipIntervalAnchor"],"0050":["FD","1","MinimumNumberOfIntervalDays"],"0051":["FD","1","MaximumNumberOfIntervalDays"],"0052":["UI","1-n","PertinentSOPClassesInStudy"],"0053":["UI","1-n","PertinentSOPClassesInSeries"],"0054":["LO","1","RTPrescriptionLabel"],"0055":["SQ","1","RTPhysicianIntentPredecessorSequence"],"0056":["LO","1","RTTreatmentApproachLabel"],"0057":["SQ","1","RTPhysicianIntentSequence"],"0058":["US","1","RTPhysicianIntentIndex"],"0059":["CS","1","RTTreatmentIntentType"],"005A":["UT","1","RTPhysicianIntentNarrative"],"005B":["SQ","1","RTProtocolCodeSequence"],"005C":["ST","1","ReasonForSuperseding"],"005D":["SQ","1","RTDiagnosisCodeSequence"],"005E":["US","1","ReferencedRTPhysicianIntentIndex"],"005F":["SQ","1","RTPhysicianIntentInputInstanceSequence"],"0060":["SQ","1","RTAnatomicPrescriptionSequence"],"0061":["UT","1","PriorTreatmentDoseDescription"],"0062":["SQ","1","PriorTreatmentReferenceSequence"],"0063":["CS","1","DosimetricObjectiveEvaluationScope"],"0064":["SQ","1","TherapeuticRoleCategoryCodeSequence"],"0065":["SQ","1","TherapeuticRoleTypeCodeSequence"],"0066":["US","1","ConceptualVolumeOptimizationPrecedence"],"0067":["SQ","1","ConceptualVolumeCategoryCodeSequence"],"0068":["CS","1","ConceptualVolumeBlockingConstraint"],"0069":["SQ","1","ConceptualVolumeTypeCodeSequence"],"006A":["SQ","1","ConceptualVolumeTypeModifierCodeSequence"],"006B":["SQ","1","RTPrescriptionSequence"],"006C":["SQ","1","DosimetricObjectiveSequence"],"006D":["SQ","1","DosimetricObjectiveTypeCodeSequence"],"006E":["UI","1","DosimetricObjectiveUID"],"006F":["UI","1","ReferencedDosimetricObjectiveUID"],"0070":["SQ","1","DosimetricObjectiveParameterSequence"],"0071":["SQ","1","ReferencedDosimetricObjectivesSequence"],"0073":["CS","1","AbsoluteDosimetricObjectiveFlag"],"0074":["FD","1","DosimetricObjectiveWeight"],"0075":["CS","1","DosimetricObjectivePurpose"],"0076":["SQ","1","PlanningInputInformationSequence"],"0077":["LO","1","TreatmentSite"],"0078":["SQ","1","TreatmentSiteCodeSequence"],"0079":["SQ","1","FractionPatternSequence"],"007A":["UT","1","TreatmentTechniqueNotes"],"007B":["UT","1","PrescriptionNotes"],"007C":["IS","1","NumberOfIntervalFractions"],"007D":["US","1","NumberOfFractions"],"007E":["US","1","IntendedDeliveryDuration"],"007F":["UT","1","FractionationNotes"],"0080":["SQ","1","RTTreatmentTechniqueCodeSequence"],"0081":["SQ","1","PrescriptionNotesSequence"],"0082":["SQ","1","FractionBasedRelationshipSequence"],"0083":["CS","1","FractionBasedRelationshipIntervalAnchor"],"0084":["FD","1","MinimumHoursBetweenFractions"],"0085":["TM","1-n","IntendedFractionStartTime"],"0086":["LT","1","IntendedStartDayOfWeek"],"0087":["SQ","1","WeekdayFractionPatternSequence"],"0088":["SQ","1","DeliveryTimeStructureCodeSequence"],"0089":["SQ","1","TreatmentSiteModifierCodeSequence"],"0090":["CS","1","RoboticBaseLocationIndicator"],"0091":["SQ","1","RoboticPathNodeSetCodeSequence"],"0092":["UL","1","RoboticNodeIdentifier"],"0093":["FD","3","RTTreatmentSourceCoordinates"],"0094":["FD","1","RadiationSourceCoordinateSystemYawAngle"],"0095":["FD","1","RadiationSourceCoordinateSystemRollAngle"],"0096":["FD","1","RadiationSourceCoordinateSystemPitchAngle"],"0097":["SQ","1","RoboticPathControlPointSequence"],"0098":["SQ","1","TomotherapeuticControlPointSequence"],"0099":["FD","1-n","TomotherapeuticLeafOpenDurations"],"009A":["FD","1-n","TomotherapeuticLeafInitialClosedDurations"]},4e3:{"0000":["UL","1","GenericGroupLength"],"0010":["LT","1","Arbitrary"],4e3:["LT","1","TextComments"]},4008:{"0000":["UL","1","GenericGroupLength"],"0040":["SH","1","ResultsID"],"0042":["LO","1","ResultsIDIssuer"],"0050":["SQ","1","ReferencedInterpretationSequence"],"00FF":["CS","1","ReportProductionStatusTrial"],"0100":["DA","1","InterpretationRecordedDate"],"0101":["TM","1","InterpretationRecordedTime"],"0102":["PN","1","InterpretationRecorder"],"0103":["LO","1","ReferenceToRecordedSound"],"0108":["DA","1","InterpretationTranscriptionDate"],"0109":["TM","1","InterpretationTranscriptionTime"],"010A":["PN","1","InterpretationTranscriber"],"010B":["ST","1","InterpretationText"],"010C":["PN","1","InterpretationAuthor"],"0111":["SQ","1","InterpretationApproverSequence"],"0112":["DA","1","InterpretationApprovalDate"],"0113":["TM","1","InterpretationApprovalTime"],"0114":["PN","1","PhysicianApprovingInterpretation"],"0115":["LT","1","InterpretationDiagnosisDescription"],"0117":["SQ","1","InterpretationDiagnosisCodeSequence"],"0118":["SQ","1","ResultsDistributionListSequence"],"0119":["PN","1","DistributionName"],"011A":["LO","1","DistributionAddress"],"0200":["SH","1","InterpretationID"],"0202":["LO","1","InterpretationIDIssuer"],"0210":["CS","1","InterpretationTypeID"],"0212":["CS","1","InterpretationStatusID"],"0300":["ST","1","Impressions"],4e3:["ST","1","ResultsComments"]},4010:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LowEnergyDetectors"],"0002":["CS","1","HighEnergyDetectors"],"0004":["SQ","1","DetectorGeometrySequence"],1001:["SQ","1","ThreatROIVoxelSequence"],1004:["FL","3","ThreatROIBase"],1005:["FL","3","ThreatROIExtents"],1006:["OB","1","ThreatROIBitmap"],1007:["SH","1","RouteSegmentID"],1008:["CS","1","GantryType"],1009:["CS","1","OOIOwnerType"],"100A":["SQ","1","RouteSegmentSequence"],1010:["US","1","PotentialThreatObjectID"],1011:["SQ","1","ThreatSequence"],1012:["CS","1","ThreatCategory"],1013:["LT","1","ThreatCategoryDescription"],1014:["CS","1","ATDAbilityAssessment"],1015:["CS","1","ATDAssessmentFlag"],1016:["FL","1","ATDAssessmentProbability"],1017:["FL","1","Mass"],1018:["FL","1","Density"],1019:["FL","1","ZEffective"],"101A":["SH","1","BoardingPassID"],"101B":["FL","3","CenterOfMass"],"101C":["FL","3","CenterOfPTO"],"101D":["FL","6-n","BoundingPolygon"],"101E":["SH","1","RouteSegmentStartLocationID"],"101F":["SH","1","RouteSegmentEndLocationID"],1020:["CS","1","RouteSegmentLocationIDType"],1021:["CS","1-n","AbortReason"],1023:["FL","1","VolumeOfPTO"],1024:["CS","1","AbortFlag"],1025:["DT","1","RouteSegmentStartTime"],1026:["DT","1","RouteSegmentEndTime"],1027:["CS","1","TDRType"],1028:["CS","1","InternationalRouteSegment"],1029:["LO","1-n","ThreatDetectionAlgorithmAndVersion"],"102A":["SH","1","AssignedLocation"],"102B":["DT","1","AlarmDecisionTime"],1031:["CS","1","AlarmDecision"],1033:["US","1","NumberOfTotalObjects"],1034:["US","1","NumberOfAlarmObjects"],1037:["SQ","1","PTORepresentationSequence"],1038:["SQ","1","ATDAssessmentSequence"],1039:["CS","1","TIPType"],"103A":["CS","1","DICOSVersion"],1041:["DT","1","OOIOwnerCreationTime"],1042:["CS","1","OOIType"],1043:["FL","3","OOISize"],1044:["CS","1","AcquisitionStatus"],1045:["SQ","1","BasisMaterialsCodeSequence"],1046:["CS","1","PhantomType"],1047:["SQ","1","OOIOwnerSequence"],1048:["CS","1","ScanType"],1051:["LO","1","ItineraryID"],1052:["SH","1","ItineraryIDType"],1053:["LO","1","ItineraryIDAssigningAuthority"],1054:["SH","1","RouteID"],1055:["SH","1","RouteIDAssigningAuthority"],1056:["CS","1","InboundArrivalType"],1058:["SH","1","CarrierID"],1059:["CS","1","CarrierIDAssigningAuthority"],1060:["FL","3","SourceOrientation"],1061:["FL","3","SourcePosition"],1062:["FL","1","BeltHeight"],1064:["SQ","1","AlgorithmRoutingCodeSequence"],1067:["CS","1","TransportClassification"],1068:["LT","1","OOITypeDescriptor"],1069:["FL","1","TotalProcessingTime"],"106C":["OB","1","DetectorCalibrationData"],"106D":["CS","1","AdditionalScreeningPerformed"],"106E":["CS","1","AdditionalInspectionSelectionCriteria"],"106F":["SQ","1","AdditionalInspectionMethodSequence"],1070:["CS","1","AITDeviceType"],1071:["SQ","1","QRMeasurementsSequence"],1072:["SQ","1","TargetMaterialSequence"],1073:["FD","1","SNRThreshold"],1075:["DS","1","ImageScaleRepresentation"],1076:["SQ","1","ReferencedPTOSequence"],1077:["SQ","1","ReferencedTDRInstanceSequence"],1078:["ST","1","PTOLocationDescription"],1079:["SQ","1","AnomalyLocatorIndicatorSequence"],"107A":["FL","3","AnomalyLocatorIndicator"],"107B":["SQ","1","PTORegionSequence"],"107C":["CS","1","InspectionSelectionCriteria"],"107D":["SQ","1","SecondaryInspectionMethodSequence"],"107E":["DS","6","PRCSToRCSOrientation"]},"4FFE":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","MACParametersSequence"]},5e3:{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","CurveDimensions"],"0010":["US","1","NumberOfPoints"],"0020":["CS","1","TypeOfData"],"0022":["LO","1","CurveDescription"],"0030":["SH","1-n","AxisUnits"],"0040":["SH","1-n","AxisLabels"],"0103":["US","1","DataValueRepresentation"],"0104":["US","1-n","MinimumCoordinateValue"],"0105":["US","1-n","MaximumCoordinateValue"],"0106":["SH","1-n","CurveRange"],"0110":["US","1-n","CurveDataDescriptor"],"0112":["US","1-n","CoordinateStartValue"],"0114":["US","1-n","CoordinateStepValue"],1001:["CS","1","CurveActivationLayer"],2e3:["US","1","AudioType"],2002:["US","1","AudioSampleFormat"],2004:["US","1","NumberOfChannels"],2006:["UL","1","NumberOfSamples"],2008:["UL","1","SampleRate"],"200A":["UL","1","TotalTime"],"200C":["ox","1","AudioSampleData"],"200E":["LT","1","AudioComments"],2500:["LO","1","CurveLabel"],2600:["SQ","1","CurveReferencedOverlaySequence"],2610:["US","1","CurveReferencedOverlayGroup"],3e3:["ox","1","CurveData"]},5200:{"0000":["UL","1","GenericGroupLength"],9229:["SQ","1","SharedFunctionalGroupsSequence"],9230:["SQ","1","PerFrameFunctionalGroupsSequence"]},5400:{"0000":["UL","1","GenericGroupLength"],"0100":["SQ","1","WaveformSequence"],"0110":["ox","1","ChannelMinimumValue"],"0112":["ox","1","ChannelMaximumValue"],1004:["US","1","WaveformBitsAllocated"],1006:["CS","1","WaveformSampleInterpretation"],"100A":["ox","1","WaveformPaddingValue"],1010:["ox","1","WaveformData"]},5600:{"0000":["UL","1","GenericGroupLength"],"0010":["OF","1","FirstOrderPhaseCorrectionAngle"],"0020":["OF","1","SpectroscopyData"]},6e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","OverlayRows"],"0011":["US","1","OverlayColumns"],"0012":["US","1","OverlayPlanes"],"0015":["IS","1","NumberOfFramesInOverlay"],"0022":["LO","1","OverlayDescription"],"0040":["CS","1","OverlayType"],"0045":["LO","1","OverlaySubtype"],"0050":["SS","2","OverlayOrigin"],"0051":["US","1","ImageFrameOrigin"],"0052":["US","1","OverlayPlaneOrigin"],"0060":["CS","1","OverlayCompressionCode"],"0061":["SH","1","OverlayCompressionOriginator"],"0062":["SH","1","OverlayCompressionLabel"],"0063":["CS","1","OverlayCompressionDescription"],"0066":["AT","1-n","OverlayCompressionStepPointers"],"0068":["US","1","OverlayRepeatInterval"],"0069":["US","1","OverlayBitsGrouped"],"0100":["US","1","OverlayBitsAllocated"],"0102":["US","1","OverlayBitPosition"],"0110":["CS","1","OverlayFormat"],"0200":["US","1","OverlayLocation"],"0800":["CS","1-n","OverlayCodeLabel"],"0802":["US","1","OverlayNumberOfTables"],"0803":["AT","1-n","OverlayCodeTableLocation"],"0804":["US","1","OverlayBitsForCodeWord"],1001:["CS","1","OverlayActivationLayer"],1100:["US","1","OverlayDescriptorGray"],1101:["US","1","OverlayDescriptorRed"],1102:["US","1","OverlayDescriptorGreen"],1103:["US","1","OverlayDescriptorBlue"],1200:["US","1-n","OverlaysGray"],1201:["US","1-n","OverlaysRed"],1202:["US","1-n","OverlaysGreen"],1203:["US","1-n","OverlaysBlue"],1301:["IS","1","ROIArea"],1302:["DS","1","ROIMean"],1303:["DS","1","ROIStandardDeviation"],1500:["LO","1","OverlayLabel"],3e3:["ox","1","OverlayData"],4e3:["LT","1","OverlayComments"]},"7F00":{"0000":["UL","1","GenericGroupLength"],"0010":["ox","1","VariablePixelData"],"0011":["US","1","VariableNextDataGroup"],"0020":["OW","1","VariableCoefficientsSDVN"],"0030":["OW","1","VariableCoefficientsSDHN"],"0040":["OW","1","VariableCoefficientsSDDN"]},"7FE0":{"0000":["UL","1","GenericGroupLength"],"0001":["OV","1","ExtendedOffsetTable"],"0002":["OV","1","ExtendedOffsetTableLengths"],"0008":["OF","1","FloatPixelData"],"0009":["OD","1","DoubleFloatPixelData"],"0010":["ox","1","PixelData"],"0020":["OW","1","CoefficientsSDVN"],"0030":["OW","1","CoefficientsSDHN"],"0040":["OW","1","CoefficientsSDDN"]},FFFA:{"0000":["UL","1","GenericGroupLength"],FFFA:["SQ","1","DigitalSignaturesSequence"]},FFFC:{"0000":["UL","1","GenericGroupLength"],FFFC:["OB","1","DataSetTrailingPadding"]},FFFE:{"0000":["UL","1","GenericGroupLength"],E000:["NONE","1","Item"],E00D:["NONE","1","ItemDelimitationItem"],E0DD:["NONE","1","SequenceDelimitationItem"]}};function ce(u,o){ue[u]=o}let q={"0000":"Command","0002":"Meta Element","0004":"File Set","0008":"Identifying","0009":"SPI Identifying","0010":"Patient","0012":"Clinical Trial","0018":"Acquisition","0019":"SPI Acquisition","0020":"Image","0021":"SPI Image","0022":"Ophtalmology","0028":"Image Presentation","0032":"Study","0038":"Visit","003A":"Waveform","0040":"Procedure","0042":"Encapsulated Document","0050":"Device Informations","0054":"Nuclear Medicine","0060":"Histogram","0070":"Presentation State","0072":"Hanging Protocol","0088":"Storage","0100":"Authorization","0400":"Digital Signature",1e3:"Code Table",1010:"Zonal Map",2e3:"Film Session",2010:"Film Box",2020:"Image Box",2030:"Annotation",2040:"Overlay Box",2050:"Presentation LUT",2100:"Print Job",2110:"Printer",2120:"Queue",2130:"Print Content",2200:"Media Creation",3002:"RT Image",3004:"RT Dose",3006:"RT StructureSet",3008:"RT Treatment","300A":"RT Plan","300C":"RT Relationship","300E":"RT Approval",4e3:"Text",4008:"Results","4FFE":"MAC Parameters",5e3:"Curve",5002:"Curve",5004:"Curve",5006:"Curve",5008:"Curve","500A":"Curve","500C":"Curve","500E":"Curve",5400:"Waveform Data",6e3:"Overlays",6002:"Overlays",6004:"Overlays",6008:"Overlays","600A":"Overlays","600C":"Overlays","600E":"Overlays",FFFC:"Generic","7FE0":"Pixel Data",FFFF:"Unknown"},V={OB:!0,OD:!0,OF:!0,OL:!0,OV:!0,OW:!0,SQ:!0,SV:!0,UC:!0,UN:!0,UR:!0,UT:!0,UV:!0,ox:!0};function X(u){return V[u]!==void 0}let he={SH:!0,LO:!0,UC:!0,ST:!0,LT:!0,UT:!0,PN:!0};function me(u){return he[u]!==void 0}let ee={AE:"string",AS:"string",AT:void 0,CS:"string",DA:"string",DS:"string",DT:"string",FL:"Float32",FD:"Float64",IS:"string",LO:"string",LT:"string",OB:"Uint8",OD:"Uint64",OF:"Uint32",OL:"Uint32",OV:"Uint64",OW:"Uint16",PN:"string",SH:"string",SL:"Int32",SQ:void 0,SS:"Int16",ST:"string",SV:"Int64",TM:"string",UC:"string",UI:"string",UL:"Uint32",UN:"Uint8",UR:"string",US:"Uint16",UT:"string",UV:"Uint64"},be={"1.2.840.10008.1.2":"Implicit VR Little Endian","1.2.840.10008.1.2.1":"Explicit VR Little Endian","1.2.840.10008.1.2.1.98":"Encapsulated Uncompressed Explicit VR Little Endian","1.2.840.10008.1.2.1.99":"Deflated Explicit VR Little Endian","1.2.840.10008.1.2.2":"Explicit VR Big Endian (Retired)","1.2.840.10008.1.2.4.50":"JPEG Baseline (Process 1)","1.2.840.10008.1.2.4.51":"JPEG Extended (Process 2 & 4)","1.2.840.10008.1.2.4.52":"JPEG Extended (Process 3 & 5) (Retired)","1.2.840.10008.1.2.4.53":"JPEG Spectral Selection, Non-Hierarchical (Process 6 & 8) (Retired)","1.2.840.10008.1.2.4.54":"JPEG Spectral Selection, Non-Hierarchical (Process 7 & 9) (Retired)","1.2.840.10008.1.2.4.55":"JPEG Full Progression, Non-Hierarchical (Process 10 & 12) (Retired)","1.2.840.10008.1.2.4.56":"JPEG Full Progression, Non-Hierarchical (Process 11 & 13) (Retired)","1.2.840.10008.1.2.4.57":"JPEG Lossless, Non-Hierarchical (Process 14)","1.2.840.10008.1.2.4.58":"JPEG Lossless, Non-Hierarchical (Process 15) (Retired)","1.2.840.10008.1.2.4.59":"JPEG Extended, Hierarchical (Process 16 & 18) (Retired)","1.2.840.10008.1.2.4.60":"JPEG Extended, Hierarchical (Process 17 & 19) (Retired)","1.2.840.10008.1.2.4.61":"JPEG Spectral Selection, Hierarchical (Process 20 & 22) (Retired)","1.2.840.10008.1.2.4.62":"JPEG Spectral Selection, Hierarchical (Process 21 & 23) (Retired)","1.2.840.10008.1.2.4.63":"JPEG Full Progression, Hierarchical (Process 24 & 26) (Retired)","1.2.840.10008.1.2.4.64":"JPEG Full Progression, Hierarchical (Process 25 & 27) (Retired)","1.2.840.10008.1.2.4.65":"JPEG Lossless, Hierarchical (Process 28) (Retired)","1.2.840.10008.1.2.4.66":"JPEG Lossless, Hierarchical (Process 29) (Retired)","1.2.840.10008.1.2.4.70":"JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1])","1.2.840.10008.1.2.4.80":"JPEG-LS Lossless Image Compression","1.2.840.10008.1.2.4.81":"JPEG-LS Lossy (Near-Lossless) Image Compression","1.2.840.10008.1.2.4.90":"JPEG 2000 Image Compression (Lossless Only)","1.2.840.10008.1.2.4.91":"JPEG 2000 Image Compression","1.2.840.10008.1.2.4.92":"JPEG 2000 Part 2 Multi-component Image Compression (Lossless Only)","1.2.840.10008.1.2.4.93":"JPEG 2000 Part 2 Multi-component Image Compression","1.2.840.10008.1.2.4.94":"JPIP Referenced","1.2.840.10008.1.2.4.95":"JPIP Referenced Deflate","1.2.840.10008.1.2.4.100":"MPEG2 Main Profile / Main Level","1.2.840.10008.1.2.4.101":"MPEG2 Main Profile / High Level","1.2.840.10008.1.2.4.102":"MPEG-4 AVC/H.264 High Profile / Level 4.1","1.2.840.10008.1.2.4.103":"MPEG-4 AVC/H.264 BD-compatible High Profile / Level 4.1","1.2.840.10008.1.2.4.104":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 2D Video","1.2.840.10008.1.2.4.105":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 3D Video","1.2.840.10008.1.2.4.106":"MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2","1.2.840.10008.1.2.4.107":"HEVC/H.265 Main Profile / Level 5.1","1.2.840.10008.1.2.4.108":"HEVC/H.265 Main 10 Profile / Level 5.1","1.2.840.10008.1.2.5":"RLE Lossless","1.2.840.10008.1.2.6.1":"RFC 2557 MIME encapsulation (Retired)","1.2.840.10008.1.2.6.2":"XML Encoding (Retired)","1.2.840.10008.1.2.7.1":"SMPTE ST 2110-20 Uncompressed Progressive Active Video","1.2.840.10008.1.2.7.2":"SMPTE ST 2110-20 Uncompressed Interlaced Active Video","1.2.840.10008.1.2.7.3":"SMPTE ST 2110-30 PCM Digital Audio","1.2.840.10008.1.20":"Papyrus 3 Implicit VR Little Endian (Retired)"},Oe="1.2.840.10008.1.2",_e="1.2.840.10008.1.2.1",He="1.2.840.10008.1.2.2",Jt="1.2.840.10008.1.2.4.50",It="1.2.840.10008.1.2.4.51",bi="1.2.840.10008.1.2.4.57",ys="1.2.840.10008.1.2.4.70",Vi="1.2.840.10008.1.2.5";class Un{#e;#t;constructor(o,a){if(!o||o===void 0)throw new Error("Cannot create tag with no group.");if(o.length!==4)throw new Error("Cannot create tag with badly sized group: "+o);if(!a||a===void 0)throw new Error("Cannot create tag with no element.");if(a.length!==4)throw new Error("Cannot create tag with badly sized element: "+a);this.#e=o,this.#t=a}getGroup(){return this.#e}getElement(){return this.#t}toString(){return this.getKey()+": "+this.getNameFromDictionary()}equals(o){return o!=null&&this.#e===o.getGroup()&&this.#t===o.getElement()}getKey(){return this.#e+this.#t}getGroupName(){return q[this.#e]}isWithVR(){return!(this.#e==="FFFE"&&(this.#t==="E000"||this.#t==="E00D"||this.#t==="E0DD"))}isPrivate(){return parseInt(this.#e,16)%2==1}#n(){let o;return ue[this.#e]!==void 0&&ue[this.#e][this.#t]!==void 0&&(o=ue[this.#e][this.#t]),o}getVrFromDictionary(){let o,a=this.#n();return a!==void 0&&(o=a[0]),o}getNameFromDictionary(){let o,a=this.#n();return a!==void 0&&(o=a[2]),o}}function yn(u,o){let a=parseInt(u.getGroup(),16)-parseInt(o.getGroup(),16);return a===0&&(a=parseInt(u.getElement(),16)-parseInt(o.getElement(),16)),a}function yr(u){if(!u||u===void 0)throw new Error("Cannot create tag with no key.");if(u.length!==8)throw new Error("Cannot create tag with badly sized key: "+u);return new Un(u.substring(0,4),u.substring(4,8))}function Mo(){return new Un("FFFE","E000")}function _i(u){return u.getKey()==="FFFEE000"}function Yl(u){return u.getKey()==="FFFEE00D"}function Bd(u){return u.getKey()==="FFFEE0DD"}function Nm(){return new Un("7FE0","0010")}function Ro(u){return u.getKey()==="7FE00010"}function _a(u){if(u==null)return null;let o=null,a=null,c=ue,f=Object.keys(c),m,y=null,S=!1;for(let D=0,E=f.length;D<E;++D){o=f[D],y=Object.keys(c[o]);for(let I=0,R=y.length;I<R;++I)if(a=y[I],c[o][a][2]===u){S=!0;break}if(S)break}return S&&(m=new Un(o,a)),m}class $n{vr;value;tag;vl;undefinedLength;startOffset;endOffset;items;constructor(o){this.vr=o}}function Ti(u){let o=u.byteLength,a=new Uint8Array(u.buffer,u.byteOffset,o),c=u.BYTES_PER_ELEMENT,f;for(let m=0;m<o;m+=c)for(let y=m+c-1,S=m;y>S;y--,S++)f=a[S],a[S]=a[y],a[y]=f}class Ud{#e;#t=!0;#n=function(){return new Int8Array(new Int16Array([1]).buffer)[0]>0}();#i;#r;constructor(o,a){this.#e=o,a!==void 0&&(this.#t=a),this.#i=this.#t!==this.#n,this.#r=new DataView(o)}readUint16(o){return this.#r.getUint16(o,this.#t)}readInt16(o){return this.#r.getInt16(o,this.#t)}readUint32(o){return this.#r.getUint32(o,this.#t)}readBigUint64(o){return this.#r.getBigUint64(o,this.#t)}readInt32(o){return this.#r.getInt32(o,this.#t)}readBigInt64(o){return this.#r.getBigInt64(o,this.#t)}readFloat32(o){return this.#r.getFloat32(o,this.#t)}readFloat64(o){return this.#r.getFloat64(o,this.#t)}readBinaryArray(o,a){let c=new Uint8Array(this.#e,o,a),f=8*c.length,m=new Uint8Array(f),y=0,S=0;for(let D=0;D<f;++D)y=D%8,S=Math.floor(D/8),m[D]=255*!!(c[S]&1<<y);return m}readUint8Array(o,a){return new Uint8Array(this.#e,o,a)}readInt8Array(o,a){return new Int8Array(this.#e,o,a)}readUint16Array(o,a){let c=Uint16Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Uint16Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Uint16Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readUint16(y),y+=c}return m}readInt16Array(o,a){let c=Int16Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Int16Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Int16Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readInt16(y),y+=c}return m}readUint32Array(o,a){let c=Uint32Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Uint32Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Uint32Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readUint32(y),y+=c}return m}readUint64Array(o,a){let c=BigUint64Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new BigUint64Array(this.#e,o,f),this.#i&&Ti(m);else{m=new BigUint64Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readBigUint64(y),y+=c}return m}readInt32Array(o,a){let c=Int32Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Int32Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Int32Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readInt32(y),y+=c}return m}readInt64Array(o,a){let c=BigInt64Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new BigInt64Array(this.#e,o,f),this.#i&&Ti(m);else{m=new BigInt64Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readBigInt64(y),y+=c}return m}readFloat32Array(o,a){let c=Float32Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Float32Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Float32Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readFloat32(y),y+=c}return m}readFloat64Array(o,a){let c=Float64Array.BYTES_PER_ELEMENT,f=a/c,m=null;if(o%c==0)m=new Float64Array(this.#e,o,f),this.#i&&Ti(m);else{m=new Float64Array(f);let y=o;for(let S=0;S<f;++S)m[S]=this.readFloat64(y),y+=c}return m}readHex(o){let a=this.readUint16(o).toString(16);return"0000".substring(0,4-a.length)+a.toUpperCase()}}function dM(){return"0.34.0"}function uM(u){return!(u.byteLength<132)&&new Uint8Array(u,128,4).reduce(function(o,a){return o+String.fromCharCode(a)},"")==="DICM"}let hM=String.fromCharCode("u200B");class fM{decode(o){let a="";for(let c=0,f=o.length;c<f;++c)a+=String.fromCharCode(o[c]);return a}}function Vm(u){if(!u)return null;let o={L:"R",R:"L",A:"P",P:"A",H:"F",F:"H"},a="";for(let c=0;c<u.length;c++){let f=o[u.substring(c,c+1)];f&&(a+=f)}return a}function lb(u){return u===Oe}function cb(u){return u===He}function Bm(u){return u===Jt||u===It}function Um(u){return u===bi||u===ys}function qm(u){return u.match(/1.2.840.10008.1.2.4.9/)!==null}function db(u){return u===Vi}function ub(u,o,a){let c=null;try{u===1||u===8?c=o===0?new Uint8Array(a):new Int8Array(a):u===16?c=o===0?new Uint16Array(a):new Int16Array(a):u===32&&(c=o===0?new Uint32Array(a):new Int32Array(a))}catch(f){if(f instanceof RangeError){let m=Math.floor(Math.log(a)/Math.log(2));p.error("Cannot allocate array of size: "+a+" (>2^"+m+").")}}return c}function Zi(u,o){return o?8:X(u)?12:8}let hb="00280008",fb="00280100",pb="00280103",mb="7FE00010";class jm{#e={};#t;#n=new fM;#i=this.#n;#r(o){return this.#n.decode(o)}#o(o){return this.#i.decode(o)}getDefaultCharacterSet(){return this.#t}setDefaultCharacterSet(o){this.#t=o}setDecoderCharacterSet(o){this.#i=new TextDecoder(o)}getDicomElements(){return this.#e}#s(o,a){let c=o.readHex(a);a+=Uint16Array.BYTES_PER_ELEMENT;let f=o.readHex(a);return a+=Uint16Array.BYTES_PER_ELEMENT,{tag:new Un(c,f),endOffset:a}}#a(o,a,c){let f={},m=this.#l(o,a,c);if(a=m.endOffset,Bd(m.tag))return{data:f,endOffset:m.endOffset,isSeqDelim:!0};if(f[m.tag.getKey()]={tag:m.tag,vr:"NONE",vl:m.vl,undefinedLength:m.undefinedLength},m.undefinedLength){let y=!1;for(;!y;)m=this.#l(o,a,c),a=m.endOffset,y=Yl(m.tag),y||(f[m.tag.getKey()]=m)}else{let y=a;for(a-=m.vl;a<y;)m=this.#l(o,a,c),a=m.endOffset,f[m.tag.getKey()]=m}return{data:f,endOffset:a,isSeqDelim:!1}}#c(o,a,c){let f=[],m=this.#l(o,a,c),y=m.vl;a=m.endOffset;let S=!1;for(;!S;)m=this.#l(o,a,c),a=m.endOffset,S=Bd(m.tag),S||(m.vr="OB",f.push(m));return{data:f,endOffset:a,offsetTableVl:y}}#l(o,a,c){let f=this.#s(o,a),m=f.tag;a=f.endOffset;let y=null,S=!1;m.isWithVR()?c?(y=m.getVrFromDictionary(),y===void 0&&(y="UN"),S=!0):(y=this.#r(o.readUint8Array(a,2)),a+=2*Uint8Array.BYTES_PER_ELEMENT,S=X(y),S&&(a+=2*Uint8Array.BYTES_PER_ELEMENT)):(y="NONE",S=!0),function(z){return Object.keys(ee).concat(["NONE","ox","xx","xs"]).includes(z)}(y)||(p.warn("Unknown VR: "+y+" (for tag "+m.getKey()+"), treating as 'UN'"),y="UN");let D=0;S?(D=o.readUint32(a),a+=Uint32Array.BYTES_PER_ELEMENT):(D=o.readUint16(a),a+=Uint16Array.BYTES_PER_ELEMENT);let E=!1;D===4294967295&&(E=!0,D=0),m.isPrivate()&&y==="UN"&&D===0&&(y="SQ");let I,R=a,P=R+D;if(Ro(m)&&E){let z=this.#c(o,a,c);a=z.endOffset,R+=z.offsetTableVl,I=z.data,P=a,D=a-R}else if(y==="SQ"){let z;if(I=[],E){let J=!1;for(;!J;)z=this.#a(o,a,c),J=z.isSeqDelim,a=z.endOffset,J||I.push(z.data);P=a,D=a-R}else if(D!==0){let J=a+D;for(;a<J;)z=this.#a(o,a,c),I.push(z.data),a=z.endOffset;P=a,D=a-R}}let B=new $n(y);return B.tag=m,B.vl=D,B.startOffset=R,B.endOffset=P,E&&(B.undefinedLength=E),I&&(B.items=I),B}#u(o,a,c,f){let m=o.tag,y=o.vl,S=o.vr,D=o.startOffset,E=null,I=ee[S];if(Ro(m))if(o.undefinedLength){E=[];for(let R=0;R<o.items.length;++R)E.push(this.#u(o.items[R],a,c,f));delete o.items}else if(f>8&&S==="OB"&&(p.warn("Reading DICOM pixel data with bitsAllocated>8 and OB VR, treating as OW"),o.vr="OW"),E=[],f===1)E.push(a.readBinaryArray(D,y));else if(f===8)c===0?E.push(a.readUint8Array(D,y)):E.push(a.readInt8Array(D,y));else{if(f!==16)throw new Error("Unsupported bits allocated: "+f);c===0?E.push(a.readUint16Array(D,y)):E.push(a.readInt16Array(D,y))}else if(I!==void 0)if(I==="Uint8")E=a.readUint8Array(D,y);else if(I==="Uint16")E=a.readUint16Array(D,y),S[0]!=="O"&&(E=Array.from(E));else if(I==="Uint32")E=a.readUint32Array(D,y),S[0]!=="O"&&(E=Array.from(E));else if(I==="Uint64")E=a.readUint64Array(D,y);else if(I==="Int16")E=Array.from(a.readInt16Array(D,y));else if(I==="Int32")E=Array.from(a.readInt32Array(D,y));else if(I==="Int64")E=a.readInt64Array(D,y);else if(I==="Float32")E=Array.from(a.readFloat32Array(D,y));else if(I==="Float64")E=Array.from(a.readFloat64Array(D,y));else{if(I!=="string")throw new Error("Unknown VR type: "+I);{let R=a.readUint8Array(D,y);E=me(S)?this.#o(R):this.#r(R),E=function(P){let B=P,z=P.length-1;return P[z]===hM&&(B=P.substring(0,z)),B=B.trim(),B}(E).split("\\")}}else if(S==="xx")E=Array.from(a.readUint16Array(D,y));else if(S==="ox")E=f===8?c===0?Array.from(a.readUint8Array(D,y)):Array.from(a.readInt8Array(D,y)):c===0?Array.from(a.readUint16Array(D,y)):Array.from(a.readInt16Array(D,y));else if(S==="xs")E=c===0?Array.from(a.readUint16Array(D,y)):Array.from(a.readInt16Array(D,y));else if(S==="AT"){let R=a.readUint16Array(D,y);E=[];for(let P=0,B=R.length;P<B;P+=2){let z=R[P].toString(16),J=R[P+1].toString(16),te="(";te+="0000".substring(0,4-z.length)+z.toUpperCase(),te+=",",te+="0000".substring(0,4-J.length)+J.toUpperCase(),te+=")",E.push(te)}}else if(S==="SQ"){E=[];for(let R=0;R<o.items.length;++R){let P=o.items[R],B={},z=Object.keys(P),J=f,te=c;for(let ve=0;ve<z.length;++ve){let ie=P[fb];ie!==void 0&&ie.value!==void 0&&(J=ie.value[0]),ie=P[pb],ie!==void 0&&ie.value!==void 0&&(te=ie.value[0]);let se=P[z[ve]];se.value=this.#u(se,a,te,J),delete se.tag,delete se.vl,delete se.startOffset,delete se.endOffset,B[z[ve]]=se}E.push(B)}delete o.items}else S==="NONE"||p.warn("Unknown VR: "+S+" (for tag "+o.tag.getKey()+")"),E=[];return E}#d(o,a,c,f){let m=Object.keys(o);for(let y=0;y<m.length;++y){let S=o[m[y]];S.value===void 0&&(S.value=this.#u(S,a,c,f)),delete S.tag,delete S.vl,delete S.startOffset,delete S.endOffset}}parse(o){let a=0,c="",f=null,m=new Ud(o),y=new Ud(o);a=128;let S=this.#r(m.readUint8Array(a,4));if(a+=4*Uint8Array.BYTES_PER_ELEMENT,S==="DICM"){f=this.#l(m,a,!1),f.value=this.#u(f,m),a=f.endOffset,this.#e[f.tag.getKey()]=f;let R=a+f.value[0];for(;a<R;)f=this.#l(m,a,!1),a=f.endOffset,this.#e[f.tag.getKey()]=f;if(f=this.#e["00020010"],f===void 0)throw new Error("Not a valid DICOM file (no TransferSyntaxUID found)");f.value=this.#u(f,m),c=f.value[0]}else{p.warn("No DICM prefix, trying to guess tansfer syntax."),f=this.#l(y,0,!1);let R=function(P){let B="0008",z=P.tag.getGroup();if(z!=="0800"&&z!==B)throw new Error("Not a valid DICOM file (no magic DICM word found and first element not in 0008 group)");let J=P.vr,te=J.charCodeAt(0),ve=J.charCodeAt(1),ie=!(te>=65&&te<=90&&ve>=65&&ve<=90),se=null;if(z===B)se=ie?Oe:_e;else{if(ie)throw new Error("Not a valid DICOM file (no magic DICM word foundand implicit VR big endian detected)");se=He}let ae=new $n("UI");return ae.tag=new Un("0002","0010"),ae.value=[se],ae.vl=ae.value[0].length,ae.startOffset=P.startOffset,ae.endOffset=ae.startOffset+ae.vl,ae}(f);this.#e[R.tag.getKey()]=R,c=R.value[0],a=0}if(!function(R){return R===Oe||R===_e||R===He||Bm(R)||Um(R)||qm(R)||db(R)}(c))throw new Error("Unsupported DICOM transfer syntax: '"+c+"' ("+function(R){let P="Unknown";return be[R]!==void 0&&(P=be[R]),P}(c)+")");let D=!1;for(lb(c)&&(D=!0),cb(c)&&(y=new Ud(o,!1));a<o.byteLength;){f=this.#l(y,a,D),a=f.endOffset;let R=f.tag.getKey();this.#e[R]===void 0?this.#e[R]=f:p.warn("Not saving duplicate tag: "+R)}if(isNaN(a))throw new Error("Problem while parsing, bad offset");o.byteLength!==a&&p.warn("Did not reach the end of the buffer: "+a+" != "+o.byteLength);let E=0,I=16;if(this.#e[mb]!==void 0&&(f=this.#e[pb],f!==void 0?(f.value=this.#u(f,y),E=f.value[0]):p.warn("Reading DICOM pixel data with default pixelRepresentation."),f=this.#e[fb],f!==void 0?(f.value=this.#u(f,y),I=f.value[0]):p.warn("Reading DICOM pixel data with default bitsAllocated.")),this.#t!==void 0&&this.setDecoderCharacterSet(this.#t),f=this.#e["00080005"],f!==void 0){let R;f.value=this.#u(f,y),f.value.length===1?R=f.value[0]:(R=f.value[1],p.warn("Unsupported character set with code extensions: '"+R+"'.")),this.setDecoderCharacterSet(function(P){let B="utf-8";return P==="ISO_IR 100"?B="iso-8859-1":P==="ISO_IR 101"?B="iso-8859-2":P==="ISO_IR 109"?B="iso-8859-3":P==="ISO_IR 110"?B="iso-8859-4":P==="ISO_IR 144"?B="iso-8859-5":P==="ISO_IR 127"?B="iso-8859-6":P==="ISO_IR 126"?B="iso-8859-7":P==="ISO_IR 138"?B="iso-8859-8":P==="ISO_IR 148"?B="iso-8859-9":P==="ISO_IR 13"?B="shift-jis":P==="ISO_IR 166"?B="iso-8859-11":P==="ISO 2022 IR 87"?B="iso-2022-jp":P==="ISO 2022 IR 149"||P==="ISO 2022 IR 58"||(P==="ISO_IR 192"?B="utf-8":P==="GB18030"?B="gb18030":P==="GB2312"?B="gb2312":P==="GBK"&&(B="chinese")),B}(R))}if(this.#d(this.#e,y,E,I),f=this.#e[mb],f!==void 0&&f.undefinedLength){let R=1;this.#e[hb]!==void 0&&(R=Number(this.#e[hb].value[0]));let P=f.value;if(P.length>1&&P.length>R){let B=P.length/R,z=[],J=0;for(let te=0;te<R;++te){J=te*B;let ve=0;for(let ae=0;ae<B;++ae)ve+=P[J+ae].length;let ie=new P[0].constructor(ve),se=0;for(let ae=0;ae<B;++ae)ie.set(P[J+ae],se),se+=P[J+ae].length;z[te]=ie}f.value=z}}}}class ri{#e={};add(o,a){this.#e[o]===void 0&&(this.#e[o]=[]),this.#e[o].push(a)}remove(o,a){if(this.#e[o]===void 0)return;let c=0;for(let f=0;f<this.#e[o].length;++f)this.#e[o][f]===a&&(++c,this.#e[o].splice(f,1));c===0&&p.debug("No callback found on remove listener for type "+o)}fireEvent=o=>{if(this.#e[o.type]===void 0)return;let a=this.#e[o.type].slice();for(let c=0;c<a.length;++c)a[c](o)}}function Ss(u,o,a,c,f,m,y,S){y===void 0&&(y=!1),S===void 0&&(S=!1);let D=o;y?(m*=-1,S?D-=(f-1)*c:c*=-1):S&&(D+=(f-1)*c,c*=-1);let E=m-f*c,I=0,R=0;return{next:function(){if(I<a){let P={value:u(D),done:!1,index:D};return D+=c,++I,++R,R===f&&(R=0,D+=E),P}return{done:!0,index:D}}}}function Gm(u){let o=[],a=u.next();for(;!a.done;)o.push(a.value),a=u.next();return o}function gb(u,o,a,c){let f=u.getGeometry().getSize(),m=2;c&&c!==void 0&&(m=c.getColAbsMax(2).index);let y=o.getValues(),S=new d(y.map(function(ie,se){return se===m||se>2?ie:0})),D=f.indexToOffset(S);a===void 0&&(a=!1);let E=null;E=a?function(ie){return u.getRescaledValueAtOffset(ie)}:function(ie){return u.getValueAtOffset(ie)};let I=f.get(0),R=f.get(1),P=f.get(2),B=f.getDimSize(2),z=u.getNumberOfComponents(),J=u.getPlanarConfiguration()===1,te=function(ie,se,ae,re,Ce,we,Ae,Ne){return z===1?Ss(ie,se,ae,re,Ce,we,Ae,Ne):z===3?function(tt,Tt,Gt,dt,en,Le,tn,Bt,bn){let Ke=[];return bn?(Ke.push(Ss(tt,Tt,Gt,dt,en,Le,tn,Bt)),Ke.push(Ss(tt,Tt+Gt*dt,Gt,dt,en,Le,tn,Bt)),Ke.push(Ss(tt,Tt+2*Gt*dt,Gt,dt,en,Le,tn,Bt))):(dt*=3,Le*=3,Ke.push(Ss(tt,Tt,Gt,dt,en,Le,tn,Bt)),Ke.push(Ss(tt,Tt+1,Gt,dt,en,Le,tn,Bt)),Ke.push(Ss(tt,Tt+2,Gt,dt,en,Le,tn,Bt))),{next:function(){let $e=Ke[0].next(),xn=Ke[1].next(),Yn=Ke[2].next();return $e.done?{done:!0,index:Yn.index}:{value:[$e.value,xn.value,Yn.value],done:!1,index:[$e.index,xn.index,Yn.index]}}}}(ie,3*se,ae,re,Ce,we,Ae,Ne,J):void 0},ve=null;if(c&&c!==void 0){let ie=c.getColAbsMax(0),se=c.getColAbsMax(2),ae=!1,re=!1,Ce=null;if(se.index===2)Ce=I*R,ve=ie.index===0?te(E,D,Ce,1,I,I,ae,re):te(E,D,Ce,I,R,1,ae,re);else if(se.index===0)Ce=P*R,ve=ie.index===1?te(E,D,Ce,I,R,B,ae,re):te(E,D,Ce,B,P,I,ae,re);else{if(se.index!==1)throw new Error("Unknown direction: "+se.index);Ce=P*I,ve=ie.index===0?te(E,D,Ce,1,I,B,ae,re):te(E,D,Ce,B,P,1,ae,re)}}else if(u.getNumberOfComponents()===1)ve=function(ie,se,ae,re){re===void 0&&(re=1);let Ce=se;return{next:function(){if(Ce<ae){let we={value:ie(Ce),done:!1,index:Ce};return Ce+=re,we}return{done:!0,index:ae}}}}(E,D,D+B);else{if(u.getNumberOfComponents()!==3)throw new Error("Unsupported number of components: "+u.getNumberOfComponents());D*=3,B*=3,ve=function(ie,se,ae,re,Ce){re===void 0&&(re=1),Ce===void 0&&(Ce=!1);let we=se,Ae=1;Ce?Ae=(ae-se)/3:re*=3;let Ne=we+Ae,tt=we+2*Ae;return{next:function(){if(we<ae){let Tt={value:[ie(we),ie(Ne),ie(tt)],done:!1,index:[we,Ne,tt]};return we+=re,Ne+=re,tt+=re,Tt}return{done:!0,index:[ae]}}}}(E,D,D+B,1,J)}return ve}function vb(u,o){let a=0,c=0;return{next:function(){if(a<o){c+1<u.length&&a>=u[c+1].index&&++c;let f={value:u[c].colour,done:!1,index:a};return++a,f}return{done:!0,index:o}}}}class qd{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getSlope(){return this.#e}getIntercept(){return this.#t}apply(o){return o*this.#e+this.#t}equals(o){return o!=null&&this.getSlope()===o.getSlope()&&this.getIntercept()===o.getIntercept()}isID(){return this.getSlope()===1&&this.getIntercept()===0}}class Oo{#e;constructor(o){if(!o||o===void 0)throw new Error("Cannot create size with no values.");if(o.length===0)throw new Error("Cannot create size with empty values.");if(!o.every(function(a){return!isNaN(a)&&a!==0}))throw new Error("Cannot create size with non number or zero values.");this.#e=o}get(o){return this.#e[o]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}moreThanOne(o){return this.length()>=o+1&&this.get(o)!==1}canScroll3D(o){let a=2;return o!==void 0&&(a=o.getThirdColMajorDirection()),this.moreThanOne(a)}canScroll(o){let a=this.canScroll3D(o);for(let c=3;c<this.length();++c)a=a||this.moreThanOne(c);return a}getDimSize(o,a){if(o>this.length())return null;if(a===void 0)a=0;else if(a<0||a>o)throw new Error("Invalid start value for getDimSize");let c=1;for(let f=a;f<o;++f)c*=this.get(f);return c}getTotalSize(o){return this.getDimSize(this.length(),o)}equals(o){if(!o)return!1;let a=this.length();if(a!==o.length())return!1;for(let c=0;c<a;++c)if(this.get(c)!==o.get(c))return!1;return!0}isInBounds(o,a){if(!o)return!1;let c=this.length();if(c!==o.length())return!1;if(a===void 0){a=[];for(let y=0;y<c;++y)a.push(y)}else for(let y=0;y<c;++y)if(a[y]>c-1)throw new Error("Wrong input dir value: "+a[y]);for(let y=0;y<a.length;++y)if(f=o.get(a[y]),m=this.get(a[y]),!(f>=0&&f<m))return!1;var f,m;return!0}indexToOffset(o,a){if(o.length()<this.length())throw new Error("Incompatible index and size length");if(a===void 0)a=0;else if(a<0||a>this.length()-1)throw new Error("Invalid start value for indexToOffset");let c=0;for(let f=a;f<this.length();++f)c+=o.get(f)*this.getDimSize(f,a);return c}offsetToIndex(o){let a=new Array(this.length()),c=o,f=0;for(let m=this.length()-1;m>0;--m)f=this.getDimSize(m),a[m]=Math.floor(c/f),c-=a[m]*f;return a[0]=c,new d(a)}get2D(){return{x:this.get(0),y:this.get(1)}}}class pM{min;max;mean;stdDev;median;p25;p75;constructor(o,a,c,f){this.min=o,this.max=a,this.mean=c,this.stdDev=f}}function zm(u,o){return function(a){return a!=null&&(a.includes("median")||a.includes("p25")||a.includes("p75"))}(o)?function(a){let c=Hm(a);return a.sort(function(f,m){return f-m}),c.median=Qm(a,.5),c.p25=Qm(a,.25),c.p75=Qm(a,.75),c}(u):Hm(u)}function Hm(u){let o=u[0],a=o,c=0,f=0,m=0,y=u.length;for(let I=0;I<y;++I)m=u[I],m<o?o=m:m>a&&(a=m),c+=m,f+=m*m;let S=c/y,D=f/y-S*S;D<0&&(D=0);let E=Math.sqrt(D);return new pM(o,a,S,E)}function Qm(u,o){if(u.length===0)throw new Error("Empty array provided for percentile calculation.");if(o<0||o>1)throw new Error("Invalid ratio provided for percentile calculation: "+o);if(o===0)return u[0];if(o===1)return u[u.length-1];let a=(u.length-1)*o,c=Math.floor(a),f=u[c];return f+(u[c+1]-f)*(a-c)}function jd(){return Math.random().toString(36).substring(2,15)}class mM{min;max;constructor(o,a){this.min=o,this.max=a}}class Po{#e;constructor(o){if(!o||o===void 0)throw new Error("Cannot create spacing with no values.");if(o.length===0)throw new Error("Cannot create spacing with empty values.");if(!o.every(function(a){return!isNaN(a)&&a!==0}))throw new Error("Cannot create spacing with non number or zero values.");this.#e=o}get(o){return this.#e[o]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}equals(o){if(!o)return!1;let a=this.length();if(a!==o.length())return!1;for(let c=0;c<a;++c)if(this.get(c)!==o.get(c))return!1;return!0}get2D(){return{x:this.get(0),y:this.get(1)}}}class Da{#e;#t;#n;#i={};#r;#o=ge();#s=!1;constructor(o,a,c,f,m){this.#e=[o],this.#t=a,this.#n=c,m!==void 0&&(this.#r=m,this.#i[m]=[o]),f!==void 0&&(this.#o=f)}getInitialTime(){return this.#r}getCurrentTotalNumberOfSlices(){let o=Object.keys(this.#i);if(o.length===0)return this.#e.length;let a=0;for(let c=0;c<o.length;++c)a+=this.#i[o[c]].length;return a}hasSlicesAtTime(o){return this.#i[o]!==void 0}getCurrentNumberOfSlicesBeforeTime(o){let a=Object.keys(this.#i);if(a.length===0)return;let c=0;for(let f=0;f<a.length;++f){let m=a[f];if(parseInt(m,10)===o)break;c+=this.#i[m].length}return c}getOrigin(){return this.#e[0]}getOrigins(){return this.#e}includesOrigin(o,a){for(let c=0;c<this.#e.length;++c)if(this.#e[c].isSimilar(o,a))return!0;return!1}getSize(o){let a=this.#t;if(o&&o!==void 0){let c=Xl([this.#t.get(0),this.#t.get(1),this.#t.get(2)],o);c=c.map(Math.abs),a=new Oo(c.concat(this.#t.getValues().slice(3)))}return a}#a(){let o=function(a){if(a.length<=1)return;let c=[];for(let y=0;y<a.length-1;++y){let S=a[y],D=a[y+1],E=S.getDistance(D);if(E===0)throw new Error("Zero slice spacing "+S.toString()+" "+D.toString());c.push(E)}let f=Hm(c),m=un(f.mean,4);return f.stdDev>j&&p.warn("Varying slice spacing, value: "+m+" (mean: "+f.mean+", min: "+f.min+", max: "+f.max+", stdDev: "+f.stdDev+")"),m}(this.#e);if(o!==void 0&&this.#n.get(2)!==o){p.trace("Using geometric spacing "+o+" instead of tag spacing "+this.#n.get(2));let a=this.#n.getValues();a[2]=o,this.#n=new Po(a)}}getSpacing(o){this.#s&&(this.#a(),this.#s=!1);let a=this.#n;if(o&&o!==void 0){let c=Xl([this.#n.get(0),this.#n.get(1),this.#n.get(2)],o);c=c.map(Math.abs),a=new Po(c)}return a}getRealSpacing(){return this.getSpacing(this.#o.getInverse().asOneAndZeros())}getOrientation(){return this.#o}getSliceIndex(o,a){let c=this.#e;a!==void 0&&(c=this.#i[a]);let f=o.getClosest(c),m=c[f],y=o.minus(m);return new O(this.#o.get(0,2),this.#o.get(1,2),this.#o.get(2,2)).isCodirectional(y)?f+1:f}appendOrigin(o,a,c){let f=function(m){return m.equals(o)};if(c!==void 0){if(this.#i[c].find(f)!==void 0)throw new Error("Cannot append same time origin twice");this.#i[c].splice(a,0,o)}if(c===void 0||c===this.#r){if(this.#e.find(f)!==void 0)throw new Error("Cannot append same origin twice");this.#s=!0,this.#e.splice(a,0,o);let m=this.#t.getValues();m[2]+=1,this.#t=new Oo(m)}}appendFrame(o,a){this.#i[a]=[o];let c=this.#t.getValues(),f=this.#n.getValues();c.length===4?c[3]+=1:(c.push(2),f.push(1)),this.#t=new Oo(c),this.#n=new Po(f)}toString(){return"Origin: "+this.getOrigin()+", Size: "+this.getSize()+", Spacing: "+this.getSpacing()+", Orientation: "+this.getOrientation()}equals(o){return o!==null&&this.getOrigin().equals(o.getOrigin())&&this.getSize().equals(o.getSize())&&this.getSpacing().equals(o.getSpacing())}isInBounds(o){return this.isIndexInBounds(this.worldToIndex(o))}isIndexInBounds(o,a){return this.getSize().isInBounds(o,a)}indexToWorld(o){let a=this.getSpacing(),c=new W(o.get(0)*a.get(0),o.get(1)*a.get(1),o.get(2)*a.get(2)),f=this.getOrientation().multiplyPoint3D(c),m=o.getValues(),y=this.getOrigin();return m[0]=y.getX()+f.getX(),m[1]=y.getY()+f.getY(),m[2]=y.getZ()+f.getZ(),new de(m)}pointToWorld(o){let a=this.getSpacing(),c=new W(o.getX()*a.get(0),o.getY()*a.get(1),o.getZ()*a.get(2)),f=this.getOrientation().multiplyPoint3D(c),m=this.getOrigin();return new W(m.getX()+f.getX(),m.getY()+f.getY(),m.getZ()+f.getZ())}worldToIndex(o){let a=this.getOrigin(),c=new W(o.get(0)-a.getX(),o.get(1)-a.getY(),o.get(2)-a.getZ()),f=this.getOrientation().getInverse().multiplyPoint3D(c),m=o.getValues(),y=this.getSpacing();return m[0]=Math.round(f.getX()/y.get(0)),m[1]=Math.round(f.getY()/y.get(1)),m[2]=Math.round(f.getZ()/y.get(2)),new d(m)}worldToPoint(o){let a=this.getOrigin(),c=new W(o.get(0)-a.getX(),o.get(1)-a.getY(),o.get(2)-a.getZ()),f=this.getOrientation().getInverse().multiplyPoint3D(c),m=o.getValues(),y=this.getSpacing();return m[0]=f.getX()/y.get(0),m[1]=f.getY()/y.get(1),m[2]=f.getZ()/y.get(2),new W(m[0],m[1],m[2])}}function Xl(u,o){return o.getInverse().multiplyArray3D(u)}function yb(u,o){return o.multiplyArray3D(u)}function Zl(u){return("0"+u).slice(-2)}function Wm(u){if(u===void 0||u.value.length!==1)return;let o=u.value[0],a=4,c=6;return o.length===10&&(a=5,c=8),{year:parseInt(o.substring(0,4),10),monthIndex:o.length>=a+2?parseInt(o.substring(a,a+2),10)-1:0,day:o.length===c+2?parseInt(o.substring(c,c+2),10):0}}function Gd(u){if(u===void 0||u.value.length!==1)return;let o=u.value[0],a=parseInt(o.substring(0,2),10),c=o.length>=4?parseInt(o.substring(2,4),10):0,f=o.length>=6?parseInt(o.substring(4,6),10):0,m=o.length>=8?o.substring(7,10):0;return{hours:a,minutes:c,seconds:f,milliseconds:m===0?0:parseInt(m,10)*Math.pow(10,3-m.length)}}function Sb(u){return{year:u.getFullYear().toString(),monthIndex:Zl((u.getMonth()+1).toString()),day:Zl(u.getDate().toString())}}function bb(u){return{hours:Zl(u.getHours().toString()),minutes:Zl(u.getMinutes().toString()),seconds:Zl(u.getSeconds().toString())}}function _b(u){return u.year+u.monthIndex+u.day}function Db(u){return u.hours+u.minutes+u.seconds}function Cb(){return new Z([1,0,0,0,0,1,0,-1,0])}let Sr={Axial:"axial",Coronal:"coronal",Sagittal:"sagittal"};function wb(u){let o;return u===Sr.Axial?o=ge():u===Sr.Coronal?o=Cb():u===Sr.Sagittal&&(o=new Z([0,0,-1,1,0,0,0,-1,0])),o}function Ib(u){let o=new O(u.get(0,0),u.get(1,0),u.get(2,0)),a=new O(u.get(0,1),u.get(1,1),u.get(2,1)),c=new O(u.get(0,2),u.get(1,2),u.get(2,2));return $m(o)+$m(a)+$m(c)}function $m(u){let o=new O(Math.abs(u.getX()),Math.abs(u.getY()),Math.abs(u.getZ())),a="",c=u.getX()<0?"R":"L",f=u.getY()<0?"A":"P",m=u.getZ()<0?"I":"S",y=1e-4;for(let S=0;S<3;S++)if(o.getX()>y&&o.getX()>o.getY()&&o.getX()>o.getZ())a+=c,o=new O(0,o.getY(),o.getZ());else if(o.getY()>y&&o.getY()>o.getX()&&o.getY()>o.getZ())a+=f,o=new O(o.getX(),0,o.getZ());else{if(!(o.getZ()>y&&o.getZ()>o.getX()&&o.getZ()>o.getY()))break;a+=m,o=new O(o.getX(),o.getY(),0)}return a}function Eb(u){let o,a=Tb(u);return a!==void 0&&(o=function(c){let f;return["LPS","LAI","RPI","RAS","ALS","ARI","PLI","PRS"].includes(c)?f=Sr.Axial:["LSA","LIP","RSP","RIA","ILA","IRP","SLP","SRA"].includes(c)?f=Sr.Coronal:["PSL","PIR","ASR","AIL","IAR","IPL","SAL","SPR"].includes(c)&&(f=Sr.Sagittal),f}(Ib(a.asOneAndZeros()))),o}function Tb(u){let o;if(u!==void 0&&u.length===6){let a=new O(u[0],u[1],u[2]),c=new O(u[3],u[4],u[5]),f=a.crossProduct(c);o=new Z([a.getX(),c.getX(),f.getX(),a.getY(),c.getY(),f.getY(),a.getZ(),c.getZ(),f.getZ()])}return o}function xb(u,o){let a=ge();return o!==void 0&&(a=u.asOneAndZeros().getInverse().multiply(o)),a.getAbs()}function Ym(u){let o=u["00280010"];if(o===void 0)throw new Error("Missing DICOM image number of rows");if(o.value.length===0)throw new Error("Empty DICOM image number of rows");let a=u["00280011"];if(a===void 0)throw new Error("Missing DICOM image number of columns");if(a.value.length===0)throw new Error("Empty DICOM image number of columns");return[a.value[0],o.value[0]]}function Ab(u){if(u["00280030"]===void 0)return null;let o=u["00280030"],a=[parseFloat(o.value[1]),parseFloat(o.value[0])];return u["00180088"]!==void 0&&a.push(parseFloat(u["00180088"].value[0])),new Po(a)}function Hr(u,o,a){let c="";if(u===void 0)c+=" "+o+" is undefined,";else if(u.value.length===0)c+=" "+o+" is empty,";else if(a!==void 0)for(let f=0;f<a.length;++f)u.value.includes(a[f])||(c+=" "+o+" does not contain "+a[f]+" (value: "+u.value+"),");return c}class Mb{getTime(o){}}class Rb{#e;#t;getWarning(){return this.#e}checkElements(o){let a;this.#e=void 0,Ym(o);let c=o["00080060"];if(c!==void 0&&(a=c.value[0],a==="PT")){let f=function(m){let y,S="";S+=Hr(m["00280051"],"Corrected Image (00280051)",["ATTN","DECY"]),S+=Hr(m["00541102"],"Decay Correction (00541102)",["START"]),S+=Hr(m["00541001"],"Units (00541001)",["BQML"]);let D=m["00101030"],E=Hr(D," PatientWeight (00101030)");if(E.length===0){let P=parseFloat(D.value[0]);isNaN(P)?S+=" PatientWeight is not a number":y=P}else S+=E;let I=function(P){let B,z="",J=Wm(P["00080021"]),te,ve,ie,se=P["00540016"];if(z+=Hr(se,"RadiopharmaceuticalInformationSequence (00540016)"),se!==void 0){se.value.length!==1&&p.warn("Found more than 1 istopes in RadiopharmaceuticalInformation Sequence.");let Ne="RadionuclideTotalDose (00181074)",tt=se.value[0]["00181074"];if(B=Hr(tt,Ne),B.length===0){let tn=parseFloat(tt.value[0]);isNaN(tn)?z+=" TotalDose is not a number":te=tn}else z+=B;let Tt="RadionuclideHalfLife (00181075)",Gt=se.value[0]["00181075"];if(B=Hr(Gt,Tt),B.length===0){let tn=parseFloat(Gt.value[0]);isNaN(tn)?z+=" HalfLife is not a number":ve=tn}else z+=B;let dt=se.value[0]["00181078"],en,Le;if(dt===void 0)en=J,Le=Gd(se.value[0]["00181072"]);else{let tn=function(Bt){if(Bt===void 0||Bt.value.length!==1)return;let bn=Bt.value[0].split("&")[0],Ke=new $n("DA");Ke.value=[bn.substring(0,8)];let $e=Wm(Ke),xn=new $n("TM");return xn.value=[bn.substring(8)],{date:$e,time:bn.length>=9?Gd(xn):void 0}}(dt);en=tn.date,Le=tn.time}Le===void 0&&(Le={hours:0,minutes:0,seconds:0,milliseconds:0}),ie=new Date(en.year,en.monthIndex,en.day,Le.hours,Le.minutes,Le.seconds,Le.milliseconds)}let ae=Gd(P["00080031"]),re=new Date(J.year,J.monthIndex,J.day,ae.hours,ae.minutes,ae.seconds,ae.milliseconds),Ce=P["00080022"],we=P["00080032"];if(Ce!==void 0&&we!==void 0){let Ne=Wm(Ce),tt=Gd(we),Tt=new Date(Ne.year,Ne.monthIndex,Ne.day,tt.hours,tt.minutes,tt.seconds,tt.milliseconds);if(re>Tt){let Gt="Series date/time is after Aquisition date/time (diff="+(re.getTime()-Tt.getTime()).toString()+"ms) ";p.debug(Gt);let dt=0,en="FrameReferenceTime (00541300)",Le=P["00541300"];z+=Hr(Le,en),Le!==void 0&&(dt=Le.value[0]);let tn=0,Bt="ActualFrameDuration (0018,1242)",bn=P["00181242"];if(z+=Hr(bn,Bt),bn!==void 0&&(tn=bn.value[0]),dt>0&&tn>0){tn/=1e3,dt/=1e3;let Ke=Math.log(2)/ve,$e=Ke*tn,xn=1/Ke*Math.log($e/(1-Math.exp(-$e)))-dt;re=new Date(Ne.year,Ne.monthIndex,Ne.day,tt.hours,tt.minutes,tt.seconds+xn,tt.milliseconds)}}}let Ae;if(re!==void 0&&ie!==void 0&&te!==void 0&&ve!==void 0){let Ne=(re.getTime()-ie.getTime())/1e3;Ae=te*Math.pow(2,-Ne/ve)}return{value:Ae,warning:z}}(m);S+=I.warning;let R={};return S.length!==0?R.warning="Cannot calculate PET SUV:"+S:R.value=1e3*y/I.value,R}(o);this.#t=f.value,this.#e=f.warning}return this.#e}create(o,a,c){let f=Ym(o),m=[f[0],f[1],1],y=o["00280008"];if(y!==void 0){let gt=parseInt(y.value[0],10);gt>1&&m.push(gt)}let S=new Oo(m),D=function(gt){let Se=1,Be=1,ot=["00280030","00181164","00182010","00280034"];for(let ln=0;ln<ot.length;++ln){let An=gt[ot[ln]];if(An&&An.value.length===2){Se=parseFloat(An.value[0]),Be=parseFloat(An.value[1]);break}}return Be===0&&(p.warn("Zero column spacing."),Be=1),Se===0&&(p.warn("Zero row spacing."),Se=1),new Po([Be,Se,1])}(o),E=o["00020010"].value[0],I=qm(E),R=Bm(E),P=Um(E),B=o["00200032"],z=new Array(0,0,0);B!==void 0&&(z=[parseFloat(B.value[0]),parseFloat(B.value[1]),parseFloat(B.value[2])]);let J=function(gt){let Se=gt["00200037"],Be;return Se!==void 0&&(Be=Tb(Se.value.map(ot=>parseFloat(ot)))),Be}(o),te=new W(z[0],z[1],z[2]),ve=new Mb().getTime(o),ie=new Da(te,S,D,J,ve),se,ae=o["00080018"];ae!==void 0&&(se=ae.value[0]);let re=1,Ce=o["00280002"];Ce!==void 0&&(re=Ce.value[0]);let we=S.getTotalSize()*re;if(we!==a.length){if(p.warn("Badly sized pixel buffer: "+a.length+" != "+we),!(we<a.length))throw new Error("Underestimated buffer size, can't fix it...");a=a.slice(0,S.getTotalSize())}let Ae=new _s(ie,a,[se]),Ne=o["00280004"];if(Ne!==void 0){let gt=Ne.value[0].toUpperCase();(I||R||P)&&gt!=="MONOCHROME1"&&gt!=="MONOCHROME2"&&(gt="RGB"),gt==="RGB"&&re===1&&(gt="PALETTE COLOR"),Ae.setPhotometricInterpretation(gt)}let tt=o["00280006"];tt!==void 0&&Ae.setPlanarConfiguration(tt.value[0]);let Tt=1,Gt=o["00281053"];if(Gt!==void 0){let gt=parseFloat(Gt.value[0]);isNaN(gt)||(Tt=gt)}let dt=0,en=o["00281052"];if(en!==void 0){let gt=parseFloat(en.value[0]);isNaN(gt)||(dt=gt)}let Le={numberOfFiles:c},tn=o["00080060"];tn!==void 0&&(Le.Modality=tn.value[0]);let Bt=!1,bn=1;this.#t!==void 0&&(Bt=!0,bn=this.#t,p.info("Applying PET SUV calibration: "+bn),Tt*=bn,dt*=bn);let Ke=new qd(Tt,dt);Ae.setRescaleSlopeAndIntercept(Ke);let $e=function(gt){let Se,Be=o[gt];return Be!==void 0&&(Se=Be.value[0]),Se};if(Le.TransferSyntaxUID=$e("00020010"),Le.MediaStorageSOPClassUID=$e("00020002"),Le.SOPClassUID=$e("00080016"),Le.Modality=$e("00080060"),Le.ImageType=$e("00080008"),Le.SamplesPerPixel=$e("00280002"),Le.PhotometricInterpretation=$e("00280004"),Le.PixelRepresentation=$e("00280103"),Le.BitsAllocated=$e("00280100"),Le.BitsStored=$e("00280101"),Le.HighBit=$e("00280102"),Le.StudyDate=$e("00080020"),Le.StudyTime=$e("00080030"),Le.StudyInstanceUID=$e("0020000D"),Le.StudyID=$e("00200010"),Le.SeriesInstanceUID=$e("0020000E"),Le.SeriesNumber=$e("00200011"),Le.ReferringPhysicianName=$e("00080090"),Le.PatientName=$e("00100010"),Le.PatientID=$e("00100020"),Le.PatientBirthDate=$e("00100030"),Le.PatientSex=$e("00100040"),Le.Manufacturer=$e("00080070"),Le.ManufacturerModelName=$e("00081090"),Le.DeviceSerialNumber=$e("00181000"),Le.SoftwareVersions=$e("00181020"),Le.ImageOrientationPatient=$e("00200037"),Le.FrameOfReferenceUID=$e("00200052"),Le.IsSigned=Le.PixelRepresentation===1,Bt)Le.pixelUnit="SUV";else{let gt=function(Se){let Be,ot=["00281054","00541001"];for(let ln=0;ln<ot.length;++ln){let An=Se[ot[ln]];if(An!==void 0){Be=An.value[0];break}}if(Be===void 0){let ln=Se["00080060"];ln!==void 0&&ln.value[0]==="CT"&&(Be="HU")}return Be}(o);gt!==void 0&&(Le.pixelUnit=gt)}let xn={},Yn=o["00281050"],Wt=o["00281051"],Cn=o["00281055"];if(Yn!==void 0&&Wt!==void 0){let gt;for(let Se=0;Se<Yn.value.length;++Se){let Be=parseFloat(Yn.value[Se]),ot=parseFloat(Wt.value[Se]);Be&&ot&&ot!==0&&(gt="",Cn!==void 0&&(gt=Cn.value[Se]),gt===""&&(gt="Default"+Se),ot*=bn,ot<1&&(ot=1),xn[gt]={wl:[new g(Be*bn,ot)],name:gt}),ot===0&&p.warn("Zero window width found in DICOM.")}}if(Le.windowPresets=xn,Ae.getPhotometricInterpretation()==="PALETTE COLOR"){let gt=o["00281201"],Se=o["00281202"],Be=o["00281203"],ot,ln,An,si=o["00281101"];if(si!==void 0&&si.value.length===3){if(si.value[2]===16){let xi=!1,er=si.value[0];er===0&&(er=65536);let rc=gt.vl;if(rc!==2*er&&(xi=!0,p.info("16bits lut but size is not double. desc: "+er+" vl: "+rc)),parseInt(o["00280100"].value[0],10)===8&&(xi=!0,p.info("Scaling 16bits color lut since bits allocated is 8.")),xi){let Aa=function(TR){return TR>>8};ot=gt.value.map(Aa),ln=Se.value.map(Aa),An=Be.value.map(Aa)}}else if(si.value[2]===8){p.info("Scaling 16bits color lut since the lut descriptor is 8.");let xi=gt.value.slice(0);ot=Array.from(new Uint8Array(xi.buffer)),xi=Se.value.slice(0),ln=Array.from(new Uint8Array(xi.buffer)),xi=Be.value.slice(0),An=Array.from(new Uint8Array(xi.buffer))}}F.palette={red:ot,green:ln,blue:An}}let ic=o["00082144"];return ic!==void 0&&(Le.RecommendedDisplayFrameRate=parseInt(ic.value[0],10)),Ae.setMeta(Le),Ae}}class Ob{#e=!0;#t;constructor(o,a){a!==void 0&&(this.#e=a),this.#t=new DataView(o)}writeUint8(o,a){return this.#t.setUint8(o,a),o+Uint8Array.BYTES_PER_ELEMENT}writeInt8(o,a){return this.#t.setInt8(o,a),o+Int8Array.BYTES_PER_ELEMENT}writeUint16(o,a){return this.#t.setUint16(o,a,this.#e),o+Uint16Array.BYTES_PER_ELEMENT}writeInt16(o,a){return this.#t.setInt16(o,a,this.#e),o+Int16Array.BYTES_PER_ELEMENT}writeUint32(o,a){return this.#t.setUint32(o,a,this.#e),o+Uint32Array.BYTES_PER_ELEMENT}writeUint64(o,a){return this.#t.setBigUint64(o,a,this.#e),o+BigUint64Array.BYTES_PER_ELEMENT}writeInt32(o,a){return this.#t.setInt32(o,a,this.#e),o+Int32Array.BYTES_PER_ELEMENT}writeInt64(o,a){return this.#t.setBigInt64(o,a,this.#e),o+BigInt64Array.BYTES_PER_ELEMENT}writeFloat32(o,a){return this.#t.setFloat32(o,a,this.#e),o+Float32Array.BYTES_PER_ELEMENT}writeFloat64(o,a){return this.#t.setFloat64(o,a,this.#e),o+Float64Array.BYTES_PER_ELEMENT}writeHex(o,a){let c=parseInt(a,16);return this.#t.setUint16(o,c,this.#e),o+Uint16Array.BYTES_PER_ELEMENT}writeBinaryArray(o,a){if(a.length%8!=0)throw new Error("Cannot write boolean array as binary.");let c=null,f=null;for(let m=0,y=a.length;m<y;m+=8){c=0;for(let S=0;S<8;++S)f=a[m+S]===0?0:1,c+=f<<S;o=this.writeUint8(o,c)}return o}writeUint8Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeUint8(o,a[c]);return o}writeInt8Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeInt8(o,a[c]);return o}writeUint16Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeUint16(o,a[c]);return o}writeInt16Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeInt16(o,a[c]);return o}writeUint32Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeUint32(o,a[c]);return o}writeUint64Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeUint64(o,a[c]);return o}writeInt32Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeInt32(o,a[c]);return o}writeInt64Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeInt64(o,a[c]);return o}writeFloat32Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeFloat32(o,a[c]);return o}writeFloat64Array(o,a){for(let c=0,f=a.length;c<f;++c)o=this.writeFloat64(o,a[c]);return o}}let Pb=0;class gM{action;value;constructor(o){this.action=o}}let vM={copy:function(u){return u},remove:function(){return null},clear:function(u){return u.value=[],u},replace:function(u,o){return u.value=[o],u}};function Fb(u){let o="1.2.826.0.1.3680043.9.7278.1.",a="";if(u==="ImplementationClassUID")a=o+"0.34.0";else{let c="."+new Date().toISOString().replace(/\D/g,"").substring(0,14);Pb+=1;let f="."+Pb;a=o;let m=29+f.length+c.length,y=Math.min(u.length,64-m);if(y>1){let S="";for(let D=0;D<y;++D)S+=u.charCodeAt(D);a+=S.substring(0,y)}a+=c+f}return a}function Xm(u){return u%2==0}function Zm(u){let o=ee[u];return o!==void 0&&o==="string"}function Km(u,o){let a=new Uint8Array(u.length+1);return a.set(u),a.set(o,u.length),a}class yM{encode(o){let a=new Uint8Array(o.length);for(let c=0,f=o.length;c<f;++c)a[c]=o.charCodeAt(c);return a}}let Jm="00080005",e0="00280100";class SM{#e=!1;#t=!0;#n={default:{action:"copy",value:null}};#i=this.#n;#r=[];#o=new yM;#s=this.#o;setUseUnVrForPrivateSq(o){this.#e=o}setFixUnknownVR(o){this.#t=o}setRules(o,a){if(this.#i=o,this.#r=[],a){let c=Object.keys(o);for(let f of c){let m=o[f];if(m.action==="replace"&&m.value!==void 0&&m.value!==null){let y,S=!1;if(f.length===8&&(S=yr(f).getNameFromDictionary()!==void 0),S)y=f;else{let D=_a(f);D!==void 0&&(y=D.getKey())}y!==void 0&&this.#r.push(y)}}}}#a(o){return this.#o.encode(o)}#c(o){return this.#s.encode(o)}useSpecialTextEncoder(){this.#s=new TextEncoder}getElementToWrite(o){let a=o.tag.getGroupName(),c=o.tag.getNameFromDictionary(),f;return f=this.#i[o.tag.getKey()]!==void 0?this.#i[o.tag.getKey()]:c!==void 0&&this.#i[c]!==void 0?this.#i[c]:this.#i[a]!==void 0?this.#i[a]:this.#i.default,vM[f.action](o,f.value)}#l(o,a,c,f){let m;for(let y=0;y<c.length;++y){if(m=c[y],m.length===0)continue;let S=!1,D=m.find(I=>_i(I.tag));D!==void 0&&D.undefinedLength!==void 0&&(S=D.undefinedLength);let E=new $n("NONE");E.vl=S?4294967295:D.vl,E.tag=Mo(),E.value=[],a=this.#f(o,E,a,f);for(let I of m)_i(I.tag)||Yl(I.tag)||(a=this.#f(o,I,a,f));if(S){let I=new $n("NONE");I.vl=0,I.tag=new Un("FFFE","E00D"),I.value=[],a=this.#f(o,I,a,f)}}return a}#u(o,a,c,f,m){let y=c;if(a.vr!=="NONE")if(f instanceof Uint8Array)c=f.length===8*a.vl?o.writeBinaryArray(c,f):o.writeUint8Array(c,f);else if(f instanceof Int8Array)c=o.writeInt8Array(c,f);else if(f instanceof Uint16Array)c=o.writeUint16Array(c,f);else if(f instanceof Int16Array)c=o.writeInt16Array(c,f);else if(f instanceof Uint32Array)c=o.writeUint32Array(c,f);else if(f instanceof Int32Array)c=o.writeInt32Array(c,f);else if(f instanceof BigUint64Array)c=o.writeUint64Array(c,f);else if(f instanceof BigInt64Array)c=o.writeInt64Array(c,f);else{let S=ee[a.vr];if(S!==void 0)if(S==="Uint8")c=o.writeUint8Array(c,f);else if(S==="Uint16")c=o.writeUint16Array(c,f);else if(S==="Int16")c=o.writeInt16Array(c,f);else if(S==="Uint32")c=o.writeUint32Array(c,f);else if(S==="Int32")c=o.writeInt32Array(c,f);else if(S==="Uint64")c=o.writeUint64Array(c,f);else if(S==="Int64")c=o.writeInt64Array(c,f);else if(S==="Float32")c=o.writeFloat32Array(c,f);else if(S==="Float64")c=o.writeFloat64Array(c,f);else{if(S!=="string")throw new Error("Unknown VR type: "+S);c=o.writeUint8Array(c,f)}else if(a.vr==="SQ")c=this.#l(o,c,f,m);else if(a.vr==="AT")for(let D=0;D<f.length;++D){let E=f[D]+"",I=E.substring(1,5),R=E.substring(6,10),P=[parseInt(I,16),parseInt(R,16)];c=o.writeUint16Array(c,P)}else a.vr==="xs"?c=f instanceof Int16Array?o.writeInt16Array(c,f):o.writeUint16Array(c,f):p.warn("Unknown VR: "+a.vr)}if(a.vr!=="SQ"&&a.vr!=="NONE"){let S=c-y;if(S!==a.vl){let D="Offset difference and VL are not equal: "+S+" != "+a.vl;D+=" (",a.tag!==void 0&&(D+=a.tag+", "),D+="vr:"+a.vr+")",p.warn(D)}}return c}#d(o,a,c,f,m){let y=!1;if(a.undefinedLength!==void 0&&(y=a.undefinedLength),y){let S={};S.FFFEE000={tag:Mo(),vr:"NONE",vl:0,value:[]};for(let D=0;D<f.length;++D)S[D]={tag:Mo(),vr:a.vr,vl:f[D].length,value:f[D]};c=this.#l(o,c,[S],m)}else{let S=f[0];f.length>1&&(S=function(D){let E=D.length,I=D[0].length;if(I===void 0)return D;let R=E*I,P=new D[0].constructor(R);for(let B=0;B<E;B++){let z=B*I;P.set(D[B],z)}return P}(f)),c=this.#u(o,a,c,S,m)}return c}#f(o,a,c,f){let m=a.tag.isWithVR(),y=!(!f&&m)||X(a.vr);c=o.writeHex(c,a.tag.getGroup()),c=o.writeHex(c,a.tag.getElement());let S=a.vr;this.#e&&a.tag.isPrivate()&&S==="SQ"&&(p.warn("Write element using VR=UN for private sequence."),S="UN"),m&&!f&&(c=o.writeUint8Array(c,this.#a(S)),y&&(c+=2));let D=!1;(a.vr==="SQ"||Ro(a.tag))&&a.undefinedLength!==void 0&&(D=a.undefinedLength);let E=!1;_i(a.tag)&&a.undefinedLength!==void 0&&(E=a.undefinedLength);let I=a.vl;(D||E)&&(I=4294967295),c=y?o.writeUint32(c,I):o.writeUint16(c,I);let R=a.value;if(R===void 0&&(R=[]),c=Ro(a.tag)?this.#d(o,a,c,R,f):this.#u(o,a,c,R,f),D){let P=new $n("NONE");P.vl=0,P.tag=new Un("FFFE","E0DD"),P.value=[],c=this.#f(o,P,c,f)}return c}getBuffer(o){let a=o["00020010"].value[0],c=lb(a),f=cb(a);if(o[Jm]!==void 0){let Ke=o[Jm].value[0];Ke!==void 0&&Ke!=="ISO-IR 6"&&(p.debug("Change charset to UTF, was: "+Ke),this.useSpecialTextEncoder(),o[Jm].value=["ISO_IR 192"])}let m;o[e0]!==void 0&&(m=o[e0].value[0]);let y=132,S=0,D=[],E=[],I,R,P=0,B=new Un("0002","0000"),z=new Un("0002","0001"),J=new Un("0002","0012"),te=new Un("0002","0013"),ve=this.#r.slice(),ie=Object.keys(o);for(let Ke=0,$e=ie.length;Ke<$e;++Ke){let xn=o[ie[Ke]];if(xn.tag=yr(ie[Ke]),I=this.getElementToWrite(xn),!(I===null||B.equals(I.tag)||z.equals(I.tag)||J.equals(I.tag)||te.equals(I.tag))){S=0;let Yn=ve.indexOf(I.tag.getKey());Yn!==-1&&ve.splice(Yn,1),this.#t&&bM(I,!f),this.#h(I,I.value,c,m),R=I.tag.getGroupName(),S+=Zi(I.vr,R!=="Meta Element"&&c),S+=I.vl,R==="Meta Element"?(D.push(I),P+=S):E.push(I),y+=S}}for(let Ke of ve){let $e=yr(Ke),xn=new $n($e.getVrFromDictionary()),Yn;if(xn.tag=$e,this.#i[Ke]!==void 0)Yn=this.#i[Ke].value;else{let Cn=$e.getNameFromDictionary();Yn=this.#i[Cn].value}let Wt=Zi(xn.vr,c);Wt+=this.#h(xn,[Yn],c),E.push(xn),y+=Wt}let se=zd("FileMetaInformationVersion"),ae=Zi(se.vr,!1);ae+=this.#h(se,[0,1],!1),D.push(se),P+=ae,y+=ae;let re=zd("ImplementationClassUID"),Ce=Zi(re.vr,!1),we=Fb("ImplementationClassUID").replace("-beta",".99");Ce+=this.#h(re,[we],!1),D.push(re),P+=Ce,y+=Ce;let Ae=zd("ImplementationVersionName"),Ne=Zi(Ae.vr,!1),tt="DWV_"+"0.34.0".replace("-beta",".99");Ne+=this.#h(Ae,[tt],!1),D.push(Ae),P+=Ne,y+=Ne;let Tt=function(Ke,$e){return yn(Ke.tag,$e.tag)};D.sort(Tt),E.sort(Tt);let Gt=zd("FileMetaInformationGroupLength"),dt=Zi(Gt.vr,!1);dt+=this.#h(Gt,new Uint32Array([P]),!1),y+=dt;let en=new ArrayBuffer(y),Le=new Ob(en),tn=new Ob(en,!f),Bt=128;Bt=Le.writeUint8Array(Bt,this.#a("DICM")),Bt=this.#f(Le,Gt,Bt,!1);for(let Ke=0,$e=D.length;Ke<$e;++Ke)Bt=this.#f(Le,D[Ke],Bt,!1);let bn=132+dt+P;Bt!==bn&&p.warn("Bad size calculation... meta offset: "+Bt+", calculated size:"+bn+" (diff:"+(Bt-bn)+")");for(let Ke=0,$e=E.length;Ke<$e;++Ke)Bt=this.#f(tn,E[Ke],Bt,c);return Bt!==y&&p.warn("Bad size calculation... final offset: "+Bt+", calculated size:"+y+" (diff:"+(Bt-y)+")"),en}#h(o,a,c,f){let m=0;if(o.vr==="SQ"){if(a!==null&&a!==0){let S=[],D=!1;o.undefinedLength!==void 0&&(D=o.undefinedLength,delete o.undefinedLength);for(let E=0;E<a.length;++E){let I=a[E],R=[],P=0;if(I===null||I===0)continue;let B=f,z=I[e0];z!==void 0&&z.value!==void 0&&(B=z.value[0]);let J=Object.keys(I);for(let ie=0,se=J.length;ie<se;++ie){let ae=J[ie],re=I[ae];re.tag=yr(ae),_i(re.tag)||(P+=this.#h(re,re.value,c,B),R.push(re),P+=Zi(re.vr,c))}let te={tag:Mo(),vr:"NONE",vl:P,value:[]};D&&(te.undefinedLength=D),R.push(te),P+=Zi(te.vr,c),D&&(P+=Zi("NONE",c));let ve=function(ie,se){return yn(ie.tag,se.tag)};R.sort(ve),m+=P,S.push(R)}D&&(m+=Zi("NONE",c)),o.value=S,o.vl=m,D&&(o.undefinedLength=D)}}else{if(Zm(y=o.vr)||y==="OB"){let S=function(D){let E="";return Zm(D)&&(E=D==="UI"?"\0":" "),E}(o.vr);if(Zm(o.vr)){let D;me(o.vr)?(a=this.#c(a.join("\\")),D=this.#c(S)):(a=this.#a(a.join("\\")),D=this.#a(S)),Xm(a.length)||(a=Km(a,D))}else o.vr==="OB"&&(a=function(D){if(D==null||D.length===void 0)throw new Error("Cannot pad undefined or null OB value.");if(D.length!==0&&D[0].length!==void 0){let E=0;for(let I=0;I<D.length;++I)E+=D[I].length;Xm(E)||(D[D.length-1]=Km(D[D.length-1],[0]))}else Xm(D.length)||(D=Km(D,[0]));return D}(a))}if(m=0,o.vr==="AT")m=4*a.length;else if(o.vr==="xs")m=a.length*Uint16Array.BYTES_PER_ELEMENT;else if(function(S){let D=ee[S];return D!==void 0&&D!=="string"}(o.vr)||o.vr==="ox"){if(Ro(o.tag)&&Array.isArray(a)){m=0;for(let D=0;D<a.length;++D)m+=a[D].length}else m=a.length;let S=ee[o.vr];if(Ro(o.tag)||o.vr==="ox")if(o.undefinedLength){let D=Zi("NONE",c);m+=D,m+=D*a.length,m+=D}else f!==void 0&&(f===1?m/=8:f===16&&(m*=Uint16Array.BYTES_PER_ELEMENT));else{if(S===void 0)throw new Error("Unsupported element: "+o.vr);{let D=function(E){let I;return E==="Uint8"?I=Uint8Array.BYTES_PER_ELEMENT:E==="Uint16"?I=Uint16Array.BYTES_PER_ELEMENT:E==="Int16"?I=Int16Array.BYTES_PER_ELEMENT:E==="Uint32"?I=Uint32Array.BYTES_PER_ELEMENT:E==="Int32"?I=Int32Array.BYTES_PER_ELEMENT:E==="Float32"?I=Float32Array.BYTES_PER_ELEMENT:E==="Float64"?I=Float64Array.BYTES_PER_ELEMENT:E==="Uint64"?I=BigUint64Array.BYTES_PER_ELEMENT:E==="Int64"&&(I=BigInt64Array.BYTES_PER_ELEMENT),I}(S);if(D===void 0)throw new Error("Unknown bytes per element for VR type: "+S);m*=D}}}else m=a.length;o.value=a,o.vl=m}var y;return m}}function bM(u,o){if(u.vr==="UN"){let a=u.tag.getVrFromDictionary();if(a!==void 0&&u.vr!==a){u.vr=a;let c=ee[u.vr];if(c!==void 0&&c!=="Uint8"&&c!=="string"){let f=function(m,y,S){let D;if(m.buffer===void 0)return D;let E=new Ud(m.buffer,S),I=m.byteOffset,R=m.length,P=ee[y];return P==="Uint16"?D=E.readUint16Array(I,R):P==="Uint32"?D=E.readUint32Array(I,R):P==="Uint64"?D=E.readUint64Array(I,R):P==="Int16"?D=Array.from(E.readInt16Array(I,R)):P==="Int32"?D=Array.from(E.readInt32Array(I,R)):P==="Int64"?D=E.readInt64Array(I,R):P==="Float32"?D=Array.from(E.readFloat32Array(I,R)):P==="Float64"&&(D=Array.from(E.readFloat64Array(I,R))),D}(u.value,u.vr,o);f!==void 0&&(u.value=f)}p.info("Element "+u.tag.getGroup()+" "+u.tag.getElement()+" VR changed from UN to "+u.vr)}}}function zd(u){let o=_a(u),a=new $n(o.getVrFromDictionary());return a.tag=o,a}function Hd(u){let o=Object.keys(u),a={};for(let c=0,f=o.length;c<f;++c){let m=_a(o[c]);if(m===void 0)continue;let y=m.getVrFromDictionary(),S,D=!1,E=u[o[c]];if(y==="SQ"){let R=[];if(E.undefinedLength!==void 0&&(D=E.undefinedLength),E.value!==void 0&&E.value!==null)for(let P=0;P<E.value.length;++P)R.push(Hd(E.value[P]));else p.trace("Undefined or null simpleTag SQ value.");S=R}else S=Array.isArray(E)?E:[E];let I=new $n(y);I.tag=m,I.value=S,D&&(I.undefinedLength=D),a[m.getKey()]=I}return a}let Qr={CodeValue:"00080100",CodingSchemeDesignator:"00080102",CodeMeaning:"00080104",LongCodeValue:"00080119",URNCodeValue:"00080120"};class t0{meaning;value;longValue;urnValue;schemeDesignator;constructor(o){this.meaning=o}toString(){return"("+this.value+", "+this.schemeDesignator+", '"+this.meaning+"')"}}function bs(u,o){return Object.keys(u).length===Object.keys(o).length&&Object.keys(u).every(a=>Object.prototype.hasOwnProperty.call(o,a)&&u[a]===o[a])}function Ca(u){let o=new t0(u[Qr.CodeMeaning].value[0]);if(u[Qr.CodeValue]!==void 0)o.value=u[Qr.CodeValue].value[0];else if(u[Qr.LongCodeValue]!==void 0)o.longValue=u[Qr.LongCodeValue].value[0];else{if(u[Qr.URNCodeValue]===void 0)throw new Error("Invalid code with no value, no long value and no urn value.");o.urnValue=u[Qr.URNCodeValue].value[0]}if(o.value!==void 0||o.longValue!==void 0){if(u[Qr.CodingSchemeDesignator]===void 0)throw new Error("No coding sheme designator when code value or long value is present");o.schemeDesignator=u[Qr.CodingSchemeDesignator].value[0]}return o}function Fo(u){let o={};return u.value!==void 0?o.CodeValue=u.value:u.longValue!==void 0?o.LongCodeValue=u.longValue:u.urnValue!==void 0&&(o.URNCodeValue=u.urnValue),u.schemeDesignator!==void 0&&(o.CodingSchemeDesignator=u.schemeDesignator),o.CodeMeaning=u.meaning,o}let _M={111030:"Image Region",112039:"Tracking Identifier",112040:"Tracking Unique Identifier",113048:"Pixel by pixel Maximum",113049:"Pixel by pixel mean",113051:"Pixel by pixel Minimum",113061:"Standard Deviation",113076:"Segmentation",121055:"Path",121207:"Height",121322:"Source image for image processing operation",121324:"Source Image",122438:"Reference Points",125007:"Measurement Group",125309:"Short label",128773:"Reference Geometry"},DM={1483009:"Angle",42798e3:"Area",103355008:"Width",103339001:"Long axis",103340004:"Short axis",131190003:"Radius",261665006:"Unknown",410668003:"Length",718499004:"Color"},CM={1:"No units",mm:"Millimeter",deg:"Degree - plane angle",cm2:"Square centimeter","cm2/ml":"Square centimeter per milliliter","/cm":"Per centimeter","g/ml":"Gram per milliliter","g/ml{SUVbw}":"Standardized Uptake Value body weight","mg/ml":"Milligram per milliliter","umol/ml":"Micromole per milliliter","Bq/ml":"Becquerels per milliliter","mg/min/ml":"Milligrams per minute per milliliter","umol/min/ml":"Micromole per minute per milliliter","ml/min/g":"Milliliter per minute per gram","ml/g":"Milliliter per gram","ml/min/ml":"Milliliter per minute per milliliter","ml/ml":"Milliliter per milliliter","%":"Percentage","[hnsf'U]":"Hounsfield unit","10*23/ml":"Electron density","{counts}":"Counts","{counts}/s":"Counts per second","{propcounts}":"Proportional to counts","{propcounts}/s":"Proportional to counts per second"};function Di(u,o){let a,c;return o==="DCM"?a=_M[u]:o==="SCT"?a=DM[u]:o==="UCUM"&&(a=CM[u]),a!==void 0&&(c=new t0(a),c.schemeDesignator=o,c.value=u),c}function kb(){return Di("125007","DCM")}function Lb(){return Di("128773","DCM")}function Nb(){return Di("121324","DCM")}function Vb(){return Di("112039","DCM")}function Bb(){return Di("125309","DCM")}function Qd(){return Di("122438","DCM")}function Ub(){return Di("718499004","SCT")}let n0={angle:{key:"1483009",scheme:"SCT"},length:{key:"410668003",scheme:"SCT"},surface:{key:"42798000",scheme:"SCT"},height:{key:"121207",scheme:"DCM"},width:{key:"103355008",scheme:"SCT"},radius:{key:"131190003",scheme:"SCT"},a:{key:"103339001",scheme:"SCT"},b:{key:"103340004",scheme:"SCT"},min:{key:"113051",scheme:"DCM"},max:{key:"113048",scheme:"DCM"},mean:{key:"113049",scheme:"DCM"},stddev:{key:"113061",scheme:"DCM"}};function wM(u){let o;for(let a in n0){let c=n0[a];if(c.scheme===u.schemeDesignator&&c.key===u.value){o=a;break}}return o}let i0={"unit.mm":"mm","unit.cm2":"cm2","unit.degree":"deg",HU:"[hnsf'U]",MGML:"mg/ml",ED:"10*23/ml",PCT:"%",CNTS:"{counts}",NONE:"1",CM2:"cm2",CM2ML:"cm2/ml",PCNT:"%",CPS:"{counts}/s",BQML:"Bq/ml",MGMINML:"mg/min/ml",UMOLMINML:"umol/min/ml",MLMING:"ml/min/g",MLG:"ml/g","1CM":"/cm",UMOLML:"umol/ml",PROPCNTS:"{propcounts}",PROPCPS:"{propcounts}/s",MLMINML:"ml/min/ml",MLML:"ml/ml",GML:"g/ml",SUV:"g/ml{SUVbw}"};function IM(u){let o;for(let a in i0){let c=i0[a];if(u.schemeDesignator==="UCUM"&&c===u.value){o=a;break}}return o}let qb="00620005",jb="00620009",Gb="0062000C",zb="0062000D",Hb="00620003",Qb="0062000F",Wb="00620020";class $b{number;label;algorithmType;algorithmName;displayValue;displayRGBValue;propertyTypeCode;propertyCategoryCode;trackingUid;trackingId;constructor(o,a,c){this.number=o,this.label=a,this.algorithmType=c}}function EM(u){let o=new $b(u["00620004"].value[0],u[qb]?u[qb].value[0]:"n/a",u["00620008"].value[0]);if(u[jb]!==void 0&&(o.algorithmName=u[jb].value[0]),u[Gb]!==void 0)o.displayValue=u[Gb].value[0];else if(u[zb]!==void 0){let c=u[zb].value,f=function(m){return function(y){function S(R){let P=null;return P=R<=.0031308?12.92*R:1.055*Math.pow(R,.416666667)-.055,Math.min(1,Math.max(0,P))}let D=y.x/100,E=y.y/100,I=y.z/100;return{r:Math.round(255*S(3.2406*D-1.5372*E-.4986*I)),g:Math.round(255*S(-.9689*D+1.8758*E+.0415*I)),b:Math.round(255*S(.0557*D-.204*E+1.057*I))}}(function(y){function S(I){let R=null;return R=I>.206896552?Math.pow(I,3):.128418549*I-.017712903,R}let D=G,E=(y.l+16)/116;return{x:D.x*S(E+y.a/500),y:D.y*S(E),z:D.z*S(E-y.b/200)}}(m))}({l:.001525902*(a={l:c[0],a:c[1],b:c[2]}).l,a:.003891051*a.a-128,b:.003891051*a.b-128});o.displayRGBValue=f}var a;if(u[Hb]===void 0)throw new Error("Missing Segmented Property Category Code Sequence.");if(o.propertyCategoryCode=Ca(u[Hb].value[0]),u[Qb]===void 0)throw new Error("Missing Segmented Property Type Code Sequence.");return o.propertyTypeCode=Ca(u[Qb].value[0]),u[Wb]!==void 0&&(o.trackingId=u[Wb].value[0],o.trackingUid=u["00620021"].value[0]),o}function TM(u){let o=u.algorithmType;o===void 0&&(o="MANUAL");let a={SegmentNumber:u.number,SegmentLabel:u.label,SegmentAlgorithmType:o};if(o!=="MANUAL"&&u.algorithmName!==void 0&&(a.SegmentAlgorithmName=u.algorithmName),u.displayRGBValue){let c=H($(u.displayRGBValue));a.RecommendedDisplayCIELabValue=[Math.round(c.l),Math.round(c.a),Math.round(c.b)]}else a.RecommendedDisplayGrayscaleValue=u.displayValue;return u.propertyCategoryCode&&(a.SegmentedPropertyCategoryCodeSequence={value:[Fo(u.propertyCategoryCode)]}),u.propertyTypeCode&&(a.SegmentedPropertyTypeCodeSequence={value:[Fo(u.propertyTypeCode)]}),u.trackingId&&(a.TrackingID=u.trackingId,a.TrackingUID=u.trackingUid),a}let Yb="00089124",Xb="00082112",Zb="00081150",Kb="00081155",Jb="00209116",e_="00289110";class xM{dimIndex;imagePosPat;derivationImages;refSegmentNumber;imageOrientationPatient;spacing;constructor(o,a,c,f){this.dimIndex=o,this.imagePosPat=a,this.derivationImages=c,this.refSegmentNumber=f}}function AM(u){let o=[];if(u[Yb]!==void 0){let S=u[Yb].value;for(let D=0;D<S.length;++D){let E=[];if(S[D][Xb]!==void 0){let I=S[D][Xb].value;for(let R=0;R<I.length;++R){let P={};I[R][Zb]!==void 0&&(P.referencedSOPClassUID=I[R][Zb].value[0]),I[R][Kb]!==void 0&&(P.referencedSOPInstanceUID=I[R][Kb].value[0]),E.push(P)}}o.push({sourceImages:E})}}let a=u["00209111"].value[0]["00209157"].value,c=u["0062000A"].value,f=parseInt(c[0]["0062000B"].value[0],0),m=u["00209113"].value[0]["00200032"].value;for(let S=0;S<m.length;++S)m[S]=parseFloat(m[S]);let y=new xM(a,m,o,f);if(u[Jb]!==void 0){let S=u[Jb];if(S.value.length!==0){let D=S.value[0]["00200037"].value;D!==void 0&&(y.imageOrientationPatient=D)}}if(u[e_]!==void 0){let S=u[e_];if(S.value.length!==0){let D=Ab(S.value[0]);D!==void 0&&(y.spacing=D)}else p.warn("No shared functional group pixel measure sequence items.")}return y}function MM(u){let o={FrameContentSequence:{value:[{DimensionIndexValues:u.dimIndex}]},PlanePositionSequence:{value:[{ImagePositionPatient:u.imagePosPat}]},SegmentIdentificationSequence:{value:[{ReferencedSegmentNumber:u.refSegmentNumber}]}};if(u.derivationImages!==void 0){let a=Fo(Di("121322","DCM")),c=Fo(Di("113076","DCM")),f=[];for(let m of u.derivationImages){let y=[];for(let S of m.sourceImages)y.push({PurposeOfReferenceCodeSequence:{value:[a]},ReferencedSOPClassUID:S.referencedSOPClassUID,ReferencedSOPInstanceUID:S.referencedSOPInstanceUID});f.push({DerivationCodeSequence:{value:[c]},SourceImageSequence:{value:y}})}o.DerivationImageSequence={value:f}}return o}function t_(u,o){return JSON.stringify(u)===JSON.stringify(o)}function RM(u,o){let a=u[o.tag];if(o.type===1||o.type===2){if(a===void 0)throw new Error("Missing or empty "+o.name)}else if(a===void 0)return;let c,f=!1;if(c=a.value.length===1?a.value[0]:a.value,Array.isArray(c))for(let m=0;m<o.enum.length;++m){if(!Array.isArray(o.enum[m]))throw new Error("Cannot compare array and non array tag value.");if(Ze(o.enum[m],c)){f=!0;break}}else f=o.enum.includes(c);if(!f)throw new Error("Unsupported "+o.name+" value: "+c)}function OM(u,o,a){let c=u.getNumberOfComponents(),f,m;c===3?(f=function(D){return{r:u.getValueAtOffset(D),g:u.getValueAtOffset(D+1),b:u.getValueAtOffset(D+2)}},m=function(D,E){return E.displayRGBValue!==void 0&&D.r===E.displayRGBValue.r&&D.g===E.displayRGBValue.g&&D.b===E.displayRGBValue.b}):(f=function(D){return u.getValueAtOffset(D)},m=function(D,E){return D===E.displayValue});let y=u.getGeometry().getSize().getDimSize(2),S={};for(let D=0;D<y;++D){let E=f((a+D)*c);for(let I of o){let R=I.number-1;m(E,I)&&(S[R]===void 0&&(S[R]=new Uint8Array(y)),S[R][D]=1)}}return S}let Wd=[{name:"TransferSyntaxUID",tag:"00020010",type:"1",enum:[Oe,_e,He]},{name:"MediaStorageSOPClassUID",tag:"00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"SOPClassUID",tag:"00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"Modality",tag:"00080060",type:"1",enum:["SEG"]},{name:"SegmentationType",tag:"00620001",type:"1",enum:["BINARY"]},{name:"DimensionOrganizationType",tag:"00209311",type:"3",enum:["3D"]},{name:"ImageType",tag:"00080008",type:"1",enum:[["DERIVED","PRIMARY"]]},{name:"SamplesPerPixel",tag:"00280002",type:"1",enum:[1]},{name:"PhotometricInterpretation",tag:"00280004",type:"1",enum:["MONOCHROME2"]},{name:"PixelRepresentation",tag:"00280103",type:"1",enum:[0]},{name:"BitsAllocated",tag:"00280100",type:"1",enum:[1]},{name:"BitsStored",tag:"00280101",type:"1",enum:[1]},{name:"HighBit",tag:"00280102",type:"1",enum:[0]}];function n_(){let u={};for(let o=0;o<Wd.length;++o){let a=Wd[o];u[a.name]=a.enum[0]}return u}class r0{#e;getWarning(){return this.#e}checkElements(o){}create(o,a){for(let Se=0;Se<Wd.length;++Se)RM(o,Wd[Se]);let c=Ym(o),f=new Oo([c[0],c[1],1]),m=f.getTotalSize(),y=1,S=o["00280008"];if(S!==void 0&&(y=parseInt(S.value[0],10)),y!==a.length/m)throw new Error("Buffer and numberOfFrames meta are not equal."+y+" "+a.length/m);let D=function(Se){let Be=Se["00209221"];if(Be===void 0||Be.value.length!==1)throw new Error("Unsupported dimension organization sequence length");let ot=Be.value[0]["00209164"].value[0],ln=[],An=Se["00209222"];if(An!==void 0){let si=An.value;if(si.length!==2)throw new Error("Unsupported dimension index sequence length");let xi;for(let er=0;er<si.length;++er){let rc=si[er]["00209164"].value[0];if(rc!==ot)throw new Error("Dimension Index Sequence contains a unknown Dimension Organization");xi=si[er]["00209165"].value[0];let Aa={DimensionOrganizationUID:rc,DimensionIndexPointer:xi};si[er]["00209421"]!==void 0&&(Aa.DimensionDescriptionLabel=si[er]["00209421"].value[0]),ln.push(Aa)}if(xi!=="(0020,0032)")throw new Error("Unsupported non image position as last index")}return{organizations:{value:[{DimensionOrganizationUID:ot}]},indices:{value:ln}}}(o),E=o["00620002"];if(E===void 0)throw new Error("Missing or empty segmentation sequence");let I=[],R,P,B=!1;for(let Se=0;Se<E.value.length;++Se){let Be=EM(E.value[Se]);Be.displayRGBValue!==void 0&&(B=!0),I.push(Be)}let z=o[52009229];if(z!==void 0){let Se=z.value[0];if(Se["00209116"]!==void 0){let Be=Se["00209116"];Be.value.length!==0?P=Be.value[0]["00200037"].value:p.warn("No shared functional group plane orientation sequence items.")}if(Se["00289110"]!==void 0){let Be=Se["00289110"];Be.value.length!==0?R=Ab(Be.value[0]):p.warn("No shared functional group pixel measure sequence items.")}}let J=function(Se,Be){return Se.some(function(ot){return t_(Be,ot)})},te=function(Se,Be){return Se.findIndex(function(ot){return t_(Be,ot)})},ve=o[52009230];if(ve===void 0)throw new Error("Missing or empty per frame functional sequence");if(y!==ve.value.length)throw new Error("perFrameFuncGroupSequence meta and numberOfFrames are not equal.");let ie=[];for(let Se=0;Se<ve.value.length;++Se)ie.push(AM(ve.value[Se]));let se=[];for(let Se=0;Se<ie.length;++Se){if(J(se,ie[Se].imagePosPat)||se.push(ie[Se].imagePosPat),ie[Se].imageOrientationPatient!==void 0){if(P===void 0)P=ie[Se].imageOrientationPatient;else if(!Ze(P,ie[Se].imageOrientationPatient))throw new Error("Unsupported multi orientation dicom seg.")}if(ie[Se].spacing!==void 0){if(R===void 0)R=ie[Se].spacing;else if(!R.equals(ie[Se].spacing))throw new Error("Unsupported multi resolution dicom seg.")}}if(R===void 0)throw new Error("No spacing found for DICOM SEG");if(R.length()!==3)throw new Error("Incomplete spacing found for DICOM SEG");if(P===void 0)throw new Error("No imageOrientationPatient found for DICOM SEG");if(P.length!==6)throw new Error("Incomplete imageOrientationPatient found for DICOM SEG");let ae=new O(parseFloat(P[0]),parseFloat(P[1]),parseFloat(P[2])),re=new O(parseFloat(P[3]),parseFloat(P[4]),parseFloat(P[5])),Ce=ae.crossProduct(re),we=new Z([ae.getX(),re.getX(),Ce.getX(),ae.getY(),re.getY(),Ce.getY(),ae.getZ(),re.getZ(),Ce.getZ()]);se.sort(function(Se){let Be=Se.getInverse();return function(ot,ln){let An=Be.multiplyArray3D(ot),si=Be.multiplyArray3D(ln);return An[2]-si[2]}}(we));let Ae=function(Se){return new W(Se[0],Se[1],Se[2])},Ne=[];for(let Se=0;Se<se.length;++Se)Ne.push(Ae(se[Se]));let tt=new Da(Ne[0],f,R,we),Tt=function(Se){let Be=Se>j;return Be&&(Be=Se>10*j,Be?(Be=Se>100*j,Be||p.warn("Using larger+ real world epsilon in SEG pos pat adding")):p.warn("Using larger real world epsilon in SEG pos pat adding")),Be},Gt=[];Gt.push(se[0]);let dt=0;for(let Se=1;Se<se.length;++Se){++dt;let Be=new d([0,0,dt]),ot=tt.indexToWorld(Be).get3D(),ln=Ne[Se],An=ln.getDistance(ot),si=An;for(;Tt(An);)if(p.debug("Adding intermediate pos pats for DICOM seg at "+ot.toString()),Gt.push([ot.getX(),ot.getY(),ot.getZ()]),++dt,Be=new d([0,0,dt]),ot=tt.indexToWorld(Be).get3D(),An=ln.getDistance(ot),An>si)throw new Error("Test distance is increasing when adding intermediate pos pats");Gt.push(se[Se])}let en=Gt.length,Le=new Da(Ne[0],f,R,we),tn=["0"];for(let Se=1;Se<en;++Se)Le.appendOrigin(Ae(Gt[Se]),Se),tn.push(Se.toString());let Bt=function(Se){return function(Be){return Be.number===Se}},bn=B?3:1,Ke=new a.constructor(bn*m*en);Ke.fill(0);let $e=null,xn=null;for(let Se=0;Se<ie.length;++Se){dt=te(Gt,ie[Se].imagePosPat),xn=m*Se,$e=m*dt;let Be=I.find(Bt(ie[Se].refSegmentNumber));for(let ot=0;ot<m;++ot)if(a[xn+ot]!==0){let ln=bn*($e+ot);B?(Ke[ln]=Be.displayRGBValue.r,Ke[ln+1]=Be.displayRGBValue.g,Ke[ln+2]=Be.displayRGBValue.b):Ke[ln]=Be.displayValue}}let Yn=new _s(Le,Ke,tn);B&&Yn.setPhotometricInterpretation("RGB");let Wt=n_(),Cn=function(Se){let Be,ot=o[Se];return ot!==void 0&&(Be=ot.value[0]),Be};Wt.StudyDate=Cn("00080020"),Wt.StudyTime=Cn("00080030"),Wt.StudyInstanceUID=Cn("0020000D"),Wt.StudyID=Cn("00200010"),Wt.SeriesDate=Cn("00080021"),Wt.SeriesTime=Cn("00080031"),Wt.SeriesInstanceUID=Cn("0020000E"),Wt.SeriesNumber=Cn("00200011"),Wt.ReferringPhysicianName=Cn("00080090"),Wt.PatientName=Cn("00100010"),Wt.PatientID=Cn("00100020"),Wt.PatientBirthDate=Cn("00100030"),Wt.PatientSex=Cn("00100040"),Wt.Manufacturer=Cn("00080070"),Wt.ManufacturerModelName=Cn("00081090"),Wt.DeviceSerialNumber=Cn("00181000"),Wt.SoftwareVersions=Cn("00181020"),Wt.DimensionOrganizationSequence=D.organizations,Wt.DimensionIndexSequence=D.indices,Wt.custom={segments:I,frameInfos:ie,SOPInstanceUID:o["00080018"].value[0]},Wt.numberOfFiles=en;let ic=o["00200052"];ic&&(Wt.FrameOfReferenceUID=ic.value[0]);let gt=o["00282110"];return gt&&(Wt.LossyImageCompression=gt.value[0]),Yn.setMeta(Wt),Yn}toDicom(o,a,c,f){let m=o.getMeta();a===void 0&&(a=m.segments);let y=o.getGeometry(),S=y.getSize();m.Rows=S.get(1),m.Columns=S.get(0);let D=new Date;m.ContentDate=_b(Sb(D)),m.ContentTime=Db(bb(D)),c!==void 0&&(m.StudyInstanceUID=c.getMeta().StudyInstanceUID);let E=[];for(let re of a)E.push(TM(re));var I,R;m.SegmentSequence={value:E},m.SharedFunctionalGroupsSequence={value:[{PlaneOrientationSequence:{value:[(R=y.getOrientation(),{ImageOrientationPatient:[R.get(0,0),R.get(1,0),R.get(2,0),R.get(0,1),R.get(1,1),R.get(2,1)]})]},PixelMeasuresSequence:{value:[(I=y.getSpacing(),{SpacingBetweenSlices:I.get(2),PixelSpacing:[I.get(1),I.get(0)]})]}}]};let P=function(re,Ce){let we=re.getGeometry().getSize(),Ae=we.getDimSize(2),Ne={};for(let tt=0;tt<we.get(2);++tt){let Tt=OM(re,Ce,tt*Ae),Gt=Object.keys(Tt);for(let dt of Gt)Ne[dt]===void 0&&(Ne[dt]={}),Ne[dt][tt]=Tt[dt]}return Ne}(o,a),B=[],z=[],J=[];for(let re of a){let Ce=re.number,we=Ce-1;if(P[we]===void 0)continue;let Ae=Object.keys(P[we]);for(let Ne=Ae.length-1;Ne>=0;--Ne){let tt=Number.parseInt(Ae[Ne],10);z.push(P[we][tt]);let Tt=o.getGeometry().getOrigins()[tt],Gt=[Tt.getX(),Tt.getY(),Tt.getZ()],dt={dimIndex:[Ce,Ae.length-Ne],imagePosPat:Gt,refSegmentNumber:Ce};if(c!==void 0){let en=c.getGeometry().worldToIndex(new de([Tt.getX(),Tt.getY(),Tt.getZ()]));dt.derivationImages=[{sourceImages:[{referencedSOPInstanceUID:c.getImageUid(en),referencedSOPClassUID:c.getMeta().SOPClassUID}]}],J.push({ReferencedSOPInstanceUID:c.getImageUid(en),ReferencedSOPClassUID:c.getMeta().SOPClassUID})}B.push(dt)}}m.NumberOfFrames=z.length.toString();let te=[];for(let re of B)te.push(MM(re));if(m.PerFrameFunctionalGroupsSequence={value:te},c!==void 0){let re=[];re.push({ReferencedInstanceSequence:{value:J},SeriesInstanceUID:c.getMeta().SeriesInstanceUID}),m.ReferencedSeriesSequence={value:re}}f!==void 0&&function(re,Ce){let we=Object.keys(Ce);for(let Ae of we)re[Ae]!==void 0&&p.trace("Overwritting tag: "+Ae),re[Ae]=Ce[Ae]}(m,f);let ve=Hd(m),ie=S.getDimSize(2),se=z.length*ie/8,ae=new $n("OB");return ae.tag=new Un("7FE0","0010"),ae.vl=se,ae.value=z,ve["7FE00010"]=ae,ve}}function PM(u){return new Rb().create(u,u["7FE00010"].value[0],1)}function FM(u){return new r0().create(u,u["7FE00010"].value[0])}class _s{#e;#t;#n;#i=new qd(1,0);#r=null;#o=!0;#s=!0;#a="MONOCHROME2";#c=0;#l;#u={};#d=null;#f=null;#h=null;#p=new ri;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c,this.#l=this.#t.length/this.#e.getSize().getTotalSize()}getImageUid(o){let a=this.#n[0];return this.#n.length!==1&&o!==void 0&&(a=this.#n[this.getSecondaryOffset(o)]),a}getOriginForImageUid(o){let a,c=this.#n.indexOf(o);return c!==-1&&(a=this.getGeometry().getOrigins()[c]),a}includesImageUid(o){return this.#n.includes(o)}containsImageUids(o){return function(a,c){if(a===null||c===null||a===void 0||c===void 0||a.length===0||c.length===0||c.length>a.length)return!1;for(let f of c)if(!a.includes(f))return!1;return!0}(this.#n,o)}getGeometry(){return this.#e}getBuffer(){return this.#t}canQuantify(){return this.getNumberOfComponents()===1}canWindowLevel(){return this.isMonochrome()}isMonochrome(){return this.getPhotometricInterpretation().match(/MONOCHROME/)!==null}canScroll(o){let a=this.getGeometry().getSize(),c=1;return this.#u.numberOfFiles!==void 0&&(c=this.#u.numberOfFiles),a.canScroll(o)||c!==1}#m(){return this.#e.getSize().getTotalSize(2)}getSecondaryOffset(o){return this.#e.getSize().indexToOffset(o,2)}getRescaleSlopeAndIntercept(o){let a=this.#i;if(!this.isConstantRSI()){if(o===void 0)throw new Error("Cannot get non constant RSI with empty slice index.");let c=this.getSecondaryOffset(o);this.#r[c]!==void 0?a=this.#r[c]:p.warn("undefined non constant rsi at "+c)}return a}#v(o){return this.#r[o]}setRescaleSlopeAndIntercept(o,a){if(this.#o=this.#o&&o.isID(),this.#s){if(!this.#i.equals(o))if(a===void 0)this.#i=o;else{this.#s=!1,this.#r=[];for(let c=0,f=this.#m();c<f;++c)this.#r.push(this.#i);this.#i=null,this.#r.splice(a,0,o)}}else{if(a===void 0)throw new Error("Cannot store non constant RSI with empty slice index.");this.#r.splice(a,0,o)}}isIdentityRSI(){return this.#o}isConstantRSI(){return this.#s}getPhotometricInterpretation(){return this.#a}setPhotometricInterpretation(o){this.#a=o}getPlanarConfiguration(){return this.#c}setPlanarConfiguration(o){this.#c=o}getNumberOfComponents(){return this.#l}getMeta(){return this.#u}setMeta(o){this.#u=o}getValueAtOffset(o){return this.#t[o]}getOffsets(o){let a;if(typeof o=="number"){if(this.#l!==1)throw new Error("Number of components is not 1 for getting single value.");a=[o]}else if(o.r!==void 0&&o.g!==void 0&&o.b!==void 0){if(this.#l!==3)throw new Error("Number of components is not 3 for getting RGB value.");a=[o.r,o.g,o.b]}let c=[],f;for(let m=0;m<this.#t.length;m+=this.#l){f=!0;for(let y=0;y<this.#l;++y)if(this.#t[m+y]!==a[y]){f=!1;break}f&&c.push(m)}return c}hasValues(o){if(o===void 0||o.length===0)return[];let a=[];for(let E=0;E<o.length;++E)this.#l===1?a.push([o[E]]):this.#l===3&&a.push([o[E].r,o[E].g,o[E].b]);let c;this.#l===1?c=function(E,I){return E[0]===I[0]}:this.#l===3&&(c=function(E,I){return E[0]===I[0]&&E[1]===I[1]&&E[2]===I[2]});let f=function(E){return function(I){return c(I,E)}},m=new Array(o.length);m.fill(!1);let y=a.slice(),S,D;for(let E=0,I=this.#t.length;E<I;E+=this.#l){D=[];for(let R=0;R<y.length;++R){S=!0;for(let P=0;P<this.#l;++P)if(this.#t[E+P]!==y[R][P]){S=!1;break}S&&(m[a.findIndex(f(y[R]))]=!0,D.push(R))}for(let R=0;R<D.length;++R)y.splice(D[R],1);if(y.length===0)break}return m}clone(){let o=this.#t.slice(0),a=new _s(this.getGeometry(),o,this.#n);if(this.isConstantRSI())a.setRescaleSlopeAndIntercept(this.getRescaleSlopeAndIntercept());else for(let c=0;c<this.#m();++c)a.setRescaleSlopeAndIntercept(this.#v(c),c);return a.setPhotometricInterpretation(this.getPhotometricInterpretation()),a.setPlanarConfiguration(this.getPlanarConfiguration()),a.setMeta(this.getMeta()),a}#y(o){let a=this.#t;if(this.#t=ub(8*this.#t.BYTES_PER_ELEMENT,this.#u.IsSigned?1:0,o),this.#t===null)throw new Error("Cannot reallocate data for image.");this.#t.set(a),a=null}appendSlice(o){if(o===null)throw new Error("Cannot append null slice");let a=o.getGeometry().getSize(),c=this.#e.getSize();if(a.get(2)!==1)throw new Error("Cannot append more than one slice");if(c.get(0)!==a.get(0))throw new Error("Cannot append a slice with different number of columns");if(c.get(1)!==a.get(1))throw new Error("Cannot append a slice with different number of rows");if(!this.#e.getOrientation().equals(o.getGeometry().getOrientation(),1e-4))throw new Error("Cannot append a slice with different orientation");if(this.#a!==o.getPhotometricInterpretation())throw new Error("Cannot append a slice with different photometric interpretation");for(let ie in this.#u)if(ie!=="windowPresets"&&ie!=="numberOfFiles"&&ie!=="custom"&&this.#u[ie]!==o.getMeta()[ie])throw new Error("Cannot append a slice with different "+ie+": "+this.#u[ie]+" != "+o.getMeta()[ie]);let f=o.getDataRange(),m=this.getDataRange();this.#d={min:Math.min(f.min,m.min),max:Math.max(f.max,m.max)};let y=o.getRescaledDataRange(),S=this.getRescaledDataRange();this.#f={min:Math.min(y.min,S.min),max:Math.max(y.max,S.max)};let D=o.getGeometry().getInitialTime(),E=!1;D===void 0||this.#e.hasSlicesAtTime(D)||(this.appendFrame(D,o.getGeometry().getOrigin()),c=this.#e.getSize(),E=!0);let I=function(ie,se){let ae=se.getInitialTime(),re=[];return re.push(0),re.push(0),re.push(ie.getSliceIndex(se.getOrigin(),ae)),ae!==void 0&&re.push(ae),new d(re)}(this.#e,o.getGeometry()),R=this.#l*c.getDimSize(2);if(this.#u.numberOfFiles===void 0)throw new Error("Missing number of files for buffer manipulation.");let P=R*this.#u.numberOfFiles;this.#t.length!==P&&this.#y(P);let B=I.get(2),z=B;D!==void 0&&(z+=this.#e.getCurrentNumberOfSlicesBeforeTime(D));let J=z*R,te=this.#e.getCurrentTotalNumberOfSlices()*R;J<te&&this.#t.set(this.#t.subarray(J,te),J+R),this.#t.set(o.getBuffer(),J),E||this.#e.appendOrigin(o.getGeometry().getOrigin(),B,D),this.setRescaleSlopeAndIntercept(o.getRescaleSlopeAndIntercept(),z);let ve=this.#n.length;if(this.#n.splice(z,0,o.getImageUid()),this.#u.windowPresets!==void 0){let ie=this.#u.windowPresets,se=o.getMeta().windowPresets,ae=Object.keys(se),re=null;for(let Ce=0;Ce<ae.length;++Ce){re=ae[Ce];let we=se[re],Ae=ie[re];if(Ae!==void 0){if((Ae.perslice===void 0||Ae.perslice===!1)&&!Ae.wl[0].equals(we.wl[0])){Ae.perslice=!0;for(let Ne=0;Ne<ve-1;++Ne)Ae.wl.push(Ae.wl[0])}Ae.perslice!==void 0&&Ae.perslice===!0&&ie[re].wl.splice(z,0,we.wl[0])}else ie[re]=se[re]}}this.#S({type:"imagegeometrychange"})}appendFrameBuffer(o,a){let c=this.#e.getSize(),f=this.#l*c.getDimSize(2);if(this.#u.numberOfFiles===void 0)throw new Error("Missing number of files for frame buffer manipulation.");let m=f*this.#u.numberOfFiles;this.#t.length!==m&&this.#y(m),a>=this.#u.numberOfFiles?p.warn("Ignoring frame at index "+a+" (size: "+this.#u.numberOfFiles+")"):(this.#t.set(o,f*a),this.appendFrame(a,new W(0,0,0)))}appendFrame(o,a){this.#e.appendFrame(a,o),this.#S({type:"appendframe"})}getDataRange(){return this.#d||(this.#d=this.calculateDataRange()),this.#d}getRescaledDataRange(){return this.#f||(this.#f=this.calculateRescaledDataRange()),this.#f}getHistogram(){if(!this.#h){let o=this.calculateHistogram();this.#d=o.dataRange,this.#f=o.rescaledDataRange,this.#h=o.histogram}return this.#h}addEventListener(o,a){this.#p.add(o,a)}removeEventListener(o,a){this.#p.remove(o,a)}#S=o=>{this.#p.fireEvent(o)};setAtOffsets(o,a){let c,f;if(typeof a=="number"){if(this.#l!==1)throw new Error("Number of components is not 1 for setting single value.");c=[a]}else if(a.r!==void 0&&a.g!==void 0&&a.b!==void 0){if(this.#l!==3)throw new Error("Number of components is not 3 for setting RGB value.");c=[a.r,a.g,a.b]}for(let m=0,y=o.length;m<y;++m){f=o[m];for(let S=0;S<this.#l;++S)this.#t[f+S]=c[S]}this.#S({type:"imagecontentchange"})}setAtOffsetsAndGetOriginals(o,a){let c=[];for(let f=0;f<o.length;++f){let m=o[f],y=3*m[0],S={r:this.#t[y],g:this.#t[y+1],b:this.#t[y+2]},D=[];D.push({index:0,colour:S});for(let E=0;E<m.length;++E){y=3*m[E];let I={r:this.#t[y],g:this.#t[y+1],b:this.#t[y+2]};S.r===I.r&&S.g===I.g&&S.b===I.b||(D.push({index:E,colour:I}),S=I),this.#t[y]=a.r,this.#t[y+1]=a.g,this.#t[y+2]=a.b}c.push(D)}return this.#S({type:"imagecontentchange"}),c}setAtOffsetsWithIterator(o,a){for(let c=0;c<o.length;++c){let f=o[c],m;Array.isArray(a)?m=vb(a[c],f.length):a.r!==void 0&&a.g!==void 0&&a.b!==void 0&&(m=vb([{index:0,colour:a}],f.length));let y=m.next();for(;!y.done;){let S=3*f[y.index];this.#t[S]=y.value.r,this.#t[S+1]=y.value.g,this.#t[S+2]=y.value.b,y=m.next()}}this.#S({type:"imagecontentchange"})}getValue(o,a,c,f){let m=new d([o,a,c,f||0]);return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(m))}getValueAtIndex(o){return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(o))}getRescaledValue(o,a,c,f){f===void 0&&(f=0);let m=this.getValue(o,a,c,f);if(!this.isIdentityRSI())if(this.isConstantRSI())m=this.getRescaleSlopeAndIntercept().apply(m);else{let y=new d([o,a,c,f]);m=this.getRescaleSlopeAndIntercept(y).apply(m)}return m}getRescaledValueAtIndex(o){return this.getRescaledValueAtOffset(this.getGeometry().getSize().indexToOffset(o))}getRescaledValueAtOffset(o){let a=this.getValueAtOffset(o);if(!this.isIdentityRSI())if(this.isConstantRSI())a=this.getRescaleSlopeAndIntercept().apply(a);else{let c=this.getGeometry().getSize().offsetToIndex(o);a=this.getRescaleSlopeAndIntercept(c).apply(a)}return a}calculateDataRange(){let o=this.getValueAtOffset(0),a=o,c=0,f=this.getGeometry().getSize(),m=f.getTotalSize();f.length()>=3&&(m=f.getDimSize(3));for(let y=0;y<m;++y)c=this.getValueAtOffset(y),c>a&&(a=c),c<o&&(o=c);return{min:o,max:a}}calculateRescaledDataRange(){if(this.isIdentityRSI())return this.getDataRange();if(this.isConstantRSI()){let o=this.getDataRange(),a=this.getRescaleSlopeAndIntercept().apply(o.min),c=this.getRescaleSlopeAndIntercept().apply(o.max);return{min:a<c?a:c,max:a>c?a:c}}{let o=this.getRescaledValueAtOffset(0),a=o,c=0,f=this.getGeometry().getSize(),m=f.getTotalSize();f.length()===3&&(m=f.getDimSize(3));for(let y=0;y<m;++y)c=this.getRescaledValueAtOffset(y),c>a&&(a=c),c<o&&(o=c);return{min:o,max:a}}}calculateHistogram(){let o=this.getGeometry().getSize(),a=[],c=this.getValueAtOffset(0),f=c,m=0,y=this.getRescaledValueAtOffset(0),S=y,D=0;for(let P=0,B=o.getTotalSize();P<B;++P)m=this.getValueAtOffset(P),m>f&&(f=m),m<c&&(c=m),D=this.getRescaledValueAtOffset(P),D>S&&(S=D),D<y&&(y=D),a[D]=(a[D]||0)+1;let E={min:c,max:f},I={min:y,max:S},R=[];for(let P=y;P<=S;++P)R.push([P,a[P]||0]);return{dataRange:E,rescaledDataRange:I,histogram:R}}convolute2D(o){if(o.length!==9)throw new Error("The convolution matrix does not have a length of 9; it has "+o.length);let a=this.clone(),c=a.getBuffer(),f=this.getGeometry().getSize(),m=f.getDimSize(2)*this.getNumberOfComponents();for(let y=0;y<f.get(2);++y)this.convoluteBuffer(o,c,y*m);return a}convoluteBuffer(o,a,c){let f=this.getGeometry().getSize(),m=f.get(0),y=f.get(1),S=this.getNumberOfComponents(),D=1,E=1;S===3&&(this.getPlanarConfiguration()===0?D=3:E=f.getDimSize(2));let I=[];I[0]=(-m-1)*D,I[1]=-m*D,I[2]=(1-m)*D,I[3]=-D,I[4]=0,I[5]=1*D,I[6]=(m-1)*D,I[7]=m*D,I[8]=(m+1)*D;let R=[];R[0]=I[4],R[1]=I[4],R[2]=I[5],R[3]=I[4],R[4]=I[4],R[5]=I[5],R[6]=I[7],R[7]=I[7],R[8]=I[8];let P=[];P[0]=I[1],P[1]=I[1],P[2]=I[2],P[3]=I[4],P[4]=I[4],P[5]=I[5],P[6]=I[7],P[7]=I[7],P[8]=I[8];let B=[];B[0]=I[1],B[1]=I[1],B[2]=I[2],B[3]=I[4],B[4]=I[4],B[5]=I[5],B[6]=I[4],B[7]=I[4],B[8]=I[5];let z=[];z[0]=I[3],z[1]=I[4],z[2]=I[5],z[3]=I[3],z[4]=I[4],z[5]=I[5],z[6]=I[6],z[7]=I[7],z[8]=I[8];let J=[];J[0]=I[0],J[1]=I[1],J[2]=I[2],J[3]=I[3],J[4]=I[4],J[5]=I[5],J[6]=I[3],J[7]=I[4],J[8]=I[5];let te=[];te[0]=I[3],te[1]=I[4],te[2]=I[4],te[3]=I[3],te[4]=I[4],te[5]=I[4],te[6]=I[6],te[7]=I[7],te[8]=I[7];let ve=[];ve[0]=I[0],ve[1]=I[1],ve[2]=I[1],ve[3]=I[3],ve[4]=I[4],ve[5]=I[4],ve[6]=I[6],ve[7]=I[7],ve[8]=I[7];let ie=[];ie[0]=I[0],ie[1]=I[1],ie[2]=I[1],ie[3]=I[3],ie[4]=I[4],ie[5]=I[4],ie[6]=I[3],ie[7]=I[4],ie[8]=I[4];let se=c,ae=0,re=[];for(let Ce=0;Ce<S;++Ce){se+=Ce*E;for(let we=0;we<y;++we)for(let Ae=0;Ae<m;++Ae){re=I,Ae===0&&we===0?re=R:Ae===0&&we===y-1?re=B:Ae===m-1&&we===0?re=te:Ae===m-1&&we===y-1?re=ie:Ae===0&&we!==y-1&&we!==0?re=P:Ae===m-1&&we!==y-1&&we!==0?re=ve:Ae!==0&&Ae!==m-1&&we===0?re=z:Ae!==0&&Ae!==m-1&&we===y-1&&(re=J),ae=0;for(let Ne=0;Ne<9;++Ne)ae+=this.getValueAtOffset(se+re[Ne])*o[Ne];a[se]=ae,se+=D}}}transform(o){let a=this.clone(),c=a.getBuffer();for(let f=0,m=c.length;f<m;++f)c[f]=o(a.getValueAtOffset(f));return a}compose(o,a){let c=this.clone(),f=c.getBuffer();for(let m=0,y=f.length;m<y;++m)f[m]=Math.floor(a(this.getValueAtOffset(m),o.getValueAtOffset(m)));return c}}class i_{create(o,a){let c=new r_(a);a.getPhotometricInterpretation()==="MONOCHROME1"?c.setColourMap("invPlain"):a.getPhotometricInterpretation()==="PALETTE COLOR"&&(F.palette!==void 0?c.setColourMap("palette"):p.warn("Cannot find Palette lut"));let f={};if(a.getMeta().windowPresets!==void 0&&(f=a.getMeta().windowPresets),f.minmax={name:"minmax"},v!==void 0){let m=a.getMeta().Modality;for(let y in v[m]){let S=v[m][y];f[y]={wl:[new g(S.center,S.width)],name:y}}}return c.setWindowPresets(f),c.init(),c}}let wa=["wlchange","wlpresetadd","colourmapchange","positionchange","opacitychange","alphafuncchange"];function kM(u,o){return new i_().create(u,o)}class r_{#e;#t;#n;#i={minmax:{name:"minmax"}};#r=null;#o;#s="plain";#a=null;#c;#l=new ri;constructor(o){this.#e=o,this.#e.addEventListener("appendframe",()=>{let a=this.getCurrentIndex();if(a.length()===3){let c=a.getValues();c.push(0),this.setCurrentIndex(new d(c))}})}getImage(){return this.#e}setImage(o){this.#e=o}getOrientation(){return this.#c}setOrientation(o){this.#c=o}init(){this.setInitialIndex()}setInitialIndex(){let o=this.#e.getGeometry().getSize(),a=new Array(o.length());a.fill(0),a[0]=Math.floor(o.get(0)/2),a[1]=Math.floor(o.get(1)/2),a[2]=Math.floor(o.get(2)/2),this.setCurrentIndex(new d(a),!0)}getPlaybackMilliseconds(o){return o||(o=10),Math.round(1e3/o)}#u=function(o,a){return 255};getAlphaFunction(){return this.#u}setAlphaFunction(o){this.#u=o,this.#h({type:"alphafuncchange"})}#d(){if(this.#r&&this.#i[this.#r]!==void 0&&this.#i[this.#r].perslice!==void 0&&this.#i[this.#r].perslice===!0){this.getCurrentIndex()||this.setInitialIndex();let c=this.getCurrentIndex(),f=this.#e.getSecondaryOffset(c),m=this.#i[this.#r].wl[f];this.setWindowLevel(m,this.#r,!0)}if(this.#o===void 0&&this.setWindowLevelPresetById(0,!0),this.#n===void 0||this.#e.isConstantRSI()!==this.#n){let c,f;this.#n=this.#e.isConstantRSI(),this.#n?(c=this.#e.getRescaleSlopeAndIntercept(),f=!0):(c=new qd(1,0),f=!1);let m=new h(c,this.#e.getMeta().BitsStored);this.#t=new b(m,this.#e.getMeta().IsSigned,f)}let o=this.#t.getVoiLut(),a;if(o!==void 0&&(a=o.getWindowLevel()),o===void 0||!this.#o.equals(a)){let c=new _(this.#o);this.#t.setVoiLut(c)}return this.#t}getWindowPresets(){return this.#i}getWindowPresetsNames(){return Object.keys(this.#i)}setWindowPresets(o){this.#i=o}addWindowPresets(o){let a=Object.keys(o),c=null;for(let f=0;f<a.length;++f)if(c=a[f],this.#i[c]!==void 0){if(this.#i[c].perslice!==void 0&&this.#i[c].perslice===!0)throw new Error("Cannot add perslice preset");this.#i[c]=o[c]}else this.#i[c]=o[c],this.#h({type:"wlpresetadd",name:c})}getCurrentWindowPresetName(){return this.#r}getColourMap(){return this.#s}#f(){return F[this.#s]}setColourMap(o){if(!F[o])throw new Error("Unknown colour map: '"+o+"'");this.#s=o,this.#h({type:"colourmapchange",value:[o]})}getCurrentPosition(){return this.#a}getCurrentIndex(){let o=this.getCurrentPosition();return o?this.getImage().getGeometry().worldToIndex(o):null}getCurrentImageUid(){return this.#e.getImageUid(this.getCurrentIndex())}getOriginForImageUid(o){return this.#e.getOriginForImageUid(o)}includesImageUid(o){return this.#e.includesImageUid(o)}isPositionInBounds(o){o===void 0&&(o=this.#a);let a=this.#e.getGeometry(),c=a.worldToIndex(o),f=[this.getScrollIndex()];return c.length()===4&&f.push(3),a.isIndexInBounds(c,f)}getOrigin(o){let a=this.#e.getGeometry(),c=0;return o!==void 0&&(c=a.worldToIndex(o).get(2)),a.getOrigins()[c]}setCurrentPosition(o,a){let c=this.#e.getGeometry(),f=c.worldToIndex(o),m=[this.getScrollIndex()];return f.length()===4&&m.push(3),c.isIndexInBounds(f,m)?this.setCurrentIndex(f,a):(a||(this.#a=o,this.#h({type:"positionchange",value:[f.getValues(),o.getValues()],valid:!1})),!1)}setCurrentIndex(o,a){a===void 0&&(a=!1);let c=this.#e.getGeometry(),f=c.indexToWorld(o),m=[this.getScrollIndex()];if(o.length()===4&&m.push(3),!c.isIndexInBounds(o,m))return a||(this.#a=f,this.#h({type:"positionchange",value:[o.getValues(),f.getValues()],valid:!1})),!1;let y=null,S=null;if(this.getCurrentPosition()&&(S=this.getCurrentIndex()),S)if(S.canCompare(o))y=S.compare(o);else{y=[];let D=Math.min(S.length(),o.length());for(let I=0;I<D;++I)S.get(I)!==o.get(I)&&y.push(I);let E=Math.max(S.length(),o.length());for(let I=D;I<E;++I)y.push(I)}else{y=[];for(let D=0;D<o.length();++D)y.push(D)}if(this.#a=f,!a){let D={type:"positionchange",value:[o.getValues(),f.getValues()],diffDims:y,data:{imageUid:this.#e.getImageUid(o)}};if(this.#e.canQuantify()){let E=this.#e.getRescaledValueAtIndex(o);D.value.push(E)}this.#h(D)}return!0}setWindowLevel(o,a,c){if(a===void 0&&(a="manual"),a!=="manual"&&this.#i[a]===void 0)throw new Error("Unknown window level preset: '"+a+"'");c===void 0&&(c=!1);let f=!o.equals(this.#o),m=this.#r!==a;(f||m)&&(this.#o=o,this.#r=a,a==="manual"&&(this.#i[a]!==void 0?this.#i[a].wl[0]=o:this.addWindowPresets({manual:{wl:[o],name:"manual"}})),this.#h({type:"wlchange",value:[o.center,o.width,a],wc:o.center,ww:o.width,skipGenerate:c}))}getWindowLevel(){return this.#d().getVoiLut().getWindowLevel()}setWindowLevelPreset(o,a){let c=this.getWindowPresets()[o];if(c===void 0)throw new Error("Unknown window level preset: '"+o+"'");o==="minmax"&&c.wl===void 0&&(c.wl=[this.getWindowLevelMinMax()]);let f=c.wl[0];if(c.perslice!==void 0&&c.perslice===!0){let m=this.#e.getSecondaryOffset(this.getCurrentIndex());f=c.wl[m]}this.setWindowLevel(f,o,a)}setWindowLevelPresetById(o,a){let c=Object.keys(this.getWindowPresets());this.setWindowLevelPreset(c[o],a)}addEventListener(o,a){this.#l.add(o,a)}removeEventListener(o,a){this.#l.remove(o,a)}#h=o=>{this.#l.fireEvent(o)};getWindowLevelMinMax(){let o=this.getImage().getRescaledDataRange(),a=o.min,c=o.max-a;return c<1&&(p.warn("Zero or negative window width, defaulting to one."),c=1),new g(a+c/2,c)}setWindowLevelMinMax(){let o=this.getWindowLevelMinMax();this.setWindowLevel(o,"minmax")}generateImageData(o,a){a===void 0&&(this.getCurrentIndex()||this.setInitialIndex(),a=this.getCurrentIndex());let c=this.getImage(),f=!c.isConstantRSI(),m=gb(c,a,f,this.getOrientation()),y=c.getPhotometricInterpretation();switch(y){case"MONOCHROME1":case"MONOCHROME2":(function(S,D,E,I,R){let P=0,B=0,z=D.next();for(;!z.done;)B=I.getValue(z.value),S.data[P]=R.red[B],S.data[P+1]=R.green[B],S.data[P+2]=R.blue[B],S.data[P+3]=E(z.value,z.index),P+=4,z=D.next()})(o,m,this.getAlphaFunction(),this.#d(),this.#f());break;case"PALETTE COLOR":(function(S,D,E,I,R){let P=function(te){return te>>8};R&&p.info("Scaling 16bits data to 8bits.");let B=0,z=0,J=D.next();for(;!J.done;)z=J.value,R?(S.data[B]=P(I.red[z]),S.data[B+1]=P(I.green[z]),S.data[B+2]=P(I.blue[z])):(S.data[B]=I.red[z],S.data[B+1]=I.green[z],S.data[B+2]=I.blue[z]),S.data[B+3]=E(z,J.index),B+=4,J=D.next()})(o,m,this.getAlphaFunction(),this.#f(),c.getMeta().BitsStored===16);break;case"RGB":(function(S,D,E){let I=0,R=D.next();for(;!R.done;)S.data[I]=R.value[0],S.data[I+1]=R.value[1],S.data[I+2]=R.value[2],S.data[I+3]=E(R.value,R.index),I+=4,R=D.next()})(o,m,this.getAlphaFunction());break;case"YBR_FULL":(function(S,D,E){let I=0,R=null,P=D.next();for(;!P.done;)B=P.value[0],z=P.value[1],R={r:B+1.402*((J=P.value[2])-128),g:B-.34414*(z-128)-.71414*(J-128),b:B+1.772*(z-128)},S.data[I]=R.r,S.data[I+1]=R.g,S.data[I+2]=R.b,S.data[I+3]=E(P.value,P.index),I+=4,P=D.next();var B,z,J})(o,m,this.getAlphaFunction());break;default:throw new Error("Unsupported photometric interpretation: "+y)}}getScrollIndex(){let o=null,a=this.getOrientation();return o=a!==void 0?a.getThirdColMajorDirection():2,o}isAquisitionOrientation(){return oe(this.#c)}}class o0{#e;#t;#n;#i;#r;constructor(o,a){this.#e=o,this.#t=o.getRealSpacing(),this.#n=o.getOrientation(),this.#i=a,this.#r=function(c,f){let m=c.asOneAndZeros().multiply(f);return c.asOneAndZeros().getAbs().equals(Cb().getAbs())&&(m=m.getAbs()),m}(this.#n,a)}getViewOrientation(){return this.#i}getTargetOrientation(){return this.#r}getOffset3DFromPlaneOffset(o){let a=new O(o.x,o.y,0),c=this.getTargetDeOrientedVector3D(a);return new O(c.getX()*this.#t.get(0),c.getY()*this.#t.get(1),c.getZ()*this.#t.get(2))}getPlaneOffsetFromOffset3D(o){let a=new O(o.x/this.#t.get(0),o.y/this.#t.get(1),o.z/this.#t.get(2)),c=this.getTargetOrientedVector3D(a);return{x:c.getX(),y:c.getY()}}getTargetOrientedVector3D(o){let a=o;return this.#r!==void 0&&(a=this.#r.getInverse().multiplyVector3D(o)),a}getTargetDeOrientedVector3D(o){let a=o;return this.#r!==void 0&&(a=this.#r.multiplyVector3D(o)),a}getTargetDeOrientedPoint3D(o){let a=o;return this.#r!==void 0&&(a=this.#r.multiplyPoint3D(o)),a}getImageOrientedVector3D(o){let a=o;if(this.#i!==void 0){let c=yb([o.getX(),o.getY(),o.getZ()],this.#i);a=new O(c[0],c[1],c[2])}return a}getImageOrientedPoint3D(o){let a=o;if(this.#i!==void 0){let c=yb([o.getX(),o.getY(),o.getZ()],this.#i);a=new W(c[0],c[1],c[2])}return a}getImageDeOrientedVector3D(o){let a=o;if(this.#i!==void 0){let c=Xl([o.getX(),o.getY(),o.getZ()],this.#i);a=new O(c[0],c[1],c[2])}return a}getImageDeOrientedPoint3D(o){let a=o;if(this.#i!==void 0){let c=Xl([o.getX(),o.getY(),o.getZ()],this.#i);a=new W(c[0],c[1],c[2])}return a}getPositionFromPlanePoint(o,a){let c=new W(o.getX(),o.getY(),a),f=this.getImageOrientedPoint3D(c);return this.#e.pointToWorld(f)}getPlanePointFromPosition(o){let a=this.#e.worldToPoint(o);return this.getImageDeOrientedPoint3D(a)}getCosines(){return[(o=this.#r).get(0,0),o.get(1,0),o.get(2,0),o.get(0,1),o.get(1,1),o.get(2,1)];var o}getPlanePoints(o){let a=this.getPlanePointFromPosition(o),c=this.getPositionFromPlanePoint(new N(0,0),a.getZ()),f=this.getCosines();return[c,new W(f[0],f[1],f[2]),new W(f[3],f[4],f[5])]}worldToIndex(o){return this.#e.worldToIndex(o)}isAquisitionOrientation(){return oe(this.#i)}getTargetOrientedPositiveXYZ(o){let a=Xl([o.x,o.y,o.z],this.#r);return{x:a[0],y:a[1],z:a[2]}}getScrollIndex(){let o=null;return o=this.#i!==void 0?this.#i.getThirdColMajorDirection():2,o}getNativeScrollIndex(){let o=null;return o=this.#n!==void 0?this.#n.getThirdColMajorDirection():2,o}}class o_{#e;#t;#n;#i=!1;constructor(o){if(o.getImage()===void 0)throw new Error("View does not have an image, cannot setup controller");this.#e=o,this.#t=new o0(o.getImage().getGeometry(),o.getOrientation()),o.getImage().getMeta().Modality==="SEG"&&(this.#i=!0)}getPlaneHelper(){return this.#t}isMask(){return this.#i}initialise(){this.setWindowLevelPresetById(0),this.setCurrentPosition(this.getPositionFromPlanePoint(new N(0,0)))}getModality(){return this.#e.getImage().getMeta().Modality}getWindowLevelPresetsNames(){return this.#e.getWindowPresetsNames()}addWindowLevelPresets(o){return this.#e.addWindowPresets(o)}setWindowLevelPreset(o){this.#e.setWindowLevelPreset(o)}setWindowLevelPresetById(o){this.#e.setWindowLevelPresetById(o)}isPlaying(){return this.#n!==void 0}getCurrentPosition(){return this.#e.getCurrentPosition()}getCurrentIndex(){return this.#e.getCurrentIndex()}getCurrentImageUid(){return this.#e.getCurrentImageUid()}getOriginForImageUid(o){return this.#e.getOriginForImageUid(o)}includesImageUid(o){return this.#e.includesImageUid(o)}getCurrentOrientedIndex(){let o=this.#e.getCurrentIndex();if(this.#e.getOrientation()!==void 0){let a=this.#t.getImageDeOrientedVector3D(new O(o.get(0),o.get(1),o.get(2)));o=new d([a.getX(),a.getY(),a.getZ()])}return o}getScrollIndex(){return this.#e.getScrollIndex()}getCurrentScrollIndexValue(){return this.#e.getCurrentIndex().get(this.#e.getScrollIndex())}getOrigin(o){return this.#e.getOrigin(o)}isAquisitionOrientation(){return this.#e.isAquisitionOrientation()}getPlanePoints(o){return this.#t.getPlanePoints(o)}getCurrentScrollPosition(){let o=this.#e.getScrollIndex();return this.#e.getCurrentPosition().get(o)}generateImageData(o,a){this.#e.generateImageData(o,a)}setImage(o){this.#e.setImage(o)}get2DSpacing(){return this.#e.getImage().getGeometry().getSpacing(this.#e.getOrientation()).get2D()}getRescaledImageValue(o){let a=this.#e.getImage();if(!a.canQuantify())return;let c=a.getGeometry(),f=c.worldToIndex(o),m;return c.isIndexInBounds(f)&&(m=a.getRescaledValueAtIndex(f)),m}getPixelUnit(){return this.#e.getImage().getMeta().pixelUnit}#r(o,a,c,f){let m=Gm(gb(o,a,c,f)),y=o.getGeometry().getSize(f).getValues();y[2]=1;let S=new Oo(y),D=o.getGeometry().getSpacing(f).getValues();D[2]=1;let E=new Po(D),I=new W(0,0,0),R=new Da(I,S,E);return new _s(R,m)}getImageRegionValues(o,a){let c=this.#e.getImage(),f=this.#e.getOrientation(),m=this.getCurrentIndex(),y=!0;oe(f)||(c=this.#r(c,m,y,f),m=new d([0,0,0]),y=!1);let S=function(E,I,R,P,B){if(E.getNumberOfComponents()!==1)throw new Error("Unsupported number of components for region iterator: "+E.getNumberOfComponents());R===void 0&&(R=!1);let z=null;z=R?function(se){return E.getRescaledValueAtOffset(se)}:function(se){return E.getValueAtOffset(se)};let J=E.getGeometry().getSize();P===void 0&&(P=new N(0,0)),B===void 0&&(B=new N(J.get(0)-1,J.get(1)));let te=J.indexToOffset(I.getWithNew2D(P.getX(),P.getY())),ve=J.indexToOffset(I.getWithNew2D(B.getX(),B.getY()-1)),ie=Math.max(1,B.getX()-P.getX());return function(se,ae,re,Ce,we,Ae){let Ne=ae,tt=0;return{next:function(){if(Ne<re){let Tt={value:se(Ne),done:!1,index:Ne};return tt+=1,Ne+=1,tt===we&&(tt=0,Ne+=Ae),Tt}return{done:!0,index:re}}}}(z,te,ve+1,0,ie,J.get(0)-ie)}(c,m,y,o,a),D=[];return S&&(D=Gm(S)),D}getImageVariableRegionValues(o){let a=this.#e.getImage(),c=this.#e.getOrientation(),f=this.getCurrentIndex(),m=!0;oe(c)||(a=this.#r(a,f,m,c),f=new d([0,0,0]),m=!1);let y=function(D,E,I,R){if(D.getNumberOfComponents()!==1)throw new Error("Unsupported number of components for region iterator: "+D.getNumberOfComponents());I===void 0&&(I=!1);let P=null;P=I?function(se){return D.getRescaledValueAtOffset(se)}:function(se){return D.getValueAtOffset(se)};let B=D.getGeometry().getSize(),z=[],J,te=null,ve=null,ie=null;for(let se=0;se<R.length;++se){J=R[se];let ae=J[1][0]-J[0][0];ae!==0&&(ie=se,te||(te=J[0]),z.push([J[0][0],ae,B.get(0)-J[1][0]]))}if(ie!==null&&(ve=R[ie][1]),z.length!==0)return function(se,ae,re,Ce,we){let Ae=ae,Ne=0,tt=0;return{next:function(){if(Ae<re){let Tt={value:se(Ae),done:!1,index:Ae};return tt+=1,Ae+=1,tt===we[Ne][1]&&(tt=0,Ae+=we[Ne][2],Ne+=1,Ne<we.length&&(Ae+=we[Ne][0])),Tt}return{done:!0,index:re}}}}(P,B.indexToOffset(E.getWithNew2D(te[0],te[1])),B.indexToOffset(E.getWithNew2D(ve[0],ve[1]))+1,0,z)}(a,f,m,o),S=[];return y&&(S=Gm(y)),S}canQuantifyImage(){return this.#e.getImage().canQuantify()}canWindowLevel(){return this.isMonochrome()}isMonochrome(){return this.#e.getImage().isMonochrome()}canScroll(){return this.#e.getImage().canScroll(this.#e.getOrientation())}getImageSize(){return this.#e.getImage().getGeometry().getSize(this.#e.getOrientation())}moreThanOne(o){return this.getImageSize().moreThanOne(o)}getImageWorldSize(){let o=this.#e.getImage().getGeometry(),a=o.getSize(this.#e.getOrientation()).get2D(),c=o.getSpacing(this.#e.getOrientation()).get2D();return{x:a.x*c.x,y:a.y*c.y}}getImageRescaledDataRange(){return this.#e.getImage().getRescaledDataRange()}equalImageMeta(o){let a=this.#e.getImage().getMeta(),c=Object.keys(o);for(let f=0;f<c.length;++f){let m=c[f];if(a[m]===void 0||a[m]!==o[m])return!1}return!0}isPositionInBounds(o){return this.#e.isPositionInBounds(o)}setCurrentPosition(o,a){return this.#e.setCurrentPosition(o,a)}getPositionFromPlanePoint(o,a){a===void 0&&(a=this.getCurrentScrollIndexValue());let c=new W(o.getX(),o.getY(),a),f=this.#t.getImageOrientedPoint3D(c),m=this.#e.getImage().getGeometry().pointToWorld(f);return this.getCurrentPosition().mergeWith3D(m)}getPlanePositionFromPosition(o){let a=this.#e.getImage().getGeometry().worldToPoint(o),c=this.#t.getImageDeOrientedPoint3D(a);return new N(c.getX(),c.getY())}getIndexFromPosition(o){return this.#e.getImage().getGeometry().worldToIndex(o)}setCurrentIndex(o,a){return this.#e.setCurrentIndex(o,a)}getPlanePositionFromPlanePoint(o){let a=this.getCurrentScrollIndexValue(),c=new W(o.getX(),o.getY(),a),f=this.#t.getTargetDeOrientedPoint3D(c),m=this.#e.getImage().getGeometry().getRealSpacing();return new W(f.getX()*m.get(0),f.getY()*m.get(1),f.getZ()*m.get(2))}getOffset3DFromPlaneOffset(o){return this.#t.getOffset3DFromPlaneOffset(o)}#o(o){let a=this.getCurrentIndex(),c=new Array(a.length());c.fill(0),o<c.length?c[o]=1:console.warn("Cannot increment given index: ",o,c.length);let f=new d(c);return a.add(f)}#s(o){let a=this.getCurrentIndex(),c=new Array(a.length());c.fill(0),o<c.length?c[o]=-1:console.warn("Cannot decrement given index: ",o,c.length);let f=new d(c);return a.add(f)}#a(){return this.#o(this.getScrollIndex())}#c(){return this.#s(this.getScrollIndex())}getIncrementPosition(o){return this.#e.getImage().getGeometry().indexToWorld(this.#o(o))}getDecrementPosition(o){return this.#e.getImage().getGeometry().indexToWorld(this.#s(o))}getIncrementScrollPosition(){return this.#e.getImage().getGeometry().indexToWorld(this.#a())}getDecrementScrollPosition(){return this.#e.getImage().getGeometry().indexToWorld(this.#c())}incrementIndex(o,a){return this.setCurrentIndex(this.#o(o),a)}decrementIndex(o,a){return this.setCurrentIndex(this.#s(o),a)}decrementScrollIndex(o){return this.setCurrentIndex(this.#c(),o)}incrementScrollIndex(o){return this.setCurrentIndex(this.#a(),o)}play(){if(this.canScroll())if(this.#n===void 0){let o=this.#e.getImage(),a=o.getMeta().RecommendedDisplayFrameRate,c=this.#e.getPlaybackMilliseconds(a),f=o.getGeometry().getSize().canScroll3D();this.#n=window.setInterval(()=>{let m=!1;if(m=f?this.incrementScrollIndex():this.incrementIndex(3),!m){let y=this.getCurrentIndex().getValues(),S=this.#e.getOrientation();f?y[S.getThirdColMajorDirection()]=0:y[3]=0;let D=new d(y),E=this.#e.getImage().getGeometry();this.setCurrentPosition(E.indexToWorld(D))}},c)}else this.stop()}stop(){this.#n!==void 0&&(clearInterval(this.#n),this.#n=void 0)}getWindowLevel(){return this.#e.getWindowLevel()}getCurrentWindowPresetName(){return this.#e.getCurrentWindowPresetName()}setWindowLevel(o){this.#e.setWindowLevel(o)}getColourMap(){return this.#e.getColourMap()}setColourMap(o){this.#e.setColourMap(o)}setViewAlphaFunction(o){this.#e.setAlphaFunction(o)}bindImageAndLayer(o){let a=this.#e.getImage();a.addEventListener("imagecontentchange",o.onimagecontentchange),a.addEventListener("imagegeometrychange",o.onimagegeometrychange)}unbindImageAndLayer(o){let a=this.#e.getImage();a.removeEventListener("imagecontentchange",o.onimagecontentchange),a.removeEventListener("imagegeometrychange",o.onimagegeometrychange)}}class LM{#e=0;getSum(){return this.#e}add(o){this.#e+=function(a){return a.wheelDeltaY===void 0?-a.deltaY:a.wheelDeltaY>45?1:a.wheelDeltaY<-45?-1:-a.deltaY/60}(o)}clear(){this.#e=0}isTick(){return Math.abs(this.#e)>=1}}class Kl{#e;#t=new LM;constructor(o){this.#e=o}wheel(o){this.#t.add(o);let a=this.#t.getSum()>=0;if(!this.#t.isTick())return;this.#t.clear(),o.preventDefault();let c=Lt(o),f=this.#e.getLayerGroupByDivId(c.groupDivId),m=f.getActiveViewLayer().getViewController(),y;f.canScroll()?y=a?m.getIncrementScrollPosition():m.getDecrementScrollPosition():f.moreThanOne(3)&&(y=a?m.getIncrementPosition(3):m.getDecrementPosition(3)),y!==void 0&&f.isPositionInBounds(y)&&m.setCurrentPosition(y)}}class an{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getBegin(){return this.#e}getEnd(){return this.#t}equals(o){return o!==null&&this.getBegin().equals(o.getBegin())&&this.getEnd().equals(o.getEnd())}getDeltaX(){return this.getEnd().getX()-this.getBegin().getX()}getDeltaY(){return this.getEnd().getY()-this.getBegin().getY()}getLength(){return Math.sqrt(this.getDeltaX()*this.getDeltaX()+this.getDeltaY()*this.getDeltaY())}getWorldLength(o){let a=null;if(o!==null){let c=this.getDeltaX()*o.x,f=this.getDeltaY()*o.y;a=Math.sqrt(c*c+f*f)}return a}getMidpoint(){return new N((this.getBegin().getX()+this.getEnd().getX())/2,(this.getBegin().getY()+this.getEnd().getY())/2)}getCentroid(){return this.getMidpoint()}getSlope(){return this.getDeltaY()/this.getDeltaX()}getIntercept(){return(this.getEnd().getX()*this.getBegin().getY()-this.getBegin().getX()*this.getEnd().getY())/this.getDeltaX()}getInclination(){return 180-180*Math.atan2(this.getDeltaY(),this.getDeltaX())/Math.PI}quantify(o){let a={},c=o.get2DSpacing(),f=this.getWorldLength(c);return f!==null&&(a.length={value:f,unit:"unit.mm"}),a}}function s0(u,o){let a=u.getDeltaX(),c=u.getDeltaY(),f=o.getDeltaX(),m=o.getDeltaY(),y=a*f+c*m,S=a*m-c*f;return 360-(180-180*Math.atan2(S,y)/Math.PI)}function a0(u,o){let a=u.getDeltaX(),c=u.getDeltaY();return a*o.getDeltaX()+c*o.getDeltaY()==0}function Ki(u,o,a,c){c===void 0&&(c={x:1,y:1});let f=-c.x*c.x/(c.y*c.y*u.getSlope());return a_(f,o.getY()-f*o.getX(),o,a,c)}function s_(u,o,a,c){let f=a_(u.getSlope(),u.getIntercept(),u.getBegin(),o,c),m;return m=function(y,S){let D=Math.min(S.getBegin().getX(),S.getEnd().getX()),E=Math.max(S.getBegin().getX(),S.getEnd().getX()),I=Math.min(S.getBegin().getY(),S.getEnd().getY()),R=Math.max(S.getBegin().getY(),S.getEnd().getY());return y.getX()>=D&&y.getX()<=E&&y.getY()>=I&&y.getY()<=R}(f.getBegin(),u)?f.getBegin():f.getEnd(),Ki(u,m,a,c)}function a_(u,o,a,c,f){f===void 0&&(f={x:1,y:1});let m=0,y=0,S=0,D=0;if(T(u,0,j))m=a.getX()-c/(2*f.x),y=a.getY(),S=a.getX()+c/(2*f.x),D=a.getY();else if(Math.abs(u)>1e6)m=a.getX(),y=a.getY()-c/(2*f.y),S=a.getX(),D=a.getY()+c/(2*f.y);else{let E=f.x*f.x,I=f.y*f.y,R=c/(2*Math.sqrt(E+I*u*u));m=a.getX()-R,y=u*m+o,S=a.getX()+R,D=u*S+o}return new an(new N(m,y),new N(S,D))}var NM=s(944),pe=s.n(NM);class $d{#e;#t={};#n=new ri;#i;#r;constructor(o){this.#e=o!==void 0?o:[],this.#i=!0}getList(){return this.#e}getLength(){return this.#e.length}isEditable(){return this.#i}setEditable(o){this.#i=o,this.#o({type:"annotationgroupeditablechange",data:o})}getColour(){return this.#r}setColour(o){this.#r=o}add(o){this.#e.push(o),this.#o({type:"annotationadd",data:o})}update(o,a){let c=this.#e.findIndex(f=>f.id===o.id);c!==-1?(this.#e[c]=o,this.#o({type:"annotationupdate",data:o,keys:a})):p.warn("Cannot find annotation to update")}remove(o){let a=this.#e.findIndex(c=>c.id===o);if(a!==-1){let c=this.#e.splice(a,1)[0];this.#o({type:"annotationremove",data:c})}else p.warn("Cannot find annotation to remove")}setViewController(o){for(let a of this.#e)a.setViewController(o),a.updateQuantification()}find(o){return this.#e.find(a=>a.id===o)}getMeta(){return this.#t}hasMeta(o){return this.#t[o]!==void 0}getMetaValue(o){return this.#t[o]}setMetaValue(o,a){this.#t[o]=a}addEventListener(o,a){this.#n.add(o,a)}removeEventListener(o,a){this.#n.remove(o,a)}#o=o=>{this.#n.fireEvent(o)}}class l_{#e;getAnnotation(o){return this.#e.find(o)}getAnnotationGroup(){return this.#e}isAnnotationGroupEditable(){return this.#e.isEditable()}setAnnotationGroupEditable(o){this.#e.setEditable(o)}addAnnotation(o){this.#e.add(o)}updateAnnotation(o,a){this.#e.update(o,a)}removeAnnotation(o){this.#e.remove(o)}removeAnnotationWithCommand(o,a){let c=this.getAnnotation(o);if(c===void 0)return void p.warn("Cannot create remove command for undefined annotation: "+o);let f=new d0(c,this);a(f),f.execute()}updateAnnotationWithCommand(o,a,c,f){let m=this.getAnnotation(o);if(m===void 0)return void p.warn("Cannot create update command for undefined annotation: "+o);let y=new Cs(m,a,c,this);f(y),y.execute()}removeAllAnnotationsWithCommand(o){for(let a of this.#e.getList())this.removeAnnotationWithCommand(a.id,o)}constructor(o){this.#e=o!==void 0?o:new $d}hasAnnotationMeta(o){return this.#e.hasMeta(o)}setAnnotationMeta(o,a){this.#e.setMetaValue(o,a)}}class Yd{#e=10;#t="Verdana";#n="#fff";#i="#ffff80";#r={x:1,y:1};#o={x:1,y:1};#s=2;#a={x:.25,y:.25};#c=.2;#l=3;getFontFamily(){return this.#t}getFontSize(){return this.#e}getStrokeWidth(){return this.#s}getTextColour(){return this.#n}getLineColour(){return this.#i}setLineColour(o){this.#i=o}setBaseScale(o){this.#r=o}setZoomScale(o){this.#o=o}getBaseScale(){return this.#r}getZoomScale(){return this.#o}scale(o){return o/this.#r.x}applyZoomScale(o){return{x:o/this.#o.x,y:o/this.#o.y}}applyZoomRatio(o){return o*this.#o.x/this.#o.y}getShadowOffset(){return this.#a}getTagOpacity(){return this.#c}getTextPadding(){return this.#l}getFontStr(){return"normal "+this.getFontSize()+"px sans-serif"}getLineHeight(){return this.getFontSize()+this.getFontSize()/5}getScaledFontSize(){return this.scale(this.getFontSize())}getScaledStrokeWidth(){return this.scale(this.getStrokeWidth())}getShadowLineColour(){return o=this.getLineColour(),c=o,.001172549*(a={r:parseInt(c.substring(1,3),16),g:parseInt(c.substring(3,5),16),b:parseInt(c.substring(5,7),16)}).r+.002301961*a.g+447059e-9*a.b<.5?"#fff":"#000";var o,a,c}}function l0(u){return u.name()==="label"}function ko(u){return u.name()==="shape"}function c_(u){return u.name()==="position-group"}function Xd(u){let o=u.getChildren(ko)[0];if(o instanceof pe().Line)return o}function Et(u,o){let a=u.getChildren(function(c){return c.id()==="anchor"+o})[0];if(a instanceof pe().Ellipse)return a}function c0(u){return function(o){return o.id()===u}}function Ds(u,o,a,c){let f=c.applyZoomScale(6),m={x:Math.abs(f.x),y:Math.abs(f.y)};return new(pe()).Ellipse({x:u,y:o,stroke:"#999",fill:"rgba(100,100,100,0.7",strokeWidth:c.getStrokeWidth(),strokeScaleEnabled:!1,radius:m,radiusX:m.x,radiusY:m.y,name:"anchor",id:a.toString(),dragOnTop:!1,draggable:!0,visible:!1})}function d_(u){return parseInt(u.substring(6),10)}class Lo{#e;#t;constructor(o,a){this.#e=new N(Math.min(o.getX(),a.getX()),Math.min(o.getY(),a.getY())),this.#t=new N(Math.max(o.getX(),a.getX()),Math.max(o.getY(),a.getY()))}getBegin(){return this.#e}getEnd(){return this.#t}equals(o){return o!==null&&this.getBegin().equals(o.getBegin())&&this.getEnd().equals(o.getEnd())}getSurface(){let o=this.getBegin(),a=this.getEnd();return Math.abs(a.getX()-o.getX())*Math.abs(a.getY()-o.getY())}getWorldSurface(o){return function(a,c,f){let m=null;return c!==null&&f!==null&&(m=a*c*f),m}(this.getSurface(),o.x,o.y)}getRealWidth(){return this.getEnd().getX()-this.getBegin().getX()}getRealHeight(){return this.getEnd().getY()-this.getBegin().getY()}getWidth(){return Math.abs(this.getRealWidth())}getHeight(){return Math.abs(this.getRealHeight())}getRound(){return{min:new N(Math.round(this.getBegin().getX()),Math.round(this.getBegin().getY())),max:new N(Math.round(this.getEnd().getX()),Math.round(this.getEnd().getY()))}}getCentroid(){return new N(this.getBegin().getX()+this.getWidth()/2,this.getBegin().getY()+this.getHeight()/2)}quantify(o,a){let c={},f=o.get2DSpacing();c.width={value:this.getWidth()*f.x,unit:"unit.mm"},c.height={value:this.getHeight()*f.y,unit:"unit.mm"};let m=this.getWorldSurface(f);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),o.canQuantifyImage()){let y=this.getRound(),S=o.getImageRegionValues(y.min,y.max),D=o.getPixelUnit(),E=zm(S,a);c.min={value:E.min,unit:D},c.max={value:E.max,unit:D},c.mean={value:E.mean,unit:D},c.stdDev={value:E.stdDev,unit:D},E.median!==void 0&&(c.median={value:E.median,unit:D}),E.p25!==void 0&&(c.p25={value:E.p25,unit:D}),E.p75!==void 0&&(c.p75={value:E.p75,unit:D})}return c}}function VM(u,o,a){let c=u.getValues(),f=c.slice(),m=[],y=o[0],S=Math.floor(y/2),D=o[1],E=Math.floor(D/2),I=a[0],R=a[1];for(let P=0;P<D;++P){f[R]=c[R]-E+P;for(let B=0;B<y;++B)f[I]=c[I]-S+B,m.push(new d(f.slice()))}return m}class Bi{#e=[];constructor(o){o!==void 0&&(this.#e=o)}getPoint(o){return this.#e[o]}getPoints(){return this.#e}getLength(){return this.#e.length}addPoint(o){this.#e.push(o)}addPoints(o){this.#e=this.#e.concat(o)}getCentroid(){let o=0,a=0,c=0;for(let m=0;m<this.#e.length;++m){let y=this.#e[m],S;S=m===this.#e.length-1?this.#e[0]:this.#e[m+1];let D=y.getX()*S.getY()-S.getX()*y.getY();o+=D,a+=(y.getX()+S.getX())*D,c+=(y.getY()+S.getY())*D}o*=.5;let f=1/(6*o);return a*=f,c*=f,new N(a,c)}}class No{#e;constructor(o){if(o.length>3)throw new Error("Too many points for a protractor");this.#e=o.slice(0,3)}getPoint(o){return this.#e[o]}getLength(){return this.#e.length}getCentroid(){return this.#e[1]}quantify(o,a){let c={};if(this.#e.length===3){let f=s0(new an(this.#e[0],this.#e[1]),new an(this.#e[1],this.#e[2]));f>180&&(f=360-f),c.angle={value:f,unit:"unit.degree"}}return c}}class Vo{#e;#t;#n;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c}getCenter(){return this.#e}getCentroid(){return this.#e}getA(){return this.#t}getB(){return this.#n}equals(o){return o!==null&&this.getCenter().equals(o.getCenter())&&this.getA()===o.getA()&&this.getB()===o.getB()}getSurface(){return Math.PI*this.getA()*this.getB()}getWorldSurface(o){return function(a,c,f){let m=null;return c!==null&&f!==null&&(m=a*c*f),m}(this.getSurface(),o.x,o.y)}getRound(){let o=this.getCenter().getX(),a=this.getCenter().getY(),c=this.getA(),f=this.getB(),m=c/f,y=Math.pow(f,2),S=a+f,D=[];for(let E=a-f;E<S;++E){let I=y-Math.pow(E-a,2);if(Math.abs(I)<1e-7)continue;let R=m*Math.sqrt(I);R<.5||D.push([[Math.round(o-R),Math.round(E)],[Math.round(o+R),Math.round(E)]])}return D}quantify(o,a){let c={},f=o.get2DSpacing();c.a={value:this.getA()*f.x,unit:"unit.mm"},c.b={value:this.getB()*f.y,unit:"unit.mm"};let m=this.getWorldSurface(f);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),o.canQuantifyImage()){let y=this.getRound();if(y.length!==0){let S=o.getImageVariableRegionValues(y),D=o.getPixelUnit(),E=zm(S,a);c.min={value:E.min,unit:D},c.max={value:E.max,unit:D},c.mean={value:E.mean,unit:D},c.stdDev={value:E.stdDev,unit:D},E.median!==void 0&&(c.median={value:E.median,unit:D}),E.p25!==void 0&&(c.p25={value:E.p25,unit:D}),E.p75!==void 0&&(c.p75={value:E.p75,unit:D})}}return c}}function BM(u,o,a){let c=u.getValues(),f=c.slice(),m=[],y=o[0],S=o[1],D=y/S,E=Math.pow(S,2),I=a[0],R=a[1];for(let P=0;P<S;++P){let B=Math.round(D*Math.sqrt(E-Math.pow(P,2))),z=c[R]+P,J=c[R]-P;for(let te=0;te<B;++te){let ve=c[I]+te,ie=c[I]-te;f[I]=ve,f[R]=z,m.push(new d(f.slice())),J!==z&&(f[R]=J,m.push(new d(f.slice()))),ie!==ve&&(f[I]=ie,f[R]=z,m.push(new d(f.slice())),J!==z&&(f[R]=J,m.push(new d(f.slice()))))}}return m}class Bo{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getCenter(){return this.#e}getCentroid(){return this.#e}getRadius(){return this.#t}equals(o){return o!==null&&this.getCenter().equals(o.getCenter())&&this.getRadius()===o.getRadius()}getSurface(){return Math.PI*this.getRadius()*this.getRadius()}getWorldSurface(o){return function(a,c,f){let m=null;return c!==null&&f!==null&&(m=a*c*f),m}(this.getSurface(),o.x,o.y)}getRound(){let o=this.getCenter().getX(),a=this.getCenter().getY(),c=this.getRadius(),f=Math.pow(c,2),m=a+c,y=[];for(let S=a-c;S<m;++S){let D=f-Math.pow(S-a,2);if(Math.abs(D)<1e-7)continue;let E=Math.sqrt(D);E<.5||y.push([[Math.round(o-E),Math.round(S)],[Math.round(o+E),Math.round(S)]])}return y}quantify(o,a){let c={},f=o.get2DSpacing();c.radius={value:this.getRadius()*f.x,unit:"unit.mm"};let m=this.getWorldSurface(f);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),o.canQuantifyImage()){let y=this.getRound();if(y.length!==0){let S=o.getImageVariableRegionValues(y),D=o.getPixelUnit(),E=zm(S,a);c.min={value:E.min,unit:D},c.max={value:E.max,unit:D},c.mean={value:E.mean,unit:D},c.stdDev={value:E.stdDev,unit:D},E.median!==void 0&&(c.median={value:E.median,unit:D}),E.p25!==void 0&&(c.p25={value:E.p25,unit:D}),E.p75!==void 0&&(c.p75={value:E.p75,unit:D})}}return c}}class UM{#e;#t;constructor(o,a){this.#e=o,this.#t=a}#n=null;#i=null;#r;#o;#s=!1;setShape(o,a,c){if(this.#i=o,this.#r=a,this.#o=c,this.#i){if(this.#l(),this.#n=c.getFactory(),this.#n===null)throw new Error("Could not find a factory to update shape.");this.#u()}}getShape(){return this.#i}getAnnotation(){return this.#o}isActive(){return this.#s}enable(){this.#s=!0,this.#i&&(this.#c(!0),this.#i.getLayer()&&this.#i.getLayer().draw())}disable(){this.#s=!1,this.#i&&(this.#c(!1),this.#i.getLayer()&&this.#i.getLayer().draw())}reset(){this.#i=void 0,this.#r=void 0,this.#o=void 0}resetAnchors(){this.#l(),this.#u(),this.#c(!0)}#a(o){this.#i&&this.#i.getParent()&&this.#i.getParent().find(".anchor").forEach(o)}#c(o){this.#a(function(a){a.visible(o)})}setAnchorsActive(o){let a=null;a=o?c=>{this.#d(c)}:c=>{this.#f(c)},this.#a(a)}#l(){this.#a(function(o){o.remove()})}#u(){if(!this.#i||!this.#i.getLayer())return;let o=this.#i.getParent(),a=this.#n.getAnchors(this.#i,this.#e.getStyle());for(let c=0;c<a.length;++c)this.#d(a[c]),o.add(a[c])}#d(o){let a;o.on("dragstart.edit",c=>{c.cancelBubble=!0,a={mathShape:this.#o.mathShape,referencePoints:this.#o.referencePoints}}),o.on("dragmove.edit",c=>{let f=c.target;f instanceof pe().Shape&&(function(m,y){let S=y.getParent();(function(D,E,I){let R=!1;D.x()<E.getX()?(D.x(E.getX()),R=!0):D.x()>I.getX()&&(D.x(I.getX()),R=!0),D.y()<E.getY()?(D.y(E.getY()),R=!0):D.y()>I.getY()&&(D.y(I.getY()),R=!0)})(y,new N(-S.x(),-S.y()),new N(m.x-S.x(),m.y-S.y()))}(this.#r.getBaseSize(),f),this.#n.constrainAnchorMove!==void 0&&this.#n.constrainAnchorMove(f),this.#n.updateAnnotationOnAnchorMove(this.#o,f),this.#n.updateShapeGroupOnAnchorMove(this.#o,f,this.#e.getStyle()),f.getLayer()?f.getLayer().draw():p.warn("No layer to draw the anchor!"),c.cancelBubble=!0)}),o.on("dragend.edit",c=>{let f={mathShape:this.#o.mathShape,referencePoints:this.#o.referencePoints},m=new Cs(this.#o,a,f,this.#r.getDrawController());this.#e.addToUndoStack(m),this.#t({type:"annotationupdate",data:this.#o,dataid:this.#r.getDataId(),keys:Object.keys(f)}),a={mathShape:f.mathShape,referencePoints:f.referencePoints},c.cancelBubble=!0}),o.on("mousedown touchstart",c=>{c.target.moveToTop()}),o.on("mouseover.edit",c=>{let f=c.target;f instanceof pe().Shape&&(f.stroke("#ddd"),f.getLayer()?f.getLayer().draw():p.warn("No layer to draw the anchor!"))}),o.on("mouseout.edit",c=>{let f=c.target;f instanceof pe().Shape&&(f.stroke("#999"),f.getLayer()?f.getLayer().draw():p.warn("No layer to draw the anchor!"))})}#f(o){o.off("dragstart.edit"),o.off("dragmove.edit"),o.off("dragend.edit"),o.off("mousedown touchstart"),o.off("mouseover.edit"),o.off("mouseout.edit")}}class qM{#e;constructor(){this.createTrashIcon()}createTrashIcon(){this.#e=new(pe()).Group;let o=new(pe()).Line({points:[-10,-10,10,10],stroke:"red"}),a=new(pe()).Line({points:[10,-10,-10,10],stroke:"red"});this.#e.width(20),this.#e.height(20),this.#e.add(o),this.#e.add(a)}activate(o){let a=o.getKonvaStage(),c=a.scale(),f=o.getKonvaLayer(),m={x:1/c.x,y:1/c.y};this.#e.x(a.offset().x+a.width()/(2*c.x)),this.#e.y(a.offset().y+a.height()/(15*c.y)),this.#e.scale(m),f.add(this.#e),f.draw()}changeChildrenColourOnTrashHover(o,a,c){if(this.isOverTrash(o))return this.changeGroupChildrenColour(this.#e,"orange"),void this.changeGroupChildrenColour(a,"red");this.changeGroupChildrenColour(this.#e,"red"),this.changeGroupChildrenColour(a,c)}changeGroupChildrenColour(o,a){o.getChildren().forEach(function(c){c instanceof pe().Shape&&c.stroke!==void 0&&c.stroke(a)})}remove(){this.#e.remove()}isOverTrash(o){let a=this.#e.width()*Math.abs(this.#e.scaleX())/2,c=this.#e.height()*Math.abs(this.#e.scaleY())/2;return Math.abs(o.x-this.#e.x())<a&&Math.abs(o.y-this.#e.y())<c}}class u_{#e;#t;#n;#i="pointer";#r;#o;#s;constructor(o,a){this.#e=o,this.#s=a,this.#t=new UM(o,a),this.#n=new qM}setEditorShape(o,a){let c=a.getDrawController();o&&o instanceof pe().Shape&&o!==this.#t.getShape()&&c.isAnnotationGroupEditable()&&(this.#t.disable(),this.#t.setShape(o,a,a.getDrawController().getAnnotation(o.getParent().id())),this.#t.enable())}getEditorShapeGroup(){let o;if(!this.#t.isActive()||(o=this.#t.getShape().getParent(),o instanceof pe().Group))return o}getEditorAnnotation(){let o;return this.#t.isActive()&&(o=this.#t.getAnnotation()),o}disableAndResetEditor(){this.#t.disable(),this.#t.reset()}#a(o,a){let c=a.getKonvaStage();return{x:c.offset().x+o.x/c.scale().x,y:c.offset().y+o.y/c.scale().y}}storeMouseOverCursor(o){this.#i=o}#c(){this.#r=document.body.style.cursor,document.body.style.cursor=this.#i,this.#o.opacity(.75)}onMouseOutShapeGroup(){this.#r!==void 0&&(document.body.style.cursor=this.#r,this.#r=void 0),this.#o!==void 0&&this.#o.opacity(1)}#l(o){o.on("mouseover",()=>{this.#o=o,this.#c()}),o.on("mouseout",()=>{this.onMouseOutShapeGroup(),this.#o=void 0})}#u(o){o.off("mouseover"),o.off("mouseout")}addShapeGroupListeners(o,a,c){this.#l(o),this.#d(o,a,c),this.#f(o,a,c),o.on("dblclick",()=>{let f=a.textExpr;f_.openRoiDialog(a,m=>{let y=m.textExpr,S=new Cs(m,{textExpr:f},{textExpr:y},c.getDrawController());this.#e.addToUndoStack(S),S.execute()})})}#d(o,a,c){let f=c.getKonvaLayer(),m=o.getChildren(ko)[0];if(!(m instanceof pe().Shape))return;let y,S,D,E;m.draggable(!0),m.on("dragstart.draw",I=>{E=m.stroke(),y={x:m.x(),y:m.y()},S={x:I.target.x(),y:I.target.y()},D={mathShape:a.mathShape,referencePoints:a.referencePoints},this.#n.activate(c),this.#t.setAnchorsActive(!1),f.draw()}),m.on("dragmove.draw",I=>{let R=function(se,ae){return{min:new N(0,0),max:new N(se.x-Math.abs(ae.width()),se.y-Math.abs(ae.height()))}}(c.getBaseSize(),m);if(R&&!function(se,ae,re){let Ce=se.getClientRect({relativeTo:se.getParent()});return Ce.x>ae.getX()&&Ce.x<re.getX()&&Ce.y>ae.getY()&&Ce.y<re.getY()}(m,R.min,R.max))return m.x(S.x),void m.y(S.y);let P={x:I.target.x()-S.x,y:I.target.y()-S.y},B=o.getChildren(),z=a.labelPosition===void 0;for(let se of B)se===I.target||se.name()==="label"&&!z||se.name()==="connector"||se.move(P);S={x:I.target.x(),y:I.target.y()};let J=a.getFactory();J.updateAnnotationOnTranslation(a,P),J.updateLabelContent(a,o,this.#e.getStyle()),J.updateConnector(o);let te=Tn(I.evt),ve={x:te.getX(),y:te.getY()},ie=this.#a(ve,c);this.#n.changeChildrenColourOnTrashHover(ie,o,E),f.draw()}),m.on("dragend.draw",I=>{if(this.#n.remove(),I===void 0||I.evt===void 0)return;let R=m.x(),P=m.y(),B=Tn(I.evt),z={x:B.getX(),y:B.getY()},J=this.#a(z,c);if(this.#n.isOverTrash(J)){o.x(y.x),o.y(y.y),this.#t.disable(),this.#t.reset(),this.#n.changeGroupChildrenColour(o,E),a.mathShape=D.mathShape,a.referencePoints=D.referencePoints;let te=new d0(a,c.getDrawController());this.#e.addToUndoStack(te),te.execute(),this.onMouseOutShapeGroup()}else{let te={x:R-y.x,y:P-y.y};if(te.x!==0||te.y!==0){let ve={mathShape:a.mathShape,referencePoints:a.referencePoints},ie=new Cs(a,D,ve,c.getDrawController());this.#e.addToUndoStack(ie),this.#s({type:"annotationupdate",data:a,dataid:c.getDataId(),keys:Object.keys(ve)}),D={mathShape:ve.mathShape,referencePoints:ve.referencePoints}}this.#t.setAnchorsActive(!0),this.#t.resetAnchors()}f.draw(),y={x:m.x(),y:m.y()}})}#f(o,a,c){let f=o.getChildren(l0)[0];if(!(f instanceof pe().Label))return;let m,y;f.draggable(!0),f.on("dragstart.draw",()=>{m={x:f.x(),y:f.y()},y=a.labelPosition}),f.on("dragmove.draw",()=>{a.getFactory().updateConnector(o)}),f.on("dragend.draw",()=>{let S=f.x()-m.x,D=f.y()-m.y;if(S!==0||D!==0){let E=new N(f.x(),f.y());a.labelPosition=E;let I=new Cs(a,{labelPosition:y},{labelPosition:E},c.getDrawController());this.#e.addToUndoStack(I),this.#s({type:"annotationupdate",data:a,dataid:c.getDataId(),keys:["labelPosition"]}),y=E}m={x:f.x(),y:f.y()}})}removeShapeListeners(o){this.#u(o),o.off("dblclick");let a=o.getChildren(ko)[0];a instanceof pe().Shape&&(a.draggable(!1),a.off("dragstart.draw"),a.off("dragmove.draw"),a.off("dragend.draw"));let c=o.getChildren(l0)[0];c instanceof pe().Label&&(c.draggable(!1),c.off("dragstart.draw"),c.off("dragend.draw"))}}class Ia{#e;#t=null;#n;#i;#r={x:1,y:1};#o={x:1,y:1,z:1};#s={x:0,y:0};#a={x:0,y:0};#c={x:0,y:0};#l={x:0,y:0};#u;#d;#f;#h;#p;#m;#v=!0;constructor(o){this.#e=o,this.#e.className+=" drawLayer"}setShapeHandler(o){this.#m=o}getDataId(){return this.#f}getReferenceLayerId(){return this.#h}#y=new ri;getKonvaStage(){return this.#t}getKonvaLayer(){return this.#t.getLayers()[0]}getDrawController(){return this.#u}setPlaneHelper(o){this.#d=o}getId(){return this.#e.id}removeFromDOM(){this.#e.remove()}getBaseSize(){return this.#n}getOpacity(){return this.#t.opacity()}setOpacity(o){this.#t.opacity(Math.min(Math.max(o,0),1))}addFlipOffsetX(){let o=this.#t.scale(),a=this.#t.size();this.#l.x+=a.width/o.x;let c=this.#t.offset();c.x+=this.#l.x,this.#t.offset(c)}addFlipOffsetY(){let o=this.#t.scale(),a=this.#t.size();this.#l.y+=a.height/o.y;let c=this.#t.offset();c.y+=this.#l.y,this.#t.offset(c)}flipScaleX(){this.#o.x*=-1}flipScaleY(){this.#o.y*=-1}flipScaleZ(){this.#o.z*=-1}setScale(o,a){let c=this.#d.getTargetOrientedPositiveXYZ({x:o.x*this.#o.x,y:o.y*this.#o.y,z:o.z*this.#o.z}),f={x:this.#r.x*c.x,y:this.#r.y*c.y},m=this.#t.offset();if(Math.abs(o.x)===1&&Math.abs(o.y)===1&&Math.abs(o.z)===1){let y={x:m.x-this.#c.x,y:m.y-this.#c.y};this.#c={x:0,y:0},this.#t.offset(y)}else if(a!==void 0){let y=this.#d.getPlaneOffsetFromOffset3D({x:a.getX(),y:a.getY(),z:a.getZ()});y={x:y.x+this.#s.x,y:y.y+this.#s.y};let S=g_(m,this.#t.scale(),f,y),D={x:this.#c.x+S.x-m.x,y:this.#c.y+S.y-m.y};this.#c=D,this.#t.offset(S)}this.#t.scale(f),this.#T(f)}initScale(o,a){let c=this.#d.getTargetOrientedPositiveXYZ({x:o.x*this.#o.x,y:o.y*this.#o.y,z:o.z*this.#o.z}),f={x:this.#r.x*c.x,y:this.#r.y*c.y};this.#t.scale(f),this.#c={x:a.x/this.#r.x,y:a.y/this.#r.y};let m=this.#t.offset();this.#t.offset({x:m.x+this.#c.x,y:m.y+this.#c.y})}setOffset(o){let a=this.#d.getPlaneOffsetFromOffset3D(o);this.#t.offset({x:a.x+this.#a.x+this.#s.x+this.#c.x+this.#l.x,y:a.y+this.#a.y+this.#s.y+this.#c.y+this.#l.y})}setBaseOffset(o,a){let c=this.#d.getNativeScrollIndex(),f=this.#d.getPlaneOffsetFromOffset3D({x:c===0?o.getX():a.getX(),y:c===1?o.getY():a.getY(),z:c===2?o.getZ():a.getZ()}),m=this.#s.x!==f.x||this.#s.y!==f.y;if(m){let y=this.#t.offset();this.#t.offset({x:y.x-this.#s.x+f.x,y:y.y-this.#s.y+f.y}),this.#s=f}return m}display(o){this.#e.style.display=o?"":"none"}isVisible(){return this.#e.style.display===""}draw(){this.#t.draw()}initialise(o,a,c){this.#n=o,this.#i=a,this.#h=c,this.#t=new(pe()).Stage({container:this.#e,width:this.#n.x,height:this.#n.y,listening:!1}),this.#t.getContent().setAttribute("style","");let f=new(pe()).Layer({listening:!1,visible:!0});this.#t.add(f)}setAnnotationGroup(o,a,c){if(this.#f=a,o.addEventListener("annotationadd",f=>{this.#g(f.data,!0),this.getKonvaLayer().draw()}),o.addEventListener("annotationupdate",f=>{this.#I(f.data),this.getKonvaLayer().draw()}),o.addEventListener("annotationremove",f=>{this.#D(f.data),this.getKonvaLayer().draw()}),o.addEventListener("annotationgroupeditablechange",f=>{this.activateCurrentPositionShapes(f.data)}),this.#u=new l_(o),o.getLength()!==0)for(let f of o.getList())this.#g(f,!1),c(new Zd(f,this.getDrawController()))}activateCurrentPositionShapes(o){let a=this.getKonvaLayer();if(this.#t.listening(!1),this.#m!==void 0){this.#m.disableAndResetEditor();let f=a.getChildren();for(let m of f)m instanceof pe().Group&&m.getChildren().forEach(y=>{y instanceof pe().Group&&this.#m.removeShapeListeners(y)})}let c=this.getDrawController();if(o&&c.getAnnotationGroup().isEditable()){let f=this.getCurrentPosGroup().getChildren();f.length!==0&&(this.#t.listening(!0),a.listening(!0)),this.#m!==void 0&&f.forEach(m=>{if(m instanceof pe().Group){let y=c.getAnnotation(m.id());this.#m.addShapeGroupListeners(m,y,this)}})}a.draw()}#S(o){let a;return a=o.planePoints!==void 0?o.planePoints:[o.planeOrigin],this.#b(a)}#b(o){let a="";for(let c of o)a.length!==0&&(a+="-"),a+=mt([un(c.getX(),2),un(c.getY(),2),un(c.getZ(),2)]);return a}#_(o){let a,c=this.#S(o),f=this.getKonvaLayer().getChildren(c0(c));if(f.length!==0){let m=f[0];if(!(m instanceof pe().Group))return;let y=m.getChildren(c0(o.id));y.length!==0&&y[0]instanceof pe().Group&&(a=y[0])}return a}#g(o,a){if(!o.isCompatibleView(this.#d))return;let c=this.#S(o),f=this.getKonvaLayer().getChildren(c0(c))[0];if(f===void 0&&(f=new(pe()).Group({id:c,name:"position-group",visible:a}),this.getKonvaLayer().add(f)),!(f instanceof pe().Group))return;let m=new Yd,y=this.getKonvaStage();m.setZoomScale(y.scale());let S=o.getFactory().createShapeGroup(o,m);f.add(S),a&&this.#m!==void 0&&this.#m.addShapeGroupListeners(S,o,this),this.setLabelVisibility(S)}#D(o){let a=this.#_(o);return a instanceof pe().Group?(a.remove(),!0):(p.debug("No shape group to remove"),!1)}#I(o){o.updateQuantification(),this.#D(o)&&this.#g(o,!0)}fitToContainer(o,a,c){this.#t.width(o.x),this.#t.height(o.y);let f={x:a*this.#i.x,y:a*this.#i.y},m={x:this.#t.scale().x*f.x/this.#r.x,y:this.#t.scale().y*f.y/this.#r.y};this.#t.scale().x===m.x&&this.#t.scale().y===m.y||(this.#r=f,this.#t.scale(m));let y={x:c.x/f.x,y:c.y/f.y},S={x:o.x/f.x,y:o.y/f.y},D={x:this.#l.x!==0?S.x:0,y:this.#l.y!==0?S.y:0};this.#a.x===y.x&&this.#a.y===y.y&&this.#l.x===D.x&&this.#l.y===D.y||(this.#t.offset({x:this.#t.offset().x+y.x-this.#a.x+D.x-this.#l.x,y:this.#t.offset().y+y.y-this.#a.y+D.y-this.#l.y}),this.#l=D,this.#a=y)}isAnnotationVisible(o){let a=this.getGroup(o);return a!==void 0&&a.isVisible()}setAnnotationVisibility(o,a){let c=this.getGroup(o);return c!==void 0&&(a===void 0&&(a=!c.isVisible()),c.visible(a),this.draw(),!0)}setLabelsVisibility(o){this.#v=o;let a=this.getKonvaLayer().getChildren();for(let c of a)if(c instanceof pe().Group){let f=c.getChildren();for(let m of f)m instanceof pe().Group&&this.#w(m,o)}}#w(o,a){let c=o.getChildren(l0)[0];if(c instanceof pe().Label&&(a===void 0&&(a=!c.isVisible()),c.getText()!==void 0&&c.getText().text().length!==0)){c.visible(a);let f=o.getChildren(m=>m.className==="Line"&&m.name()==="connector")[0];f&&f.visible(a)}}setLabelVisibility(o){this.#w(o,this.#v)}deleteDraw(o,a){}deleteDraws(o){}getNumberOfDraws(){let o=this.getKonvaLayer().getChildren(),a=0;for(let c of o)c instanceof pe().Group&&(a+=c.getChildren().length);return a}bindInteraction(){this.#t.listening(!0),this.#e.style.pointerEvents="auto";let o=Ea;for(let a=0;a<o.length;++a)this.#e.addEventListener(o[a],this.#E)}unbindInteraction(){this.#t.listening(!1),this.#e.style.pointerEvents="none";let o=Ea;for(let a=0;a<o.length;++a)this.#e.removeEventListener(o[a],this.#E)}setCurrentPosition(o,a){a===void 0&&(a=this.#d.worldToIndex(o));let c=this.#d.getPlanePoints(o),f;f=this.#d.isAquisitionOrientation()?[c[0]]:c;let m=this.#b(f);return this.#C(m),this.#E({type:"positionchange",value:[a.getValues(),o.getValues()],valid:!0}),!0}#C(o){this.#p=o;let a=this.getKonvaLayer().getChildren(c_),c;for(let f=0,m=a.length;f<m;++f)c=!1,o!==void 0&&a[f].id()===o&&(c=!0),a[f].visible(c);this.getKonvaLayer().draw()}getCurrentPosGroup(){if(this.#p===void 0)return;let o=this.getKonvaLayer().getChildren(c=>c.id()===this.#p),a;return o.length===1?o[0]instanceof pe().Group&&(a=o[0]):o.length===0?(a=new(pe()).Group,a.name("position-group"),a.id(this.#p),a.visible(!0),this.getKonvaLayer().add(a)):p.warn("Unexpected number of draw position groups"),a}getGroup(o){let a=this.getKonvaLayer().findOne("#"+o);return a===void 0&&p.warn("Cannot find node with id: "+o),a}addEventListener(o,a){this.#y.add(o,a)}removeEventListener(o,a){this.#y.remove(o,a)}#E=o=>{o.srclayerid=this.getId(),o.dataid=this.#f,this.#y.fireEvent(o)};#T(o){let a=2/o.x,c=2/o.y,f=this.#t.find("Label");for(let m=0;m<f.length;++m)f[m].scale({x:a,y:c})}}class Zd{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getName(){return"AddAnnotation-"+this.#e.id}execute(){this.#t.addAnnotation(this.#e)}undo(){this.#t.removeAnnotation(this.#e.id)}}class d0{#e;#t;constructor(o,a){this.#e=o,this.#t=a}getName(){return"RemoveAnnotation-"+this.#e.id}execute(){this.#t.removeAnnotation(this.#e.id)}undo(){this.#t.addAnnotation(this.#e)}}class Cs{#e;#t;#n;#i;constructor(o,a,c,f){this.#e=o,this.#t=f,this.#n=a,this.#i=c}getName(){return"UpdateAnnotation-"+this.#e.id}execute(){let o=Object.keys(this.#i);for(let a of o)this.#e[a]=this.#i[a];this.#t.updateAnnotation(this.#e,o)}undo(){let o=Object.keys(this.#n);for(let a of o)this.#e[a]=this.#n[a];this.#t.updateAnnotation(this.#e,o)}}var jM=s(324),Kd=s.n(jM);class Jl{constructor(o,a){this.pointArray=o?o.slice():[],this.controlPointIndexArray=a?a.slice():[]}getPoint(o){return this.pointArray[o]}isControlPoint(o){let a=this.pointArray.indexOf(o);if(a!==-1)return this.controlPointIndexArray.indexOf(a)!==-1;throw new Error("Error: isControlPoint called with not in list point.")}getLength(){return this.pointArray.length}addPoint(o){this.pointArray.push(o)}addControlPoint(o){let a=this.pointArray.indexOf(o);if(a===-1)throw new Error("Cannot mark a non registered point as control point.");this.controlPointIndexArray.push(a)}addPoints(o){this.pointArray=this.pointArray.concat(o)}appenPath(o){let a=this.pointArray.length;this.pointArray=this.pointArray.concat(o.pointArray);let c=[];for(let f=0;f<o.controlPointIndexArray.length;++f)c[f]=o.controlPointIndexArray[f]+a;this.controlPointIndexArray=this.controlPointIndexArray.concat(c)}}class GM{constructor(o,a){this.bucketCount=1<<o,this.mask=this.bucketCount-1,this.size=0,this.loc=0,this.cost=a!==void 0?a:function(c){return c},this.buckets=this.buildArray(this.bucketCount)}push(o){let a=this.getBucket(o);o.next=this.buckets[a],this.buckets[a]=o,this.size++}pop(){if(this.size===0)throw new Error("Cannot pop, bucketQueue is empty.");for(;this.buckets[this.loc]===null;)this.loc=(this.loc+1)%this.bucketCount;let o=this.buckets[this.loc];return this.buckets[this.loc]=o.next,o.next=null,this.size--,o}remove(o){if(!o)return!1;let a=this.getBucket(o),c=this.buckets[a];for(;c!==null&&(c.next===null||o.x!==c.next.x||o.y!==c.next.y);)c=c.next;return c!==null&&(c.next=c.next.next,this.size--,!0)}isEmpty(){return this.size===0}getBucket(o){return this.cost(o)&this.mask}buildArray(o){let a=new Array(o);for(let c=0;c<a.length;c++)a[c]=null;return a}}let zM=2/(3*Math.PI);function u0(u,o,a,c,f){let m=u[c][a],y=o[c][a],S=Math.sqrt(m*m+y*y);S=Math.max(S,1e-100),f.x=m/S,f.y=y/S}class HM{constructor(){this.width=-1,this.height=-1,this.curPoint=null,this.searchGranBits=8,this.searchGran=1<<this.searchGranBits,this.pointsPerPost=500,this.greyscale=null,this.laplace=null,this.gradient=null,this.gradX=null,this.gradY=null,this.parents=null,this.working=!1,this.trained=!1,this.trainingPoints=null,this.edgeWidth=2,this.trainingLength=32,this.edgeGran=256,this.edgeTraining=null,this.gradPointsNeeded=32,this.gradGran=1024,this.gradTraining=null,this.insideGran=256,this.insideTraining=null,this.outsideGran=256,this.outsideTraining=null}getTrainingIdx(o,a){return Math.round((o-1)*a)}getTrainedEdge(o){return this.edgeTraining[this.getTrainingIdx(this.edgeGran,o)]}getTrainedGrad(o){return this.gradTraining[this.getTrainingIdx(this.gradGran,o)]}getTrainedInside(o){return this.insideTraining[this.getTrainingIdx(this.insideGran,o)]}getTrainedOutside(o){return this.outsideTraining[this.getTrainingIdx(this.outsideGran,o)]}setWorking(o){this.working=o}setDimensions(o,a){this.width=o,this.height=a}setData(o){if(this.width===-1||this.height===-1)throw new Error("Dimensions have not been set.");this.greyscale=function(c,f,m){let y={data:[]};for(let S=0;S<m;S++){y.data[S]=[];for(let D=0;D<f;D++){let E=4*(S*f+D);y.data[S][D]=(c[E]+c[E+1]+c[E+2])/765}}return y.dx=function(S,D){return S+1===this.data[D].length&&S--,this.data[D][S+1]-this.data[D][S]},y.dy=function(S,D){return D+1===this.data.length&&D--,this.data[D][S]-this.data[D+1][S]},y.gradMagnitude=function(S,D){let E=this.dx(S,D),I=this.dy(S,D);return Math.sqrt(E*E+I*I)},y.laplace=function(S,D){let E=-16*this.data[D][S];return E+=this.data[D-2][S],E+=this.data[D-1][S-1]+2*this.data[D-1][S]+this.data[D-1][S+1],E+=this.data[D][S-2]+2*this.data[D][S-1]+2*this.data[D][S+1]+this.data[D][S+2],E+=this.data[D+1][S-1]+2*this.data[D+1][S]+this.data[D+1][S+1],E+=this.data[D+2][S],E},y}(o,this.width,this.height),this.laplace=function(c){let f=[];f[0]=[],f[1]=[];for(let m=1;m<c.data.length;m++)f[0][m]=1,f[1][m]=1;for(let m=2;m<c.data.length-2;m++){f[m]=[],f[m][0]=1,f[m][1]=1;for(let y=2;y<c.data[m].length-2;y++)f[m][y]=c.laplace(y,m)>.33?0:1;f[m][c.data[m].length-2]=1,f[m][c.data[m].length-1]=1}f[c.data.length-2]=[],f[c.data.length-1]=[];for(let m=1;m<c.data.length;m++)f[c.data.length-2][m]=1,f[c.data.length-1][m]=1;return f}(this.greyscale),this.gradient=function(c){let f=[],m=0,y=0,S=0;for(S=0;S<c.data.length-1;S++){for(f[S]=[],y=0;y<c.data[S].length-1;y++)f[S][y]=c.gradMagnitude(y,S),m=Math.max(f[S][y],m);f[S][c.data[S].length-1]=f[S][c.data.length-2]}f[c.data.length-1]=[];for(let D=0;D<f[0].length;D++)f[c.data.length-1][D]=f[c.data.length-2][D];for(S=0;S<f.length;S++)for(y=0;y<f[S].length;y++)f[S][y]=1-f[S][y]/m;return f}(this.greyscale),this.gradX=function(c){let f=[];for(let m=0;m<c.data.length;m++){f[m]=[];for(let y=0;y<c.data[m].length-1;y++)f[m][y]=c.dx(y,m);f[m][c.data[m].length-1]=f[m][c.data[m].length-2]}return f}(this.greyscale),this.gradY=function(c){let f=[];for(let m=0;m<c.data.length-1;m++){f[m]=[];for(let y=0;y<c.data[m].length;y++)f[m][y]=c.dy(y,m)}f[c.data.length-1]=[];for(let m=0;m<c.data[0].length;m++)f[c.data.length-1][m]=f[c.data.length-2][m];return f}(this.greyscale);let a=function(c,f,m,y){let S={inside:[],outside:[]},D={x:-1,y:-1};for(let E=0;E<f.length;E++){S.inside[E]=[],S.outside[E]=[];for(let I=0;I<f[E].length;I++){u0(f,m,I,E,D);let R=Math.round(I+c*D.y),P=Math.round(E-c*D.x),B=Math.round(I-c*D.y),z=Math.round(E+c*D.x);R=Math.max(Math.min(R,f[E].length-1),0),B=Math.max(Math.min(B,f[E].length-1),0),P=Math.max(Math.min(P,f.length-1),0),z=Math.max(Math.min(z,f.length-1),0),S.inside[E][I]=y.data[P][R],S.outside[E][I]=y.data[z][B]}}return S}(this.edgeWidth,this.gradX,this.gradY,this.greyscale);this.inside=a.inside,this.outside=a.outside,this.edgeTraining=[],this.gradTraining=[],this.insideTraining=[],this.outsideTraining=[]}findTrainingPoints(o){let a=[];if(this.parents!==null)for(let c=0;c<this.trainingLength&&o;c++)a.push(o),o=this.parents[o.y][o.x];return a}resetTraining(){this.trained=!1}doTraining(o){if(this.trainingPoints=this.findTrainingPoints(o),this.trainingPoints.length<8)return;let a=[];this.calculateTraining(a,this.edgeGran,this.greyscale,this.edgeTraining),this.calculateTraining(a,this.gradGran,this.gradient,this.gradTraining),this.calculateTraining(a,this.insideGran,this.inside,this.insideTraining),this.calculateTraining(a,this.outsideGran,this.outside,this.outsideTraining),this.trainingPoints.length<this.gradPointsNeeded&&this.addInStaticGrad(this.trainingPoints.length,this.gradPointsNeeded),this.trained=!0}calculateTraining(o,a,c,f){let m=0;for(o.length=a,m=0;m<a;m++)o[m]=0;let y=1;for(m=0;m<this.trainingPoints.length;m++){let S=this.trainingPoints[m],D=this.getTrainingIdx(a,c[S.y][S.x]);o[D]+=1,y=Math.max(y,o[D])}for(m=0;m<a;m++)o[m]=1-o[m]/y;(function(S,D){D[0]=.4*S[0]+.5*S[1]+.1*S[1],D[1]=.25*S[0]+.4*S[1]+.25*S[2]+.1*S[3];for(let I=2;I<S.length-2;I++)D[I]=.05*S[I-2]+.25*S[I-1]+.4*S[I]+.25*S[I+1]+.05*S[I+2];let E=S.length;D[E-2]=.25*S[E-1]+.4*S[E-2]+.25*S[E-3]+.1*S[E-4],D[E-1]=.4*S[E-1]+.5*S[E-2]+.1*S[E-3]})(o,f)}addInStaticGrad(o,a){for(let c=0;c<this.gradGran;c++)this.gradTraining[c]=Math.min(this.gradTraining[c],1-c*(a-o)/(a*this.gradGran))}gradDirection(o,a,c,f){return function(m,y,S,D,E,I){let R={x:-1,y:-1},P={x:-1,y:-1};u0(m,y,S,D,R),u0(m,y,E,I,P);let B=R.y*(E-S)-R.x*(I-D),z=P.y*(E-S)-P.x*(I-D);return B<0&&(B=-B,z=-z),S!==E&&D!==I&&(B*=Math.SQRT1_2,z*=Math.SQRT1_2),zM*(Math.acos(B)+Math.acos(z))}(this.gradX,this.gradY,o,a,c,f)}dist(o,a,c,f){let m=this.gradient[f][c];o!==c&&a!==f||(m*=Math.SQRT1_2);let y=this.laplace[f][c],S=this.gradDirection(o,a,c,f);return this.trained?.3*this.getTrainedGrad(m)+.3*y+.1*(S+this.getTrainedEdge(this.greyscale.data[a][o])+this.getTrainedInside(this.inside[a][o])+this.getTrainedOutside(this.outside[a][o])):.43*m+.43*y+.11*S}adj(o){let a=[],c=Math.max(o.x-1,0),f=Math.max(o.y-1,0),m=Math.min(o.x+1,this.greyscale.data[0].length-1),y=Math.min(o.y+1,this.greyscale.data.length-1),S=0;for(let D=f;D<=y;D++)for(let E=c;E<=m;E++)E===o.x&&D===o.y||(a[S++]={x:E,y:D});return a}#e=o=>Math.round(this.searchGran*this.cost[o.y][o.x]);setPoint(o){this.setWorking(!0),this.curPoint=o;let a=0,c=0;for(this.visited=[],c=0;c<this.height;c++)for(this.visited[c]=[],a=0;a<this.width;a++)this.visited[c][a]=!1;for(this.parents=[],c=0;c<this.height;c++)this.parents[c]=[];for(this.cost=[],c=0;c<this.height;c++)for(this.cost[c]=[],a=0;a<this.width;a++)this.cost[c][a]=Number.MAX_VALUE;this.cost[o.y][o.x]=0,this.pq=new GM(this.searchGranBits,this.#e),this.pq.push(o)}doWork(){if(!this.working)return;this.timeout=null;let o=0,a=[];for(;!this.pq.isEmpty()&&o<this.pointsPerPost;){let c=this.pq.pop();a.push(c),a.push(this.parents[c.y][c.x]),this.visited[c.y][c.x]=!0;let f=this.adj(c);for(let m=0;m<f.length;m++){let y=f[m],S=this.cost[c.y][c.x]+this.dist(c.x,c.y,y.x,y.y);S<this.cost[y.y][y.x]&&(this.cost[y.y][y.x]!==Number.MAX_VALUE&&this.pq.remove(y),this.cost[y.y][y.x]=S,this.parents[y.y][y.x]=c,this.pq.push(y))}o++}return a}}let Uo={labelText:{arrow:{"*":""},circle:{"*":"{surface}"},ellipse:{"*":"{surface}"},protractor:{"*":"{angle}"},rectangle:{"*":"{surface}"},roi:{"*":""},ruler:{"*":"{length}"}}};class ws{#e;constructor(o){this.#e=o}getPosition(o){let a=o.labelPosition;return a===void 0&&(a=this.#e(o)),a}create(o,a){let c=new(pe()).Text({fontSize:a.getFontSize(),fontFamily:a.getFontFamily(),fill:o.colour,padding:a.getTextPadding(),shadowColor:a.getShadowLineColour(),shadowOffset:a.getShadowOffset(),name:"text"}),f=o.getText();c.setText(f);let m=a.applyZoomScale(1),y={x:2*m.x,y:2*m.y},S=this.getPosition(o),D=new(pe()).Label({x:S.getX(),y:S.getY(),scale:y,visible:f.length!==0,name:"label"});return D.add(c),D.add(new(pe()).Tag({fill:o.colour,opacity:a.getTagOpacity()})),D}updatePosition(o,a){let c=a.getChildren(function(m){return m.name()==="label"})[0];if(!(c instanceof pe().Label))return;let f=this.getPosition(o);c.position({x:f.getX(),y:f.getY()})}getLabelAnchorsPosition(o){let a=o.x(),c=o.y(),f=o.width()*o.scale().x,m=o.height()*o.scale().y;return[new N(a+f/2,c),new N(a,c+m/2),new N(a+f/2,c+m),new N(a+f,c+m/2)]}getClosestPoints(o,a){let c=o[0].getDistance(a[0]),f=o[0],m=a[0];for(let y of o)for(let S of a){let D=y.getDistance(S);D<c&&(c=D,f=y,m=S)}return[f,m]}getConnector(o,a,c){let f=this.getLabelAnchorsPosition(a),m=this.getClosestPoints(o,f);return new(pe()).Line({points:[m[0].getX(),m[0].getY(),m[1].getX(),m[1].getY()],stroke:a.getText().fill(),strokeWidth:c.getStrokeWidth(),strokeScaleEnabled:!1,visible:a.visible(),dash:[10,7],name:"connector"})}updateConnector(o,a){let c=o.getChildren(function(S){return S.name()==="label"})[0];if(!(c instanceof pe().Label))return;let f=this.getLabelAnchorsPosition(c),m=this.getClosestPoints(a,f),y=o.getChildren(function(S){return S.name()==="connector"})[0];y instanceof pe().Line&&y.points([m[0].getX(),m[0].getY(),m[1].getX(),m[1].getY()])}updateContent(o,a){let c=a.getChildren(function(m){return m.name()==="label"})[0];if(!(c instanceof pe().Label))return;let f=o.getText();c.getText().setText(f),c.visible()&&c.visible(f.length!==0)}}class QM{#e=0;#t=0;getMin(){return this.#e}setMin(o){this.#e=o}getMax(){return this.#t}setMax(o){this.#t=o}getName(){return"Threshold"}#n=null;setOriginalImage(o){this.#n=o}getOriginalImage(){return this.#n}update(){let o=this.getOriginalImage(),a=o.getDataRange().min;return o.transform(c=>c<this.getMin()||c>this.getMax()?a:c)}}class WM{getName(){return"Sharpen"}#e=null;setOriginalImage(o){this.#e=o}getOriginalImage(){return this.#e}update(){return this.getOriginalImage().convolute2D([0,-1,0,-1,5,-1,0,-1,0])}}class $M{getName(){return"Sobel"}#e=null;setOriginalImage(o){this.#e=o}getOriginalImage(){return this.#e}update(){let o=this.getOriginalImage(),a=o.convolute2D([1,0,-1,2,0,-2,1,0,-1]),c=o.convolute2D([1,2,1,0,0,0,-1,-2,-1]);return a.compose(c,function(f,m){return Math.sqrt(f*f+m*m)})}}class h0{#e;#t;#n;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c}getName(){return"Filter-"+this.#e.getName()}execute(){this.#n.setImage(this.#t,this.#e.update()),this.#n.render(this.#t);let o={type:"filterrun",id:this.getName(),dataId:this.#t};this.onExecute(o)}undo(){this.#n.setImage(this.#t,this.#e.getOriginalImage()),this.#n.render(this.#t);let o={type:"filterundo",id:this.getName(),dataid:this.#t};this.onUndo(o)}onExecute(o){}onUndo(o){}}let h_={},ec={},YM={WindowLevel:class{#e;#t=!1;#n;#i;constructor(u){this.#e=u,this.#i=new Kl(u)}#r(u,o){this.#e.getLayerGroupByDivId(o).getActiveViewLayer().getViewController().isMonochrome()&&(this.#t=!0,this.#n=u)}#o(u,o){if(!this.#t)return;let a=this.#e.getLayerGroupByDivId(o).getActiveViewLayer().getViewController(),c=u.getX()-this.#n.getX(),f=this.#n.getY()-u.getY(),m=a.getImageRescaledDataRange(),y=.01*(m.max-m.min),S=a.getWindowLevel().center,D=a.getWindowLevel().width,E=S+Math.round(f*y),I=D+Math.round(c*y);var R;I=(R=I)<1?1:R;let P=new g(E,I);a.setWindowLevel(P),this.#n=u}#s(){this.#t&&(this.#t=!1)}mousedown=u=>{let o=Tn(u),a=Lt(u);this.#r(o,a.groupDivId)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#o(o,a.groupDivId)};mouseup=u=>{this.#s()};mouseout=u=>{this.#s()};touchstart=u=>{let o=ui(u),a=Lt(u);this.#r(o[0],a.groupDivId)};touchmove=u=>{let o=ui(u),a=Lt(u);this.#o(o[0],a.groupDivId)};touchend=u=>{this.#s()};dblclick=u=>{let o=Lt(u),a=Tn(u),c=this.#e.getLayerGroupByDivId(o.groupDivId).getActiveViewLayer(),f=c.displayToPlaneIndex(a),m=c.getViewController();if(!m.isMonochrome())return;let y=this.#e.getData(c.getDataId()).image,S=new g(y.getRescaledValueAtIndex(m.getCurrentIndex().getWithNew2D(f.get(0),f.get(1))),m.getWindowLevel().width);m.setWindowLevel(S)};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="WindowLevel",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Scroll:class{#e;#t=!1;#n;#i;#r;#o=!1;#s;constructor(u){this.#e=u,this.#i=new Kl(u)}#a(u,o){this.#d();let a=this.#e.getLayerGroupByDivId(o).getActiveViewLayer(),c=a.getViewController();c.isPlaying()&&c.stop(),this.#t=!0,this.#n=u;let f=a.displayToPlanePos(u),m=c.getPositionFromPlanePoint(f);c.setCurrentPosition(m)}#c(u,o){if(!this.#t)return void(this.#o&&this.#u(u,o));let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveViewLayer().getViewController(),f,m=u.getY()-this.#n.getY(),y=Math.abs(m)>15;y&&a.canScroll()&&(f=m>0?c.getDecrementScrollPosition():c.getIncrementScrollPosition());let S=u.getX()-this.#n.getX(),D=Math.abs(S)>15;D&&a.moreThanOne(3)&&(f=S>0?c.getIncrementPosition(3):c.getDecrementPosition(3)),f!==void 0&&a.isPositionInBounds(f)&&c.setCurrentPosition(f),(D||y)&&(this.#n=u)}#l(){this.#t&&(this.#t=!1)}mousedown=u=>{let o=Tn(u),a=Lt(u);this.#a(o,a.groupDivId)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#c(o,a.groupDivId)};mouseup=u=>{this.#l()};mouseout=u=>{this.#l(),this.#d()};touchstart=u=>{this.#r=setTimeout(()=>{this.dblclick(u)},500);let o=ui(u),a=Lt(u);this.#a(o[0],a.groupDivId)};touchmove=u=>{this.#r!==null&&(clearTimeout(this.#r),this.#r=null);let o=ui(u),a=Lt(u);this.#c(o[0],a.groupDivId)};touchend=u=>{this.#r!==null&&(clearTimeout(this.#r),this.#r=null),this.#l()};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="Scroll",this.#e.onKeydown(u)};dblclick=u=>{let o=Lt(u);this.#e.getLayerGroupByDivId(o.groupDivId).getActiveViewLayer().getViewController().play()};#u(u,o){let a=this.#e.getLayerGroupByDivId(o);this.#s=o,a.showTooltip(u)}#d(){this.#s!==void 0&&(this.#e.getLayerGroupByDivId(this.#s).removeTooltipDiv(),this.#s=void 0)}activate(u){u||this.#d()}setFeatures(u){u.displayTooltip!==void 0&&(this.#o=u.displayTooltip)}init(){}},ZoomAndPan:class{#e;#t=!1;#n;#i;#r;#o;constructor(u){this.#e=u}#s(u){this.#t=!0,this.#n=u,this.#i=!1}#a=u=>{this.#t=!0,this.#n=u[0],this.#i=!1,this.#r=new an(u[0],u[1]),this.#o=this.#r.getMidpoint()};#c(u,o){if(!this.#t)return;this.#i=!0;let a=u.getX()-this.#n.getX(),c=u.getY()-this.#n.getY(),f=this.#e.getLayerGroupByDivId(o),m=f.getActiveViewLayer(),y=m.getViewController(),S=m.displayToPlaneScale(new N(a,c)),D=y.getOffset3DFromPlaneOffset({x:S.getX(),y:S.getY()});f.addTranslation({x:D.getX(),y:D.getY(),z:D.getZ()}),f.draw(),this.#n=u}#l=(u,o)=>{if(!this.#t)return;this.#i=!0;let a=new an(u[0],u[1]).getLength()/this.#r.getLength(),c=this.#e.getLayerGroupByDivId(o),f=c.getActiveViewLayer(),m=f.getViewController();if(a===1){let y=u[0].getY()-this.#n.getY();if(Math.abs(y)<15)return;if(c.canScroll()){let S;S=y>0?m.getIncrementScrollPosition():m.getDecrementScrollPosition(),S!==void 0&&c.isPositionInBounds(S)&&m.setCurrentPosition(S)}}else{let y=(a-1)/10;if(Math.abs(y)%.1<=.05&&this.#o!==void 0){let S=f.displayToMainPlanePos(this.#o),D=m.getPlanePositionFromPlanePoint(S);c.addScale(y,D),c.draw()}}};#u(u,o){let a=this.#e.getLayerGroupByDivId(o).getActiveViewLayer(),c=a.getViewController(),f=a.displayToPlanePos(u),m=c.getPositionFromPlanePoint(f);c.setCurrentPosition(m)}#d(){this.#t&&(this.#t=!1)}mousedown=u=>{let o=Tn(u);this.#s(o)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#c(o,a.groupDivId)};mouseup=u=>{if(!this.#i){let o=Tn(u),a=Lt(u);this.#u(o,a.groupDivId)}this.#d()};mouseout=u=>{this.#d()};touchstart=u=>{let o=ui(u);o.length===1?this.#s(o[0]):o.length===2&&this.#a(o)};touchmove=u=>{let o=ui(u),a=Lt(u);o.length===1?this.#c(o[0],a.groupDivId):o.length===2&&this.#l(o,a.groupDivId)};touchend=u=>{if(!this.#i){let o=Tn(u),a=Lt(u);this.#u(o,a.groupDivId)}this.#d()};wheel=u=>{u.preventDefault();let o=-u.deltaY/500,a=Lt(u),c=Tn(u),f=this.#e.getLayerGroupByDivId(a.groupDivId),m=f.getActiveViewLayer(),y=m.getViewController(),S=m.displayToMainPlanePos(c),D=y.getPlanePositionFromPlanePoint(S);f.addScale(o,D),f.draw()};keydown=u=>{u.context="ZoomAndPan",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Opacity:class{#e;#t=!1;#n;#i;constructor(u){this.#e=u,this.#i=new Kl(u)}#r(u){this.#t=!0,this.#n=u}#o(u,o){if(!this.#t)return;let a=u.getX()-this.#n.getX();if(Math.abs(a)>15){let c=this.#e.getLayerGroupByDivId(o).getActiveViewLayer(),f=c.getOpacity();c.setOpacity(f+a/200),c.draw(),this.#n=u}}#s(){this.#t&&(this.#t=!1)}mousedown=u=>{let o=Tn(u);this.#r(o)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#o(o,a.groupDivId)};mouseup=u=>{this.#s()};mouseout=u=>{this.#s()};touchstart=u=>{let o=ui(u);this.#r(o[0])};touchmove=u=>{let o=ui(u),a=Lt(u);this.#o(o[0],a.groupDivId)};touchend=u=>{this.#s()};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="Opacity",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Draw:class{#e;#t;#n;#i=!1;#r=null;#o=null;#s=null;#a;#c=[];#l=null;#u=!0;#d=[];#f;#h=!1;#p={};#m=!1;#v=[];constructor(u){this.#e=u,this.#t=new Kl(u),this.#f=new u_(u,this.#x),this.#n=u.getStyle()}#y(u,o){let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveDrawLayer();if(c===void 0){let y=a.getActiveViewLayer().getDataId(),S=this.#e.getData(y).image.getMeta().SeriesInstanceUID;if(this.#d.includes(S))return void this.#x({type:"warn",message:"Cannot create draw layer, data is in black list"});let D=this.#e.createAnnotationData(y);this.#e.addAndRenderAnnotationData(D,o,y),c=a.getActiveDrawLayer(),c.setShapeHandler(this.#f),a.setActiveDrawLayerByDataId(c.getDataId())}let f=c.getDrawController().getAnnotationGroup(),m=c.getKonvaStage();if(this.#n.setZoomScale(m.scale()),f.isEditable()){let y=m.getIntersection({x:u.getX(),y:u.getY()});y?this.#g(c,y):this.#S(a,u)}}#S(u,o){this.#f.disableAndResetEditor(),this.#b();let a=u.getActiveViewLayer();this.#l=a.displayToPlanePos(o),this.#c.push(this.#l)}#b(){this.#i=!0,this.#o=new this.#r[this.#a],this.#c=[]}#_(){this.#i=!1,this.#c=[]}#g(u,o){let a=o.getParent();o instanceof pe().Tag&&(a=a.getParent());let c=a.find(".shape")[0];c instanceof pe().Shape&&(this.#x({type:"annotationselect",annotationid:a.id(),dataid:u.getDataId()}),this.#f.setEditorShape(c,u))}#D(u,o){let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveViewLayer().displayToPlanePos(u);(Math.abs(c.getX()-this.#l.getX())>0||Math.abs(c.getY()-this.#l.getY())>0)&&(this.#m&&this.#c.pop(),this.#l=c,this.#m=!0,this.#c.push(this.#l),this.#w(this.#c,a))}#I(u){if(this.#c.length!==0){if(this.#c.length===this.#o.getNPoints()){let o=this.#e.getLayerGroupByDivId(u);this.#C(this.#c,o),this.#_()}this.#m=!1}else p.warn("Draw mouseup but no points...")}mousedown=u=>{if(this.#i)return;let o=Tn(u),a=Lt(u);this.#y(o,a.groupDivId)};mousemove=u=>{if(!this.#i)return;let o=Tn(u),a=Lt(u);this.#D(o,a.groupDivId)};mouseup=u=>{if(!this.#i)return;let o=Lt(u);this.#I(o.groupDivId)};dblclick=u=>{if(this.#o&&this.#o.getNPoints()!==void 0||!this.#i)return;if(this.#c.length===0)return void p.warn("Draw dblclick but no points...");let o=Lt(u),a=this.#e.getLayerGroupByDivId(o.groupDivId);this.#C(this.#c,a),this.#_()};mouseout=u=>{if(!this.#i)return;let o=Lt(u);this.#I(o.groupDivId)};touchstart=u=>{if(this.#i)return;let o=ui(u),a=Lt(u);this.#y(o[0],a.groupDivId)};touchmove=u=>{if(!this.#i)return;let o=Lt(u),a=ui(u),c=this.#e.getLayerGroupByDivId(o.groupDivId),f=c.getActiveViewLayer().displayToPlanePos(a[0]);(Math.abs(f.getX()-this.#l.getX())>0||Math.abs(f.getY()-this.#l.getY())>0)&&(this.#c.length!==1&&this.#c.pop(),this.#l=f,this.#c.push(this.#l),this.#c.length<this.#o.getNPoints()&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.#c.push(this.#l)},this.#o.getTimeout())),this.#w(this.#c,c))};touchend=u=>{this.dblclick(u)};wheel=u=>{this.#u&&this.#t.wheel(u)};keydown=u=>{this.#i||(u.context="Draw",this.#e.onKeydown(u));let o=this.#f.getEditorAnnotation();if((u.key==="Delete"||u.key==="Backspace")&&o!==void 0){let a=this.#e.getActiveLayerGroup().getActiveDrawLayer().getDrawController(),c=new d0(o,a);this.#e.addToUndoStack(c),c.execute(),this.#f.onMouseOutShapeGroup()}if(u.key==="Escape"&&this.#s!==null){let a=this.#s.getLayer();this.#s.destroy(),this.#s=null,this.#_(),a.draw()}};#w(u,o){this.#s&&(this.#s.destroy(),this.#s=null);let a=o.getActiveDrawLayer(),c=a.getDrawController(),f=a.getKonvaLayer(),m=o.getActiveViewLayer().getViewController();if(this.#h){let D=["#ffff80","#ff80ff","#80ffff","#80ff80","8080ff","ff8080"],E=a.getId(),I=E.substring(E.length-1),R=D[parseInt(I,10)-1];R!==void 0&&this.#n.setLineColour(R)}let y=new Is,S=c.getAnnotationGroup().getColour();y.colour=S!==void 0?S:this.#n.getLineColour(),y.init(m),this.#o.setAnnotationMathShape(y,u),this.#s=this.#o.createShapeGroup(y,this.#n),a.setLabelVisibility(this.#s),this.#s.getChildren(ko)[0].listening(!1),f.listening(!1),f.add(this.#s),f.draw()}#C(u,o){this.#s&&(this.#s.destroy(),this.#s=null);let a=o.getActiveDrawLayer(),c=a.getKonvaLayer(),f=a.getDrawController(),m=o.getActiveViewLayer().getViewController(),y=new Is,S=f.getAnnotationGroup().getColour();y.colour=S!==void 0?S:this.#n.getLineColour(),y.id=jd(),y.init(m),this.#o.setAnnotationMathShape(y,u);let D=new Zd(y,f);this.#e.addToUndoStack(D),D.execute(),c.listening(!0)}#E(u){let o=u.getId();return this.#v[o]===void 0&&(this.#v[o]=()=>{u.activateCurrentPositionShapes(!0)}),this.#v[o]}#T(u,o){u.setShapeHandler(this.#f),u.activateCurrentPositionShapes(o),o?this.#e.addEventListener("positionchange",this.#E(u)):this.#e.removeEventListener("positionchange",this.#E(u))}activate(u){u||this.#f.onMouseOutShapeGroup();let o=this.#e.getDrawLayers();for(let a of o)a!==void 0&&this.#T(a,u);this.#e.addEventListener("drawlayeradd",a=>{let c=this.#e.getDrawLayers(function(f){return f.getId()===a.layerid});c.length===1&&this.#T(c[0],u)})}setOptions(u){this.#r=u}getOptionsType(){return"factory"}setFeatures(u){if(u.autoShapeColour!==void 0&&(this.#h=u.autoShapeColour),u.shapeColour!==void 0&&(this.#n.setLineColour(u.shapeColour),this.#h=!1),u.shapeName!==void 0){if(!this.hasShape(u.shapeName))throw new Error("Unknown shape: '"+u.shapeName+"'");this.#a=u.shapeName}u.mouseOverCursor!==void 0&&this.#f.storeMouseOverCursor(u.mouseOverCursor),u.withScroll!==void 0&&(this.#u=u.withScroll),u.blacklist!==void 0&&(this.#d=u.blacklist)}init(){}getEventNames(){return["annotationupdate","annotationselect","warn"]}addEventListener(u,o){this.#p[u]===void 0&&(this.#p[u]=[]),this.#p[u].push(o)}removeEventListener(u,o){if(this.#p[u]!==void 0)for(let a=0;a<this.#p[u].length;++a)this.#p[u][a]===o&&this.#p[u].splice(a,1)}#x=u=>{if(this.#p[u.type]!==void 0)for(let o=0;o<this.#p[u.type].length;++o)this.#p[u.type][o](u)};hasShape(u){return this.#r[u]!==void 0}},Filter:class{#e;constructor(u){this.#e=u}#t=null;#n=0;#i=new ri;activate(u){for(let o in this.#t)u?(this.#t[o].addEventListener("filterrun",this.#r),this.#t[o].addEventListener("filter-undo",this.#r)):(this.#t[o].removeEventListener("filterrun",this.#r),this.#t[o].removeEventListener("filter-undo",this.#r))}setOptions(u){this.#t={};for(let o in u)this.#t[o]=new u[o](this.#e)}getOptionsType(){return"instance"}init(){for(let u in this.#t)this.#t[u].init()}keydown=u=>{u.context="Filter",this.#e.onKeydown(u)};getEventNames(){return["filterrun","filterundo"]}addEventListener(u,o){this.#i.add(u,o)}removeEventListener(u,o){this.#i.remove(u,o)}#r=u=>{this.#i.fireEvent(u)};getSelectedFilter(){return this.#n}setFeatures(u){if(u.filterName!==void 0){if(!this.hasFilter(u.filterName))throw new Error("Unknown filter: '"+u.filterName+"'");this.#n&&this.#n.activate(!1),this.#n=this.#t[u.filterName],this.#n.activate(!0)}if(u.run!==void 0&&u.run){let o={};u.runArgs!==void 0&&(o=u.runArgs),this.getSelectedFilter().run(o)}}getFilterList(){return this.#t}hasFilter(u){return this.#t[u]}},Floodfill:class{#e;constructor(u){this.#e=u}#t=5;#n=0;#i=2e3;#r=null;#o=null;#s=10;#a=null;#c=!1;#l;#u;#d=null;#f=[];#h=!1;#p=new Yd;#m=new ri;setExtend(u){this.#h=u}getExtend(){return this.#h}#v=(u,o)=>{let a=this.#e.getLayerGroupByDivId(o).getActiveViewLayer().displayToPlaneIndex(u);return{x:a.get(0),y:a.get(1)}};#y(u,o,a){this.#f=[];let c={data:this.#r.data,width:this.#r.width,height:this.#r.height,bytes:4};this.#o=Kd().floodFill(c,u.x,u.y,o),this.#o=Kd().gaussBlurOnlyBorder(this.#o,this.#t);let f=Kd().traceContours(this.#o);if(f=Kd().simplifyContours(f,this.#n,this.#i),f.length>0&&f[0].points[0].x){if(a)return f[0].points;for(let m=0,y=f[0].points.length;m<y;m++)this.#f.push(new N(f[0].points[m].x,f[0].points[m].y));return this.#f}return[]}#S(u,o,a){if(this.#d=this.#y(u,o,!1),this.#d.length!==0){let c=a.getActiveDrawLayer().getDrawController(),f=new Bi(this.#d),m;if(this.#l===void 0){this.#l=new Is,this.#l.colour=this.#p.getLineColour(),this.#l.id=jd();let y=a.getActiveViewLayer().getViewController();this.#l.init(y),this.#l.mathShape=f,m=new Zd(this.#l,c)}else{let y=this.#l.mathShape;m=new Cs(this.#l,{mathShape:y},{mathShape:f},c)}this.#e.addToUndoStack(m),m.execute()}return this.#d.length!==0}extend(u,o,a){if(!this.#u)throw"'initialpoint' not found. User must click before use extend!";let c=a.getActiveViewLayer().getViewController(),f=c.getCurrentIndex(),m=c.getImageSize(),y=this.#a||this.#s;for(let S=f.get(2),D=o||m.get(2);S<D&&this.#S(this.#u,y,a);S++)c.incrementIndex(2);c.setCurrentPosition(f);for(let S=f.get(2),D=u||0;S>D&&this.#S(this.#u,y,a);S--)c.decrementIndex(2);c.setCurrentPosition(f)}onThresholdChange(u){}#b(u,o){let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveViewLayer(),f=a.getActiveDrawLayer();if(f===void 0){let m=a.getActiveViewLayer().getDataId(),y=this.#e.createAnnotationData(m);this.#e.addAndRenderAnnotationData(y,o,m),f=a.getActiveDrawLayer(),a.setActiveDrawLayerByDataId(f.getDataId())}this.#r=c.getImageData(),this.#r?(this.#p.setZoomScale(f.getKonvaLayer().getAbsoluteScale()),this.#c=!0,this.#u=this.#v(u,o),this.#S(this.#u,this.#s,a),this.onThresholdChange(this.#s)):p.error("No image found")}#_(u,o){if(!this.#c)return;let a=this.#v(u,o);this.#a=Math.round(Math.sqrt(Math.pow(this.#u.x-a.x,2)+Math.pow(this.#u.y-a.y,2))/2),this.#a=this.#a<this.#s?this.#s:this.#a-this.#s,this.#S(this.#u,this.#a,this.#e.getLayerGroupByDivId(o)),this.onThresholdChange(this.#a)}#g(){this.#c&&(this.#c=!1)}mousedown=u=>{let o=Tn(u),a=Lt(u);this.#b(o,a.groupDivId)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#_(o,a.groupDivId)};mouseup=u=>{this.#g()};mouseout=u=>{this.#g()};touchstart=u=>{let o=ui(u),a=Lt(u);this.#b(o[0],a.groupDivId)};touchmove=u=>{let o=ui(u),a=Lt(u);this.#_(o[0],a.groupDivId)};touchend=u=>{this.#g()};keydown=u=>{u.context="Floodfill",this.#e.onKeydown(u)};activate(u){u&&(this.#p.setBaseScale(this.#e.getBaseScale()),this.setFeatures({shapeColour:this.#p.getLineColour()}))}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(u,o){this.#m.add(u,o)}removeEventListener(u,o){this.#m.remove(u,o)}setFeatures(u){u.shapeColour!==void 0&&this.#p.setLineColour(u.shapeColour)}},Livewire:class{#e;constructor(u){this.#e=u}#t=!1;#n;#i;#r=new Yd;#o=new Jl;#s=new Jl;#a=[];#c=5;#l=new ri;#u(u){let o=u.get(1);for(let a=0;a<o;++a)this.#a[a]=[]}#d(){this.#o=new Jl,this.#s=new Jl}#f=new HM;#h(u,o){let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveViewLayer(),f=c.getViewController().getImageSize(),m=c.displayToPlaneIndex(u);if(this.#t){let y=Math.abs(m.get(0)-this.#n.getX()),S=Math.abs(m.get(1)-this.#n.getY());if(y<this.#c&&S<this.#c)this.#m();else{this.#o=this.#s,this.#u(f);let D={x:m.get(0),y:m.get(1)};this.#f.doTraining(D),this.#o.addControlPoint(this.#s.getPoint(0))}}else{this.#t=!0,this.#n=new N(m.get(0),m.get(1)),this.#d(),this.#u(f);let y=a.getActiveDrawLayer();if(y===void 0){let E=a.getActiveViewLayer().getDataId(),I=this.#e.createAnnotationData(E);this.#e.addAndRenderAnnotationData(I,o,E),y=a.getActiveDrawLayer(),a.setActiveDrawLayerByDataId(y.getDataId())}this.#r.setZoomScale(y.getKonvaLayer().getAbsoluteScale());let S={x:m.get(0),y:m.get(1)};this.#f.doTraining(S);let D=new N(m.get(0),m.get(1));this.#o.addPoint(D),this.#o.addControlPoint(D)}}#p(u,o){if(!this.#t)return;let a=this.#e.getLayerGroupByDivId(o),c=a.getActiveViewLayer().displayToPlaneIndex(u),f={x:c.get(0),y:c.get(1)};this.#f.setPoint(f);let m=[],y=!1;for(;!this.#a[f.y][f.x]&&!y;)if(m=this.#f.doWork(),m.length===0)y=!0;else for(let I=0;I<m.length-1;I+=2){let R=m[I],P=m[I+1];this.#a[R.y][R.x]=P}for(this.#s=new Jl,y=!1;f&&!y;)this.#s.addPoint(new N(f.x,f.y)),this.#a[f.y]&&this.#a[f.y][f.x]?f=this.#a[f.y][f.x]:y=!0;this.#s.appenPath(this.#o);let S=a.getActiveDrawLayer().getDrawController(),D=new Bi(this.#s.pointArray),E;if(this.#i===void 0){this.#i=new Is,this.#i.colour=this.#r.getLineColour(),this.#i.id=jd();let I=a.getActiveViewLayer().getViewController();this.#i.init(I),this.#i.mathShape=D,E=new Zd(this.#i,S)}else{let I=this.#i.mathShape;E=new Cs(this.#i,{mathShape:I},{mathShape:D},S)}this.#e.addToUndoStack(E),E.execute()}#m(){this.#t=!1}mousedown=u=>{let o=Tn(u),a=Lt(u);this.#h(o,a.groupDivId)};mousemove=u=>{let o=Tn(u),a=Lt(u);this.#p(o,a.groupDivId)};mouseup(u){}mouseout=u=>{};dblclick=u=>{this.#m()};touchstart=u=>{let o=ui(u),a=Lt(u);this.#h(o[0],a.groupDivId)};touchmove=u=>{let o=ui(u),a=Lt(u);this.#p(o[0],a.groupDivId)};touchend=u=>{};keydown=u=>{u.context="Livewire",this.#e.onKeydown(u)};activate(u){if(u){let o=this.#e.getActiveLayerGroup().getActiveViewLayer(),a=o.getViewController().getImageSize();this.#f.setDimensions(a.get(0),a.get(1)),this.#f.setData(o.getImageData().data),this.#r.setBaseScale(this.#e.getBaseScale()),this.setFeatures({shapeColour:this.#r.getLineColour()})}}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(u,o){this.#l.add(u,o)}removeEventListener(u,o){this.#l.remove(u,o)}setFeatures(u){u.shapeColour!==void 0&&this.#r.setLineColour(u.shapeColour)}}},f0={draw:{ArrowFactory:class{#e="arrow";#t=new ws(this.#l);static supports(u){return u instanceof N}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.referencePoints=[o[1]],u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(c);let f=this.#c(u,o);for(let S of f)a.add(S);let m=this.#t.create(u,o);a.add(m);let y=this.#n(c);return a.add(this.#t.getConnector(y,m,o)),a}#n(u){let o=u.points(),a=u.x(),c=u.y(),f=(o[0]+o[2])/2+a,m=(o[1]+o[3])/2+c;return[new N(f,m)]}#i(u){let o=u.points(),a=u.x(),c=u.y();return[new N(o[0]+a,o[1]+c),new N(o[2]+a,o[3]+c)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#u(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=o.getParent();if(!(a instanceof pe().Group))return;let c=this.#a(a),f=Et(a,0),m=Et(a,1),y=new N(f.x()-c.x(),f.y()-c.y()),S=new N(m.x()-c.x(),m.y()-c.y());u.mathShape=y,u.referencePoints=[S],u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=u.referencePoints[0],f=new an(a,c),m=f.getBegin(),y=new N(m.getX()+o.x,m.getY()+o.y),S=f.getEnd(),D=new N(S.getX()+o.x,S.getY()+o.y);u.mathShape=y,u.referencePoints=[D],u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){return u[0]}#o(){return Uo.labelText.arrow}#s(u,o){let a=u.mathShape,c=u.referencePoints[0],f=new an(a,c),m=new(pe()).Line({points:[a.getX(),a.getY(),c.getX(),c.getY()],stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),y=Ki(f,a,20,o.getZoomScale()),S=Ki(f,c,20,o.getZoomScale());return m.hitFunc(function(D){D.beginPath(),D.moveTo(y.getBegin().getX(),y.getBegin().getY()),D.lineTo(y.getEnd().getX(),y.getEnd().getY()),D.lineTo(S.getEnd().getX(),S.getEnd().getY()),D.lineTo(S.getBegin().getX(),S.getBegin().getY()),D.closePath(),D.fillStrokeShape(m)}),m}#a(u){return Xd(u)}#c(u,o){let a=u.mathShape,c=u.referencePoints[0],f=new an(a,c),m=s_(f,40,20,o.getZoomScale());return[new(pe()).Line({points:[f.getBegin().getX(),f.getBegin().getY(),m.getBegin().getX(),m.getBegin().getY(),m.getEnd().getX(),m.getEnd().getY()],fill:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,closed:!0,name:"shape-triangle"})]}#l(u){return u.mathShape}#u(u,o,a){let c=u.mathShape,f=u.referencePoints[0],m=new an(c,f),y=o.getParent();if(!(y instanceof pe().Group))return;let S=this.#a(y);S.position({x:0,y:0}),S.points([c.getX(),c.getY(),f.getX(),f.getY()]);let D=y.getChildren(function(z){return z.name()==="shape-triangle"})[0];if(!(D instanceof pe().Line))return;let E=Et(y,0),I=Et(y,1);switch(o.id()){case"anchor0":E.x(o.x()),E.y(o.y());break;case"anchor1":I.x(o.x()),I.y(o.y());break;default:p.error("Unhandled anchor id: "+o.id())}let R=s_(m,40,20,a.getZoomScale());D.position({x:0,y:0}),D.points([m.getBegin().getX(),m.getBegin().getY(),R.getBegin().getX(),R.getBegin().getY(),R.getEnd().getX(),R.getEnd().getY()]);let P=Ki(m,c,20,a.getZoomScale()),B=Ki(m,f,20,a.getZoomScale());S.hitFunc(function(z){z.beginPath(),z.moveTo(P.getBegin().getX(),P.getBegin().getY()),z.lineTo(P.getEnd().getX(),P.getEnd().getY()),z.lineTo(B.getEnd().getX(),B.getEnd().getY()),z.lineTo(B.getBegin().getX(),B.getBegin().getY()),z.closePath(),z.fillStrokeShape(S)})}#d(u,o){}#f(u,o){}},CircleFactory:class{#e="circle";#t=new ws(this.#c);static supports(u){return u instanceof Bo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(this.#s(u,o));let f=this.#t.create(u,o);a.add(this.#t.create(u,o));let m=this.#n(c);return a.add(this.#t.getConnector(m,f,o)),a}#n(u){let o=u.x(),a=u.y(),c=u.radius()*Math.sqrt(2)/2;return[new N(o-c,a-c),new N(o+c,a-c),new N(o-c,a+c),new N(o+c,a+c)]}#i(u){let o=u.x(),a=u.y(),c=u.radius();return[new N(o-c,a),new N(o+c,a),new N(o,a+c),new N(o,a-c)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){let o=u.getParent();if(!(o instanceof pe().Group))return;let a=Et(o,0),c=Et(o,1),f=Et(o,2),m=Et(o,3);switch(u.id()){case"anchor0":a.y(c.y());break;case"anchor1":c.y(a.y());break;case"anchor2":f.x(m.x());break;case"anchor3":m.x(f.x());break;default:p.error("Unhandled anchor id: "+u.id())}}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#l(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=u.mathShape,c=new N(a.getCenter().getX(),a.getCenter().getY()),f=new N(o.x(),o.y()),m=c.getDistance(f);u.mathShape=new Bo(c,m),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=a.getCenter(),f=new N(c.getX()+o.x,c.getY()+o.y);u.mathShape=new Bo(f,a.getRadius()),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){let o=Math.abs(u[0].getX()-u[1].getX()),a=Math.abs(u[0].getY()-u[1].getY()),c=Math.round(Math.sqrt(o*o+a*a));return new Bo(u[0],c)}#o(){return Uo.labelText.circle}#s(u,o){let a=u.mathShape;return new(pe()).Circle({x:a.getCenter().getX(),y:a.getCenter().getY(),radius:a.getRadius(),stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let o=u.getChildren(ko)[0];if(o instanceof pe().Circle)return o}#c(u){let o=u.mathShape,a=o.getCenter(),c=o.getRadius();return new N(a.getX()-c,a.getY()+c)}#l(u,o,a){let c=u.mathShape,f=c.getCenter(),m=c.getRadius(),y=o.getParent();if(!(y instanceof pe().Group))return;this.#a(y).radius(m);let S=Et(y,0),D=Et(y,1),E=Et(y,2),I=Et(y,3),R=D.x()<S.x()?-1:1,P=I.y()<E.y()?1:-1;switch(o.id()){case"anchor0":S.x(o.x()),D.x(f.getX()+R*m),E.y(f.getY()+m),I.y(f.getY()-m);break;case"anchor1":D.x(o.x()),S.x(f.getX()-R*m),E.y(f.getY()+m),I.y(f.getY()-m);break;case"anchor2":E.y(o.y()),S.x(f.getX()-m),D.x(f.getX()+m),I.y(f.getY()-P*m);break;case"anchor3":I.y(o.y()),S.x(f.getX()-m),D.x(f.getX()+m),E.y(f.getY()+P*m);break;default:p.error("Unhandled anchor id: "+o.id())}}#u(u,o){let a=u.mathShape,c=0,f=0;o!==void 0&&(c=o.x(),f=o.y());let m=new(pe()).Group;m.name("shadow");let y=a.getRound();for(let S=0;S<y.length;++S){let D=y[S],E=D[0][0],I=D[0][1],R=D[1][0],P=new(pe()).Rect({x:E-c,y:I-f,width:R-E,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});m.add(P)}return m}#d(u,o){let a=o.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),o.add(this.#u(u,o)))}},EllipseFactory:class{#e="ellipse";#t=new ws(this.#c);static supports(u){return u instanceof Vo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(this.#s(u,o));let f=this.#t.create(u,o);a.add(this.#t.create(u,o));let m=this.#n(c);return a.add(this.#t.getConnector(m,f,o)),a}#n(u){let o=u.x(),a=u.y(),c=u.radiusX()*Math.sqrt(2)/2,f=u.radiusY()*Math.sqrt(2)/2;return[new N(o-c,a-f),new N(o+c,a-f),new N(o-c,a+f),new N(o+c,a+f)]}#i(u){let o=u.x(),a=u.y(),c=u.radius();return[new N(o-c.x,a),new N(o+c.x,a),new N(o,a+c.y),new N(o,a-c.y)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){let o=u.getParent();if(!(o instanceof pe().Group))return;let a=Et(o,0),c=Et(o,1),f=Et(o,2),m=Et(o,3);switch(u.id()){case"anchor0":a.y(c.y());break;case"anchor1":c.y(a.y());break;case"anchor2":f.x(m.x());break;case"anchor3":m.x(f.x());break;default:p.error("Unhandled anchor id: "+u.id())}}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#l(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=u.mathShape,c=a.getCenter(),f=a.getA(),m=a.getB();switch(o.id()){case"anchor0":f=c.getX()-o.x();break;case"anchor1":f=o.x()-c.getX();break;case"anchor2":m=o.y()-c.getY();break;case"anchor3":m=c.getY()-o.y();break;default:p.error("Unhandled anchor id: "+o.id())}u.mathShape=new Vo(c,Math.abs(f),Math.abs(m)),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=a.getCenter(),f=new N(c.getX()+o.x,c.getY()+o.y);u.mathShape=new Vo(f,a.getA(),a.getB()),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){let o=Math.abs(u[0].getX()-u[1].getX()),a=Math.abs(u[0].getY()-u[1].getY());return new Vo(u[0],o,a)}#o(){return Uo.labelText.ellipse}#s(u,o){let a=u.mathShape,c=a.getCenter(),f={x:a.getA(),y:a.getB()};return new(pe()).Ellipse({x:c.getX(),y:c.getY(),radius:f,radiusX:f.x,radiusY:f.y,stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let o=u.getChildren(ko)[0];if(o instanceof pe().Ellipse)return o}#c(u){let o=u.mathShape,a=o.getCenter();return new N(a.getX()-o.getA(),a.getY()+o.getB())}#l(u,o,a){let c=u.mathShape,f=c.getCenter(),m=c.getA(),y=c.getB(),S=o.getParent();if(!(S instanceof pe().Group))return;this.#a(S).radius({x:m,y});let D=Et(S,0),E=Et(S,1),I=Et(S,2),R=Et(S,3),P=E.x()<D.x()?-1:1,B=R.y()<I.y()?1:-1;switch(o.id()){case"anchor0":D.x(o.x()),E.x(f.getX()+P*m),I.y(f.getY()+y),R.y(f.getY()-y);break;case"anchor1":E.x(o.x()),D.x(f.getX()-P*m),I.y(f.getY()+y),R.y(f.getY()-y);break;case"anchor2":I.y(o.y()),D.x(f.getX()-m),E.x(f.getX()+m),R.y(f.getY()-B*y);break;case"anchor3":R.y(o.y()),D.x(f.getX()-m),E.x(f.getX()+m),I.y(f.getY()+B*y);break;default:p.error("Unhandled anchor id: "+o.id())}}#u(u,o){let a=u.mathShape,c=0,f=0;o!==void 0&&(c=o.x(),f=o.y());let m=new(pe()).Group;m.name("shadow");let y=a.getRound();for(let S=0;S<y.length;++S){let D=y[S],E=D[0][0],I=D[0][1],R=D[1][0],P=new(pe()).Rect({x:E-c,y:I-f,width:R-E,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});m.add(P)}return m}#d(u,o){let a=o.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),o.add(this.#u(u,o)))}},ProtractorFactory:class{#e="protractor";#t=new ws(this.#l);static supports(u){return u instanceof No}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 3}getTimeout(){return 500}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=u.mathShape,c=new(pe()).Group;c.name(this.getGroupName()),c.visible(!0),c.id(u.id);let f=this.#s(u,o);if(c.add(this.#s(u,o)),a.getLength()===this.getNPoints()){let m=this.#c(u,o);for(let D of m)c.add(D);let y=this.#t.create(u,o);c.add(this.#t.create(u,o));let S=this.#n(f);c.add(this.#t.getConnector(S,y,o))}return c}#n(u){let o=u.points(),a=u.x(),c=u.y();return[new N(o[2]+a,o[3]+c)]}#i(u){let o=u.points(),a=u.x(),c=u.y();return[new N(o[0]+a,o[1]+c),new N(o[2]+a,o[3]+c),new N(o[4]+a,o[5]+c)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#u(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=o.getParent();if(!(a instanceof pe().Group))return;let c=this.#a(a),f=Et(a,0),m=Et(a,1),y=Et(a,2),S=new N(f.x()-c.x(),f.y()-c.y()),D=new N(m.x()-c.x(),m.y()-c.y()),E=new N(y.x()-c.x(),y.y()-c.y());u.mathShape=new No([S,D,E]),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=[];for(let f=0;f<3;++f)c.push(new N(a.getPoint(f).getX()+o.x,a.getPoint(f).getY()+o.y));u.mathShape=new No(c),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){return new No(u)}#o(){return Uo.labelText.protractor}#s(u,o){let a=u.mathShape,c=[];for(let m=0;m<a.getLength();++m)c.push(a.getPoint(m).getX()),c.push(a.getPoint(m).getY());let f=new(pe()).Line({points:c,stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"});return a.getLength()===this.getNPoints()&&f.hitFunc(function(m){m.beginPath(),m.moveTo(a.getPoint(0).getX(),a.getPoint(0).getY()),m.lineTo(a.getPoint(1).getX(),a.getPoint(1).getY()),m.lineTo(a.getPoint(2).getX(),a.getPoint(2).getY()),m.closePath(),m.fillStrokeShape(f)}),f}#a(u){return Xd(u)}#c(u,o){let a=u.mathShape,c=new an(a.getPoint(0),a.getPoint(1)),f=new an(a.getPoint(1),a.getPoint(2)),m=s0(c,f),y=c.getInclination();m>180&&(m=360-m,y+=m);let S=33*Math.min(c.getLength(),f.getLength())/100;return[new(pe()).Arc({innerRadius:S,outerRadius:S,stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,angle:m,rotation:-y,x:a.getPoint(1).getX(),y:a.getPoint(1).getY(),name:"shape-arc"})]}#l(u){let o=u.mathShape,a=new an(o.getPoint(0),o.getPoint(1)),c=new an(o.getPoint(1),o.getPoint(2)),f=(a.getMidpoint().getX()+c.getMidpoint().getX())/2,m=(a.getMidpoint().getY()+c.getMidpoint().getY())/2;return new N(f,m)}#u(u,o,a){let c=u.mathShape,f=new an(c.getPoint(0),c.getPoint(1)),m=new an(c.getPoint(1),c.getPoint(2)),y=o.getParent();if(!(y instanceof pe().Group))return;let S=this.#a(y);S.position({x:0,y:0}),S.points([c.getPoint(0).getX(),c.getPoint(0).getY(),c.getPoint(1).getX(),c.getPoint(1).getY(),c.getPoint(2).getX(),c.getPoint(2).getY()]);let D=y.getChildren(function(te){return te.name()==="shape-arc"})[0];if(!(D instanceof pe().Arc))return;let E=Et(y,0),I=Et(y,1),R=Et(y,2);switch(o.id()){case"anchor0":E.x(o.x()),E.y(o.y());break;case"anchor1":I.x(o.x()),I.y(o.y());break;case"anchor2":R.x(o.x()),R.y(o.y())}let P=s0(f,m),B=f.getInclination();P>180&&(P=360-P,B+=P);let z=33*Math.min(f.getLength(),m.getLength())/100;D.innerRadius(z),D.outerRadius(z),D.angle(P),D.rotation(-B);let J={x:I.x(),y:I.y()};D.position(J),S.hitFunc(function(te){te.beginPath(),te.moveTo(c.getPoint(0).getX(),c.getPoint(0).getY()),te.lineTo(c.getPoint(1).getX(),c.getPoint(1).getY()),te.lineTo(c.getPoint(2).getX(),c.getPoint(2).getY()),te.closePath(),te.fillStrokeShape(S)})}#d(u,o){}#f(u,o){}},RectangleFactory:class{#e="rectangle";#t=new ws(this.#c);static supports(u){return u instanceof Lo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(c);let f=this.#t.create(u,o);a.add(f);let m=this.#n(c);return a.add(this.#t.getConnector(m,f,o)),a}#n(u){let o=u.x(),a=u.y(),c=u.width(),f=u.height();return[new N(o+c/2,a),new N(o,a+f/2),new N(o+c/2,a+f),new N(o+c,a+f/2)]}#i(u){let o=u.x(),a=u.y(),c=u.width(),f=u.height();return[new N(o,a),new N(o+c,a),new N(o+c,a+f),new N(o,a+f)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#l(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=o.getParent();if(!(a instanceof pe().Group))return;let c=Et(a,0),f=Et(a,2),m=new N(c.x(),c.y()),y=new N(f.x(),f.y());u.mathShape=new Lo(m,y),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=a.getBegin(),f=new N(c.getX()+o.x,c.getY()+o.y),m=a.getEnd(),y=new N(m.getX()+o.x,m.getY()+o.y);u.mathShape=new Lo(f,y),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){return new Lo(u[0],u[1])}#o(){return Uo.labelText.rectangle}#s(u,o){let a=u.mathShape;return new(pe()).Rect({x:a.getBegin().getX(),y:a.getBegin().getY(),width:a.getWidth(),height:a.getHeight(),stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let o=u.getChildren(ko)[0];if(o instanceof pe().Rect)return o}#c(u){let o=u.mathShape;return new N(o.getBegin().getX(),o.getEnd().getY())}#l(u,o,a){let c=u.mathShape,f=c.getBegin(),m=o.getParent();if(!(m instanceof pe().Group))return;let y=this.#a(m);y.position({x:f.getX(),y:f.getY()}),y.size({width:c.getWidth(),height:c.getHeight()});let S=Et(m,0),D=Et(m,1),E=Et(m,2),I=Et(m,3);switch(o.id()){case"anchor0":S.x(o.x()),S.y(o.y()),D.y(o.y()),I.x(o.x());break;case"anchor1":D.x(o.x()),D.y(o.y()),S.y(o.y()),E.x(o.x());break;case"anchor2":E.x(o.x()),E.y(o.y()),I.y(o.y()),D.x(o.x());break;case"anchor3":I.x(o.x()),I.y(o.y()),E.y(o.y()),S.x(o.x());break;default:p.error("Unhandled anchor id: "+o.id())}}#u(u,o){let a=u.mathShape.getRound(),c=a.max.getX()-a.min.getX(),f=a.max.getY()-a.min.getY();return new(pe()).Rect({x:a.min.getX(),y:a.min.getY(),width:c,height:f,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow"})}#d(u,o){let a=o.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),o.add(this.#u(u,o)))}},RoiFactory:class{#e="roi";#t=new ws(this.#c);static supports(u){return u instanceof Bi}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){}getTimeout(){return 100}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(this.#s(u,o));let f=this.#t.create(u,o);a.add(this.#t.create(u,o));let m=this.#i(c);return a.add(this.#t.getConnector(m,f,o)),a}#n(u){let o=u.points(),a=u.x(),c=u.y(),f=[];for(let m=0;m<o.length;m+=2)f.push(new N(o[m]+a,o[m+1]+c));return f}#i(u){let o=u.points(),a=u.x(),c=u.y(),f=[];for(let m=0;m<o.length;m+=2){let y=(m+2)%o.length,S=(o[m]+o[y])/2+a,D=(o[m+1]+o[y+1])/2+c;f.push(new N(S,D))}return f}getAnchors(u,o){let a=this.#n(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#l(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=o.getParent();if(!(a instanceof pe().Group))return;let c=this.#a(a),f=u.mathShape.getPoints().slice(),m=new N(o.x()-c.x(),o.y()-c.y());f[d_(o.id())]=m,u.mathShape=new Bi(f),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=[];for(let f=0;f<a.getLength();++f)c.push(new N(a.getPoint(f).getX()+o.x,a.getPoint(f).getY()+o.y));u.mathShape=new Bi(c),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#i(o);this.#t.updateConnector(u,a)}#r(u){return new Bi(u)}#o(){return Uo.labelText.roi}#s(u,o){let a=u.mathShape,c=[];for(let f=0;f<a.getLength();++f)c.push(a.getPoint(f).getX()),c.push(a.getPoint(f).getY());return new(pe()).Line({points:c,stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape",closed:!0})}#a(u){return Xd(u)}#c(u){let o=u.mathShape;return new N(o.getPoint(0).getX(),o.getPoint(0).getY())}#l(u,o,a){let c=o.getParent();if(!(c instanceof pe().Group))return;let f=this.#a(c),m=f.points(),y=2*d_(o.id());m[y]=o.x()-f.x(),m[y+1]=o.y()-f.y(),f.points(m);let S=c.getChildren(function(D){return D.id()===o.id()})[0];S.x(o.x()),S.y(o.y())}#u(u,o){}#d(u,o){}},RulerFactory:class{#e="ruler";#t=new ws(this.#l);static supports(u){return u instanceof an}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,o){u.mathShape=this.#r(o),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,o){let a=new(pe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,o);a.add(this.#s(u,o));let f=this.#c(u,o);for(let S of f)a.add(S);let m=this.#t.create(u,o);a.add(this.#t.create(u,o));let y=this.#n(c);return a.add(this.#t.getConnector(y,m,o)),a}#n(u){let o=u.points(),a=u.x(),c=u.y(),f=(o[0]+o[2])/2+a,m=(o[1]+o[3])/2+c;return[new N(f,m)]}#i(u){let o=u.points(),a=u.x(),c=u.y();return[new N(o[0]+a,o[1]+c),new N(o[2]+a,o[3]+c)]}getAnchors(u,o){let a=this.#i(u),c=[];for(let f=0;f<a.length;++f)c.push(Ds(a[f].getX(),a[f].getY(),"anchor"+f,o));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,o,a){let c=o.getParent();c instanceof pe().Group&&(this.#u(u,o,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,o){let a=o.getParent();if(!(a instanceof pe().Group))return;let c=this.#a(a),f=Et(a,0),m=Et(a,1),y=new N(f.x()-c.x(),f.y()-c.y()),S=new N(m.x()-c.x(),m.y()-c.y());u.mathShape=new an(y,S),u.updateQuantification()}updateAnnotationOnTranslation(u,o){let a=u.mathShape,c=a.getBegin(),f=new N(c.getX()+o.x,c.getY()+o.y),m=a.getEnd(),y=new N(m.getX()+o.x,m.getY()+o.y);u.mathShape=new an(f,y),u.updateQuantification()}updateLabelContent(u,o,a){this.#t.updateContent(u,o)}updateConnector(u){let o=this.#a(u),a=this.#n(o);this.#t.updateConnector(u,a)}#r(u){return new an(u[0],u[1])}#o(){return Uo.labelText.ruler}#s(u,o){let a=u.mathShape,c=new(pe()).Line({points:[a.getBegin().getX(),a.getBegin().getY(),a.getEnd().getX(),a.getEnd().getY()],stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),f=Ki(a,a.getBegin(),20,o.getZoomScale()),m=Ki(a,a.getEnd(),20,o.getZoomScale());return c.hitFunc(function(y){y.beginPath(),y.moveTo(f.getBegin().getX(),f.getBegin().getY()),y.lineTo(f.getEnd().getX(),f.getEnd().getY()),y.lineTo(m.getEnd().getX(),m.getEnd().getY()),y.lineTo(m.getBegin().getX(),m.getBegin().getY()),y.closePath(),y.fillStrokeShape(c)}),c}#a(u){return Xd(u)}#c(u,o){let a=u.mathShape,c=Ki(a,a.getBegin(),20,o.getZoomScale()),f=new(pe()).Line({points:[c.getBegin().getX(),c.getBegin().getY(),c.getEnd().getX(),c.getEnd().getY()],stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick0"}),m=Ki(a,a.getEnd(),20,o.getZoomScale());return[f,new(pe()).Line({points:[m.getBegin().getX(),m.getBegin().getY(),m.getEnd().getX(),m.getEnd().getY()],stroke:u.colour,strokeWidth:o.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick1"})]}#l(u){let o=u.mathShape,a=o.getBegin(),c=o.getEnd(),f=a;return a.getY()<c.getY()&&(f=c),f}#u(u,o,a){let c=u.mathShape,f=o.getParent();if(!(f instanceof pe().Group))return;let m=this.#a(f);m.position({x:0,y:0}),m.points([c.getBegin().getX(),c.getBegin().getY(),c.getEnd().getX(),c.getEnd().getY()]);let y=f.getChildren(function(P){return P.name()==="shape-tick0"})[0];if(!(y instanceof pe().Line))return;let S=f.getChildren(function(P){return P.name()==="shape-tick1"})[0];if(!(S instanceof pe().Line))return;let D=Et(f,0),E=Et(f,1);switch(o.id()){case"anchor0":D.x(o.x()),D.y(o.y());break;case"anchor1":E.x(o.x()),E.y(o.y());break;default:p.error("Unhandled anchor id: "+o.id())}let I=Ki(c,c.getBegin(),20,a.getZoomScale());y.position({x:0,y:0}),y.points([I.getBegin().getX(),I.getBegin().getY(),I.getEnd().getX(),I.getEnd().getY()]);let R=Ki(c,c.getEnd(),20,a.getZoomScale());S.position({x:0,y:0}),S.points([R.getBegin().getX(),R.getBegin().getY(),R.getEnd().getX(),R.getEnd().getY()]),m.hitFunc(function(P){P.beginPath(),P.moveTo(I.getBegin().getX(),I.getBegin().getY()),P.lineTo(I.getEnd().getX(),I.getEnd().getY()),P.lineTo(R.getEnd().getX(),R.getEnd().getY()),P.lineTo(R.getBegin().getX(),R.getBegin().getY()),P.closePath(),P.fillStrokeShape(m)})}#d(u,o){}#f(u,o){}}},filter:{Threshold:class{#e;constructor(u){this.#e=u}#t=new QM;#n=!0;#i=new ri;activate(u){u&&(this.#n=!0)}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run threshod filter on.");if(this.#t.setMin(u.min),this.#t.setMax(u.max),this.#n){let a=this.#e.getData(u.dataId).image;this.#t.setOriginalImage(a),this.#n=!1}let o=new h0(this.#t,u.dataId,this.#e);o.onExecute=this.#r,o.onUndo=this.#r,o.execute(),this.#e.addToUndoStack(o)}addEventListener(u,o){this.#i.add(u,o)}removeEventListener(u,o){this.#i.remove(u,o)}#r=u=>{this.#i.fireEvent(u)}},Sobel:class{#e;constructor(u){this.#e=u}#t=new ri;activate(u){}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run sobel filter on.");let o=new $M,a=this.#e.getData(u.dataId).image;o.setOriginalImage(a);let c=new h0(o,u.dataId,this.#e);c.onExecute=this.#n,c.onUndo=this.#n,c.execute(),this.#e.addToUndoStack(c)}addEventListener(u,o){this.#t.add(u,o)}removeEventListener(u,o){this.#t.remove(u,o)}#n=u=>{this.#t.fireEvent(u)}},Sharpen:class{#e;constructor(u){this.#e=u}#t=new ri;activate(u){}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run sharpen filter on.");let o=new WM,a=this.#e.getData(u.dataId).image;o.setOriginalImage(a);let c=new h0(o,u.dataId,this.#e);c.onExecute=this.#n,c.onUndo=this.#n,c.execute(),this.#e.addToUndoStack(c)}addEventListener(u,o){this.#t.add(u,o)}removeEventListener(u,o){this.#t.remove(u,o)}#n=u=>{this.#t.fireEvent(u)}}}};class Is{id;referenceSopUID;mathShape;referencePoints;colour;quantification;textExpr;labelPosition;planeOrigin;planePoints;#e;getOrientationName(){let o;return this.planePoints!==void 0&&(o=Eb(this.planePoints[1].getValues().concat(this.planePoints[2].getValues()))),o}init(o){this.referenceSopUID===void 0?(this.#e=o,this.referenceSopUID=o.getCurrentImageUid(),this.planeOrigin=o.getOriginForImageUid(this.referenceSopUID),o.isAquisitionOrientation()||(this.planePoints=o.getPlanePoints(o.getCurrentPosition()))):p.debug("Cannot initialise annotation twice")}isCompatibleView(o){let a=!1;if(this.planePoints===void 0)o.isAquisitionOrientation()&&(a=!0);else{let c=o.getCosines(),f=new W(c[0],c[1],c[2]),m=new W(c[3],c[4],c[5]);f.equals(this.planePoints[1])&&m.equals(this.planePoints[2])&&(a=!0)}return a}setViewController(o){o.includesImageUid(this.referenceSopUID)&&this.isCompatibleView(o.getPlaneHelper())&&(this.#e=o,this.planeOrigin=o.getOriginForImageUid(this.referenceSopUID))}getCentroid(){let o;if(this.#e!==void 0&&this.mathShape.getCentroid!==void 0){let a=this.planeOrigin;this.planePoints!==void 0&&(a=this.planePoints[0]);let c=new de([a.getX(),a.getY(),a.getZ()]),f=this.#e.getIndexFromPosition(c),m=this.#e.getScrollIndex(),y=f.getValues()[m],S=this.mathShape.getCentroid();o=this.#e.getPositionFromPlanePoint(S,y)}return o}setTextExpr(o){if(this.#e!==void 0){let a=this.#e.getModality();o[a]!==void 0?this.textExpr=o[a]:this.textExpr=o["*"]}else p.warn("Cannot set text expr without a view controller")}getText(){return function(o,a){let c="";if(o==null||(c=o,a==null))return c;let f=ye(o);for(let m=0;m<f.length;++m){let y=a[f[m]];if(y!=null&&y.value!==null&&y.value!==void 0){let S=y.value.toPrecision(4);y.unit!==null&&y.unit!==void 0&&y.unit.length!==0&&(y.unit!=="unit.degree"&&(S+=" "),S+=Y.t(y.unit));let D="{"+f[m]+"}";c=c.replace(D,S)}}return c}(this.textExpr,this.quantification)}updateQuantification(){this.#e!==void 0&&this.mathShape.quantify!==void 0&&(this.quantification=this.mathShape.quantify(this.#e,ye(this.textExpr)))}getFactory(){let o;if(ec.draw!==void 0)for(let a in ec.draw){let c=ec.draw[a];if(c.supports(this.mathShape)){o=new c;break}}if(o===void 0)for(let a in f0.draw){let c=f0.draw[a];if(c.supports(this.mathShape)){o=new c;break}}return o===void 0&&p.warn("No shape factory found for math shape"),o}}let Ea=["mousedown","mousemove","mouseup","mouseout","wheel","dblclick","touchstart","touchmove","touchend"],f_={openRoiDialog(u,o){let a=prompt("Label",u.textExpr);a!==null&&(u.textExpr=a,o(u))}};function p_(u){let o=0,a=0;if(u.length!==0&&u[0].target!==void 0){let f=u[0].target.offsetParent;for(;f;)isNaN(f.offsetLeft)||(o+=f.offsetLeft),isNaN(f.offsetTop)||(a+=f.offsetTop),f=f.offsetParent}else p.debug("No touch target offset parent.");let c=[];for(let f=0;f<u.length;++f)c.push(new N(u[f].pageX-o,u[f].pageY-a));return c}function ui(u){let o=[];return u.targetTouches!==void 0&&u.targetTouches.length!==0?o=p_(u.targetTouches):u.changedTouches!==void 0&&u.changedTouches.length!==0&&(o=p_(u.changedTouches)),o}function Tn(u){return new N(u.offsetX,u.offsetY)}function m_(u,o){let a=document.createElement("canvas");a.width=u,a.height=o;let c=document.createElement("canvas");c.width=1,c.height=1;let f=a.getContext("2d"),m=c.getContext("2d");return f&&(f.fillRect(u-1,o-1,1,1),m.drawImage(a,u-1,o-1,1,1,0,0,1,1)),m&&m.getImageData(0,0,1,1).data[3]!==0}class oi{#e;#t=null;#n=null;#i=null;#r=null;#o=!0;#s=null;#a;#c;#l=1;#u={x:1,y:1};#d={x:1,y:1};#f={x:1,y:1,z:1};#h={x:0,y:0};#p={x:0,y:0};#m={x:0,y:0};#v={x:0,y:0};#y={x:0,y:0};#S=null;#b;#_=new ri;#g=!1;#D;#I;constructor(o){this.#e=o,this.#e.className+=" viewLayer"}getDataId(){return this.#b}getScale(){return this.#u}getAbsoluteZoomOffset(){return{x:this.#v.x*this.#d.x,y:this.#v.y*this.#d.y}}setImageSmoothing(o){this.#g=o}setView(o,a){this.#b=a,o.addEventListener("wlchange",this.#T),o.addEventListener("colourmapchange",this.#x),o.addEventListener("positionchange",this.#A),o.addEventListener("alphafuncchange",this.#M);for(let c=0;c<wa.length;++c)o.addEventListener(wa[c],this.#C);this.#t=new o_(o),this.bindImage()}getViewController(){return this.#t}getImageData(){return this.#s}onimageset=o=>{this.#b===o.dataid&&(this.#t.setImage(o.value[0]),this.#w(this.#t.getImageSize().get2D()),this.#S=!0)};bindImage(){this.#t&&this.#t.bindImageAndLayer(this)}unbindImage(){this.#t&&this.#t.unbindImageAndLayer(this)}onimagecontentchange=o=>{this.#b===o.dataid&&(this.#o=this.#t.isPositionInBounds(),this.#S=!0,this.draw())};onimagegeometrychange=o=>{if(this.#b===o.dataid){let a=this.#t.getImageSize().get2D();if(this.#a.x!==a.x||this.#a.y!==a.y){if(this.#D!==void 0&&this.#I!==void 0){let c=this.#t.getOrigin(),f=this.#I.minus(c),m=this.#t.getOrigin(this.#t.getCurrentPosition()),y=this.#D.minus(m);this.setBaseOffset(f,y)}this.#w(a),this.#S=!0,this.draw()}}};getId(){return this.#e.id}removeFromDOM(){this.#e.remove()}getBaseSize(){return this.#a}getImageWorldSize(){return this.#t.getImageWorldSize()}getOpacity(){return this.#l}setOpacity(o){if(o===this.#l)return;this.#l=Math.min(Math.max(o,0),1);let a={type:"opacitychange",value:[this.#l]};this.#C(a)}addFlipOffsetX(){this.#y.x+=this.#n.width/this.#u.x,this.#h.x+=this.#y.x}addFlipOffsetY(){this.#y.y+=this.#n.height/this.#u.y,this.#h.y+=this.#y.y}flipScaleX(){this.#f.x*=-1}flipScaleY(){this.#f.y*=-1}flipScaleZ(){this.#f.z*=-1}setScale(o,a){let c=this.#t.getPlaneHelper(),f=c.getTargetOrientedPositiveXYZ({x:o.x*this.#f.x,y:o.y*this.#f.y,z:o.z*this.#f.z}),m={x:this.#d.x*f.x,y:this.#d.y*f.y};if(Math.abs(o.x)===1&&Math.abs(o.y)===1&&Math.abs(o.z)===1){let y={x:this.#h.x-this.#v.x,y:this.#h.y-this.#v.y};this.#v={x:0,y:0},this.#h=y}else if(a!==void 0){let y=c.getPlaneOffsetFromOffset3D({x:a.getX(),y:a.getY(),z:a.getZ()});y={x:y.x+this.#p.x,y:y.y+this.#p.y};let S=g_(this.#h,this.#u,m,y),D={x:this.#v.x+S.x-this.#h.x,y:this.#v.y+S.y-this.#h.y};this.#v=D,this.#h=S}this.#u=m}initScale(o,a){let c=this.#t.getPlaneHelper().getTargetOrientedPositiveXYZ({x:o.x*this.#f.x,y:o.y*this.#f.y,z:o.z*this.#f.z}),f={x:this.#d.x*c.x,y:this.#d.y*c.y};this.#u=f,this.#v={x:a.x/this.#d.x,y:a.y/this.#d.y},this.#h={x:this.#h.x+this.#v.x,y:this.#h.y+this.#v.y}}setBaseOffset(o,a,c,f){let m=this.#t.getPlaneHelper(),y=m.getNativeScrollIndex(),S=m.getPlaneOffsetFromOffset3D({x:y===0?o.getX():a.getX(),y:y===1?o.getY():a.getY(),z:y===2?o.getZ():a.getZ()}),D=this.#p.x!==S.x||this.#p.y!==S.y;return c!==void 0&&f!==void 0&&(this.#D=c,this.#I=f),D&&(this.#h={x:this.#h.x-this.#p.x+S.x,y:this.#h.y-this.#p.y+S.y},this.#p=S),D}setOffset(o){let a=this.#t.getPlaneHelper().getPlaneOffsetFromOffset3D(o);this.#h={x:a.x+this.#m.x+this.#p.x+this.#v.x+this.#y.x,y:a.y+this.#m.y+this.#p.y+this.#v.y+this.#y.y}}displayToPlaneIndex(o){let a=this.displayToPlanePos(o);return new d([Math.floor(a.getX()),Math.floor(a.getY())])}displayToPlaneScale(o){return new N(o.getX()/this.#u.x,o.getY()/this.#u.y)}displayToPlanePos(o){let a=this.displayToPlaneScale(o);return new N(a.getX()+this.#h.x,a.getY()+this.#h.y)}planePosToDisplay(o){let a=(o.getX()-this.#h.x+this.#p.x)*this.#u.x,c=(o.getY()-this.#h.y+this.#p.y)*this.#u.y;return(a<0||a>=this.#n.width)&&(a=void 0),(c<0||c>=this.#n.height)&&(c=void 0),new N(a,c)}displayToMainPlanePos(o){let a=this.displayToPlanePos(o);return new N(a.getX()-this.#p.x,a.getY()-this.#p.y)}display(o){this.#e.style.display=o?"":"none"}isVisible(){return this.#e.style.display===""}draw(){if(!this.#o)return;let o={type:"renderstart",layerid:this.getId(),dataid:this.getDataId()};this.#C(o),this.#S&&this.#E(),this.#r.globalAlpha=this.#l,this.clear(),this.#r.setTransform(this.#u.x,0,0,this.#u.y,-1*this.#h.x*this.#u.x,-1*this.#h.y*this.#u.y),this.#r.imageSmoothingEnabled=this.#g,this.#r.drawImage(this.#i,0,0),o={type:"renderend",layerid:this.getId(),dataid:this.getDataId()},this.#C(o)}initialise(o,a,c){this.#c=a,this.#l=Math.min(Math.max(c,0),1),this.#n=document.createElement("canvas"),this.#e.appendChild(this.#n),this.#n.getContext?(this.#r=this.#n.getContext("2d"),this.#r?(this.#i=document.createElement("canvas"),this.#w(o),this.#S=!0):alert("Error: failed to get the 2D context.")):alert("Error: no canvas.getContext method.")}#w(o){if(!m_(o.x,o.y))throw new Error("Cannot create canvas with size "+o.x+", "+o.y);this.#a=o,this.#i.width=this.#a.x,this.#i.height=this.#a.y,this.#r.clearRect(0,0,this.#a.x,this.#a.y),this.#s=this.#r.createImageData(this.#a.x,this.#a.y)}fitToContainer(o,a,c){let f=!1;if(this.#n.width!==o.x||this.#n.height!==o.y){if(!m_(o.x,o.y))throw new Error("Cannot resize canvas "+o.x+", "+o.y);this.#n.width=o.x,this.#n.height=o.y,f=!0}let m={x:a*this.#c.x,y:a*this.#c.y},y={x:this.#u.x*m.x/this.#d.x,y:this.#u.y*m.y/this.#d.y};this.#u.x===y.x&&this.#u.y===y.y||(this.#d=m,this.#u=y,f=!0);let S={x:c.x/m.x,y:c.y/m.y},D={x:o.x/m.x,y:o.y/m.y},E={x:this.#y.x!==0?D.x:0,y:this.#y.y!==0?D.y:0};this.#m.x===S.x&&this.#m.y===S.y&&this.#y.x===E.x&&this.#y.y===E.y||(this.#h={x:this.#h.x+S.x-this.#m.x+E.x-this.#y.x,y:this.#h.y+S.y-this.#m.y+E.y-this.#y.y},this.#y=E,this.#m=S,f=!0),f&&this.draw()}bindInteraction(){this.#e.style.pointerEvents="auto";let o=Ea;for(let a=0;a<o.length;++a){let c=o[a],f=c!=="wheel";this.#e.addEventListener(c,this.#C,{passive:f})}}unbindInteraction(){this.#e.style.pointerEvents="none";let o=Ea;for(let a=0;a<o.length;++a)this.#e.removeEventListener(o[a],this.#C)}addEventListener(o,a){this.#_.add(o,a)}removeEventListener(o,a){this.#_.remove(o,a)}#C=o=>{o.srclayerid=this.getId(),o.dataid=this.#b,this.#_.fireEvent(o)};#E(){this.#t.generateImageData(this.#s),this.#i.getContext("2d").putImageData(this.#s,0,0),this.#S=!1}#T=o=>{o.skipGenerate!==void 0&&o.skipGenerate===!0||(this.#S=!0,this.draw())};#x=o=>{o.skipGenerate!==void 0&&o.skipGenerate===!0||(this.#S=!0,this.draw())};#A=o=>{if(o.skipGenerate===void 0||o.skipGenerate!==!0){let a=!0;if(o.valid!==void 0&&(a=o.valid),a){let c=[0,1,2],f=c.indexOf(this.#t.getScrollIndex());c.splice(f,1),o.diffDims.filter(function(m){return c.indexOf(m)===-1}).length===0&&this.#o||(this.#o=!0,this.#S=!0,this.draw())}else this.#o&&(this.#o=!1,this.clear())}};#M=o=>{o.skipGenerate!==void 0&&o.skipGenerate===!0||(this.#S=!0,this.draw())};setCurrentPosition(o,a){return this.#t.setCurrentPosition(o)}clear(){this.#r.save(),this.#r.setTransform(1,0,0,1,0,0),this.#r.clearRect(0,0,this.#n.width,this.#n.height),this.#r.restore()}}function Jd(u){let o=u.split("-layer-");return o.length!==2&&p.warn("Not the expected layer div id format..."),{groupDivId:o[0],layerIndex:o[1],layerId:u}}function Lt(u){let o=null,a=u.target.closest(".layer");return a&&a.id!==void 0&&(o=Jd(a.id)),o}function g_(u,o,a,c){let f=(c.x-u.x)*o.x,m=(c.y-u.y)*o.y;return{x:c.x-f/a.x,y:c.y-m/a.y}}class v_{#e;#t=[];#n={x:1,y:1,z:1};#i={x:1,y:1,z:1};#r={x:0,y:0,z:0};#o=void 0;#s=void 0;#a=new ri;#c=!1;#l=[];#u;#d;#f=!1;constructor(o){this.#e=o}getShowCrosshair(){return this.#c}setShowCrosshair(o){this.#c=o,o?(this.addEventListener("offsetchange",this.#h),this.addEventListener("zoomchange",this.#h),this.#b()):(this.removeEventListener("offsetchange",this.#h),this.removeEventListener("zoomchange",this.#h),this.#_())}setImageSmoothing(o){this.#f=o;for(let a of this.#t)a instanceof oi&&a.setImageSmoothing(o)}#h=o=>{this.#b()};getDivId(){return this.#e.id}getScale(){return this.#n}getBaseScale(){return this.#i}getAddedScale(){return{x:this.#n.x/this.#i.x,y:this.#n.y/this.#i.y,z:this.#n.z/this.#i.z}}getOffset(){return this.#r}getNumberOfLayers(){let o=0;return this.#t.forEach(a=>{a!==void 0&&o++}),o}includes(o){if(o===void 0)return!1;for(let a of this.#t)if(a!==void 0&&a.getId()===o)return!0;return!1}getViewLayers(o){o===void 0&&(o=function(){return!0});let a=[];for(let c of this.#t)c instanceof oi&&o(c)&&a.push(c);return a}someViewLayer(o){let a=!1;for(let c of this.#t)if(c instanceof oi&&o(c)){a=!0;break}return a}getDrawLayers(o){o===void 0&&(o=function(){return!0});let a=[];for(let c of this.#t)c instanceof Ia&&o(c)&&a.push(c);return a}getNumberOfViewLayers(){let o=0;return this.#t.forEach(a=>{a!==void 0&&a instanceof oi&&o++}),o}getActiveViewLayer(){let o;if(this.#o!==void 0){let a=this.#t[this.#o];a instanceof oi&&(o=a)}return o}getBaseViewLayer(){let o;for(let a of this.#t)if(a instanceof oi){o=a;break}if(o!==void 0)return o;p.warn("No layer found")}getViewLayersByDataId(o){return this.getViewLayers(function(a){return a.getDataId()===o})}searchViewLayers(o){let a=[];for(let c of this.#t)c instanceof oi&&c.getViewController().equalImageMeta(o)&&a.push(c);return a}getViewDataIndices(){let o=[];for(let a of this.#t)a instanceof oi&&o.push(a.getDataId());return o}getActiveDrawLayer(){let o;if(this.#s!==void 0){let a=this.#t[this.#s];a instanceof Ia&&(o=a)}return o}getDrawLayersByDataId(o){return this.getDrawLayers(function(a){return a.getDataId()===o})}setActiveViewLayer(o){this.#t[o]instanceof oi?(this.#o=o,this.#g({type:"activelayerchange",value:[this.#t[o]]})):p.warn("No view layer to set as active with index: "+o)}setActiveViewLayerByDataId(o){let a;for(let c=0;c<this.#t.length;++c)if(this.#t[c]instanceof oi&&this.#t[c].getDataId()===o){a=c;break}a!==void 0?this.setActiveViewLayer(a):p.warn("No view layer to set as active with dataId: "+o)}setActiveDrawLayer(o){this.#s=o,this.#g({type:"activelayerchange",value:[this.#t[o]]})}setActiveDrawLayerByDataId(o){let a;for(let c=0;c<this.#t.length;++c)if(this.#t[c]instanceof Ia&&this.#t[c].getDataId()===o){a=c;break}a!==void 0?this.setActiveDrawLayer(a):p.warn("No draw layer to set as active with dataId: "+o)}addViewLayer(){let o=this.#t.length,a=this.#S();this.#e.append(a);let c=new oi(a);return c.setImageSmoothing(this.#f),this.#t.push(c),this.setActiveViewLayer(o),this.#p(c),c}addDrawLayer(){this.#s=this.#t.length;let o=this.#S();this.#e.append(o);let a=new Ia(o);return this.#t.push(a),this.#v(a),a}#p(o){o.addEventListener("positionchange",this.updateLayersToPositionChange);for(let a of wa)o.addEventListener(a,this.#g);o.addEventListener("renderstart",this.#g),o.addEventListener("renderend",this.#g)}#m(o){o.removeEventListener("positionchange",this.updateLayersToPositionChange);for(let a of wa)o.removeEventListener(a,this.#g);o.removeEventListener("renderstart",this.#g),o.removeEventListener("renderend",this.#g),o.unbindImage()}#v(o){o.addEventListener("positionchange",this.updateLayersToPositionChange),o.addEventListener("positionchange",this.#g),o.addEventListener("drawcreate",this.#g),o.addEventListener("drawdelete",this.#g)}#y(o){o.removeEventListener("positionchange",this.updateLayersToPositionChange),o.removeEventListener("positionchange",this.#g),o.removeEventListener("drawcreate",this.#g),o.removeEventListener("drawdelete",this.#g)}#S(){let o=document.createElement("div");return o.id=this.getDivId()+"-layer-"+this.#t.length,o.className="layer",o.style.pointerEvents="none",o}empty(){this.#t=[],this.#o=void 0,this.#s=void 0,this.#_();let o=this.#e.getElementsByClassName("layer");if(o)for(;o.length>0;)o[0].remove()}removeLayersByDataId(o){for(let a of this.#t)a!==void 0&&a.getDataId()===o&&this.removeLayer(a)}removeLayer(o){let a=this.#t.findIndex(c=>c===o);if(a===-1)throw new Error("Cannot find layer to remove");o instanceof oi?(this.#m(o),this.#o===a&&(this.#o=void 0)):(this.#y(o),this.#s===a&&(this.#s=void 0)),this.#t[a]=void 0,o.removeFromDOM()}#b(o){let a;o===void 0&&(o=this.#d),this.#_();for(let m of this.#t)if(m instanceof oi){a=m;break}if(a===void 0)return void p.warn("No layer to show crosshair");let c=a.getViewController().getPlanePositionFromPosition(o),f=a.planePosToDisplay(c);if(f.getY()!==void 0){let m=document.createElement("hr");m.id=this.getDivId()+"-scroll-crosshair-horizontal",m.className="horizontal",m.style.width=this.#e.offsetWidth+"px",m.style.left="0px",m.style.top=f.getY()+"px",this.#l.push(m),this.#e.appendChild(m)}if(f.getX()!==void 0){let m=document.createElement("hr");m.id=this.getDivId()+"-scroll-crosshair-vertical",m.className="vertical",m.style.width=this.#e.offsetHeight+"px",m.style.left=f.getX()+"px",m.style.top="0px",this.#l.push(m),this.#e.appendChild(m)}}#_(){for(let o of this.#l)o.remove();this.#l=[]}showTooltip(o){this.removeTooltipDiv();let a=this.getActiveViewLayer(),c=a.getViewController(),f=a.displayToPlanePos(o),m=c.getPositionFromPlanePoint(f),y=c.getRescaledImageValue(m);if(y!==void 0){let S=document.createElement("span");S.id="scroll-tooltip",S.style.left=o.getX()+10+"px",S.style.top=o.getY()+10+"px";let D=un(y,3).toString();c.getPixelUnit()!==void 0&&(D+=" "+c.getPixelUnit()),S.appendChild(document.createTextNode(D)),this.#u=S,this.#e.appendChild(S)}}removeTooltipDiv(){this.#u!==void 0&&(this.#u.remove(),this.#u=void 0)}isPositionInBounds(o){return this.someViewLayer(function(a){return a.getViewController().isPositionInBounds(o)})}canScroll(){return this.someViewLayer(function(o){return o.getViewController().canScroll()})}moreThanOne(o){return this.someViewLayer(function(a){return a.getViewController().moreThanOne(o)})}updateLayersToPositionChange=o=>{for(let S of this.#t)S!==void 0&&(S.removeEventListener("positionchange",this.updateLayersToPositionChange),S.removeEventListener("positionchange",this.#g));let a=new d(o.value[0]),c=new de(o.value[1]);this.#d=c,this.#c&&this.#b(c);let f={},m,y;for(let S of this.#t){if(S===void 0)continue;let D=!1;if(S instanceof oi){let I=S.getViewController(),R=I.getOrigin(),P=I.getOrigin(c),B,z;if(y===void 0)m=R,y=P,B=new O(0,0,0),z=new O(0,0,0);else if(I.isPositionInBounds(c)&&P!==void 0){let J=m.minus(R);B=new O(J.getX(),J.getY(),J.getZ());let te=y.minus(P);z=new O(te.getX(),te.getY(),te.getZ())}B!==void 0&&z!==void 0&&(D=S.setBaseOffset(B,z,y,m),f[S.getId()]={scroll:B,plane:z})}if(S instanceof Ia){let I=f[S.getReferenceLayerId()];I!==void 0&&(D=S.setBaseOffset(I.scroll,I.plane))}let E=!1;S.getId()!==o.srclayerid&&(E=S.setCurrentPosition(c,a)),!E&&D&&S.draw()}for(let S of this.#t)S!==void 0&&(S.addEventListener("positionchange",this.updateLayersToPositionChange),S.addEventListener("positionchange",this.#g))};getDivToWorldSizeRatio(){if(this.#e.offsetWidth===0&&this.#e.offsetHeight===0)throw new Error("Cannot fit to zero sized container.");let o=this.getMaxWorldSize();if(o!==void 0){if(this.#e.offsetHeight===0){let a=this.#e.offsetWidth/o.x,c=o.y*a;this.#e.style.height=c+"px"}return Math.min(this.#e.offsetWidth/o.x,this.#e.offsetHeight/o.y)}}fitToContainer(o){let a=this.getMaxWorldSize();if(a===void 0)return;let c={x:this.#e.offsetWidth,y:this.#e.offsetHeight},f={x:-.5*(c.x-Math.floor(a.x*o)),y:-.5*(c.y-Math.floor(a.y*o))};for(let m of this.#t)m!==void 0&&m.fitToContainer(c,o,f);this.#c&&this.#b()}getMaxWorldSize(){let o={x:0,y:0};for(let a of this.#t)if(a instanceof oi){let c=a.getImageWorldSize();c.x>o.x&&(o.x=c.x),c.y>o.y&&(o.y=c.y)}return o.x===0&&o.y===0&&(o=void 0),o}flipScaleZ(){this.#i.z*=-1,this.setScale(this.#i)}addScale(o,a){let c={x:this.#n.x*(1+o),y:this.#n.y*(1+o),z:this.#n.z*(1+o)};this.setScale(c,a)}setScale(o,a){this.#n=o;for(let f of this.#t)f!==void 0&&f.setScale(this.#n,a);let c=[o.x,o.y,o.z];a!==void 0&&(c.push(a.getX()),c.push(a.getY()),c.push(a.getZ())),this.#g({type:"zoomchange",value:c})}addTranslation(o){this.setOffset({x:this.#r.x-o.x,y:this.#r.y-o.y,z:this.#r.z-o.z})}setOffset(o){this.#r=o;for(let a of this.#t)a!==void 0&&a.setOffset(this.#r);this.#g({type:"offsetchange",value:[this.#r.x,this.#r.y,this.#r.z]})}reset(){this.setScale(this.#i),this.setOffset({x:0,y:0,z:0})}draw(){for(let o of this.#t)o!==void 0&&o.draw()}display(o){for(let a of this.#t)a!==void 0&&a.display(o)}addEventListener(o,a){this.#a.add(o,a)}removeEventListener(o,a){this.#a.remove(o,a)}#g=o=>{this.#a.fireEvent(o)}}let y_={WindowLevelBinder:class{getEventType=function(){return"wlchange"};getCallback=function(u){return function(o){let a=u.getViewLayersByDataId(o.dataid);if(a.length!==0){let c=a[0].getViewController();if(o.value.length===2){let f=new g(o.value[0],o.value[1]);c.setWindowLevel(f)}o.value.length===3&&c.setWindowLevelPreset(o.value[2])}}}},PositionBinder:class{getEventType=function(){return"positionchange"};getCallback=function(u){return function(o){let a=o.value[1],c=u.getActiveViewLayer().getViewController(),f=c.getCurrentPosition(),m=f.length(),y=a.length;y!==m&&(y===m-1?a.push(f.get(m-1)):y===m+1&&a.pop()),c.setCurrentPosition(new de(a))}}},ZoomBinder:class{getEventType=function(){return"zoomchange"};getCallback=function(u){return function(o){let a={x:o.value[0],y:o.value[1],z:o.value[2]},c;o.value.length===6&&(c=new W(o.value[3],o.value[4],o.value[5])),u.setScale(a,c),u.draw()}}},OffsetBinder:class{getEventType=function(){return"offsetchange"};getCallback=function(u){return function(o){u.setOffset({x:o.value[0],y:o.value[1],z:o.value[2]}),u.draw()}}},OpacityBinder:class{getEventType=function(){return"opacitychange"};getCallback=function(u){return function(o){if(o.dataid===void 0)return;let a=u.getViewLayersByDataId(o.dataid),c=u.getBaseViewLayer();a.length!==0&&c!==a[0]&&(a[0].setOpacity(o.value),a[0].draw())}}},ColourMapBinder:class{getEventType=function(){return"colourmapchange"};getCallback=function(u){return function(o){let a=u.getViewLayersByDataId(o.dataid);a.length!==0&&a[0].getViewController().setColourMap(o.value[0])}}}};class XM{#e=[];#t;#n=!1;#i=[];#r=null;getLayerGroup(o){return this.#e[o]}getNumberOfLayerGroups(){return this.#e.length}getActiveLayerGroup(){return this.getLayerGroup(this.#t)}setActiveLayerGroup(o){this.getLayerGroup(o)!==void 0?this.#t=o:p.warn("No layer group to set as active with index: "+o)}getViewLayersByDataId(o){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getViewLayersByDataId(o));return a}getViewLayers(o){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getViewLayers(o));return a}getDrawLayersByDataId(o){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getDrawLayersByDataId(o));return a}getDrawLayers(o){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getDrawLayers(o));return a}addLayerGroup(o){this.#t=this.#e.length;let a=new v_(o);a.setImageSmoothing(this.#n);let c=this.#r&&this.#r.length!==0;return c&&this.unbindLayerGroups(),this.#e.push(a),c&&this.bindLayerGroups(),a}getLayerGroupByDivId(o){return this.#e.find(function(a){return a.getDivId()===o})}setBinders(o){if(o==null)throw new Error("Cannot set null or undefined binders");this.#i.length!==0&&this.unbindLayerGroups(),this.#i=o.slice(),this.bindLayerGroups()}empty(){this.unbindLayerGroups();for(let o=0;o<this.#e.length;++o)this.#e[o].empty();this.#e=[],this.#t=void 0}removeLayersByDataId(o){for(let a of this.#e)a.removeLayersByDataId(o)}removeLayerGroup(o){let a=this.#e.findIndex(c=>c===o);if(a===-1)throw new Error("Cannot find layerGroup to remove");this.unbindLayerGroups(),o.empty(),this.#e.splice(a,1),this.#t===a&&(this.#t=void 0),this.bindLayerGroups()}reset(){for(let o=0;o<this.#e.length;++o)this.#e[o].reset()}draw(){for(let o=0;o<this.#e.length;++o)this.#e[o].draw()}fitToContainer(){let o,a=[];for(let c=0;c<this.#e.length;++c){let f=this.#e[c].getDivToWorldSizeRatio();f!==void 0&&(a.push(c),(o===void 0||f<o)&&(o=f))}if(o!==void 0)for(let c=0;c<this.#e.length;++c)a.includes(c)&&this.#e[c].fitToContainer(o)}bindLayerGroups(){if(this.#e.length!==0&&this.#e.length!==1&&this.#i.length!==0){this.#r=new Array(this.#e.length);for(let o=0;o<this.#e.length;++o)for(let a=0;a<this.#i.length;++a)this.#s(o,this.#i[a])}}unbindLayerGroups(){if(this.#e.length!==0&&this.#e.length!==1&&this.#i.length!==0&&this.#r){for(let o=0;o<this.#e.length;++o)for(let a=0;a<this.#i.length;++a)this.#a(o,this.#i[a]);this.#r=null}}setImageSmoothing(o){this.#n=o;for(let a=0;a<this.#e.length;++a)this.#e[a].setImageSmoothing(o)}#o(o,a){this.#r[a]===void 0&&(this.#r[a]=[]);let c=this.#r[a].find(function(f){return f.binder===o});return c===void 0&&(c={binder:o,callback:f=>{this.#a(a,o),o.getCallback(this.#e[a])(f),this.#s(a,o)}},this.#r[a].push(c)),c.callback}#s(o,a){for(let c=0;c<this.#e.length;++c)c!==o&&this.#e[o].addEventListener(a.getEventType(),this.#o(a,c))}#a(o,a){for(let c=0;c<this.#e.length;++c)c!==o&&this.#e[o].removeEventListener(a.getEventType(),this.#o(a,c))}}class ZM{#e;constructor(o){this.#e=o}fromJSON(o){let a=JSON.parse(o),c=null;if(a.version==="0.1")c=this.#t(a);else if(a.version==="0.2")c=this.#n(a);else if(a.version==="0.3")c=this.#i(a);else if(a.version==="0.4")c=this.#r(a);else{if(a.version!=="0.5")throw new Error("Unknown state file format version: '"+a.version+"'.");c=this.#o(a)}return c}apply(o,a){let c=o.getActiveLayerGroup().getActiveViewLayer().getViewController(),f=new g(a["window-center"],a["window-width"]);c.setWindowLevel(f),c.setCurrentIndex(new d(a.position));let m=o.getActiveLayerGroup().getBaseScale(),y=null,S=null;if(a.scaleCenter!==void 0){y={x:a.scale*m.x,y:a.scale*m.y,z:1};let D=a.scaleCenter.x-a.scaleCenter.x*a.scale,E=a.scaleCenter.y-a.scaleCenter.y*a.scale,I=D+a.translation.x*y.x,R=E+a.translation.y*y.y;S={x:-I/y.x,y:-R/y.y,z:0}}else y={x:a.scale.x*m.x,y:a.scale.y*m.y,z:m.z},S={x:a.offset.x,y:a.offset.y,z:0};o.getActiveLayerGroup().setScale(y),o.getActiveLayerGroup().setOffset(S),o.setDrawings(a.drawings,a.drawingsDetails,this.#e)}#t(o){let a=function(c){let f=[],m={},y,S;for(let D=0,E=c.length;D<E;++D){f[D]=[];for(let I=0,R=c[D].length;I<R;++I){y=c[D][I];let P=[];for(let B=0,z=y.length;B<z;++B){S=pe().Node.create(y[B]),S.visible(!0);let J={x:0,y:0},te=S.getChildren(function(Ae){return Ae.name()==="shape"})[0];if(te.stroke(ne(te.stroke())),S.name()==="line-group"){S.name("ruler-group");let Ae=new(pe()).Line({points:[te.points()[0],te.points()[1],te.points()[0],te.points()[1]],name:"shape-tick0"});S.add(Ae);let Ne=new(pe()).Line({points:[te.points()[2],te.points()[3],te.points()[2],te.points()[3]],name:"shape-tick1"});S.add(Ne)}let ve=S.getChildren(function(Ae){return Ae.name()==="arc"});ve.length===1&&ve[0].name("shape-arc");let ie=S.getChildren(function(Ae){return Ae.name()==="text"}),se=new(pe()).Text({name:"text",text:""});ie.length===1?(J.x=ie[0].x(),J.y=ie[0].y(),ie[0].remove(),se=ie[0]):te.points().length!==0&&(J={x:te.points()[0],y:te.points()[1]});let ae=new(pe()).Label({x:J.x,y:J.y,name:"label"});ae.add(se),ae.add(new(pe()).Tag),S.add(ae),P.push(JSON.stringify(S.toObject()));let re=se.text(),Ce=re.length,we=null;S.name()==="ruler-group"?(we={length:{value:parseFloat(re.substring(0,Ce-2)),unit:re.substring(-2)}},re="{length}"):S.name()==="ellipse-group"||S.name()==="rectangle-group"?(we={surface:{value:parseFloat(re.substring(0,Ce-3)),unit:re.substring(-3)}},re="{surface}"):S.name()!=="protractor-group"&&S.name()!=="rectangle-group"||(we={angle:{value:parseFloat(re.substring(0,Ce-1)),unit:re.substring(-1)}},re="{angle}"),m[S.id()]={textExpr:re,longText:"",quant:we}}f[D].push(P)}}return{drawings:f,drawingsDetails:m}}(o.drawings);return o.drawings=S_(a.drawings).toObject(),o.drawingsDetails=p0(a.drawingsDetails),(o=eu(o)).drawings=tu(o.drawings),o}#n(o){return o.drawings=S_(o.drawings).toObject(),o.drawingsDetails=p0(function(a){let c={},f=typeof a=="string"?JSON.parse(a):a;for(let m=0,y=f.length;m<y;++m)for(let S=0,D=f[m].length;S<D;++S)for(let E=0,I=f[m][S].length;E<I;++E){let R=f[m][S][E];c[R.id]={textExpr:R.textExpr,longText:R.longText,quant:R.quant}}return c}(o.drawingsDetails)),(o=eu(o)).drawings=tu(o.drawings),o}#i(o){return o.drawingsDetails=p0(o.drawingsDetails),(o=eu(o)).drawings=tu(o.drawings),o}#r(o){return(o=eu(o)).drawings=tu(o.drawings),o}#o(o){return o}}function S_(u){let o,a,c,f=new(pe()).Layer({listening:!1,visible:!0}),m=typeof u=="string"?JSON.parse(u):u;for(let S=0,D=m.length;S<D;++S)for(let E=0,I=m[S].length;E<I;++E)if(a=m[S][E],a.length!==0){c=new(pe()).Group({id:(y=new d([1,1,S,E]),"slice-"+y.get(2)+"_frame-"+(y.length()===4?y.get(3):0)),name:"position-group",visible:!1});for(let R=0,P=a.length;R<P;++R)o=pe().Node.create(a[R]),o.draggable(!0),o.getChildren().forEach(function(B){B.draggable(!1)}),c.add(o);f.add(c)}var y;return f}function p0(u){let o={},a=Object.keys(u);for(let c=0,f=a.length;c<f;++c){let m=u[a[c]];o[a[c]]={meta:{textExpr:m.textExpr,longText:m.longText,quantification:m.quant}}}return o}function eu(u){let o=u.position;return u.position=[o.i,o.j,o.k],u}function tu(u){let o=u.children;for(let a=0,c=o.length;a<c;++a){let f=o[a],m=f.attrs.id.split("_"),y=parseInt(m[0].substring(6),10),S=parseInt(m[1].substring(6),10),D="#2-";D+=y===0&&S!==0?S:y,f.attrs.id=D}return u}function tc(u){let o;return window.location.origin!=="null"&&(o=window.location.origin),new URL(u,o)}function b_(u){let o={},a=null;if(u&&(a=u.indexOf("?"))!==-1){o.base=u.substring(0,a);let c=u.indexOf("#");c===-1&&(c=u.length);let f=u.substring(a+1,c);o.query=function(m){let y={};if(m){let S=m.split("&");for(let D=0;D<S.length;++D){let E=S[D].split("=");y[E[0]]?(y[E[0]]instanceof Array||(y[E[0]]=[y[E[0]]]),y[E[0]].push(E[1])):y[E[0]]=E[1]}}return y}(f)}return o}class __{#e=[];#t=0;#n=new ri;getStackSize(){return this.#e.length}getCurrentStackIndex(){return this.#t}add(o){this.#e=this.#e.slice(0,this.#t),this.#e.push(o),++this.#t,this.#i({type:"undoadd",command:o.getName()})}remove(o){let a=!1,c=this.#e.findIndex(function(f){return f.getName()===o});return c!==-1&&(this.#e.splice(c,1),--this.#t,a=!0,this.#i({type:"undoremove",command:o})),a}undo(){this.#t>0&&(--this.#t,this.#e[this.#t].undo(),this.#i({type:"undo",command:this.#e[this.#t].getName()}))}redo(){this.#t<this.#e.length&&(this.#e[this.#t].execute(),this.#i({type:"redo",command:this.#e[this.#t].getName()}),++this.#t)}addEventListener(o,a){this.#n.add(o,a)}removeEventListener(o,a){this.#n.remove(o,a)}#i=o=>{this.#n.fireEvent(o)}}class D_{#e;#t=null;#n=[];#i={};constructor(o){this.#e=o}init(){for(let o in this.#e)this.#e[o].init();this.enableShortcuts(!0)}enableShortcuts(o){o?window.addEventListener("keydown",this.#c("window","keydown"),!0):window.removeEventListener("keydown",this.#c("window","keydown"),!0)}getToolList(){return this.#e}hasTool(o){return this.getToolList()[o]!==void 0}getSelectedTool(){return this.#t}getSelectedToolEventHandler(o){return this.getSelectedTool()[o]}setSelectedTool(o){if(!this.hasTool(o))throw new Error("Unknown tool: '"+o+"'");this.#t&&this.#t.activate(!1),this.#t=this.#e[o],this.#t.activate(!0)}setToolFeatures(o){this.getSelectedTool()&&this.getSelectedTool().setFeatures(o)}bindLayerGroup(o,a){let c=o.getDivId();o.addEventListener("activelayerchange",this.#o(c)),this.#r(c,a)}#r(o,a){this.#i[o]!==void 0&&this.#a(this.#i[o]),this.#i[o]=a,this.#s(a)}#o(o){return a=>{let c=a.value[0];c!==void 0&&this.#r(o,c)}}#s(o){o.bindInteraction();let a=Ea;for(let c=0;c<a.length;++c)o.addEventListener(a[c],this.#c(o.getId(),a[c]))}#a(o){o.unbindInteraction();let a=Ea;for(let c=0;c<a.length;++c)o.removeEventListener(a[c],this.#c(o.getId(),a[c]))}#c(o,a){if(this.#n[o]===void 0&&(this.#n[o]=[]),this.#n[o][a]===void 0){let c=f=>{if(this.#t){let m=this.#t[f.type];m&&m(f)}};this.#n[o][a]=c}return this.#n[o][a]}}class m0{#e=[];#t=2;#n;constructor(o){this.#n=o}setNumberOfDimensions(o){this.#t=o}setNToLoad(o){for(let a=0;a<o;++a){this.#e[a]=[];for(let c=0;c<this.#t;++c)this.#e[a][c]=0}}onprogress=o=>{if(!o.lengthComputable||o.subindex===void 0||o.index===void 0)return;let a=100*o.loaded/o.total;this.#e[o.index][o.subindex]=a;let c=null;c=o.item!==void 0?o.item:{loaded:this.#i(o.index),total:100,source:o.source},this.#n({lengthComputable:!0,loaded:this.#r(),total:100,item:c})};#i(o){let a=0;for(let c=0;c<this.#t;++c)a+=this.#e[o][c];return a/this.#t}#r(){let o=0,a=this.#e.length;for(let c=0;c<a;++c)o+=this.#i(c);return Math.round(o/a)}getMonoProgressHandler(o,a){return c=>{c.index=o,c.subindex=a,this.onprogress(c)}}getUndefinedMonoProgressHandler(o){return a=>{a.subindex=o,this.onprogress(a)}}}class C_{#e=null;#t=[];#n=null;#i=0;#r=0;#o;#s;getDefaultCharacterSet(){return this.#s}setDefaultCharacterSet(o){this.#s=o}#a(o){this.#e=o,this.#i=0,this.#r=0,this.#o=!1,this.#l(),this.#d()}#c(o){this.#t.push(o)}#l(){this.#t=[]}#u(o){this.#n=o}#d(){this.#n=null}#f=o=>{this.#i++,this.#i===this.#e.length&&this.onload({source:this.#e})};#h=o=>{this.#r++,this.#r===this.#e.length&&this.onloadend({source:this.#e})};#p(o,a){return c=>{c.source=a,o(c)}}load(o,a){this.onloadstart({source:o}),o.length===1&&(De(o[0],"DICOMDIR")||De(o[0],".dcmdir"))?this.#y(o[0],a):this.#v(o,a)}#m(o,a,c){return f=>{let m=f.target.status;m!==200&&m!==0?(this.onerror({source:a,error:"GET "+f.target.responseURL+" "+f.target.status+" ("+f.target.statusText+")",target:f.target}),this.#h()):o.load(f.target.response,a,c)}}#v(o,a){if(o===void 0||o.length===0)return;this.#a(o);let c=new m0(this.onprogress);c.setNToLoad(o.length);let f=[];for(let R=0;R<xa.length;++R)f.push(new xa[R]);let m=o[0],y=null,S=!1;for(let R=0;R<f.length;++R)if(y=f[R],y.canLoadUrl(m,a)){S=!0,y.setOptions({numberOfFiles:o.length,defaultCharacterSet:this.getDefaultCharacterSet()}),y.onprogress=c.getUndefinedMonoProgressHandler(1),y.onloaditem=this.onloaditem,y.onload=this.#f,y.onloadend=this.#h,y.onerror=this.onerror,y.onabort=this.onabort,this.#u(y);break}if(!S)throw new Error("No loader found for url: "+m);let D=0,E=()=>{D<this.#t.length-1&&!this.#o&&(++D,this.#t[D].send(null))};for(let R=0;R<o.length;++R){if(m=o[R],!y.canLoadUrl(m,a))throw new Error("Input url of different type: "+m);let P=new XMLHttpRequest;if(P.open("GET",m,!0),a!==void 0){if(a.requestHeaders!==void 0){let J=a.requestHeaders;for(let te=0;te<J.length;++te)J[te].name!==void 0&&J[te].value!==void 0&&P.setRequestHeader(J[te].name,J[te].value)}a.withCredentials!==void 0&&(P.withCredentials=a.withCredentials)}P.onprogress=this.#p(c.getMonoProgressHandler(R,0),m),P.onload=this.#m(y,m,R),P.onloadend=E;let B=this.#p(this.onerror,m);P.onerror=J=>{this.#h(),B(J)};let z=this.#p(this.onabort,m);P.onabort=J=>{this.#h(),z(J)},y.loadUrlAs()===1&&(P.responseType="arraybuffer"),this.#c(P)}let I=this.#t.length;a!==void 0&&a.batchSize!==void 0&&I!==0&&(I=Math.min(a.batchSize,this.#t.length));for(let R=0;R<I;++R)this.#o||(D=R,this.#t[D].send(null))}#y(o,a){let c=new XMLHttpRequest;c.open("GET",o,!0),c.responseType="arraybuffer",c.onload=f=>{let m=f.target.status;if(m!==200&&m!==0)this.onerror({source:o,error:"GET "+f.target.responseURL+" "+f.target.status+" ("+f.target.statusText+")",target:f.target}),this.onloadend({});else{let y=function(E){let I=new jm;I.parse(E);let R=I.getDicomElements();if(R["00041220"]===void 0||R["00041220"].value===void 0)return void p.warn("No Directory Record Sequence found in DICOMDIR.");let P=R["00041220"].value;if(P.length===0)return void p.warn("The Directory Record Sequence of the DICOMDIR is empty.");let B=[],z=null,J=null;for(let te=0;te<P.length;++te){if(P[te]["00041430"]===void 0||P[te]["00041430"].value===void 0)continue;let ve=P[te]["00041430"].value[0];if(ve==="STUDY")J=[],B.push(J);else if(ve==="SERIES")z=[],J.push(z);else if(ve==="IMAGE"){if(P[te]["00041500"]===void 0||P[te]["00041500"].value===void 0)continue;let ie=P[te]["00041500"].value;z.push(ie.join("/"))}}return B}(f.target.response)[0][0],S=o.split("/").slice(0,-1).join("/"),D=[];for(let E=0;E<y.length;++E)D.push(S+"/"+y[E]);this.#v(D,a)}},c.onerror=f=>{this.#p(this.onerror,o)(f),this.onloadend({})},c.onabort=f=>{this.#p(this.onabort,o)(f),this.onloadend({})},c.send(null)}abort(){this.#o=!0;for(let o=0;o<this.#t.length;++o)this.#t[o].readyState!==4&&this.#t[o].abort();this.#n&&this.#n.isLoading()&&this.#n.abort()}onloadstart(o){}onprogress(o){}onloaditem(o){}onload(o){}onloadend(o){}onerror(o){}onabort(o){}}class KM{constructor(o){this.poolSize=o,this.taskQueue=[],this.freeThreads=[];for(let a=0;a<o;++a)this.freeThreads.push(new JM(this));this.runningThreads=[]}addWorkerTask(o){if(this.freeThreads.length===this.poolSize&&this.onworkstart({type:"work-start"}),this.freeThreads.length>0){let a=this.freeThreads.shift();this.runningThreads.push(a),a.run(o)}else this.taskQueue.push(o)}abort(){this.#e(),this.onabort({type:"work-abort"}),this.onworkend({type:"work-end"})}onTaskEnd(o){if(this.taskQueue.length>0){let a=this.taskQueue.shift();o.run(a)}else{o.stop(),this.freeThreads.push(o);for(let a=0;a<this.runningThreads.length;++a)this.runningThreads[a].getId()===o.getId()&&this.runningThreads.splice(a,1);this.freeThreads.length===this.poolSize&&(this.onwork({type:"work"}),this.onworkend({type:"work-end"}))}}handleWorkerError=o=>{this.#e(),this.onerror({error:o}),this.onworkend({type:"work-end"})};#e(){this.taskQueue=[];for(let o=0;o<this.runningThreads.length;++o)this.runningThreads[o].stop();this.runningThreads=[]}onworkstart(o){}onworkitem(o){}onwork(o){}onworkend(o){}onerror(o){}onabort(o){}}class JM{constructor(o){this.parentPool=o,this.id=Math.random().toString(36).substring(2,15),this.runningTask=null,this.worker}getId(){return this.id}run(o){this.runningTask=o,this.worker===void 0&&(this.worker=new Worker(this.runningTask.script),this.worker.onmessage=this.onmessage,this.worker.onerror=this.onerror),this.worker.postMessage(this.runningTask.startMessage)}stop(){this.worker!==void 0&&(this.worker.terminate(),this.worker=void 0)}onmessage=o=>{o.itemNumber=this.runningTask.info.itemNumber,o.numberOfItems=this.runningTask.info.numberOfItems,o.index=this.runningTask.info.index,this.parentPool.onworkitem(o),this.parentPool.onTaskEnd(this)};onerror=o=>{o.itemNumber=this.runningTask.info.itemNumber,o.numberOfItems=this.runningTask.info.numberOfItems,o.index=this.runningTask.info.index,this.parentPool.handleWorkerError(o),this.stop()}}class eR{constructor(o,a,c){this.script=o,this.startMessage=a,this.info=c}}let tR=typeof JpegImage<"u",nR=typeof jpeg<"u"&&jpeg.lossless!==void 0,iR=typeof JpxImage<"u",nu={jpeg2000:"","jpeg-lossless":"","jpeg-baseline":"",rle:""};class rR{#e;#t=new KM(10);#n=!1;constructor(o,a){this.#e=o}decode(o,a,c){this.#n||(this.#n=!0,this.#t.onworkstart=this.ondecodestart,this.#t.onworkitem=this.ondecodeditem,this.#t.onwork=this.ondecoded,this.#t.onworkend=this.ondecodeend,this.#t.onerror=this.onerror,this.#t.onabort=this.onabort);let f=new eR(this.#e,{buffer:o,meta:a},c);this.#t.addWorkerTask(f)}abort(){this.#t.abort()}ondecodestart(o){}ondecodeditem(o){}ondecoded(o){}ondecodeend(o){}onerror(o){}onabort(o){}}class oR{#e;#t;constructor(o,a){this.#e=o,this.#t=a}#n=0;decode(o,a,c){++this.#n;let f=null,m=null;if(this.#e==="jpeg-lossless"){if(!nR)throw new Error("No JPEG Lossless decoder provided");let y=a.bitsAllocated/8,S=new Uint8Array(o);f=new jpeg.lossless.Decoder;let D=f.decode(S.buffer,0,S.buffer.byteLength,y);a.bitsAllocated===8?m=a.isSigned?new Int8Array(D.buffer):new Uint8Array(D.buffer):a.bitsAllocated===16&&(m=a.isSigned?new Int16Array(D.buffer):new Uint16Array(D.buffer))}else if(this.#e==="jpeg-baseline"){if(!tR)throw new Error("No JPEG Baseline decoder provided");f=new JpegImage,f.parse(o),m=f.getData(f.width,f.height)}else if(this.#e==="jpeg2000"){if(!iR)throw new Error("No JPEG 2000 decoder provided");f=new JpxImage,f.parse(o),m=f.tiles[0].items}else this.#e==="rle"&&(f=new dwvdecoder.RleDecoder,m=f.decode(o,a.bitsAllocated,a.isSigned,a.sliceSize,a.samplesPerPixel,a.planarConfiguration));this.ondecodeditem({data:[m],index:c.index,numberOfItems:c.numberOfItems,itemNumber:c.itemNumber}),this.#n===this.#t&&(this.ondecoded({}),this.ondecodeend({}))}abort(){this.onabort({}),this.ondecodeend({})}ondecodestart(o){}ondecodeditem(o){}ondecoded(o){}ondecodeend(o){}onerror(o){}onabort(o){}}class sR{#e=!1;#t=null;constructor(o,a){nu!==void 0&&nu[o]!==void 0?this.#t=new rR(nu[o],a):this.#t=new oR(o,a)}decode(o,a,c){this.#e||(this.#e=!0,this.#t.ondecodestart=this.ondecodestart,this.#t.ondecodeditem=this.ondecodeditem,this.#t.ondecoded=this.ondecoded,this.#t.ondecodeend=this.ondecodeend,this.#t.onerror=this.onerror,this.#t.onabort=this.onabort),this.#t.decode(o,a,c)}abort(){this.#t.abort()}ondecodestart(o){}ondecodeditem(o){}ondecoded(o){}ondecodeend(o){}onerror(o){}onabort(o){}}let br={NumericValue:"0040A30A",FloatingPointValue:"0040A161",RationalNumeratorValue:"0040A162",RationalDenominatorValue:"0040A163",MeasurementUnitsCodeSequence:"004008EA"};class w_{numericValue;floatingPointValue;rationalNumeratorValue;rationalDenominatorValue;measurementUnitsCode;toString(){return this.numericValue+" "+this.measurementUnitsCode.toString()}}function aR(u){let o={};return u.measurementUnitsCode!==void 0&&(o.MeasurementUnitsCodeSequence={value:[Fo(u.measurementUnitsCode)]}),u.floatingPointValue!==void 0&&(o.FloatingPointValue=u.floatingPointValue),u.rationalNumeratorValue!==void 0&&(o.RationalNumeratorValue=u.rationalNumeratorValue),u.rationalDenominatorValue!==void 0&&(o.RationalDenominatorValue=u.rationalDenominatorValue),u.numericValue!==void 0&&(o.NumericValue=u.numericValue),o}let iu={MeasuredValueSequence:"0040A300",NumericValueQualifierCodeSequence:"0040A301"};class I_{measuredValue;numericValueQualifierCode;toString(){let o=this.measuredValue.toString();return this.numericValueQualifierCode!==void 0&&(o+=" "+this.numericValueQualifierCode.toString()),o}}function lR(u){let o={};return u.measuredValue!==void 0&&(o.MeasuredValueSequence={value:[aR(u.measuredValue)]}),u.numericValueQualifierCode!==void 0&&(o.NumericValueQualifierCodeSequence={value:[Fo(u.numericValueQualifierCode)]}),o}let ru={ReferencedSOPClassUID:"00081150",ReferencedSOPInstanceUID:"00081155"};class E_{referencedSOPClassUID;referencedSOPInstanceUID;toString(){return this.referencedSOPInstanceUID+" (class: "+this.referencedSOPClassUID+")"}}function T_(u){let o=new E_;return u[ru.ReferencedSOPClassUID]!==void 0&&(o.referencedSOPClassUID=u[ru.ReferencedSOPClassUID].value[0]),u[ru.ReferencedSOPInstanceUID]!==void 0&&(o.referencedSOPInstanceUID=u[ru.ReferencedSOPInstanceUID].value[0]),o}function x_(u){let o={};return u.referencedSOPClassUID!==void 0&&(o.ReferencedSOPClassUID=u.referencedSOPClassUID),u.referencedSOPInstanceUID!==void 0&&(o.ReferencedSOPInstanceUID=u.referencedSOPInstanceUID),o}let Ta={ReferencedFrameNumber:"00081160",ReferencedSOPSequence:"00081199",ReferencedSegmentNumber:"0062000B"};class A_{referencedSOPSequence;referencedFrameNumber;referencedSegmentNumber;fiducialUID;toString(){return this.referencedSOPSequence.toString()}}function cR(u){let o={};return u.referencedFrameNumber!==void 0&&(o.ReferencedFrameNumber=u.referencedFrameNumber),u.referencedSOPSequence!==void 0&&(o.ReferencedSOPSequence={value:[x_(u.referencedSOPSequence)]}),u.referencedSegmentNumber!==void 0&&(o.ReferencedSegmentNumber=u.referencedSegmentNumber),o}let qo={PixelOriginInterpretation:"00480301",GraphicData:"00700022",GraphicType:"00700023",FiducialUID:"0070031A"},g0="POINT",ou="MULTIPOINT",nc="POLYLINE",M_="CIRCLE",R_="ELLIPSE";class su{graphicData;graphicType;pixelOriginInterpretation;fiducialUID;toString(){return this.graphicType+" {"+this.graphicData+"}"}}function dR(u){let o={};return u.pixelOriginInterpretation!==void 0&&(o.PixelOriginInterpretation=u.pixelOriginInterpretation),u.graphicData!==void 0&&(o.GraphicData=u.graphicData),u.graphicType!==void 0&&(o.GraphicType=u.graphicType),u.fiducialUID!==void 0&&(o.FiducialUID=u.fiducialUID),o}let jo={GraphicData:"00700022",GraphicType:"00700023",ReferencedFrameofReferenceUID:"30060024",FiducialUID:"0070031A"};class O_{graphicData;graphicType;referencedFrameofReferenceUID;fiducialUID;toString(){return this.graphicType+"{"+this.graphicData+"}"}}function uR(u){let o={};return u.graphicData!==void 0&&(o.GraphicData=u.graphicData),u.graphicType!==void 0&&(o.GraphicType=u.graphicType),u.referencedFrameofReferenceUID!==void 0&&(o.ReferencedFrameofReferenceUID=u.referencedFrameofReferenceUID),u.fiducialUID!==void 0&&(o.FiducialUID=u.fiducialUID),o}let Ji={ReferencedSOPSequence:"00081199",RelationshipType:"0040A010",ValueType:"0040A040",ConceptNameCodeSequence:"0040A043",ConceptCodeSequence:"0040A168",ContentSequence:"0040A730",DateTime:"0040A120",Date:"0040A121",Time:"0040A122",UID:"0040A124",PersonName:"0040A123",TextValue:"0040A160",ContinuityOfContent:"0040A050"},v0="CONTAINS",Ui="HAS PROPERTIES",P_="SELECTED FROM",Qt={text:"TEXT",num:"NUM",code:"CODE",date:"DATE",time:"TIME",datetime:"DATETIME",uidref:"UIDREF",pname:"PNAME",composite:"COMPOSITE",image:"IMAGE",waveform:"WAVEFORM",scoord:"SCOORD",scoord3d:"SCOORD3D",tcoord:"TCOORD",container:"CONTAINER",table:"TABLE"},F_={TEXT:"TextValue",DATE:"Date",TIME:"Time",DATETIME:"DateTime",UIDREF:"UID",PNAME:"PersonName",CONTAINER:"ContinuityOfContent"};class qi{valueType;conceptNameCode;relationshipType;contentSequence;value;constructor(o){this.valueType=o}toString(o){o===void 0&&(o="");let a="";if(this.relationshipType!==void 0&&(a+="("+this.relationshipType+") "),a+=this.valueType+": ",this.conceptNameCode!==void 0&&(a+=this.conceptNameCode.toString()),a+=" = "+this.value.toString(),this.contentSequence!==void 0)for(let c of this.contentSequence)a+=`
`+o+"- "+c.toString(o+"  ");return a}}function au(u){let o="";u[Ji.ValueType]!==void 0&&(o=u[Ji.ValueType].value[0]);let a=new qi(o);if(u[Ji.RelationshipType]!==void 0&&(a.relationshipType=u[Ji.RelationshipType].value[0]),u[Ji.ConceptNameCodeSequence]!==void 0&&(a.conceptNameCode=Ca(u[Ji.ConceptNameCodeSequence].value[0])),o===Qt.code)a.value=Ca(u[Ji.ConceptCodeSequence].value[0]);else if(o===Qt.num)a.value=function(c){let f=new I_;return c[iu.MeasuredValueSequence]!==void 0&&(f.measuredValue=function(m){let y=new w_;return m[br.NumericValue]!==void 0&&(y.numericValue=m[br.NumericValue].value[0]),m[br.FloatingPointValue]!==void 0&&(y.floatingPointValue=m[br.FloatingPointValue].value[0]),m[br.RationalNumeratorValue]!==void 0&&(y.rationalNumeratorValue=m[br.RationalNumeratorValue].value[0]),m[br.RationalDenominatorValue]!==void 0&&(y.rationalDenominatorValue=m[br.RationalDenominatorValue].value[0]),m[br.MeasurementUnitsCodeSequence]!==void 0&&(y.measurementUnitsCode=Ca(m[br.MeasurementUnitsCodeSequence].value[0])),y}(c[iu.MeasuredValueSequence].value[0])),c[iu.NumericValueQualifierCodeSequence]!==void 0&&(f.numericValueQualifierCode=Ca(c[iu.NumericValueQualifierCodeSequence].value[0])),f}(u);else if(o===Qt.image)a.value=function(c){let f=new A_;return c[Ta.ReferencedFrameNumber]!==void 0&&(f.referencedFrameNumber=c[Ta.ReferencedFrameNumber].value[0]),c[Ta.ReferencedSOPSequence]!==void 0&&(f.referencedSOPSequence=T_(c[Ta.ReferencedSOPSequence].value[0])),c[Ta.ReferencedSegmentNumber]!==void 0&&(f.referencedSegmentNumber=c[Ta.ReferencedSegmentNumber].value[0]),f}(u);else if(o===Qt.composite)a.value=T_(u[Ji.ReferencedSOPSequence].value[0]);else if(o===Qt.scoord)a.value=function(c){let f=new su;return c[qo.GraphicData]!==void 0&&(f.graphicData=c[qo.GraphicData].value),c[qo.GraphicType]!==void 0&&(f.graphicType=c[qo.GraphicType].value[0]),c[qo.PixelOriginInterpretation]!==void 0&&(f.pixelOriginInterpretation=c[qo.PixelOriginInterpretation].value[0]),c[qo.FiducialUID]!==void 0&&(f.fiducialUID=c[qo.FiducialUID].value[0]),f}(u);else if(o===Qt.scoord3d)a.value=function(c){let f=new O_;return c[jo.GraphicData]!==void 0&&(f.graphicData=c[jo.GraphicData].value),c[jo.GraphicType]!==void 0&&(f.graphicType=c[jo.GraphicType].value[0]),c[jo.ReferencedFrameofReferenceUID]!==void 0&&(f.referencedFrameofReferenceUID=c[jo.ReferencedFrameofReferenceUID].value[0]),c[jo.FiducialUID]!==void 0&&(f.fiducialUID=c[jo.FiducialUID].value[0]),f}(u);else{let c=F_[o];c!==void 0?a.value=u[Ji[c]].value[0]:console.warn("Unsupported input ValueType: "+o)}if(u[Ji.ContentSequence]!==void 0){a.contentSequence=[];for(let c of u[Ji.ContentSequence].value)a.contentSequence.push(au(c))}return a}function y0(u){let o={};if(u.relationshipType!==void 0&&(o.RelationshipType=u.relationshipType),u.valueType!==void 0&&(o.ValueType=u.valueType),u.conceptNameCode!==void 0&&(o.ConceptNameCodeSequence={value:[Fo(u.conceptNameCode)]}),u.valueType==="CODE")o.ConceptCodeSequence={value:[Fo(u.value)]};else if(u.valueType===Qt.num)o=Ee(Ee({},o),lR(u.value));else if(u.valueType===Qt.image)o=Ee(Ee({},o),cR(u.value));else if(u.valueType===Qt.composite)o=Ee(Ee({},o),x_(u.value));else if(u.valueType===Qt.scoord)o=Ee(Ee({},o),dR(u.value));else if(u.valueType===Qt.scoord3d)o=Ee(Ee({},o),uR(u.value));else{let a=F_[u.valueType];a!==void 0?o[a]=u.value:console.warn("Unsupported output ValueType: "+u.valueType)}if(u.contentSequence!==void 0){o.ContentSequence={value:[]};for(let a of u.contentSequence)o.ContentSequence.value.push(y0(a))}return o}function hR(u,o,a){let c=function(S){let D=n0[S],E;return D!==void 0&&(E=Di(D.key,D.scheme)),E}(u);if(c===void 0)return;let f=new qi(Qt.num);f.relationshipType=v0,f.conceptNameCode=c;let m=new w_;m.numericValue=o,m.measurementUnitsCode=function(S){let D=i0[S],E;return D!==void 0?E=Di(D,"UCUM"):D===void 0&&(E=Di("1","UCUM")),E}(a);let y=new I_;return y.measuredValue=m,f.value=y,f}class lu{#e;getWarning(){return this.#e}checkElements(o){this.#e=void 0;let a=au(o);return a.conceptNameCode!==void 0?a.conceptNameCode.value!==kb().value&&(this.#e="Not a measurement group"):this.#e="No root concept name code",this.#e}#t(o){let a=new Is;a.mathShape=function(c){let f=c.graphicData.length;if(f%2!=0)throw new Error("Expecting even number of coordinates in scroord data");let m=[];for(let E=0;E<f;E+=2)m.push(new N(parseFloat(c.graphicData[E]),parseFloat(c.graphicData[E+1])));let y=!1,S=m.length;if(S>2){let E=m[0],I=m[S-1];y=E.equals(I)}let D;if(c.graphicType===g0){if(m.length!==1)throw new Error("Expecting 1 point for point");D=m[0]}else if(c.graphicType===M_){if(m.length!==2)throw new Error("Expecting 2 points for circles");let E=m[0],I=m[1].getDistance(E);D=new Bo(E,I)}else if(c.graphicType===R_){if(m.length!==4)throw new Error("Expecting 4 points for ellipses");let E=m[0].getDistance(m[1])/2,I=m[2].getDistance(m[3])/2,R=new N(m[0].getX()+E,m[0].getY());D=new Vo(R,E,I)}else if(c.graphicType===nc)if(y)if(m.length===5){let E=new an(m[0],m[1]),I=new an(m[1],m[2]),R=new an(m[2],m[3]),P=new an(m[3],m[4]);D=a0(E,I)&&a0(I,R)&&a0(R,P)?new Lo(m[0],m[2]):new Bi(m.slice(0,-1))}else D=new Bi(m.slice(0,-1));else m.length===2?D=new an(m[0],m[1]):m.length===3&&(D=new No([m[0],m[1],m[2]]));return D}(o.value),a.id=jd(),a.textExpr="";for(let c of o.contentSequence){if(c.valueType===Qt.image&&c.relationshipType===P_&&bs(c.conceptNameCode,Nb())&&(a.referenceSopUID=c.value.referencedSOPSequence.referencedSOPInstanceUID),c.valueType===Qt.uidref&&c.relationshipType===Ui&&bs(c.conceptNameCode,Vb())&&(a.id=c.value),c.valueType===Qt.text&&c.relationshipType===Ui&&bs(c.conceptNameCode,Bb())&&(a.textExpr=c.value,c.contentSequence!==void 0))for(let f of c.contentSequence)f.valueType===Qt.scoord&&f.relationshipType===Ui&&bs(f.conceptNameCode,Qd())&&(a.labelPosition=new N(f.value.graphicData[0],f.value.graphicData[1]));if(c.valueType===Qt.text&&c.relationshipType===Ui&&bs(c.conceptNameCode,Ub())&&(a.colour=c.value),c.valueType===Qt.scoord&&c.relationshipType===Ui&&bs(c.conceptNameCode,Qd())&&c.value.graphicType===ou){let f=[];for(let m=0;m<c.value.graphicData.length;m+=2)f.push(new N(c.value.graphicData[m],c.value.graphicData[m+1]));a.referencePoints=f}if(c.valueType===Qt.scoord3d&&c.relationshipType===Ui&&bs(c.conceptNameCode,Lb())&&c.value.graphicType===ou){let f=c.value.graphicData,m=[],y=Math.floor(f.length/3);for(let S=0;S<y;++S){let D=3*S;m.push(new W(f[D],f[D+1],f[D+2]))}a.planePoints=m}if(c.valueType===Qt.num&&c.relationshipType===v0){let f=wM(c.conceptNameCode);if(f===void 0)continue;let m=c.value.measuredValue,y=IM(m.measurementUnitsCode);a.quantification===void 0&&(a.quantification={}),a.quantification[f]={value:m.numericValue,unit:y}}}return a}create(o){let a=[],c=au(o);for(let S of c.contentSequence)S.valueType===Qt.scoord&&a.push(this.#t(S));let f=new $d(a),m=function(S){let D,E=o[S];return E!==void 0&&(D=E.value[0]),D};f.setMetaValue("StudyInstanceUID",m("0020000D")),f.setMetaValue("Modality",m("00080060")),f.setMetaValue("PatientName",m("00100010")),f.setMetaValue("PatientID",m("00100020")),f.setMetaValue("PatientBirthDate",m("00100030")),f.setMetaValue("PatientSex",m("00100040"));let y=o["00081115"];if(y!==void 0){let S=y.value[0]["0020000E"];S!==void 0&&f.setMetaValue("ReferencedSeriesSequence",{value:[{SeriesInstanceUID:S.value[0]}]})}return f}#n(o){let a=new qi(Qt.scoord);a.relationshipType=v0,o.mathShape instanceof an?a.conceptNameCode=Di("121055","DCM"):a.conceptNameCode=Di("111030","DCM"),a.value=function(I){let R=new su;if(I instanceof N)R.graphicData=[I.getX().toString(),I.getY().toString()],R.graphicType=g0;else if(I instanceof an)R.graphicData=[I.getBegin().getX().toString(),I.getBegin().getY().toString(),I.getEnd().getX().toString(),I.getEnd().getY().toString()],R.graphicType=nc;else if(I instanceof No){R.graphicData=[];for(let P=0;P<3;++P)R.graphicData.push(I.getPoint(P).getX().toString()),R.graphicData.push(I.getPoint(P).getY().toString());R.graphicType=nc}else if(I instanceof Bi){R.graphicData=[];for(let B=0;B<I.getLength();++B)R.graphicData.push(I.getPoint(B).getX().toString()),R.graphicData.push(I.getPoint(B).getY().toString());let P=I.getPoint(0);R.graphicData.push(P.getX().toString()),R.graphicData.push(P.getY().toString()),R.graphicType=nc}else if(I instanceof Bo){let P=I.getCenter(),B=new N(P.getX()+I.getRadius(),P.getY());R.graphicData=[P.getX().toString(),P.getY().toString(),B.getX().toString(),B.getY().toString()],R.graphicType=M_}else if(I instanceof Vo){let P=I.getCenter(),B=I.getA(),z=I.getB();R.graphicData=[(P.getX()-B).toString(),P.getY().toString(),(P.getX()+B).toString(),P.getY().toString(),P.getX().toString(),(P.getY()-z).toString(),P.getX().toString(),(P.getY()+z).toString()],R.graphicType=R_}else if(I instanceof Lo){let P=I.getBegin(),B=I.getEnd();R.graphicData=[P.getX().toString(),P.getY().toString(),P.getX().toString(),B.getY().toString(),B.getX().toString(),B.getY().toString(),B.getX().toString(),P.getY().toString(),P.getX().toString(),P.getY().toString()],R.graphicType=nc}return R}(o.mathShape);let c=[],f=new qi(Qt.image);f.relationshipType=P_,f.conceptNameCode=Nb();let m=new E_;m.referencedSOPClassUID="",m.referencedSOPInstanceUID=o.referenceSopUID;let y=new A_;y.referencedSOPSequence=m,f.value=y,c.push(f);let S=new qi(Qt.uidref);S.relationshipType=Ui,S.conceptNameCode=Vb(),S.value=o.id,c.push(S);let D=new qi(Qt.text);if(D.relationshipType=Ui,D.conceptNameCode=Bb(),D.value=o.textExpr,o.labelPosition!==void 0){let I=new qi(Qt.scoord);I.relationshipType=Ui,I.conceptNameCode=Qd();let R=new su;R.graphicType=g0;let P=[o.labelPosition.getX().toString(),o.labelPosition.getY().toString()];R.graphicData=P,I.value=R,D.contentSequence=[I]}c.push(D);let E=new qi(Qt.text);if(E.relationshipType=Ui,E.conceptNameCode=Ub(),E.value=o.colour,c.push(E),o.referencePoints!==void 0){let I=new qi(Qt.scoord);I.relationshipType=Ui,I.conceptNameCode=Qd();let R=new su;R.graphicType=ou;let P=[];for(let B of o.referencePoints)P.push(B.getX().toString()),P.push(B.getY().toString());R.graphicData=P,I.value=R,c.push(I)}if(o.planePoints!==void 0){let I=new qi(Qt.scoord3d);I.relationshipType=Ui,I.conceptNameCode=Lb();let R=new O_;R.graphicType=ou;let P=[];for(let B of o.planePoints)P.push(B.getX().toString()),P.push(B.getY().toString()),P.push(B.getZ().toString());R.graphicData=P,I.value=R,c.push(I)}if(o.quantification!==void 0)for(let I in o.quantification){let R=hR(I,o.quantification[I].value,o.quantification[I].unit);R!==void 0&&c.push(R)}return a.contentSequence=c,a}toDicom(o,a){let c=o.getMeta();c.TransferSyntaxUID="1.2.840.10008.1.2.1",c.SOPClassUID="1.2.840.10008.5.1.4.1.1.88.11",c.MediaStorageSOPClassUID="1.2.840.10008.5.1.4.1.1.88.11",c.CompletionFlag="PARTIAL",c.VerificationFlag="UNVERIFIED";let f=new Date;c.ContentDate=_b(Sb(f)),c.ContentTime=Db(bb(f));let m=[];for(let y of o.getList())m.push(this.#n(y));if(m.length!==0){let y=new qi(Qt.container);y.conceptNameCode=kb(),y.contentSequence=m,c=Ee(Ee({},c),y0(y))}return a!==void 0&&function(y,S){let D=Object.keys(S);for(let E of D)y[E]!==void 0&&p.trace("Overwritting tag: "+E),y[E]=S[E]}(c,a),Hd(c)}}class S0{meta;image;annotationGroup;constructor(o){this.meta=o}}class fR{#e={};#t=-1;#n=new ri;getNextDataId(){return++this.#t,this.#t.toString()}getDataIds(){return Object.keys(this.#e)}reset(){this.#e={}}get(o){return this.#e[o]}getDataIdsFromSopUids(o){let a=[];if(o===void 0||o.length===0)return a;let c=Object.keys(this.#e);for(let f of c)this.#e[f].image!==void 0&&this.#e[f].image.containsImageUids(o)&&a.push(f);return a}setImage(o,a){this.#e[o].image=a,this.#i({type:"dataimageset",value:[a],dataid:o}),a.addEventListener("imagecontentchange",this.#r(o)),a.addEventListener("imagegeometrychange",this.#r(o))}add(o,a){if(this.#e[o]!==void 0)throw new Error("Data id already used in storage: "+o);this.#e[o]=a,this.#i({type:"dataadd",dataid:o}),a.image!==void 0&&(a.image.addEventListener("imagecontentchange",this.#r(o)),a.image.addEventListener("imagegeometrychange",this.#r(o))),a.annotationGroup!==void 0&&(a.annotationGroup.addEventListener("annotationadd",this.#r(o)),a.annotationGroup.addEventListener("annotationupdate",this.#r(o)),a.annotationGroup.addEventListener("annotationremove",this.#r(o)))}remove(o){if(this.#e[o]!==void 0){let a=this.#e[o].image;a!==void 0&&(a.removeEventListener("imagecontentchange",this.#r(o)),a.removeEventListener("imagegeometrychange",this.#r(o)));let c=this.#e[o].annotationGroup;c!==void 0&&(c.removeEventListener("annotationadd",this.#r(o)),c.removeEventListener("annotationupdate",this.#r(o)),c.removeEventListener("annotationremove",this.#r(o))),delete this.#e[o],this.#i({type:"dataremove",dataid:o})}}update(o,a){if(this.#e[o]===void 0)throw new Error("Cannot find data to update: "+o);let c=this.#e[o];c.image!==void 0&&a.image!==void 0&&c.image.appendSlice(a.image);let f="";f=a.meta["00020010"]!==void 0?"00200013":"imageUid",c.meta=function(m,y,S,D){let E={};if(!S)throw new Error("Cannot merge object with an undefined id key: "+S);if(!Object.prototype.hasOwnProperty.call(m,S))throw new Error("Id key not found in first object while merging: "+S+", obj: "+m);if(!Object.prototype.hasOwnProperty.call(y,S))throw new Error("Id key not found in second object while merging: "+S+", obj: "+y);let I=!1;if(Object.prototype.hasOwnProperty.call(m[S],"merged")&&m[S].merged&&(I=!0),!Object.prototype.hasOwnProperty.call(m[S],D))throw new Error("Id value not found in first object while merging: "+S+", valueKey: "+D+", ojb: "+m);if(!Object.prototype.hasOwnProperty.call(y[S],D))throw new Error("Id value not found in second object while merging: "+S+", valueKey: "+D+", ojb: "+y);let R=m[S][D],P=y[S][D][0];if(E[S]=m[S],I){for(let te=0;te<R.length;++te)if(R[te]===P)throw new Error("The first object already contains id2: "+P+", id1: "+R);E[S][D].push(P)}else{if(R=R[0],R===P)throw new Error("Cannot merge object with same ids: "+R+", id2: "+P);E[S][D].push(P),E[S].merged=!0}let B=Object.keys(m),z=Object.keys(y).filter(function(te){return B.indexOf(te)<0}),J=B.concat(z);for(let te=0;te<J.length;++te){let ve=J[te];if(ve!==S){let ie,se,ae,re,Ce;if(Object.prototype.hasOwnProperty.call(m,ve)&&(ie=m[ve],Object.prototype.hasOwnProperty.call(ie,D)&&(se=ie[D])),Object.prototype.hasOwnProperty.call(y,ve)&&(ae=y[ve],Object.prototype.hasOwnProperty.call(ae,D)&&(re=ae[D])),ie!==void 0?Ce=ie:ae!==void 0&&(Ce=ae),!$t(se,re))if(I){if(Array.isArray(se)){Ce[D]={};for(let we=0;we<R.length;++we)Ce[D][R[we]]=se}else Ce[D]=se;Ce[D]===void 0&&(Ce[D]={}),Ce[D][P]=re}else{let we={};we[R]=se,we[P]=re,Ce[D]=we}E[ve]=Ce}}return E}(c.meta,a.meta,f,"value"),this.#i({type:"dataupdate",dataid:o})}addEventListener(o,a){this.#n.add(o,a)}removeEventListener(o,a){this.#n.remove(o,a)}#i=o=>{this.#n.fireEvent(o)};#r(o){return a=>{a.dataid=o,this.#i(a)}}}class pR{#e;setOptions(o){this.#e=o}#t=null;#n=[];#i=[];#r=[];#o=[];#s(o){let a,c=o["00080060"];if(c!==void 0){let f=c.value[0];f==="SEG"?a=new r0:f==="SR"&&(a=new lu)}return a===void 0&&o["7FE00010"]!==void 0&&(a=new Rb),a}#a(o,a){let c=this.#n[o].getDicomElements(),f=this.#o[o];if(f!==void 0)try{let m=new S0(c);f instanceof lu?m.annotationGroup=f.create(c):m.image=f.create(c,this.#i[o],this.#e.numberOfFiles),this.onloaditem({data:m,source:a,warn:f.getWarning()})}catch(m){this.onerror({error:m,source:a}),this.onloadend({source:a})}}#c(o,a){this.onprogress({lengthComputable:!0,loaded:100,total:100,index:o,source:a}),this.#a(o,a),this.onload({source:a}),this.onloadend({source:a})}#l(o,a,c){let f=this.#n[o],m={bitsAllocated:f.getDicomElements()["00280100"].value[0],isSigned:f.getDicomElements()["00280103"].value[0]===1},y=f.getDicomElements()["00280011"],S=f.getDicomElements()["00280010"];y!==void 0&&S!==void 0&&(m.sliceSize=y.value[0]*S.value[0]);let D=f.getDicomElements()["00280002"];D!==void 0&&(m.samplesPerPixel=D.value[0]);let E=f.getDicomElements()["00280006"];E!==void 0&&(m.planarConfiguration=E.value[0]);let I=a.length;this.#t===null&&(this.#t=new sR(c,I),this.#t.ondecodeditem=R=>{this.#u(R),R.itemNumber+1===R.numberOfItems&&(this.onload(R),this.onloadend(R))},this.#t.onerror=this.onerror,this.#t.onabort=this.onabort);for(let R=0;R<I;++R)this.#t.decode(a[R],m,{itemNumber:R,numberOfItems:I,index:o})}#u(o){this.onprogress({lengthComputable:!0,loaded:o.itemNumber+1,total:o.numberOfItems,index:o.index,source:origin});let a=o.index,c=o.data[0];if(o.numberOfItems!==1){if(this.#r[a]===void 0){this.#r[a]=c.length;let f=o.numberOfItems*this.#r[a];try{this.#i[a]=new c.constructor(f)}catch(m){if(m instanceof RangeError){let y=Math.floor(Math.log(f)/Math.log(2));p.error("Cannot allocate "+c.constructor.name+" of size: "+f+" (>2^"+y+") for decompressed data.")}return this.#t.abort(),this.onerror({error:m,source:origin}),void this.onloadend({source:origin})}}c.length!==this.#r[a]&&p.warn("Unsupported varying decompressed data size: "+c.length+" != "+this.#r[a]),this.#i[a].set(c,this.#r[a]*o.itemNumber)}else this.#i[a]=c;o.itemNumber===0&&this.#a(a,origin)}#d(o,a){this.#a(o,a),this.onload({source:a}),this.onloadend({source:a})}#f(o,a){let c=this.#n[o],f=c.getDicomElements()["7FE00010"].value;c.getDicomElements()["7FE00010"].value=[],this.#i[o]=f[0];let m=function(y){let S;return qm(y)?S="jpeg2000":Bm(y)?S="jpeg-baseline":Um(y)?S="jpeg-lossless":db(y)&&(S="rle"),S}(c.getDicomElements()["00020010"].value[0]);m!==void 0?this.#l(o,f,m):this.#c(o,a)}convert(o,a,c){this.onloadstart({source:a,index:c});let f=new jm,m;this.#e.defaultCharacterSet!==void 0&&f.setDefaultCharacterSet(this.#e.defaultCharacterSet);try{f.parse(o),m=this.#s(f.getDicomElements()),m!==void 0&&m.checkElements(f.getDicomElements())}catch(y){return this.onerror({error:y,source:a}),void this.onloadend({source:a})}this.#n[c]=f,this.#o[c]=m,m instanceof lu?this.#d(c,a):this.#f(c,a)}abort(){this.#t&&this.#t.abort()}onloadstart(o){}onloaditem(o){}onprogress(o){}onload(o){}onloadend(o){}onerror(o){}onabort(o){}}class b0{#e=null;#t=null;#n=0;#i=0;#r;getDefaultCharacterSet(){return this.#r}setDefaultCharacterSet(o){this.#r=o}#o(o){this.#e=o,this.#n=0,this.#i=0,this.#a()}#s(o){this.#t=o}#a(){this.#t=null}#c=o=>{this.#n++,this.#n===this.#e.length&&this.onload({source:this.#e})};#l=o=>{this.#i++,this.#i===this.#e.length&&this.onloadend({source:this.#e})};load(o){if(o===void 0||o.length===0)return;this.#o(o),this.onloadstart({source:o});let a=new m0(this.onprogress);a.setNToLoad(o.length),a.setNumberOfDimensions(1);let c=[];for(let S=0;S<xa.length;++S)c.push(new xa[S]);let f=o[0],m=null,y=!1;for(let S=0;S<c.length;++S)if(m=c[S],m.canLoadMemory(f)){y=!0,m.setOptions({numberOfFiles:o.length,defaultCharacterSet:this.getDefaultCharacterSet()}),m.onprogress=a.getUndefinedMonoProgressHandler(0),m.onloaditem=this.onloaditem,m.onload=this.#c,m.onloadend=this.#l,m.onerror=this.onerror,m.onabort=this.onabort,this.#s(m);break}if(!y)throw new Error("No loader found for data: "+f.filename);for(let S=0;S<o.length;++S){if(f=o[S],!m.canLoadMemory(f))throw new Error("Input data of different type: "+f.filename);m.load(f.data,f.filename,S)}}abort(){this.#t&&this.#t.isLoading()&&this.#t.abort()}onloadstart(o){}onprogress(o){}onloaditem(o){}onload(o){}onloadend(o){}onerror(o){}onabort(o){}}function k_(u){let o=u.data.length,a=new Uint8Array(o/4*3),c=0;for(let f=0;f<o;f+=4)a[c]=u.data[f],a[c+1]=u.data[f+1],a[c+2]=u.data[f+2],c+=3;return a}function L_(u,o,a,c,f,m){let y=new Oo([u,o,1]),S=new Po([1,1,1]),D=new W(0,0,a),E=new Da(D,y,S),I=new _s(E,c,[m]);I.setPhotometricInterpretation("RGB");let R={BitsStored:8};return f!==void 0&&(R.numberOfFiles=f),I.setMeta(R),I}var mR=s(654),gR=s.n(mR);let xa=[class{#e={};#t=!1;setOptions(u){this.#e=u}isLoading(){return this.#t}#n=new pR;load(u,o,a){this.#t||(this.#n.setOptions(this.#e),this.#n.onloadstart=this.onloadstart,this.#n.onprogress=this.onprogress,this.#n.onloaditem=this.onloaditem,this.#n.onload=this.onload,this.#n.onloadend=c=>{this.#t=!1,this.onloadend(c)},this.#n.onerror=c=>{c.source=o,this.onerror(c)},this.#n.onabort=this.onabort),this.#t=!0,this.#n.convert(u,o,a)}abort(){this.#t=!1,this.#n.abort()}canLoadFile(u){let o=fe(u.name);return o===null||o==="dcm"}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="dicom")return!0;if(o.requestHeaders!==void 0){let S=function(E){return E.name==="Accept"},D=o.requestHeaders.find(S);if(D!==void 0){let E="application/dicom";return Q(D.value,E)&&D.value[E.length]!=="+"}}}let a=tc(u),c=fe(a.pathname),f=c===null,m=c==="dcm",y=a.searchParams.get("contentType");return y!=null?y==="application/dicom":f||m}canLoadMemory(u){let o=u["Content-Type"];if(o!==void 0&&o.startsWith("application/dicom"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Wr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}load(u,o,a){this.#e=!0,this.onloadstart({source:o});try{this.onprogress({lengthComputable:!0,loaded:100,total:100,index:a,source:o});let c={data:u,source:o};this.onloaditem(c),this.onload(c)}catch(c){this.onerror({error:c,source:o})}finally{this.#e=!1,this.onloadend({source:o})}}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return fe(u.name)==="json"}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="json")return!0;if(o.requestHeaders!==void 0){let a=function(f){return f.name==="Accept"},c=o.requestHeaders.find(a);if(c!==void 0)return Q(c.value,"application/json")||Q(c.value,"application/dicom+json")}}return fe(tc(u).pathname)==="json"}canLoadMemory(u){let o=u["Content-Type"];if(o!==void 0&&o.startsWith("application/json"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Wr.Text}loadUrlAs(){return 0}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}load(u,o,a){this.onloadstart({source:o}),this.#e=!0;let c=new b0;c.onprogress=f=>{f.loaded=50+f.loaded/2,f.index=a,this.onprogress(f)},c.onloaditem=this.onloaditem,c.onload=this.onload,c.onloadend=f=>{this.#e=!1,this.onloadend(f)},c.onerror=this.onerror,c.onabort=this.onabort,c.load(function(f){let m=new Uint8Array(f),y=[];if(m.length===0)return y;let S=Wn(new Uint8Array([13,10,13,10])),D=Bn(m,S,0);if(D===void 0)throw new Error("Can't find the end of the first multipart header");let E=bt(m.slice(0,D)).split(`\r
`),I;for(let z=0;z<E.length;++z)if(E[z][0]==="-"&&E[z][1]==="-"){I=E[z];break}if(I===void 0)throw new Error("Can't find the boundary between multi-parts");let R=Wn(ze(I)),P=I.length,B=Bn(m,R,0);for(;D!==void 0;){let z={},J=bt(m.slice(B+P,D)).split(`\r
`);for(let ie=0;ie<J.length;++ie){let se=J[ie],ae=se.indexOf(":");if(ae!==-1){let re=se.substring(0,ae).trim(),Ce=se.substring(ae+1).trim();z[re]=Ce}}if(B=Bn(m,R,D),B===void 0)break;let te=D+4,ve=B-2;z.data=te<ve?m.slice(te,ve).buffer:new Uint8Array,y.push(z),D=Bn(m,S,B+P)}return y}(u))}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return!1}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="multipart")return!0;if(o.requestHeaders!==void 0){let a=function(f){return f.name==="Accept"},c=o.requestHeaders.find(a);if(c!==void 0)return Q(c.value,"multipart/related")}}return!1}canLoadMemory(u){return!1}loadFileAs(){return Wr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return!0}#t(u,o){let a=o;a&&a!=="jpg"||(a="jpeg");let c=new Blob([u],{type:"image/"+a});return window.URL.createObjectURL(c)}load(u,o,a){this.#e=!1;let c=new Image;if(c.onload=()=>{try{if(!this.#e){this.onprogress({lengthComputable:!0,loaded:100,total:100,index:a,source:o});let f=function(m,y,S){let D=m.width,E=m.height,I=document.createElement("canvas");I.width=D,I.height=E;let R=I.getContext("2d");R.drawImage(m,0,0);let P=R.getImageData(0,0,D,E),B={};typeof y=="string"?B.origin={value:y}:(B.fileName={value:y.name},B.fileType={value:y.type},B.fileLastModifiedDate={value:y.lastModified}),B.imageWidth={value:D},B.imageHeight={value:E};let z=S||0;return B.imageUid={value:z},{data:{image:L_(D,E,z,k_(P),1,z.toString()),info:B},source:y}}(c,o,a);this.onloaditem(f),this.onload(f)}}catch(f){this.onerror({error:f,source:o})}finally{this.onloadend({source:o})}},typeof u=="string")c.src=u;else if(typeof o=="string"){let f=o.split(".").pop().toLowerCase();c.src=this.#t(u,f)}}abort(){this.#e=!0,this.onabort({}),this.onloadend({})}canLoadFile(u){return u.type!==void 0&&u.type.match("image.*")!==null}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="rawimage")return!0;if(o.requestHeaders!==void 0){let y=function(D){return D.name==="Accept"},S=o.requestHeaders.find(y);if(S!==void 0)return Q(S.value,"image/")}}let a=tc(u),c=fe(a.pathname),f=c==="jpeg"||c==="jpg"||c==="png"||c==="gif",m=a.searchParams.get("contentType");return m!=null?m==="image/jpeg"||m==="image/png"||m==="image/gif":f}canLoadMemory(u){if(u.filename!==void 0){let o=new File(["from memory"],u.filename);return this.canLoadFile(o)}return!1}loadFileAs(){return Wr.DataURL}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{setOptions(u){}isLoading(){return!0}#e(u,o){let a=new Uint8Array(u),c="";for(let f=0;f<a.byteLength;++f)c+=String.fromCharCode(a[f]);return"data:video/"+o+";base64,"+window.btoa(c)}load(u,o,a){let c=document.createElement("video");if(typeof o=="string"){let f=o.split(".").pop().toLowerCase();c.src=this.#e(u,f)}else c.src=u;c.onloadedmetadata=f=>{try{(function(m,y,S,D,E,I,R){let P=m.videoWidth,B=m.videoHeight,z=Math.ceil(30*m.duration),J={};typeof I=="string"?J.origin={value:I}:(J.fileName={value:I.name},J.fileType={value:I.type},J.fileLastModifiedDate={value:I.lastModified}),J.imageWidth={value:P},J.imageHeight={value:B},J.numberOfFrames={value:z},J.imageUid={value:0};let te=document.createElement("canvas");te.width=P,te.height=B;let ve=te.getContext("2d");m.addEventListener("seeked",function re(Ce){(function(){D({lengthComputable:!0,loaded:ie,total:z,index:R,source:I}),ve.drawImage(m,0,0);let we=k_(ve.getImageData(0,0,P,B));ie===0?(se=L_(P,B,1,we,z,R.toString()),y({data:{image:se,info:J},source:I})):se.appendFrameBuffer(we,ie),++ie})(),ae+=1/30,ae<=Ce.target.duration?this.currentTime=ae:(S({source:I}),E({source:I}),m.removeEventListener("seeked",re))},!1);let ie=0,se=null,ae=0;m.currentTime=ae})(f.target,this.onloaditem,this.onload,this.onprogress,this.onloadend,o,a)}catch(m){this.onerror({error:m,source:o}),this.onloadend({source:o})}}}abort(){this.onabort({}),this.onloadend({})}canLoadFile(u){return u.type!==void 0&&u.type.match("video.*")!==null}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="rawvideo")return!0;if(o.requestHeaders!==void 0){let c=function(m){return m.name==="Accept"},f=o.requestHeaders.find(c);if(f!==void 0)return Q(f.value,"video/")}}let a=fe(tc(u).pathname);return a==="mp4"||a==="ogg"||a==="webm"}canLoadMemory(u){if(u.filename!==void 0){let o=new File(["from memory"],u.filename);return this.canLoadFile(o)}return!1}loadFileAs(){return Wr.DataURL}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}#t="";#n=[];#i=null;#r(u,o,a){this.#n.push({filename:this.#t,data:u});let c=100*this.#n.length/this.#i.length;if(this.onprogress({lengthComputable:!0,loaded:c/2,total:100,index:a,item:{loaded:c,total:100,source:o}}),this.#n.length<this.#i.length){let f=this.#n.length;this.#t=this.#i[f].name,this.#i[f].async("arrayBuffer").then(m=>{this.#r(m,o,a)})}else{let f=new b0;f.onprogress=m=>{m.loaded=50+m.loaded/2,m.index=a,this.onprogress(m)},f.onloaditem=this.onloaditem,f.onload=this.onload,f.onloadend=m=>{this.#e=!1,this.onloadend(m)},f.onerror=this.onerror,f.onabort=this.onabort,f.load(this.#n)}}load(u,o,a){this.onloadstart({source:o}),this.#e=!0,gR().loadAsync(u).then(c=>{this.#n=[],this.#i=c.file(/.*\.dcm/);let f=this.#n.length;this.#t=this.#i[f].name,this.#i[f].async("arrayBuffer").then(m=>{this.#r(m,o,a)})})}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return fe(u.name)==="zip"}canLoadUrl(u,o){if(o!==void 0){if(o.forceLoader!==void 0&&o.forceLoader==="zip")return!0;if(o.requestHeaders!==void 0){let a=function(f){return f.name==="Accept"},c=o.requestHeaders.find(a);if(c!==void 0)return Q(c.value,"application/zip")}}return fe(tc(u).pathname)==="zip"}canLoadMemory(u){let o=u["Content-Type"];if(o!==void 0&&o.startsWith("application/zip"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Wr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}}],Wr={Text:0,ArrayBuffer:1,DataURL:2};class N_{#e=null;#t=[];#n=null;#i=0;#r=0;#o;getDefaultCharacterSet(){return this.#o}setDefaultCharacterSet(o){this.#o=o}#s(o){this.#e=o,this.#i=0,this.#r=0,this.#c(),this.#u()}#a(o){this.#t.push(o)}#c(){this.#t=[]}#l(o){this.#n=o}#u(){this.#n=null}#d=o=>{this.#i++,this.#i===this.#e.length&&this.onload({source:this.#e})};#f=o=>{this.#r++,this.#r===this.#e.length&&this.onloadend({source:this.#e})};#h(o,a){return c=>{c.source=a,o(c)}}#p(o,a,c){return f=>{o.load(f.target.result,a,c)}}load(o){if(o===void 0||o.length===0)return;this.#s(o),this.onloadstart({source:o});let a=new m0(this.onprogress);a.setNToLoad(o.length);let c=[];for(let S=0;S<xa.length;++S)c.push(new xa[S]);let f=o[0],m=null,y=!1;for(let S=0;S<c.length;++S)if(m=c[S],m.canLoadFile(f)){y=!0,m.setOptions({numberOfFiles:o.length,defaultCharacterSet:this.getDefaultCharacterSet()}),m.onprogress=a.getUndefinedMonoProgressHandler(1),m.onloaditem=this.onloaditem,m.onload=this.#d,m.onloadend=this.#f,m.onerror=this.onerror,m.onabort=this.onabort,this.#l(m);break}if(!y)throw new Error("No loader found for file: "+f.name);for(let S=0;S<o.length;++S){if(f=o[S],!m.canLoadFile(f))throw new Error("Input file of different type: "+f);let D=new FileReader;this.#a(D),D.onprogress=this.#h(a.getMonoProgressHandler(S,0),f),D.onload=this.#p(m,f,S);let E=this.#h(this.onerror,f);D.onerror=R=>{this.#f(),E(R)};let I=this.#h(this.onabort,f);D.onabort=R=>{this.#f(),I(R)},m.loadFileAs()===Wr.Text?D.readAsText(f):m.loadFileAs()===Wr.DataURL?D.readAsDataURL(f):m.loadFileAs()===Wr.ArrayBuffer&&D.readAsArrayBuffer(f)}}abort(){for(let o=0;o<this.#t.length;++o)this.#t[o].readyState===1&&this.#t[o].abort();this.#n&&this.#n.isLoading()&&this.#n.abort()}onloadstart(o){}onprogress(o){}onloaditem(o){}onload(o){}onloadend(o){}onerror(o){}onabort(o){}}class vR{#e;#t={};constructor(o){this.#e=o}loadFiles(o,a){o[0].name.split(".").pop().toLowerCase()==="json"?this.#r(o[0],a):this.#n(o,a)}loadURLs(o,a,c){o[0].split(".").pop().toLowerCase()==="json"?this.#o(o[0],a,c):this.#i(o,a,c)}loadImageObject(o,a){let c=new b0;this.#s(o,c,"image",a)}getLoadingDataIds(){return Object.keys(this.#t)}abort(o){this.#t[o]!==void 0&&(this.#t[o].loader.abort(),delete this.#t[o])}#n(o,a){let c=new N_;c.setDefaultCharacterSet(this.#e),this.#s(o,c,"image",a)}#i(o,a,c){let f=new C_;f.setDefaultCharacterSet(this.#e),this.#s(o,f,"image",a,c)}#r(o,a){let c=new N_;this.#s([o],c,"state",a)}#o(o,a,c){let f=new C_;this.#s([o],f,"state",a,c)}#s(o,a,c,f,m){let y={loadtype:c,dataid:f};a.onloadstart=S=>{this.#t[f]={loader:a,isFirstItem:!0},this.#a(this.onloadstart,y)(S)},a.onprogress=this.#a(this.onprogress,y),a.onloaditem=S=>{let D={loadtype:c,dataid:f};this.#t[f]!==void 0&&(D.isfirstitem=this.#t[f].isFirstItem),this.#a(this.onloaditem,D)(S),this.#t[f]!==void 0&&this.#t[f].isFirstItem&&(this.#t[f].isFirstItem=!1)},a.onload=this.#a(this.onload,y),a.onloadend=S=>{delete this.#t[f],this.#a(this.onloadend,y)(S)},a.onerror=this.#a(this.onerror,y),a.onabort=this.#a(this.onabort,y);try{a.load(o,m)}catch(S){return this.onerror({error:S,dataid:f}),void this.onloadend({dataid:f})}}#a(o,a){return function(c){let f=Object.keys(a);for(let m=0;m<f.length;++m){let y=f[m];c[y]=a[y]}o(c)}}onloadstart(o){}onprogress(o){}onload(o){}onloaditem(o){}onloadend(o){}onerror(o){}onabort(o){}}function yR(u){return function(o){return Number(o).toPrecision(u)}}function V_(u){let o="";for(let a=0;a<u;++a)a!==0&&(o+=", "),o+="{v"+a+"}";return o}function _0(u,o){let a=u;for(let c=0;c<o.length;++c)a=a.replace("{v"+c+"}",o[c]);return a}class B_{#e;#t;#n;#i=[];#r;#o=[];#s;#a=new ri;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c;let f=Object.keys(this.#n);for(let m=0;m<f.length;++m){let y=this.#n[f[m]];for(let S=0;S<y.length;++S){let D=y[S].event;D!==void 0&&(this.#i.includes(D)||this.#i.push(D))}}this.addAppListeners()}reset(){this.#o=[],this.#s=void 0}addItemMeta(o){let a;if(o["00020010"]!==void 0)a=o["00080018"]!==void 0?o["00080018"].value[0]:o.length,this.#o[a]=function(c,f){let m=[],y,S=c["00080060"];if(S===void 0)return m;y=S.value[0];let D=f[y]||f["*"];if(!D)return m;for(let I=0;I<D.length;++I){let R=JSON.parse(JSON.stringify(D[I])),P=R.tags;if(P!==void 0&&P.length!==0){let B=[];for(let z=0;z<P.length;++z)c[P[z]]!==void 0?B.push(c[P[z]].value):B.push("");R.format!==void 0&&R.format!==null||(R.format=V_(B.length)),R.value=_0(R.format,B).trim()}m.push(R)}let E=c["00200020"];if(E!==void 0&&E.value.length===2){let I=E.value[0],R=E.value[1];m.push({pos:"cr",value:I,format:"{v0}"}),m.push({pos:"cl",value:Vm(I),format:"{v0}"}),m.push({pos:"bc",value:R,format:"{v0}"}),m.push({pos:"tc",value:Vm(R),format:"{v0}"})}return m}(o,this.#n);else{let c=Object.keys(o);for(let f=0;f<c.length;++f){let m=o[c[f]];if(c[f]==="imageUid"){a=m.value;break}}this.#o[a]=function(f,m){let y=[],S=m.DOM;if(!S)return y;let D=Object.keys(f);for(let E=0;E<S.length;++E){let I=JSON.parse(JSON.stringify(S[E])),R=I.tags;if(R!==void 0&&R.length!==0){let P=[];for(let B=0;B<R.length;++B)for(let z=0;z<D.length;++z)R[B]===D[z]&&P.push(f[D[z]].value);I.format!==void 0&&I.format!==null||(I.format=V_(P.length)),I.value=_0(I.format,P).trim()}y.push(I)}return y}(o,this.#n)}this.#s=a}#c=o=>{o.dataid===this.#t&&o.data!==void 0&&o.data.imageUid!==void 0&&this.#s!==o.data.imageUid&&(this.#s=o.data.imageUid,this.#l(o))};#l=o=>{if(o.dataid!==this.#t)return;let a=this.#o[this.#s];if(a!==void 0){for(let c=0;c<a.length;++c){let f;if(a[c].tags!==void 0)o.type==="positionchange"&&(f=a[c].value);else if(a[c].event!==void 0&&a[c].event===o.type){let m=a[c].format,y=o.value;if(a[c].precision!==void 0){let S=null;S=a[c].precision==="round"?Math.round:yR(a[c].precision),y=y.map(S)}f=_0(m,y)}f!==void 0&&(a[c].value=f)}this.#u({type:"valuechange",data:a})}else console.warn("No slice overlay data for: "+this.#s)};isListening(){return this.#r}addAppListeners(){this.#e.addEventListener("positionchange",this.#c);for(let o=0;o<this.#i.length;++o)this.#e.addEventListener(this.#i[o],this.#l);this.#r=!0}removeAppListeners(){this.#e.removeEventListener("positionchange",this.#c);for(let o=0;o<this.#i.length;++o)this.#e.removeEventListener(this.#i[o],this.#l);this.#r=!1}addEventListener(o,a){this.#a.add(o,a)}removeEventListener(o,a){this.#a.remove(o,a)}#u(o){this.#a.fireEvent(o)}}class U_{divId;orientation;colourMap;opacity;wlPresetName;windowCenter;windowWidth;constructor(o){this.divId=o}}class SR{options;constructor(o){this.options=o}}class bR{dataViewConfigs;tools;binders;viewOnFirstLoadItem;defaultCharacterSet;overlayConfig;rootDocument;constructor(o){this.dataViewConfigs=o}}class _R{#e=null;#t=null;#n=null;#i=null;#r=null;#o=null;#s=new Yd;#a={};#c=new ri;getData(o){return this.#t.get(o)}getImage(o){let a;return this.getData(o)!==void 0&&(a=this.getData(o).image),a}setImage(o,a){this.#t.setImage(o,a)}addData(o){let a=this.#t.getNextDataId();return this.#t.add(a,o),a}getMetaData(o){let a;return this.#t.get(o)!==void 0&&(a=this.#t.get(o).meta),a}getDataIds(){return this.#t.getDataIds()}getDataIdsFromSopUids(o){return this.#t.getDataIdsFromSopUids(o)}canScroll(){return this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().canScroll()}canWindowLevel(){return this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().canWindowLevel()}getAddedScale(){return this.#r.getActiveLayerGroup().getAddedScale()}getBaseScale(){return this.#r.getActiveLayerGroup().getBaseScale()}getOffset(){return this.#r.getActiveLayerGroup().getOffset()}getToolboxController(){return this.#n}getActiveLayerGroup(){return this.#r.getActiveLayerGroup()}setActiveLayerGroup(o){this.#r.setActiveLayerGroup(o)}getViewLayersByDataId(o){return this.#r.getViewLayersByDataId(o)}getViewLayers(o){return this.#r.getViewLayers(o)}getDrawLayersByDataId(o){return this.#r.getDrawLayersByDataId(o)}getDrawLayers(o){return this.#r.getDrawLayers(o)}getLayerGroupByDivId(o){return this.#r.getLayerGroupByDivId(o)}getNumberOfLayerGroups(){return this.#r.getNumberOfLayerGroups()}getStyle(){return this.#s}addToUndoStack=o=>{this.#o!==null&&this.#o.add(o)};removeFromUndoStack=o=>{let a=!1;return this.#o!==null&&(a=this.#o.remove(o)),a};init(o){if(this.#e=o,this.#e.viewOnFirstLoadItem===void 0&&(this.#e.viewOnFirstLoadItem=!0),this.#e.dataViewConfigs===void 0&&(this.#e.dataViewConfigs={}),this.#e.rootDocument===void 0&&(this.#e.rootDocument=document),this.#o=new __,this.#o.addEventListener("undoadd",this.#d),this.#o.addEventListener("undo",this.#d),this.#o.addEventListener("redo",this.#d),this.#e.tools!==void 0){let a={},c=Object.keys(this.#e.tools);for(let f=0;f<c.length;++f){let m=c[f],y=YM[m];if(y===void 0&&(y=h_[m]),y!==void 0){if(a[m]=new y(this),a[m].addEventListener!==void 0){let D=a[m].getEventNames();for(let E=0;E<D.length;++E)a[m].addEventListener(D[E],this.#d)}let S=this.#e.tools[m];if(S.options!==void 0&&S.options.length!==0){let D,E="raw";if(a[m].getOptionsType!==void 0&&(E=a[m].getOptionsType()),E==="instance"||E==="factory"){D={};for(let I=0;I<S.options.length;++I){let R=S.options[I],P=R;E==="factory"&&(P+="Factory");let B=m.charAt(0).toLowerCase()+m.slice(1),z,J=ec[B];J!==void 0&&(z=J[P]),z===void 0&&(J=f0[B],J!==void 0&&(z=J[P])),z!==void 0?D[R]=z:p.warn("Could not find option class for: "+R)}}else D=S.options;a[m].setOptions(D)}}else p.warn("Could not initialise unknown tool: "+m)}this.#n=new D_(a)}this.#i=new vR(this.#e.defaultCharacterSet),this.#i.onloadstart=this.#f,this.#i.onprogress=this.#h,this.#i.onloaditem=this.#p,this.#i.onload=this.#m,this.#i.onloadend=this.#v,this.#i.onerror=this.#y,this.#i.onabort=this.#S,this.#t=new fR,this.#t.addEventListener("dataadd",this.#d),this.#t.addEventListener("dataremove",this.#d),this.#t.addEventListener("dataimageset",this.#d),this.#t.addEventListener("dataupdate",this.#d),this.#t.addEventListener("imagecontentchange",this.#d),this.#t.addEventListener("imagegeometrychange",this.#d),this.#t.addEventListener("annotationadd",this.#d),this.#t.addEventListener("annotationupdate",this.#d),this.#t.addEventListener("annotationremove",this.#d),this.#t.addEventListener("annotationgroupeditablechange",this.#d),this.#r=new XM,this.#e.binders!==void 0&&this.#r.setBinders(this.#e.binders)}reset(){this.#r.empty(),this.#a={},this.#o&&(this.#o=new __,this.#o.addEventListener("undoadd",this.#d),this.#o.addEventListener("undo",this.#d),this.#o.addEventListener("redo",this.#d))}resetLayout(){this.#r.reset(),this.#r.draw()}addEventListener(o,a){this.#c.add(o,a)}removeEventListener(o,a){this.#c.remove(o,a)}loadFiles=o=>{let a=this.#t.getNextDataId();o.length!==0?this.#i.loadFiles(o,a):p.warn("Ignoring empty input file list.")};loadURLs=(o,a)=>{let c=this.#t.getNextDataId();o.length!==0?this.#i.loadURLs(o,c,a):p.warn("Ignoring empty input url list.")};loadFromUri=(o,a)=>{let c=function(m){let y=b_(m);return Object.keys(y).length===0?null:y.query}(o),f=()=>{this.removeEventListener("loadend",f),this.loadURLs([c.state])};c&&c.input!==void 0&&(c.state!==void 0&&this.addEventListener("loadend",f),function(m,y,S){m.type&&m.type==="manifest"?function(D,E){let I="";D.input[0]==="/"&&(I=window.location.protocol+"//"+window.location.host),I+=D.input;let R=new XMLHttpRequest;R.open("GET",decodeURIComponent(I),!0),R.responseType="document",R.onload=function(P){E(function(B,z){let J=[],te=B.getElementsByTagName("wado_query")[0].getAttribute("wadoURL")+"?requestType=WADO&contentType=application/dicom&",ve=B.getElementsByTagName("Patient");ve.length>1&&p.warn("More than one patient, loading first one.");let ie=ve[0].getElementsByTagName("Study");ie.length>1&&p.warn("More than one study, loading first one.");let se=ie[0].getAttribute("StudyInstanceUID"),ae=ie[0].getElementsByTagName("Series");ae.length>1&&p.warn("More than one series, loading first one.");let re=ae[0].getAttribute("SeriesInstanceUID"),Ce=ae[0].getElementsByTagName("Instance"),we=Ce.length;z<we&&(we=z);for(let Ae=0;Ae<we;++Ae){let Ne=te+"&studyUID="+se+"&seriesUID="+re+"&objectUID="+Ce[Ae].getAttribute("SOPInstanceUID");J.push(Ne)}return J}(P.target.responseXML,D.nslices))},R.onerror=function(P){p.warn("RequestError while receiving manifest: "+P.target.status)},R.send(null)}(m,y):y(function(D,E){let I=[],R="key";E&&(R=E);let P=decodeURIComponent(D),B=b_(P);if(Object.keys(B).length===0)I.push(P);else{let z=Object.keys(B.query),J=null;for(let te=0;te<z.length;++te)if(B.query[z[te]]instanceof Array){J=z[te];break}if(J){let te=B.query[J],ve=B.base;ve!==""&&J!=="file"&&(ve+="?");let ie,se=!1;for(let ae=0;ae<z.length;++ae)z[ae]!==J&&(se&&(ve+="&"),ve+=z[ae]+"="+B.query[z[ae]],se=!0);for(let ae=0;ae<te.length;++ae)ie=ve,se&&(ie+="&"),R==="key"&&(ie+=J+"="),ie+=te[ae],I.push(ie)}else I.push(P)}return I}(m.input,m.dwvReplaceMode),S)}(c,this.loadURLs,a))};loadImageObject=o=>{let a=this.#t.getNextDataId();this.#i.loadImageObject(o,a)};abortAllLoads(){let o=this.#i.getLoadingDataIds();for(let a of o)this.abortLoad(a)}abortLoad(o){this.#i.abort(o),this.#t.remove(o),this.#r.removeLayersByDataId(o)}fitToContainer(){this.#r.fitToContainer()}initWLDisplay(){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().initialise()}setImageSmoothing(o){this.#r.setImageSmoothing(o),this.#r.draw()}getViewConfigs(o,a){if(this.#e.dataViewConfigs===null||this.#e.dataViewConfigs===void 0)throw new Error("No available data view configuration");let c=[];return this.#e.dataViewConfigs[o]!==void 0?c=this.#e.dataViewConfigs[o]:a||this.#e.dataViewConfigs["*"]===void 0||(c=this.#e.dataViewConfigs["*"]),c}getViewConfig(o,a,c){return this.getViewConfigs(o,c).find(function(f){return f.divId===a})}getDataViewConfigs(){return this.#e.dataViewConfigs}setDataViewConfigs(o){this.#r.empty(),this.#e.dataViewConfigs=o,this.#l(o)}addDataViewConfig(o,a){let c=this.#e.dataViewConfigs;if(c[o]===void 0&&(c[o]=[]),c[o].findIndex(function(f){return f.divId===a.divId})!==-1)throw new Error("Duplicate view config for data "+o+" and div "+a.divId);this.#e.dataViewConfigs[o].push(a),this.#r.getLayerGroupByDivId(a.divId)===void 0&&this.#u(a),this.#t.get(o)!==void 0&&this.render(o,[a])}removeDataViewConfig(o,a){let c=this.#e.dataViewConfigs;if(c[o]===void 0)return;let f=c[o].findIndex(function(m){return m.divId===a});if(f!==-1&&(c[o].splice(f,1),c[o].length===0&&delete c[o],this.#t.get(o)!==void 0)){let m=this.#r.getLayerGroupByDivId(a);if(m!==void 0){let y=m.getViewLayersByDataId(o);y.length===1&&m.removeLayer(y[0]);let S=m.getDrawLayersByDataId(o);if(S.length===1&&m.removeLayer(S[0]),y.length===0&&S.length===0)throw new Error("Expected one layer, got none");m.getNumberOfLayers()===0&&this.#r.removeLayerGroup(m)}}}updateDataViewConfig(o,a,c){let f=this.#e.dataViewConfigs;if(f[o]===void 0)throw new Error("No config for dataId: "+o);let m=f[o].findIndex(function(D){return D.divId===a});if(m===-1)throw new Error("No config for dataId: "+o+" and divId: "+a);let y=f[o][m];for(let D in c)y[D]=c[D];let S=this.#r.getLayerGroupByDivId(y.divId);if(S!==void 0){let D=S.getViewLayersByDataId(o);D.length===1&&S.removeLayer(D[0]);let E=S.getDrawLayersByDataId(o);if(E.length===1&&S.removeLayer(E[0]),D.length===0&&E.length===0)throw new Error("Expected one layer, got none")}this.#t.get(o)!==void 0&&this.render(o,[y])}#l(o){let a=Object.keys(o),c=[];for(let f=0;f<a.length;++f){let m=o[a[f]];for(let y=0;y<m.length;++y){let S=m[y];c.includes(S.divId)||(this.#u(S),c.push(S.divId))}}}#u(o){let a=this.#e.rootDocument.getElementById(o.divId),c=this.#r.addLayerGroup(a);this.#b(c)}setLayerGroupsBinders(o){let a=[];for(let c=0;c<o.length;++c)y_[o[c]]!==void 0&&a.push(new y_[o[c]]);this.#r.setBinders(a)}render(o,a){if(o==null)throw new Error("Cannot render without data id");let c=this.getData(o).image!==void 0,f=this.getData(o).annotationGroup!==void 0;if(this.#r.getNumberOfLayerGroups()===0&&this.#l(this.#e.dataViewConfigs),a===void 0&&(a=this.getViewConfigs(o)),a.length!==0)for(let m=0;m<a.length;++m){let y=a[m],S=this.#r.getLayerGroupByDivId(y.divId);if(!S)throw new Error("No layer group for "+y.divId);this.#t.get(o)!==void 0&&(c&&S.getViewLayersByDataId(o).length===0?this.#_(o,y):f&&S.getDrawLayersByDataId(o).length===0&&this.addDrawLayer(o,y)),S.draw()}else p.info("Not rendering data: "+o+" (no data view config)")}zoom(o,a,c){let f=this.#r.getActiveLayerGroup(),m=f.getActiveViewLayer().getViewController().getCurrentScrollPosition(),y=new W(a,c,m);f.addScale(o,y),f.draw()}translate(o,a){let c=this.#r.getActiveLayerGroup();c.addTranslation({x:o,y:a,z:0}),c.draw()}setOpacity(o){let a=this.#r.getActiveLayerGroup().getActiveViewLayer();a.setOpacity(o),a.draw()}setDrawings(o,a,c){let f=this.#r.getActiveLayerGroup().getActiveViewLayer(),m=f.getDataId(),y=f.getViewController(),S=function(E,I){let R=[],P=pe().Node.create(E).getChildren(c_);for(let B=0,z=P.length;B<z;++B){let J=P[B].getChildren();for(let te=0,ve=J.length;te<ve;++te){let ie=new Is,se=J[0];ie.id=se.id();let ae=se.getChildren(ko)[0];if(ie.colour=ae.stroke(),se.name()==="line-group"){let re=ae.points();ie.mathShape=new N(re[0],re[1]),ie.referencePoints=[new N(re[2],re[3])]}else if(se.name()==="ruler-group"){let re=ae.points();ie.mathShape=new an(new N(re[0],re[1]),new N(re[2],re[3]))}else if(se.name()==="rectangle-group")ie.mathShape=new Lo(new N(ae.x(),ae.y()),new N(ae.x()+ae.width(),ae.y()+ae.height()));else if(se.name()==="roi-group"){let re=ae.points(),Ce=[];for(let we=0;we<re.length;we+=2)Ce.push(new N(re[we],re[we+1]));ie.mathShape=new Bi(Ce)}else if(se.name()==="freeHand-group"){p.warn("Converting freehand into ROI shape");let re=ae.points(),Ce=[];for(let we=0;we<re.length;we+=2)Ce.push(new N(re[we],re[we+1]));ie.mathShape=new Bi(Ce)}else if(se.name()==="protractor-group"){let re=ae.points();ie.mathShape=new No([new N(re[0],re[1]),new N(re[2],re[3]),new N(re[4],re[5])])}else if(se.name()==="ellipse-group"){let re=ae.absolutePosition();ie.mathShape=new Vo(new N(re.x,re.y),ae.radiusX(),ae.radiusY())}else if(se.name()==="circle-group"){let re=ae.absolutePosition();ie.mathShape=new Bo(new N(re.x,re.y),ae.radius())}if(I){let re=I[se.id()];ie.textExpr=re.meta.textExpr,ie.quantification=re.meta.quantification}R.push(ie)}}return R}(o,a),D=this.createAnnotationData(m);for(let E of S)E.setViewController(y),D.annotationGroup.add(E);this.#t.add(c,D),this.render(c)}applyJsonState(o,a){let c=new ZM(a);c.apply(this,c.fromJSON(o))}onResize=()=>{this.fitToContainer()};onKeydown=o=>{this.#d(o)};defaultOnKeydown=o=>{if(o.ctrlKey){if(o.shiftKey){let a=this.#r.getActiveLayerGroup(),c=a.getActiveViewLayer().getViewController();o.key==="ArrowLeft"?c.moreThanOne(3)&&c.decrementIndex(3):o.key==="ArrowUp"?a.canScroll()&&c.incrementScrollIndex():o.key==="ArrowRight"?a.moreThanOne(3)&&c.incrementIndex(3):o.key==="ArrowDown"&&a.canScroll()&&c.decrementScrollIndex()}else if(o.key==="y")this.#o.redo();else if(o.key==="z")this.#o.undo();else if(o.key===" ")for(let a=0;a<this.#r.getNumberOfLayerGroups();++a)this.#r.getLayerGroup(a).setShowCrosshair(!this.#r.getLayerGroup(a).getShowCrosshair())}};resetDisplay(){this.resetLayout(),this.initWLDisplay()}resetZoom(){this.resetLayout()}setColourMap(o){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().setColourMap(o)}setWindowLevelPreset(o){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().setWindowLevelPreset(o)}setTool(o){for(let a=0;a<this.#r.getNumberOfLayerGroups();++a){let c=this.#r.getLayerGroup(a),f;f=o!=="Draw"&&o!=="Livewire"&&o!=="Floodfill"||c.getActiveDrawLayer()===void 0?c.getActiveViewLayer():c.getActiveDrawLayer(),f!==void 0&&this.#n.bindLayerGroup(c,f)}this.#n.setSelectedTool(o)}setToolFeatures(o){this.#n.setToolFeatures(o)}undo(){this.#o.undo()}redo(){this.#o.redo()}getStackSize(){return this.#o.getStackSize()}getCurrentStackIndex(){return this.#o.getCurrentStackIndex()}getOverlayData(o){let a;return this.#a!==void 0&&(a=this.#a[o]),a}toggleOverlayListeners(o){let a=this.getOverlayData(o);a!==void 0&&(a.isListening()?a.removeAppListeners():a.addAppListeners())}createAnnotationData(o){let a=this.getData(o).image.getMeta(),c=new S0({});return c.annotationGroup=new $d,c.annotationGroup.setMetaValue("Modality","SR"),c.annotationGroup.setMetaValue("PatientID",a.PatientID),c.annotationGroup.setMetaValue("StudyInstanceUID",a.StudyInstanceUID),c.annotationGroup.setMetaValue("ReferencedSeriesSequence",{value:[{SeriesInstanceUID:a.SeriesInstanceUID}]}),c}addAndRenderAnnotationData(o,a,c){let f=this.addData(o),m=this.getViewConfigs(c).find(S=>S.divId===a);if(m===void 0)throw new Error("No reference data view config for draw");let y=new U_(a);y.orientation=m.orientation,this.addDataViewConfig(f,y),this.render(f)}#d=o=>{this.#c.fireEvent(o)};#f=o=>{this.#e.overlayConfig!==void 0&&(this.#a[o.dataid]=new B_(this,o.dataid,this.#e.overlayConfig)),o.type="loadstart",this.#d(o)};#h=o=>{o.type="loadprogress",this.#d(o)};#p=o=>{o.data===void 0&&p.error("Missing loaditem event data."),o.loadtype===void 0&&p.error("Missing loaditem event load type.");let a=o.isfirstitem,c=null;o.loadtype==="image"?(a?this.#t.add(o.dataid,o.data):this.#t.update(o.dataid,o.data),c=o.data.meta):o.loadtype==="state"&&(this.applyJsonState(o.data,o.dataid),c="state"),this.#d({type:"loaditem",data:c,source:o.source,loadtype:o.loadtype,dataid:o.dataid,isfirstitem:o.isfirstitem,warn:o.warn}),this.#a!==void 0&&this.#a[o.dataid]!==void 0&&this.#a[o.dataid].addItemMeta(c),o.loadtype==="image"&&this.getViewConfigs(o.dataid).length!==0&&a&&this.#e.viewOnFirstLoadItem&&this.render(o.dataid)};#m=o=>{o.type="load",this.#d(o)};#v=o=>{o.type="loadend",this.#d(o)};#y=o=>{o.type===void 0&&(o.type="error"),this.#d(o)};#S=o=>{o.type===void 0&&(o.type="abort"),this.#d(o)};#b(o){o.addEventListener("zoomchange",this.#d),o.addEventListener("offsetchange",this.#d),o.addEventListener("renderstart",this.#d),o.addEventListener("renderend",this.#d);for(let a=0;a<wa.length;++a)o.addEventListener(wa[a],this.#d);this.#n&&this.#n.hasTool("Draw")&&(o.addEventListener("drawcreate",this.#d),o.addEventListener("drawdelete",this.#d)),o.addEventListener("wlchange",a=>{let c=Jd(a.srclayerid).groupDivId,f=this.getViewConfig(a.dataid,c,!0);f!==void 0&&(f.windowCenter=void 0,f.windowWidth=void 0,f.wlPresetName=void 0,a.value.length===3&&(f.windowCenter=a.value[0],f.windowWidth=a.value[1],f.wlPresetName=a.value[2]))}),o.addEventListener("opacitychange",a=>{let c=Jd(a.srclayerid).groupDivId,f=this.getViewConfig(a.dataid,c,!0);f!==void 0&&(f.opacity=a.value[0])}),o.addEventListener("colourmapchange",a=>{let c=Jd(a.srclayerid).groupDivId,f=this.getViewConfig(a.dataid,c,!0);f!==void 0&&(f.colourMap=a.value[0])})}#_(o,a){let c=this.#t.get(o);if(!c)throw new Error("Cannot initialise layer with missing data, id: "+o);let f=this.#r.getLayerGroupByDivId(a.divId);if(!f)throw new Error("Cannot initialise layer with missing group, id: "+a.divId);let m=c.image.getGeometry();this.#r.unbindLayerGroups();let y=new i_().create(c.meta,c.image),S=xb(m.getOrientation(),wb(a.orientation));y.setOrientation(S),c.image.getMeta().Modality==="SEG"&&y.setAlphaFunction(function(te){return te[0]===0&&te[1]===0&&te[2]===0?0:255});let D=f.getNumberOfViewLayers()===0,E=1;a.opacity!==void 0?E=a.opacity:D||(E=.5);let I=f.addViewLayer();I.setView(y,o);let R=m.getSize(S).get2D(),P=m.getSpacing(S).get2D();I.initialise(R,P,E);let B=I.getViewController();if(a.wlPresetName!==void 0)B.setWindowLevelPreset(a.wlPresetName);else if(a.windowCenter!==void 0&&a.windowWidth!==void 0){let te=new g(a.windowCenter,a.windowWidth);B.setWindowLevel(te)}a.colourMap!==void 0?B.setColourMap(a.colourMap):D||(c.image.getMeta().Modality==="PT"?B.setColourMap("hot"):B.setColourMap("rainbow")),this.#t.addEventListener("dataimageset",I.onimageset);let z=[B.getCurrentIndex().getValues(),B.getCurrentPosition().getValues()];f.updateLayersToPositionChange({value:z,srclayerid:I.getId()}),this.#r.fitToContainer(),I.setOffset(f.getOffset());let J=this.#g(m.getOrientation(),a.orientation);if(this.#D(J,I),D)I.setScale(f.getScale());else{let te=f.getBaseViewLayer();I.initScale(f.getScale(),te.getAbsoluteZoomOffset())}this.#r.bindLayerGroups(),this.#n&&this.#n.bindLayerGroup(f,I),this.#d({type:"viewlayeradd",layerid:I.getId(),layergroupid:f.getDivId(),dataid:o}),D&&this.#n&&this.#n.init()}addDrawLayer(o,a){let c=this.#r.getLayerGroupByDivId(a.divId);if(!c)throw new Error("Cannot initialise layer with missing group, id: "+a.divId);let f=this.#t.get(o);if(!f)throw new Error("Cannot initialise layer with missing data, id: "+o);let m=f.annotationGroup.getMetaValue("ReferencedSeriesSequence").value[0].SeriesInstanceUID,y=c.searchViewLayers({SeriesInstanceUID:m});if(y.length===0)return void console.warn("No loaded data that matches the measurement reference series UID");let S=y[0],D=S.getDataId();this.#r.unbindLayerGroups();let E=S.getViewController();f.annotationGroup.setViewController(E);let I=this.#t.get(D);if(!I)throw new Error("Cannot initialise layer without reference data, id: "+D);let R=I.image.getGeometry(),P=xb(R.getOrientation(),wb(a.orientation)),B=R.getSize(P).get2D(),z=R.getSpacing(P).get2D(),J=c.addDrawLayer();J.initialise(B,z,S.getId());let te=new o0(R,P);J.setPlaneHelper(te);let ve=[E.getCurrentIndex().getValues(),E.getCurrentPosition().getValues()];c.updateLayersToPositionChange({value:ve,srclayerid:J.getId()}),this.#r.fitToContainer(),J.setOffset(c.getOffset());let ie=this.#g(R.getOrientation(),a.orientation);this.#D(ie,J),J.initScale(c.getScale(),S.getAbsoluteZoomOffset()),J.setAnnotationGroup(f.annotationGroup,o,this.addToUndoStack),J.setCurrentPosition(E.getCurrentPosition(),E.getCurrentIndex()),this.#r.bindLayerGroups(),this.#n&&this.#n.bindLayerGroup(c,J),this.#d({type:"drawlayeradd",layerid:J.getId(),layergroupid:c.getDivId(),dataid:o})}#g(o,a){let c=Ib(o.asOneAndZeros());if(c===void 0)throw new Error("Unsupported undefined orientation code");let f=a===void 0,m=!f&&a===Sr.Axial,y=!f&&a===Sr.Coronal,S=!f&&a===Sr.Sagittal,D={x:!1,y:!1},E={x:!1,y:!1,z:!1};return c==="LPS"?(y||S)&&(E.z=!0,D.y=!0):c==="LAI"?f||m?D.y=!0:y?E.z=!0:S&&(E.z=!0,D.x=!0):c==="RPI"?f||m?D.x=!0:y?(E.z=!0,D.x=!0):S&&(E.z=!0):c==="RAS"?(D.x=!0,D.y=!0,(y||S)&&(E.z=!0)):c==="LSA"?(D.y=!0,f||y?E.z=!0:m?E.y=!0:S&&(D.x=!0,E.y=!0,E.z=!0)):c==="RSP"?f||y?(D.x=!0,D.y=!0,E.x=!0,E.z=!0):m?(D.x=!0,E.x=!0):S&&(D.y=!0,E.z=!0):c==="RIA"?(D.x=!0,f||y?E.x=!0:m?(D.y=!0,E.x=!0,E.y=!0):S&&(E.y=!0)):c==="PSL"?(E.z=!0,(f||S||y)&&(D.y=!0)):c==="PIR"?(E.z=!0,(m||y)&&(D.x=!0)):c==="ASR"?(D.x=!0,D.y=!0,(f||S||y)&&(E.z=!0)):c==="AIL"?f||S?(D.x=!0,E.z=!0):m?D.y=!0:y&&(E.z=!0):p.warn("Unsupported orientation code: "+c+", display could be incorrect"),{scale:E,offset:D}}#D(o,a){o.offset.x&&a.addFlipOffsetX(),o.offset.y&&a.addFlipOffsetY(),o.scale.x&&a.flipScaleX(),o.scale.y&&a.flipScaleY(),o.scale.z&&a.flipScaleZ()}}class D0{#e;#t;constructor(o){this.#e=o;let a=o.getMeta();a.custom===void 0&&(a.custom={}),a.custom.segments===void 0&&(a.custom.segments=[]),this.#t=a.custom.segments}#n(o){return this.#t.findIndex(function(a){return a.number===o})}hasSegment(o){return this.#n(o)!==-1}getNumberOfSegments(){return this.#t.length}maskHasSegments(o){let a=[],c=[];for(let m=0;m<o.length;++m){let y=this.getSegment(o[m]);y!==void 0?y.displayValue!==void 0?a.push(y.displayValue):a.push(y.displayRGBValue):(p.warn("Unknown segment in maskHasSegments: "+o[m]),c.push(m))}let f=this.#e.hasValues(a);for(let m=0;m<c.length;++m)f.splice(c[m],0,!1);return f}getSegment(o){let a,c=this.#n(o);return c!==-1&&(a=this.#t[c]),a}addSegment(o){this.#n(o.number)===-1?this.#t.push(o):p.warn("Not adding segment, it is allready in the segments list: "+o.number)}removeSegment(o){let a=this.#n(o);a!==-1?this.#t.splice(a,1):p.warn("Cannot remove segment, it is not in the segments list: "+o)}updateSegment(o){let a=this.#n(o.number);a!==-1?this.#t[a]=o:p.warn("Cannot update segment, it is not in the segments list: "+o.number)}}class DR{#e;#t;#n;#i;constructor(o,a,c){this.#e=o,this.#t=a,this.#n=c!==void 0&&c,a.displayRGBValue!==void 0?this.#i=o.getOffsets(a.displayRGBValue):this.#i=o.getOffsets(a.displayValue)}getName(){return"Delete-segment"}isValid(){return this.#e.getMeta().custom.segments.some(o=>o.number===this.#t.number)}execute(){this.#i.length!==0&&(this.#t.displayRGBValue!==void 0?this.#e.setAtOffsets(this.#i,L):this.#e.setAtOffsets(this.#i,0)),new D0(this.#e).removeSegment(this.#t.number),this.#n||this.onExecute({type:"masksegmentdelete",segmentnumber:this.#t.number})}undo(){this.#i.length!==0&&(this.#t.displayRGBValue!==void 0?this.#e.setAtOffsets(this.#i,this.#t.displayRGBValue):this.#e.setAtOffsets(this.#i,this.#t.displayValue)),new D0(this.#e).addSegment(this.#t),this.onUndo({type:"masksegmentredraw",segmentnumber:this.#t.number})}onExecute(o){}onUndo(o){}}class CR{#e;#t;#n;#i;#r;#o;constructor(o,a,c,f){this.#e=o,this.#t=a,this.#n=c,this.#r=f!==void 0&&f,a.displayRGBValue!==void 0?this.#i=a.displayRGBValue:this.#i=a.displayValue,this.#o=o.getOffsets(this.#i)}getName(){return"Change-segment-colour"}isValid(){return this.#o.length!==0}execute(){this.#e.setAtOffsets(this.#o,this.#n),typeof this.#n=="number"?this.#t.displayValue=this.#n:this.#t.displayRGBValue=this.#n,this.#r||this.onExecute({type:"changemasksegmentcolour",segmentnumber:this.#t.number,value:[this.#n]})}undo(){this.#e.setAtOffsets(this.#o,this.#i),typeof this.#i=="number"?this.#t.displayValue=this.#i:this.#t.displayRGBValue=this.#i,this.onUndo({type:"changemasksegmentcolour",segmentnumber:this.#t.number,value:[this.#i]})}onExecute(o){}onUndo(o){}}class wR{#e=[];#t;#n(o){return this.#e.findIndex(function(a){return a.number===o})}isHidden(o){return this.#n(o)!==-1}addToHidden(o){this.isHidden(o.number)?p.warn("Not hidding segment, it is allready in the hidden list: "+o.number):(this.#e.push(o),this.#t=o.displayValue!==void 0)}removeFromHidden(o){let a=this.#n(o);a!==-1?this.#e.splice(a,1):p.warn("Cannot remove segment, it is not in the hidden list: "+o)}getAlphaFunc(){let o=[];this.#t?o[0]=0:o[0]={r:0,g:0,b:0};for(let c of this.#e)this.#t?o.push(c.displayValue):o.push(c.displayRGBValue);let a;return a=this.#t?function(c){for(let f=0;f<o.length;++f)if(c===o[f])return 0;return 255}:function(c){for(let f=0;f<o.length;++f)if(c[0]===o[f].r&&c[1]===o[f].g&&c[2]===o[f].b)return 0;return 255},a}}class IR{x;y}class ER{x;y;z}return l}()})});function G_(n,e){return Object.is(n,e)}var zn=null,du=!1,uu=1,_r=Symbol("SIGNAL");function _t(n){let e=zn;return zn=n,e}function z_(){return zn}var lc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function T0(n){if(du)throw new Error("");if(zn===null)return;zn.consumerOnSignalRead(n);let e=zn.nextProducerIndex++;if(mu(zn),e<zn.producerNode.length&&zn.producerNode[e]!==n&&ac(zn)){let i=zn.producerNode[e];pu(i,zn.producerIndexOfThis[e])}zn.producerNode[e]!==n&&(zn.producerNode[e]=n,zn.producerIndexOfThis[e]=ac(zn)?$_(n,zn,e):0),zn.producerLastReadVersion[e]=n.version}function LR(){uu++}function H_(n){if(!(ac(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===uu)){if(!n.producerMustRecompute(n)&&!A0(n)){n.dirty=!1,n.lastCleanEpoch=uu;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=uu}}function Q_(n){if(n.liveConsumerNode===void 0)return;let e=du;du=!0;try{for(let i of n.liveConsumerNode)i.dirty||NR(i)}finally{du=e}}function W_(){return zn?.consumerAllowSignalWrites!==!1}function NR(n){n.dirty=!0,Q_(n),n.consumerMarkedDirty?.(n)}function fu(n){return n&&(n.nextProducerIndex=0),_t(n)}function x0(n,e){if(_t(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ac(n))for(let i=n.nextProducerIndex;i<n.producerNode.length;i++)pu(n.producerNode[i],n.producerIndexOfThis[i]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function A0(n){mu(n);for(let e=0;e<n.producerNode.length;e++){let i=n.producerNode[e],t=n.producerLastReadVersion[e];if(t!==i.version||(H_(i),t!==i.version))return!0}return!1}function M0(n){if(mu(n),ac(n))for(let e=0;e<n.producerNode.length;e++)pu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function $_(n,e,i){if(Y_(n),n.liveConsumerNode.length===0&&X_(n))for(let t=0;t<n.producerNode.length;t++)n.producerIndexOfThis[t]=$_(n.producerNode[t],n,t);return n.liveConsumerIndexOfThis.push(i),n.liveConsumerNode.push(e)-1}function pu(n,e){if(Y_(n),n.liveConsumerNode.length===1&&X_(n))for(let t=0;t<n.producerNode.length;t++)pu(n.producerNode[t],n.producerIndexOfThis[t]);let i=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[i],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[i],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let t=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];mu(r),r.producerIndexOfThis[t]=e}}function ac(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Y_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function X_(n){return n.producerNode!==void 0}function R0(n){let e=Object.create(VR);e.computation=n;let i=()=>{if(H_(e),T0(e),e.value===hu)throw e.error;return e.value};return i[_r]=e,i}var I0=Symbol("UNSET"),E0=Symbol("COMPUTING"),hu=Symbol("ERRORED"),VR=nn(Ee({},lc),{value:I0,dirty:!0,error:null,equal:G_,producerMustRecompute(n){return n.value===I0||n.value===E0},producerRecomputeValue(n){if(n.value===E0)throw new Error("Detected cycle in computations.");let e=n.value;n.value=E0;let i=fu(n),t;try{t=n.computation()}catch(r){t=hu,n.error=r}finally{x0(n,i)}if(e!==I0&&e!==hu&&t!==hu&&n.equal(e,t)){n.value=e;return}n.value=t,n.version++}});function BR(){throw new Error}var Z_=BR;function K_(){Z_()}function J_(n){Z_=n}var UR=null;function e2(n){let e=Object.create(n2);e.value=n;let i=()=>(T0(e),e.value);return i[_r]=e,i}function O0(n,e){W_()||K_(),n.equal(n.value,e)||(n.value=e,qR(n))}function t2(n,e){W_()||K_(),O0(n,e(n.value))}var n2=nn(Ee({},lc),{equal:G_,value:void 0});function qR(n){n.version++,LR(),Q_(n),UR?.()}function Qe(n){return typeof n=="function"}function gu(n){let i=n(t=>{Error.call(t),t.stack=new Error().stack});return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var vu=gu(n=>function(i){n(this),this.message=i?`${i.length} errors occurred during unsubscription:
${i.map((t,r)=>`${r+1}) ${t.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=i});function Es(n,e){if(n){let i=n.indexOf(e);0<=i&&n.splice(i,1)}}var Yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:i}=this;if(i)if(this._parentage=null,Array.isArray(i))for(let s of i)s.remove(this);else i.remove(this);let{initialTeardown:t}=this;if(Qe(t))try{t()}catch(s){e=s instanceof vu?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{i2(s)}catch(l){e=e??[],l instanceof vu?e=[...e,...l.errors]:e.push(l)}}if(e)throw new vu(e)}}add(e){var i;if(e&&e!==this)if(this.closed)i2(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(e)}}_hasParent(e){let{_parentage:i}=this;return i===e||Array.isArray(i)&&i.includes(e)}_addParent(e){let{_parentage:i}=this;this._parentage=Array.isArray(i)?(i.push(e),i):i?[i,e]:e}_removeParent(e){let{_parentage:i}=this;i===e?this._parentage=null:Array.isArray(i)&&Es(i,e)}remove(e){let{_finalizers:i}=this;i&&Es(i,e),e instanceof n&&e._removeParent(this)}};Yt.EMPTY=(()=>{let n=new Yt;return n.closed=!0,n})();var P0=Yt.EMPTY;function yu(n){return n instanceof Yt||n&&"closed"in n&&Qe(n.remove)&&Qe(n.add)&&Qe(n.unsubscribe)}function i2(n){Qe(n)?n():n.unsubscribe()}var tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ma={setTimeout(n,e,...i){let{delegate:t}=Ma;return t?.setTimeout?t.setTimeout(n,e,...i):setTimeout(n,e,...i)},clearTimeout(n){let{delegate:e}=Ma;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Su(n){Ma.setTimeout(()=>{let{onUnhandledError:e}=tr;if(e)e(n);else throw n})}function $r(){}var r2=F0("C",void 0,void 0);function o2(n){return F0("E",void 0,n)}function s2(n){return F0("N",n,void 0)}function F0(n,e,i){return{kind:n,value:e,error:i}}var Ts=null;function Ra(n){if(tr.useDeprecatedSynchronousErrorHandling){let e=!Ts;if(e&&(Ts={errorThrown:!1,error:null}),n(),e){let{errorThrown:i,error:t}=Ts;if(Ts=null,i)throw t}}else n()}function a2(n){tr.useDeprecatedSynchronousErrorHandling&&Ts&&(Ts.errorThrown=!0,Ts.error=n)}var xs=class extends Yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=zR}static create(e,i,t){return new Yr(e,i,t)}next(e){this.isStopped?L0(s2(e),this):this._next(e)}error(e){this.isStopped?L0(o2(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?L0(r2,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jR=Function.prototype.bind;function k0(n,e){return jR.call(n,e)}var N0=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:i}=this;if(i.next)try{i.next(e)}catch(t){bu(t)}}error(e){let{partialObserver:i}=this;if(i.error)try{i.error(e)}catch(t){bu(t)}else bu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(i){bu(i)}}},Yr=class extends xs{constructor(e,i,t){super();let r;if(Qe(e)||!e)r={next:e??void 0,error:i??void 0,complete:t??void 0};else{let s;this&&tr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&k0(e.next,s),error:e.error&&k0(e.error,s),complete:e.complete&&k0(e.complete,s)}):r=e}this.destination=new N0(r)}};function bu(n){tr.useDeprecatedSynchronousErrorHandling?a2(n):Su(n)}function GR(n){throw n}function L0(n,e){let{onStoppedNotification:i}=tr;i&&Ma.setTimeout(()=>i(n,e))}var zR={closed:!0,next:$r,error:GR,complete:$r};var Oa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nr(n){return n}function l2(n){return n.length===0?nr:n.length===1?n[0]:function(i){return n.reduce((t,r)=>r(t),i)}}var Je=(()=>{class n{constructor(i){i&&(this._subscribe=i)}lift(i){let t=new n;return t.source=this,t.operator=i,t}subscribe(i,t,r){let s=QR(i)?i:new Yr(i,t,r);return Ra(()=>{let{operator:l,source:d}=this;s.add(l?l.call(s,d):d?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(i){try{return this._subscribe(i)}catch(t){i.error(t)}}forEach(i,t){return t=c2(t),new t((r,s)=>{let l=new Yr({next:d=>{try{i(d)}catch(h){s(h),l.unsubscribe()}},error:s,complete:r});this.subscribe(l)})}_subscribe(i){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(i)}[Oa](){return this}pipe(...i){return l2(i)(this)}toPromise(i){return i=c2(i),new i((t,r)=>{let s;this.subscribe(l=>s=l,l=>r(l),()=>t(s))})}}return n.create=e=>new n(e),n})();function c2(n){var e;return(e=n??tr.Promise)!==null&&e!==void 0?e:Promise}function HR(n){return n&&Qe(n.next)&&Qe(n.error)&&Qe(n.complete)}function QR(n){return n&&n instanceof xs||HR(n)&&yu(n)}function V0(n){return Qe(n?.lift)}function vt(n){return e=>{if(V0(e))return e.lift(function(i){try{return n(i,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dt(n,e,i,t,r){return new B0(n,e,i,t,r)}var B0=class extends xs{constructor(e,i,t,r,s,l){super(e),this.onFinalize=s,this.shouldUnsubscribe=l,this._next=i?function(d){try{i(d)}catch(h){e.error(h)}}:super._next,this._error=r?function(d){try{r(d)}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=t?function(){try{t()}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:i}=this;super.unsubscribe(),!i&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function d2(){return vt((n,e)=>{let i=null;n._refCount++;let t=Dt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){i=null;return}let r=n._connection,s=i;i=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(t),t.closed||(i=n.connect())})}var As=class extends Je{constructor(e,i){super(),this.source=e,this.subjectFactory=i,this._subject=null,this._refCount=0,this._connection=null,V0(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yt;let i=this.getSubject();e.add(this.source.subscribe(Dt(i,void 0,()=>{this._teardown(),i.complete()},t=>{this._teardown(),i.error(t)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yt.EMPTY)}return e}refCount(){return d2()(this)}};var u2=gu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends Je{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(i){let t=new _u(this,this);return t.operator=i,t}_throwIfClosed(){if(this.closed)throw new u2}next(i){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let t of this.currentObservers)t.next(i)}})}error(i){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=i;let{observers:t}=this;for(;t.length;)t.shift().error(i)}})}complete(){Ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:i}=this;for(;i.length;)i.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0}_trySubscribe(i){return this._throwIfClosed(),super._trySubscribe(i)}_subscribe(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)}_innerSubscribe(i){let{hasError:t,isStopped:r,observers:s}=this;return t||r?P0:(this.currentObservers=null,s.push(i),new Yt(()=>{this.currentObservers=null,Es(s,i)}))}_checkFinalizedStatuses(i){let{hasError:t,thrownError:r,isStopped:s}=this;t?i.error(r):s&&i.complete()}asObservable(){let i=new Je;return i.source=this,i}}return n.create=(e,i)=>new _u(e,i),n})(),_u=class extends ke{constructor(e,i){super(),this.destination=e,this.source=i}next(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.next)===null||t===void 0||t.call(i,e)}error(e){var i,t;(t=(i=this.destination)===null||i===void 0?void 0:i.error)===null||t===void 0||t.call(i,e)}complete(){var e,i;(i=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||i===void 0||i.call(e)}_subscribe(e){var i,t;return(t=(i=this.source)===null||i===void 0?void 0:i.subscribe(e))!==null&&t!==void 0?t:P0}};var Ai=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let i=super._subscribe(e);return!i.closed&&e.next(this._value),i}getValue(){let{hasError:e,thrownError:i,_value:t}=this;if(e)throw i;return this._throwIfClosed(),t}next(e){super.next(this._value=e)}};var cc={now(){return(cc.delegate||Date).now()},delegate:void 0};var Ms=class extends ke{constructor(e=1/0,i=1/0,t=cc){super(),this._bufferSize=e,this._windowTime=i,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=i===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,i)}next(e){let{isStopped:i,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:l}=this;i||(t.push(e),!r&&t.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let i=this._innerSubscribe(e),{_infiniteTimeWindow:t,_buffer:r}=this,s=r.slice();for(let l=0;l<s.length&&!e.closed;l+=t?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),i}_trimBuffer(){let{_bufferSize:e,_timestampProvider:i,_buffer:t,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<t.length&&t.splice(0,t.length-s),!r){let l=i.now(),d=0;for(let h=1;h<t.length&&t[h]<=l;h+=2)d=h;d&&t.splice(0,d+1)}}};var Du=class extends Yt{constructor(e,i){super()}schedule(e,i=0){return this}};var dc={setInterval(n,e,...i){let{delegate:t}=dc;return t?.setInterval?t.setInterval(n,e,...i):setInterval(n,e,...i)},clearInterval(n){let{delegate:e}=dc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Cu=class extends Du{constructor(e,i){super(e,i),this.scheduler=e,this.work=i,this.pending=!1}schedule(e,i=0){var t;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,i)),this.pending=!0,this.delay=i,this.id=(t=this.id)!==null&&t!==void 0?t:this.requestAsyncId(s,this.id,i),this}requestAsyncId(e,i,t=0){return dc.setInterval(e.flush.bind(e,this),t)}recycleAsyncId(e,i,t=0){if(t!=null&&this.delay===t&&this.pending===!1)return i;i!=null&&dc.clearInterval(i)}execute(e,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let t=this._execute(e,i);if(t)return t;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,i){let t=!1,r;try{this.work(e)}catch(s){t=!0,r=s||new Error("Scheduled action threw falsy error")}if(t)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:i}=this,{actions:t}=i;this.work=this.state=this.scheduler=null,this.pending=!1,Es(t,this),e!=null&&(this.id=this.recycleAsyncId(i,e,null)),this.delay=null,super.unsubscribe()}}};var Pa=class n{constructor(e,i=n.now){this.schedulerActionCtor=e,this.now=i}schedule(e,i=0,t){return new this.schedulerActionCtor(this,e).schedule(t,i)}};Pa.now=cc.now;var wu=class extends Pa{constructor(e,i=Pa.now){super(e,i),this.actions=[],this._active=!1}flush(e){let{actions:i}=this;if(this._active){i.push(e);return}let t;this._active=!0;do if(t=e.execute(e.state,e.delay))break;while(e=i.shift());if(this._active=!1,t){for(;e=i.shift();)e.unsubscribe();throw t}}};var Rs=new wu(Cu),h2=Rs;var Os=new Je(n=>n.complete());function Iu(n){return n&&Qe(n.schedule)}function U0(n){return n[n.length-1]}function Eu(n){return Qe(U0(n))?n.pop():void 0}function Dr(n){return Iu(U0(n))?n.pop():void 0}function f2(n,e){return typeof U0(n)=="number"?n.pop():e}function m2(n,e,i,t){function r(s){return s instanceof i?s:new i(function(l){l(s)})}return new(i||(i=Promise))(function(s,l){function d(g){try{p(t.next(g))}catch(v){l(v)}}function h(g){try{p(t.throw(g))}catch(v){l(v)}}function p(g){g.done?s(g.value):r(g.value).then(d,h)}p((t=t.apply(n,e||[])).next())})}function p2(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],t=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function g2(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i.apply(n,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(b){return function(C){return Promise.resolve(C).then(b,v)}}function d(b,C){t[b]&&(r[b]=function(w){return new Promise(function(x,M){s.push([b,w,x,M])>1||h(b,w)})},C&&(r[b]=C(r[b])))}function h(b,C){try{p(t[b](C))}catch(w){_(s[0][3],w)}}function p(b){b.value instanceof Ps?Promise.resolve(b.value.v).then(g,v):_(s[0][2],b)}function g(b){h("next",b)}function v(b){h("throw",b)}function _(b,C){b(C),s.shift(),s.length&&h(s[0][0],s[0][1])}}function v2(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof p2=="function"?p2(n):n[Symbol.iterator](),i={},t("next"),t("throw"),t("return"),i[Symbol.asyncIterator]=function(){return this},i);function t(s){i[s]=n[s]&&function(l){return new Promise(function(d,h){l=n[s](l),r(d,h,l.done,l.value)})}}function r(s,l,d,h){Promise.resolve(h).then(function(p){s({value:p,done:d})},l)}}var Fa=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tu(n){return Qe(n?.then)}function xu(n){return Qe(n[Oa])}function Au(n){return Symbol.asyncIterator&&Qe(n?.[Symbol.asyncIterator])}function Mu(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function WR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ru=WR();function Ou(n){return Qe(n?.[Ru])}function Pu(n){return g2(this,arguments,function*(){let i=n.getReader();try{for(;;){let{value:t,done:r}=yield Ps(i.read());if(r)return yield Ps(void 0);yield yield Ps(t)}}finally{i.releaseLock()}})}function Fu(n){return Qe(n?.getReader)}function Nt(n){if(n instanceof Je)return n;if(n!=null){if(xu(n))return $R(n);if(Fa(n))return YR(n);if(Tu(n))return XR(n);if(Au(n))return y2(n);if(Ou(n))return ZR(n);if(Fu(n))return KR(n)}throw Mu(n)}function $R(n){return new Je(e=>{let i=n[Oa]();if(Qe(i.subscribe))return i.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YR(n){return new Je(e=>{for(let i=0;i<n.length&&!e.closed;i++)e.next(n[i]);e.complete()})}function XR(n){return new Je(e=>{n.then(i=>{e.closed||(e.next(i),e.complete())},i=>e.error(i)).then(null,Su)})}function ZR(n){return new Je(e=>{for(let i of n)if(e.next(i),e.closed)return;e.complete()})}function y2(n){return new Je(e=>{JR(n,e).catch(i=>e.error(i))})}function KR(n){return y2(Pu(n))}function JR(n,e){var i,t,r,s;return m2(this,void 0,void 0,function*(){try{for(i=v2(n);t=yield i.next(),!t.done;){let l=t.value;if(e.next(l),e.closed)return}}catch(l){r={error:l}}finally{try{t&&!t.done&&(s=i.return)&&(yield s.call(i))}finally{if(r)throw r.error}}e.complete()})}function Ci(n,e,i,t=0,r=!1){let s=e.schedule(function(){i(),r?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(s),!r)return s}function ku(n,e=0){return vt((i,t)=>{i.subscribe(Dt(t,r=>Ci(t,n,()=>t.next(r),e),()=>Ci(t,n,()=>t.complete(),e),r=>Ci(t,n,()=>t.error(r),e)))})}function Lu(n,e=0){return vt((i,t)=>{t.add(n.schedule(()=>i.subscribe(t),e))})}function S2(n,e){return Nt(n).pipe(Lu(e),ku(e))}function b2(n,e){return Nt(n).pipe(Lu(e),ku(e))}function _2(n,e){return new Je(i=>{let t=0;return e.schedule(function(){t===n.length?i.complete():(i.next(n[t++]),i.closed||this.schedule())})})}function D2(n,e){return new Je(i=>{let t;return Ci(i,e,()=>{t=n[Ru](),Ci(i,e,()=>{let r,s;try{({value:r,done:s}=t.next())}catch(l){i.error(l);return}s?i.complete():i.next(r)},0,!0)}),()=>Qe(t?.return)&&t.return()})}function Nu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Je(i=>{Ci(i,e,()=>{let t=n[Symbol.asyncIterator]();Ci(i,e,()=>{t.next().then(r=>{r.done?i.complete():i.next(r.value)})},0,!0)})})}function C2(n,e){return Nu(Pu(n),e)}function w2(n,e){if(n!=null){if(xu(n))return S2(n,e);if(Fa(n))return _2(n,e);if(Tu(n))return b2(n,e);if(Au(n))return Nu(n,e);if(Ou(n))return D2(n,e);if(Fu(n))return C2(n,e)}throw Mu(n)}function hi(n,e){return e?w2(n,e):Nt(n)}function hn(...n){let e=Dr(n);return hi(n,e)}function uc(n,e){let i=Qe(n)?n:()=>n,t=r=>r.error(i());return new Je(e?r=>e.schedule(t,0,r):t)}function ka(n){return!!n&&(n instanceof Je||Qe(n.lift)&&Qe(n.subscribe))}function I2(n){return n instanceof Date&&!isNaN(n)}function Ct(n,e){return vt((i,t)=>{let r=0;i.subscribe(Dt(t,s=>{t.next(n.call(e,s,r++))}))})}var{isArray:e3}=Array;function t3(n,e){return e3(e)?n(...e):n(e)}function La(n){return Ct(e=>t3(n,e))}var{isArray:n3}=Array,{getPrototypeOf:i3,prototype:r3,keys:o3}=Object;function Vu(n){if(n.length===1){let e=n[0];if(n3(e))return{args:e,keys:null};if(s3(e)){let i=o3(e);return{args:i.map(t=>e[t]),keys:i}}}return{args:n,keys:null}}function s3(n){return n&&typeof n=="object"&&i3(n)===r3}function Bu(n,e){return n.reduce((i,t,r)=>(i[t]=e[r],i),{})}function Fs(...n){let e=Dr(n),i=Eu(n),{args:t,keys:r}=Vu(n);if(t.length===0)return hi([],e);let s=new Je(a3(t,e,r?l=>Bu(r,l):nr));return i?s.pipe(La(i)):s}function a3(n,e,i=nr){return t=>{E2(e,()=>{let{length:r}=n,s=new Array(r),l=r,d=r;for(let h=0;h<r;h++)E2(e,()=>{let p=hi(n[h],e),g=!1;p.subscribe(Dt(t,v=>{s[h]=v,g||(g=!0,d--),d||t.next(i(s.slice()))},()=>{--l||t.complete()}))},t)},t)}}function E2(n,e,i){n?Ci(i,n,e):e()}function T2(n,e,i,t,r,s,l,d){let h=[],p=0,g=0,v=!1,_=()=>{v&&!h.length&&!p&&e.complete()},b=w=>p<t?C(w):h.push(w),C=w=>{s&&e.next(w),p++;let x=!1;Nt(i(w,g++)).subscribe(Dt(e,M=>{r?.(M),s?b(M):e.next(M)},()=>{x=!0},void 0,()=>{if(x)try{for(p--;h.length&&p<t;){let M=h.shift();l?Ci(e,l,()=>C(M)):C(M)}_()}catch(M){e.error(M)}}))};return n.subscribe(Dt(e,b,()=>{v=!0,_()})),()=>{d?.()}}function Cr(n,e,i=1/0){return Qe(e)?Cr((t,r)=>Ct((s,l)=>e(t,s,r,l))(Nt(n(t,r))),i):(typeof e=="number"&&(i=e),vt((t,r)=>T2(t,r,n,i)))}function Uu(n=1/0){return Cr(nr,n)}function x2(){return Uu(1)}function wr(...n){return x2()(hi(n,Dr(n)))}function Go(n){return new Je(e=>{Nt(n()).subscribe(e)})}function hc(...n){let e=Eu(n),{args:i,keys:t}=Vu(n),r=new Je(s=>{let{length:l}=i;if(!l){s.complete();return}let d=new Array(l),h=l,p=l;for(let g=0;g<l;g++){let v=!1;Nt(i[g]).subscribe(Dt(s,_=>{v||(v=!0,p--),d[g]=_},()=>h--,void 0,()=>{(!h||!v)&&(p||s.next(t?Bu(t,d):d),s.complete())}))}});return e?r.pipe(La(e)):r}var l3=["addListener","removeListener"],c3=["addEventListener","removeEventListener"],d3=["on","off"];function Ir(n,e,i,t){if(Qe(i)&&(t=i,i=void 0),t)return Ir(n,e,i).pipe(La(t));let[r,s]=f3(n)?c3.map(l=>d=>n[l](e,d,i)):u3(n)?l3.map(A2(n,e)):h3(n)?d3.map(A2(n,e)):[];if(!r&&Fa(n))return Cr(l=>Ir(l,e,i))(Nt(n));if(!r)throw new TypeError("Invalid event target");return new Je(l=>{let d=(...h)=>l.next(1<h.length?h:h[0]);return r(d),()=>s(d)})}function A2(n,e){return i=>t=>n[i](e,t)}function u3(n){return Qe(n.addListener)&&Qe(n.removeListener)}function h3(n){return Qe(n.on)&&Qe(n.off)}function f3(n){return Qe(n.addEventListener)&&Qe(n.removeEventListener)}function qu(n=0,e,i=h2){let t=-1;return e!=null&&(Iu(e)?i=e:t=e),new Je(r=>{let s=I2(n)?+n-i.now():n;s<0&&(s=0);let l=0;return i.schedule(function(){r.closed||(r.next(l++),0<=t?this.schedule(void 0,t):r.complete())},s)})}function wi(...n){let e=Dr(n),i=f2(n,1/0),t=n;return t.length?t.length===1?Nt(t[0]):Uu(i)(hi(t,e)):Os}var ks=new Je($r);function wn(n,e){return vt((i,t)=>{let r=0;i.subscribe(Dt(t,s=>n.call(e,s,r++)&&t.next(s)))})}function M2(n){return vt((e,i)=>{let t=!1,r=null,s=null,l=!1,d=()=>{if(s?.unsubscribe(),s=null,t){t=!1;let p=r;r=null,i.next(p)}l&&i.complete()},h=()=>{s=null,l&&i.complete()};e.subscribe(Dt(i,p=>{t=!0,r=p,s||Nt(n(p)).subscribe(s=Dt(i,d,h))},()=>{l=!0,(!t||!s||s.closed)&&i.complete()}))})}function ju(n,e=Rs){return M2(()=>qu(n,e))}function Gu(n){return vt((e,i)=>{let t=null,r=!1,s;t=e.subscribe(Dt(i,void 0,void 0,l=>{s=Nt(n(l,Gu(n)(e))),t?(t.unsubscribe(),t=null,s.subscribe(i)):r=!0})),r&&(t.unsubscribe(),t=null,s.subscribe(i))})}function q0(n,e){return Qe(e)?Cr(n,e,1):Cr(n,1)}function R2(n){return new Je(e=>n.subscribe(e))}var p3={connector:()=>new ke};function zu(n,e=p3){let{connector:i}=e;return vt((t,r)=>{let s=i();Nt(n(R2(s))).subscribe(r),r.add(t.subscribe(s))})}function Hu(n,e=Rs){return vt((i,t)=>{let r=null,s=null,l=null,d=()=>{if(r){r.unsubscribe(),r=null;let p=s;s=null,t.next(p)}};function h(){let p=l+n,g=e.now();if(g<p){r=this.schedule(void 0,p-g),t.add(r);return}d()}i.subscribe(Dt(t,p=>{s=p,l=e.now(),r||(r=e.schedule(h,n),t.add(r))},()=>{d(),t.complete()},void 0,()=>{s=r=null}))})}function qn(n){return n<=0?()=>Os:vt((e,i)=>{let t=0;e.subscribe(Dt(i,r=>{++t<=n&&(i.next(r),n<=t&&i.complete())}))})}function O2(){return vt((n,e)=>{n.subscribe(Dt(e,$r))})}function P2(n){return Ct(()=>n)}function j0(n,e){return e?i=>wr(e.pipe(qn(1),O2()),i.pipe(j0(n))):Cr((i,t)=>Nt(n(i,t)).pipe(qn(1),P2(i)))}function G0(n,e=Rs){let i=qu(n,e);return j0(()=>i)}function Qu(n,e=nr){return n=n??m3,vt((i,t)=>{let r,s=!0;i.subscribe(Dt(t,l=>{let d=e(l);(s||!n(r,d))&&(s=!1,r=d,t.next(l))}))})}function m3(n,e){return n===e}function Wu(n){return vt((e,i)=>{try{e.subscribe(i)}finally{i.add(n)}})}function F2(n,e){let i=Qe(n)?n:()=>n;return Qe(e)?zu(e,{connector:i}):t=>new As(t,i)}function z0(n){return n?e=>zu(n)(e):e=>F2(new ke)(e)}function fc(n={}){let{connector:e=()=>new ke,resetOnError:i=!0,resetOnComplete:t=!0,resetOnRefCountZero:r=!0}=n;return s=>{let l,d,h,p=0,g=!1,v=!1,_=()=>{d?.unsubscribe(),d=void 0},b=()=>{_(),l=h=void 0,g=v=!1},C=()=>{let w=l;b(),w?.unsubscribe()};return vt((w,x)=>{p++,!v&&!g&&_();let M=h=h??e();x.add(()=>{p--,p===0&&!v&&!g&&(d=H0(C,r))}),M.subscribe(x),!l&&p>0&&(l=new Yr({next:F=>M.next(F),error:F=>{v=!0,_(),d=H0(b,i,F),M.error(F)},complete:()=>{g=!0,_(),d=H0(b,t),M.complete()}}),Nt(w).subscribe(l))})(s)}}function H0(n,e,...i){if(e===!0){n();return}if(e===!1)return;let t=new Yr({next:()=>{t.unsubscribe(),n()}});return Nt(e(...i)).subscribe(t)}function $u(n,e,i){let t,r=!1;return n&&typeof n=="object"?{bufferSize:t=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:i}=n:t=n??1/0,fc({connector:()=>new Ms(t,e,i),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function pc(n){return wn((e,i)=>n<=i)}function zo(...n){let e=Dr(n);return vt((i,t)=>{(e?wr(n,i,e):wr(n,i)).subscribe(t)})}function Ho(n,e){return vt((i,t)=>{let r=null,s=0,l=!1,d=()=>l&&!r&&t.complete();i.subscribe(Dt(t,h=>{r?.unsubscribe();let p=0,g=s++;Nt(n(h,g)).subscribe(r=Dt(t,v=>t.next(e?e(h,v,g,p++):v),()=>{r=null,d()}))},()=>{l=!0,d()}))})}function Xn(n){return vt((e,i)=>{Nt(n).subscribe(Dt(i,()=>i.complete(),$r)),!i.closed&&e.subscribe(i)})}function Xr(n,e,i){let t=Qe(n)||e||i?{next:n,error:e,complete:i}:n;return t?vt((r,s)=>{var l;(l=t.subscribe)===null||l===void 0||l.call(t);let d=!0;r.subscribe(Dt(s,h=>{var p;(p=t.next)===null||p===void 0||p.call(t,h),s.next(h)},()=>{var h;d=!1,(h=t.complete)===null||h===void 0||h.call(t),s.complete()},h=>{var p;d=!1,(p=t.error)===null||p===void 0||p.call(t,h),s.error(h)},()=>{var h,p;d&&((h=t.unsubscribe)===null||h===void 0||h.call(t)),(p=t.finalize)===null||p===void 0||p.call(t)}))}):nr}var wD="https://g.co/ng/security#xss",Me=class extends Error{constructor(e,i){super(m1(e,i)),this.code=e}};function m1(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Cc(n){return{toString:n}.toString()}var Yu="__parameters__";function g3(n){return function(...i){if(n){let t=n(...i);for(let r in t)this[r]=t[r]}}}function ID(n,e,i){return Cc(()=>{let t=g3(e);function r(...s){if(this instanceof r)return t.apply(this,s),this;let l=new r(...s);return d.annotation=l,d;function d(h,p,g){let v=h.hasOwnProperty(Yu)?h[Yu]:Object.defineProperty(h,Yu,{value:[]})[Yu];for(;v.length<=g;)v.push(null);return(v[g]=v[g]||[]).push(l),h}}return i&&(r.prototype=Object.create(i.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var sg=globalThis;function mn(n){for(let e in n)if(n[e]===mn)return e;throw Error("Could not find renamed property on target object.")}function v3(n,e){for(let i in e)e.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(n[i]=e[i])}function Mi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Mi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let i=e.indexOf(`
`);return i===-1?e:e.substring(0,i)}function ag(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var y3=mn({__forward_ref__:mn});function io(n){return n.__forward_ref__=io,n.toString=function(){return Mi(this())},n}function Kn(n){return ED(n)?n():n}function ED(n){return typeof n=="function"&&n.hasOwnProperty(y3)&&n.__forward_ref__===io}function xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ye(n){return{providers:n.providers||[],imports:n.imports||[]}}function g1(n){return k2(n,TD)||k2(n,xD)}function k2(n,e){return n.hasOwnProperty(e)?n[e]:null}function S3(n){let e=n&&(n[TD]||n[xD]);return e||null}function L2(n){return n&&(n.hasOwnProperty(N2)||n.hasOwnProperty(b3))?n[N2]:null}var TD=mn({\u0275prov:mn}),N2=mn({\u0275inj:mn}),xD=mn({ngInjectableDef:mn}),b3=mn({ngInjectorDef:mn}),Ie=class{constructor(e,i){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof i=="number"?this.__NG_ELEMENT_ID__=i:i!==void 0&&(this.\u0275prov=xe({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function AD(n){return n&&!!n.\u0275providers}var _3=mn({\u0275cmp:mn}),D3=mn({\u0275dir:mn}),C3=mn({\u0275pipe:mn});var ah=mn({\u0275fac:mn}),gc=mn({__NG_ELEMENT_ID__:mn}),V2=mn({__NG_ENV_ID__:mn});function v1(n){return typeof n=="string"?n:n==null?"":String(n)}function w3(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():v1(n)}function I3(n,e){let i=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Me(-200,n)}function y1(n,e){throw new Me(-201,!1)}var xt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(xt||{}),lg;function MD(){return lg}function Er(n){let e=lg;return lg=n,e}function RD(n,e,i){let t=g1(n);if(t&&t.providedIn=="root")return t.value===void 0?t.value=t.factory():t.value;if(i&xt.Optional)return null;if(e!==void 0)return e;y1(n,"Injector")}var E3={},vc=E3,cg="__NG_DI_FLAG__",lh="ngTempTokenPath",T3="ngTokenPath",x3=/\n/gm,A3="\u0275",B2="__source",ja;function M3(){return ja}function Na(n){let e=ja;return ja=n,e}function R3(n,e=xt.Default){if(ja===void 0)throw new Me(-203,!1);return ja===null?RD(n,void 0,e):ja.get(n,e&xt.Optional?null:void 0,e)}function le(n,e=xt.Default){return(MD()||R3)(Kn(n),e)}function Re(n,e=xt.Default){return le(n,Fh(e))}function Fh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function dg(n){let e=[];for(let i=0;i<n.length;i++){let t=Kn(n[i]);if(Array.isArray(t)){if(t.length===0)throw new Me(900,!1);let r,s=xt.Default;for(let l=0;l<t.length;l++){let d=t[l],h=O3(d);typeof h=="number"?h===-1?r=d.token:s|=h:r=d}e.push(le(r,s))}else e.push(le(t))}return e}function OD(n,e){return n[cg]=e,n.prototype[cg]=e,n}function O3(n){return n[cg]}function P3(n,e,i,t){let r=n[lh];throw e[B2]&&r.unshift(e[B2]),n.message=F3(`
`+n.message,r,i,t),n[T3]=r,n[lh]=null,n}function F3(n,e,i,t=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==A3?n.slice(2):n;let r=Mi(e);if(Array.isArray(e))r=e.map(Mi).join(" -> ");else if(typeof e=="object"){let s=[];for(let l in e)if(e.hasOwnProperty(l)){let d=e[l];s.push(l+":"+(typeof d=="string"?JSON.stringify(d):Mi(d)))}r=`{${s.join(", ")}}`}return`${i}${t?"("+t+")":""}[${r}]: ${n.replace(x3,`
  `)}`}var kh=OD(ID("Optional"),8);var S1=OD(ID("SkipSelf"),4);function za(n,e){let i=n.hasOwnProperty(ah);return i?n[ah]:null}function k3(n,e,i){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(i&&(r=i(r),s=i(s)),s!==r)return!1}return!0}function L3(n){return n.flat(Number.POSITIVE_INFINITY)}function b1(n,e){n.forEach(i=>Array.isArray(i)?b1(i,e):e(i))}function PD(n,e,i){e>=n.length?n.push(i):n.splice(e,0,i)}function ch(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function N3(n,e){let i=[];for(let t=0;t<n;t++)i.push(e);return i}function V3(n,e,i,t){let r=n.length;if(r==e)n.push(i,t);else if(r===1)n.push(t,n[0]),n[0]=i;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=i,n[e+1]=t}}function _1(n,e,i){let t=wc(n,e);return t>=0?n[t|1]=i:(t=~t,V3(n,t,e,i)),t}function Q0(n,e){let i=wc(n,e);if(i>=0)return n[i|1]}function wc(n,e){return B3(n,e,1)}function B3(n,e,i){let t=0,r=n.length>>i;for(;r!==t;){let s=t+(r-t>>1),l=n[s<<i];if(e===l)return s<<i;l>e?r=s:t=s+1}return~(r<<i)}var Zr={},fi=[],yc=new Ie(""),FD=new Ie("",-1),kD=new Ie(""),dh=class{get(e,i=vc){if(i===vc){let t=new Error(`NullInjectorError: No provider for ${Mi(e)}!`);throw t.name="NullInjectorError",t}return i}},LD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LD||{}),Ar=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ar||{}),Wo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wo||{});function U3(n,e,i){let t=n.length;for(;;){let r=n.indexOf(e,i);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===t||n.charCodeAt(r+s)<=32)return r}i=r+1}}function ug(n,e,i){let t=0;for(;t<i.length;){let r=i[t];if(typeof r=="number"){if(r!==0)break;t++;let s=i[t++],l=i[t++],d=i[t++];n.setAttribute(e,l,d,s)}else{let s=r,l=i[++t];q3(s)?n.setProperty(e,s,l):n.setAttribute(e,s,l),t++}}return t}function ND(n){return n===3||n===4||n===6}function q3(n){return n.charCodeAt(0)===64}function Sc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let i=-1;for(let t=0;t<e.length;t++){let r=e[t];typeof r=="number"?i=r:i===0||(i===-1||i===2?U2(n,i,r,null,e[++t]):U2(n,i,r,null,null))}}return n}function U2(n,e,i,t,r){let s=0,l=n.length;if(e===-1)l=-1;else for(;s<n.length;){let d=n[s++];if(typeof d=="number"){if(d===e){l=-1;break}else if(d>e){l=s-1;break}}}for(;s<n.length;){let d=n[s];if(typeof d=="number")break;if(d===i){if(t===null){r!==null&&(n[s+1]=r);return}else if(t===n[s+1]){n[s+2]=r;return}}s++,t!==null&&s++,r!==null&&s++}l!==-1&&(n.splice(l,0,e),s=l+1),n.splice(s++,0,i),t!==null&&n.splice(s++,0,t),r!==null&&n.splice(s++,0,r)}var VD="ng-template";function j3(n,e,i,t){let r=0;if(t){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&U3(e[r+1].toLowerCase(),i,0)!==-1)return!0}else if(D1(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===i)return!0}return!1}function D1(n){return n.type===4&&n.value!==VD}function G3(n,e,i){let t=n.type===4&&!i?VD:n.value;return e===t}function z3(n,e,i){let t=4,r=n.attrs,s=r!==null?W3(r):0,l=!1;for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="number"){if(!l&&!ir(t)&&!ir(h))return!1;if(l&&ir(h))continue;l=!1,t=h|t&1;continue}if(!l)if(t&4){if(t=2|t&1,h!==""&&!G3(n,h,i)||h===""&&e.length===1){if(ir(t))return!1;l=!0}}else if(t&8){if(r===null||!j3(n,r,h,i)){if(ir(t))return!1;l=!0}}else{let p=e[++d],g=H3(h,r,D1(n),i);if(g===-1){if(ir(t))return!1;l=!0;continue}if(p!==""){let v;if(g>s?v="":v=r[g+1].toLowerCase(),t&2&&p!==v){if(ir(t))return!1;l=!0}}}}return ir(t)||l}function ir(n){return(n&1)===0}function H3(n,e,i,t){if(e===null)return-1;let r=0;if(t||!i){let s=!1;for(;r<e.length;){let l=e[r];if(l===n)return r;if(l===3||l===6)s=!0;else if(l===1||l===2){let d=e[++r];for(;typeof d=="string";)d=e[++r];continue}else{if(l===4)break;if(l===0){r+=4;continue}}r+=s?1:2}return-1}else return $3(e,n)}function BD(n,e,i=!1){for(let t=0;t<e.length;t++)if(z3(n,e[t],i))return!0;return!1}function Q3(n){let e=n.attrs;if(e!=null){let i=e.indexOf(5);if(!(i&1))return e[i+1]}return null}function W3(n){for(let e=0;e<n.length;e++){let i=n[e];if(ND(i))return e}return n.length}function $3(n,e){let i=n.indexOf(4);if(i>-1)for(i++;i<n.length;){let t=n[i];if(typeof t=="number")return-1;if(t===e)return i;i++}return-1}function Y3(n,e){e:for(let i=0;i<e.length;i++){let t=e[i];if(n.length===t.length){for(let r=0;r<n.length;r++)if(n[r]!==t[r])continue e;return!0}}return!1}function q2(n,e){return n?":not("+e.trim()+")":e}function X3(n){let e=n[0],i=1,t=2,r="",s=!1;for(;i<n.length;){let l=n[i];if(typeof l=="string")if(t&2){let d=n[++i];r+="["+l+(d.length>0?'="'+d+'"':"")+"]"}else t&8?r+="."+l:t&4&&(r+=" "+l);else r!==""&&!ir(l)&&(e+=q2(s,r),r=""),t=l,s=s||!ir(t);i++}return r!==""&&(e+=q2(s,r)),e}function Z3(n){return n.map(X3).join(",")}function K3(n){let e=[],i=[],t=1,r=2;for(;t<n.length;){let s=n[t];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++t]):r===8&&i.push(s);else{if(!ir(r))break;r=s}t++}return{attrs:e,classes:i}}function Pt(n){return Cc(()=>{let e=qD(n),i=nn(Ee({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ar.Emulated,styles:n.styles||fi,_:null,schemas:n.schemas||null,tView:null,id:""});jD(i);let t=n.dependencies;return i.directiveDefs=G2(t,!1),i.pipeDefs=G2(t,!0),i.id=nO(i),i})}function J3(n){return Ha(n)||C1(n)}function eO(n){return n!==null}function Xe(n){return Cc(()=>({type:n.type,bootstrap:n.bootstrap||fi,declarations:n.declarations||fi,imports:n.imports||fi,exports:n.exports||fi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function j2(n,e){if(n==null)return Zr;let i={};for(let t in n)if(n.hasOwnProperty(t)){let r=n[t],s,l,d=Wo.None;Array.isArray(r)?(d=r[0],s=r[1],l=r[2]??s):(s=r,l=r),e?(i[s]=d!==Wo.None?[t,d]:t,e[s]=l):i[s]=t}return i}function Ue(n){return Cc(()=>{let e=qD(n);return jD(e),e})}function Ha(n){return n[_3]||null}function C1(n){return n[D3]||null}function UD(n){return n[C3]||null}function tO(n){let e=Ha(n)||C1(n)||UD(n);return e!==null?e.standalone:!1}function qD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Zr,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||fi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:j2(n.inputs,e),outputs:j2(n.outputs),debugInfo:null}}function jD(n){n.features?.forEach(e=>e(n))}function G2(n,e){if(!n)return null;let i=e?UD:J3;return()=>(typeof n=="function"?n():n).map(t=>i(t)).filter(eO)}function nO(n){let e=0,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of i)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Lh(n){return{\u0275providers:n}}function iO(...n){return{\u0275providers:GD(!0,n),\u0275fromNgModule:!0}}function GD(n,...e){let i=[],t=new Set,r,s=l=>{i.push(l)};return b1(e,l=>{let d=l;hg(d,s,[],t)&&(r||=[],r.push(d))}),r!==void 0&&zD(r,s),i}function zD(n,e){for(let i=0;i<n.length;i++){let{ngModule:t,providers:r}=n[i];w1(r,s=>{e(s,t)})}}function hg(n,e,i,t){if(n=Kn(n),!n)return!1;let r=null,s=L2(n),l=!s&&Ha(n);if(!s&&!l){let h=n.ngModule;if(s=L2(h),s)r=h;else return!1}else{if(l&&!l.standalone)return!1;r=n}let d=t.has(r);if(l){if(d)return!1;if(t.add(r),l.dependencies){let h=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let p of h)hg(p,e,i,t)}}else if(s){if(s.imports!=null&&!d){t.add(r);let p;try{b1(s.imports,g=>{hg(g,e,i,t)&&(p||=[],p.push(g))})}finally{}p!==void 0&&zD(p,e)}if(!d){let p=za(r)||(()=>new r);e({provide:r,useFactory:p,deps:fi},r),e({provide:kD,useValue:r,multi:!0},r),e({provide:yc,useValue:()=>le(r),multi:!0},r)}let h=s.providers;if(h!=null&&!d){let p=n;w1(h,g=>{e(g,p)})}}else return!1;return r!==n&&n.providers!==void 0}function w1(n,e){for(let i of n)AD(i)&&(i=i.\u0275providers),Array.isArray(i)?w1(i,e):e(i)}var rO=mn({provide:String,useValue:mn});function HD(n){return n!==null&&typeof n=="object"&&rO in n}function oO(n){return!!(n&&n.useExisting)}function sO(n){return!!(n&&n.useFactory)}function Qa(n){return typeof n=="function"}function aO(n){return!!n.useClass}var Nh=new Ie(""),th={},lO={},W0;function I1(){return W0===void 0&&(W0=new dh),W0}var sr=class{},uh=class extends sr{get destroyed(){return this._destroyed}constructor(e,i,t,r){super(),this.parent=i,this.source=t,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pg(e,l=>this.processProvider(l)),this.records.set(FD,Va(void 0,this)),r.has("environment")&&this.records.set(sr,Va(void 0,this));let s=this.records.get(Nh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(kD,fi,xt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_t(null);try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let i=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of i)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_t(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let i=Na(this),t=Er(void 0),r;try{return e()}finally{Na(i),Er(t)}}get(e,i=vc,t=xt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(V2))return e[V2](this);t=Fh(t);let r,s=Na(this),l=Er(void 0);try{if(!(t&xt.SkipSelf)){let h=this.records.get(e);if(h===void 0){let p=fO(e)&&g1(e);p&&this.injectableDefInScope(p)?h=Va(fg(e),th):h=null,this.records.set(e,h)}if(h!=null)return this.hydrate(e,h)}let d=t&xt.Self?I1():this.parent;return i=t&xt.Optional&&i===vc?null:i,d.get(e,i)}catch(d){if(d.name==="NullInjectorError"){if((d[lh]=d[lh]||[]).unshift(Mi(e)),s)throw d;return P3(d,e,"R3InjectorError",this.source)}else throw d}finally{Er(l),Na(s)}}resolveInjectorInitializers(){let e=_t(null),i=Na(this),t=Er(void 0),r;try{let s=this.get(yc,fi,xt.Self);for(let l of s)l()}finally{Na(i),Er(t),_t(e)}}toString(){let e=[],i=this.records;for(let t of i.keys())e.push(Mi(t));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(e){e=Kn(e);let i=Qa(e)?e:Kn(e&&e.provide),t=dO(e);if(!Qa(e)&&e.multi===!0){let r=this.records.get(i);r||(r=Va(void 0,th,!0),r.factory=()=>dg(r.multi),this.records.set(i,r)),i=e,r.multi.push(e)}this.records.set(i,t)}hydrate(e,i){let t=_t(null);try{return i.value===th&&(i.value=lO,i.value=i.factory()),typeof i.value=="object"&&i.value&&hO(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}finally{_t(t)}}injectableDefInScope(e){if(!e.providedIn)return!1;let i=Kn(e.providedIn);return typeof i=="string"?i==="any"||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(e){let i=this._onDestroyHooks.indexOf(e);i!==-1&&this._onDestroyHooks.splice(i,1)}};function fg(n){let e=g1(n),i=e!==null?e.factory:za(n);if(i!==null)return i;if(n instanceof Ie)throw new Me(204,!1);if(n instanceof Function)return cO(n);throw new Me(204,!1)}function cO(n){if(n.length>0)throw new Me(204,!1);let i=S3(n);return i!==null?()=>i.factory(n):()=>new n}function dO(n){if(HD(n))return Va(void 0,n.useValue);{let e=QD(n);return Va(e,th)}}function QD(n,e,i){let t;if(Qa(n)){let r=Kn(n);return za(r)||fg(r)}else if(HD(n))t=()=>Kn(n.useValue);else if(sO(n))t=()=>n.useFactory(...dg(n.deps||[]));else if(oO(n))t=()=>le(Kn(n.useExisting));else{let r=Kn(n&&(n.useClass||n.provide));if(uO(n))t=()=>new r(...dg(n.deps));else return za(r)||fg(r)}return t}function Va(n,e,i=!1){return{factory:n,value:e,multi:i?[]:void 0}}function uO(n){return!!n.deps}function hO(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function fO(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ie}function pg(n,e){for(let i of n)Array.isArray(i)?pg(i,e):i&&AD(i)?pg(i.\u0275providers,e):e(i)}function WD(){return MD()!==void 0||M3()!=null}function $D(n){if(!WD())throw new Me(-203,!1)}function pO(n){return typeof n=="function"}var ro=0,st=1,et=2,ci=3,or=4,Ii=5,Wa=6,hh=7,ai=8,$a=9,Kr=10,Mn=11,bc=12,z2=13,tl=14,Ri=15,Us=16,Ba=17,Jr=18,Vh=19,YD=20,Qo=21,$0=22,ji=23,pi=25,XD=1;var qs=7,fh=8,Ya=9,li=10,ph=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ph||{});function Vs(n){return Array.isArray(n)&&typeof n[XD]=="object"}function oo(n){return Array.isArray(n)&&n[XD]===!0}function E1(n){return(n.flags&4)!==0}function Bh(n){return n.componentOffset>-1}function Uh(n){return(n.flags&1)===1}function $o(n){return!!n.template}function mg(n){return(n[et]&512)!==0}var gg=class{constructor(e,i,t){this.previousValue=e,this.currentValue=i,this.firstChange=t}isFirstChange(){return this.firstChange}};function ZD(n,e,i,t){e!==null?e.applyValueToInputSignal(e,t):n[i]=t}function Jn(){return KD}function KD(n){return n.type.prototype.ngOnChanges&&(n.setInput=gO),mO}Jn.ngInherit=!0;function mO(){let n=eC(this),e=n?.current;if(e){let i=n.previous;if(i===Zr)n.previous=e;else for(let t in e)i[t]=e[t];n.current=null,this.ngOnChanges(e)}}function gO(n,e,i,t,r){let s=this.declaredInputs[t],l=eC(n)||vO(n,{previous:Zr,current:null}),d=l.current||(l.current={}),h=l.previous,p=h[s];d[s]=new gg(p&&p.currentValue,i,h===Zr),ZD(n,e,r,i)}var JD="__ngSimpleChanges__";function eC(n){return n[JD]||null}function vO(n,e){return n[JD]=e}var H2=null;var Tr=function(n,e,i){H2?.(n,e,i)},yO="svg",SO="math";function Mr(n){for(;Array.isArray(n);)n=n[ro];return n}function tC(n,e){return Mr(e[n])}function Gi(n,e){return Mr(e[n.index])}function T1(n,e){return n.data[e]}function bO(n,e){return n[e]}function Ys(n,e){let i=e[n];return Vs(i)?i:i[ro]}function _O(n){return(n[et]&4)===4}function x1(n){return(n[et]&128)===128}function DO(n){return oo(n[ci])}function Yo(n,e){return e==null?null:n[e]}function nC(n){n[Ba]=0}function iC(n){n[et]&1024||(n[et]|=1024,x1(n)&&jh(n))}function CO(n,e){for(;n>0;)e=e[tl],n--;return e}function qh(n){return!!(n[et]&9216||n[ji]?.dirty)}function vg(n){n[Kr].changeDetectionScheduler?.notify(8),n[et]&64&&(n[et]|=1024),qh(n)&&jh(n)}function jh(n){n[Kr].changeDetectionScheduler?.notify(0);let e=js(n);for(;e!==null&&!(e[et]&8192||(e[et]|=8192,!x1(e)));)e=js(e)}function rC(n,e){if((n[et]&256)===256)throw new Me(911,!1);n[Qo]===null&&(n[Qo]=[]),n[Qo].push(e)}function wO(n,e){if(n[Qo]===null)return;let i=n[Qo].indexOf(e);i!==-1&&n[Qo].splice(i,1)}function js(n){let e=n[ci];return oo(e)?e[ci]:e}var yt={lFrame:fC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var oC=!1;function IO(){return yt.lFrame.elementDepthCount}function EO(){yt.lFrame.elementDepthCount++}function TO(){yt.lFrame.elementDepthCount--}function sC(){return yt.bindingsEnabled}function aC(){return yt.skipHydrationRootTNode!==null}function xO(n){return yt.skipHydrationRootTNode===n}function AO(){yt.skipHydrationRootTNode=null}function At(){return yt.lFrame.lView}function On(){return yt.lFrame.tView}function Xs(n){return yt.lFrame.contextLView=n,n[ai]}function Zs(n){return yt.lFrame.contextLView=null,n}function mi(){let n=lC();for(;n!==null&&n.type===64;)n=n.parent;return n}function lC(){return yt.lFrame.currentTNode}function MO(){let n=yt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ks(n,e){let i=yt.lFrame;i.currentTNode=n,i.isParent=e}function A1(){return yt.lFrame.isParent}function M1(){yt.lFrame.isParent=!1}function RO(){return yt.lFrame.contextLView}function cC(){return oC}function Q2(n){oC=n}function OO(n){return yt.lFrame.bindingIndex=n}function nl(){return yt.lFrame.bindingIndex++}function dC(n){let e=yt.lFrame,i=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,i}function PO(){return yt.lFrame.inI18n}function FO(n,e){let i=yt.lFrame;i.bindingIndex=i.bindingRootIndex=n,yg(e)}function kO(){return yt.lFrame.currentDirectiveIndex}function yg(n){yt.lFrame.currentDirectiveIndex=n}function LO(n){let e=yt.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function R1(){return yt.lFrame.currentQueryIndex}function Gh(n){yt.lFrame.currentQueryIndex=n}function NO(n){let e=n[st];return e.type===2?e.declTNode:e.type===1?n[Ii]:null}function uC(n,e,i){if(i&xt.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(i&xt.Host);)if(r=NO(s),r===null||(s=s[tl],r.type&10))break;if(r===null)return!1;e=r,n=s}let t=yt.lFrame=hC();return t.currentTNode=e,t.lView=n,!0}function O1(n){let e=hC(),i=n[st];yt.lFrame=e,e.currentTNode=i.firstChild,e.lView=n,e.tView=i,e.contextLView=n,e.bindingIndex=i.bindingStartIndex,e.inI18n=!1}function hC(){let n=yt.lFrame,e=n===null?null:n.child;return e===null?fC(n):e}function fC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function pC(){let n=yt.lFrame;return yt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mC=pC;function P1(){let n=pC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function VO(n){return(yt.lFrame.contextLView=CO(n,yt.lFrame.contextLView))[ai]}function Ko(){return yt.lFrame.selectedIndex}function Gs(n){yt.lFrame.selectedIndex=n}function zh(){let n=yt.lFrame;return T1(n.tView,n.selectedIndex)}function BO(){return yt.lFrame.currentNamespace}var gC=!0;function Hh(){return gC}function Qh(n){gC=n}function UO(n,e,i){let{ngOnChanges:t,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(t){let l=KD(e);(i.preOrderHooks??=[]).push(n,l),(i.preOrderCheckHooks??=[]).push(n,l)}r&&(i.preOrderHooks??=[]).push(0-n,r),s&&((i.preOrderHooks??=[]).push(n,s),(i.preOrderCheckHooks??=[]).push(n,s))}function Wh(n,e){for(let i=e.directiveStart,t=e.directiveEnd;i<t;i++){let s=n.data[i].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:d,ngAfterViewInit:h,ngAfterViewChecked:p,ngOnDestroy:g}=s;l&&(n.contentHooks??=[]).push(-i,l),d&&((n.contentHooks??=[]).push(i,d),(n.contentCheckHooks??=[]).push(i,d)),h&&(n.viewHooks??=[]).push(-i,h),p&&((n.viewHooks??=[]).push(i,p),(n.viewCheckHooks??=[]).push(i,p)),g!=null&&(n.destroyHooks??=[]).push(i,g)}}function nh(n,e,i){vC(n,e,3,i)}function ih(n,e,i,t){(n[et]&3)===i&&vC(n,e,i,t)}function Y0(n,e){let i=n[et];(i&3)===e&&(i&=16383,i+=1,n[et]=i)}function vC(n,e,i,t){let r=t!==void 0?n[Ba]&65535:0,s=t??-1,l=e.length-1,d=0;for(let h=r;h<l;h++)if(typeof e[h+1]=="number"){if(d=e[h],t!=null&&d>=t)break}else e[h]<0&&(n[Ba]+=65536),(d<s||s==-1)&&(qO(n,i,e,h),n[Ba]=(n[Ba]&4294901760)+h+2),h++}function W2(n,e){Tr(4,n,e);let i=_t(null);try{e.call(n)}finally{_t(i),Tr(5,n,e)}}function qO(n,e,i,t){let r=i[t]<0,s=i[t+1],l=r?-i[t]:i[t],d=n[l];r?n[et]>>14<n[Ba]>>16&&(n[et]&3)===e&&(n[et]+=16384,W2(d,s)):W2(d,s)}var Ga=-1,zs=class{constructor(e,i,t){this.factory=e,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=t}};function jO(n){return n instanceof zs}function GO(n){return(n.flags&8)!==0}function zO(n){return(n.flags&16)!==0}var X0={},Sg=class{constructor(e,i){this.injector=e,this.parentInjector=i}get(e,i,t){t=Fh(t);let r=this.injector.get(e,X0,t);return r!==X0||i===X0?r:this.parentInjector.get(e,i,t)}};function yC(n){return n!==Ga}function mh(n){return n&32767}function HO(n){return n>>16}function gh(n,e){let i=HO(n),t=e;for(;i>0;)t=t[tl],i--;return t}var bg=!0;function $2(n){let e=bg;return bg=n,e}var QO=256,SC=QO-1,bC=5,WO=0,xr={};function $O(n,e,i){let t;typeof i=="string"?t=i.charCodeAt(0)||0:i.hasOwnProperty(gc)&&(t=i[gc]),t==null&&(t=i[gc]=WO++);let r=t&SC,s=1<<r;e.data[n+(r>>bC)]|=s}function vh(n,e){let i=_C(n,e);if(i!==-1)return i;let t=e[st];t.firstCreatePass&&(n.injectorIndex=e.length,Z0(t.data,n),Z0(e,null),Z0(t.blueprint,null));let r=F1(n,e),s=n.injectorIndex;if(yC(r)){let l=mh(r),d=gh(r,e),h=d[st].data;for(let p=0;p<8;p++)e[s+p]=d[l+p]|h[l+p]}return e[s+8]=r,s}function Z0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _C(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function F1(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let i=0,t=null,r=e;for(;r!==null;){if(t=EC(r),t===null)return Ga;if(i++,r=r[tl],t.injectorIndex!==-1)return t.injectorIndex|i<<16}return Ga}function _g(n,e,i){$O(n,e,i)}function YO(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let i=n.attrs;if(i){let t=i.length,r=0;for(;r<t;){let s=i[r];if(ND(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<t&&typeof i[r]=="string";)r++;else{if(s===e)return i[r+1];r=r+2}}}return null}function DC(n,e,i){if(i&xt.Optional||n!==void 0)return n;y1(e,"NodeInjector")}function CC(n,e,i,t){if(i&xt.Optional&&t===void 0&&(t=null),!(i&(xt.Self|xt.Host))){let r=n[$a],s=Er(void 0);try{return r?r.get(e,t,i&xt.Optional):RD(e,t,i&xt.Optional)}finally{Er(s)}}return DC(t,e,i)}function wC(n,e,i,t=xt.Default,r){if(n!==null){if(e[et]&2048&&!(t&xt.Self)){let l=JO(n,e,i,t,xr);if(l!==xr)return l}let s=IC(n,e,i,t,xr);if(s!==xr)return s}return CC(e,i,t,r)}function IC(n,e,i,t,r){let s=ZO(i);if(typeof s=="function"){if(!uC(e,n,t))return t&xt.Host?DC(r,i,t):CC(e,i,t,r);try{let l;if(l=s(t),l==null&&!(t&xt.Optional))y1(i);else return l}finally{mC()}}else if(typeof s=="number"){let l=null,d=_C(n,e),h=Ga,p=t&xt.Host?e[Ri][Ii]:null;for((d===-1||t&xt.SkipSelf)&&(h=d===-1?F1(n,e):e[d+8],h===Ga||!X2(t,!1)?d=-1:(l=e[st],d=mh(h),e=gh(h,e)));d!==-1;){let g=e[st];if(Y2(s,d,g.data)){let v=XO(d,e,i,l,t,p);if(v!==xr)return v}h=e[d+8],h!==Ga&&X2(t,e[st].data[d+8]===p)&&Y2(s,d,e)?(l=g,d=mh(h),e=gh(h,e)):d=-1}}return r}function XO(n,e,i,t,r,s){let l=e[st],d=l.data[n+8],h=t==null?Bh(d)&&bg:t!=l&&(d.type&3)!==0,p=r&xt.Host&&s===d,g=rh(d,l,i,h,p);return g!==null?Hs(e,l,g,d):xr}function rh(n,e,i,t,r){let s=n.providerIndexes,l=e.data,d=s&1048575,h=n.directiveStart,p=n.directiveEnd,g=s>>20,v=t?d:d+g,_=r?d+g:p;for(let b=v;b<_;b++){let C=l[b];if(b<h&&i===C||b>=h&&C.type===i)return b}if(r){let b=l[h];if(b&&$o(b)&&b.type===i)return h}return null}function Hs(n,e,i,t){let r=n[i],s=e.data;if(jO(r)){let l=r;l.resolving&&I3(w3(s[i]));let d=$2(l.canSeeViewProviders);l.resolving=!0;let h,p=l.injectImpl?Er(l.injectImpl):null,g=uC(n,t,xt.Default);try{r=n[i]=l.factory(void 0,s,n,t),e.firstCreatePass&&i>=t.directiveStart&&UO(i,s[i],e)}finally{p!==null&&Er(p),$2(d),l.resolving=!1,mC()}}return r}function ZO(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gc)?n[gc]:void 0;return typeof e=="number"?e>=0?e&SC:KO:e}function Y2(n,e,i){let t=1<<n;return!!(i[e+(n>>bC)]&t)}function X2(n,e){return!(n&xt.Self)&&!(n&xt.Host&&e)}var Bs=class{constructor(e,i){this._tNode=e,this._lView=i}get(e,i,t){return wC(this._tNode,this._lView,e,Fh(t),i)}};function KO(){return new Bs(mi(),At())}function gi(n){return Cc(()=>{let e=n.prototype.constructor,i=e[ah]||Dg(e),t=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==t;){let s=r[ah]||Dg(r);if(s&&s!==i)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Dg(n){return ED(n)?()=>{let e=Dg(Kn(n));return e&&e()}:za(n)}function JO(n,e,i,t,r){let s=n,l=e;for(;s!==null&&l!==null&&l[et]&2048&&!(l[et]&512);){let d=IC(s,l,i,t|xt.Self,xr);if(d!==xr)return d;let h=s.parent;if(!h){let p=l[YD];if(p){let g=p.get(i,xr,t);if(g!==xr)return g}h=EC(l),l=l[tl]}s=h}return r}function EC(n){let e=n[st],i=e.type;return i===2?e.declTNode:i===1?n[Ii]:null}function Jo(n){return YO(mi(),n)}function Z2(n,e=null,i=null,t){let r=eP(n,e,i,t);return r.resolveInjectorInitializers(),r}function eP(n,e=null,i=null,t,r=new Set){let s=[i||fi,iO(n)];return t=t||(typeof n=="object"?void 0:Mi(n)),new uh(s,e||I1(),t||null,r)}var Ls=class Ls{static create(e,i){if(Array.isArray(e))return Z2({name:""},i,e,"");{let t=e.name??"";return Z2({name:t},e.parent,e.providers,t)}}};Ls.THROW_IF_NOT_FOUND=vc,Ls.NULL=new dh,Ls.\u0275prov=xe({token:Ls,providedIn:"any",factory:()=>le(FD)}),Ls.__NG_ELEMENT_ID__=-1;var Xt=Ls;var tP=new Ie("");tP.__NG_ELEMENT_ID__=n=>{let e=mi();if(e===null)throw new Me(204,!1);if(e.type&2)return e.value;if(n&xt.Optional)return null;throw new Me(204,!1)};var nP="ngOriginalError";function K0(n){return n[nP]}var TC=!0,k1=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=iP,e.__NG_ENV_ID__=t=>t;let n=e;return n})(),Cg=class extends k1{constructor(e){super(),this._lView=e}onDestroy(e){return rC(this._lView,e),()=>wO(this._lView,e)}};function iP(){return new Cg(At())}var $h=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ai(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=xe({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var wg=class extends ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,WD()&&(this.destroyRef=Re(k1,{optional:!0})??void 0,this.pendingTasks=Re($h,{optional:!0})??void 0)}emit(e){let i=_t(null);try{super.next(e)}finally{_t(i)}}subscribe(e,i,t){let r=e,s=i||(()=>null),l=t;if(e&&typeof e=="object"){let h=e;r=h.next?.bind(h),s=h.error?.bind(h),l=h.complete?.bind(h)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),l&&(l=this.wrapInTimeout(l)));let d=super.subscribe({next:r,error:s,complete:l});return e instanceof Yt&&e.add(d),d}wrapInTimeout(e){return i=>{let t=this.pendingTasks?.add();setTimeout(()=>{e(i),t!==void 0&&this.pendingTasks?.remove(t)})}}},ht=wg;function yh(...n){}function xC(n){let e,i;function t(){n=yh;try{i!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(i),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),t()}),typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(()=>{n(),t()})),()=>t()}function K2(n){return queueMicrotask(()=>n()),()=>{n=yh}}var L1="isAngularZone",Sh=L1+"_ID",rP=0,Fe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1);let{enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=TC}=e;if(typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!r&&t,l.shouldCoalesceRunChangeDetection=r,l.callbackScheduled=!1,l.scheduleInRootZone=s,aP(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(L1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Me(909,!1)}run(e,i,t){return this._inner.run(e,i,t)}runTask(e,i,t,r){let s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+r,e,oP,yh,yh);try{return s.runTask(l,i,t)}finally{s.cancelTask(l)}}runGuarded(e,i,t){return this._inner.runGuarded(e,i,t)}runOutsideAngular(e){return this._outer.run(e)}},oP={};function N1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function sP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){xC(()=>{n.callbackScheduled=!1,Ig(n),n.isCheckStableRunning=!0,N1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ig(n)}function aP(n){let e=()=>{sP(n)},i=rP++;n._inner=n._inner.fork({name:"angular",properties:{[L1]:!0,[Sh]:i,[Sh+i]:!0},onInvokeTask:(t,r,s,l,d,h)=>{if(lP(h))return t.invokeTask(s,l,d,h);try{return J2(n),t.invokeTask(s,l,d,h)}finally{(n.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),eD(n)}},onInvoke:(t,r,s,l,d,h,p)=>{try{return J2(n),t.invoke(s,l,d,h,p)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!cP(h)&&e(),eD(n)}},onHasTask:(t,r,s,l)=>{t.hasTask(s,l),r===s&&(l.change=="microTask"?(n._hasPendingMicrotasks=l.microTask,Ig(n),N1(n)):l.change=="macroTask"&&(n.hasPendingMacrotasks=l.macroTask))},onHandleError:(t,r,s,l)=>(t.handleError(s,l),n.runOutsideAngular(()=>n.onError.emit(l)),!1)})}function Ig(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function J2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function eD(n){n._nesting--,N1(n)}var Eg=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,i,t){return e.apply(i,t)}runGuarded(e,i,t){return e.apply(i,t)}runOutsideAngular(e){return e()}runTask(e,i,t,r){return e.apply(i,t)}};function lP(n){return AC(n,"__ignore_ng_zone__")}function cP(n){return AC(n,"__scheduler_tick__")}function AC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Oi=class{constructor(){this._console=console}handleError(e){let i=this._findOriginalError(e);this._console.error("ERROR",e),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(e){let i=e&&K0(e);for(;i&&K0(i);)i=K0(i);return i||null}},dP=new Ie("",{providedIn:"root",factory:()=>{let n=Re(Fe),e=Re(Oi);return i=>n.runOutsideAngular(()=>e.handleError(i))}});function uP(){return il(mi(),At())}function il(n,e){return new We(Gi(n,e))}var We=(()=>{let e=class e{constructor(t){this.nativeElement=t}};e.__NG_ELEMENT_ID__=uP;let n=e;return n})();function MC(n){return n instanceof We?n.nativeElement:n}function hP(){return this._results[Symbol.iterator]()}var bh=class n{get changes(){return this._changes??=new ht}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let i=n.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=hP)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,i){return this._results.reduce(e,i)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,i){this.dirty=!1;let t=L3(e);(this._changesDetected=!k3(this._results,t,i))&&(this._results=t,this.length=t.length,this.last=t[this.length-1],this.first=t[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function RC(n){return(n.flags&128)===128}var OC=new Map,fP=0;function pP(){return fP++}function mP(n){OC.set(n[Vh],n)}function Tg(n){OC.delete(n[Vh])}var tD="__ngContext__";function Xo(n,e){Vs(e)?(n[tD]=e[Vh],mP(e)):n[tD]=e}function PC(n){return kC(n[bc])}function FC(n){return kC(n[or])}function kC(n){for(;n!==null&&!oo(n);)n=n[or];return n}var xg;function LC(n){xg=n}function gP(){if(xg!==void 0)return xg;if(typeof document<"u")return document;throw new Me(210,!1)}var Yh=new Ie("",{providedIn:"root",factory:()=>vP}),vP="ng",V1=new Ie(""),zi=new Ie("",{providedIn:"platform",factory:()=>"unknown"});var ei=new Ie(""),Ic=new Ie("",{providedIn:"root",factory:()=>gP().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var yP="h",SP="b";var bP=()=>null;function B1(n,e,i=!1){return bP(n,e,i)}var NC=!1,_P=new Ie("",{providedIn:"root",factory:()=>NC});var Xu;function DP(){if(Xu===void 0&&(Xu=null,sg.trustedTypes))try{Xu=sg.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xu}function Xh(n){return DP()?.createHTML(n)||n}var eo=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wD})`}},Ag=class extends eo{getTypeName(){return"HTML"}},Mg=class extends eo{getTypeName(){return"Style"}},Rg=class extends eo{getTypeName(){return"Script"}},Og=class extends eo{getTypeName(){return"URL"}},Pg=class extends eo{getTypeName(){return"ResourceURL"}};function so(n){return n instanceof eo?n.changingThisBreaksApplicationSecurity:n}function rl(n,e){let i=CP(n);if(i!=null&&i!==e){if(i==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${i} (see ${wD})`)}return i===e}function CP(n){return n instanceof eo&&n.getTypeName()||null}function VC(n){return new Ag(n)}function BC(n){return new Mg(n)}function UC(n){return new Rg(n)}function qC(n){return new Og(n)}function jC(n){return new Pg(n)}function wP(n){let e=new kg(n);return IP()?new Fg(e):e}var Fg=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let i=new window.DOMParser().parseFromString(Xh(e),"text/html").body;return i===null?this.inertDocumentHelper.getInertBodyElement(e):(i.firstChild?.remove(),i)}catch{return null}}},kg=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let i=this.inertDocument.createElement("template");return i.innerHTML=Xh(e),i}};function IP(){try{return!!new window.DOMParser().parseFromString(Xh(""),"text/html")}catch{return!1}}var EP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function U1(n){return n=String(n),n.match(EP)?n:"unsafe:"+n}function ao(n){let e={};for(let i of n.split(","))e[i]=!0;return e}function Ec(...n){let e={};for(let i of n)for(let t in i)i.hasOwnProperty(t)&&(e[t]=!0);return e}var GC=ao("area,br,col,hr,img,wbr"),zC=ao("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),HC=ao("rp,rt"),TP=Ec(HC,zC),xP=Ec(zC,ao("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),AP=Ec(HC,ao("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nD=Ec(GC,xP,AP,TP),QC=ao("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),MP=ao("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),RP=ao("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),OP=Ec(QC,MP,RP),PP=ao("script,style,template"),Lg=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let i=e.firstChild,t=!0,r=[];for(;i;){if(i.nodeType===Node.ELEMENT_NODE?t=this.startElement(i):i.nodeType===Node.TEXT_NODE?this.chars(i.nodeValue):this.sanitizedSomething=!0,t&&i.firstChild){r.push(i),i=LP(i);continue}for(;i;){i.nodeType===Node.ELEMENT_NODE&&this.endElement(i);let s=kP(i);if(s){i=s;break}i=r.pop()}}return this.buf.join("")}startElement(e){let i=iD(e).toLowerCase();if(!nD.hasOwnProperty(i))return this.sanitizedSomething=!0,!PP.hasOwnProperty(i);this.buf.push("<"),this.buf.push(i);let t=e.attributes;for(let r=0;r<t.length;r++){let s=t.item(r),l=s.name,d=l.toLowerCase();if(!OP.hasOwnProperty(d)){this.sanitizedSomething=!0;continue}let h=s.value;QC[d]&&(h=U1(h)),this.buf.push(" ",l,'="',rD(h),'"')}return this.buf.push(">"),!0}endElement(e){let i=iD(e).toLowerCase();nD.hasOwnProperty(i)&&!GC.hasOwnProperty(i)&&(this.buf.push("</"),this.buf.push(i),this.buf.push(">"))}chars(e){this.buf.push(rD(e))}};function FP(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function kP(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw WC(e);return e}function LP(n){let e=n.firstChild;if(e&&FP(n,e))throw WC(e);return e}function iD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function WC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var NP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,VP=/([^\#-~ |!])/g;function rD(n){return n.replace(/&/g,"&amp;").replace(NP,function(e){let i=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+((i-55296)*1024+(t-56320)+65536)+";"}).replace(VP,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Zu;function $C(n,e){let i=null;try{Zu=Zu||wP(n);let t=e?String(e):"";i=Zu.getInertBodyElement(t);let r=5,s=t;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,t=s,s=i.innerHTML,i=Zu.getInertBodyElement(t)}while(t!==s);let d=new Lg().sanitizeChildren(oD(i)||i);return Xh(d)}finally{if(i){let t=oD(i)||i;for(;t.firstChild;)t.firstChild.remove()}}}function oD(n){return"content"in n&&BP(n)?n.content:null}function BP(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var Ei=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Ei||{});var UP=/^>|^->|<!--|-->|--!>|<!-$/g,qP=/(<|>)/g,jP="\u200B$1\u200B";function GP(n){return n.replace(UP,e=>e.replace(qP,jP))}function YC(n){return(n??Re(Xt)).get(zi)==="browser"}var to=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(to||{}),zP;function q1(n,e){return zP(n,e)}function Ua(n,e,i,t,r){if(t!=null){let s,l=!1;oo(t)?s=t:Vs(t)&&(l=!0,t=t[ro]);let d=Mr(t);n===0&&i!==null?r==null?ew(e,i,d):_h(e,i,d,r||null,!0):n===1&&i!==null?_h(e,i,d,r||null,!0):n===2?r4(e,d,l):n===3&&e.destroyNode(d),s!=null&&s4(e,n,s,i,r)}}function HP(n,e){return n.createText(e)}function QP(n,e,i){n.setValue(e,i)}function WP(n,e){return n.createComment(GP(e))}function XC(n,e,i){return n.createElement(e,i)}function $P(n,e){ZC(n,e),e[ro]=null,e[Ii]=null}function YP(n,e,i,t,r,s){t[ro]=r,t[Ii]=e,Jh(n,t,i,1,r,s)}function ZC(n,e){e[Kr].changeDetectionScheduler?.notify(9),Jh(n,e,e[Mn],2,null,null)}function XP(n){let e=n[bc];if(!e)return J0(n[st],n);for(;e;){let i=null;if(Vs(e))i=e[bc];else{let t=e[li];t&&(i=t)}if(!i){for(;e&&!e[or]&&e!==n;)Vs(e)&&J0(e[st],e),e=e[ci];e===null&&(e=n),Vs(e)&&J0(e[st],e),i=e&&e[or]}e=i}}function ZP(n,e,i,t){let r=li+t,s=i.length;t>0&&(i[r-1][or]=e),t<s-li?(e[or]=i[r],PD(i,li+t,e)):(i.push(e),e[or]=null),e[ci]=i;let l=e[Us];l!==null&&i!==l&&KC(l,e);let d=e[Jr];d!==null&&d.insertView(n),vg(e),e[et]|=128}function KC(n,e){let i=n[Ya],t=e[ci];if(Vs(t))n[et]|=ph.HasTransplantedViews;else{let r=t[ci][Ri];e[Ri]!==r&&(n[et]|=ph.HasTransplantedViews)}i===null?n[Ya]=[e]:i.push(e)}function j1(n,e){let i=n[Ya],t=i.indexOf(e);i.splice(t,1)}function _c(n,e){if(n.length<=li)return;let i=li+e,t=n[i];if(t){let r=t[Us];r!==null&&r!==n&&j1(r,t),e>0&&(n[i-1][or]=t[or]);let s=ch(n,li+e);$P(t[st],t);let l=s[Jr];l!==null&&l.detachView(s[st]),t[ci]=null,t[or]=null,t[et]&=-129}return t}function Zh(n,e){if(!(e[et]&256)){let i=e[Mn];i.destroyNode&&Jh(n,e,i,3,null,null),XP(e)}}function J0(n,e){if(e[et]&256)return;let i=_t(null);try{e[et]&=-129,e[et]|=256,e[ji]&&M0(e[ji]),JP(n,e),KP(n,e),e[st].type===1&&e[Mn].destroy();let t=e[Us];if(t!==null&&oo(e[ci])){t!==e[ci]&&j1(t,e);let r=e[Jr];r!==null&&r.detachView(n)}Tg(e)}finally{_t(i)}}function KP(n,e){let i=n.cleanup,t=e[hh];if(i!==null)for(let s=0;s<i.length-1;s+=2)if(typeof i[s]=="string"){let l=i[s+3];l>=0?t[l]():t[-l].unsubscribe(),s+=2}else{let l=t[i[s+1]];i[s].call(l)}t!==null&&(e[hh]=null);let r=e[Qo];if(r!==null){e[Qo]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}}function JP(n,e){let i;if(n!=null&&(i=n.destroyHooks)!=null)for(let t=0;t<i.length;t+=2){let r=e[i[t]];if(!(r instanceof zs)){let s=i[t+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){let d=r[s[l]],h=s[l+1];Tr(4,d,h);try{h.call(d)}finally{Tr(5,d,h)}}else{Tr(4,r,s);try{s.call(r)}finally{Tr(5,r,s)}}}}}function JC(n,e,i){return e4(n,e.parent,i)}function e4(n,e,i){let t=e;for(;t!==null&&t.type&168;)e=t,t=e.parent;if(t===null)return i[ro];{let{componentOffset:r}=t;if(r>-1){let{encapsulation:s}=n.data[t.directiveStart+r];if(s===Ar.None||s===Ar.Emulated)return null}return Gi(t,i)}}function _h(n,e,i,t,r){n.insertBefore(e,i,t,r)}function ew(n,e,i){n.appendChild(e,i)}function sD(n,e,i,t,r){t!==null?_h(n,e,i,t,r):ew(n,e,i)}function tw(n,e){return n.parentNode(e)}function t4(n,e){return n.nextSibling(e)}function nw(n,e,i){return i4(n,e,i)}function n4(n,e,i){return n.type&40?Gi(n,i):null}var i4=n4,aD;function Kh(n,e,i,t){let r=JC(n,t,e),s=e[Mn],l=t.parent||e[Ii],d=nw(l,t,e);if(r!=null)if(Array.isArray(i))for(let h=0;h<i.length;h++)sD(s,r,i[h],d,!1);else sD(s,r,i,d,!1);aD!==void 0&&aD(s,t,e,i,r)}function mc(n,e){if(e!==null){let i=e.type;if(i&3)return Gi(e,n);if(i&4)return Ng(-1,n[e.index]);if(i&8){let t=e.child;if(t!==null)return mc(n,t);{let r=n[e.index];return oo(r)?Ng(-1,r):Mr(r)}}else{if(i&128)return mc(n,e.next);if(i&32)return q1(e,n)()||Mr(n[e.index]);{let t=iw(n,e);if(t!==null){if(Array.isArray(t))return t[0];let r=js(n[Ri]);return mc(r,t)}else return mc(n,e.next)}}}return null}function iw(n,e){if(e!==null){let t=n[Ri][Ii],r=e.projection;return t.projection[r]}return null}function Ng(n,e){let i=li+n+1;if(i<e.length){let t=e[i],r=t[st].firstChild;if(r!==null)return mc(t,r)}return e[qs]}function r4(n,e,i){n.removeChild(null,e,i)}function G1(n,e,i,t,r,s,l){for(;i!=null;){if(i.type===128){i=i.next;continue}let d=t[i.index],h=i.type;if(l&&e===0&&(d&&Xo(Mr(d),t),i.flags|=2),(i.flags&32)!==32)if(h&8)G1(n,e,i.child,t,r,s,!1),Ua(e,n,r,d,s);else if(h&32){let p=q1(i,t),g;for(;g=p();)Ua(e,n,r,g,s);Ua(e,n,r,d,s)}else h&16?rw(n,e,t,i,r,s):Ua(e,n,r,d,s);i=l?i.projectionNext:i.next}}function Jh(n,e,i,t,r,s){G1(i,t,n.firstChild,e,r,s,!1)}function o4(n,e,i){let t=e[Mn],r=JC(n,i,e),s=i.parent||e[Ii],l=nw(s,i,e);rw(t,0,e,i,r,l)}function rw(n,e,i,t,r,s){let l=i[Ri],h=l[Ii].projection[t.projection];if(Array.isArray(h))for(let p=0;p<h.length;p++){let g=h[p];Ua(e,n,r,g,s)}else{let p=h,g=l[ci];RC(t)&&(p.flags|=128),G1(n,e,p,g,r,s,!0)}}function s4(n,e,i,t,r){let s=i[qs],l=Mr(i);s!==l&&Ua(e,n,t,s,r);for(let d=li;d<i.length;d++){let h=i[d];Jh(h[st],h,n,e,t,s)}}function a4(n,e,i,t,r){if(e)r?n.addClass(i,t):n.removeClass(i,t);else{let s=t.indexOf("-")===-1?void 0:to.DashCase;r==null?n.removeStyle(i,t,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=to.Important),n.setStyle(i,t,r,s))}}function l4(n,e,i){n.setAttribute(e,"style",i)}function ow(n,e,i){i===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",i)}function sw(n,e,i){let{mergedAttrs:t,classes:r,styles:s}=i;t!==null&&ug(n,e,t),r!==null&&ow(n,e,r),s!==null&&l4(n,e,s)}var Rr={};function Ge(n=1){aw(On(),At(),Ko()+n,!1)}function aw(n,e,i,t){if(!t)if((e[et]&3)===3){let s=n.preOrderCheckHooks;s!==null&&nh(e,s,i)}else{let s=n.preOrderHooks;s!==null&&ih(e,s,0,i)}Gs(i)}function K(n,e=xt.Default){let i=At();if(i===null)return le(n,e);let t=mi();return wC(t,i,Kn(n),e)}function lw(n,e,i,t,r,s){let l=_t(null);try{let d=null;r&Wo.SignalBased&&(d=e[t][_r]),d!==null&&d.transformFn!==void 0&&(s=d.transformFn(s)),r&Wo.HasDecoratorInputTransform&&(s=n.inputTransforms[t].call(e,s)),n.setInput!==null?n.setInput(e,d,s,i,t):ZD(e,d,t,s)}finally{_t(l)}}function c4(n,e){let i=n.hostBindingOpCodes;if(i!==null)try{for(let t=0;t<i.length;t++){let r=i[t];if(r<0)Gs(~r);else{let s=r,l=i[++t],d=i[++t];FO(l,s);let h=e[s];d(2,h)}}}finally{Gs(-1)}}function ef(n,e,i,t,r,s,l,d,h,p,g){let v=e.blueprint.slice();return v[ro]=r,v[et]=t|4|128|8|64,(p!==null||n&&n[et]&2048)&&(v[et]|=2048),nC(v),v[ci]=v[tl]=n,v[ai]=i,v[Kr]=l||n&&n[Kr],v[Mn]=d||n&&n[Mn],v[$a]=h||n&&n[$a]||null,v[Ii]=s,v[Vh]=pP(),v[Wa]=g,v[YD]=p,v[Ri]=e.type==2?n[Ri]:v,v}function ol(n,e,i,t,r){let s=n.data[e];if(s===null)s=d4(n,e,i,t,r),PO()&&(s.flags|=32);else if(s.type&64){s.type=i,s.value=t,s.attrs=r;let l=MO();s.injectorIndex=l===null?-1:l.injectorIndex}return Ks(s,!0),s}function d4(n,e,i,t,r){let s=lC(),l=A1(),d=l?s:s&&s.parent,h=n.data[e]=g4(n,d,i,e,t,r);return n.firstChild===null&&(n.firstChild=h),s!==null&&(l?s.child==null&&h.parent!==null&&(s.child=h):s.next===null&&(s.next=h,h.prev=s)),h}function cw(n,e,i,t){if(i===0)return-1;let r=e.length;for(let s=0;s<i;s++)e.push(t),n.blueprint.push(t),n.data.push(null);return r}function dw(n,e,i,t,r){let s=Ko(),l=t&2;try{Gs(-1),l&&e.length>pi&&aw(n,e,pi,!1),Tr(l?2:0,r),i(t,r)}finally{Gs(s),Tr(l?3:1,r)}}function z1(n,e,i){if(E1(e)){let t=_t(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let l=r;l<s;l++){let d=n.data[l];if(d.contentQueries){let h=i[l];d.contentQueries(1,h,l)}}}finally{_t(t)}}}function H1(n,e,i){sC()&&(D4(n,e,i,Gi(i,e)),(i.flags&64)===64&&fw(n,e,i))}function Q1(n,e,i=Gi){let t=e.localNames;if(t!==null){let r=e.index+1;for(let s=0;s<t.length;s+=2){let l=t[s+1],d=l===-1?i(e,n):n[l];n[r++]=d}}}function uw(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=W1(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function W1(n,e,i,t,r,s,l,d,h,p,g){let v=pi+t,_=v+r,b=u4(v,_),C=typeof p=="function"?p():p;return b[st]={type:n,blueprint:b,template:i,queries:null,viewQuery:d,declTNode:e,data:b.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:h,consts:C,incompleteFirstPass:!1,ssrId:g}}function u4(n,e){let i=[];for(let t=0;t<e;t++)i.push(t<n?null:Rr);return i}function h4(n,e,i,t){let s=t.get(_P,NC)||i===Ar.ShadowDom,l=n.selectRootElement(e,s);return f4(l),l}function f4(n){p4(n)}var p4=()=>null;function m4(n,e,i,t){let r=gw(e);r.push(i),n.firstCreatePass&&vw(n).push(t,r.length-1)}function g4(n,e,i,t,r,s){let l=e?e.injectorIndex:-1,d=0;return aC()&&(d|=128),{type:i,index:t,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:d,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lD(n,e,i,t,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let l=e[s];if(l===void 0)continue;t??={};let d,h=Wo.None;Array.isArray(l)?(d=l[0],h=l[1]):d=l;let p=s;if(r!==null){if(!r.hasOwnProperty(s))continue;p=r[s]}n===0?cD(t,i,p,d,h):cD(t,i,p,d)}return t}function cD(n,e,i,t,r){let s;n.hasOwnProperty(i)?(s=n[i]).push(e,t):s=n[i]=[e,t],r!==void 0&&s.push(r)}function v4(n,e,i){let t=e.directiveStart,r=e.directiveEnd,s=n.data,l=e.attrs,d=[],h=null,p=null;for(let g=t;g<r;g++){let v=s[g],_=i?i.get(v):null,b=_?_.inputs:null,C=_?_.outputs:null;h=lD(0,v.inputs,g,h,b),p=lD(1,v.outputs,g,p,C);let w=h!==null&&l!==null&&!D1(e)?P4(h,g,l):null;d.push(w)}h!==null&&(h.hasOwnProperty("class")&&(e.flags|=8),h.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=d,e.inputs=h,e.outputs=p}function y4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $1(n,e,i,t,r,s,l,d){let h=Gi(e,i),p=e.inputs,g;!d&&p!=null&&(g=p[t])?(X1(n,i,g,t,r),Bh(e)&&S4(i,e.index)):e.type&3?(t=y4(t),r=l!=null?l(r,e.value||"",t):r,s.setProperty(h,t,r)):e.type&12}function S4(n,e){let i=Ys(e,n);i[et]&16||(i[et]|=64)}function Y1(n,e,i,t){if(sC()){let r=t===null?null:{"":-1},s=w4(n,i),l,d;s===null?l=d=null:[l,d]=s,l!==null&&hw(n,e,i,l,r,d),r&&I4(i,t,r)}i.mergedAttrs=Sc(i.mergedAttrs,i.attrs)}function hw(n,e,i,t,r,s){for(let p=0;p<t.length;p++)_g(vh(i,e),n,t[p].type);T4(i,n.data.length,t.length);for(let p=0;p<t.length;p++){let g=t[p];g.providersResolver&&g.providersResolver(g)}let l=!1,d=!1,h=cw(n,e,t.length,null);for(let p=0;p<t.length;p++){let g=t[p];i.mergedAttrs=Sc(i.mergedAttrs,g.hostAttrs),x4(n,i,e,h,g),E4(h,g,r),g.contentQueries!==null&&(i.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(i.flags|=64);let v=g.type.prototype;!l&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((n.preOrderHooks??=[]).push(i.index),l=!0),!d&&(v.ngOnChanges||v.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(i.index),d=!0),h++}v4(n,i,s)}function b4(n,e,i,t,r){let s=r.hostBindings;if(s){let l=n.hostBindingOpCodes;l===null&&(l=n.hostBindingOpCodes=[]);let d=~e.index;_4(l)!=d&&l.push(d),l.push(i,t,s)}}function _4(n){let e=n.length;for(;e>0;){let i=n[--e];if(typeof i=="number"&&i<0)return i}return 0}function D4(n,e,i,t){let r=i.directiveStart,s=i.directiveEnd;Bh(i)&&A4(e,i,n.data[r+i.componentOffset]),n.firstCreatePass||vh(i,e),Xo(t,e);let l=i.initialInputs;for(let d=r;d<s;d++){let h=n.data[d],p=Hs(e,n,d,i);if(Xo(p,e),l!==null&&O4(e,d-r,p,h,i,l),$o(h)){let g=Ys(i.index,e);g[ai]=Hs(e,n,d,i)}}}function fw(n,e,i){let t=i.directiveStart,r=i.directiveEnd,s=i.index,l=kO();try{Gs(s);for(let d=t;d<r;d++){let h=n.data[d],p=e[d];yg(d),(h.hostBindings!==null||h.hostVars!==0||h.hostAttrs!==null)&&C4(h,p)}}finally{Gs(-1),yg(l)}}function C4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function w4(n,e){let i=n.directiveRegistry,t=null,r=null;if(i)for(let s=0;s<i.length;s++){let l=i[s];if(BD(e,l.selectors,!1))if(t||(t=[]),$o(l))if(l.findHostDirectiveDefs!==null){let d=[];r=r||new Map,l.findHostDirectiveDefs(l,d,r),t.unshift(...d,l);let h=d.length;Vg(n,e,h)}else t.unshift(l),Vg(n,e,0);else r=r||new Map,l.findHostDirectiveDefs?.(l,t,r),t.push(l)}return t===null?null:[t,r]}function Vg(n,e,i){e.componentOffset=i,(n.components??=[]).push(e.index)}function I4(n,e,i){if(e){let t=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=i[e[r+1]];if(s==null)throw new Me(-301,!1);t.push(e[r],s)}}}function E4(n,e,i){if(i){if(e.exportAs)for(let t=0;t<e.exportAs.length;t++)i[e.exportAs[t]]=n;$o(e)&&(i[""]=n)}}function T4(n,e,i){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+i,n.providerIndexes=e}function x4(n,e,i,t,r){n.data[t]=r;let s=r.factory||(r.factory=za(r.type,!0)),l=new zs(s,$o(r),K);n.blueprint[t]=l,i[t]=l,b4(n,e,t,cw(n,i,r.hostVars,Rr),r)}function A4(n,e,i){let t=Gi(e,n),r=uw(i),s=n[Kr].rendererFactory,l=16;i.signals?l=4096:i.onPush&&(l=64);let d=tf(n,ef(n,r,null,l,t,e,null,s.createRenderer(t,i),null,null,null));n[e.index]=d}function M4(n,e,i,t,r,s){let l=Gi(n,e);R4(e[Mn],l,s,n.value,i,t,r)}function R4(n,e,i,t,r,s,l){if(s==null)n.removeAttribute(e,r,i);else{let d=l==null?v1(s):l(s,t||"",r);n.setAttribute(e,r,d,i)}}function O4(n,e,i,t,r,s){let l=s[e];if(l!==null)for(let d=0;d<l.length;){let h=l[d++],p=l[d++],g=l[d++],v=l[d++];lw(t,i,h,p,g,v)}}function P4(n,e,i){let t=null,r=0;for(;r<i.length;){let s=i[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){t===null&&(t=[]);let l=n[s];for(let d=0;d<l.length;d+=3)if(l[d]===e){t.push(s,l[d+1],l[d+2],i[r+1]);break}}r+=2}return t}function pw(n,e,i,t){return[n,!0,0,e,null,t,null,i,null,null]}function mw(n,e){let i=n.contentQueries;if(i!==null){let t=_t(null);try{for(let r=0;r<i.length;r+=2){let s=i[r],l=i[r+1];if(l!==-1){let d=n.data[l];Gh(s),d.contentQueries(2,e[l],l)}}}finally{_t(t)}}}function tf(n,e){return n[bc]?n[z2][or]=e:n[bc]=e,n[z2]=e,e}function Bg(n,e,i){Gh(0);let t=_t(null);try{e(n,i)}finally{_t(t)}}function gw(n){return n[hh]??=[]}function vw(n){return n.cleanup??=[]}function yw(n,e){let i=n[$a],t=i?i.get(Oi,null):null;t&&t.handleError(e)}function X1(n,e,i,t,r){for(let s=0;s<i.length;){let l=i[s++],d=i[s++],h=i[s++],p=e[l],g=n.data[l];lw(g,p,t,d,h,r)}}function F4(n,e,i){let t=tC(e,n);QP(n[Mn],t,i)}function k4(n,e){let i=Ys(e,n),t=i[st];L4(t,i);let r=i[ro];r!==null&&i[Wa]===null&&(i[Wa]=B1(r,i[$a])),Z1(t,i,i[ai])}function L4(n,e){for(let i=e.length;i<n.blueprint.length;i++)e.push(n.blueprint[i])}function Z1(n,e,i){O1(e);try{let t=n.viewQuery;t!==null&&Bg(1,t,i);let r=n.template;r!==null&&dw(n,e,r,1,i),n.firstCreatePass&&(n.firstCreatePass=!1),e[Jr]?.finishViewCreation(n),n.staticContentQueries&&mw(n,e),n.staticViewQueries&&Bg(2,n.viewQuery,i);let s=n.components;s!==null&&N4(e,s)}catch(t){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),t}finally{e[et]&=-5,P1()}}function N4(n,e){for(let i=0;i<e.length;i++)k4(n,e[i])}function Tc(n,e,i,t){let r=_t(null);try{let s=e.tView,d=n[et]&4096?4096:16,h=ef(n,s,i,d,null,e,null,null,t?.injector??null,t?.embeddedViewInjector??null,t?.dehydratedView??null),p=n[e.index];h[Us]=p;let g=n[Jr];return g!==null&&(h[Jr]=g.createEmbeddedView(s)),Z1(s,h,i),h}finally{_t(r)}}function Sw(n,e){let i=li+e;if(i<n.length)return n[i]}function Xa(n,e){return!e||e.firstChild===null||RC(n)}function xc(n,e,i,t=!0){let r=e[st];if(ZP(r,e,n,i),t){let l=Ng(i,n),d=e[Mn],h=tw(d,n[qs]);h!==null&&YP(r,n[Ii],d,e,h,l)}let s=e[Wa];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function bw(n,e){let i=_c(n,e);return i!==void 0&&Zh(i[st],i),i}function Dh(n,e,i,t,r=!1){for(;i!==null;){if(i.type===128){i=r?i.projectionNext:i.next;continue}let s=e[i.index];s!==null&&t.push(Mr(s)),oo(s)&&V4(s,t);let l=i.type;if(l&8)Dh(n,e,i.child,t);else if(l&32){let d=q1(i,e),h;for(;h=d();)t.push(h)}else if(l&16){let d=iw(e,i);if(Array.isArray(d))t.push(...d);else{let h=js(e[Ri]);Dh(h[st],h,d,t,!0)}}i=r?i.projectionNext:i.next}return t}function V4(n,e){for(let i=li;i<n.length;i++){let t=n[i],r=t[st].firstChild;r!==null&&Dh(t[st],t,r,e)}n[qs]!==n[ro]&&e.push(n[qs])}var _w=[];function B4(n){return n[ji]??U4(n)}function U4(n){let e=_w.pop()??Object.create(j4);return e.lView=n,e}function q4(n){n.lView[ji]!==n&&(n.lView=null,_w.push(n))}var j4=nn(Ee({},lc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jh(n.lView)},consumerOnSignalRead(){this.lView[ji]=this}});function G4(n){let e=n[ji]??Object.create(z4);return e.lView=n,e}var z4=nn(Ee({},lc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=js(n.lView);for(;e&&!Dw(e[st]);)e=js(e);e&&iC(e)},consumerOnSignalRead(){this.lView[ji]=this}});function Dw(n){return n.type!==2}var H4=100;function Cw(n,e=!0,i=0){let t=n[Kr],r=t.rendererFactory,s=!1;s||r.begin?.();try{Q4(n,i)}catch(l){throw e&&yw(n,l),l}finally{s||(r.end?.(),t.inlineEffectRunner?.flush())}}function Q4(n,e){let i=cC();try{Q2(!0),Ug(n,e);let t=0;for(;qh(n);){if(t===H4)throw new Me(103,!1);t++,Ug(n,1)}}finally{Q2(i)}}function W4(n,e,i,t){let r=e[et];if((r&256)===256)return;let s=!1,l=!1;!s&&e[Kr].inlineEffectRunner?.flush(),O1(e);let d=!0,h=null,p=null;s||(Dw(n)?(p=B4(e),h=fu(p)):z_()===null?(d=!1,p=G4(e),h=fu(p)):e[ji]&&(M0(e[ji]),e[ji]=null));try{nC(e),OO(n.bindingStartIndex),i!==null&&dw(n,e,i,2,t);let g=(r&3)===3;if(!s)if(g){let b=n.preOrderCheckHooks;b!==null&&nh(e,b,null)}else{let b=n.preOrderHooks;b!==null&&ih(e,b,0,null),Y0(e,0)}if(l||$4(e),ww(e,0),n.contentQueries!==null&&mw(n,e),!s)if(g){let b=n.contentCheckHooks;b!==null&&nh(e,b)}else{let b=n.contentHooks;b!==null&&ih(e,b,1),Y0(e,1)}c4(n,e);let v=n.components;v!==null&&Ew(e,v,0);let _=n.viewQuery;if(_!==null&&Bg(2,_,t),!s)if(g){let b=n.viewCheckHooks;b!==null&&nh(e,b)}else{let b=n.viewHooks;b!==null&&ih(e,b,2),Y0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[$0]){for(let b of e[$0])b();e[$0]=null}s||(e[et]&=-73)}catch(g){throw s||jh(e),g}finally{p!==null&&(x0(p,h),d&&q4(p)),P1()}}function ww(n,e){for(let i=PC(n);i!==null;i=FC(i))for(let t=li;t<i.length;t++){let r=i[t];Iw(r,e)}}function $4(n){for(let e=PC(n);e!==null;e=FC(e)){if(!(e[et]&ph.HasTransplantedViews))continue;let i=e[Ya];for(let t=0;t<i.length;t++){let r=i[t];iC(r)}}}function Y4(n,e,i){let t=Ys(e,n);Iw(t,i)}function Iw(n,e){x1(n)&&Ug(n,e)}function Ug(n,e){let t=n[st],r=n[et],s=n[ji],l=!!(e===0&&r&16);if(l||=!!(r&64&&e===0),l||=!!(r&1024),l||=!!(s?.dirty&&A0(s)),l||=!1,s&&(s.dirty=!1),n[et]&=-9217,l)W4(t,n,t.template,n[ai]);else if(r&8192){ww(n,1);let d=t.components;d!==null&&Ew(n,d,1)}}function Ew(n,e,i){for(let t=0;t<e.length;t++)Y4(n,e[t],i)}function K1(n,e){let i=cC()?64:1088;for(n[Kr].changeDetectionScheduler?.notify(e);n;){n[et]|=i;let t=js(n);if(mg(n)&&!t)return n;n=t}return null}var Qs=class{get rootNodes(){let e=this._lView,i=e[st];return Dh(i,e,i.firstChild,[])}constructor(e,i,t=!0){this._lView=e,this._cdRefInjectingView=i,this.notifyErrorHandler=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ai]}set context(e){this._lView[ai]=e}get destroyed(){return(this._lView[et]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ci];if(oo(e)){let i=e[fh],t=i?i.indexOf(this):-1;t>-1&&(_c(e,t),ch(i,t))}this._attachedToViewContainer=!1}Zh(this._lView[st],this._lView)}onDestroy(e){rC(this._lView,e)}markForCheck(){K1(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[et]&=-129}reattach(){vg(this._lView),this._lView[et]|=128}detectChanges(){this._lView[et]|=1024,Cw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=mg(this._lView),i=this._lView[Us];i!==null&&!e&&j1(i,this._lView),ZC(this._lView[st],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=e;let i=mg(this._lView),t=this._lView[Us];t!==null&&!i&&KC(t,this._lView),vg(this._lView)}},Rn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=K4;let n=e;return n})(),X4=Rn,Z4=class extends X4{constructor(e,i,t){super(),this._declarationLView=e,this._declarationTContainer=i,this.elementRef=t}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,i){return this.createEmbeddedViewImpl(e,i)}createEmbeddedViewImpl(e,i,t){let r=Tc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:i,dehydratedView:t});return new Qs(r)}};function K4(){return nf(mi(),At())}function nf(n,e){return n.type&4?new Z4(e,n,il(n,e)):null}var kY=new RegExp(`^(\\d+)*(${SP}|${yP})*(.*)`);var J4=()=>null;function Za(n,e){return J4(n,e)}var Ka=class{},rf=new Ie("",{providedIn:"root",factory:()=>!1});var Tw=new Ie(""),xw=new Ie(""),qg=class{},Ch=class{};function eF(n){let e=Error(`No component factory found for ${Mi(n)}.`);return e[tF]=n,e}var tF="ngComponent";var jg=class{resolveComponentFactory(e){throw eF(e)}},nv=class nv{};nv.NULL=new jg;var no=nv,Zo=class{};var nF=(()=>{let e=class e{};e.\u0275prov=xe({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function wh(n,e,i){let t=i?n.styles:null,r=i?n.classes:null,s=0;if(e!==null)for(let l=0;l<e.length;l++){let d=e[l];if(typeof d=="number")s=d;else if(s==1)r=ag(r,d);else if(s==2){let h=d,p=e[++l];t=ag(t,h+": "+p+";")}}i?n.styles=t:n.stylesWithoutHost=t,i?n.classes=r:n.classesWithoutHost=r}var Gg=class extends no{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let i=Ha(e);return new Ih(i,this.ngModule)}};function dD(n,e){let i=[];for(let t in n){if(!n.hasOwnProperty(t))continue;let r=n[t];if(r===void 0)continue;let s=Array.isArray(r),l=s?r[0]:r,d=s?r[1]:Wo.None;e?i.push({propName:l,templateName:t,isSignal:(d&Wo.SignalBased)!==0}):i.push({propName:l,templateName:t})}return i}function iF(n){let e=n.toLowerCase();return e==="svg"?yO:e==="math"?SO:null}var Ih=class extends Ch{get inputs(){let e=this.componentDef,i=e.inputTransforms,t=dD(e.inputs,!0);if(i!==null)for(let r of t)i.hasOwnProperty(r.propName)&&(r.transform=i[r.propName]);return t}get outputs(){return dD(this.componentDef.outputs,!1)}constructor(e,i){super(),this.componentDef=e,this.ngModule=i,this.componentType=e.type,this.selector=Z3(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!i}create(e,i,t,r){let s=_t(null);try{r=r||this.ngModule;let l=r instanceof sr?r:r?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let d=l?new Sg(e,l):e,h=d.get(Zo,null);if(h===null)throw new Me(407,!1);let p=d.get(nF,null),g=d.get(Ka,null),v={rendererFactory:h,sanitizer:p,inlineEffectRunner:null,changeDetectionScheduler:g},_=h.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",C=t?h4(_,t,this.componentDef.encapsulation,d):XC(_,b,iF(b)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let x=null;C!==null&&(x=B1(C,d,!0));let M=W1(0,null,null,1,0,null,null,null,null,null,null),F=ef(null,M,null,w,null,null,v,_,d,null,x);O1(F);let k,L,U=null;try{let H=this.componentDef,G,$=null;H.findHostDirectiveDefs?(G=[],$=new Map,H.findHostDirectiveDefs(H,G,$),G.push(H)):G=[H];let ne=rF(F,C);U=oF(ne,C,H,G,F,v,_),L=T1(M,pi),C&&lF(_,H,C,t),i!==void 0&&cF(L,this.ngContentSelectors,i),k=aF(U,H,G,$,F,[dF]),Z1(M,F,null)}catch(H){throw U!==null&&Tg(U),Tg(F),H}finally{P1()}return new zg(this.componentType,k,il(L,F),F,L)}finally{_t(s)}}},zg=class extends qg{constructor(e,i,t,r,s){super(),this.location=t,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Qs(r,void 0,!1),this.componentType=e}setInput(e,i){let t=this._tNode.inputs,r;if(t!==null&&(r=t[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),i))return;let s=this._rootLView;X1(s[st],s,r,e,i),this.previousInputValues.set(e,i);let l=Ys(this._tNode.index,s);K1(l,1)}}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function rF(n,e){let i=n[st],t=pi;return n[t]=e,ol(i,t,2,"#host",null)}function oF(n,e,i,t,r,s,l){let d=r[st];sF(t,n,e,l);let h=null;e!==null&&(h=B1(e,r[$a]));let p=s.rendererFactory.createRenderer(e,i),g=16;i.signals?g=4096:i.onPush&&(g=64);let v=ef(r,uw(i),null,g,r[n.index],n,s,p,null,null,h);return d.firstCreatePass&&Vg(d,n,t.length-1),tf(r,v),r[n.index]=v}function sF(n,e,i,t){for(let r of n)e.mergedAttrs=Sc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(wh(e,e.mergedAttrs,!0),i!==null&&sw(t,i,e))}function aF(n,e,i,t,r,s){let l=mi(),d=r[st],h=Gi(l,r);hw(d,r,l,i,null,t);for(let g=0;g<i.length;g++){let v=l.directiveStart+g,_=Hs(r,d,v,l);Xo(_,r)}fw(d,r,l),h&&Xo(h,r);let p=Hs(r,d,l.directiveStart+l.componentOffset,l);if(n[ai]=r[ai]=p,s!==null)for(let g of s)g(p,e);return z1(d,l,r),p}function lF(n,e,i,t){if(t)ug(n,i,["ng-version","18.2.11"]);else{let{attrs:r,classes:s}=K3(e.selectors[0]);r&&ug(n,i,r),s&&s.length>0&&ow(n,i,s.join(" "))}}function cF(n,e,i){let t=n.projection=[];for(let r=0;r<e.length;r++){let s=i[r];t.push(s!=null?Array.from(s):null)}}function dF(){let n=mi();Wh(At()[st],n)}var ti=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uF;let n=e;return n})();function uF(){let n=mi();return Mw(n,At())}var hF=ti,Aw=class extends hF{constructor(e,i,t){super(),this._lContainer=e,this._hostTNode=i,this._hostLView=t}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){let e=F1(this._hostTNode,this._hostLView);if(yC(e)){let i=gh(e,this._hostLView),t=mh(e),r=i[st].data[t+8];return new Bs(r,i)}else return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let i=uD(this._lContainer);return i!==null&&i[e]||null}get length(){return this._lContainer.length-li}createEmbeddedView(e,i,t){let r,s;typeof t=="number"?r=t:t!=null&&(r=t.index,s=t.injector);let l=Za(this._lContainer,e.ssrId),d=e.createEmbeddedViewImpl(i||{},s,l);return this.insertImpl(d,r,Xa(this._hostTNode,l)),d}createComponent(e,i,t,r,s){let l=e&&!pO(e),d;if(l)d=i;else{let C=i||{};d=C.index,t=C.injector,r=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let h=l?e:new Ih(Ha(e)),p=t||this.parentInjector;if(!s&&h.ngModule==null){let w=(l?p:this.parentInjector).get(sr,null);w&&(s=w)}let g=Ha(h.componentType??{}),v=Za(this._lContainer,g?.id??null),_=v?.firstChild??null,b=h.create(p,r,_,s);return this.insertImpl(b.hostView,d,Xa(this._hostTNode,v)),b}insert(e,i){return this.insertImpl(e,i,!0)}insertImpl(e,i,t){let r=e._lView;if(DO(r)){let d=this.indexOf(e);if(d!==-1)this.detach(d);else{let h=r[ci],p=new Aw(h,h[Ii],h[ci]);p.detach(p.indexOf(e))}}let s=this._adjustIndex(i),l=this._lContainer;return xc(l,r,s,t),e.attachToViewContainerRef(),PD(eg(l),s,e),e}move(e,i){return this.insert(e,i)}indexOf(e){let i=uD(this._lContainer);return i!==null?i.indexOf(e):-1}remove(e){let i=this._adjustIndex(e,-1),t=_c(this._lContainer,i);t&&(ch(eg(this._lContainer),i),Zh(t[st],t))}detach(e){let i=this._adjustIndex(e,-1),t=_c(this._lContainer,i);return t&&ch(eg(this._lContainer),i)!=null?new Qs(t):null}_adjustIndex(e,i=0){return e??this.length+i}};function uD(n){return n[fh]}function eg(n){return n[fh]||(n[fh]=[])}function Mw(n,e){let i,t=e[n.index];return oo(t)?i=t:(i=pw(t,e,null,n),e[n.index]=i,tf(e,i)),pF(i,e,n,t),new Aw(i,n,e)}function fF(n,e){let i=n[Mn],t=i.createComment(""),r=Gi(e,n),s=tw(i,r);return _h(i,s,t,t4(i,r),!1),t}var pF=vF,mF=()=>!1;function gF(n,e,i){return mF(n,e,i)}function vF(n,e,i,t){if(n[qs])return;let r;i.type&8?r=Mr(t):r=fF(e,i),n[qs]=r}var Hg=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Qg=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let i=e.queries;if(i!==null){let t=e.contentQueries!==null?e.contentQueries[0]:i.length,r=[];for(let s=0;s<t;s++){let l=i.getByIndex(s),d=this.queries[l.indexInDeclarationView];r.push(d.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let i=0;i<this.queries.length;i++)ev(e,i).matches!==null&&this.queries[i].setDirty()}},Eh=class{constructor(e,i,t=null){this.flags=i,this.read=t,typeof e=="string"?this.predicate=CF(e):this.predicate=e}},Wg=class n{constructor(e=[]){this.queries=e}elementStart(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].elementStart(e,i)}elementEnd(e){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(e)}embeddedTView(e){let i=null;for(let t=0;t<this.length;t++){let r=i!==null?i.length:0,s=this.getByIndex(t).embeddedTView(e,r);s&&(s.indexInDeclarationView=t,i!==null?i.push(s):i=[s])}return i!==null?new n(i):null}template(e,i){for(let t=0;t<this.queries.length;t++)this.queries[t].template(e,i)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$g=class n{constructor(e,i=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(e,i){this.isApplyingToNode(i)&&this.matchTNode(e,i)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,i){this.elementStart(e,i)}embeddedTView(e,i){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,i),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let i=this._declarationNodeIndex,t=e.parent;for(;t!==null&&t.type&8&&t.index!==i;)t=t.parent;return i===(t!==null?t.index:-1)}return this._appliesToNextNode}matchTNode(e,i){let t=this.metadata.predicate;if(Array.isArray(t))for(let r=0;r<t.length;r++){let s=t[r];this.matchTNodeWithReadOption(e,i,yF(i,s)),this.matchTNodeWithReadOption(e,i,rh(i,e,s,!1,!1))}else t===Rn?i.type&4&&this.matchTNodeWithReadOption(e,i,-1):this.matchTNodeWithReadOption(e,i,rh(i,e,t,!1,!1))}matchTNodeWithReadOption(e,i,t){if(t!==null){let r=this.metadata.read;if(r!==null)if(r===We||r===ti||r===Rn&&i.type&4)this.addMatch(i.index,-2);else{let s=rh(i,e,r,!1,!1);s!==null&&this.addMatch(i.index,s)}else this.addMatch(i.index,t)}}addMatch(e,i){this.matches===null?this.matches=[e,i]:this.matches.push(e,i)}};function yF(n,e){let i=n.localNames;if(i!==null){for(let t=0;t<i.length;t+=2)if(i[t]===e)return i[t+1]}return null}function SF(n,e){return n.type&11?il(n,e):n.type&4?nf(n,e):null}function bF(n,e,i,t){return i===-1?SF(e,n):i===-2?_F(n,e,t):Hs(n,n[st],i,e)}function _F(n,e,i){if(i===We)return il(e,n);if(i===Rn)return nf(e,n);if(i===ti)return Mw(e,n)}function Rw(n,e,i,t){let r=e[Jr].queries[t];if(r.matches===null){let s=n.data,l=i.matches,d=[];for(let h=0;l!==null&&h<l.length;h+=2){let p=l[h];if(p<0)d.push(null);else{let g=s[p];d.push(bF(e,g,l[h+1],i.metadata.read))}}r.matches=d}return r.matches}function Yg(n,e,i,t){let r=n.queries.getByIndex(i),s=r.matches;if(s!==null){let l=Rw(n,e,r,i);for(let d=0;d<s.length;d+=2){let h=s[d];if(h>0)t.push(l[d/2]);else{let p=s[d+1],g=e[-h];for(let v=li;v<g.length;v++){let _=g[v];_[Us]===_[ci]&&Yg(_[st],_,p,t)}if(g[Ya]!==null){let v=g[Ya];for(let _=0;_<v.length;_++){let b=v[_];Yg(b[st],b,p,t)}}}}}return t}function J1(n,e){return n[Jr].queries[e].queryList}function Ow(n,e,i){let t=new bh((i&4)===4);return m4(n,e,t,t.destroy),(e[Jr]??=new Qg).queries.push(new Hg(t))-1}function DF(n,e,i){let t=On();return t.firstCreatePass&&(Fw(t,new Eh(n,e,i),-1),(e&2)===2&&(t.staticViewQueries=!0)),Ow(t,At(),e)}function Pw(n,e,i,t){let r=On();if(r.firstCreatePass){let s=mi();Fw(r,new Eh(e,i,t),s.index),wF(r,n),(i&2)===2&&(r.staticContentQueries=!0)}return Ow(r,At(),i)}function CF(n){return n.split(",").map(e=>e.trim())}function Fw(n,e,i){n.queries===null&&(n.queries=new Wg),n.queries.track(new $g(e,i))}function wF(n,e){let i=n.contentQueries||(n.contentQueries=[]),t=i.length?i[i.length-1]:-1;e!==t&&i.push(n.queries.length-1,e)}function ev(n,e){return n.queries.getByIndex(e)}function kw(n,e){let i=n[st],t=ev(i,e);return t.crossesNgTemplate?Yg(i,n,e,[]):Rw(i,n,t,e)}var hD=new Set;function ar(n){hD.has(n)||(hD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function lo(n,e){ar("NgSignals");let i=e2(n),t=i[_r];return e?.equal&&(t.equal=e.equal),i.set=r=>O0(t,r),i.update=r=>t2(t,r),i.asReadonly=IF.bind(i),i}function IF(){let n=this[_r];if(n.readonlyFn===void 0){let e=()=>this();e[_r]=n,n.readonlyFn=e}return n.readonlyFn}function Lw(n,e){let i,t=R0(()=>{i._dirtyCounter();let r=AF(i,n);if(e&&r===void 0)throw new Me(-951,!1);return r});return i=t[_r],i._dirtyCounter=lo(0),i._flatValue=void 0,t}function EF(){return Lw(!0,!1)}function TF(){return Lw(!0,!0)}function xF(n,e){let i=n[_r];i._lView=At(),i._queryIndex=e,i._queryList=J1(i._lView,e),i._queryList.onDirty(()=>i._dirtyCounter.update(t=>t+1))}function AF(n,e){let i=n._lView,t=n._queryIndex;if(i===void 0||t===void 0||i[et]&4)return e?void 0:fi;let r=J1(i,t),s=kw(i,t);return r.reset(s,MC),e?r.first:r._changesDetected||n._flatValue===void 0?n._flatValue=r.toArray():n._flatValue}function fD(n,e){return EF()}function MF(n,e){return TF()}var Nw=(fD.required=MF,fD);function RF(n){return Object.getPrototypeOf(n.prototype).constructor}function zt(n){let e=RF(n.type),i=!0,t=[n];for(;e;){let r;if($o(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Me(903,!1);r=e.\u0275dir}if(r){if(i){t.push(r);let l=n;l.inputs=Ku(n.inputs),l.inputTransforms=Ku(n.inputTransforms),l.declaredInputs=Ku(n.declaredInputs),l.outputs=Ku(n.outputs);let d=r.hostBindings;d&&LF(n,d);let h=r.viewQuery,p=r.contentQueries;if(h&&FF(n,h),p&&kF(n,p),OF(n,r),v3(n.outputs,r.outputs),$o(r)&&r.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let l=0;l<s.length;l++){let d=s[l];d&&d.ngInherit&&d(n),d===zt&&(i=!1)}}e=Object.getPrototypeOf(e)}PF(t)}function OF(n,e){for(let i in e.inputs){if(!e.inputs.hasOwnProperty(i)||n.inputs.hasOwnProperty(i))continue;let t=e.inputs[i];if(t!==void 0&&(n.inputs[i]=t,n.declaredInputs[i]=e.declaredInputs[i],e.inputTransforms!==null)){let r=Array.isArray(t)?t[0]:t;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function PF(n){let e=0,i=null;for(let t=n.length-1;t>=0;t--){let r=n[t];r.hostVars=e+=r.hostVars,r.hostAttrs=Sc(r.hostAttrs,i=Sc(i,r.hostAttrs))}}function Ku(n){return n===Zr?{}:n===fi?[]:n}function FF(n,e){let i=n.viewQuery;i?n.viewQuery=(t,r)=>{e(t,r),i(t,r)}:n.viewQuery=e}function kF(n,e){let i=n.contentQueries;i?n.contentQueries=(t,r,s)=>{e(t,r,s),i(t,r,s)}:n.contentQueries=e}function LF(n,e){let i=n.hostBindings;i?n.hostBindings=(t,r)=>{e(t,r),i(t,r)}:n.hostBindings=e}function Vw(n){let e=i=>{let t=Array.isArray(n);i.hostDirectives===null?(i.findHostDirectiveDefs=Bw,i.hostDirectives=t?n.map(Xg):[n]):t?i.hostDirectives.unshift(...n.map(Xg)):i.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function Bw(n,e,i){if(n.hostDirectives!==null)for(let t of n.hostDirectives)if(typeof t=="function"){let r=t();for(let s of r)pD(Xg(s),e,i)}else pD(t,e,i)}function pD(n,e,i){let t=C1(n.directive);NF(t.declaredInputs,n.inputs),Bw(t,e,i),i.set(t,n),e.push(t)}function Xg(n){return typeof n=="function"?{directive:Kn(n),inputs:Zr,outputs:Zr}:{directive:Kn(n.directive),inputs:mD(n.inputs),outputs:mD(n.outputs)}}function mD(n){if(n===void 0||n.length===0)return Zr;let e={};for(let i=0;i<n.length;i+=2)e[n[i]]=n[i+1];return e}function NF(n,e){for(let i in e)if(e.hasOwnProperty(i)){let t=e[i],r=n[i];n[t]=r}}function cn(n){let e=n.inputConfig,i={};for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];Array.isArray(r)&&r[3]&&(i[t]=r[3])}n.inputTransforms=i}var Ja=class{};var Th=class extends Ja{constructor(e){super(),this.componentFactoryResolver=new Gg(this),this.instance=null;let i=new uh([...e.providers,{provide:Ja,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],e.parent||I1(),e.debugName,new Set(["environment"]));this.injector=i,e.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function VF(n,e,i=null){return new Th({providers:n,parent:e,debugName:i,runEnvironmentInitializers:!0}).injector}function Uw(n){return UF(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function BF(n,e){if(Array.isArray(n))for(let i=0;i<n.length;i++)e(n[i]);else{let i=n[Symbol.iterator](),t;for(;!(t=i.next()).done;)e(t.value)}}function UF(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function es(n,e,i){let t=n[e];return Object.is(t,i)?!1:(n[e]=i,!0)}function qF(n){return(n.flags&32)===32}function jF(n,e,i,t,r,s,l,d,h){let p=e.consts,g=ol(e,n,4,l||null,d||null);Y1(e,i,g,Yo(p,h)),Wh(e,g);let v=g.tView=W1(2,g,t,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,p,null);return e.queries!==null&&(e.queries.template(e,g),v.queries=e.queries.embeddedTView(g)),g}function xh(n,e,i,t,r,s,l,d,h,p){let g=i+pi,v=e.firstCreatePass?jF(g,e,n,t,r,s,l,d,h):e.data[g];Ks(v,!1);let _=GF(e,n,v,i);Hh()&&Kh(e,n,_,v),Xo(_,n);let b=pw(_,n,_,v);return n[g]=b,tf(n,b),gF(b,v,n),Uh(v)&&H1(e,n,v),h!=null&&Q1(n,v,p),v}function ut(n,e,i,t,r,s,l,d){let h=At(),p=On(),g=Yo(p.consts,s);return xh(h,p,n,e,i,t,r,g,l,d),ut}var GF=zF;function zF(n,e,i,t){return Qh(!0),e[Mn].createComment("")}var qa=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(qa||{}),qw=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=xe({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),Ns=class Ns{constructor(){this.ngZone=Re(Fe),this.scheduler=Re(Ka),this.errorHandler=Re(Oi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Ns.PHASES)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[e]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>i.hooks[e](i.pipelinedValue))}catch(t){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(t)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Ns.PHASES=[qa.EarlyRead,qa.Write,qa.MixedReadWrite,qa.Read],Ns.\u0275prov=xe({token:Ns,providedIn:"root",factory:()=>new Ns});var Zg=Ns,Kg=class{constructor(e,i,t,r){this.impl=e,this.hooks=i,this.once=t,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Ac(n,e){!e?.injector&&$D(Ac);let i=e?.injector??Re(Xt);return YC(i)?(ar("NgAfterRender"),jw(n,i,e,!1)):Gw}function co(n,e){!e?.injector&&$D(co);let i=e?.injector??Re(Xt);return YC(i)?(ar("NgAfterNextRender"),jw(n,i,e,!0)):Gw}function HF(n,e){if(n instanceof Function){let i=[void 0,void 0,void 0,void 0];return i[e]=n,i}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function jw(n,e,i,t){let r=e.get(qw);r.impl??=e.get(Zg);let s=i?.phase??qa.MixedReadWrite,l=i?.manualCleanup!==!0?e.get(k1):null,d=new Kg(r.impl,HF(n,s),t,l);return r.impl.register(d),d}var Gw={destroy(){}};function gn(n,e,i,t){let r=At(),s=nl();if(es(r,s,e)){let l=On(),d=zh();M4(d,r,n,e,i,t)}return gn}function zw(n,e,i,t){return es(n,nl(),i)?e+v1(i)+t:Rr}function Ju(n,e){return n<<17|e<<2}function Ws(n){return n>>17&32767}function QF(n){return(n&2)==2}function WF(n,e){return n&131071|e<<17}function Jg(n){return n|2}function el(n){return(n&131068)>>2}function tg(n,e){return n&-131069|e<<2}function $F(n){return(n&1)===1}function e1(n){return n|1}function YF(n,e,i,t,r,s){let l=s?e.classBindings:e.styleBindings,d=Ws(l),h=el(l);n[t]=i;let p=!1,g;if(Array.isArray(i)){let v=i;g=v[1],(g===null||wc(v,g)>0)&&(p=!0)}else g=i;if(r)if(h!==0){let _=Ws(n[d+1]);n[t+1]=Ju(_,d),_!==0&&(n[_+1]=tg(n[_+1],t)),n[d+1]=WF(n[d+1],t)}else n[t+1]=Ju(d,0),d!==0&&(n[d+1]=tg(n[d+1],t)),d=t;else n[t+1]=Ju(h,0),d===0?d=t:n[h+1]=tg(n[h+1],t),h=t;p&&(n[t+1]=Jg(n[t+1])),gD(n,g,t,!0),gD(n,g,t,!1),XF(e,g,n,t,s),l=Ju(d,h),s?e.classBindings=l:e.styleBindings=l}function XF(n,e,i,t,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&wc(s,e)>=0&&(i[t+1]=e1(i[t+1]))}function gD(n,e,i,t){let r=n[i+1],s=e===null,l=t?Ws(r):el(r),d=!1;for(;l!==0&&(d===!1||s);){let h=n[l],p=n[l+1];ZF(h,e)&&(d=!0,n[l+1]=t?e1(p):Jg(p)),l=t?Ws(p):el(p)}d&&(n[i+1]=t?Jg(r):e1(r))}function ZF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wc(n,e)>=0:!1}var rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KF(n){return n.substring(rr.key,rr.keyEnd)}function JF(n){return e8(n),Hw(n,Qw(n,0,rr.textEnd))}function Hw(n,e){let i=rr.textEnd;return i===e?-1:(e=rr.keyEnd=t8(n,rr.key=e,i),Qw(n,e,i))}function e8(n){rr.key=0,rr.keyEnd=0,rr.value=0,rr.valueEnd=0,rr.textEnd=n.length}function Qw(n,e,i){for(;e<i&&n.charCodeAt(e)<=32;)e++;return e}function t8(n,e,i){for(;e<i&&n.charCodeAt(e)>32;)e++;return e}function Ft(n,e,i){let t=At(),r=nl();if(es(t,r,e)){let s=On(),l=zh();$1(s,l,t,n,e,t[Mn],i,!1)}return Ft}function t1(n,e,i,t,r){let s=e.inputs,l=r?"class":"style";X1(n,i,s[l],l,t)}function Or(n,e,i){return Ww(n,e,i,!1),Or}function Ut(n,e){return Ww(n,e,null,!0),Ut}function ts(n){i8(c8,n8,n,!0)}function n8(n,e){for(let i=JF(e);i>=0;i=Hw(e,i))_1(n,KF(e),!0)}function Ww(n,e,i,t){let r=At(),s=On(),l=dC(2);if(s.firstUpdatePass&&Yw(s,n,l,t),e!==Rr&&es(r,l,e)){let d=s.data[Ko()];Xw(s,d,r,r[Mn],n,r[l+1]=u8(e,i),t,l)}}function i8(n,e,i,t){let r=On(),s=dC(2);r.firstUpdatePass&&Yw(r,null,s,t);let l=At();if(i!==Rr&&es(l,s,i)){let d=r.data[Ko()];if(Zw(d,t)&&!$w(r,s)){let h=t?d.classesWithoutHost:d.stylesWithoutHost;h!==null&&(i=ag(h,i||"")),t1(r,d,l,i,t)}else d8(r,d,l,l[Mn],l[s+1],l[s+1]=l8(n,e,i),t,s)}}function $w(n,e){return e>=n.expandoStartIndex}function Yw(n,e,i,t){let r=n.data;if(r[i+1]===null){let s=r[Ko()],l=$w(n,i);Zw(s,t)&&e===null&&!l&&(e=!1),e=r8(r,s,e,t),YF(r,s,e,i,l,t)}}function r8(n,e,i,t){let r=LO(n),s=t?e.residualClasses:e.residualStyles;if(r===null)(t?e.classBindings:e.styleBindings)===0&&(i=ng(null,n,e,i,t),i=Dc(i,e.attrs,t),s=null);else{let l=e.directiveStylingLast;if(l===-1||n[l]!==r)if(i=ng(r,n,e,i,t),s===null){let h=o8(n,e,t);h!==void 0&&Array.isArray(h)&&(h=ng(null,n,e,h[1],t),h=Dc(h,e.attrs,t),s8(n,e,t,h))}else s=a8(n,e,t)}return s!==void 0&&(t?e.residualClasses=s:e.residualStyles=s),i}function o8(n,e,i){let t=i?e.classBindings:e.styleBindings;if(el(t)!==0)return n[Ws(t)]}function s8(n,e,i,t){let r=i?e.classBindings:e.styleBindings;n[Ws(r)]=t}function a8(n,e,i){let t,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let l=n[s].hostAttrs;t=Dc(t,l,i)}return Dc(t,e.attrs,i)}function ng(n,e,i,t,r){let s=null,l=i.directiveEnd,d=i.directiveStylingLast;for(d===-1?d=i.directiveStart:d++;d<l&&(s=e[d],t=Dc(t,s.hostAttrs,r),s!==n);)d++;return n!==null&&(i.directiveStylingLast=d),t}function Dc(n,e,i){let t=i?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];typeof l=="number"?r=l:r===t&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_1(n,l,i?!0:e[++s]))}return n===void 0?null:n}function l8(n,e,i){if(i==null||i==="")return fi;let t=[],r=so(i);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(t,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&n(t,s,r[s]);else typeof r=="string"&&e(t,r);return t}function c8(n,e,i){let t=String(e);t!==""&&!t.includes(" ")&&_1(n,t,i)}function d8(n,e,i,t,r,s,l,d){r===Rr&&(r=fi);let h=0,p=0,g=0<r.length?r[0]:null,v=0<s.length?s[0]:null;for(;g!==null||v!==null;){let _=h<r.length?r[h+1]:void 0,b=p<s.length?s[p+1]:void 0,C=null,w;g===v?(h+=2,p+=2,_!==b&&(C=v,w=b)):v===null||g!==null&&g<v?(h+=2,C=g):(p+=2,C=v,w=b),C!==null&&Xw(n,e,i,t,C,w,l,d),g=h<r.length?r[h]:null,v=p<s.length?s[p]:null}}function Xw(n,e,i,t,r,s,l,d){if(!(e.type&3))return;let h=n.data,p=h[d+1],g=$F(p)?vD(h,e,i,r,el(p),l):void 0;if(!Ah(g)){Ah(s)||QF(p)&&(s=vD(h,null,i,r,d,l));let v=tC(Ko(),i);a4(t,l,v,r,s)}}function vD(n,e,i,t,r,s){let l=e===null,d;for(;r>0;){let h=n[r],p=Array.isArray(h),g=p?h[1]:h,v=g===null,_=i[r+1];_===Rr&&(_=v?fi:void 0);let b=v?Q0(_,t):g===t?_:void 0;if(p&&!Ah(b)&&(b=Q0(h,t)),Ah(b)&&(d=b,l))return d;let C=n[r+1];r=l?Ws(C):el(C)}if(e!==null){let h=s?e.residualClasses:e.residualStyles;h!=null&&(d=Q0(h,t))}return d}function Ah(n){return n!==void 0}function u8(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Mi(so(n)))),n}function Zw(n,e){return(n.flags&(e?8:16))!==0}var n1=class{destroy(e){}updateValue(e,i){}swap(e,i){let t=Math.min(e,i),r=Math.max(e,i),s=this.detach(r);if(r-t>1){let l=this.detach(t);this.attach(t,s),this.attach(r,l)}else this.attach(t,s)}move(e,i){this.attach(i,this.detach(e))}};function ig(n,e,i,t,r){return n===i&&Object.is(e,t)?1:Object.is(r(n,e),r(i,t))?-1:0}function h8(n,e,i){let t,r,s=0,l=n.length-1,d=void 0;if(Array.isArray(e)){let h=e.length-1;for(;s<=l&&s<=h;){let p=n.at(s),g=e[s],v=ig(s,p,s,g,i);if(v!==0){v<0&&n.updateValue(s,g),s++;continue}let _=n.at(l),b=e[h],C=ig(l,_,h,b,i);if(C!==0){C<0&&n.updateValue(l,b),l--,h--;continue}let w=i(s,p),x=i(l,_),M=i(s,g);if(Object.is(M,x)){let F=i(h,b);Object.is(F,w)?(n.swap(s,l),n.updateValue(l,b),h--,l--):n.move(l,s),n.updateValue(s,g),s++;continue}if(t??=new Mh,r??=SD(n,s,l,i),i1(n,t,s,M))n.updateValue(s,g),s++,l++;else if(r.has(M))t.set(w,n.detach(s)),l--;else{let F=n.create(s,e[s]);n.attach(s,F),s++,l++}}for(;s<=h;)yD(n,t,i,s,e[s]),s++}else if(e!=null){let h=e[Symbol.iterator](),p=h.next();for(;!p.done&&s<=l;){let g=n.at(s),v=p.value,_=ig(s,g,s,v,i);if(_!==0)_<0&&n.updateValue(s,v),s++,p=h.next();else{t??=new Mh,r??=SD(n,s,l,i);let b=i(s,v);if(i1(n,t,s,b))n.updateValue(s,v),s++,l++,p=h.next();else if(!r.has(b))n.attach(s,n.create(s,v)),s++,l++,p=h.next();else{let C=i(s,g);t.set(C,n.detach(s)),l--}}}for(;!p.done;)yD(n,t,i,n.length,p.value),p=h.next()}for(;s<=l;)n.destroy(n.detach(l--));t?.forEach(h=>{n.destroy(h)})}function i1(n,e,i,t){return e!==void 0&&e.has(t)?(n.attach(i,e.get(t)),e.delete(t),!0):!1}function yD(n,e,i,t,r){if(i1(n,e,t,i(t,r)))n.updateValue(t,r);else{let s=n.create(t,r);n.attach(t,s)}}function SD(n,e,i,t){let r=new Set;for(let s=e;s<=i;s++)r.add(t(s,n.at(s)));return r}var Mh=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let i=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(i)?(this.kvMap.set(e,this._vMap.get(i)),this._vMap.delete(i)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,i){if(this.kvMap.has(e)){let t=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(t);)t=r.get(t);r.set(t,i)}else this.kvMap.set(e,i)}forEach(e){for(let[i,t]of this.kvMap)if(e(t,i),this._vMap!==void 0){let r=this._vMap;for(;r.has(t);)t=r.get(t),e(t,i)}}};function qt(n,e){ar("NgControlFlow");let i=At(),t=nl(),r=i[t]!==Rr?i[t]:-1,s=r!==-1?Rh(i,pi+r):void 0,l=0;if(es(i,t,n)){let d=_t(null);try{if(s!==void 0&&bw(s,l),n!==-1){let h=pi+n,p=Rh(i,h),g=a1(i[st],h),v=Za(p,g.tView.ssrId),_=Tc(i,g,e,{dehydratedView:v});xc(p,_,l,Xa(g,v))}}finally{_t(d)}}else if(s!==void 0){let d=Sw(s,l);d!==void 0&&(d[ai]=e)}}var r1=class{constructor(e,i,t){this.lContainer=e,this.$implicit=i,this.$index=t}get $count(){return this.lContainer.length-li}};function Kw(n){return n}var o1=class{constructor(e,i,t){this.hasEmptyBlock=e,this.trackByFn=i,this.liveCollection=t}};function Jw(n,e,i,t,r,s,l,d,h,p,g,v,_){ar("NgControlFlow");let b=At(),C=On(),w=h!==void 0,x=At(),M=d?l.bind(x[Ri][ai]):l,F=new o1(w,M);x[pi+n]=F,xh(b,C,n+1,e,i,t,r,Yo(C.consts,s)),w&&xh(b,C,n+2,h,p,g,v,Yo(C.consts,_))}var s1=class extends n1{constructor(e,i,t){super(),this.lContainer=e,this.hostLView=i,this.templateTNode=t,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-li}at(e){return this.getLView(e)[ai].$implicit}attach(e,i){let t=i[Wa];this.needsIndexUpdate||=e!==this.length,xc(this.lContainer,i,e,Xa(this.templateTNode,t))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,f8(this.lContainer,e)}create(e,i){let t=Za(this.lContainer,this.templateTNode.tView.ssrId),r=Tc(this.hostLView,this.templateTNode,new r1(this.lContainer,i,e),{dehydratedView:t});return this.operationsCounter?.recordCreate(),r}destroy(e){Zh(e[st],e),this.operationsCounter?.recordDestroy()}updateValue(e,i){this.getLView(e)[ai].$implicit=i}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[ai].$index=e}getLView(e){return p8(this.lContainer,e)}};function eI(n){let e=_t(null),i=Ko();try{let t=At(),r=t[st],s=t[i],l=i+1,d=Rh(t,l);if(s.liveCollection===void 0){let p=a1(r,l);s.liveCollection=new s1(d,t,p)}else s.liveCollection.reset();let h=s.liveCollection;if(h8(h,n,s.trackByFn),h.updateIndexes(),s.hasEmptyBlock){let p=nl(),g=h.length===0;if(es(t,p,g)){let v=i+2,_=Rh(t,v);if(g){let b=a1(r,v),C=Za(_,b.tView.ssrId),w=Tc(t,b,void 0,{dehydratedView:C});xc(_,w,0,Xa(b,C))}else bw(_,0)}}}finally{_t(e)}}function Rh(n,e){return n[e]}function f8(n,e){return _c(n,e)}function p8(n,e){return Sw(n,e)}function a1(n,e){return T1(n,e)}function m8(n,e,i,t,r,s){let l=e.consts,d=Yo(l,r),h=ol(e,n,2,t,d);return Y1(e,i,h,Yo(l,s)),h.attrs!==null&&wh(h,h.attrs,!1),h.mergedAttrs!==null&&wh(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function Pe(n,e,i,t){let r=At(),s=On(),l=pi+n,d=r[Mn],h=s.firstCreatePass?m8(l,s,r,e,i,t):s.data[l],p=g8(s,r,h,d,e,n);r[l]=p;let g=Uh(h);return Ks(h,!0),sw(d,p,h),!qF(h)&&Hh()&&Kh(s,r,p,h),IO()===0&&Xo(p,r),EO(),g&&(H1(s,r,h),z1(s,h,r)),t!==null&&Q1(r,h),Pe}function Ve(){let n=mi();A1()?M1():(n=n.parent,Ks(n,!1));let e=n;xO(e)&&AO(),TO();let i=On();return i.firstCreatePass&&(Wh(i,n),E1(n)&&i.queries.elementEnd(n)),e.classesWithoutHost!=null&&GO(e)&&t1(i,e,At(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&zO(e)&&t1(i,e,At(),e.stylesWithoutHost,!1),Ve}function Mt(n,e,i,t){return Pe(n,e,i,t),Ve(),Mt}var g8=(n,e,i,t,r,s)=>(Qh(!0),XC(t,r,BO()));function v8(n,e,i,t,r){let s=e.consts,l=Yo(s,t),d=ol(e,n,8,"ng-container",l);l!==null&&wh(d,l,!0);let h=Yo(s,r);return Y1(e,i,d,h),e.queries!==null&&e.queries.elementStart(e,d),d}function Js(n,e,i){let t=At(),r=On(),s=n+pi,l=r.firstCreatePass?v8(s,r,t,e,i):r.data[s];Ks(l,!0);let d=y8(r,t,l,n);return t[s]=d,Hh()&&Kh(r,t,d,l),Xo(d,t),Uh(l)&&(H1(r,t,l),z1(r,l,t)),i!=null&&Q1(t,l),Js}function ea(){let n=mi(),e=On();return A1()?M1():(n=n.parent,Ks(n,!1)),e.firstCreatePass&&(Wh(e,n),E1(n)&&e.queries.elementEnd(n)),ea}function vi(n,e,i){return Js(n,e,i),ea(),vi}var y8=(n,e,i,t)=>(Qh(!0),WP(e[Mn],""));function ta(){return At()}function uo(n,e,i){let t=At(),r=nl();if(es(t,r,e)){let s=On(),l=zh();$1(s,l,t,n,e,t[Mn],i,!0)}return uo}var Oh="en-US";var S8=Oh;function b8(n){typeof n=="string"&&(S8=n.toLowerCase().replace(/_/g,"-"))}var _8=(n,e,i)=>{};function rn(n,e,i,t){let r=At(),s=On(),l=mi();return C8(s,r,r[Mn],l,n,e,t),rn}function D8(n,e,i,t){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let l=r[s];if(l===i&&r[s+1]===t){let d=e[hh],h=r[s+2];return d.length>h?d[h]:null}typeof l=="string"&&(s+=2)}return null}function C8(n,e,i,t,r,s,l){let d=Uh(t),p=n.firstCreatePass&&vw(n),g=e[ai],v=gw(e),_=!0;if(t.type&3||l){let w=Gi(t,e),x=l?l(w):w,M=v.length,F=l?L=>l(Mr(L[t.index])):t.index,k=null;if(!l&&d&&(k=D8(n,e,r,t.index)),k!==null){let L=k.__ngLastListenerFn__||k;L.__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,_=!1}else{s=_D(t,e,g,s),_8(w,r,s);let L=i.listen(x,r,s);v.push(s,L),p&&p.push(r,F,M,M+1)}}else s=_D(t,e,g,s);let b=t.outputs,C;if(_&&b!==null&&(C=b[r])){let w=C.length;if(w)for(let x=0;x<w;x+=2){let M=C[x],F=C[x+1],U=e[M][F].subscribe(s),H=v.length;v.push(s,U),p&&p.push(r,t.index,H,-(H+1))}}}function bD(n,e,i,t){let r=_t(null);try{return Tr(6,e,i),i(t)!==!1}catch(s){return yw(n,s),!1}finally{Tr(7,e,i),_t(r)}}function _D(n,e,i,t){return function r(s){if(s===Function)return t;let l=n.componentOffset>-1?Ys(n.index,e):e;K1(l,5);let d=bD(e,i,t,s),h=r.__ngNextListenerFn__;for(;h;)d=bD(e,i,h,s)&&d,h=h.__ngNextListenerFn__;return d}}function fn(n=1){return VO(n)}function w8(n,e){let i=null,t=Q3(n);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){i=r;continue}if(t===null?BD(n,s,!0):Y3(t,s))return r}return i}function ni(n){let e=At()[Ri][Ii];if(!e.projection){let i=n?n.length:1,t=e.projection=N3(i,null),r=t.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let l=n?w8(s,n):0;l!==null&&(r[l]?r[l].projectionNext=s:t[l]=s,r[l]=s)}s=s.next}}}function Zt(n,e=0,i,t,r,s){let l=At(),d=On(),h=t?n+1:null;h!==null&&xh(l,d,h,t,r,s,null,i);let p=ol(d,pi+n,16,null,i||null);p.projection===null&&(p.projection=e),M1();let v=!l[Wa]||aC();l[Ri][Ii].projection[p.projection]===null&&h!==null?I8(l,d,h):v&&(p.flags&32)!==32&&o4(d,l,p)}function I8(n,e,i){let t=pi+i,r=e.data[t],s=n[t],l=Za(s,r.tView.ssrId),d=Tc(n,r,void 0,{dehydratedView:l});xc(s,d,0,Xa(r,l))}function Mc(n,e,i){return tI(n,"",e,"",i),Mc}function tI(n,e,i,t,r){let s=At(),l=zw(s,e,i,t);if(l!==Rr){let d=On(),h=zh();$1(d,h,s,n,l,s[Mn],r,!1)}return tI}function jn(n,e,i,t){Pw(n,e,i,t)}function vn(n,e,i){DF(n,e,i)}function lt(n){let e=At(),i=On(),t=R1();Gh(t+1);let r=ev(i,t);if(n.dirty&&_O(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=kw(e,t);n.reset(s,MC),n.notifyOnChanges()}return!0}return!1}function ct(){return J1(At(),R1())}function nI(n,e,i,t,r){xF(e,Pw(n,i,t,r))}function iI(n=1){Gh(R1()+n)}function Rc(n){let e=RO();return bO(e,pi+n)}function _n(n,e=""){let i=At(),t=On(),r=n+pi,s=t.firstCreatePass?ol(t,r,1,e,null):t.data[r],l=E8(t,i,s,e,n);i[r]=l,Hh()&&Kh(t,i,l,s),Ks(s,!1)}var E8=(n,e,i,t,r)=>(Qh(!0),HP(e[Mn],t));function ho(n){return Pr("",n,""),ho}function Pr(n,e,i){let t=At(),r=zw(t,n,e,i);return r!==Rr&&F4(t,Ko(),r),Pr}function T8(n,e,i){let t=On();if(t.firstCreatePass){let r=$o(n);l1(i,t.data,t.blueprint,r,!0),l1(e,t.data,t.blueprint,r,!1)}}function l1(n,e,i,t,r){if(n=Kn(n),Array.isArray(n))for(let s=0;s<n.length;s++)l1(n[s],e,i,t,r);else{let s=On(),l=At(),d=mi(),h=Qa(n)?n:Kn(n.provide),p=QD(n),g=d.providerIndexes&1048575,v=d.directiveStart,_=d.providerIndexes>>20;if(Qa(n)||!n.multi){let b=new zs(p,r,K),C=og(h,e,r?g:g+_,v);C===-1?(_g(vh(d,l),s,h),rg(s,n,e.length),e.push(h),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),i.push(b),l.push(b)):(i[C]=b,l[C]=b)}else{let b=og(h,e,g+_,v),C=og(h,e,g,g+_),w=b>=0&&i[b],x=C>=0&&i[C];if(r&&!x||!r&&!w){_g(vh(d,l),s,h);let M=M8(r?A8:x8,i.length,r,t,p);!r&&x&&(i[C].providerFactory=M),rg(s,n,e.length,0),e.push(h),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),i.push(M),l.push(M)}else{let M=rI(i[r?C:b],p,!r&&t);rg(s,n,b>-1?b:C,M)}!r&&t&&x&&i[C].componentProviders++}}}function rg(n,e,i,t){let r=Qa(e),s=aO(e);if(r||s){let h=(s?Kn(e.useClass):e).prototype.ngOnDestroy;if(h){let p=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let g=p.indexOf(i);g===-1?p.push(i,[t,h]):p[g+1].push(t,h)}else p.push(i,h)}}}function rI(n,e,i){return i&&n.componentProviders++,n.multi.push(e)-1}function og(n,e,i,t){for(let r=i;r<t;r++)if(e[r]===n)return r;return-1}function x8(n,e,i,t){return c1(this.multi,[])}function A8(n,e,i,t){let r=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,d=Hs(i,i[st],this.providerFactory.index,t);s=d.slice(0,l),c1(r,s);for(let h=l;h<d.length;h++)s.push(d[h])}else s=[],c1(r,s);return s}function c1(n,e){for(let i=0;i<n.length;i++){let t=n[i];e.push(t())}return e}function M8(n,e,i,t,r){let s=new zs(n,i,K);return s.multi=[],s.index=e,s.componentProviders=0,rI(s,r,t&&!i),s}function Kt(n,e=[]){return i=>{i.providersResolver=(t,r)=>T8(t,r?r(n):n,e)}}var R8=(()=>{let e=class e{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=GD(!1,t.type),s=r.length>0?VF([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=xe({token:e,providedIn:"environment",factory:()=>new e(le(sr))});let n=e;return n})();function kt(n){ar("NgStandalone"),n.getStandaloneInjector=e=>e.get(R8).getOrCreateStandaloneInjector(n)}function oI(n,e){return nf(n,e)}var $s=class{constructor(e){this.full=e;let i=e.split(".");this.major=i[0],this.minor=i[1],this.patch=i.slice(2).join(".")}},sI=new $s("18.2.11");var aI=new Ie("");function Oc(n){return!!n&&typeof n.then=="function"}function lI(n){return!!n&&typeof n.subscribe=="function"}var tv=new Ie(""),cI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=Re(tv,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let s of this.appInits){let l=s();if(Oc(l))t.push(l);else if(lI(l)){let d=new Promise((h,p)=>{l.subscribe({complete:h,error:p})});t.push(d)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(s=>{this.reject(s)}),t.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),O8=new Ie("");function P8(){J_(()=>{throw new Me(600,!1)})}function F8(n){return n.isBoundToModule}var k8=10;function L8(n,e,i){try{let t=i();return Oc(t)?t.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):t}catch(t){throw e.runOutsideAngular(()=>n.handleError(t)),t}}var Fr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Re(dP),this.afterRenderManager=Re(qw),this.zonelessEnabled=Re(rf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ke,this.afterTick=new ke,this.componentTypes=[],this.components=[],this.isStable=Re($h).hasPendingTasks.pipe(Ct(t=>!t)),this._injector=Re(sr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:s=>{s&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let s=t instanceof Ch;if(!this._injector.get(cI).done){let b=!s&&tO(t),C=!1;throw new Me(405,C)}let d;s?d=t:d=this._injector.get(no).resolveComponentFactory(t),this.componentTypes.push(d.componentType);let h=F8(d)?void 0:this._injector.get(Ja),p=r||d.selector,g=d.create(Xt.NULL,[],p,h),v=g.location.nativeElement,_=g.injector.get(aI,null);return _?.registerApplication(v),g.onDestroy(()=>{this.detachView(g.hostView),oh(this.components,g),_?.unregisterApplication(v)}),this._loadComponent(g),g}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Me(101,!1);let t=_t(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,_t(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Zo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<k8;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:s,notifyErrorHandler:l}of this._views)N8(s,l,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>qh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;oh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(O8,[]);[...this._bootstrapListeners,...r].forEach(s=>s(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Me(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oh(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function N8(n,e,i,t){if(!i&&!qh(n))return;Cw(n,e,i&&!t?0:1)}var V8=(()=>{let e=class e{constructor(){this.zone=Re(Fe),this.changeDetectionScheduler=Re(Ka),this.applicationRef=Re(Fr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),B8=new Ie("",{factory:()=>!1});function dI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:i}){return n??=()=>new Fe(nn(Ee({},hI()),{scheduleInRootZone:i})),[{provide:Fe,useFactory:n},{provide:yc,multi:!0,useFactory:()=>{let t=Re(V8,{optional:!0});return()=>t.initialize()}},{provide:yc,multi:!0,useFactory:()=>{let t=Re(U8);return()=>{t.initialize()}}},e===!0?{provide:Tw,useValue:!0}:[],{provide:xw,useValue:i??TC}]}function uI(n){let e=n?.ignoreChangesOutsideZone,i=n?.scheduleInRootZone,t=dI({ngZoneFactory:()=>{let r=hI(n);return r.scheduleInRootZone=i,r.shouldCoalesceEventChangeDetection&&ar("NgZone_CoalesceEvent"),new Fe(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:i});return Lh([{provide:B8,useValue:!0},{provide:rf,useValue:!1},t])}function hI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var U8=(()=>{let e=class e{constructor(){this.subscription=new Yt,this.initialized=!1,this.zone=Re(Fe),this.pendingTasks=Re($h)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var q8=(()=>{let e=class e{constructor(){this.appRef=Re(Fr),this.taskService=Re($h),this.ngZone=Re(Fe),this.zonelessEnabled=Re(rf),this.disableScheduling=Re(Tw,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Yt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Sh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Re(xw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Eg||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?K2:xC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Sh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,K2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function j8(){return typeof $localize<"u"&&$localize.locale||Oh}var of=new Ie("",{providedIn:"root",factory:()=>Re(of,xt.Optional|xt.SkipSelf)||j8()});var d1=new Ie("");function eh(n){return!n.moduleRef}function G8(n){let e=eh(n)?n.r3Injector:n.moduleRef.injector,i=e.get(Fe);return i.run(()=>{eh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let t=e.get(Oi,null),r;if(i.runOutsideAngular(()=>{r=i.onError.subscribe({next:s=>{t.handleError(s)}})}),eh(n)){let s=()=>e.destroy(),l=n.platformInjector.get(d1);l.add(s),e.onDestroy(()=>{r.unsubscribe(),l.delete(s)})}else{let s=()=>n.moduleRef.destroy(),l=n.platformInjector.get(d1);l.add(s),n.moduleRef.onDestroy(()=>{oh(n.allPlatformModules,n.moduleRef),r.unsubscribe(),l.delete(s)})}return L8(t,i,()=>{let s=e.get(cI);return s.runInitializers(),s.donePromise.then(()=>{let l=e.get(of,Oh);if(b8(l||Oh),eh(n)){let d=e.get(Fr);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return z8(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function z8(n,e){let i=n.injector.get(Fr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(t=>i.bootstrap(t));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(i);else throw new Me(-403,!1);e.push(n)}var sh=null;function H8(n=[],e){return Xt.create({name:e,providers:[{provide:Nh,useValue:"platform"},{provide:d1,useValue:new Set([()=>sh=null])},...n]})}function Q8(n=[]){if(sh)return sh;let e=H8(n);return sh=e,P8(),W8(e),e}function W8(n){n.get(V1,null)?.forEach(i=>i())}function fI(){return!1}var Pn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$8;let n=e;return n})();function $8(n){return Y8(mi(),At(),(n&16)===16)}function Y8(n,e,i){if(Bh(n)&&!i){let t=Ys(n.index,e);return new Qs(t,t)}else if(n.type&175){let t=e[Ri];return new Qs(t,e)}return null}var u1=class{constructor(){}supports(e){return Uw(e)}create(e){return new h1(e)}},X8=(n,e)=>e,h1=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||X8}forEachItem(e){let i;for(i=this._itHead;i!==null;i=i._next)e(i)}forEachOperation(e){let i=this._itHead,t=this._removalsHead,r=0,s=null;for(;i||t;){let l=!t||i&&i.currentIndex<DD(t,r,s)?i:t,d=DD(l,r,s),h=l.currentIndex;if(l===t)r--,t=t._nextRemoved;else if(i=i._next,l.previousIndex==null)r++;else{s||(s=[]);let p=d-r,g=h-r;if(p!=g){for(let _=0;_<p;_++){let b=_<s.length?s[_]:s[_]=0,C=b+_;g<=C&&C<p&&(s[_]=b+1)}let v=l.previousIndex;s[v]=g-p}}d!==h&&e(l,d,h)}}forEachPreviousItem(e){let i;for(i=this._previousItHead;i!==null;i=i._nextPrevious)e(i)}forEachAddedItem(e){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)e(i)}forEachMovedItem(e){let i;for(i=this._movesHead;i!==null;i=i._nextMoved)e(i)}forEachRemovedItem(e){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)e(i)}forEachIdentityChange(e){let i;for(i=this._identityChangesHead;i!==null;i=i._nextIdentityChange)e(i)}diff(e){if(e==null&&(e=[]),!Uw(e))throw new Me(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i=this._itHead,t=!1,r,s,l;if(Array.isArray(e)){this.length=e.length;for(let d=0;d<this.length;d++)s=e[d],l=this._trackByFn(d,s),i===null||!Object.is(i.trackById,l)?(i=this._mismatch(i,s,l,d),t=!0):(t&&(i=this._verifyReinsertion(i,s,l,d)),Object.is(i.item,s)||this._addIdentityChange(i,s)),i=i._next}else r=0,BF(e,d=>{l=this._trackByFn(r,d),i===null||!Object.is(i.trackById,l)?(i=this._mismatch(i,d,l,r),t=!0):(t&&(i=this._verifyReinsertion(i,d,l,r)),Object.is(i.item,d)||this._addIdentityChange(i,d)),i=i._next,r++}),this.length=r;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,i,t,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(t,r),e!==null?(Object.is(e.item,i)||this._addIdentityChange(e,i),this._moveAfter(e,s,r)):e=this._addAfter(new f1(i,t),s,r)),e}_verifyReinsertion(e,i,t,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(t,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let i=e._next;this._addToRemovals(this._unlink(e)),e=i}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,i,t){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,i,t),this._addToMoves(e,t),e}_moveAfter(e,i,t){return this._unlink(e),this._insertAfter(e,i,t),this._addToMoves(e,t),e}_addAfter(e,i,t){return this._insertAfter(e,i,t),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,i,t){let r=i===null?this._itHead:i._next;return e._next=r,e._prev=i,r===null?this._itTail=e:r._prev=e,i===null?this._itHead=e:i._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ph),this._linkedRecords.put(e),e.currentIndex=t,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let i=e._prev,t=e._next;return i===null?this._itHead=t:i._next=t,t===null?this._itTail=i:t._prev=i,e}_addToMoves(e,i){return e.previousIndex===i||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ph),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,i){return e.item=i,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},f1=class{constructor(e,i){this.item=e,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},p1=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,i){let t;for(t=this._head;t!==null;t=t._nextDup)if((i===null||i<=t.currentIndex)&&Object.is(t.trackById,e))return t;return null}remove(e){let i=e._prevDup,t=e._nextDup;return i===null?this._head=t:i._nextDup=t,t===null?this._tail=i:t._prevDup=i,this._head===null}},Ph=class{constructor(){this.map=new Map}put(e){let i=e.trackById,t=this.map.get(i);t||(t=new p1,this.map.set(i,t)),t.add(e)}get(e,i){let t=e,r=this.map.get(t);return r?r.get(e,i):null}remove(e){let i=e.trackById;return this.map.get(i).remove(e)&&this.map.delete(i),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function DD(n,e,i){let t=n.previousIndex;if(t===null)return t;let r=0;return i&&t<i.length&&(r=i[t]),t+e+r}function CD(){return new kr([new u1])}var kr=(()=>{let e=class e{constructor(t){this.factories=t}static create(t,r){if(r!=null){let s=r.factories.slice();t=t.concat(s)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||CD()),deps:[[e,new S1,new kh]]}}find(t){let r=this.factories.find(s=>s.supports(t));if(r!=null)return r;throw new Me(901,!1)}};e.\u0275prov=xe({token:e,providedIn:"root",factory:CD});let n=e;return n})();function pI(n){try{let{rootComponent:e,appProviders:i,platformProviders:t}=n,r=Q8(t),s=[dI({}),{provide:Ka,useExisting:q8},...i||[]],l=new Th({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return G8({r3Injector:l.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}function Rt(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Pi(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function fo(n,e){ar("NgSignals");let i=R0(n);return e?.equal&&(i[_r].equal=e.equal),i}function Hi(n){let e=_t(null);try{return n()}finally{_t(e)}}var bI=null;function sl(){return bI}function _I(n){bI??=n}var sf=class{};var nt=new Ie(""),DI=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:()=>Re(K8),providedIn:"platform"});let n=e;return n})();var K8=(()=>{let e=class e extends DI{constructor(){super(),this._doc=Re(nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sl().getBaseHref(this._doc)}onPopState(t){let r=sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function CI(n,e){if(n.length==0)return e;if(e.length==0)return n;let i=0;return n.endsWith("/")&&i++,e.startsWith("/")&&i++,i==2?n+e.substring(1):i==1?n+e:n+"/"+e}function mI(n){let e=n.match(/#|\?|$/),i=e&&e.index||n.length,t=i-(n[i-1]==="/"?1:0);return n.slice(0,t)+n.slice(i)}function na(n){return n&&n[0]!=="?"?"?"+n:n}var ov=(()=>{let e=class e{historyGo(t){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:()=>Re(ek),providedIn:"root"});let n=e;return n})(),J8=new Ie(""),ek=(()=>{let e=class e extends ov{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Re(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CI(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+na(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,l){let d=this.prepareExternalUrl(s+na(l));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,l){let d=this.prepareExternalUrl(s+na(l));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}};e.\u0275fac=function(r){return new(r||e)(le(DI),le(J8,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Pc=(()=>{let e=class e{constructor(t){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=ik(mI(gI(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+na(r))}normalize(t){return e.stripTrailingSlash(nk(this._basePath,gI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+na(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}};e.normalizeQueryParams=na,e.joinWithSlash=CI,e.stripTrailingSlash=mI,e.\u0275fac=function(r){return new(r||e)(le(ov))},e.\u0275prov=xe({token:e,factory:()=>tk(),providedIn:"root"});let n=e;return n})();function tk(){return new Pc(le(ov))}function nk(n,e){if(!n||!e.startsWith(n))return e;let i=e.substring(n.length);return i===""||["/",";","?","#"].includes(i[0])?i:e}function gI(n){return n.replace(/\/index.html$/,"")}function ik(n){if(new RegExp("^(https?:)?//").test(n)){let[,i]=n.split(/\/\/[^\/]+/);return i}return n}function wI(n,e){e=encodeURIComponent(e);for(let i of n.split(";")){let t=i.indexOf("="),[r,s]=t==-1?[i,""]:[i.slice(0,t),i.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var iv=class{constructor(e,i,t,r){this.$implicit=e,this.ngForOf=i,this.index=t,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},II=(()=>{let e=class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((s,l,d)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new iv(s.item,this._ngForOf,-1,-1),d===null?void 0:d);else if(d==null)r.remove(l===null?void 0:l);else if(l!==null){let h=r.get(l);r.move(h,d),vI(h,s)}});for(let s=0,l=r.length;s<l;s++){let h=r.get(s).context;h.index=s,h.count=l,h.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{let l=r.get(s.currentIndex);vI(l,s)})}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(Rn),K(kr))},e.\u0275dir=Ue({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function vI(n,e){n.context.$implicit=e.item}var EI=(()=>{let e=class e{constructor(t,r){this._viewContainer=t,this._context=new rv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(Rn))},e.\u0275dir=Ue({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),rv=class{constructor(){this.$implicit=null,this.ngIf=null}};function yI(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Mi(e)}'.`)}var TI=(()=>{let e=class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(t,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(K(ti))},e.\u0275dir=Ue({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Jn]});let n=e;return n})();var Fc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})(),sv="browser",rk="server";function kc(n){return n===sv}function av(n){return n===rk}var af=class{};var dv=class{};var al=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(i=>{let t=i.indexOf(":");if(t>0){let r=i.slice(0,t),s=r.toLowerCase(),l=i.slice(t+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((i,t)=>{this.setHeaderEntries(t,i)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([i,t])=>{this.setHeaderEntries(i,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let i=this.headers.get(e.toLowerCase());return i&&i.length>0?i[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,i){return this.clone({name:e,value:i,op:"a"})}set(e,i){return this.clone({name:e,value:i,op:"s"})}delete(e,i){return this.clone({name:e,value:i,op:"d"})}maybeSetNormalizedName(e,i){this.normalizedNames.has(i)||this.normalizedNames.set(i,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(i=>{this.headers.set(i,e.headers.get(i)),this.normalizedNames.set(i,e.normalizedNames.get(i))})}clone(e){let i=new n;return i.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,i.lazyUpdate=(this.lazyUpdate||[]).concat([e]),i}applyUpdate(e){let i=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,i);let r=(e.op==="a"?this.headers.get(i):void 0)||[];r.push(...t),this.headers.set(i,r);break;case"d":let s=e.value;if(!s)this.headers.delete(i),this.normalizedNames.delete(i);else{let l=this.headers.get(i);if(!l)return;l=l.filter(d=>s.indexOf(d)===-1),l.length===0?(this.headers.delete(i),this.normalizedNames.delete(i)):this.headers.set(i,l)}break}}setHeaderEntries(e,i){let t=(Array.isArray(i)?i:[i]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(i=>e(this.normalizedNames.get(i),this.headers.get(i)))}};var uv=class{encodeKey(e){return xI(e)}encodeValue(e){return xI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function ok(n,e){let i=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[l,d]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],h=i.get(l)||[];h.push(d),i.set(l,h)}),i}var sk=/%(\d[a-f0-9])/gi,ak={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xI(n){return encodeURIComponent(n).replace(sk,(e,i)=>ak[i]??e)}function lf(n){return`${n}`}var ns=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=ok(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(i=>{let t=e.fromObject[i],r=Array.isArray(t)?t.map(lf):[lf(t)];this.map.set(i,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let i=this.map.get(e);return i?i[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,i){return this.clone({param:e,value:i,op:"a"})}appendAll(e){let i=[];return Object.keys(e).forEach(t=>{let r=e[t];Array.isArray(r)?r.forEach(s=>{i.push({param:t,value:s,op:"a"})}):i.push({param:t,value:r,op:"a"})}),this.clone(i)}set(e,i){return this.clone({param:e,value:i,op:"s"})}delete(e,i){return this.clone({param:e,value:i,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let i=this.encoder.encodeKey(e);return this.map.get(e).map(t=>i+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let i=new n({encoder:this.encoder});return i.cloneFrom=this.cloneFrom||this,i.updates=(this.updates||[]).concat(e),i}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let i=(e.op==="a"?this.map.get(e.param):void 0)||[];i.push(lf(e.value)),this.map.set(e.param,i);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],r=t.indexOf(lf(e.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var hv=class{constructor(){this.map=new Map}set(e,i){return this.map.set(e,i),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function lk(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function AI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MI(n){return typeof Blob<"u"&&n instanceof Blob}function RI(n){return typeof FormData<"u"&&n instanceof FormData}function ck(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Lc=class n{constructor(e,i,t,r){this.url=i,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(lk(this.method)||r?(this.body=t!==void 0?t:null,s=r):s=t,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new al,this.context??=new hv,!this.params)this.params=new ns,this.urlWithParams=i;else{let l=this.params.toString();if(l.length===0)this.urlWithParams=i;else{let d=i.indexOf("?"),h=d===-1?"?":d<i.length-1?"&":"";this.urlWithParams=i+h+l}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||AI(this.body)||MI(this.body)||RI(this.body)||ck(this.body)?this.body:this.body instanceof ns?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||RI(this.body)?null:MI(this.body)?this.body.type||null:AI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ns?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let i=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,l=e.body!==void 0?e.body:this.body,d=e.withCredentials??this.withCredentials,h=e.reportProgress??this.reportProgress,p=e.headers||this.headers,g=e.params||this.params,v=e.context??this.context;return e.setHeaders!==void 0&&(p=Object.keys(e.setHeaders).reduce((_,b)=>_.set(b,e.setHeaders[b]),p)),e.setParams&&(g=Object.keys(e.setParams).reduce((_,b)=>_.set(b,e.setParams[b]),g)),new n(i,t,l,{params:g,headers:p,context:v,reportProgress:h,responseType:r,withCredentials:d,transferCache:s})}},OI=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(OI||{}),fv=class{constructor(e,i=200,t="OK"){this.headers=e.headers||new al,this.status=e.status!==void 0?e.status:i,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var pv=class n extends fv{constructor(e={}){super(e),this.type=OI.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function cv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var PI=(()=>{let e=class e{constructor(t){this.handler=t}request(t,r,s={}){let l;if(t instanceof Lc)l=t;else{let p;s.headers instanceof al?p=s.headers:p=new al(s.headers);let g;s.params&&(s.params instanceof ns?g=s.params:g=new ns({fromObject:s.params})),l=new Lc(t,r,s.body!==void 0?s.body:null,{headers:p,context:s.context,params:g,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let d=hn(l).pipe(q0(p=>this.handler.handle(p)));if(t instanceof Lc||s.observe==="events")return d;let h=d.pipe(wn(p=>p instanceof pv));switch(s.observe||"body"){case"body":switch(l.responseType){case"arraybuffer":return h.pipe(Ct(p=>{if(p.body!==null&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe(Ct(p=>{if(p.body!==null&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe(Ct(p=>{if(p.body!==null&&typeof p.body!="string")throw new Error("Response is not a string.");return p.body}));case"json":default:return h.pipe(Ct(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new ns().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,cv(s,r))}post(t,r,s={}){return this.request("POST",t,cv(s,r))}put(t,r,s={}){return this.request("PUT",t,cv(s,r))}};e.\u0275fac=function(r){return new(r||e)(le(dv))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})();var vv=class extends sf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},yv=class n extends vv{static makeCurrent(){_I(new n)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.remove()}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=hk();return i==null?null:fk(i)}resetBaseElement(){Nc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return wI(document.cookie,e)}},Nc=null;function hk(){return Nc=Nc||document.querySelector("base"),Nc?Nc.getAttribute("href"):null}function fk(n){return new URL(n,document.baseURI).pathname}var pk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),Sv=new Ie(""),LI=(()=>{let e=class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(l=>l.supports(t)),!r)throw new Me(5101,!1);return this._eventNameToPlugin.set(t,r),r}};e.\u0275fac=function(r){return new(r||e)(le(Sv),le(Fe))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),cf=class{constructor(e){this._doc=e}},mv="ng-app-id",NI=(()=>{let e=class e{constructor(t,r,s,l={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=l,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=av(l),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${mv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){let s=this.styleRef;if(s.has(t)){let l=s.get(t);return l.usage+=r,l.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let s=this.styleNodesInDOM,l=s?.get(r);if(l?.parentNode===t)return s.delete(r),l.removeAttribute(mv),l;{let d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(mv,this.appId),t.appendChild(d),d}}addStyleToHost(t,r){let s=this.getStyleElement(t,r),l=this.styleRef,d=l.get(r)?.elements;d?d.push(s):l.set(r,{elements:[s],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(le(nt),le(Yh),le(Ic,8),le(zi))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),gv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},_v=/%COMP%/g,VI="%COMP%",mk=`_nghost-${VI}`,gk=`_ngcontent-${VI}`,vk=!0,yk=new Ie("",{providedIn:"root",factory:()=>vk});function Sk(n){return gk.replace(_v,n)}function bk(n){return mk.replace(_v,n)}function BI(n,e){return e.map(i=>i.replace(_v,n))}var df=(()=>{let e=class e{constructor(t,r,s,l,d,h,p,g=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=l,this.doc=d,this.platformId=h,this.ngZone=p,this.nonce=g,this.rendererByCompId=new Map,this.platformIsServer=av(h),this.defaultRenderer=new Vc(t,d,p,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ar.ShadowDom&&(r=nn(Ee({},r),{encapsulation:Ar.Emulated}));let s=this.getOrCreateRenderer(t,r);return s instanceof uf?s.applyToHost(t):s instanceof Bc&&s.applyStyles(),s}getOrCreateRenderer(t,r){let s=this.rendererByCompId,l=s.get(r.id);if(!l){let d=this.doc,h=this.ngZone,p=this.eventManager,g=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,_=this.platformIsServer;switch(r.encapsulation){case Ar.Emulated:l=new uf(p,g,r,this.appId,v,d,h,_);break;case Ar.ShadowDom:return new bv(p,g,t,r,d,h,this.nonce,_);default:l=new Bc(p,g,r,v,d,h,_);break}s.set(r.id,l)}return l}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(le(LI),le(NI),le(Yh),le(yk),le(nt),le(zi),le(Fe),le(Ic))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),Vc=class{constructor(e,i,t,r){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(gv[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(FI(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(FI(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){i.remove()}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new Me(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,r){if(r){i=r+":"+i;let s=gv[r];s?e.setAttributeNS(s,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let r=gv[t];r?e.removeAttributeNS(r,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,r){r&(to.DashCase|to.Important)?e.style.setProperty(i,t,r&to.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&to.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=sl().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function FI(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var bv=class extends Vc{constructor(e,i,t,r,s,l,d,h){super(e,s,l,h),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=BI(r.id,r.styles);for(let g of p){let v=document.createElement("style");d&&v.setAttribute("nonce",d),v.textContent=g,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(null,i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bc=class extends Vc{constructor(e,i,t,r,s,l,d,h){super(e,s,l,d),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=r,this.styles=h?BI(h,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},uf=class extends Bc{constructor(e,i,t,r,s,l,d,h){let p=r+"-"+t.id;super(e,i,t,s,l,d,h,p),this.contentAttr=Sk(p),this.hostAttr=bk(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},_k=(()=>{let e=class e extends cf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),kI=["alt","control","meta","shift"],Dk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ck={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},wk=(()=>{let e=class e extends cf{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,s){let l=e.parseEventName(r),d=e.eventCallback(l.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sl().onAndCancel(t,l.domEventName,d))}static parseEventName(t){let r=t.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let l=e._normalizeKey(r.pop()),d="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),d="code."),kI.forEach(g=>{let v=r.indexOf(g);v>-1&&(r.splice(v,1),d+=g+".")}),d+=l,r.length!=0||l.length===0)return null;let p={};return p.domEventName=s,p.fullKey=d,p}static matchEventFullKeyCode(t,r){let s=Dk[t.key]||t.key,l="";return r.indexOf("code.")>-1&&(s=t.code,l="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),kI.forEach(d=>{if(d!==s){let h=Ck[d];h(t)&&(l+=d+".")}}),l+=s,l===r)}static eventCallback(t,r,s){return l=>{e.matchEventFullKeyCode(l,t)&&s.runGuarded(()=>r(l))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(r){return new(r||e)(le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})();function UI(n,e){return pI(Ee({rootComponent:n},Ik(e)))}function Ik(n){return{appProviders:[...Mk,...n?.providers??[]],platformProviders:Ak}}function Ek(){yv.makeCurrent()}function Tk(){return new Oi}function xk(){return LC(document),document}var Ak=[{provide:zi,useValue:sv},{provide:V1,useValue:Ek,multi:!0},{provide:nt,useFactory:xk,deps:[]}];var Mk=[{provide:Nh,useValue:"root"},{provide:Oi,useFactory:Tk,deps:[]},{provide:Sv,useClass:_k,multi:!0,deps:[nt,Fe,zi]},{provide:Sv,useClass:wk,multi:!0,deps:[nt]},df,NI,LI,{provide:Zo,useExisting:df},{provide:af,useClass:pk,deps:[]},[]];var Dv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=le(Rk),s},providedIn:"root"});let n=e;return n})(),Rk=(()=>{let e=class e extends Dv{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case Ei.NONE:return r;case Ei.HTML:return rl(r,"HTML")?so(r):$C(this._doc,String(r)).toString();case Ei.STYLE:return rl(r,"Style")?so(r):r;case Ei.SCRIPT:if(rl(r,"Script"))return so(r);throw new Me(5200,!1);case Ei.URL:return rl(r,"URL")?so(r):U1(String(r));case Ei.RESOURCE_URL:if(rl(r,"ResourceURL"))return so(r);throw new Me(5201,!1);default:throw new Me(5202,!1)}}bypassSecurityTrustHtml(t){return VC(t)}bypassSecurityTrustStyle(t){return BC(t)}bypassSecurityTrustScript(t){return UC(t)}bypassSecurityTrustUrl(t){return qC(t)}bypassSecurityTrustResourceUrl(t){return jC(t)}};e.\u0275fac=function(r){return new(r||e)(le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var qc="Service workers are disabled or not supported by this browser";function Pk(n){return Go(()=>uc(new Error(n)))}var ll=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Pk(qc);else{let t=Ir(e,"controllerchange").pipe(Ct(()=>e.controller)),r=Go(()=>hn(e.controller)),s=wr(r,t);this.worker=s.pipe(wn(g=>!!g)),this.registration=this.worker.pipe(Ho(()=>e.getRegistration()));let p=Ir(e,"message").pipe(Ct(g=>g.data)).pipe(wn(g=>g&&g.type)).pipe(z0());p.connect(),this.events=p}}postMessage(e,i){return this.worker.pipe(qn(1),Xr(t=>{t.postMessage(Ee({action:e},i))})).toPromise().then(()=>{})}postMessageWithOperation(e,i,t){let r=this.waitForOperationCompleted(t),s=this.postMessage(e,i);return Promise.all([s,r]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let i;return typeof e=="string"?i=t=>t.type===e:i=t=>e.includes(t.type),this.events.pipe(wn(i))}nextEventOfType(e){return this.eventsOfType(e).pipe(qn(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(wn(i=>i.nonce===e),qn(1),Ct(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Fk=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new ke,!t.isEnabled){this.messages=ks,this.notificationClicks=ks,this.subscription=ks;return}this.messages=this.sw.eventsOfType("PUSH").pipe(Ct(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(Ct(s=>s.data)),this.pushManager=this.sw.registration.pipe(Ct(s=>s.pushManager));let r=this.pushManager.pipe(Ho(s=>s.getSubscription()));this.subscription=wi(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(qc));let r={userVisibleOnly:!0},s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),l=new Uint8Array(new ArrayBuffer(s.length));for(let d=0;d<s.length;d++)l[d]=s.charCodeAt(d);return r.applicationServerKey=l,this.pushManager.pipe(Ho(d=>d.subscribe(r)),qn(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(qc));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(qn(1),Ho(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(r){return new(r||e)(le(ll))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),kk=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=ks,this.unrecoverable=ks;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(qc));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(qc));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(r){return new(r||e)(le(ll))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})();var qI=new Ie("");function Lk(n,e,i,t){return()=>{if(!(kc(t)&&"serviceWorker"in navigator&&i.enabled!==!1))return;let r=n.get(Fe),s=n.get(Fr);r.runOutsideAngular(()=>{let d=navigator.serviceWorker,h=()=>d.controller?.postMessage({action:"INITIALIZE"});d.addEventListener("controllerchange",h),s.onDestroy(()=>{d.removeEventListener("controllerchange",h)})});let l;if(typeof i.registrationStrategy=="function")l=i.registrationStrategy();else{let[d,...h]=(i.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":l=hn(null);break;case"registerWithDelay":l=jI(+h[0]||0);break;case"registerWhenStable":let p=hi(n.get(Fr).whenStable());l=h[0]?wi(p,jI(+h[0])):p;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${i.registrationStrategy}`)}}r.runOutsideAngular(()=>l.pipe(qn(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:i.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function jI(n){return hn(null).pipe(G0(n))}function Nk(n,e){return new ll(kc(e)&&n.enabled!==!1?navigator.serviceWorker:void 0)}var Uc=class{};function GI(n,e={}){return Lh([Fk,kk,{provide:qI,useValue:n},{provide:Uc,useValue:e},{provide:ll,useFactory:Nk,deps:[Uc,zi]},{provide:tv,useFactory:Lk,deps:[Xt,qI,Uc,zi],multi:!0}])}var at=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(at||{}),Lr="*";function zI(n,e){return{type:at.Trigger,name:n,definitions:e,options:{}}}function HI(n,e=null){return{type:at.Animate,styles:e,timings:n}}function QI(n,e=null){return{type:at.Sequence,steps:n,options:e}}function cl(n){return{type:at.Style,styles:n,offset:null}}function WI(n,e,i){return{type:at.State,name:n,styles:e,options:i}}function $I(n,e,i=null){return{type:at.Transition,expr:n,animation:e,options:i}}var is=class{constructor(e=0,i=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+i}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},jc=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let i=0,t=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++i==s&&this._onFinish()}),l.onDestroy(()=>{++t==s&&this._onDestroy()}),l.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let i=e*this.totalTime;this.players.forEach(t=>{let r=t.totalTime?Math.min(1,i/t.totalTime):1;t.setPosition(r)})}getPosition(){let e=this.players.reduce((i,t)=>i===null||t.totalTime>i.totalTime?t:i,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let i=e=="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},hf="!";function YI(n){return new Me(3e3,!1)}function Vk(){return new Me(3100,!1)}function Bk(){return new Me(3101,!1)}function Uk(n){return new Me(3001,!1)}function qk(n){return new Me(3003,!1)}function jk(n){return new Me(3004,!1)}function Gk(n,e){return new Me(3005,!1)}function zk(){return new Me(3006,!1)}function Hk(){return new Me(3007,!1)}function Qk(n,e){return new Me(3008,!1)}function Wk(n){return new Me(3002,!1)}function $k(n,e,i,t,r){return new Me(3010,!1)}function Yk(){return new Me(3011,!1)}function Xk(){return new Me(3012,!1)}function Zk(){return new Me(3200,!1)}function Kk(){return new Me(3202,!1)}function Jk(){return new Me(3013,!1)}function e6(n){return new Me(3014,!1)}function t6(n){return new Me(3015,!1)}function n6(n){return new Me(3016,!1)}function i6(n,e){return new Me(3404,!1)}function r6(n){return new Me(3502,!1)}function o6(n){return new Me(3503,!1)}function s6(){return new Me(3300,!1)}function a6(n){return new Me(3504,!1)}function l6(n){return new Me(3301,!1)}function c6(n,e){return new Me(3302,!1)}function d6(n){return new Me(3303,!1)}function u6(n,e){return new Me(3400,!1)}function h6(n){return new Me(3401,!1)}function f6(n){return new Me(3402,!1)}function p6(n,e){return new Me(3505,!1)}function rs(n){switch(n.length){case 0:return new is;case 1:return n[0];default:return new jc(n)}}function cE(n,e,i=new Map,t=new Map){let r=[],s=[],l=-1,d=null;if(e.forEach(h=>{let p=h.get("offset"),g=p==l,v=g&&d||new Map;h.forEach((_,b)=>{let C=b,w=_;if(b!=="offset")switch(C=n.normalizePropertyName(C,r),w){case hf:w=i.get(b);break;case Lr:w=t.get(b);break;default:w=n.normalizeStyleValue(b,C,w,r);break}v.set(C,w)}),g||s.push(v),d=v,l=p}),r.length)throw r6(r);return s}function Hv(n,e,i,t){switch(e){case"start":n.onStart(()=>t(i&&Cv(i,"start",n)));break;case"done":n.onDone(()=>t(i&&Cv(i,"done",n)));break;case"destroy":n.onDestroy(()=>t(i&&Cv(i,"destroy",n)));break}}function Cv(n,e,i){let t=i.totalTime,r=!!i.disabled,s=Qv(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t??n.totalTime,r),l=n._data;return l!=null&&(s._data=l),s}function Qv(n,e,i,t,r="",s=0,l){return{element:n,triggerName:e,fromState:i,toState:t,phaseName:r,totalTime:s,disabled:!!l}}function ki(n,e,i){let t=n.get(e);return t||n.set(e,t=i),t}function XI(n){let e=n.indexOf(":"),i=n.substring(1,e),t=n.slice(e+1);return[i,t]}var m6=typeof document>"u"?null:document.documentElement;function Wv(n){let e=n.parentNode||n.host||null;return e===m6?null:e}function g6(n){return n.substring(1,6)=="ebkit"}var ia=null,ZI=!1;function v6(n){ia||(ia=y6()||{},ZI=ia.style?"WebkitAppearance"in ia.style:!1);let e=!0;return ia.style&&!g6(n)&&(e=n in ia.style,!e&&ZI&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ia.style)),e}function y6(){return typeof document<"u"?document.body:null}function dE(n,e){for(;e;){if(e===n)return!0;e=Wv(e)}return!1}function uE(n,e,i){if(i)return Array.from(n.querySelectorAll(e));let t=n.querySelector(e);return t?[t]:[]}var $v=(()=>{let e=class e{validateStyleProperty(t){return v6(t)}containsElement(t,r){return dE(t,r)}getParentElement(t){return Wv(t)}query(t,r,s){return uE(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,l,d,h=[],p){return new is(s,l)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})(),Kv=class Kv{};Kv.NOOP=new $v;var sa=Kv,aa=class{};var S6=1e3,hE="{{",b6="}}",fE="ng-enter",Av="ng-leave",ff="ng-trigger",yf=".ng-trigger",KI="ng-animating",Mv=".ng-animating";function po(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Rv(parseFloat(e[1]),e[2])}function Rv(n,e){switch(e){case"s":return n*S6;default:return n}}function Sf(n,e,i){return n.hasOwnProperty("duration")?n:_6(n,e,i)}function _6(n,e,i){let t=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,l="";if(typeof n=="string"){let d=n.match(t);if(d===null)return e.push(YI(n)),{duration:0,delay:0,easing:""};r=Rv(parseFloat(d[1]),d[2]);let h=d[3];h!=null&&(s=Rv(parseFloat(h),d[4]));let p=d[5];p&&(l=p)}else r=n;if(!i){let d=!1,h=e.length;r<0&&(e.push(Vk()),d=!0),s<0&&(e.push(Bk()),d=!0),d&&e.splice(h,0,YI(n))}return{duration:r,delay:s,easing:l}}function D6(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Nr(n,e,i){e.forEach((t,r)=>{let s=Yv(r);i&&!i.has(r)&&i.set(r,n.style[s]),n.style[s]=t})}function oa(n,e){e.forEach((i,t)=>{let r=Yv(t);n.style[r]=""})}function Gc(n){return Array.isArray(n)?n.length==1?n[0]:QI(n):n}function C6(n,e,i){let t=e.params||{},r=pE(n);r.length&&r.forEach(s=>{t.hasOwnProperty(s)||i.push(Uk(s))})}var Ov=new RegExp(`${hE}\\s*(.+?)\\s*${b6}`,"g");function pE(n){let e=[];if(typeof n=="string"){let i;for(;i=Ov.exec(n);)e.push(i[1]);Ov.lastIndex=0}return e}function Hc(n,e,i){let t=`${n}`,r=t.replace(Ov,(s,l)=>{let d=e[l];return d==null&&(i.push(qk(l)),d=""),d.toString()});return r==t?n:r}var w6=/-+([a-z0-9])/g;function Yv(n){return n.replace(w6,(...e)=>e[1].toUpperCase())}function I6(n,e){return n===0||e===0}function E6(n,e,i){if(i.size&&e.length){let t=e[0],r=[];if(i.forEach((s,l)=>{t.has(l)||r.push(l),t.set(l,s)}),r.length)for(let s=1;s<e.length;s++){let l=e[s];r.forEach(d=>l.set(d,Xv(n,d)))}}return e}function Fi(n,e,i){switch(e.type){case at.Trigger:return n.visitTrigger(e,i);case at.State:return n.visitState(e,i);case at.Transition:return n.visitTransition(e,i);case at.Sequence:return n.visitSequence(e,i);case at.Group:return n.visitGroup(e,i);case at.Animate:return n.visitAnimate(e,i);case at.Keyframes:return n.visitKeyframes(e,i);case at.Style:return n.visitStyle(e,i);case at.Reference:return n.visitReference(e,i);case at.AnimateChild:return n.visitAnimateChild(e,i);case at.AnimateRef:return n.visitAnimateRef(e,i);case at.Query:return n.visitQuery(e,i);case at.Stagger:return n.visitStagger(e,i);default:throw jk(e.type)}}function Xv(n,e){return window.getComputedStyle(n)[e]}var T6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),bf=class extends aa{normalizePropertyName(e,i){return Yv(e)}normalizeStyleValue(e,i,t,r){let s="",l=t.toString().trim();if(T6.has(i)&&t!==0&&t!=="0")if(typeof t=="number")s="px";else{let d=t.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&d[1].length==0&&r.push(Gk(e,t))}return l+s}};var _f="*";function x6(n,e){let i=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(t=>A6(t,i,e)):i.push(n),i}function A6(n,e,i){if(n[0]==":"){let h=M6(n,i);if(typeof h=="function"){e.push(h);return}n=h}let t=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(t==null||t.length<4)return i.push(t6(n)),e;let r=t[1],s=t[2],l=t[3];e.push(JI(r,l));let d=r==_f&&l==_f;s[0]=="<"&&!d&&e.push(JI(l,r))}function M6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(i,t)=>parseFloat(t)>parseFloat(i);case":decrement":return(i,t)=>parseFloat(t)<parseFloat(i);default:return e.push(n6(n)),"* => *"}}var pf=new Set(["true","1"]),mf=new Set(["false","0"]);function JI(n,e){let i=pf.has(n)||mf.has(n),t=pf.has(e)||mf.has(e);return(r,s)=>{let l=n==_f||n==r,d=e==_f||e==s;return!l&&i&&typeof r=="boolean"&&(l=r?pf.has(n):mf.has(n)),!d&&t&&typeof s=="boolean"&&(d=s?pf.has(e):mf.has(e)),l&&d}}var mE=":self",R6=new RegExp(`s*${mE}s*,?`,"g");function gE(n,e,i,t){return new Pv(n).build(e,i,t)}var eE="",Pv=class{constructor(e){this._driver=e}build(e,i,t){let r=new Fv(i);return this._resetContextStyleTimingState(r),Fi(this,Gc(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=eE,e.collectedStyles=new Map,e.collectedStyles.set(eE,new Map),e.currentTime=0}visitTrigger(e,i){let t=i.queryCount=0,r=i.depCount=0,s=[],l=[];return e.name.charAt(0)=="@"&&i.errors.push(zk()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(i),d.type==at.State){let h=d,p=h.name;p.toString().split(/\s*,\s*/).forEach(g=>{h.name=g,s.push(this.visitState(h,i))}),h.name=p}else if(d.type==at.Transition){let h=this.visitTransition(d,i);t+=h.queryCount,r+=h.depCount,l.push(h)}else i.errors.push(Hk())}),{type:at.Trigger,name:e.name,states:s,transitions:l,queryCount:t,depCount:r,options:null}}visitState(e,i){let t=this.visitStyle(e.styles,i),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){let s=new Set,l=r||{};t.styles.forEach(d=>{d instanceof Map&&d.forEach(h=>{pE(h).forEach(p=>{l.hasOwnProperty(p)||s.add(p)})})}),s.size&&i.errors.push(Qk(e.name,[...s.values()]))}return{type:at.State,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,i){i.queryCount=0,i.depCount=0;let t=Fi(this,Gc(e.animation),i),r=x6(e.expr,i.errors);return{type:at.Transition,matchers:r,animation:t,queryCount:i.queryCount,depCount:i.depCount,options:ra(e.options)}}visitSequence(e,i){return{type:at.Sequence,steps:e.steps.map(t=>Fi(this,t,i)),options:ra(e.options)}}visitGroup(e,i){let t=i.currentTime,r=0,s=e.steps.map(l=>{i.currentTime=t;let d=Fi(this,l,i);return r=Math.max(r,i.currentTime),d});return i.currentTime=r,{type:at.Group,steps:s,options:ra(e.options)}}visitAnimate(e,i){let t=k6(e.timings,i.errors);i.currentAnimateTimings=t;let r,s=e.styles?e.styles:cl({});if(s.type==at.Keyframes)r=this.visitKeyframes(s,i);else{let l=e.styles,d=!1;if(!l){d=!0;let p={};t.easing&&(p.easing=t.easing),l=cl(p)}i.currentTime+=t.duration+t.delay;let h=this.visitStyle(l,i);h.isEmptyStep=d,r=h}return i.currentAnimateTimings=null,{type:at.Animate,timings:t,style:r,options:null}}visitStyle(e,i){let t=this._makeStyleAst(e,i);return this._validateStyleAst(t,i),t}_makeStyleAst(e,i){let t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of r)typeof d=="string"?d===Lr?t.push(d):i.errors.push(Wk(d)):t.push(new Map(Object.entries(d)));let s=!1,l=null;return t.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!s)){for(let h of d.values())if(h.toString().indexOf(hE)>=0){s=!0;break}}}),{type:at.Style,styles:t,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,i){let t=i.currentAnimateTimings,r=i.currentTime,s=i.currentTime;t&&s>0&&(s-=t.duration+t.delay),e.styles.forEach(l=>{typeof l!="string"&&l.forEach((d,h)=>{let p=i.collectedStyles.get(i.currentQuerySelector),g=p.get(h),v=!0;g&&(s!=r&&s>=g.startTime&&r<=g.endTime&&(i.errors.push($k(h,g.startTime,g.endTime,s,r)),v=!1),s=g.startTime),v&&p.set(h,{startTime:s,endTime:r}),i.options&&C6(d,i.options,i.errors)})})}visitKeyframes(e,i){let t={type:at.Keyframes,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push(Yk()),t;let r=1,s=0,l=[],d=!1,h=!1,p=0,g=e.steps.map(M=>{let F=this._makeStyleAst(M,i),k=F.offset!=null?F.offset:F6(F.styles),L=0;return k!=null&&(s++,L=F.offset=k),h=h||L<0||L>1,d=d||L<p,p=L,l.push(L),F});h&&i.errors.push(Xk()),d&&i.errors.push(Zk());let v=e.steps.length,_=0;s>0&&s<v?i.errors.push(Kk()):s==0&&(_=r/(v-1));let b=v-1,C=i.currentTime,w=i.currentAnimateTimings,x=w.duration;return g.forEach((M,F)=>{let k=_>0?F==b?1:_*F:l[F],L=k*x;i.currentTime=C+w.delay+L,w.duration=L,this._validateStyleAst(M,i),M.offset=k,t.styles.push(M)}),t}visitReference(e,i){return{type:at.Reference,animation:Fi(this,Gc(e.animation),i),options:ra(e.options)}}visitAnimateChild(e,i){return i.depCount++,{type:at.AnimateChild,options:ra(e.options)}}visitAnimateRef(e,i){return{type:at.AnimateRef,animation:this.visitReference(e.animation,i),options:ra(e.options)}}visitQuery(e,i){let t=i.currentQuerySelector,r=e.options||{};i.queryCount++,i.currentQuery=e;let[s,l]=O6(e.selector);i.currentQuerySelector=t.length?t+" "+s:s,ki(i.collectedStyles,i.currentQuerySelector,new Map);let d=Fi(this,Gc(e.animation),i);return i.currentQuery=null,i.currentQuerySelector=t,{type:at.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:ra(e.options)}}visitStagger(e,i){i.currentQuery||i.errors.push(Jk());let t=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Sf(e.timings,i.errors,!0);return{type:at.Stagger,animation:Fi(this,Gc(e.animation),i),timings:t,options:null}}};function O6(n){let e=!!n.split(/\s*,\s*/).find(i=>i==mE);return e&&(n=n.replace(R6,"")),n=n.replace(/@\*/g,yf).replace(/@\w+/g,i=>yf+"-"+i.slice(1)).replace(/:animating/g,Mv),[n,e]}function P6(n){return n?Ee({},n):null}var Fv=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function F6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(i=>{if(i instanceof Map&&i.has("offset")){let t=i;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}return e}function k6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=Sf(n,e).duration;return wv(s,0,"")}let i=n;if(i.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=wv(0,0,"");return s.dynamic=!0,s.strValue=i,s}let r=Sf(i,e);return wv(r.duration,r.delay,r.easing)}function ra(n){return n?(n=Ee({},n),n.params&&(n.params=P6(n.params))):n={},n}function wv(n,e,i){return{duration:n,delay:e,easing:i}}function Zv(n,e,i,t,r,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:i,postStyleProps:t,duration:r,delay:s,totalTime:r+s,easing:l,subTimeline:d}}var Qc=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,i){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...i)}has(e){return this._map.has(e)}clear(){this._map.clear()}},L6=1,N6=":enter",V6=new RegExp(N6,"g"),B6=":leave",U6=new RegExp(B6,"g");function vE(n,e,i,t,r,s=new Map,l=new Map,d,h,p=[]){return new kv().buildKeyframes(n,e,i,t,r,s,l,d,h,p)}var kv=class{buildKeyframes(e,i,t,r,s,l,d,h,p,g=[]){p=p||new Qc;let v=new Lv(e,i,p,r,s,g,[]);v.options=h;let _=h.delay?po(h.delay):0;v.currentTimeline.delayNextStep(_),v.currentTimeline.setStyles([l],null,v.errors,h),Fi(this,t,v);let b=v.timelines.filter(C=>C.containsAnimation());if(b.length&&d.size){let C;for(let w=b.length-1;w>=0;w--){let x=b[w];if(x.element===i){C=x;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([d],null,v.errors,h)}return b.length?b.map(C=>C.buildKeyframes()):[Zv(i,[],[],[],0,_,"",!1)]}visitTrigger(e,i){}visitState(e,i){}visitTransition(e,i){}visitAnimateChild(e,i){let t=i.subInstructions.get(i.element);if(t){let r=i.createSubContext(e.options),s=i.currentTimeline.currentTime,l=this._visitSubInstructions(t,r,r.options);s!=l&&i.transformIntoNewTimeline(l)}i.previousNode=e}visitAnimateRef(e,i){let t=i.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],i,t),this.visitReference(e.animation,t),i.transformIntoNewTimeline(t.currentTimeline.currentTime),i.previousNode=e}_applyAnimationRefDelays(e,i,t){for(let r of e){let s=r?.delay;if(s){let l=typeof s=="number"?s:po(Hc(s,r?.params??{},i.errors));t.delayNextStep(l)}}}_visitSubInstructions(e,i,t){let s=i.currentTimeline.currentTime,l=t.duration!=null?po(t.duration):null,d=t.delay!=null?po(t.delay):null;return l!==0&&e.forEach(h=>{let p=i.appendInstructionToTimeline(h,l,d);s=Math.max(s,p.duration+p.delay)}),s}visitReference(e,i){i.updateOptions(e.options,!0),Fi(this,e.animation,i),i.previousNode=e}visitSequence(e,i){let t=i.subContextCount,r=i,s=e.options;if(s&&(s.params||s.delay)&&(r=i.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==at.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Df);let l=po(s.delay);r.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Fi(this,l,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),i.previousNode=e}visitGroup(e,i){let t=[],r=i.currentTimeline.currentTime,s=e.options&&e.options.delay?po(e.options.delay):0;e.steps.forEach(l=>{let d=i.createSubContext(e.options);s&&d.delayNextStep(s),Fi(this,l,d),r=Math.max(r,d.currentTimeline.currentTime),t.push(d.currentTimeline)}),t.forEach(l=>i.currentTimeline.mergeTimelineCollectedStyles(l)),i.transformIntoNewTimeline(r),i.previousNode=e}_visitTiming(e,i){if(e.dynamic){let t=e.strValue,r=i.params?Hc(t,i.params,i.errors):t;return Sf(r,i.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,i){let t=i.currentAnimateTimings=this._visitTiming(e.timings,i),r=i.currentTimeline;t.delay&&(i.incrementTime(t.delay),r.snapshotCurrentStyles());let s=e.style;s.type==at.Keyframes?this.visitKeyframes(s,i):(i.incrementTime(t.duration),this.visitStyle(s,i),r.applyStylesToKeyframe()),i.currentAnimateTimings=null,i.previousNode=e}visitStyle(e,i){let t=i.currentTimeline,r=i.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(s):t.setStyles(e.styles,s,i.errors,i.options),i.previousNode=e}visitKeyframes(e,i){let t=i.currentAnimateTimings,r=i.currentTimeline.duration,s=t.duration,d=i.createSubContext().currentTimeline;d.easing=t.easing,e.styles.forEach(h=>{let p=h.offset||0;d.forwardTime(p*s),d.setStyles(h.styles,h.easing,i.errors,i.options),d.applyStylesToKeyframe()}),i.currentTimeline.mergeTimelineCollectedStyles(d),i.transformIntoNewTimeline(r+s),i.previousNode=e}visitQuery(e,i){let t=i.currentTimeline.currentTime,r=e.options||{},s=r.delay?po(r.delay):0;s&&(i.previousNode.type===at.Style||t==0&&i.currentTimeline.hasCurrentStyleProperties())&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Df);let l=t,d=i.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,i.errors);i.currentQueryTotal=d.length;let h=null;d.forEach((p,g)=>{i.currentQueryIndex=g;let v=i.createSubContext(e.options,p);s&&v.delayNextStep(s),p===i.element&&(h=v.currentTimeline),Fi(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe();let _=v.currentTimeline.currentTime;l=Math.max(l,_)}),i.currentQueryIndex=0,i.currentQueryTotal=0,i.transformIntoNewTimeline(l),h&&(i.currentTimeline.mergeTimelineCollectedStyles(h),i.currentTimeline.snapshotCurrentStyles()),i.previousNode=e}visitStagger(e,i){let t=i.parentContext,r=i.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(i.currentQueryTotal-1),h=l*i.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":h=d-h;break;case"full":h=t.currentStaggerTime;break}let g=i.currentTimeline;h&&g.delayNextStep(h);let v=g.currentTime;Fi(this,e.animation,i),i.previousNode=e,t.currentStaggerTime=r.currentTime-v+(r.startTime-t.currentTimeline.startTime)}},Df={},Lv=class n{constructor(e,i,t,r,s,l,d,h){this._driver=e,this.element=i,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Df,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=h||new Cf(this._driver,i,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,i){if(!e)return;let t=e,r=this.options;t.duration!=null&&(r.duration=po(t.duration)),t.delay!=null&&(r.delay=po(t.delay));let s=t.params;if(s){let l=r.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!i||!l.hasOwnProperty(d))&&(l[d]=Hc(s[d],l,this.errors))})}}_copyOptions(){let e={};if(this.options){let i=this.options.params;if(i){let t=e.params={};Object.keys(i).forEach(r=>{t[r]=i[r]})}}return e}createSubContext(e=null,i,t){let r=i||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Df,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,i,t){let r={duration:i??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},s=new Nv(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,i,t,r,s,l){let d=[];if(r&&d.push(this.element),e.length>0){e=e.replace(V6,"."+this._enterClassName),e=e.replace(U6,"."+this._leaveClassName);let h=t!=1,p=this._driver.query(this.element,e,h);t!==0&&(p=t<0?p.slice(p.length+t,p.length):p.slice(0,t)),d.push(...p)}return!s&&d.length==0&&l.push(e6(i)),d}},Cf=class n{constructor(e,i,t,r){this._driver=e,this.element=i,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(i),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(i,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let i=this._keyframes.size===1&&this._pendingStyles.size;this.duration||i?(this.forwardTime(this.currentTime+e),i&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,i){return this.applyStylesToKeyframe(),new n(this._driver,e,i||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=L6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,i){this._localTimelineStyles.set(e,i),this._globalTimelineStyles.set(e,i),this._styleSummary.set(e,{time:this.currentTime,value:i})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[i,t]of this._globalTimelineStyles)this._backFill.set(i,t||Lr),this._currentKeyframe.set(i,Lr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,i,t,r){i&&this._previousKeyframe.set("easing",i);let s=r&&r.params||{},l=q6(e,this._globalTimelineStyles);for(let[d,h]of l){let p=Hc(h,s,t);this._pendingStyles.set(d,p),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Lr),this._updateStyle(d,p)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,i)=>{this._currentKeyframe.set(i,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,i)=>{this._currentKeyframe.has(i)||this._currentKeyframe.set(i,e)}))}snapshotCurrentStyles(){for(let[e,i]of this._localTimelineStyles)this._pendingStyles.set(e,i),this._updateStyle(e,i)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let i in this._currentKeyframe)e.push(i);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((i,t)=>{let r=this._styleSummary.get(t);(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,i=new Set,t=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((d,h)=>{let p=new Map([...this._backFill,...d]);p.forEach((g,v)=>{g===hf?e.add(v):g===Lr&&i.add(v)}),t||p.set("offset",h/this.duration),r.push(p)});let s=[...e.values()],l=[...i.values()];if(t){let d=r[0],h=new Map(d);d.set("offset",0),h.set("offset",1),r=[d,h]}return Zv(this.element,r,s,l,this.duration,this.startTime,this.easing,!1)}},Nv=class extends Cf{constructor(e,i,t,r,s,l,d=!1){super(e,i,l.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:i,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&i){let s=[],l=t+i,d=i/l,h=new Map(e[0]);h.set("offset",0),s.push(h);let p=new Map(e[0]);p.set("offset",tE(d)),s.push(p);let g=e.length-1;for(let v=1;v<=g;v++){let _=new Map(e[v]),b=_.get("offset"),C=i+b*t;_.set("offset",tE(C/l)),s.push(_)}t=l,i=0,r="",e=s}return Zv(this.element,e,this.preStyleProps,this.postStyleProps,t,i,r,!0)}};function tE(n,e=3){let i=Math.pow(10,e-1);return Math.round(n*i)/i}function q6(n,e){let i=new Map,t;return n.forEach(r=>{if(r==="*"){t??=e.keys();for(let s of t)i.set(s,Lr)}else for(let[s,l]of r)i.set(s,l)}),i}function nE(n,e,i,t,r,s,l,d,h,p,g,v,_){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:i,fromStyles:s,toState:t,toStyles:l,timelines:d,queriedElements:h,preStyleProps:p,postStyleProps:g,totalTime:v,errors:_}}var Iv={},wf=class{constructor(e,i,t){this._triggerName=e,this.ast=i,this._stateStyles=t}match(e,i,t,r){return j6(this.ast.matchers,e,i,t,r)}buildStyles(e,i,t){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(i,t):new Map}build(e,i,t,r,s,l,d,h,p,g){let v=[],_=this.ast.options&&this.ast.options.params||Iv,b=d&&d.params||Iv,C=this.buildStyles(t,b,v),w=h&&h.params||Iv,x=this.buildStyles(r,w,v),M=new Set,F=new Map,k=new Map,L=r==="void",U={params:yE(w,_),delay:this.ast.options?.delay},H=g?[]:vE(e,i,this.ast.animation,s,l,C,x,U,p,v),G=0;return H.forEach($=>{G=Math.max($.duration+$.delay,G)}),v.length?nE(i,this._triggerName,t,r,L,C,x,[],[],F,k,G,v):(H.forEach($=>{let ne=$.element,O=ki(F,ne,new Set);$.preStyleProps.forEach(T=>O.add(T));let j=ki(k,ne,new Set);$.postStyleProps.forEach(T=>j.add(T)),ne!==i&&M.add(ne)}),nE(i,this._triggerName,t,r,L,C,x,H,[...M.values()],F,k,G))}};function j6(n,e,i,t,r){return n.some(s=>s(e,i,t,r))}function yE(n,e){let i=Ee({},e);return Object.entries(n).forEach(([t,r])=>{r!=null&&(i[t]=r)}),i}var Vv=class{constructor(e,i,t){this.styles=e,this.defaultParams=i,this.normalizer=t}buildStyles(e,i){let t=new Map,r=yE(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((l,d)=>{l&&(l=Hc(l,r,i));let h=this.normalizer.normalizePropertyName(d,i);l=this.normalizer.normalizeStyleValue(d,h,l,i),t.set(d,l)})}),t}};function G6(n,e,i){return new Bv(n,e,i)}var Bv=class{constructor(e,i,t){this.name=e,this.ast=i,this._normalizer=t,this.transitionFactories=[],this.states=new Map,i.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Vv(r.style,s,t))}),iE(this.states,"true","1"),iE(this.states,"false","0"),i.transitions.forEach(r=>{this.transitionFactories.push(new wf(e,r,this.states))}),this.fallbackTransition=z6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,i,t,r){return this.transitionFactories.find(l=>l.match(e,i,t,r))||null}matchStyles(e,i,t){return this.fallbackTransition.buildStyles(e,i,t)}};function z6(n,e,i){let t=[(l,d)=>!0],r={type:at.Sequence,steps:[],options:null},s={type:at.Transition,animation:r,matchers:t,options:null,queryCount:0,depCount:0};return new wf(n,s,e)}function iE(n,e,i){n.has(e)?n.has(i)||n.set(i,n.get(e)):n.has(i)&&n.set(e,n.get(i))}var H6=new Qc,Uv=class{constructor(e,i,t){this.bodyNode=e,this._driver=i,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,i){let t=[],r=[],s=gE(this._driver,i,t,r);if(t.length)throw o6(t);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,i,t){let r=e.element,s=cE(this._normalizer,e.keyframes,i,t);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,i,t={}){let r=[],s=this._animations.get(e),l,d=new Map;if(s?(l=vE(this._driver,i,s,fE,Av,new Map,new Map,t,H6,r),l.forEach(g=>{let v=ki(d,g.element,new Map);g.postStyleProps.forEach(_=>v.set(_,null))})):(r.push(s6()),l=[]),r.length)throw a6(r);d.forEach((g,v)=>{g.forEach((_,b)=>{g.set(b,this._driver.computeStyle(v,b,Lr))})});let h=l.map(g=>{let v=d.get(g.element);return this._buildPlayer(g,new Map,v)}),p=rs(h);return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){let i=this._getPlayer(e);i.destroy(),this._playersById.delete(e);let t=this.players.indexOf(i);t>=0&&this.players.splice(t,1)}_getPlayer(e){let i=this._playersById.get(e);if(!i)throw l6(e);return i}listen(e,i,t,r){let s=Qv(i,"","","");return Hv(this._getPlayer(e),t,s,r),()=>{}}command(e,i,t,r){if(t=="register"){this.register(e,r[0]);return}if(t=="create"){let l=r[0]||{};this.create(e,i,l);return}let s=this._getPlayer(e);switch(t){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},rE="ng-animate-queued",Q6=".ng-animate-queued",Ev="ng-animate-disabled",W6=".ng-animate-disabled",$6="ng-star-inserted",Y6=".ng-star-inserted",X6=[],SE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Z6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},lr="__ng_removed",Wc=class{get params(){return this.options.params}constructor(e,i=""){this.namespaceId=i;let t=e&&e.hasOwnProperty("value"),r=t?e.value:e;if(this.value=J6(r),t){let s=e,{value:l}=s,d=sc(s,["value"]);this.options=d}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let i=e.params;if(i){let t=this.options.params;Object.keys(i).forEach(r=>{t[r]==null&&(t[r]=i[r])})}}},zc="void",Tv=new Wc(zc),qv=class{constructor(e,i,t){this.id=e,this.hostElement=i,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Qi(i,this._hostClassName)}listen(e,i,t,r){if(!this._triggers.has(i))throw c6(t,i);if(t==null||t.length==0)throw d6(i);if(!eL(t))throw u6(t,i);let s=ki(this._elementListeners,e,[]),l={name:i,phase:t,callback:r};s.push(l);let d=ki(this._engine.statesByElement,e,new Map);return d.has(i)||(Qi(e,ff),Qi(e,ff+"-"+i),d.set(i,Tv)),()=>{this._engine.afterFlush(()=>{let h=s.indexOf(l);h>=0&&s.splice(h,1),this._triggers.has(i)||d.delete(i)})}}register(e,i){return this._triggers.has(e)?!1:(this._triggers.set(e,i),!0)}_getTrigger(e){let i=this._triggers.get(e);if(!i)throw h6(e);return i}trigger(e,i,t,r=!0){let s=this._getTrigger(i),l=new $c(this.id,i,e),d=this._engine.statesByElement.get(e);d||(Qi(e,ff),Qi(e,ff+"-"+i),this._engine.statesByElement.set(e,d=new Map));let h=d.get(i),p=new Wc(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&h&&p.absorbOptions(h.options),d.set(i,p),h||(h=Tv),!(p.value===zc)&&h.value===p.value){if(!iL(h.params,p.params)){let w=[],x=s.matchStyles(h.value,h.params,w),M=s.matchStyles(p.value,p.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{oa(e,x),Nr(e,M)})}return}let _=ki(this._engine.playersByElement,e,[]);_.forEach(w=>{w.namespaceId==this.id&&w.triggerName==i&&w.queued&&w.destroy()});let b=s.matchTransition(h.value,p.value,e,p.params),C=!1;if(!b){if(!r)return;b=s.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:i,transition:b,fromState:h,toState:p,player:l,isFallbackTransition:C}),C||(Qi(e,rE),l.onStart(()=>{dl(e,rE)})),l.onDone(()=>{let w=this.players.indexOf(l);w>=0&&this.players.splice(w,1);let x=this._engine.playersByElement.get(e);if(x){let M=x.indexOf(l);M>=0&&x.splice(M,1)}}),this.players.push(l),_.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(i=>i.delete(e)),this._elementListeners.forEach((i,t)=>{this._elementListeners.set(t,i.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let i=this._engine.playersByElement.get(e);i&&(i.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,i){let t=this._engine.driver.query(e,yf,!0);t.forEach(r=>{if(r[lr])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(l=>l.triggerLeaveAnimation(r,i,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,i,t,r){let s=this._engine.statesByElement.get(e),l=new Map;if(s){let d=[];if(s.forEach((h,p)=>{if(l.set(p,h.value),this._triggers.has(p)){let g=this.trigger(e,p,zc,r);g&&d.push(g)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,i,l),t&&rs(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let i=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(i&&t){let r=new Set;i.forEach(s=>{let l=s.name;if(r.has(l))return;r.add(l);let h=this._triggers.get(l).fallbackTransition,p=t.get(l)||Tv,g=new Wc(zc),v=new $c(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:h,fromState:p,toState:g,player:v,isFallbackTransition:!0})})}}removeNode(e,i){let t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,i),this.triggerLeaveAnimation(e,i,!0))return;let r=!1;if(t.totalAnimations){let s=t.players.length?t.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let l=e;for(;l=l.parentNode;)if(t.statesByElement.get(l)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,i);else{let s=e[lr];(!s||s===SE)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,i))}}insertNode(e,i){Qi(e,this._hostClassName)}drainQueuedTransitions(e){let i=[];return this._queue.forEach(t=>{let r=t.player;if(r.destroyed)return;let s=t.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==t.triggerName){let h=Qv(s,t.triggerName,t.fromState.value,t.toState.value);h._data=e,Hv(t.player,d.phase,h,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):i.push(t)}),this._queue=[],i.sort((t,r)=>{let s=t.transition.ast.depCount,l=r.transition.ast.depCount;return s==0||l==0?s-l:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(i=>i.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},jv=class{_onRemovalComplete(e,i){this.onRemovalComplete(e,i)}constructor(e,i,t){this.bodyNode=e,this.driver=i,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(i=>{i.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,i){let t=new qv(e,i,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,i)?this._balanceNamespaceList(t,i):(this.newHostElements.set(i,t),this.collectEnterElement(i)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,i){let t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let l=!1,d=this.driver.getParentElement(i);for(;d;){let h=r.get(d);if(h){let p=t.indexOf(h);t.splice(p+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||t.unshift(e)}else t.push(e);return r.set(i,e),e}register(e,i){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,i)),t}registerTrigger(e,i,t){let r=this._namespaceLookup[e];r&&r.register(i,t)&&this.totalAnimations++}destroy(e,i){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);let r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(i),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let i=new Set,t=this.statesByElement.get(e);if(t){for(let r of t.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&i.add(s)}}return i}trigger(e,i,t,r){if(gf(i)){let s=this._fetchNamespace(e);if(s)return s.trigger(i,t,r),!0}return!1}insertNode(e,i,t,r){if(!gf(i))return;let s=i[lr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let l=this.collectedLeaveElements.indexOf(i);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){let l=this._fetchNamespace(e);l&&l.insertNode(i,t)}r&&this.collectEnterElement(i)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,i){i?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Qi(e,Ev)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dl(e,Ev))}removeNode(e,i,t){if(gf(i)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(i,t):this.markElementAsRemoved(e,i,!1,t);let s=this.namespacesByHostElement.get(i);s&&s.id!==e&&s.removeNode(i,t)}else this._onRemovalComplete(i,t)}markElementAsRemoved(e,i,t,r,s){this.collectedLeaveElements.push(i),i[lr]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,i,t,r,s){return gf(i)?this._fetchNamespace(e).listen(i,t,r,s):()=>{}}_buildInstruction(e,i,t,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,i,s)}destroyInnerAnimations(e){let i=this.driver.query(e,yf,!0);i.forEach(t=>this.destroyActiveAnimationsForElement(t)),this.playersByQueriedElement.size!=0&&(i=this.driver.query(e,Mv,!0),i.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){let i=this.playersByElement.get(e);i&&i.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){let i=this.playersByQueriedElement.get(e);i&&i.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return rs(this.players).onDone(()=>e());e()})}processLeaveNode(e){let i=e[lr];if(i&&i.setForRemoval){if(e[lr]=SE,i.namespaceId){this.destroyInnerAnimations(e);let t=this._fetchNamespace(i.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}e.classList?.contains(Ev)&&this.markElementAsDisabled(e,!1),this.driver.query(e,W6,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let i=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++){let r=this.collectedEnterElements[t];Qi(r,$6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let t=[];try{i=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++){let r=this.collectedLeaveElements[t];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){let t=this._whenQuietFns;this._whenQuietFns=[],i.length?rs(i).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw f6(e)}_flushAnimations(e,i){let t=new Qc,r=[],s=new Map,l=[],d=new Map,h=new Map,p=new Map,g=new Set;this.disabledNodes.forEach(N=>{g.add(N);let W=this.driver.query(N,Q6,!0);for(let de=0;de<W.length;de++)g.add(W[de])});let v=this.bodyNode,_=Array.from(this.statesByElement.keys()),b=aE(_,this.collectedEnterElements),C=new Map,w=0;b.forEach((N,W)=>{let de=fE+w++;C.set(W,de),N.forEach(Y=>Qi(Y,de))});let x=[],M=new Set,F=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){let W=this.collectedLeaveElements[N],de=W[lr];de&&de.setForRemoval&&(x.push(W),M.add(W),de.hasAnimation?this.driver.query(W,Y6,!0).forEach(Y=>M.add(Y)):F.add(W))}let k=new Map,L=aE(_,Array.from(M));L.forEach((N,W)=>{let de=Av+w++;k.set(W,de),N.forEach(Y=>Qi(Y,de))}),e.push(()=>{b.forEach((N,W)=>{let de=C.get(W);N.forEach(Y=>dl(Y,de))}),L.forEach((N,W)=>{let de=k.get(W);N.forEach(Y=>dl(Y,de))}),x.forEach(N=>{this.processLeaveNode(N)})});let U=[],H=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(i).forEach(de=>{let Y=de.player,Q=de.element;if(U.push(Y),this.collectedEnterElements.length){let Ze=Q[lr];if(Ze&&Ze.setForMove){if(Ze.previousTriggersValues&&Ze.previousTriggersValues.has(de.triggerName)){let $t=Ze.previousTriggersValues.get(de.triggerName),bt=this.statesByElement.get(de.element);if(bt&&bt.has(de.triggerName)){let Bn=bt.get(de.triggerName);Bn.value=$t,bt.set(de.triggerName,Bn)}}Y.destroy();return}}let De=!v||!this.driver.containsElement(v,Q),ye=k.get(Q),fe=C.get(Q),ze=this._buildInstruction(de,t,fe,ye,De);if(ze.errors&&ze.errors.length){H.push(ze);return}if(De){Y.onStart(()=>oa(Q,ze.fromStyles)),Y.onDestroy(()=>Nr(Q,ze.toStyles)),r.push(Y);return}if(de.isFallbackTransition){Y.onStart(()=>oa(Q,ze.fromStyles)),Y.onDestroy(()=>Nr(Q,ze.toStyles)),r.push(Y);return}let un=[];ze.timelines.forEach(Ze=>{Ze.stretchStartingKeyframe=!0,this.disabledNodes.has(Ze.element)||un.push(Ze)}),ze.timelines=un,t.append(Q,ze.timelines);let mt={instruction:ze,player:Y,element:Q};l.push(mt),ze.queriedElements.forEach(Ze=>ki(d,Ze,[]).push(Y)),ze.preStyleProps.forEach((Ze,$t)=>{if(Ze.size){let bt=h.get($t);bt||h.set($t,bt=new Set),Ze.forEach((Bn,Wn)=>bt.add(Wn))}}),ze.postStyleProps.forEach((Ze,$t)=>{let bt=p.get($t);bt||p.set($t,bt=new Set),Ze.forEach((Bn,Wn)=>bt.add(Wn))})});if(H.length){let N=[];H.forEach(W=>{N.push(p6(W.triggerName,W.errors))}),U.forEach(W=>W.destroy()),this.reportError(N)}let G=new Map,$=new Map;l.forEach(N=>{let W=N.element;t.has(W)&&($.set(W,W),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,G))}),r.forEach(N=>{let W=N.element;this._getPreviousPlayers(W,!1,N.namespaceId,N.triggerName,null).forEach(Y=>{ki(G,W,[]).push(Y),Y.destroy()})});let ne=x.filter(N=>lE(N,h,p)),O=new Map;sE(O,this.driver,F,p,Lr).forEach(N=>{lE(N,h,p)&&ne.push(N)});let T=new Map;b.forEach((N,W)=>{sE(T,this.driver,new Set(N),h,hf)}),ne.forEach(N=>{let W=O.get(N),de=T.get(N);O.set(N,new Map([...W?.entries()??[],...de?.entries()??[]]))});let Z=[],ge=[],oe={};l.forEach(N=>{let{element:W,player:de,instruction:Y}=N;if(t.has(W)){if(g.has(W)){de.onDestroy(()=>Nr(W,Y.toStyles)),de.disabled=!0,de.overrideTotalTime(Y.totalTime),r.push(de);return}let Q=oe;if($.size>1){let ye=W,fe=[];for(;ye=ye.parentNode;){let ze=$.get(ye);if(ze){Q=ze;break}fe.push(ye)}fe.forEach(ze=>$.set(ze,Q))}let De=this._buildAnimation(de.namespaceId,Y,G,s,T,O);if(de.setRealPlayer(De),Q===oe)Z.push(de);else{let ye=this.playersByElement.get(Q);ye&&ye.length&&(de.parentPlayer=rs(ye)),r.push(de)}}else oa(W,Y.fromStyles),de.onDestroy(()=>Nr(W,Y.toStyles)),ge.push(de),g.has(W)&&r.push(de)}),ge.forEach(N=>{let W=s.get(N.element);if(W&&W.length){let de=rs(W);N.setRealPlayer(de)}}),r.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<x.length;N++){let W=x[N],de=W[lr];if(dl(W,Av),de&&de.hasAnimation)continue;let Y=[];if(d.size){let De=d.get(W);De&&De.length&&Y.push(...De);let ye=this.driver.query(W,Mv,!0);for(let fe=0;fe<ye.length;fe++){let ze=d.get(ye[fe]);ze&&ze.length&&Y.push(...ze)}}let Q=Y.filter(De=>!De.destroyed);Q.length?tL(this,W,Q):this.processLeaveNode(W)}return x.length=0,Z.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();let W=this.players.indexOf(N);this.players.splice(W,1)}),N.play()}),Z}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,i,t,r,s){let l=[];if(i){let d=this.playersByQueriedElement.get(e);d&&(l=d)}else{let d=this.playersByElement.get(e);if(d){let h=!s||s==zc;d.forEach(p=>{p.queued||!h&&p.triggerName!=r||l.push(p)})}}return(t||r)&&(l=l.filter(d=>!(t&&t!=d.namespaceId||r&&r!=d.triggerName))),l}_beforeAnimationBuild(e,i,t){let r=i.triggerName,s=i.element,l=i.isRemovalTransition?void 0:e,d=i.isRemovalTransition?void 0:r;for(let h of i.timelines){let p=h.element,g=p!==s,v=ki(t,p,[]);this._getPreviousPlayers(p,g,l,d,i.toState).forEach(b=>{let C=b.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),b.destroy(),v.push(b)})}oa(s,i.fromStyles)}_buildAnimation(e,i,t,r,s,l){let d=i.triggerName,h=i.element,p=[],g=new Set,v=new Set,_=i.timelines.map(C=>{let w=C.element;g.add(w);let x=w[lr];if(x&&x.removedBeforeQueried)return new is(C.duration,C.delay);let M=w!==h,F=nL((t.get(w)||X6).map(G=>G.getRealPlayer())).filter(G=>{let $=G;return $.element?$.element===w:!1}),k=s.get(w),L=l.get(w),U=cE(this._normalizer,C.keyframes,k,L),H=this._buildPlayer(C,U,F);if(C.subTimeline&&r&&v.add(w),M){let G=new $c(e,d,w);G.setRealPlayer(H),p.push(G)}return H});p.forEach(C=>{ki(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>K6(this.playersByQueriedElement,C.element,C))}),g.forEach(C=>Qi(C,KI));let b=rs(_);return b.onDestroy(()=>{g.forEach(C=>dl(C,KI)),Nr(h,i.toStyles)}),v.forEach(C=>{ki(r,C,[]).push(b)}),b}_buildPlayer(e,i,t){return i.length>0?this.driver.animate(e.element,i,e.duration,e.delay,e.easing,t):new is(e.duration,e.delay)}},$c=class{constructor(e,i,t){this.namespaceId=e,this.triggerName=i,this.element=t,this._player=new is,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((i,t)=>{i.forEach(r=>Hv(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let i=this._player;i.triggerCallback&&e.onStart(()=>i.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,i){ki(this._queuedCallbacks,e,[]).push(i)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let i=this._player;i.triggerCallback&&i.triggerCallback(e)}};function K6(n,e,i){let t=n.get(e);if(t){if(t.length){let r=t.indexOf(i);t.splice(r,1)}t.length==0&&n.delete(e)}return t}function J6(n){return n??null}function gf(n){return n&&n.nodeType===1}function eL(n){return n=="start"||n=="done"}function oE(n,e){let i=n.style.display;return n.style.display=e??"none",i}function sE(n,e,i,t,r){let s=[];i.forEach(h=>s.push(oE(h)));let l=[];t.forEach((h,p)=>{let g=new Map;h.forEach(v=>{let _=e.computeStyle(p,v,r);g.set(v,_),(!_||_.length==0)&&(p[lr]=Z6,l.push(p))}),n.set(p,g)});let d=0;return i.forEach(h=>oE(h,s[d++])),l}function aE(n,e){let i=new Map;if(n.forEach(d=>i.set(d,[])),e.length==0)return i;let t=1,r=new Set(e),s=new Map;function l(d){if(!d)return t;let h=s.get(d);if(h)return h;let p=d.parentNode;return i.has(p)?h=p:r.has(p)?h=t:h=l(p),s.set(d,h),h}return e.forEach(d=>{let h=l(d);h!==t&&i.get(h).push(d)}),i}function Qi(n,e){n.classList?.add(e)}function dl(n,e){n.classList?.remove(e)}function tL(n,e,i){rs(i).onDone(()=>n.processLeaveNode(e))}function nL(n){let e=[];return bE(n,e),e}function bE(n,e){for(let i=0;i<n.length;i++){let t=n[i];t instanceof jc?bE(t.players,e):e.push(t)}}function iL(n,e){let i=Object.keys(n),t=Object.keys(e);if(i.length!=t.length)return!1;for(let r=0;r<i.length;r++){let s=i[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function lE(n,e,i){let t=i.get(n);if(!t)return!1;let r=e.get(n);return r?t.forEach(s=>r.add(s)):e.set(n,t),i.delete(n),!0}var hl=class{constructor(e,i,t){this._driver=i,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new jv(e.body,i,t),this._timelineEngine=new Uv(e.body,i,t),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,i,t,r,s){let l=e+"-"+r,d=this._triggerCache[l];if(!d){let h=[],p=[],g=gE(this._driver,s,h,p);if(h.length)throw i6(r,h);p.length&&void 0,d=G6(r,g,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(i,r,d)}register(e,i){this._transitionEngine.register(e,i)}destroy(e,i){this._transitionEngine.destroy(e,i)}onInsert(e,i,t,r){this._transitionEngine.insertNode(e,i,t,r)}onRemove(e,i,t){this._transitionEngine.removeNode(e,i,t)}disableAnimations(e,i){this._transitionEngine.markElementAsDisabled(e,i)}process(e,i,t,r){if(t.charAt(0)=="@"){let[s,l]=XI(t),d=r;this._timelineEngine.command(s,i,l,d)}else this._transitionEngine.trigger(e,i,t,r)}listen(e,i,t,r,s){if(t.charAt(0)=="@"){let[l,d]=XI(t);return this._timelineEngine.listen(l,i,d,s)}return this._transitionEngine.listen(e,i,t,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function rL(n,e){let i=null,t=null;return Array.isArray(e)&&e.length?(i=xv(e[0]),e.length>1&&(t=xv(e[e.length-1]))):e instanceof Map&&(i=xv(e)),i||t?new Gv(n,i,t):null}var ul=class ul{constructor(e,i,t){this._element=e,this._startStyles=i,this._endStyles=t,this._state=0;let r=ul.initialStylesByElement.get(e);r||ul.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Nr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nr(this._element,this._initialStyles),this._endStyles&&(Nr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(ul.initialStylesByElement.delete(this._element),this._startStyles&&(oa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(oa(this._element,this._endStyles),this._endStyles=null),Nr(this._element,this._initialStyles),this._state=3)}};ul.initialStylesByElement=new WeakMap;var Gv=ul;function xv(n){let e=null;return n.forEach((i,t)=>{oL(t)&&(e=e||new Map,e.set(t,i))}),e}function oL(n){return n==="display"||n==="position"}var If=class{constructor(e,i,t,r){this.element=e,this.keyframes=i,this.options=t,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let i=()=>this._onFinish();this.domPlayer.addEventListener("finish",i),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",i)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let i=[];return e.forEach(t=>{i.push(Object.fromEntries(t))}),i}_triggerWebAnimation(e,i,t){return e.animate(this._convertKeyframesToObject(i),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{r!=="offset"&&e.set(r,this._finished?t:Xv(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let i=e==="start"?this._onStartFns:this._onDoneFns;i.forEach(t=>t()),i.length=0}},Ef=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,i){return dE(e,i)}getParentElement(e){return Wv(e)}query(e,i,t){return uE(e,i,t)}computeStyle(e,i,t){return Xv(e,i)}animate(e,i,t,r,s,l=[]){let d=r==0?"both":"forwards",h={duration:t,delay:r,fill:d};s&&(h.easing=s);let p=new Map,g=l.filter(b=>b instanceof If);I6(t,r)&&g.forEach(b=>{b.currentSnapshot.forEach((C,w)=>p.set(w,C))});let v=D6(i).map(b=>new Map(b));v=E6(e,v,p);let _=rL(e,v);return new If(e,v,h,_)}};var vf="@",_E="@.disabled",Tf=class{constructor(e,i,t,r){this.namespaceId=e,this.delegate=i,this.engine=t,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,i){this.delegate.appendChild(e,i),this.engine.onInsert(this.namespaceId,i,e,!1)}insertBefore(e,i,t,r=!0){this.delegate.insertBefore(e,i,t),this.engine.onInsert(this.namespaceId,i,e,r)}removeChild(e,i,t){this.parentNode(i)&&this.engine.onRemove(this.namespaceId,i,this.delegate)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,r){this.delegate.setAttribute(e,i,t,r)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,r){this.delegate.setStyle(e,i,t,r)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){i.charAt(0)==vf&&i==_E?this.disableAnimations(e,!!t):this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.delegate.listen(e,i,t)}disableAnimations(e,i){this.engine.disableAnimations(e,i)}},zv=class extends Tf{constructor(e,i,t,r,s){super(i,t,r,s),this.factory=e,this.namespaceId=i}setProperty(e,i,t){i.charAt(0)==vf?i.charAt(1)=="."&&i==_E?(t=t===void 0?!0:!!t,this.disableAnimations(e,t)):this.engine.process(this.namespaceId,e,i.slice(1),t):this.delegate.setProperty(e,i,t)}listen(e,i,t){if(i.charAt(0)==vf){let r=sL(e),s=i.slice(1),l="";return s.charAt(0)!=vf&&([s,l]=aL(s)),this.engine.listen(this.namespaceId,r,s,l,d=>{let h=d._data||-1;this.factory.scheduleListenerCallback(h,t,d)})}return this.delegate.listen(e,i,t)}};function sL(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function aL(n){let e=n.indexOf("."),i=n.substring(0,e),t=n.slice(e+1);return[i,t]}var xf=class{constructor(e,i,t){this.delegate=e,this.engine=i,this._zone=t,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,i){let t="",r=this.delegate.createRenderer(e,i);if(!e||!i?.data?.animation){let p=this._rendererCache,g=p.get(r);if(!g){let v=()=>p.delete(r);g=new Tf(t,r,this.engine,v),p.set(r,g)}return g}let s=i.id,l=i.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);let d=p=>{Array.isArray(p)?p.forEach(d):this.engine.registerTrigger(s,l,e,p.name,p)};return i.data.animation.forEach(d),new zv(this,l,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,t){if(e>=0&&e<this._microtaskId){this._zone.run(()=>i(t));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),r.push([i,t])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var cL=(()=>{let e=class e extends hl{constructor(t,r,s){super(t,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(le(nt),le(sa),le(aa))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})();function dL(){return new bf}function uL(n,e,i){return new xf(n,e,i)}var DE=[{provide:aa,useFactory:dL},{provide:hl,useClass:cL},{provide:Zo,useFactory:uL,deps:[df,hl,Fe]}],hL=[{provide:sa,useFactory:()=>new Ef},{provide:ei,useValue:"BrowserAnimations"},...DE],XX=[{provide:sa,useClass:$v},{provide:ei,useValue:"NoopAnimations"},...DE];function CE(){return ar("NgEagerAnimations"),[...hL]}var wE={providers:[uI({eventCoalescing:!0}),CE(),GI("ngsw-worker.js",{enabled:!fI(),registrationStrategy:"registerWhenStable:30000"})]};var Vn=kR(Zx(),1);function fa(n){return n!=null&&`${n}`!="false"}function Al(n,e=0){return oS(n)?Number(n):arguments.length===2?e:0}function oS(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function Ml(n){return Array.isArray(n)?n:[n]}function Nn(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Xi(n){return n instanceof We?n.nativeElement:n}var aS;try{aS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{aS=!1}var Vt=(()=>{let e=class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?kc(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||aS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(le(zi))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Rl,Kx=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function lS(){if(Rl)return Rl;if(typeof document!="object"||!document)return Rl=new Set(Kx),Rl;let n=document.createElement("input");return Rl=new Set(Kx.filter(e=>(n.setAttribute("type",e),n.type===e))),Rl}var vd;function lB(){if(vd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>vd=!0}))}finally{vd=vd||!1}return vd}function ps(n){return lB()?n:!!n.capture}var pr=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(pr||{}),Wp,pa;function $p(){if(pa==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return pa=!1,pa;if("scrollBehavior"in document.documentElement.style)pa=!0;else{let n=Element.prototype.scrollTo;n?pa=!/\{\s*\[native code\]\s*\}/.test(n.toString()):pa=!1}}return pa}function Ol(){if(typeof document!="object"||!document)return pr.NORMAL;if(Wp==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let i=document.createElement("div"),t=i.style;t.width="2px",t.height="1px",n.appendChild(i),document.body.appendChild(n),Wp=pr.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Wp=n.scrollLeft===0?pr.NEGATED:pr.INVERTED),n.remove()}return Wp}var sS;function cB(){if(sS==null){let n=typeof document<"u"?document.head:null;sS=!!(n&&(n.createShadowRoot||n.attachShadow))}return sS}function Jx(n){if(cB()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function yd(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function mr(n){return n.composedPath?n.composedPath()[0]:n.target}function Sd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var dB=new Ie("cdk-dir-doc",{providedIn:"root",factory:uB});function uB(){return Re(nt)}var hB=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function fB(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?hB.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var yi=(()=>{let e=class e{constructor(t){if(this.value="ltr",this.change=new ht,t){let r=t.body?t.body.dir:null,s=t.documentElement?t.documentElement.dir:null;this.value=fB(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(le(dB,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ms=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();var Yp=class{};function Zp(n){return n&&typeof n.connect=="function"&&!(n instanceof As)}var Fl=function(n){return n[n.REPLACED=0]="REPLACED",n[n.INSERTED=1]="INSERTED",n[n.MOVED=2]="MOVED",n[n.REMOVED=3]="REMOVED",n}(Fl||{}),bd=new Ie("_ViewRepeater"),kl=class{applyChanges(e,i,t,r,s){e.forEachOperation((l,d,h)=>{let p,g;if(l.previousIndex==null){let v=t(l,d,h);p=i.createEmbeddedView(v.templateRef,v.context,v.index),g=Fl.INSERTED}else h==null?(i.remove(d),g=Fl.REMOVED):(p=i.get(d),i.move(p,h),g=Fl.MOVED);s&&s({context:p?.context,operation:g,record:l})})}detach(){}};var Xp=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,i,t=!0,r){this._multiple=e,this._emitChanges=t,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ke,i&&i.length&&(e?i.forEach(s=>this._markSelected(s)):this._markSelected(i[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(t=>this._markSelected(t));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}deselect(...e){this._verifyValueAssignment(e),e.forEach(t=>this._unmarkSelected(t));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}setSelection(...e){this._verifyValueAssignment(e);let i=this.selected,t=new Set(e);e.forEach(s=>this._markSelected(s)),i.filter(s=>!t.has(this._getConcreteValue(s,t))).forEach(s=>this._unmarkSelected(s));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let i=this._hasQueuedChanges();return e&&this._emitChangeEvent(),i}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,i){if(this.compareWith){i=i??this._selection;for(let t of i)if(this.compareWith(e,t))return t;return e}else return e}};var pB=20,cS=(()=>{let e=class e{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new ke,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=pB){return this._platform.isBrowser?new Je(r=>{this._globalSubscription||this._addGlobalListener();let s=t>0?this._scrolled.pipe(ju(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):hn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){let s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(wn(l=>!l||s.indexOf(l)>-1))}getAncestorScrollContainers(t){let r=[];return this.scrollContainers.forEach((s,l)=>{this._scrollableContainsElement(l,t)&&r.push(l)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=Xi(r),l=t.getElementRef().nativeElement;do if(s==l)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Ir(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(le(Fe),le(Vt),le(nt,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),tA=(()=>{let e=class e{constructor(t,r,s,l){this.elementRef=t,this.scrollDispatcher=r,this.ngZone=s,this.dir=l,this._destroyed=new ke,this._elementScrolled=new Je(d=>this.ngZone.runOutsideAngular(()=>Ir(this.elementRef.nativeElement,"scroll").pipe(Xn(this._destroyed)).subscribe(d)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let r=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=s?t.end:t.start),t.right==null&&(t.right=s?t.start:t.end),t.bottom!=null&&(t.top=r.scrollHeight-r.clientHeight-t.bottom),s&&Ol()!=pr.NORMAL?(t.left!=null&&(t.right=r.scrollWidth-r.clientWidth-t.left),Ol()==pr.INVERTED?t.left=t.right:Ol()==pr.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=r.scrollWidth-r.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let r=this.elementRef.nativeElement;$p()?r.scrollTo(t):(t.top!=null&&(r.scrollTop=t.top),t.left!=null&&(r.scrollLeft=t.left))}measureScrollOffset(t){let r="left",s="right",l=this.elementRef.nativeElement;if(t=="top")return l.scrollTop;if(t=="bottom")return l.scrollHeight-l.clientHeight-l.scrollTop;let d=this.dir&&this.dir.value=="rtl";return t=="start"?t=d?s:r:t=="end"&&(t=d?r:s),d&&Ol()==pr.INVERTED?t==r?l.scrollWidth-l.clientWidth-l.scrollLeft:l.scrollLeft:d&&Ol()==pr.NEGATED?t==r?l.scrollLeft+l.scrollWidth-l.clientWidth:-l.scrollLeft:t==r?l.scrollLeft:l.scrollWidth-l.clientWidth-l.scrollLeft}};e.\u0275fac=function(r){return new(r||e)(K(We),K(cS),K(Fe),K(yi,8))},e.\u0275dir=Ue({type:e,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0});let n=e;return n})(),mB=20,_d=(()=>{let e=class e{constructor(t,r,s){this._platform=t,this._change=new ke,this._changeListener=l=>{this._change.next(l)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){let l=this._getWindow();l.addEventListener("resize",this._changeListener),l.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,r=this._getWindow(),s=t.documentElement,l=s.getBoundingClientRect(),d=-l.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,h=-l.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:d,left:h}}change(t=mB){return t>0?this._change.pipe(ju(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(le(Vt),le(Fe),le(nt,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var eA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})(),Dd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[ms,eA,ms,eA]});let n=e;return n})();var Cd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Ll=class extends Cd{constructor(e,i,t,r,s){super(),this.component=e,this.viewContainerRef=i,this.injector=t,this.componentFactoryResolver=r,this.projectableNodes=s}},Nl=class extends Cd{constructor(e,i,t,r){super(),this.templateRef=e,this.viewContainerRef=i,this.context=t,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,i=this.context){return this.context=i,super.attach(e)}detach(){return this.context=void 0,super.detach()}},uS=class extends Cd{constructor(e){super(),this.element=e instanceof We?e.nativeElement:e}},Vl=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Ll)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Nl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof uS)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Kp=class extends Vl{constructor(e,i,t,r,s){super(),this.outletElement=e,this._componentFactoryResolver=i,this._appRef=t,this._defaultInjector=r,this.attachDomPortal=l=>{this._document;let d=l.element;d.parentNode;let h=this._document.createComment("dom-portal");d.parentNode.insertBefore(h,d),this.outletElement.appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(d,h)})},this._document=s}attachComponentPortal(e){let t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=t.create(e.injector||this._defaultInjector||Xt.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let i=e.viewContainerRef,t=i.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return t.rootNodes.forEach(r=>this.outletElement.appendChild(r)),t.detectChanges(),this.setDisposeFn(()=>{let r=i.indexOf(t);r!==-1&&i.remove(r)}),this._attachedPortal=e,t}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var wd=(()=>{let e=class e extends Vl{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ht,this.attachDomPortal=l=>{this._document;let d=l.element;d.parentNode;let h=this._document.createComment("dom-portal");l.setAttachedHost(this),d.parentNode.insertBefore(h,d),this._getRootNode().appendChild(d),this._attachedPortal=l,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(d,h)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let r=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,l=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(l,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}};e.\u0275fac=function(r){return new(r||e)(K(no),K(ti),K(nt))},e.\u0275dir=Ue({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[zt]});let n=e;return n})();var ma=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();function Jp(n,...e){return e.length?e.some(i=>n[i]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var nA=$p(),hS=class{constructor(e,i){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=i}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Nn(-this._previousScrollPosition.left),e.style.top=Nn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,i=this._document.body,t=e.style,r=i.style,s=t.scrollBehavior||"",l=r.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),nA&&(t.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),nA&&(t.scrollBehavior=s,r.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let i=this._document.body,t=this._viewportRuler.getViewportSize();return i.scrollHeight>t.height||i.scrollWidth>t.width}};var fS=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._ngZone=i,this._viewportRuler=t,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(wn(i=>!i||!this._overlayRef.overlayElement.contains(i.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let i=this._viewportRuler.getViewportScrollPosition().top;Math.abs(i-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},em=class{enable(){}disable(){}attach(){}};function pS(n,e){return e.some(i=>{let t=n.bottom<i.top,r=n.top>i.bottom,s=n.right<i.left,l=n.left>i.right;return t||r||s||l})}function iA(n,e){return e.some(i=>{let t=n.top<i.top,r=n.bottom>i.bottom,s=n.left<i.left,l=n.right>i.right;return t||r||s||l})}var mS=class{constructor(e,i,t,r){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=t,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let i=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:r}=this._viewportRuler.getViewportSize();pS(i,[{width:t,height:r,bottom:r,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},gB=(()=>{let e=class e{constructor(t,r,s,l){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new em,this.close=d=>new fS(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new hS(this._viewportRuler,this._document),this.reposition=d=>new mS(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=l}};e.\u0275fac=function(r){return new(r||e)(le(cS),le(_d),le(Fe),le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Id=class{constructor(e){if(this.scrollStrategy=new em,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let i=Object.keys(e);for(let t of i)e[t]!==void 0&&(this[t]=e[t])}}};var gS=class{constructor(e,i){this.connectionPair=e,this.scrollableViewProperties=i}};var cA=(()=>{let e=class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),vB=(()=>{let e=class e extends cA{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{let l=this._attachedOverlays;for(let d=l.length-1;d>-1;d--)if(l[d]._keydownEvents.observers.length>0){let h=l[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(le(nt),le(Fe,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),yB=(()=>{let e=class e extends cA{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=l=>{this._pointerDownEventTarget=mr(l)},this._clickListener=l=>{let d=mr(l),h=l.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;let p=this._attachedOverlays.slice();for(let g=p.length-1;g>-1;g--){let v=p[g];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(rA(v.overlayElement,d)||rA(v.overlayElement,h))break;let _=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>_.next(l)):_.next(l)}}}add(t){if(super.add(t),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(le(nt),le(Vt),le(Fe,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function rA(n,e){let i=typeof ShadowRoot<"u"&&ShadowRoot,t=e;for(;t;){if(t===n)return!0;t=i&&t instanceof ShadowRoot?t.host:t.parentNode}return!1}var Bl=(()=>{let e=class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||Sd()){let s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let l=0;l<s.length;l++)s[l].remove()}let r=this._document.createElement("div");r.classList.add(t),Sd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(le(nt),le(Vt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xo=class{constructor(e,i,t,r,s,l,d,h,p,g=!1,v){this._portalOutlet=e,this._host=i,this._pane=t,this._config=r,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=h,this._outsideClickDispatcher=p,this._animationsDisabled=g,this._injector=v,this._backdropElement=null,this._backdropClick=new ke,this._attachments=new ke,this._detachments=new ke,this._locationChanges=Yt.EMPTY,this._backdropClickHandler=_=>this._backdropClick.next(_),this._backdropTransitionendHandler=_=>{this._disposeBackdrop(_.target)},this._keydownEvents=new ke,this._outsidePointerEvents=new ke,this._renders=new ke,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Hi(()=>Ac(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let i=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=co(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof i?.onDestroy=="function"&&i.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),i}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Ee(Ee({},this._config),e),this._updateElementSize()}setDirection(e){this._config=nn(Ee({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Nn(this._config.width),e.height=Nn(this._config.height),e.minWidth=Nn(this._config.minWidth),e.minHeight=Nn(this._config.minHeight),e.maxWidth=Nn(this._config.maxWidth),e.maxHeight=Nn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,i,t){let r=Ml(i||[]).filter(s=>!!s);r.length&&(t?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Xn(wi(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},oA="cdk-overlay-connected-position-bounding-box",SB=/([A-Za-z%]+)$/,vS=class{get positions(){return this._preferredPositions}constructor(e,i,t,r,s){this._viewportRuler=i,this._document=t,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ke,this._resizeSubscription=Yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(oA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,i=this._overlayRect,t=this._viewportRect,r=this._containerRect,s=[],l;for(let d of this._preferredPositions){let h=this._getOriginPoint(e,r,d),p=this._getOverlayPoint(h,i,d),g=this._getOverlayFit(p,i,t,d);if(g.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(d,h);return}if(this._canFitWithFlexibleDimensions(g,p,t)){s.push({position:d,origin:h,overlayRect:i,boundingBoxRect:this._calculateBoundingBoxRect(h,d)});continue}(!l||l.overlayFit.visibleArea<g.visibleArea)&&(l={overlayFit:g,overlayPoint:p,originPoint:h,position:d,overlayRect:i})}if(s.length){let d=null,h=-1;for(let p of s){let g=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);g>h&&(h=g,d=p)}this._isPushed=!1,this._applyPosition(d.position,d.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(l.position,l.originPoint);return}this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ga(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(oA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let i=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,i)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,i,t){let r;if(t.originX=="center")r=e.left+e.width/2;else{let l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r=t.originX=="start"?l:d}i.left<0&&(r-=i.left);let s;return t.originY=="center"?s=e.top+e.height/2:s=t.originY=="top"?e.top:e.bottom,i.top<0&&(s-=i.top),{x:r,y:s}}_getOverlayPoint(e,i,t){let r;t.overlayX=="center"?r=-i.width/2:t.overlayX==="start"?r=this._isRtl()?-i.width:0:r=this._isRtl()?0:-i.width;let s;return t.overlayY=="center"?s=-i.height/2:s=t.overlayY=="top"?0:-i.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,i,t,r){let s=aA(i),{x:l,y:d}=e,h=this._getOffset(r,"x"),p=this._getOffset(r,"y");h&&(l+=h),p&&(d+=p);let g=0-l,v=l+s.width-t.width,_=0-d,b=d+s.height-t.height,C=this._subtractOverflows(s.width,g,v),w=this._subtractOverflows(s.height,_,b),x=C*w;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:w===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(e,i,t){if(this._hasFlexibleDimensions){let r=t.bottom-i.y,s=t.right-i.x,l=sA(this._overlayRef.getConfig().minHeight),d=sA(this._overlayRef.getConfig().minWidth),h=e.fitsInViewportVertically||l!=null&&l<=r,p=e.fitsInViewportHorizontally||d!=null&&d<=s;return h&&p}return!1}_pushOverlayOnScreen(e,i,t){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=aA(i),s=this._viewportRect,l=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),h=Math.max(s.top-t.top-e.y,0),p=Math.max(s.left-t.left-e.x,0),g=0,v=0;return r.width<=s.width?g=p||-l:g=e.x<this._viewportMargin?s.left-t.left-e.x:0,r.height<=s.height?v=h||-d:v=e.y<this._viewportMargin?s.top-t.top-e.y:0,this._previousPushAmount={x:g,y:v},{x:e.x+g,y:e.y+v}}_applyPosition(e,i){if(this._setTransformOrigin(e),this._setOverlayElementStyles(i,e),this._setBoundingBoxStyles(i,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let t=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!bB(this._lastScrollVisibility,t)){let r=new gS(e,t);this._positionChanges.next(r)}this._lastScrollVisibility=t}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let i=this._boundingBox.querySelectorAll(this._transformOriginSelector),t,r=e.overlayY;e.overlayX==="center"?t="center":this._isRtl()?t=e.overlayX==="start"?"right":"left":t=e.overlayX==="start"?"left":"right";for(let s=0;s<i.length;s++)i[s].style.transformOrigin=`${t} ${r}`}_calculateBoundingBoxRect(e,i){let t=this._viewportRect,r=this._isRtl(),s,l,d;if(i.overlayY==="top")l=e.y,s=t.height-l+this._viewportMargin;else if(i.overlayY==="bottom")d=t.height-e.y+this._viewportMargin*2,s=t.height-d+this._viewportMargin;else{let b=Math.min(t.bottom-e.y+t.top,e.y),C=this._lastBoundingBoxSize.height;s=b*2,l=e.y-b,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-C/2)}let h=i.overlayX==="start"&&!r||i.overlayX==="end"&&r,p=i.overlayX==="end"&&!r||i.overlayX==="start"&&r,g,v,_;if(p)_=t.width-e.x+this._viewportMargin*2,g=e.x-this._viewportMargin;else if(h)v=e.x,g=t.right-e.x;else{let b=Math.min(t.right-e.x+t.left,e.x),C=this._lastBoundingBoxSize.width;g=b*2,v=e.x-b,g>C&&!this._isInitialRender&&!this._growAfterOpen&&(v=e.x-C/2)}return{top:l,left:v,bottom:d,right:_,width:g,height:s}}_setBoundingBoxStyles(e,i){let t=this._calculateBoundingBoxRect(e,i);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;r.height=Nn(t.height),r.top=Nn(t.top),r.bottom=Nn(t.bottom),r.width=Nn(t.width),r.left=Nn(t.left),r.right=Nn(t.right),i.overlayX==="center"?r.alignItems="center":r.alignItems=i.overlayX==="end"?"flex-end":"flex-start",i.overlayY==="center"?r.justifyContent="center":r.justifyContent=i.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=Nn(s)),l&&(r.maxWidth=Nn(l))}this._lastBoundingBoxSize=t,ga(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ga(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ga(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,i){let t={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(r){let g=this._viewportRuler.getViewportScrollPosition();ga(t,this._getExactOverlayY(i,e,g)),ga(t,this._getExactOverlayX(i,e,g))}else t.position="static";let d="",h=this._getOffset(i,"x"),p=this._getOffset(i,"y");h&&(d+=`translateX(${h}px) `),p&&(d+=`translateY(${p}px)`),t.transform=d.trim(),l.maxHeight&&(r?t.maxHeight=Nn(l.maxHeight):s&&(t.maxHeight="")),l.maxWidth&&(r?t.maxWidth=Nn(l.maxWidth):s&&(t.maxWidth="")),ga(this._pane.style,t)}_getExactOverlayY(e,i,t){let r={top:"",bottom:""},s=this._getOverlayPoint(i,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,t)),e.overlayY==="bottom"){let l=this._document.documentElement.clientHeight;r.bottom=`${l-(s.y+this._overlayRect.height)}px`}else r.top=Nn(s.y);return r}_getExactOverlayX(e,i,t){let r={left:"",right:""},s=this._getOverlayPoint(i,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,t));let l;if(this._isRtl()?l=e.overlayX==="end"?"left":"right":l=e.overlayX==="end"?"right":"left",l==="right"){let d=this._document.documentElement.clientWidth;r.right=`${d-(s.x+this._overlayRect.width)}px`}else r.left=Nn(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),i=this._pane.getBoundingClientRect(),t=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:iA(e,t),isOriginOutsideView:pS(e,t),isOverlayClipped:iA(i,t),isOverlayOutsideView:pS(i,t)}}_subtractOverflows(e,...i){return i.reduce((t,r)=>t-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,i=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+e-this._viewportMargin,bottom:t.top+i-this._viewportMargin,width:e-2*this._viewportMargin,height:i-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,i){return i==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Ml(e).forEach(i=>{i!==""&&this._appliedPanelClasses.indexOf(i)===-1&&(this._appliedPanelClasses.push(i),this._pane.classList.add(i))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof We)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let i=e.width||0,t=e.height||0;return{top:e.y,bottom:e.y+t,left:e.x,right:e.x+i,height:t,width:i}}};function ga(n,e){for(let i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);return n}function sA(n){if(typeof n!="number"&&n!=null){let[e,i]=n.split(SB);return!i||i==="px"?parseFloat(e):null}return n||null}function aA(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function bB(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var lA="cdk-global-overlay-wrapper",yS=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let i=e.getConfig();this._overlayRef=e,this._width&&!i.width&&e.updateSize({width:this._width}),this._height&&!i.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(lA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:l,maxHeight:d}=t,h=(r==="100%"||r==="100vw")&&(!l||l==="100%"||l==="100vw"),p=(s==="100%"||s==="100vh")&&(!d||d==="100%"||d==="100vh"),g=this._xPosition,v=this._xOffset,_=this._overlayRef.getConfig().direction==="rtl",b="",C="",w="";h?w="flex-start":g==="center"?(w="center",_?C=v:b=v):_?g==="left"||g==="end"?(w="flex-end",b=v):(g==="right"||g==="start")&&(w="flex-start",C=v):g==="left"||g==="start"?(w="flex-start",b=v):(g==="right"||g==="end")&&(w="flex-end",C=v),e.position=this._cssPosition,e.marginLeft=h?"0":b,e.marginTop=p?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=h?"0":C,i.justifyContent=w,i.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,i=this._overlayRef.hostElement,t=i.style;i.classList.remove(lA),t.justifyContent=t.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},_B=(()=>{let e=class e{constructor(t,r,s,l){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=l}global(){return new yS}flexibleConnectedTo(t){return new vS(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(le(_d),le(nt),le(Vt),le(Bl))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),DB=0,gr=(()=>{let e=class e{constructor(t,r,s,l,d,h,p,g,v,_,b,C){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=l,this._keyboardDispatcher=d,this._injector=h,this._ngZone=p,this._document=g,this._directionality=v,this._location=_,this._outsideClickDispatcher=b,this._animationsModuleType=C}create(t){let r=this._createHostElement(),s=this._createPaneElement(r),l=this._createPortalOutlet(s),d=new Id(t);return d.direction=d.direction||this._directionality.value,new xo(l,r,s,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(sr))}position(){return this._positionBuilder}_createPaneElement(t){let r=this._document.createElement("div");return r.id=`cdk-overlay-${DB++}`,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Fr)),new Kp(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(le(gB),le(Bl),le(no),le(_B),le(vB),le(Xt),le(Fe),le(nt),le(yi),le(Pc),le(yB),le(ei,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var CB=new Ie("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=Re(gr);return()=>n.scrollStrategies.reposition()}});function wB(n){return()=>n.scrollStrategies.reposition()}var IB={provide:CB,deps:[gr],useFactory:wB},tm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({providers:[gr,IB],imports:[ms,ma,Dd,Dd]});let n=e;return n})();var EB=(()=>{let e=class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var nm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({providers:[EB]});let n=e;return n})();var uA=new Set,va,TB=(()=>{let e=class e{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):AB}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&xB(t,this._nonce),this._matchMedia(t)}};e.\u0275fac=function(r){return new(r||e)(le(Vt),le(Ic,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function xB(n,e){if(!uA.has(n))try{va||(va=document.createElement("style"),e&&va.setAttribute("nonce",e),va.setAttribute("type","text/css"),document.head.appendChild(va)),va.sheet&&(va.sheet.insertRule(`@media ${n} {body{ }}`,0),uA.add(n))}catch(i){console.error(i)}}function AB(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var fA=(()=>{let e=class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new ke}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return hA(Ml(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let s=hA(Ml(t)).map(d=>this._registerQuery(d).observable),l=Fs(s);return l=wr(l.pipe(qn(1)),l.pipe(pc(1),Hu(0))),l.pipe(Ct(d=>{let h={matches:!1,breakpoints:{}};return d.forEach(({matches:p,query:g})=>{h.matches=h.matches||p,h.breakpoints[g]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let r=this._mediaMatcher.matchMedia(t),l={observable:new Je(d=>{let h=p=>this._zone.run(()=>d.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(zo(r),Ct(({matches:d})=>({query:t,matches:d})),Xn(this._destroySubject)),mql:r};return this._queries.set(t,l),l}};e.\u0275fac=function(r){return new(r||e)(le(TB),le(Fe))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hA(n){return n.map(e=>e.split(",")).reduce((e,i)=>e.concat(i)).map(e=>e.trim())}var Ed=(()=>{let e=class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return RB(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let r=MB(BB(t));if(r&&(pA(r)===-1||!this.isVisible(r)))return!1;let s=t.nodeName.toLowerCase(),l=pA(t);return t.hasAttribute("contenteditable")?l!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!NB(t)?!1:s==="audio"?t.hasAttribute("controls")?l!==-1:!1:s==="video"?l===-1?!1:l!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,r){return VB(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}};e.\u0275fac=function(r){return new(r||e)(le(Vt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function MB(n){try{return n.frameElement}catch{return null}}function RB(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function OB(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function PB(n){return kB(n)&&n.type=="hidden"}function FB(n){return LB(n)&&n.hasAttribute("href")}function kB(n){return n.nodeName.toLowerCase()=="input"}function LB(n){return n.nodeName.toLowerCase()=="a"}function vA(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function pA(n){if(!vA(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function NB(n){let e=n.nodeName.toLowerCase(),i=e==="input"&&n.type;return i==="text"||i==="password"||e==="select"||e==="textarea"}function VB(n){return PB(n)?!1:OB(n)||FB(n)||n.hasAttribute("contenteditable")||vA(n)}function BB(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var bS=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,i,t,r,s=!1,l){this._element=e,this._checker=i,this._ngZone=t,this._document=r,this._injector=l,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,i=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),i&&(i.removeEventListener("focus",this.endAnchorListener),i.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(i=>{this._executeOnStable(()=>i(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let i=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?i.length?i[0]:this._getFirstTabbableElement(this._element):i.length?i[i.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let i=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(i){if(!this._checker.isFocusable(i)){let t=this._getFirstTabbableElement(i);return t?.focus(e),!!t}return i.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let i=this._getRegionBoundary("start");return i&&i.focus(e),!!i}focusLastTabbableElement(e){let i=this._getRegionBoundary("end");return i&&i.focus(e),!!i}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=0;t<i.length;t++){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(i[t]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let i=e.children;for(let t=i.length-1;t>=0;t--){let r=i[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(i[t]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,i){e?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?co(e,{injector:this._injector}):setTimeout(e)}},om=(()=>{let e=class e{constructor(t,r,s){this._checker=t,this._ngZone=r,this._injector=Re(Xt),this._document=s}create(t,r=!1){return new bS(t,this._checker,this._ngZone,this._document,r,this._injector)}};e.\u0275fac=function(r){return new(r||e)(le(Ed),le(Fe),le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function _S(n){return n.buttons===0||n.detail===0}function DS(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var UB=new Ie("cdk-input-modality-detector-options"),qB={ignoreKeys:[18,17,224,91,16]},yA=650,Ul=ps({passive:!0,capture:!0}),jB=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(t,r,s,l){this._platform=t,this._mostRecentTarget=null,this._modality=new Ai(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(h=>h===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=mr(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<yA||(this._modality.next(_S(d)?"keyboard":"mouse"),this._mostRecentTarget=mr(d))},this._onTouchstart=d=>{if(DS(d)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mr(d)},this._options=Ee(Ee({},qB),l),this.modalityDetected=this._modality.pipe(pc(1)),this.modalityChanged=this.modalityDetected.pipe(Qu()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ul),s.addEventListener("mousedown",this._onMousedown,Ul),s.addEventListener("touchstart",this._onTouchstart,Ul)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ul),document.removeEventListener("mousedown",this._onMousedown,Ul),document.removeEventListener("touchstart",this._onTouchstart,Ul))}};e.\u0275fac=function(r){return new(r||e)(le(Vt),le(Fe),le(nt),le(UB,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var rm=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(rm||{}),GB=new Ie("cdk-focus-monitor-default-options"),im=ps({passive:!0,capture:!0}),ql=(()=>{let e=class e{constructor(t,r,s,l,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ke,this._rootNodeFocusAndBlurListener=h=>{let p=mr(h);for(let g=p;g;g=g.parentElement)h.type==="focus"?this._onFocus(h,g):this._onBlur(h,g)},this._document=l,this._detectionMode=d?.detectionMode||rm.IMMEDIATE}monitor(t,r=!1){let s=Xi(t);if(!this._platform.isBrowser||s.nodeType!==1)return hn();let l=Jx(s)||this._getDocument(),d=this._elementInfo.get(s);if(d)return r&&(d.checkChildren=!0),d.subject;let h={checkChildren:r,subject:new ke,rootNode:l};return this._elementInfo.set(s,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){let r=Xi(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){let l=Xi(t),d=this._getDocument().activeElement;l===d?this._getClosestElementsInfo(l).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),typeof l.focus=="function"&&l.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===rm.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused",r==="touch"),t.classList.toggle("cdk-keyboard-focused",r==="keyboard"),t.classList.toggle("cdk-mouse-focused",r==="mouse"),t.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&r,this._detectionMode===rm.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?yA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(t,r){let s=this._elementInfo.get(r),l=mr(t);!s||!s.checkChildren&&r!==l||this._originChanged(r,this._getFocusOrigin(l),s)}_onBlur(t,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,im),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,im)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xn(this._stopInputModalityDetector)).subscribe(l=>{this._setOrigin(l,!0)}))}_removeGlobalListeners(t){let r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,im),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,im),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){let r=[];return this._elementInfo.forEach((s,l)=>{(l===t||s.checkChildren&&l.contains(t))&&r.push([l,s])}),r}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let l=t.labels;if(l){for(let d=0;d<l.length;d++)if(l[d].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(le(Fe),le(Vt),le(jB),le(nt,8),le(GB,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ya=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(ya||{}),mA="cdk-high-contrast-black-on-white",gA="cdk-high-contrast-white-on-black",SS="cdk-high-contrast-active",CS=(()=>{let e=class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=Re(fA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ya.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,l=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),l){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ya.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ya.BLACK_ON_WHITE}return ya.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(SS,mA,gA),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ya.BLACK_ON_WHITE?t.add(SS,mA):r===ya.WHITE_ON_BLACK&&t.add(SS,gA)}}};e.\u0275fac=function(r){return new(r||e)(le(Vt),le(nt))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),SA=(()=>{let e=class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(le(CS))},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[nm]});let n=e;return n})();function zB(n,e){}var Sa=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var ES=(()=>{let e=class e extends Vl{constructor(t,r,s,l,d,h,p,g){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=l,this._interactivityChecker=d,this._ngZone=h,this._overlayRef=p,this._focusMonitor=g,this._platform=Re(Vt),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Re(Pn),this._injector=Re(Xt),this._isDestroyed=!1,this.attachDomPortal=v=>{this._portalOutlet.hasAttached();let _=this._portalOutlet.attachDomPortal(v);return this._contentAttached(),_},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let r=this._ariaLabelledByQueue.indexOf(t);r>-1&&(this._ariaLabelledByQueue.splice(r,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(r)}_focusByCssSelector(t,r){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,r)}_trapFocus(){this._isDestroyed||co(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,r=null;if(typeof t=="string"?r=this._document.querySelector(t):typeof t=="boolean"?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=yd(),l=this._elementRef.nativeElement;(!s||s===this._document.body||s===l||l.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,r=yd();return t===r||t.contains(r)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=yd()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(K(We),K(om),K(nt,8),K(Sa),K(Ed),K(Fe),K(xo),K(ql))},e.\u0275cmp=Pt({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&vn(wd,7),r&2){let l;lt(l=ct())&&(s._portalOutlet=l.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&gn("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[zt,kt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&ut(0,zB,0,0,"ng-template",0)},dependencies:[wd],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let n=e;return n})(),Td=class{constructor(e,i){this.overlayRef=e,this.config=i,this.closed=new ke,this.disableClose=i.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=i.id,this.keydownEvents.subscribe(t=>{t.keyCode===27&&!this.disableClose&&!Jp(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{i.closeOnOverlayDetachments!==!1&&this.close()})}close(e,i){if(this.containerInstance){let t=this.closed;this.containerInstance._closeInteractionType=i?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(e),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",i=""){return this.overlayRef.updateSize({width:e,height:i}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},HB=new Ie("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=Re(gr);return()=>n.scrollStrategies.block()}}),QB=new Ie("DialogData"),WB=new Ie("DefaultDialogConfig");var $B=0,TS=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,s,l,d,h){this._overlay=t,this._injector=r,this._defaultOptions=s,this._parentDialog=l,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke,this._afterOpenedAtThisLevel=new ke,this._ariaHiddenElements=new Map,this.afterAllClosed=Go(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(zo(void 0))),this._scrollStrategy=h}open(t,r){let s=this._defaultOptions||new Sa;r=Ee(Ee({},s),r),r.id=r.id||`cdk-dialog-${$B++}`,r.id&&this.getDialogById(r.id);let l=this._getOverlayConfig(r),d=this._overlay.create(l),h=new Td(d,r),p=this._attachContainer(d,h,r);return h.containerInstance=p,this._attachDialogContent(t,h,p,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){wS(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){wS(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),wS(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let r=new Id({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,s){let l=s.injector||s.viewContainerRef?.injector,d=[{provide:Sa,useValue:s},{provide:Td,useValue:r},{provide:xo,useValue:t}],h;s.container?typeof s.container=="function"?h=s.container:(h=s.container.type,d.push(...s.container.providers(s))):h=ES;let p=new Ll(h,s.viewContainerRef,Xt.create({parent:l||this._injector,providers:d}),s.componentFactoryResolver);return t.attach(p).instance}_attachDialogContent(t,r,s,l){if(t instanceof Rn){let d=this._createInjector(l,r,s,void 0),h={$implicit:l.data,dialogRef:r};l.templateContext&&(h=Ee(Ee({},h),typeof l.templateContext=="function"?l.templateContext():l.templateContext)),s.attachTemplatePortal(new Nl(t,null,h,d))}else{let d=this._createInjector(l,r,s,this._injector),h=s.attachComponentPortal(new Ll(t,l.viewContainerRef,d,l.componentFactoryResolver));r.componentRef=h,r.componentInstance=h.instance}}_createInjector(t,r,s,l){let d=t.injector||t.viewContainerRef?.injector,h=[{provide:QB,useValue:t.data},{provide:Td,useValue:r}];return t.providers&&(typeof t.providers=="function"?h.push(...t.providers(r,t,s)):h.push(...t.providers)),t.direction&&(!d||!d.get(yi,null,{optional:!0}))&&h.push({provide:yi,useValue:{value:t.direction,change:hn()}}),Xt.create({parent:d||l,providers:h})}_removeOpenDialog(t,r){let s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((l,d)=>{l?d.setAttribute("aria-hidden",l):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let r=t.parentElement.children;for(let s=r.length-1;s>-1;s--){let l=r[s];l!==t&&l.nodeName!=="SCRIPT"&&l.nodeName!=="STYLE"&&!l.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(l,l.getAttribute("aria-hidden")),l.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(le(gr),le(Xt),le(WB,8),le(e,12),le(Bl),le(HB))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function wS(n,e){let i=n.length;for(;i--;)e(n[i])}var bA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({providers:[TS],imports:[tm,ma,SA,ma]});let n=e;return n})();var EA=(()=>{let e=class e{};e.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",e.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",e.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",e.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";let n=e;return n})(),TA=(()=>{let e=class e{};e.COMPLEX="375ms",e.ENTERING="225ms",e.EXITING="195ms";let n=e;return n})();function YB(){return!0}var XB=new Ie("mat-sanity-checks",{providedIn:"root",factory:YB}),sn=(()=>{let e=class e{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return Sd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[t]}};e.\u0275fac=function(r){return new(r||e)(le(CS),le(XB,8),le(nt))},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[ms,ms]});let n=e;return n})();var am=class{constructor(e,i,t,r,s){this._defaultMatcher=e,this.ngControl=i,this._parentFormGroup=t,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let e=this.errorState,i=this._parentFormGroup||this._parentForm,t=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=t?.isErrorState(r,i)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var xA=(()=>{let e=class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Si=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Si||{}),xS=class{constructor(e,i,t,r=!1){this._renderer=e,this.element=i,this.config=t,this._animationForciblyDisabledThroughCss=r,this.state=Si.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},_A=ps({passive:!0,capture:!0}),AS=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let i=mr(e);i&&this._events.get(e.type)?.forEach((t,r)=>{(r===i||r.contains(i))&&t.forEach(s=>s.handleEvent(e))})}}addHandler(e,i,t,r){let s=this._events.get(i);if(s){let l=s.get(t);l?l.add(r):s.set(t,new Set([r]))}else this._events.set(i,new Map([[t,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(i,this._delegateEventHandler,_A)})}removeHandler(e,i,t){let r=this._events.get(e);if(!r)return;let s=r.get(i);s&&(s.delete(t),s.size===0&&r.delete(i),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,_A)))}},DA={enterDuration:225,exitDuration:150},ZB=800,CA=ps({passive:!0,capture:!0}),wA=["mousedown","touchstart"],IA=["mouseup","mouseleave","touchend","touchcancel"],xd=class xd{constructor(e,i,t,r){this._target=e,this._ngZone=i,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Xi(t))}fadeInRipple(e,i,t={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Ee(Ee({},DA),t.animation);t.centered&&(e=r.left+r.width/2,i=r.top+r.height/2);let l=t.radius||KB(e,i,r),d=e-r.left,h=i-r.top,p=s.enterDuration,g=document.createElement("div");g.classList.add("mat-ripple-element"),g.style.left=`${d-l}px`,g.style.top=`${h-l}px`,g.style.height=`${l*2}px`,g.style.width=`${l*2}px`,t.color!=null&&(g.style.backgroundColor=t.color),g.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(g);let v=window.getComputedStyle(g),_=v.transitionProperty,b=v.transitionDuration,C=_==="none"||b==="0s"||b==="0s, 0s"||r.width===0&&r.height===0,w=new xS(this,g,t,C);g.style.transform="scale3d(1, 1, 1)",w.state=Si.FADING_IN,t.persistent||(this._mostRecentTransientRipple=w);let x=null;return!C&&(p||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{x&&(x.fallbackTimer=null),clearTimeout(k),this._finishRippleTransition(w)},F=()=>this._destroyRipple(w),k=setTimeout(F,p+100);g.addEventListener("transitionend",M),g.addEventListener("transitioncancel",F),x={onTransitionEnd:M,onTransitionCancel:F,fallbackTimer:k}}),this._activeRipples.set(w,x),(C||!p)&&this._finishRippleTransition(w),w}fadeOutRipple(e){if(e.state===Si.FADING_OUT||e.state===Si.HIDDEN)return;let i=e.element,t=Ee(Ee({},DA),e.config.animation);i.style.transitionDuration=`${t.exitDuration}ms`,i.style.opacity="0",e.state=Si.FADING_OUT,(e._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let i=Xi(e);!this._platform.isBrowser||!i||i===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=i,wA.forEach(t=>{xd._eventManager.addHandler(this._ngZone,t,i,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{IA.forEach(i=>{this._triggerElement.addEventListener(i,this,CA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Si.FADING_IN?this._startFadeOutTransition(e):e.state===Si.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let i=e===this._mostRecentTransientRipple,{persistent:t}=e.config;e.state=Si.VISIBLE,!t&&(!i||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let i=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Si.HIDDEN,i!==null&&(e.element.removeEventListener("transitionend",i.onTransitionEnd),e.element.removeEventListener("transitioncancel",i.onTransitionCancel),i.fallbackTimer!==null&&clearTimeout(i.fallbackTimer)),e.element.remove()}_onMousedown(e){let i=_S(e),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+ZB;!this._target.rippleDisabled&&!i&&!t&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!DS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let i=e.changedTouches;if(i)for(let t=0;t<i.length;t++)this.fadeInRipple(i[t].clientX,i[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let i=e.state===Si.VISIBLE||e.config.terminateOnPointerUp&&e.state===Si.FADING_IN;!e.config.persistent&&i&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(wA.forEach(i=>xd._eventManager.removeHandler(i,e,this)),this._pointerUpEventsRegistered&&(IA.forEach(i=>e.removeEventListener(i,this,CA)),this._pointerUpEventsRegistered=!1))}};xd._eventManager=new AS;var MS=xd;function KB(n,e,i){let t=Math.max(Math.abs(n-i.left),Math.abs(n-i.right)),r=Math.max(Math.abs(e-i.top),Math.abs(e-i.bottom));return Math.sqrt(t*t+r*r)}var RS=new Ie("mat-ripple-global-options"),Ad=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,l,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=l||{},this._rippleRenderer=new MS(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Ee(Ee(Ee({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,r,Ee(Ee({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,Ee(Ee({},this.rippleConfig),t))}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Fe),K(Vt),K(RS,8),K(ei,8))},e.\u0275dir=Ue({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Ut("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=e;return n})(),jl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,sn]});let n=e;return n})(),AA=(()=>{let e=class e{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}};e.\u0275fac=function(r){return new(r||e)(K(ei,8))},e.\u0275cmp=Pt({type:e,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,s){r&2&&Ut("mat-pseudo-checkbox-indeterminate",s.state==="indeterminate")("mat-pseudo-checkbox-checked",s.state==="checked")("mat-pseudo-checkbox-disabled",s.disabled)("mat-pseudo-checkbox-minimal",s.appearance==="minimal")("mat-pseudo-checkbox-full",s.appearance==="full")("_mat-animation-noopable",s._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[kt],decls:0,vars:0,template:function(r,s){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0});let n=e;return n})();function eU(n,e){}var Md=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},OS="mdc-dialog--open",MA="mdc-dialog--opening",RA="mdc-dialog--closing",tU=150,nU=75,iU=(()=>{let e=class e extends ES{constructor(t,r,s,l,d,h,p,g,v){super(t,r,s,l,d,h,p,v),this._animationMode=g,this._animationStateChanged=new ht,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?PA(this._config.enterAnimationDuration)??tU:0,this._exitAnimationDuration=this._animationsEnabled?PA(this._config.exitAnimationDuration)??nU:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(OA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(MA,OS)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(OS),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(OS),this._animationsEnabled?(this._hostElement.style.setProperty(OA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(RA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(MA,RA)}_waitForAnimationToComplete(t,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let r=super.attachComponentPortal(t);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(K(We),K(om),K(nt,8),K(Md),K(Ed),K(Fe),K(xo),K(ei,8),K(ql))},e.\u0275cmp=Pt({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,s){r&2&&(uo("id",s._config.id),gn("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),Ut("_mat-animation-noopable",!s._animationsEnabled)("mat-mdc-dialog-container-with-actions",s._actionSectionCount>0))},standalone:!0,features:[zt,kt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(Pe(0,"div",0)(1,"div",1),ut(2,eU,0,0,"ng-template",2),Ve()())},dependencies:[wd],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2});let n=e;return n})(),OA="--mat-dialog-transition-duration";function PA(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?Al(n.substring(0,n.length-2)):n.endsWith("s")?Al(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var lm=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(lm||{}),Gl=class{constructor(e,i,t){this._ref=e,this._containerInstance=t,this._afterOpened=new ke,this._beforeClosed=new ke,this._state=lm.OPEN,this.disableClose=i.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),t._animationStateChanged.pipe(wn(r=>r.state==="opened"),qn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(wn(r=>r.state==="closed"),qn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),wi(this.backdropClick(),this.keydownEvents().pipe(wn(r=>r.keyCode===27&&!this.disableClose&&!Jp(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),rU(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(wn(i=>i.state==="closing"),qn(1)).subscribe(i=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),i.totalTime+100)}),this._state=lm.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let i=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?i.left(e.left):i.right(e.right):i.centerHorizontally(),e&&(e.top||e.bottom)?e.top?i.top(e.top):i.bottom(e.bottom):i.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",i=""){return this._ref.updateSize(e,i),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=lm.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function rU(n,e,i){return n._closeInteractionType=e,n.close(i)}var PS=new Ie("MatMdcDialogData"),oU=new Ie("mat-mdc-dialog-default-options"),sU=new Ie("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=Re(gr);return()=>n.scrollStrategies.block()}});var aU=0,cm=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,s,l,d,h,p,g){this._overlay=t,this._defaultOptions=l,this._scrollStrategy=d,this._parentDialog=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke,this._afterOpenedAtThisLevel=new ke,this.dialogConfigClass=Md,this.afterAllClosed=Go(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(zo(void 0))),this._dialog=r.get(TS),this._dialogRefConstructor=Gl,this._dialogContainerType=iU,this._dialogDataToken=PS}open(t,r){let s;r=Ee(Ee({},this._defaultOptions||new Md),r),r.id=r.id||`mat-mdc-dialog-${aU++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let l=this._dialog.open(t,nn(Ee({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:Sa,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(d,h,p)=>(s=new this._dialogRefConstructor(d,r,p),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=l.componentRef,s.componentInstance=l.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let d=this.openDialogs.indexOf(s);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}};e.\u0275fac=function(r){return new(r||e)(le(gr),le(Xt),le(Pc,8),le(oU,8),le(sU),le(e,12),le(Bl),le(ei,8))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),lU=0;var cU=(()=>{let e=class e{constructor(t,r,s){this._dialogRef=t,this._elementRef=r,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=dU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}};e.\u0275fac=function(r){return new(r||e)(K(Gl,8),K(We),K(cm))},e.\u0275dir=Ue({type:e,standalone:!0});let n=e;return n})(),FA=(()=>{let e=class e extends cU{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${lU++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,s){r&2&&uo("id",s.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[zt]});let n=e;return n})(),kA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[Vw([tA])]});let n=e;return n})();function dU(n,e){let i=n.nativeElement.parentElement;for(;i&&!i.classList.contains("mat-mdc-dialog-container");)i=i.parentElement;return i?e.find(t=>t.id===i.id):null}var LA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({providers:[cm],imports:[bA,tm,ma,sn,sn]});let n=e;return n})();var hU=new Ie("MAT_SORT_DEFAULT_OPTIONS"),NA=(()=>{let e=class e{get direction(){return this._direction}set direction(t){this._direction=t}constructor(t){this._defaultOptions=t,this._initializedStream=new Ms(1),this.sortables=new Map,this._stateChanges=new ke,this.start="asc",this._direction="",this.disabled=!1,this.sortChange=new ht,this.initialized=this._initializedStream}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let r=t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,s=fU(t.start||this.start,r),l=s.indexOf(this.direction)+1;return l>=s.length&&(l=0),s[l]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}};e.\u0275fac=function(r){return new(r||e)(K(hU,8))},e.\u0275dir=Ue({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",Rt],disabled:[2,"matSortDisabled","disabled",Rt]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],standalone:!0,features:[cn,Jn]});let n=e;return n})();function fU(n,e){let i=["asc","desc"];return n=="desc"&&i.reverse(),e||i.push(""),i}var Ute=TA.ENTERING+" "+EA.STANDARD_CURVE;var mU=[[["caption"]],[["colgroup"],["col"]],"*"],gU=["caption","colgroup, col","*"];function vU(n,e){n&1&&Zt(0,2)}function yU(n,e){n&1&&(Pe(0,"thead",0),vi(1,1),Ve(),Pe(2,"tbody",0),vi(3,2)(4,3),Ve(),Pe(5,"tfoot",0),vi(6,4),Ve())}function SU(n,e){n&1&&vi(0,1)(1,2)(2,3)(3,4)}var vr=new Ie("CDK_TABLE");var mm=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(K(Rn))},e.\u0275dir=Ue({type:e,selectors:[["","cdkCellDef",""]],standalone:!0});let n=e;return n})(),gm=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(K(Rn))},e.\u0275dir=Ue({type:e,selectors:[["","cdkHeaderCellDef",""]],standalone:!0});let n=e;return n})(),UA=(()=>{let e=class e{constructor(t){this.template=t}};e.\u0275fac=function(r){return new(r||e)(K(Rn))},e.\u0275dir=Ue({type:e,selectors:[["","cdkFooterCellDef",""]],standalone:!0});let n=e;return n})(),zl=(()=>{let e=class e{get name(){return this._name}set name(t){this._setNameInput(t)}get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(t){t!==this._stickyEnd&&(this._stickyEnd=t,this._hasStickyChanged=!0)}constructor(t){this._table=t,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}};e.\u0275fac=function(r){return new(r||e)(K(vr,8))},e.\u0275dir=Ue({type:e,selectors:[["","cdkColumnDef",""]],contentQueries:function(r,s,l){if(r&1&&(jn(l,mm,5),jn(l,gm,5),jn(l,UA,5)),r&2){let d;lt(d=ct())&&(s.cell=d.first),lt(d=ct())&&(s.headerCell=d.first),lt(d=ct())&&(s.footerCell=d.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",Rt],stickyEnd:[2,"stickyEnd","stickyEnd",Rt]},standalone:!0,features:[Kt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),cn]});let n=e;return n})(),um=class{constructor(e,i){i.nativeElement.classList.add(...e._columnCssClassName)}},qA=(()=>{let e=class e extends um{constructor(t,r){super(t,r)}};e.\u0275fac=function(r){return new(r||e)(K(zl),K(We))},e.\u0275dir=Ue({type:e,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[zt]});let n=e;return n})();var jA=(()=>{let e=class e extends um{constructor(t,r){super(t,r);let s=t._table?._getCellRole();s&&r.nativeElement.setAttribute("role",s)}};e.\u0275fac=function(r){return new(r||e)(K(zl),K(We))},e.\u0275dir=Ue({type:e,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[zt]});let n=e;return n})(),hm=class{constructor(){this.tasks=[],this.endTasks=[]}},fm=new Ie("_COALESCED_STYLE_SCHEDULER"),kS=(()=>{let e=class e{constructor(t){this._currentSchedule=null,this._ngZone=Re(Fe)}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new hm,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let t=this._currentSchedule;this._currentSchedule=new hm;for(let r of t.tasks)r();for(let r of t.endTasks)r()}this._currentSchedule=null})))}};e.\u0275fac=function(r){return new(r||e)(le(Fe))},e.\u0275prov=xe({token:e,factory:e.\u0275fac});let n=e;return n})();var LS=(()=>{let e=class e{constructor(t,r){this.template=t,this._differs=r}ngOnChanges(t){if(!this._columnsDiffer){let r=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(r).create(),this._columnsDiffer.diff(r)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof Rd?t.headerCell.template:this instanceof NS?t.footerCell.template:t.cell.template}};e.\u0275fac=function(r){return new(r||e)(K(Rn),K(kr))},e.\u0275dir=Ue({type:e,features:[Jn]});let n=e;return n})(),Rd=(()=>{let e=class e extends LS{get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}constructor(t,r,s){super(t,r),this._table=s,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(t){super.ngOnChanges(t)}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}};e.\u0275fac=function(r){return new(r||e)(K(Rn),K(kr),K(vr,8))},e.\u0275dir=Ue({type:e,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",Rt]},standalone:!0,features:[cn,zt,Jn]});let n=e;return n})(),NS=(()=>{let e=class e extends LS{get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}constructor(t,r,s){super(t,r),this._table=s,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(t){super.ngOnChanges(t)}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}};e.\u0275fac=function(r){return new(r||e)(K(Rn),K(kr),K(vr,8))},e.\u0275dir=Ue({type:e,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",Rt]},standalone:!0,features:[cn,zt,Jn]});let n=e;return n})(),vm=(()=>{let e=class e extends LS{constructor(t,r,s){super(t,r),this._table=s}};e.\u0275fac=function(r){return new(r||e)(K(Rn),K(kr),K(vr,8))},e.\u0275dir=Ue({type:e,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},standalone:!0,features:[zt]});let n=e;return n})(),ba=(()=>{let e=class e{constructor(t){this._viewContainer=t,e.mostRecentCellOutlet=this}ngOnDestroy(){e.mostRecentCellOutlet===this&&(e.mostRecentCellOutlet=null)}};e.mostRecentCellOutlet=null,e.\u0275fac=function(r){return new(r||e)(K(ti))},e.\u0275dir=Ue({type:e,selectors:[["","cdkCellOutlet",""]],standalone:!0});let n=e;return n})(),VS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pt({type:e,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[kt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,s){r&1&&vi(0,0)},dependencies:[ba],encapsulation:2});let n=e;return n})();var BS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Pt({type:e,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[kt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,s){r&1&&vi(0,0)},dependencies:[ba],encapsulation:2});let n=e;return n})(),GA=(()=>{let e=class e{constructor(t){this.templateRef=t,this._contentClassName="cdk-no-data-row"}};e.\u0275fac=function(r){return new(r||e)(K(Rn))},e.\u0275dir=Ue({type:e,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0});let n=e;return n})(),VA=["top","bottom","left","right"],FS=class{constructor(e,i,t,r,s=!0,l=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=i,this.direction=t,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=d,this._elemSizeCache=new WeakMap,this._resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(h=>this._updateCachedSizes(h)):null,this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null,this._cachedCellWidths=[],this._borderCellCss={top:`${i}-border-elem-top`,bottom:`${i}-border-elem-bottom`,left:`${i}-border-elem-left`,right:`${i}-border-elem-right`}}clearStickyPositioning(e,i){(i.includes("left")||i.includes("right"))&&this._removeFromStickyColumnReplayQueue(e);let t=[];for(let r of e)if(r.nodeType===r.ELEMENT_NODE){t.push(r);for(let s=0;s<r.children.length;s++)t.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(let r of t)this._removeStickyStyle(r,i)})}updateStickyColumns(e,i,t,r=!0,s=!0){if(s&&this._updateStickyColumnReplayQueue({rows:[...e],stickyStartStates:[...i],stickyEndStates:[...t]}),!e.length||!this._isBrowser||!(i.some(l=>l)||t.some(l=>l))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let l=e[0],d=l.children.length,h=this._getCellWidths(l,r),p=this._getStickyStartColumnPositions(h,i),g=this._getStickyEndColumnPositions(h,t),v=i.lastIndexOf(!0),_=t.indexOf(!0),b=this.direction==="rtl",C=b?"right":"left",w=b?"left":"right";for(let x of e)for(let M=0;M<d;M++){let F=x.children[M];i[M]&&this._addStickyStyle(F,C,p[M],M===v),t[M]&&this._addStickyStyle(F,w,g[M],M===_)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:v===-1?[]:h.slice(0,v+1).map((x,M)=>i[M]?x:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:_===-1?[]:h.slice(_).map((x,M)=>t[M+_]?x:null).reverse()}))})}stickRows(e,i,t){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let r=t==="bottom"?e.slice().reverse():e,s=t==="bottom"?i.slice().reverse():i,l=[],d=[],h=[];for(let g=0,v=0;g<r.length;g++){if(!s[g])continue;l[g]=v;let _=r[g];h[g]=this._isNativeHtmlTable?Array.from(_.children):[_];let b=this._retrieveElementSize(_).height;v+=b,d[g]=b}let p=s.lastIndexOf(!0);for(let g=0;g<r.length;g++){if(!s[g])continue;let v=l[g],_=g===p;for(let b of h[g])this._addStickyStyle(b,t,v,_)}t==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:d,offsets:l,elements:h}):this._positionListener?.stickyFooterRowsUpdated({sizes:d,offsets:l,elements:h})})}updateStickyFooterContainer(e,i){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let t=e.querySelector("tfoot");t&&(i.some(r=>!r)?this._removeStickyStyle(t,["bottom"]):this._addStickyStyle(t,"bottom",0,!1))})}_removeStickyStyle(e,i){for(let r of i)e.style[r]="",e.classList.remove(this._borderCellCss[r]);VA.some(r=>i.indexOf(r)===-1&&e.style[r])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,i,t,r){e.classList.add(this._stickCellCss),r&&e.classList.add(this._borderCellCss[i]),e.style[i]=`${t}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){let i={top:100,bottom:10,left:1,right:1},t=0;for(let r of VA)e.style[r]&&(t+=i[r]);return t?`${t}`:""}_getCellWidths(e,i=!0){if(!i&&this._cachedCellWidths.length)return this._cachedCellWidths;let t=[],r=e.children;for(let s=0;s<r.length;s++){let l=r[s];t.push(this._retrieveElementSize(l).width)}return this._cachedCellWidths=t,t}_getStickyStartColumnPositions(e,i){let t=[],r=0;for(let s=0;s<e.length;s++)i[s]&&(t[s]=r,r+=e[s]);return t}_getStickyEndColumnPositions(e,i){let t=[],r=0;for(let s=e.length;s>0;s--)i[s]&&(t[s]=r,r+=e[s]);return t}_retrieveElementSize(e){let i=this._elemSizeCache.get(e);if(i)return i;let t=e.getBoundingClientRect(),r={width:t.width,height:t.height};return this._resizeObserver&&(this._elemSizeCache.set(e,r),this._resizeObserver.observe(e,{box:"border-box"})),r}_updateStickyColumnReplayQueue(e){this._removeFromStickyColumnReplayQueue(e.rows),!this._stickyColumnsReplayTimeout&&this._updatedStickyColumnsParamsToReplay.push(e)}_removeFromStickyColumnReplayQueue(e){let i=new Set(e);for(let t of this._updatedStickyColumnsParamsToReplay)t.rows=t.rows.filter(r=>!i.has(r));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(t=>!!t.rows.length)}_updateCachedSizes(e){let i=!1;for(let t of e){let r=t.borderBoxSize?.length?{width:t.borderBoxSize[0].inlineSize,height:t.borderBoxSize[0].blockSize}:{width:t.contentRect.width,height:t.contentRect.height};r.width!==this._elemSizeCache.get(t.target)?.width&&bU(t.target)&&(i=!0),this._elemSizeCache.set(t.target,r)}i&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{for(let t of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(t.rows,t.stickyStartStates,t.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null},0))}};function bU(n){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(e=>n.classList.contains(e))}var pm=new Ie("CDK_SPL");var US=(()=>{let e=class e{constructor(t,r){this.viewContainer=t,this.elementRef=r;let s=Re(vr);s._rowOutlet=this,s._outletAssigned()}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(We))},e.\u0275dir=Ue({type:e,selectors:[["","rowOutlet",""]],standalone:!0});let n=e;return n})(),qS=(()=>{let e=class e{constructor(t,r){this.viewContainer=t,this.elementRef=r;let s=Re(vr);s._headerRowOutlet=this,s._outletAssigned()}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(We))},e.\u0275dir=Ue({type:e,selectors:[["","headerRowOutlet",""]],standalone:!0});let n=e;return n})(),jS=(()=>{let e=class e{constructor(t,r){this.viewContainer=t,this.elementRef=r;let s=Re(vr);s._footerRowOutlet=this,s._outletAssigned()}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(We))},e.\u0275dir=Ue({type:e,selectors:[["","footerRowOutlet",""]],standalone:!0});let n=e;return n})(),GS=(()=>{let e=class e{constructor(t,r){this.viewContainer=t,this.elementRef=r;let s=Re(vr);s._noDataRowOutlet=this,s._outletAssigned()}};e.\u0275fac=function(r){return new(r||e)(K(ti),K(We))},e.\u0275dir=Ue({type:e,selectors:[["","noDataRowOutlet",""]],standalone:!0});let n=e;return n})();var zS=(()=>{let e=class e{_getCellRole(){if(this._cellRoleInternal===void 0){let t=this._elementRef.nativeElement.getAttribute("role"),r=t==="grid"||t==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&r==="cell"?null:r}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=t,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=t,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(t,r,s,l,d,h,p,g,v,_,b,C){this._differs=t,this._changeDetectorRef=r,this._elementRef=s,this._dir=d,this._platform=p,this._viewRepeater=g,this._coalescedStyleScheduler=v,this._viewportRuler=_,this._stickyPositioningListener=b,this._onDestroy=new ke,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new ht,this.viewChange=new Ai({start:0,end:Number.MAX_VALUE}),this._injector=Re(Xt),l||s.nativeElement.setAttribute("role","table"),this._document=h,this._isServer=!p.isBrowser,this._isNativeHtmlTable=s.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((t,r)=>this.trackBy?this.trackBy(r.dataIndex,r.data):r),this._viewportRuler.change().pipe(Xn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Zp(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let t=this._dataDiffer.diff(this._renderRows);if(!t){this._updateNoDataRow(),this.contentChanged.next();return}let r=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,r,(s,l,d)=>this._getEmbeddedViewArgs(s.item,d),s=>s.item.data,s=>{s.operation===Fl.INSERTED&&s.context&&this._renderCellTemplateForItem(s.record.item.rowDef,s.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(s=>{let l=r.get(s.currentIndex);l.context.$implicit=s.item.data}),this._updateNoDataRow(),co(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){let t=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let s=BA(this._headerRowOutlet,"thead");s&&(s.style.display=t.length?"":"none")}let r=this._headerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,r,"top"),this._headerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyFooterRowStyles(){let t=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let s=BA(this._footerRowOutlet,"tfoot");s&&(s.style.display=t.length?"":"none")}let r=this._footerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,r,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,r),this._footerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyColumnStyles(){let t=this._getRenderedRows(this._headerRowOutlet),r=this._getRenderedRows(this._rowOutlet),s=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...r,...s],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((l,d)=>{this._addStickyColumnStyles([l],this._headerRowDefs[d])}),this._rowDefs.forEach(l=>{let d=[];for(let h=0;h<r.length;h++)this._renderRows[h].rowDef===l&&d.push(r[h]);this._addStickyColumnStyles(d,l)}),s.forEach((l,d)=>{this._addStickyColumnStyles([l],this._footerRowDefs[d])}),Array.from(this._columnDefsByName.values()).forEach(l=>l.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let r=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||r,this._forceRecalculateCellWidths=r,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let t=[],r=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let s=0;s<this._data.length;s++){let l=this._data[s],d=this._getRenderRowsForData(l,s,r.get(l));this._cachedRenderRowsMap.has(l)||this._cachedRenderRowsMap.set(l,new WeakMap);for(let h=0;h<d.length;h++){let p=d[h],g=this._cachedRenderRowsMap.get(p.data);g.has(p.rowDef)?g.get(p.rowDef).push(p):g.set(p.rowDef,[p]),t.push(p)}}return t}_getRenderRowsForData(t,r,s){return this._getRowDefs(t,r).map(d=>{let h=s&&s.has(d)?s.get(d):[];if(h.length){let p=h.shift();return p.dataIndex=r,p}else return{data:t,rowDef:d,dataIndex:r}})}_cacheColumnDefs(){this._columnDefsByName.clear(),dm(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(r=>{this._columnDefsByName.has(r.name),this._columnDefsByName.set(r.name,r)})}_cacheRowDefs(){this._headerRowDefs=dm(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=dm(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=dm(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let t=this._rowDefs.filter(r=>!r.when);!this.multiTemplateDataRows&&t.length>1,this._defaultRowDef=t[0]}_renderUpdatedColumns(){let t=(d,h)=>d||!!h.getColumnsDiff(),r=this._rowDefs.reduce(t,!1);r&&this._forceRenderDataRows();let s=this._headerRowDefs.reduce(t,!1);s&&this._forceRenderHeaderRows();let l=this._footerRowDefs.reduce(t,!1);return l&&this._forceRenderFooterRows(),r||s||l}_switchDataSource(t){this._data=[],Zp(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;Zp(this.dataSource)?t=this.dataSource.connect(this):ka(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=hn(this.dataSource)),this._renderChangeSubscription=t.pipe(Xn(this._onDestroy)).subscribe(r=>{this._data=r||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,r)=>this._renderRow(this._headerRowOutlet,t,r)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,r)=>this._renderRow(this._footerRowOutlet,t,r)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,r){let s=Array.from(r.columns||[]).map(h=>{let p=this._columnDefsByName.get(h);return p}),l=s.map(h=>h.sticky),d=s.map(h=>h.stickyEnd);this._stickyStyler.updateStickyColumns(t,l,d,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){let r=[];for(let s=0;s<t.viewContainer.length;s++){let l=t.viewContainer.get(s);r.push(l.rootNodes[0])}return r}_getRowDefs(t,r){if(this._rowDefs.length==1)return[this._rowDefs[0]];let s=[];if(this.multiTemplateDataRows)s=this._rowDefs.filter(l=>!l.when||l.when(r,t));else{let l=this._rowDefs.find(d=>d.when&&d.when(r,t))||this._defaultRowDef;l&&s.push(l)}return s.length,s}_getEmbeddedViewArgs(t,r){let s=t.rowDef,l={$implicit:t.data};return{templateRef:s.template,context:l,index:r}}_renderRow(t,r,s,l={}){let d=t.viewContainer.createEmbeddedView(r.template,l,s);return this._renderCellTemplateForItem(r,l),d}_renderCellTemplateForItem(t,r){for(let s of this._getCellTemplates(t))ba.mostRecentCellOutlet&&ba.mostRecentCellOutlet._viewContainer.createEmbeddedView(s,r);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let t=this._rowOutlet.viewContainer;for(let r=0,s=t.length;r<s;r++){let d=t.get(r).context;d.count=s,d.first=r===0,d.last=r===s-1,d.even=r%2===0,d.odd=!d.even,this.multiTemplateDataRows?(d.dataIndex=this._renderRows[r].dataIndex,d.renderIndex=r):d.index=this._renderRows[r].dataIndex}}_getCellTemplates(t){return!t||!t.columns?[]:Array.from(t.columns,r=>{let s=this._columnDefsByName.get(r);return t.extractCellTemplate(s)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let t=(r,s)=>r||s.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let t=this._dir?this._dir.value:"ltr";this._stickyStyler=new FS(this._isNativeHtmlTable,this.stickyCssClass,t,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:hn()).pipe(Xn(this._onDestroy)).subscribe(r=>{this._stickyStyler.direction=r,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(r=>!r._table||r._table===this)}_updateNoDataRow(){let t=this._customNoDataRow||this._noDataRow;if(!t)return;let r=this._rowOutlet.viewContainer.length===0;if(r===this._isShowingNoDataRow)return;let s=this._noDataRowOutlet.viewContainer;if(r){let l=s.createEmbeddedView(t.templateRef),d=l.rootNodes[0];l.rootNodes.length===1&&d?.nodeType===this._document.ELEMENT_NODE&&(d.setAttribute("role","row"),d.classList.add(t._contentClassName))}else s.clear();this._isShowingNoDataRow=r,this._changeDetectorRef.markForCheck()}};e.\u0275fac=function(r){return new(r||e)(K(kr),K(Pn),K(We),Jo("role"),K(yi,8),K(nt),K(Vt),K(bd),K(fm),K(_d),K(pm,12),K(Fe,8))},e.\u0275cmp=Pt({type:e,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(r,s,l){if(r&1&&(jn(l,GA,5),jn(l,zl,5),jn(l,vm,5),jn(l,Rd,5),jn(l,NS,5)),r&2){let d;lt(d=ct())&&(s._noDataRow=d.first),lt(d=ct())&&(s._contentColumnDefs=d),lt(d=ct())&&(s._contentRowDefs=d),lt(d=ct())&&(s._contentHeaderRowDefs=d),lt(d=ct())&&(s._contentFooterRowDefs=d)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(r,s){r&2&&Ut("cdk-table-fixed-layout",s.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",Rt],fixedLayout:[2,"fixedLayout","fixedLayout",Rt]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[Kt([{provide:vr,useExisting:e},{provide:bd,useClass:kl},{provide:fm,useClass:kS},{provide:pm,useValue:null}]),cn,kt],ngContentSelectors:gU,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,s){r&1&&(ni(mU),Zt(0),Zt(1,1),ut(2,vU,1,0)(3,yU,7,0)(4,SU,4,0)),r&2&&(Ge(2),qt(s._isServer?2:-1),Ge(),qt(s._isNativeHtmlTable?3:4))},dependencies:[qS,US,GS,jS],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2});let n=e;return n})();function dm(n,e){return n.concat(Array.from(e))}function BA(n,e){let i=e.toUpperCase(),t=n.viewContainer.element.nativeElement;for(;t;){let r=t.nodeType===1?t.nodeName:null;if(r===i)return t;if(r==="TABLE")break;t=t.parentNode}return null}var zA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[Dd]});let n=e;return n})();var _U=[[["caption"]],[["colgroup"],["col"]],"*"],DU=["caption","colgroup, col","*"];function CU(n,e){n&1&&Zt(0,2)}function wU(n,e){n&1&&(Pe(0,"thead",0),vi(1,1),Ve(),Pe(2,"tbody",2),vi(3,3)(4,4),Ve(),Pe(5,"tfoot",0),vi(6,5),Ve())}function IU(n,e){n&1&&vi(0,1)(1,3)(2,4)(3,5)}var HA=(()=>{let e=class e extends zS{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275cmp=Pt({type:e,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(r,s){r&2&&Ut("mdc-table-fixed-layout",s.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[Kt([{provide:zS,useExisting:e},{provide:vr,useExisting:e},{provide:fm,useClass:kS},{provide:bd,useClass:kl},{provide:pm,useValue:null}]),zt,kt],ngContentSelectors:DU,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(r,s){r&1&&(ni(_U),Zt(0),Zt(1,1),ut(2,CU,1,0)(3,wU,7,0)(4,IU,4,0)),r&2&&(Ge(2),qt(s._isServer?2:-1),Ge(),qt(s._isNativeHtmlTable?3:4))},dependencies:[qS,US,GS,jS],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-app-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-app-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-app-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-app-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-app-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-app-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-app-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-app-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-app-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-app-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-app-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-app-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2});let n=e;return n})(),QA=(()=>{let e=class e extends mm{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","matCellDef",""]],standalone:!0,features:[Kt([{provide:mm,useExisting:e}]),zt]});let n=e;return n})(),WA=(()=>{let e=class e extends gm{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[Kt([{provide:gm,useExisting:e}]),zt]});let n=e;return n})();var $A=(()=>{let e=class e extends zl{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},standalone:!0,features:[Kt([{provide:zl,useExisting:e},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:e}]),zt]});let n=e;return n})(),YA=(()=>{let e=class e extends qA{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[zt]});let n=e;return n})();var XA=(()=>{let e=class e extends jA{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[zt]});let n=e;return n})();var ZA=(()=>{let e=class e extends Rd{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",Rt]},standalone:!0,features:[Kt([{provide:Rd,useExisting:e}]),cn,zt]});let n=e;return n})();var KA=(()=>{let e=class e extends vm{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275dir=Ue({type:e,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},standalone:!0,features:[Kt([{provide:vm,useExisting:e}]),zt]});let n=e;return n})(),JA=(()=>{let e=class e extends VS{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275cmp=Pt({type:e,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[Kt([{provide:VS,useExisting:e}]),zt,kt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,s){r&1&&vi(0,0)},dependencies:[ba],encapsulation:2});let n=e;return n})();var e5=(()=>{let e=class e extends BS{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=gi(e)))(s||e)}})(),e.\u0275cmp=Pt({type:e,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[Kt([{provide:BS,useExisting:e}]),zt,kt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(r,s){r&1&&vi(0,0)},dependencies:[ba],encapsulation:2});let n=e;return n})();var t5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,zA,sn]});let n=e;return n})(),EU=9007199254740991,ym=class extends Yp{get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}constructor(e=[]){super(),this._renderData=new Ai([]),this._filter=new Ai(""),this._internalPageChanges=new ke,this._renderChangesSubscription=null,this.sortingDataAccessor=(i,t)=>{let r=i[t];if(oS(r)){let s=Number(r);return s<EU?s:r}return r},this.sortData=(i,t)=>{let r=t.active,s=t.direction;return!r||s==""?i:i.sort((l,d)=>{let h=this.sortingDataAccessor(l,r),p=this.sortingDataAccessor(d,r),g=typeof h,v=typeof p;g!==v&&(g==="number"&&(h+=""),v==="number"&&(p+=""));let _=0;return h!=null&&p!=null?h>p?_=1:h<p&&(_=-1):h!=null?_=1:p!=null&&(_=-1),_*(s=="asc"?1:-1)})},this.filterPredicate=(i,t)=>{let r=Object.keys(i).reduce((l,d)=>l+i[d]+"\u25EC","").toLowerCase(),s=t.trim().toLowerCase();return r.indexOf(s)!=-1},this._data=new Ai(e),this._updateChangeSubscription()}_updateChangeSubscription(){let e=this._sort?wi(this._sort.sortChange,this._sort.initialized):hn(null),i=this._paginator?wi(this._paginator.page,this._internalPageChanges,this._paginator.initialized):hn(null),t=this._data,r=Fs([t,this._filter]).pipe(Ct(([d])=>this._filterData(d))),s=Fs([r,e]).pipe(Ct(([d])=>this._orderData(d))),l=Fs([s,i]).pipe(Ct(([d])=>this._pageData(d)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=l.subscribe(d=>this._renderData.next(d))}_filterData(e){return this.filteredData=this.filter==null||this.filter===""?e:e.filter(i=>this.filterPredicate(i,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;let i=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(i,i+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{let i=this.paginator;if(i&&(i.length=e,i.pageIndex>0)){let t=Math.ceil(i.length/i.pageSize)-1||0,r=Math.min(i.pageIndex,t);r!==i.pageIndex&&(i.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var Am=new Ie("");function gs(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function l5(n){return n!=null&&typeof n.length=="number"}var c5=new Ie(""),d5=new Ie(""),xU=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bm=class{static min(e){return AU(e)}static max(e){return MU(e)}static required(e){return RU(e)}static requiredTrue(e){return OU(e)}static email(e){return PU(e)}static minLength(e){return FU(e)}static maxLength(e){return kU(e)}static pattern(e){return LU(e)}static nullValidator(e){return u5(e)}static compose(e){return v5(e)}static composeAsync(e){return y5(e)}};function AU(n){return e=>{if(gs(e.value)||gs(n))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<n?{min:{min:n,actual:e.value}}:null}}function MU(n){return e=>{if(gs(e.value)||gs(n))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>n?{max:{max:n,actual:e.value}}:null}}function RU(n){return gs(n.value)?{required:!0}:null}function OU(n){return n.value===!0?null:{required:!0}}function PU(n){return gs(n.value)||xU.test(n.value)?null:{email:!0}}function FU(n){return e=>gs(e.value)||!l5(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function kU(n){return e=>l5(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function LU(n){if(!n)return u5;let e,i;return typeof n=="string"?(i="",n.charAt(0)!=="^"&&(i+="^"),i+=n,n.charAt(n.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=n.toString(),e=n),t=>{if(gs(t.value))return null;let r=t.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function u5(n){return null}function h5(n){return n!=null}function f5(n){return Oc(n)?hi(n):n}function p5(n){let e={};return n.forEach(i=>{e=i!=null?Ee(Ee({},e),i):e}),Object.keys(e).length===0?null:e}function m5(n,e){return e.map(i=>i(n))}function NU(n){return!n.validate}function g5(n){return n.map(e=>NU(e)?e:i=>e.validate(i))}function v5(n){if(!n)return null;let e=n.filter(h5);return e.length==0?null:function(i){return p5(m5(i,e))}}function YS(n){return n!=null?v5(g5(n)):null}function y5(n){if(!n)return null;let e=n.filter(h5);return e.length==0?null:function(i){let t=m5(i,e).map(f5);return hc(t).pipe(Ct(p5))}}function XS(n){return n!=null?y5(g5(n)):null}function n5(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function S5(n){return n._rawValidators}function b5(n){return n._rawAsyncValidators}function HS(n){return n?Array.isArray(n)?n:[n]:[]}function _m(n,e){return Array.isArray(n)?n.includes(e):n===e}function i5(n,e){let i=HS(e);return HS(n).forEach(r=>{_m(i,r)||i.push(r)}),i}function r5(n,e){return HS(e).filter(i=>!_m(n,i))}var Dm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=XS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},Wl=class extends Dm{get formDirective(){return null}get path(){return null}},Cm=class extends Dm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}};var VU={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qne=nn(Ee({},VU),{"[class.ng-submitted]":"isSubmitted"});var Od="VALID",Sm="INVALID",Hl="PENDING",Pd="DISABLED",vs=class{},wm=class extends vs{constructor(e,i){super(),this.value=e,this.source=i}},kd=class extends vs{constructor(e,i){super(),this.pristine=e,this.source=i}},Ld=class extends vs{constructor(e,i){super(),this.touched=e,this.source=i}},Ql=class extends vs{constructor(e,i){super(),this.status=e,this.source=i}},QS=class extends vs{constructor(e){super(),this.source=e}},WS=class extends vs{constructor(e){super(),this.source=e}};function _5(n){return(Mm(n)?n.validators:n)||null}function BU(n){return Array.isArray(n)?YS(n):n||null}function D5(n,e){return(Mm(e)?e.asyncValidators:n)||null}function UU(n){return Array.isArray(n)?XS(n):n||null}function Mm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function qU(n,e,i){let t=n.controls;if(!(e?Object.keys(t):t).length)throw new Me(1e3,"");if(!t[i])throw new Me(1001,"")}function jU(n,e,i){n._forEachChild((t,r)=>{if(i[r]===void 0)throw new Me(1002,"")})}var Im=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=fo(()=>this.statusReactive()),this.statusReactive=lo(void 0),this._pristine=fo(()=>this.pristineReactive()),this.pristineReactive=lo(!0),this._touched=fo(()=>this.touchedReactive()),this.touchedReactive=lo(!1),this._events=new ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Hi(this.statusReactive)}set status(e){Hi(()=>this.statusReactive.set(e))}get valid(){return this.status===Od}get invalid(){return this.status===Sm}get pending(){return this.status==Hl}get disabled(){return this.status===Pd}get enabled(){return this.status!==Pd}get pristine(){return Hi(this.pristineReactive)}set pristine(e){Hi(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Hi(this.touchedReactive)}set touched(e){Hi(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(i5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(i5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(r5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(r5(e,this._rawAsyncValidators))}hasValidator(e){return _m(this._rawValidators,e)}hasAsyncValidator(e){return _m(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let i=this.touched===!1;this.touched=!0;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(nn(Ee({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new Ld(!0,t))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(e))}markAsUntouched(e={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:t})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t),i&&e.emitEvent!==!1&&this._events.next(new Ld(!1,t))}markAsDirty(e={}){let i=this.pristine===!0;this.pristine=!1;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(nn(Ee({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new kd(!1,t))}markAsPristine(e={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&e.emitEvent!==!1&&this._events.next(new kd(!0,t))}markAsPending(e={}){this.status=Hl;let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ql(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(nn(Ee({},e),{sourceControl:i}))}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Pd,this.errors=null,this._forEachChild(r=>{r.disable(nn(Ee({},e),{onlySelf:!0}))}),this._updateValue();let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wm(this.value,t)),this._events.next(new Ql(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(nn(Ee({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Od,this._forEachChild(t=>{t.enable(nn(Ee({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(nn(Ee({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e,i){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Od||this.status===Hl)&&this._runAsyncValidator(t,e.emitEvent)}let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wm(this.value,i)),this._events.next(new Ql(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(nn(Ee({},e),{sourceControl:i}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pd:Od}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,i){if(this.asyncValidator){this.status=Hl,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1};let t=f5(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:i,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((t,r)=>t&&t._find(r),this)}getError(e,i){let t=i?this.get(i):this;return t&&t.errors?t.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,i,t){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||t)&&this._events.next(new Ql(this.status,i)),this._parent&&this._parent._updateControlsErrors(e,i,t)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?Pd:this.errors?Sm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hl)?Hl:this._anyControlsHaveStatus(Sm)?Sm:Od}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,i){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),r&&this._events.next(new kd(this.pristine,i))}_updateTouched(e={},i){this.touched=this._anyControlsTouched(),this._events.next(new Ld(this.touched,i)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=BU(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=UU(this._rawAsyncValidators)}},Em=class extends Im{constructor(e,i,t){super(_5(i),D5(t,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,t={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){jU(this,!0,e),Object.keys(e).forEach(t=>{qU(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(Object.keys(e).forEach(t=>{let r=this.controls[t];r&&r.patchValue(e[t],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((t,r)=>{t.reset(e?e[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,t)=>(e[t]=i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,t)=>t._syncPendingControls()?!0:i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{let t=this.controls[i];t&&e(t,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[i,t]of Object.entries(this.controls))if(this.contains(i)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(i,t,r)=>((t.enabled||this.disabled)&&(i[r]=t.value),i))}_reduceChildren(e,i){let t=e;return this._forEachChild((r,s)=>{t=i(t,r,s)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ZS=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>KS}),KS="always";function $S(n,e,i=KS){JS(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),zU(n,e),QU(n,e),HU(n,e),GU(n,e)}function o5(n,e,i=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),xm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Tm(n,e){n.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function GU(n,e){if(e.valueAccessor.setDisabledState){let i=t=>{e.valueAccessor.setDisabledState(t)};n.registerOnDisabledChange(i),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(i)})}}function JS(n,e){let i=S5(n);e.validator!==null?n.setValidators(n5(i,e.validator)):typeof i=="function"&&n.setValidators([i]);let t=b5(n);e.asyncValidator!==null?n.setAsyncValidators(n5(t,e.asyncValidator)):typeof t=="function"&&n.setAsyncValidators([t]);let r=()=>n.updateValueAndValidity();Tm(e._rawValidators,r),Tm(e._rawAsyncValidators,r)}function xm(n,e){let i=!1;if(n!==null){if(e.validator!==null){let r=S5(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(l=>l!==e.validator);s.length!==r.length&&(i=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let r=b5(n);if(Array.isArray(r)&&r.length>0){let s=r.filter(l=>l!==e.asyncValidator);s.length!==r.length&&(i=!0,n.setAsyncValidators(s))}}}let t=()=>{};return Tm(e._rawValidators,t),Tm(e._rawAsyncValidators,t),i}function zU(n,e){e.valueAccessor.registerOnChange(i=>{n._pendingValue=i,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&C5(n,e)})}function HU(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&C5(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function C5(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function QU(n,e){let i=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};n.registerOnChange(i),e._registerOnDestroy(()=>{n._unregisterOnChange(i)})}function w5(n,e){n==null,JS(n,e)}function WU(n,e){return xm(n,e)}function I5(n,e){n._syncPendingControls(),e.forEach(i=>{let t=i.control;t.updateOn==="submit"&&t._pendingChange&&(i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function $U(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}var YU={provide:Wl,useExisting:io(()=>eb)},Fd=Promise.resolve(),eb=(()=>{let e=class e extends Wl{get submitted(){return Hi(this.submittedReactive)}constructor(t,r,s){super(),this.callSetDisabledState=s,this._submitted=fo(()=>this.submittedReactive()),this.submittedReactive=lo(!1),this._directives=new Set,this.ngSubmit=new ht,this.form=new Em({},YS(t),XS(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Fd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),$S(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Fd.then(()=>{let r=this._findContainer(t.path),s=new Em({});w5(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Fd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),I5(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}};e.\u0275fac=function(r){return new(r||e)(K(c5,10),K(d5,10),K(ZS,8))},e.\u0275dir=Ue({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&rn("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kt([YU]),zt]});let n=e;return n})();function s5(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function a5(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var XU=class extends Im{constructor(e=null,i,t){super(_5(i),D5(t,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mm(i)&&(i.nonNullable||i.initialValueIsDefault)&&(a5(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){s5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){s5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){a5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ZU=n=>n instanceof XU;var KU={provide:Wl,useExisting:io(()=>tb)},tb=(()=>{let e=class e extends Wl{get submitted(){return Hi(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,s){super(),this.callSetDisabledState=s,this._submitted=fo(()=>this._submittedReactive()),this._submittedReactive=lo(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ht,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(xm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return $S(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){o5(t.control||null,t,!1),$U(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),I5(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new QS(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new WS(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,s=this.form.get(t.path);r!==s&&(o5(r||null,t),ZU(s)&&($S(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);w5(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&WU(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){JS(this.form,this),this._oldForm&&xm(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(K(c5,10),K(d5,10),K(ZS,8))},e.\u0275dir=Ue({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&rn("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kt([KU]),zt,Jn]});let n=e;return n})();var JU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();var E5=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:ZS,useValue:t.callSetDisabledState??KS}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[JU]});let n=e;return n})();var T5=ps({passive:!0}),x5=(()=>{let e=class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Os;let r=Xi(t),s=this._monitoredElements.get(r);if(s)return s.subject;let l=new ke,d="cdk-text-field-autofilled",h=p=>{p.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(d)?(r.classList.add(d),this._ngZone.run(()=>l.next({target:p.target,isAutofilled:!0}))):p.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(d)&&(r.classList.remove(d),this._ngZone.run(()=>l.next({target:p.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,T5),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:l,unlisten:()=>{r.removeEventListener("animationstart",h,T5)}}),l}stopMonitoring(t){let r=Xi(t),s=this._monitoredElements.get(r);s&&(s.unlisten(),s.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}};e.\u0275fac=function(r){return new(r||e)(le(Vt),le(Fe))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var A5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({});let n=e;return n})();var nb=class{constructor(e){this._box=e,this._destroyed=new ke,this._resizeSubject=new ke,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(i=>this._resizeSubject.next(i)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Je(i=>{let t=this._resizeSubject.subscribe(i);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),t.unsubscribe(),this._elementObservables.delete(e)}}).pipe(wn(i=>i.some(t=>t.target===e)),$u({bufferSize:1,refCount:!0}),Xn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},M5=(()=>{let e=class e{constructor(){this._observers=new Map,this._ngZone=Re(Fe),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,r){let s=r?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new nb(s)),this._observers.get(s).observe(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var nq=["notch"],iq=["matFormFieldNotchedOutline",""],rq=["*"],oq=["textField"],sq=["iconPrefixContainer"],aq=["textPrefixContainer"],lq=["iconSuffixContainer"],cq=["textSuffixContainer"],dq=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],uq=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function hq(n,e){n&1&&Mt(0,"span",21)}function fq(n,e){if(n&1&&(Pe(0,"label",20),Zt(1,1),ut(2,hq,1,0,"span",21),Ve()),n&2){let i=fn(2);Ft("floating",i._shouldLabelFloat())("monitorResize",i._hasOutline())("id",i._labelId),gn("for",i._control.disableAutomaticLabeling?null:i._control.id),Ge(2),qt(!i.hideRequiredMarker&&i._control.required?2:-1)}}function pq(n,e){if(n&1&&ut(0,fq,3,5,"label",20),n&2){let i=fn();qt(i._hasFloatingLabel()?0:-1)}}function mq(n,e){n&1&&Mt(0,"div",7)}function gq(n,e){}function vq(n,e){if(n&1&&ut(0,gq,0,0,"ng-template",13),n&2){fn(2);let i=Rc(1);Ft("ngTemplateOutlet",i)}}function yq(n,e){if(n&1&&(Pe(0,"div",9),ut(1,vq,1,1,null,13),Ve()),n&2){let i=fn();Ft("matFormFieldNotchedOutlineOpen",i._shouldLabelFloat()),Ge(),qt(i._forceDisplayInfixLabel()?-1:1)}}function Sq(n,e){n&1&&(Pe(0,"div",10,2),Zt(2,2),Ve())}function bq(n,e){n&1&&(Pe(0,"div",11,3),Zt(2,3),Ve())}function _q(n,e){}function Dq(n,e){if(n&1&&ut(0,_q,0,0,"ng-template",13),n&2){fn();let i=Rc(1);Ft("ngTemplateOutlet",i)}}function Cq(n,e){n&1&&(Pe(0,"div",14,4),Zt(2,4),Ve())}function wq(n,e){n&1&&(Pe(0,"div",15,5),Zt(2,5),Ve())}function Iq(n,e){n&1&&Mt(0,"div",16)}function Eq(n,e){if(n&1&&(Pe(0,"div",18),Zt(1,6),Ve()),n&2){let i=fn();Ft("@transitionMessages",i._subscriptAnimationState)}}function Tq(n,e){if(n&1&&(Pe(0,"mat-hint",22),_n(1),Ve()),n&2){let i=fn(2);Ft("id",i._hintLabelId),Ge(),ho(i.hintLabel)}}function xq(n,e){if(n&1&&(Pe(0,"div",19),ut(1,Tq,2,2,"mat-hint",22),Zt(2,7),Mt(3,"div",23),Zt(4,8),Ve()),n&2){let i=fn();Ft("@transitionMessages",i._subscriptAnimationState),Ge(),qt(i.hintLabel?1:-1)}}var R5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["mat-label"]],standalone:!0});let n=e;return n})();var Aq=new Ie("MatError");var Mq=0,O5=(()=>{let e=class e{constructor(){this.align="start",this.id=`mat-mdc-hint-${Mq++}`}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,s){r&2&&(uo("id",s.id),gn("align",null),Ut("mat-mdc-form-field-hint-end",s.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0});let n=e;return n})(),Rq=new Ie("MatPrefix");var Oq=new Ie("MatSuffix");var U5=new Ie("FloatingLabelParent"),P5=(()=>{let e=class e{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Re(M5),this._ngZone=Re(Fe),this._parent=Re(U5),this._resizeSubscription=new Yt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Pq(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};e.\u0275fac=function(r){return new(r||e)(K(We))},e.\u0275dir=Ue({type:e,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,s){r&2&&Ut("mdc-floating-label--float-above",s.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0});let n=e;return n})();function Pq(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let i=e.cloneNode(!0);i.style.setProperty("position","absolute"),i.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(i);let t=i.scrollWidth;return i.remove(),t}var F5="mdc-line-ripple--active",Rm="mdc-line-ripple--deactivating",k5=(()=>{let e=class e{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=s=>{let l=this._elementRef.nativeElement.classList,d=l.contains(Rm);s.propertyName==="opacity"&&d&&l.remove(F5,Rm)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Rm),t.add(F5)}deactivate(){this._elementRef.nativeElement.classList.add(Rm)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Fe))},e.\u0275dir=Ue({type:e,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0});let n=e;return n})(),L5=(()=>{let e=class e{constructor(t,r){this._elementRef=t,this._ngZone=r,this.open=!1}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Fe))},e.\u0275cmp=Pt({type:e,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,s){if(r&1&&vn(nq,5),r&2){let l;lt(l=ct())&&(s._notch=l.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,s){r&2&&Ut("mdc-notched-outline--notched",s.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[kt],attrs:iq,ngContentSelectors:rq,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,s){r&1&&(ni(),Mt(0,"div",1),Pe(1,"div",2,0),Zt(3),Ve(),Mt(4,"div",3))},encapsulation:2,changeDetection:0});let n=e;return n})(),Fq={transitionMessages:zI("transitionMessages",[WI("enter",cl({opacity:1,transform:"translateY(0%)"})),$I("void => enter",[cl({opacity:0,transform:"translateY(-5px)"}),HI("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},ib=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ue({type:e});let n=e;return n})();var rb=new Ie("MatFormField"),kq=new Ie("MAT_FORM_FIELD_DEFAULT_OPTIONS"),N5=0,V5="fill",Lq="auto",B5="fixed",Nq="translateY(-50%)",q5=(()=>{let e=class e{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fa(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||Lq}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){let r=this._appearance,s=t||this._defaults?.appearance||V5;this._appearance=s,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||B5}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||B5}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,s,l,d,h,p,g){this._elementRef=t,this._changeDetectorRef=r,this._dir=l,this._platform=d,this._defaults=h,this._animationMode=p,this._labelChild=Nw(R5),this._hideRequiredMarker=!1,this.color="primary",this._appearance=V5,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${N5++}`,this._hintLabelId=`mat-mdc-hint-${N5++}`,this._subscriptAnimationState="",this._destroyed=new ke,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=Re(Xt),this.getLabelId=fo(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=fo(()=>!!this._labelChild()),h&&(h.appearance&&(this.appearance=h.appearance),this._hideRequiredMarker=!!h?.hideRequiredMarker,h.color&&(this.color=h.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let r=this._control,s="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(s+t.controlType),r.controlType&&this._elementRef.nativeElement.classList.add(s+r.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=r.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),r.ngControl&&r.ngControl.valueChanges&&(this._valueChanges=r.ngControl.valueChanges.pipe(Xn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),wi(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),Ac(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Xn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(l=>l.align==="start"):null,s=this._hintChildren?this._hintChildren.find(l=>l.align==="end"):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let r=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,l=this._iconSuffixContainer?.nativeElement,d=this._textSuffixContainer?.nativeElement,h=r?.getBoundingClientRect().width??0,p=s?.getBoundingClientRect().width??0,g=l?.getBoundingClientRect().width??0,v=d?.getBoundingClientRect().width??0,_=this._dir.value==="rtl"?"-1":"1",b=`${h+p}px`,w=`calc(${_} * (${b} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${Nq} translateX(${w})
    )`;let x=h+p+g+v;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${x}px)`)}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Pn),K(Fe),K(yi),K(Vt),K(kq,8),K(ei,8),K(nt))},e.\u0275cmp=Pt({type:e,selectors:[["mat-form-field"]],contentQueries:function(r,s,l){if(r&1&&(nI(l,s._labelChild,R5,5),jn(l,ib,5),jn(l,Rq,5),jn(l,Oq,5),jn(l,Aq,5),jn(l,O5,5)),r&2){iI();let d;lt(d=ct())&&(s._formFieldControl=d.first),lt(d=ct())&&(s._prefixChildren=d),lt(d=ct())&&(s._suffixChildren=d),lt(d=ct())&&(s._errorChildren=d),lt(d=ct())&&(s._hintChildren=d)}},viewQuery:function(r,s){if(r&1&&(vn(oq,5),vn(sq,5),vn(aq,5),vn(lq,5),vn(cq,5),vn(P5,5),vn(L5,5),vn(k5,5)),r&2){let l;lt(l=ct())&&(s._textField=l.first),lt(l=ct())&&(s._iconPrefixContainer=l.first),lt(l=ct())&&(s._textPrefixContainer=l.first),lt(l=ct())&&(s._iconSuffixContainer=l.first),lt(l=ct())&&(s._textSuffixContainer=l.first),lt(l=ct())&&(s._floatingLabel=l.first),lt(l=ct())&&(s._notchedOutline=l.first),lt(l=ct())&&(s._lineRipple=l.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,s){r&2&&Ut("mat-mdc-form-field-label-always-float",s._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",s._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",s._hasIconSuffix)("mat-form-field-invalid",s._control.errorState)("mat-form-field-disabled",s._control.disabled)("mat-form-field-autofilled",s._control.autofilled)("mat-form-field-no-animations",s._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",s.appearance=="fill")("mat-form-field-appearance-outline",s.appearance=="outline")("mat-form-field-hide-placeholder",s._hasFloatingLabel()&&!s._shouldLabelFloat())("mat-focused",s._control.focused)("mat-primary",s.color!=="accent"&&s.color!=="warn")("mat-accent",s.color==="accent")("mat-warn",s.color==="warn")("ng-untouched",s._shouldForward("untouched"))("ng-touched",s._shouldForward("touched"))("ng-pristine",s._shouldForward("pristine"))("ng-dirty",s._shouldForward("dirty"))("ng-valid",s._shouldForward("valid"))("ng-invalid",s._shouldForward("invalid"))("ng-pending",s._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Kt([{provide:rb,useExisting:e},{provide:U5,useExisting:e}]),kt],ngContentSelectors:uq,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,s){if(r&1){let l=ta();ni(dq),ut(0,pq,1,1,"ng-template",null,0,oI),Pe(2,"div",6,1),rn("click",function(h){return Xs(l),Zs(s._control.onContainerClick(h))}),ut(4,mq,1,0,"div",7),Pe(5,"div",8),ut(6,yq,2,2,"div",9)(7,Sq,3,0,"div",10)(8,bq,3,0,"div",11),Pe(9,"div",12),ut(10,Dq,1,1,null,13),Zt(11),Ve(),ut(12,Cq,3,0,"div",14)(13,wq,3,0,"div",15),Ve(),ut(14,Iq,1,0,"div",16),Ve(),Pe(15,"div",17),ut(16,Eq,2,1,"div",18)(17,xq,5,2,"div",19),Ve()}if(r&2){let l;Ge(2),Ut("mdc-text-field--filled",!s._hasOutline())("mdc-text-field--outlined",s._hasOutline())("mdc-text-field--no-label",!s._hasFloatingLabel())("mdc-text-field--disabled",s._control.disabled)("mdc-text-field--invalid",s._control.errorState),Ge(2),qt(!s._hasOutline()&&!s._control.disabled?4:-1),Ge(2),qt(s._hasOutline()?6:-1),Ge(),qt(s._hasIconPrefix?7:-1),Ge(),qt(s._hasTextPrefix?8:-1),Ge(2),qt(!s._hasOutline()||s._forceDisplayInfixLabel()?10:-1),Ge(2),qt(s._hasTextSuffix?12:-1),Ge(),qt(s._hasIconSuffix?13:-1),Ge(),qt(s._hasOutline()?-1:14),Ge(),Ut("mat-mdc-form-field-subscript-dynamic-size",s.subscriptSizing==="dynamic"),Ge(),qt((l=s._getDisplayedMessages())==="error"?16:l==="hint"?17:-1)}},dependencies:[P5,L5,TI,k5,O5],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Fq.transitionMessages]},changeDetection:0});let n=e;return n})(),Nd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,Fc,nm,sn]});let n=e;return n})();var Bq=new Ie("MAT_INPUT_VALUE_ACCESSOR"),Uq=["button","checkbox","file","hidden","image","radio","range","reset","submit"],qq=0,j5=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){this._disabled=fa(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(bm.required)??!1}set required(t){this._required=fa(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&lS().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fa(t)}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,r,s,l,d,h,p,g,v,_){this._elementRef=t,this._platform=r,this.ngControl=s,this._autofillMonitor=g,this._ngZone=v,this._formField=_,this._uid=`mat-input-${qq++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new ke,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(w=>lS().has(w)),this._iOSKeyupListener=w=>{let x=w.target;!x.value&&x.selectionStart===0&&x.selectionEnd===0&&(x.setSelectionRange(1,1),x.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let b=this._elementRef.nativeElement,C=b.nodeName.toLowerCase();this._inputValueAccessor=p||b,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&v.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new am(h,s,d,l,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=C==="select",this._isTextarea=C==="textarea",this._isInFormField=!!_,this._isNativeSelect&&(this.controlType=b.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Uq.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}else return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Vt),K(Cm,10),K(eb,8),K(tb,8),K(xA),K(Bq,10),K(x5),K(Fe),K(rb,8))},e.\u0275dir=Ue({type:e,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,s){r&1&&rn("focus",function(){return s._focusChanged(!0)})("blur",function(){return s._focusChanged(!1)})("input",function(){return s._onInput()}),r&2&&(uo("id",s.id)("disabled",s.disabled)("required",s.required),gn("name",s.name||null)("readonly",s.readonly&&!s._isNativeSelect||null)("aria-invalid",s.empty&&s.required?null:s.errorState)("aria-required",s.required)("id",s.id),Ut("mat-input-server",s._isServer)("mat-mdc-form-field-textarea-control",s._isInFormField&&s._isTextarea)("mat-mdc-form-field-input-control",s._isInFormField)("mdc-text-field__input",s._isInFormField)("mat-mdc-native-select-inline",s._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Kt([{provide:ib,useExisting:e}]),Jn]});let n=e;return n})(),G5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,Nd,Nd,A5,sn]});let n=e;return n})();var Gq=["knob"],zq=["valueIndicatorContainer"];function Hq(n,e){if(n&1&&(Pe(0,"div",2,1)(2,"div",5)(3,"span",6),_n(4),Ve()()()),n&2){let i=fn();Ge(4),ho(i.valueIndicatorText)}}var Qq=["trackActive"],Wq=["*"];function $q(n,e){if(n&1&&Mt(0,"div"),n&2){let i=e.$implicit,t=e.$index,r=fn(3);ts(i===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Or("transform",r._calcTickMarkTransform(t))}}function Yq(n,e){if(n&1&&Jw(0,$q,1,4,"div",8,Kw),n&2){let i=fn(2);eI(i._tickMarks)}}function Xq(n,e){if(n&1&&(Pe(0,"div",6,1),ut(2,Yq,2,0),Ve()),n&2){let i=fn();Ge(2),qt(i._cachedWidth?2:-1)}}function Zq(n,e){if(n&1&&Mt(0,"mat-slider-visual-thumb",7),n&2){let i=fn();Ft("discrete",i.discrete)("thumbPosition",1)("valueIndicatorText",i.startValueIndicatorText)}}var rt=function(n){return n[n.START=1]="START",n[n.END=2]="END",n}(rt||{}),$l=function(n){return n[n.ACTIVE=0]="ACTIVE",n[n.INACTIVE=1]="INACTIVE",n}($l||{}),ob=new Ie("_MatSlider"),z5=new Ie("_MatSliderThumb"),Kq=new Ie("_MatSliderRangeThumb"),H5=new Ie("_MatSliderVisualThumb");var Jq=(()=>{let e=class e{constructor(t,r,s,l){this._cdr=t,this._ngZone=r,this._slider=l,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=Re(Vt),this._onPointerMove=d=>{if(this._sliderInput._isFocused)return;let h=this._hostElement.getBoundingClientRect(),p=this._slider._isCursorOnSliderThumb(d,h);this._isHovered=p,p?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=d=>{d.button===0&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){let t=this._slider._getInput(this.thumbPosition);t&&(this._ripple.radius=24,this._sliderInput=t,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let r=this._sliderInputEl;r.addEventListener("pointermove",this._onPointerMove),r.addEventListener("pointerdown",this._onDragStart),r.addEventListener("pointerup",this._onDragEnd),r.addEventListener("pointerleave",this._onMouseLeave),r.addEventListener("focus",this._onFocus),r.addEventListener("blur",this._onBlur)}))}ngOnDestroy(){let t=this._sliderInputEl;t&&(t.removeEventListener("pointermove",this._onPointerMove),t.removeEventListener("pointerdown",this._onDragStart),t.removeEventListener("pointerup",this._onDragEnd),t.removeEventListener("pointerleave",this._onMouseLeave),t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(t){return t?.state===Si.FADING_IN||t?.state===Si.VISIBLE}_showRipple(t,r){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===rt.START?rt.END:rt.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!r)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:t,centered:!0,persistent:!0})}_hideRipple(t){if(t?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let r=this._getSibling();r._isShowingAnyRipple()||(this._hideValueIndicator(),r._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===rt.START?rt.END:rt.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}};e.\u0275fac=function(r){return new(r||e)(K(Pn),K(Fe),K(We),K(ob))},e.\u0275cmp=Pt({type:e,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(r,s){if(r&1&&(vn(Ad,5),vn(Gq,5),vn(zq,5)),r&2){let l;lt(l=ct())&&(s._ripple=l.first),lt(l=ct())&&(s._knob=l.first),lt(l=ct())&&(s._valueIndicatorContainer=l.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[Kt([{provide:H5,useExisting:e}]),kt],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(r,s){r&1&&(ut(0,Hq,5,1,"div",2),Mt(1,"div",3,0)(3,"div",4)),r&2&&(qt(s.discrete?0:-1),Ge(3),Ft("matRippleDisabled",!0))},dependencies:[Ad],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0});let n=e;return n})(),Q5=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(t){this._disabled=t;let r=this._getInput(rt.END),s=this._getInput(rt.START);r&&(r.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(t){this._discrete=t,this._updateValueIndicatorUIs()}get min(){return this._min}set min(t){let r=isNaN(t)?this._min:t;this._min!==r&&this._updateMin(r)}_updateMin(t){let r=this._min;this._min=t,this._isRange?this._updateMinRange({old:r,new:t}):this._updateMinNonRange(t),this._onMinMaxOrStepChange()}_updateMinRange(t){let r=this._getInput(rt.END),s=this._getInput(rt.START),l=r.value,d=s.value;s.min=t.new,r.min=Math.max(t.new,s.value),s.max=Math.min(r.max,r.value),s._updateWidthInactive(),r._updateWidthInactive(),t.new<t.old?this._onTranslateXChangeBySideEffect(r,s):this._onTranslateXChangeBySideEffect(s,r),l!==r.value&&this._onValueChange(r),d!==s.value&&this._onValueChange(s)}_updateMinNonRange(t){let r=this._getInput(rt.END);if(r){let s=r.value;r.min=t,r._updateThumbUIByValue(),this._updateTrackUI(r),s!==r.value&&this._onValueChange(r)}}get max(){return this._max}set max(t){let r=isNaN(t)?this._max:t;this._max!==r&&this._updateMax(r)}_updateMax(t){let r=this._max;this._max=t,this._isRange?this._updateMaxRange({old:r,new:t}):this._updateMaxNonRange(t),this._onMinMaxOrStepChange()}_updateMaxRange(t){let r=this._getInput(rt.END),s=this._getInput(rt.START),l=r.value,d=s.value;r.max=t.new,s.max=Math.min(t.new,r.value),r.min=s.value,r._updateWidthInactive(),s._updateWidthInactive(),t.new>t.old?this._onTranslateXChangeBySideEffect(s,r):this._onTranslateXChangeBySideEffect(r,s),l!==r.value&&this._onValueChange(r),d!==s.value&&this._onValueChange(s)}_updateMaxNonRange(t){let r=this._getInput(rt.END);if(r){let s=r.value;r.max=t,r._updateThumbUIByValue(),this._updateTrackUI(r),s!==r.value&&this._onValueChange(r)}}get step(){return this._step}set step(t){let r=isNaN(t)?this._step:t;this._step!==r&&this._updateStep(r)}_updateStep(t){this._step=t,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let t=this._getInput(rt.END),r=this._getInput(rt.START),s=t.value,l=r.value,d=r.value;t.min=this._min,r.max=this._max,t.step=this._step,r.step=this._step,this._platform.SAFARI&&(t.value=t.value,r.value=r.value),t.min=Math.max(this._min,r.value),r.max=Math.min(this._max,t.value),r._updateWidthInactive(),t._updateWidthInactive(),t.value<d?this._onTranslateXChangeBySideEffect(r,t):this._onTranslateXChangeBySideEffect(t,r),s!==t.value&&this._onValueChange(t),l!==r.value&&this._onValueChange(r)}_updateStepNonRange(){let t=this._getInput(rt.END);if(t){let r=t.value;t.step=this._step,this._platform.SAFARI&&(t.value=t.value),t._updateThumbUIByValue(),r!==t.value&&this._onValueChange(t)}}constructor(t,r,s,l,d,h){this._ngZone=t,this._cdr=r,this._elementRef=s,this._dir=l,this._globalRippleOptions=d,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=p=>`${p}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=Re(Vt),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations=h==="NoopAnimations",this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl"}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let t=this._getInput(rt.END),r=this._getInput(rt.START);this._isRange=!!t&&!!r,this._cdr.detectChanges();let s=this._getThumb(rt.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(t,r):this._initUINonRange(t),this._updateTrackUI(t),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(t){t.initProps(),t.initUI(),this._updateValueIndicatorUI(t),this._hasViewInitialized=!0,t._updateThumbUIByValue()}_initUIRange(t,r){t.initProps(),t.initUI(),r.initProps(),r.initUI(),t._updateMinMax(),r._updateMinMax(),t._updateStaticStyles(),r._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,t._updateThumbUIByValue(),r._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let t=this._getInput(rt.END),r=this._getInput(rt.START);t._setIsLeftThumb(),r._setIsLeftThumb(),t.translateX=t._calcTranslateXByValue(),r.translateX=r._calcTranslateXByValue(),t._updateStaticStyles(),r._updateStaticStyles(),t._updateWidthInactive(),r._updateWidthInactive(),t._updateThumbUIByValue(),r._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(rt.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(rt.START)._isActive||this._getThumb(rt.END)._isActive}_getValue(t=rt.END){let r=this._getInput(t);return r?r.value:this.min}_skipUpdate(){return!!(this._getInput(rt.START)?._skipUIUpdate||this._getInput(rt.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(t){let r=this._trackActive.nativeElement.style;r.left=t.left,r.right=t.right,r.transformOrigin=t.transformOrigin,r.transform=t.transform}_calcTickMarkTransform(t){return`translateX(${t*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(t){this._hasViewInitialized&&(this._updateThumbUI(t),this._updateTrackUI(t),this._updateOverlappingThumbUI(t))}_onTranslateXChangeBySideEffect(t,r){this._hasViewInitialized&&(t._updateThumbUIByValue(),r._updateThumbUIByValue())}_onValueChange(t){this._hasViewInitialized&&(this._updateValueIndicatorUI(t),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let t=this._getInput(rt.END),r=this._getInput(rt.START);t._updateThumbUIByValue(),r._updateThumbUIByValue(),t._updateStaticStyles(),r._updateStaticStyles(),t._updateMinMax(),r._updateMinMax(),t._updateWidthInactive(),r._updateWidthInactive()}else{let t=this._getInput(rt.END);t&&t._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){let t=this._getInput(rt.START),r=this._getInput(rt.END);return!t||!r?!1:r.translateX-t.translateX<20}_updateOverlappingThumbClassNames(t){let r=t.getSibling(),s=this._getThumb(t.thumbPosition);this._getThumb(r.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(t){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(t))}_updateThumbUI(t){if(this._skipUpdate())return;let r=this._getThumb(t.thumbPosition===rt.END?rt.END:rt.START);r._hostElement.style.transform=`translateX(${t.translateX}px)`}_updateValueIndicatorUI(t){if(this._skipUpdate())return;let r=this.displayWith(t.value);if(this._hasViewInitialized?t._valuetext.set(r):t._hostElement.setAttribute("aria-valuetext",r),this.discrete){t.thumbPosition===rt.START?this.startValueIndicatorText=r:this.endValueIndicatorText=r;let s=this._getThumb(t.thumbPosition);r.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let t=this._getInput(rt.END),r=this._getInput(rt.START);t&&this._updateValueIndicatorUI(t),r&&this._updateValueIndicatorUI(r)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let t=this._step&&this._step>0?this._step:1,s=(Math.floor(this.max/t)*t-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*s-6}_updateTrackUI(t){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(t):this._updateTrackUINonRange(t))}_updateTrackUIRange(t){let r=t.getSibling();if(!r||!this._cachedWidth)return;let s=Math.abs(r.translateX-t.translateX)/this._cachedWidth;t._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-r.translateX}px`,transformOrigin:"right",transform:`scaleX(${s})`}):this._setTrackActiveStyles({left:`${r.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(t){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-t.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${t.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let t=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(t):this._updateTickMarkUINonRange(t),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(t){let r=this._getValue(),s=Math.max(Math.round((r-this.min)/t),0),l=Math.max(Math.round((this.max-r)/t),0);this._isRtl?s++:l++,this._tickMarks=Array(s).fill($l.ACTIVE).concat(Array(l).fill($l.INACTIVE))}_updateTickMarkUIRange(t){let r=this._getValue(),s=this._getValue(rt.START),l=Math.max(Math.round((s-this.min)/t),0),d=Math.max(Math.round((r-s)/t)+1,0),h=Math.max(Math.round((this.max-r)/t),0);this._tickMarks=Array(l).fill($l.INACTIVE).concat(Array(d).fill($l.ACTIVE),Array(h).fill($l.INACTIVE))}_getInput(t){if(t===rt.END&&this._input)return this._input;if(this._inputs?.length)return t===rt.START?this._inputs.first:this._inputs.last}_getThumb(t){return t===rt.END?this._thumbs?.last:this._thumbs?.first}_setTransition(t){this._hasAnimation=!this._platform.IOS&&t&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(t,r){let s=r.width/2,l=r.x+s,d=r.y+s,h=t.clientX-l,p=t.clientY-d;return Math.pow(h,2)+Math.pow(p,2)<Math.pow(s,2)}};e.\u0275fac=function(r){return new(r||e)(K(Fe),K(Pn),K(We),K(yi,8),K(RS,8),K(ei,8))},e.\u0275cmp=Pt({type:e,selectors:[["mat-slider"]],contentQueries:function(r,s,l){if(r&1&&(jn(l,z5,5),jn(l,Kq,4)),r&2){let d;lt(d=ct())&&(s._input=d.first),lt(d=ct())&&(s._inputs=d)}},viewQuery:function(r,s){if(r&1&&(vn(Qq,5),vn(H5,5)),r&2){let l;lt(l=ct())&&(s._trackActive=l.first),lt(l=ct())&&(s._thumbs=l)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(r,s){r&2&&(ts("mat-"+(s.color||"primary")),Ut("mdc-slider--range",s._isRange)("mdc-slider--disabled",s.disabled)("mdc-slider--discrete",s.discrete)("mdc-slider--tick-marks",s.showTickMarks)("_mat-animation-noopable",s._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Rt],discrete:[2,"discrete","discrete",Rt],showTickMarks:[2,"showTickMarks","showTickMarks",Rt],min:[2,"min","min",Pi],color:"color",disableRipple:[2,"disableRipple","disableRipple",Rt],max:[2,"max","max",Pi],step:[2,"step","step",Pi],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[Kt([{provide:ob,useExisting:e}]),cn,kt],ngContentSelectors:Wq,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(r,s){r&1&&(ni(),Zt(0),Pe(1,"div",2),Mt(2,"div",3),Pe(3,"div",4),Mt(4,"div",5,0),Ve(),ut(6,Xq,3,1,"div",6),Ve(),ut(7,Zq,1,3,"mat-slider-visual-thumb",7),Mt(8,"mat-slider-visual-thumb",7)),r&2&&(Ge(6),qt(s.showTickMarks?6:-1),Ge(),qt(s._isRange?7:-1),Ge(),Ft("discrete",s.discrete)("thumbPosition",2)("valueIndicatorText",s.endValueIndicatorText))},dependencies:[Jq],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-app-corner-full));height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-app-primary));border-top-width:var(--mdc-slider-active-track-height)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-app-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-app-surface-variant));height:var(--mdc-slider-inactive-track-height);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-app-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-app-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__track--inactive::before{border-color:CanvasText}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-app-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-app-on-primary));width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display);border-top-color:var(--mdc-slider-label-container-color, var(--mat-app-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__value-indicator::after{border-color:CanvasText}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform);font-family:var(--mdc-slider-label-label-text-font, var(--mat-app-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-app-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-app-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-app-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-app-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-width:calc(var(--mdc-slider-handle-height)/2) calc(var(--mdc-slider-handle-width)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-app-level1));background-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-app-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-app-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size);height:var(--mdc-slider-with-tick-marks-container-size);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-app-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-app-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-app-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-app-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-app-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let n=e;return n})();var ej={provide:Am,useExisting:io(()=>sb),multi:!0};var sb=(()=>{let e=class e{get value(){return Pi(this._hostElement.value,0)}set value(t){t=isNaN(t)?0:t;let r=t+"";if(!this._hasSetInitialValue){this._initialValue=r;return}this._isActive||this._setValue(r)}_setValue(t){this._hostElement.value=t,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(t){this._translateX=t}get min(){return Pi(this._hostElement.min,0)}set min(t){this._hostElement.min=t+"",this._cdr.detectChanges()}get max(){return Pi(this._hostElement.max,0)}set max(t){this._hostElement.max=t+"",this._cdr.detectChanges()}get step(){return Pi(this._hostElement.step,0)}set step(t){this._hostElement.step=t+"",this._cdr.detectChanges()}get disabled(){return Rt(this._hostElement.disabled)}set disabled(t){this._hostElement.disabled=t,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(t){this._isFocused=t}constructor(t,r,s,l){this._ngZone=t,this._elementRef=r,this._cdr=s,this._slider=l,this.valueChange=new ht,this.dragStart=new ht,this.dragEnd=new ht,this.thumbPosition=rt.END,this._valuetext=lo(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new ke,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=Re(Vt),this._hostElement=r.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(t){if(!(this.disabled||t.button!==0)){if(this._platform.IOS){let r=this._slider._isCursorOnSliderThumb(t,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=r,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(t,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(t),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(t){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(t)},0)}_fixValue(t){let r=t.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,l=this._slider.step===0?1:this._slider.step,d=Math.floor((this._slider.max-this._slider.min)/l),h=this._slider._isRtl?1-r/s:r/s,g=Math.round(h*d)/d*(this._slider.max-this._slider.min)+this._slider.min,v=Math.round(g/l)*l,_=this.value;if(v===_){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation});return}this.value=v,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation})}_onPointerMove(t){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(t)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(t){let r=this._tickMarkOffset,s=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(t,s),r)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(t){return t.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(t){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(t)}_updateThumbUIByPointerEvent(t,r){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(t)),this._updateThumbUI(r)}_updateThumbUI(t){this._slider._setTransition(!!t?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(t){(this._isControlInitialized||t!==null)&&(this.value=t)}registerOnChange(t){this._onChangeFn=t,this._isControlInitialized=!0}registerOnTouched(t){this._onTouchedFn=t}setDisabledState(t){this.disabled=t}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}};e.\u0275fac=function(r){return new(r||e)(K(Fe),K(We),K(Pn),K(ob))},e.\u0275dir=Ue({type:e,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(r,s){r&1&&rn("change",function(){return s._onChange()})("input",function(){return s._onInput()})("blur",function(){return s._onBlur()})("focus",function(){return s._onFocus()}),r&2&&gn("aria-valuetext",s._valuetext())},inputs:{value:[2,"value","value",Pi]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[Kt([ej,{provide:z5,useExisting:e}]),cn]});let n=e;return n})();var W5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,jl]});let n=e;return n})();var $5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,jl,sn]});let n=e;return n})();var nj=["button"],ij=["*"];function rj(n,e){if(n&1&&Mt(0,"mat-pseudo-checkbox",3),n&2){let i=fn();Ft("disabled",i.disabled)}}function oj(n,e){if(n&1&&Mt(0,"mat-pseudo-checkbox",3),n&2){let i=fn();Ft("disabled",i.disabled)}}var Y5=new Ie("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:sj});function sj(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var X5=new Ie("MatButtonToggleGroup"),aj={provide:Am,useExisting:io(()=>ab),multi:!0},Z5=0,Om=class{constructor(e,i){this.source=e,this.value=i}},ab=(()=>{let e=class e{get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}get value(){let t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(r=>r.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}get selected(){let t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=t,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(t){this._hideMultipleSelectionIndicator=t,this._markButtonsForCheck()}constructor(t,r,s){this._changeDetector=t,this._dir=s,this._multiple=!1,this._disabled=!1,this._disabledInteractive=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name=`mat-button-toggle-group-${Z5++}`,this.valueChange=new ht,this.change=new ht,this.appearance=r&&r.appearance?r.appearance:"standard",this.hideSingleSelectionIndicator=r?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=r?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new Xp(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked)),this.multiple||this._initializeTabIndex()}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_keydown(t){if(this.multiple||this.disabled)return;let s=t.target.id,l=this._buttonToggles.toArray().findIndex(h=>h.buttonId===s),d=null;switch(t.keyCode){case 32:case 13:d=this._buttonToggles.get(l)||null;break;case 38:d=this._getNextButton(l,-1);break;case 37:d=this._getNextButton(l,this.dir==="ltr"?-1:1);break;case 40:d=this._getNextButton(l,1);break;case 39:d=this._getNextButton(l,this.dir==="ltr"?1:-1);break;default:return}d&&(t.preventDefault(),d._onButtonClick(),d.focus())}_emitChangeEvent(t){let r=new Om(t,this.value);this._rawValue=r.value,this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(t,r,s=!1,l=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?r?this._selectionModel.select(t):this._selectionModel.deselect(t):l=!0,l?Promise.resolve().then(()=>this._updateModelValue(t,s)):this._updateModelValue(t,s)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(r=>t.value!=null&&r===t.value):t.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(t=>{t.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let t=0;t<this._buttonToggles.length;t++){let r=this._buttonToggles.get(t);if(!r.disabled){r.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(t,r){let s=this._buttonToggles;for(let l=1;l<=s.length;l++){let d=(t+r*l+s.length)%s.length,h=s.get(d);if(h&&!h.disabled)return h}return null}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(r=>this._selectValue(r))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>{t.checked=!1,this.multiple||(t.tabIndex=-1)})}_selectValue(t){let r=this._buttonToggles.find(s=>s.value!=null&&s.value===t);r&&(r.checked=!0,this._selectionModel.select(r),this.multiple||(r.tabIndex=0))}_updateModelValue(t,r){r&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}};e.\u0275fac=function(r){return new(r||e)(K(Pn),K(Y5,8),K(yi,8))},e.\u0275dir=Ue({type:e,selectors:[["mat-button-toggle-group"]],contentQueries:function(r,s,l){if(r&1&&jn(l,Pm,5),r&2){let d;lt(d=ct())&&(s._buttonToggles=d)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(r,s){r&1&&rn("keydown",function(d){return s._keydown(d)}),r&2&&(gn("role",s.multiple?"group":"radiogroup")("aria-disabled",s.disabled),Ut("mat-button-toggle-vertical",s.vertical)("mat-button-toggle-group-appearance-standard",s.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",Rt],value:"value",multiple:[2,"multiple","multiple",Rt],disabled:[2,"disabled","disabled",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Rt],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",Rt]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[Kt([aj,{provide:X5,useExisting:e}]),cn]});let n=e;return n})(),Pm=(()=>{let e=class e{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(t){this._tabIndex=t,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=t}get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t}constructor(t,r,s,l,d,h){this._changeDetectorRef=r,this._elementRef=s,this._focusMonitor=l,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new ht;let p=Number(d);this.tabIndex=p||p===0?p:null,this.buttonToggleGroup=t,this.appearance=h&&h.appearance?h.appearance:"standard",this.disabledInteractive=h?.disabledInteractive??!1}ngOnInit(){let t=this.buttonToggleGroup;this.id=this.id||`mat-button-toggle-${Z5++}`,t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){if(this.disabled)return;let t=this.isSingleSelector()?!0:!this._checked;if(t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let r=this.buttonToggleGroup._buttonToggles.find(s=>s.tabIndex===0);r&&(r.tabIndex=-1),this.tabIndex=0}this.change.emit(new Om(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}};e.\u0275fac=function(r){return new(r||e)(K(X5,8),K(Pn),K(We),K(ql),Jo("tabindex"),K(Y5,8))},e.\u0275cmp=Pt({type:e,selectors:[["mat-button-toggle"]],viewQuery:function(r,s){if(r&1&&vn(nj,5),r&2){let l;lt(l=ct())&&(s._buttonElement=l.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(r,s){r&1&&rn("focus",function(){return s.focus()}),r&2&&(gn("aria-label",null)("aria-labelledby",null)("id",s.id)("name",null),Ut("mat-button-toggle-standalone",!s.buttonToggleGroup)("mat-button-toggle-checked",s.checked)("mat-button-toggle-disabled",s.disabled)("mat-button-toggle-disabled-interactive",s.disabledInteractive)("mat-button-toggle-appearance-standard",s.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",Rt],appearance:"appearance",checked:[2,"checked","checked",Rt],disabled:[2,"disabled","disabled",Rt],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Rt]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[cn,kt],ngContentSelectors:ij,decls:8,vars:14,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,s){if(r&1){let l=ta();ni(),Pe(0,"button",1,0),rn("click",function(){return Xs(l),Zs(s._onButtonClick())}),Pe(2,"span",2),ut(3,rj,1,1,"mat-pseudo-checkbox",3)(4,oj,1,1,"mat-pseudo-checkbox",3),Zt(5),Ve()(),Mt(6,"span",4)(7,"span",5)}if(r&2){let l=Rc(1);Ft("id",s.buttonId)("disabled",s.disabled&&!s.disabledInteractive||null),gn("role",s.isSingleSelector()?"radio":"button")("tabindex",s.disabled&&!s.disabledInteractive?-1:s.tabIndex)("aria-pressed",s.isSingleSelector()?null:s.checked)("aria-checked",s.isSingleSelector()?s.checked:null)("name",s._getButtonName())("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),Ge(3),qt(s.buttonToggleGroup&&s.checked&&!s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),Ge(),qt(s.buttonToggleGroup&&s.checked&&s.buttonToggleGroup.multiple&&!s.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),Ge(3),Ft("matRippleTrigger",l)("matRippleDisabled",s.disableRipple||s.disabled)}},dependencies:[Ad,AA],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-app-on-surface));background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-app-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-app-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-app-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-app-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-app-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}"],encapsulation:2,changeDetection:0});let n=e;return n})(),K5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,jl,Pm,sn]});let n=e;return n})();var cj=["*"],Fm;function dj(){if(Fm===void 0&&(Fm=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(Fm=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Fm}function Vd(n){return dj()?.createHTML(n)||n}function J5(n){return Error(`Unable to find icon with the name "${n}"`)}function uj(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function eM(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function tM(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Ao=class{constructor(e,i,t){this.url=e,this.svgText=i,this.options=t}},hj=(()=>{let e=class e{constructor(t,r,s,l){this._httpClient=t,this._sanitizer=r,this._errorHandler=l,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,l){return this._addSvgIconConfig(t,r,new Ao(s,null,l))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,l){let d=this._sanitizer.sanitize(Ei.HTML,s);if(!d)throw tM(s);let h=Vd(d);return this._addSvgIconConfig(t,r,new Ao("",h,l))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new Ao(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){let l=this._sanitizer.sanitize(Ei.HTML,r);if(!l)throw tM(r);let d=Vd(l);return this._addSvgIconSetConfig(t,new Ao("",d,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let r=this._sanitizer.sanitize(Ei.RESOURCE_URL,t);if(!r)throw eM(t);let s=this._cachedIconsByUrl.get(r);return s?hn(km(s)):this._loadSvgIconFromConfig(new Ao(t,null)).pipe(Xr(l=>this._cachedIconsByUrl.set(r,l)),Ct(l=>km(l)))}getNamedSvgIcon(t,r=""){let s=nM(r,t),l=this._svgIconConfigs.get(s);if(l)return this._getSvgFromConfig(l);if(l=this._getIconConfigFromResolvers(r,t),l)return this._svgIconConfigs.set(s,l),this._getSvgFromConfig(l);let d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):uc(J5(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?hn(km(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ct(r=>km(r)))}_getSvgFromIconSetConfigs(t,r){let s=this._extractIconWithNameFromAnySet(t,r);if(s)return hn(s);let l=r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(Gu(h=>{let g=`Loading icon set URL: ${this._sanitizer.sanitize(Ei.RESOURCE_URL,d.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(g)),hn(null)})));return hc(l).pipe(Ct(()=>{let d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw J5(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){let l=r[s];if(l.svgText&&l.svgText.toString().indexOf(t)>-1){let d=this._svgElementFromConfig(l),h=this._extractSvgIconFromSet(d,t,l.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Xr(r=>t.svgText=r),Ct(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?hn(null):this._fetchIcon(t).pipe(Xr(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){let l=t.querySelector(`[id="${r}"]`);if(!l)return null;let d=l.cloneNode(!0);if(d.removeAttribute("id"),d.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(d,s);if(d.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(d),s);let h=this._svgElementFromString(Vd("<svg></svg>"));return h.appendChild(d),this._setSvgAttributes(h,s)}_svgElementFromString(t){let r=this._document.createElement("DIV");r.innerHTML=t;let s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){let r=this._svgElementFromString(Vd("<svg></svg>")),s=t.attributes;for(let l=0;l<s.length;l++){let{name:d,value:h}=s[l];d!=="id"&&r.setAttribute(d,h)}for(let l=0;l<t.childNodes.length;l++)t.childNodes[l].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[l].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){let{url:r,options:s}=t,l=s?.withCredentials??!1;if(!this._httpClient)throw uj();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let d=this._sanitizer.sanitize(Ei.RESOURCE_URL,r);if(!d)throw eM(r);let h=this._inProgressUrlFetches.get(d);if(h)return h;let p=this._httpClient.get(d,{responseType:"text",withCredentials:l}).pipe(Ct(g=>Vd(g)),Wu(()=>this._inProgressUrlFetches.delete(d)),fc());return this._inProgressUrlFetches.set(d,p),p}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(nM(t,r),s),this}_addSvgIconSetConfig(t,r){let s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){let r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){let l=this._resolvers[s](r,t);if(l)return fj(l)?new Ao(l.url,null,l.options):new Ao(l,null)}}};e.\u0275fac=function(r){return new(r||e)(le(PI,8),le(Dv),le(nt,8),le(Oi))},e.\u0275prov=xe({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function km(n){return n.cloneNode(!0)}function nM(n,e){return n+":"+e}function fj(n){return!!(n.url&&n.options)}var pj=new Ie("MAT_ICON_DEFAULT_OPTIONS"),mj=new Ie("mat-icon-location",{providedIn:"root",factory:gj});function gj(){let n=Re(nt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var iM=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vj=iM.map(n=>`[${n}]`).join(", "),yj=/^url\(['"]?#(.*?)['"]?\)$/,rM=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){let r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){let r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,s,l,d,h){this._elementRef=t,this._iconRegistry=r,this._location=l,this._errorHandler=d,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Yt.EMPTY,h&&(h.color&&(this.color=this._defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),s||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let s=t.childNodes[r];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),r.forEach(s=>t.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let r=this._elementsWithExternalReferences;r&&r.forEach((s,l)=>{s.forEach(d=>{l.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){let r=t.querySelectorAll(vj),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let l=0;l<r.length;l++)iM.forEach(d=>{let h=r[l],p=h.getAttribute(d),g=p?p.match(yj):null;if(g){let v=s.get(h);v||(v=[],s.set(h,v)),v.push({name:d,value:g[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(qn(1)).subscribe(l=>this._setSvgElement(l),l=>{let d=`Error retrieving icon ${r}:${s}! ${l.message}`;this._errorHandler.handleError(new Error(d))})}}};e.\u0275fac=function(r){return new(r||e)(K(We),K(hj),Jo("aria-hidden"),K(mj),K(Oi),K(pj,8))},e.\u0275cmp=Pt({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){r&2&&(gn("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),ts(s.color?"mat-"+s.color:""),Ut("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Rt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[cn,kt],ngContentSelectors:cj,decls:1,vars:0,template:function(r,s){r&1&&(ni(),Zt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=e;return n})(),oM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn,sn]});let n=e;return n})();function bj(n,e){n&1&&Mt(0,"div",2)}var _j=new Ie("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var aM=(()=>{let e=class e{constructor(t,r,s,l,d){this._elementRef=t,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=l,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new ht,this._mode="determinate",this._transitionendHandler=h=>{this.animationEnd.observers.length===0||!h.target||!h.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=l==="NoopAnimations",d&&(d.color&&(this.color=this._defaultColor=d.color),this.mode=d.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(t){this._color=t}get value(){return this._value}set value(t){this._value=sM(t||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=sM(t||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}};e.\u0275fac=function(r){return new(r||e)(K(We),K(Fe),K(Pn),K(ei,8),K(_j,8))},e.\u0275cmp=Pt({type:e,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,s){r&2&&(gn("aria-valuenow",s._isIndeterminate()?null:s.value)("mode",s.mode),ts("mat-"+s.color),Ut("_mat-animation-noopable",s._isNoopAnimation)("mdc-linear-progress--animation-ready",!s._isNoopAnimation)("mdc-linear-progress--indeterminate",s._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Pi],bufferValue:[2,"bufferValue","bufferValue",Pi],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[cn,kt],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,s){r&1&&(Pe(0,"div",0),Mt(1,"div",1),ut(2,bj,1,0,"div",2),Ve(),Pe(3,"div",3),Mt(4,"span",4),Ve(),Pe(5,"div",5),Mt(6,"span",4),Ve()),r&2&&(Ge(),Or("flex-basis",s._getBufferBarFlexBasis()),Ge(),qt(s.mode==="buffer"?2:-1),Ge(),Or("transform",s._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0});let n=e;return n})();function sM(n,e=0,i=100){return Math.max(e,Math.min(i,n))}var lM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xe({type:e}),e.\u0275inj=Ye({imports:[sn]});let n=e;return n})();function Cj(n,e){n&1&&(Pe(0,"th",13),_n(1," Name "),Ve())}function wj(n,e){if(n&1&&(Pe(0,"td",14),_n(1),Ve()),n&2){let i=e.$implicit;Ge(),Pr(" ",i.name," ")}}function Ij(n,e){n&1&&(Pe(0,"th",13),_n(1," Value "),Ve())}function Ej(n,e){if(n&1&&(Pe(0,"td",14),_n(1),Ve()),n&2){let i=e.$implicit;Ge(),Pr(" ",i.value," ")}}function Tj(n,e){n&1&&Mt(0,"tr",15)}function xj(n,e){n&1&&Mt(0,"tr",16)}function Aj(n,e){if(n&1){let i=ta();Pe(0,"mat-button-toggle",13),rn("click",function(){let r=Xs(i).$implicit,s=fn();return Zs(s.onChangeTool(r))}),Pe(1,"mat-icon"),_n(2),Ve()()}if(n&2){let i=e.$implicit,t=fn();Mc("value",i),Mc("title",i),Ft("disabled",!t.dataLoaded||!t.canRunTool(i)),Ge(2),ho(t.getToolIcon(i))}}function Mj(n,e){if(n&1&&(Pe(0,"div",14)(1,"p"),_n(2,"Powered by "),Pe(3,"a",15),_n(4,"dwv"),Ve(),_n(5),Pe(6,"a",16),_n(7,"Angular"),Ve(),_n(8),Ve()()),n&2){let i=fn();Ge(5),Pr(" ",i.versions.dwv," and "),Ge(3),Pr(" ",i.versions.angular," ")}}var Rj=(()=>{class n{_fullMetaData;min;max;instanceNumber=0;instanceNumbers;keys;set data(i){this._fullMetaData=i,this.keys=Object.keys(this._fullMetaData);let t=this._fullMetaData["00200013"];if(typeof t<"u"){let r=t.value;typeof r=="string"&&(r=[r]),this.instanceNumbers=r.map(Number),this.instanceNumbers.sort((s,l)=>s-l),this.min=0,this.max=this.instanceNumbers.length-1,this.instanceNumber=this.instanceNumbers[this.min]}this.setDataSource(this.instanceNumber)}sort;displayedColumns=["name","value"];dataSource;setDataSource(i){this.instanceNumber=i;let t=this.getMetaArray(i),r="";this.dataSource&&(r=this.dataSource.filter),this.dataSource=new ym(t),this.dataSource.sort=this.sort,this.dataSource.filter=r}onkeyup(i){i.target instanceof HTMLInputElement&&this.applyFilter(i.target.value)}applyFilter(i){i=i.trim(),i=i.toLowerCase(),this.dataSource.filter=i}onsliderchange(i){let t=parseInt(i.target.value,10);this.setDataSource(this.instanceNumbers[t])}getMetaArray(i){let t;return this.isDicomMeta(this._fullMetaData)?t=this.getDicomTagReducer(this._fullMetaData,i,""):t=this.getTagReducer(this._fullMetaData),this.keys.reduce(t,[])}isDicomMeta(i){return typeof i["00020010"]<"u"}getTagReducer(i){return function(t,r){return t.push({name:r,value:i[r].value}),t}}getDicomTagReducer(i,t,r){return(s,l)=>{let d=(0,Vn.getTagFromKey)(l),h=d.getNameFromDictionary();typeof h>"u"&&(h="x"+d.getKey());let p=h,g=i[l];if(g.vr==="SQ"){s.push({name:(r?r+" ":"")+p,value:""});for(let v=0;v<g.value.length;++v){let _=g.value[v],C=Object.keys(_).reduce(this.getDicomTagReducer(_,t,r+"["+v+"]"),[]);s=s.concat(C)}}else{let v;typeof g.value.slice>"u"&&typeof g.value[t]<"u"&&(v=g.value[t]),p==="InstanceNumber"&&(v=t.toString()),g.vr[0]==="O"&&g.value.length>10&&(v=g.value.slice(0,10).toString()+"... (len:"+g.value.length+")"),typeof v>"u"&&(v=g.value.toString()),s.push({name:(r?r+" ":"")+p,value:v})}return s}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pt({type:n,selectors:[["dwv-tags-table"]],viewQuery:function(t,r){if(t&1&&vn(NA,7),t&2){let s;lt(s=ct())&&(r.sort=s.first)}},inputs:{data:"data"},standalone:!0,features:[kt],decls:17,vars:7,consts:[[1,"searchfield"],["matInput","","placeholder","Filter",1,"searchinput",3,"keyup"],["id","instanceslider","step","1","showTickMarks","true","matTooltip","Instance number",1,"instanceslider",3,"min","max"],["matSliderThumb","",1,"instanceinput",3,"input"],["for","instanceslider","matTooltip","Instance number",1,"instancelabel"],[1,"container","mat-elevation-z8"],["mat-table","","matSort","",1,"mat-elevation-z4",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,r){t&1&&(Pe(0,"div")(1,"mat-form-field",0)(2,"input",1),rn("keyup",function(l){return r.onkeyup(l)}),Ve()(),Pe(3,"mat-slider",2)(4,"input",3),rn("input",function(l){return r.onsliderchange(l)}),Ve()(),Pe(5,"label",4),_n(6),Ve(),Pe(7,"section",5)(8,"table",6),Js(9,7),ut(10,Cj,2,0,"th",8)(11,wj,2,1,"td",9),ea(),Js(12,10),ut(13,Ij,2,0,"th",8)(14,Ej,2,1,"td",9),ea(),ut(15,Tj,1,0,"tr",11)(16,xj,1,0,"tr",12),Ve()()()),t&2&&(Ge(3),Ft("min",r.min)("max",r.max),Ge(3),ho(r.instanceNumber),Ge(2),Ft("dataSource",r.dataSource),Ge(7),Ft("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),Ge(),Ft("matRowDefColumns",r.displayedColumns))},dependencies:[E5,G5,j5,q5,Nd,t5,HA,WA,ZA,$A,QA,KA,YA,XA,JA,e5,W5,Q5,sb],styles:[".instanceslider[_ngcontent-%COMP%]{width:25%;margin:10px}.instancelabel[_ngcontent-%COMP%]{margin-left:15px}.searchfield[_ngcontent-%COMP%]{padding-right:20px;width:50%}.searchinput[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]{height:400px;overflow:auto}"]})}return n})();var Oj=(()=>{class n{dialogRef;data;constructor(i,t){this.dialogRef=i,this.data=t}static \u0275fac=function(t){return new(t||n)(K(Gl),K(PS))};static \u0275cmp=Pt({type:n,selectors:[["dwv-tags-dialog"]],standalone:!0,features:[kt],decls:4,vars:2,consts:[["mat-dialog-title",""],[3,"data"]],template:function(t,r){t&1&&(Pe(0,"h1",0),_n(1),Ve(),Pe(2,"mat-dialog-content"),Mt(3,"dwv-tags-table",1),Ve()),t&2&&(Ge(),ho(r.data.title),Ge(2),Ft("data",r.data.value))},dependencies:[FA,kA,Rj],encapsulation:2})}return n})();Vn.decoderScripts.jpeg2000="assets/dwv/decoders/pdfjs/decode-jpeg2000.js";Vn.decoderScripts["jpeg-lossless"]="assets/dwv/decoders/rii-mango/decode-jpegloss.js";Vn.decoderScripts["jpeg-baseline"]="assets/dwv/decoders/pdfjs/decode-jpegbaseline.js";Vn.decoderScripts.rle="assets/dwv/decoders/dwv/decode-rle.js";var cM=(()=>{class n{dialog;showLegend=!1;uri;urls;versions={dwv:(0,Vn.getDwvVersion)(),angular:sI.full};tools={Scroll:new Vn.ToolConfig,ZoomAndPan:new Vn.ToolConfig,WindowLevel:new Vn.ToolConfig,Draw:new Vn.ToolConfig(["Ruler"])};toolNames=Object.keys(this.tools);selectedTool="Select Tool";loadProgress=0;dataLoaded=!1;dwvApp;metaData;orientation;dropboxDivId="dropBox";dropboxClassName="dropBox";borderClassName="dropBoxBorder";hoverClassName="hover";constructor(i){this.dialog=i}ngOnInit(){this.dwvApp=new Vn.App;let t={"*":[new Vn.ViewConfig("layerGroup0")]},r=new Vn.AppOptions(t);r.tools=this.tools,this.dwvApp.init(r);let s=0,l=0,d=0,h=!1;this.dwvApp.addEventListener("loadstart",()=>{this.dataLoaded=!1,s=0,l=0,d=0,h=!0,this.showDropbox(!1)}),this.dwvApp.addEventListener("loadprogress",p=>{this.loadProgress=p.loaded}),this.dwvApp.addEventListener("renderend",()=>{if(h){h=!1;let p="ZoomAndPan";this.dwvApp.canScroll()&&(p="Scroll"),this.onChangeTool(p)}}),this.dwvApp.addEventListener("load",p=>{this.metaData=this.dwvApp.getMetaData(p.dataid),this.dataLoaded=!0}),this.dwvApp.addEventListener("loadend",()=>{l&&(this.loadProgress=0,alert("Received errors during load. Check log for details."),s||this.showDropbox(!0)),d&&(this.loadProgress=0,alert("Load was aborted."),this.showDropbox(!0))}),this.dwvApp.addEventListener("loaditem",()=>{++s}),this.dwvApp.addEventListener("loaderror",p=>{console.error(p.error),++l}),this.dwvApp.addEventListener("loadabort",()=>{++d}),this.dwvApp.addEventListener("keydown",p=>{this.dwvApp.defaultOnKeydown(p)}),window.addEventListener("resize",this.dwvApp.onResize),this.uri!==void 0?this.dwvApp.loadFromUri(this.uri):this.urls!==void 0?this.dwvApp.loadURLs(this.urls):this.setupDropbox()}getToolIcon=i=>{let t;return i==="Scroll"?t="menu":i==="ZoomAndPan"?t="search":i==="WindowLevel"?t="contrast":i==="Draw"&&(t="straighten"),t};onChangeTool=i=>{this.dwvApp&&(this.selectedTool=i,this.dwvApp.setTool(i),i==="Draw"&&typeof this.tools.Draw.options<"u"&&this.onChangeShape(this.tools.Draw.options[0]))};canRunTool=i=>{let t;return i==="Scroll"?t=this.dwvApp.canScroll():i==="WindowLevel"?t=this.dwvApp.canWindowLevel():t=!0,t};onSingleToogleChange=i=>{i.source.buttonToggleGroup.value=""};toggleOrientation=()=>{typeof this.orientation<"u"?this.orientation==="axial"?this.orientation="coronal":this.orientation==="coronal"?this.orientation="sagittal":this.orientation==="sagittal"&&(this.orientation="axial"):this.orientation="coronal";let i=new Vn.ViewConfig("layerGroup0");i.orientation=this.orientation;let t={"*":[i]};this.dwvApp.setDataViewConfigs(t);let r=this.dwvApp.getDataIds();for(let s of r)this.dwvApp.render(s)};onChangeShape=i=>{this.dwvApp&&this.selectedTool==="Draw"&&this.dwvApp.setToolFeatures({shapeName:i})};onReset=()=>{this.dwvApp&&this.dwvApp.resetDisplay()};openTagsDialog=()=>{this.dialog.open(Oj,{data:{title:"DICOM Tags",value:this.metaData}})};setupDropbox=()=>{this.showDropbox(!0)};defaultHandleDragEvent=i=>{i.stopPropagation(),i.preventDefault()};onBoxDragOver=i=>{this.defaultHandleDragEvent(i);let t=document.getElementById(this.dropboxDivId);t&&t.className.indexOf(this.hoverClassName)===-1&&(t.className+=" "+this.hoverClassName)};onBoxDragLeave=i=>{this.defaultHandleDragEvent(i);let t=document.getElementById(this.dropboxDivId);t&&t.className.indexOf(this.hoverClassName)!==-1&&(t.className=t.className.replace(" "+this.hoverClassName,""))};onDrop=i=>{if(this.defaultHandleDragEvent(i),i.dataTransfer){let t=Array.from(i.dataTransfer.files);this.dwvApp.loadFiles(t)}};onInputFile=i=>{let t=i.target;if(t&&t.files){let r=Array.from(t.files);this.dwvApp.loadFiles(r)}};showDropbox=i=>{let t=document.getElementById(this.dropboxDivId);if(!t)return;let r=document.getElementById("layerGroup0");if(i){if(t.className=this.dropboxClassName+" "+this.borderClassName,t.innerHTML===""){let s=document.createElement("p");s.appendChild(document.createTextNode("Drag and drop data here or "));let l=document.createElement("input");l.onchange=this.onInputFile,l.type="file",l.multiple=!0,l.id="input-file",l.style.display="none";let d=document.createElement("label");d.htmlFor="input-file";let h=document.createElement("a");h.appendChild(document.createTextNode("click here")),h.id="input-file-link",d.appendChild(h),s.appendChild(l),s.appendChild(d),t.appendChild(s)}t.setAttribute("style","display:initial"),r&&(r.removeEventListener("dragover",this.defaultHandleDragEvent),r.removeEventListener("dragleave",this.defaultHandleDragEvent),r.removeEventListener("drop",this.onDrop)),t.addEventListener("dragover",this.onBoxDragOver),t.addEventListener("dragleave",this.onBoxDragLeave),t.addEventListener("drop",this.onDrop)}else t.className=this.dropboxClassName,t.innerHTML="",t.setAttribute("style","display:none"),t.removeEventListener("dragover",this.onBoxDragOver),t.removeEventListener("dragleave",this.onBoxDragLeave),t.removeEventListener("drop",this.onDrop),r&&(r.addEventListener("dragover",this.defaultHandleDragEvent),r.addEventListener("dragleave",this.defaultHandleDragEvent),r.addEventListener("drop",this.onDrop))};static \u0275fac=function(t){return new(t||n)(K(cm))};static \u0275cmp=Pt({type:n,selectors:[["dwv-angular"]],inputs:{showLegend:"showLegend",uri:"uri",urls:"urls"},standalone:!0,features:[kt],decls:20,vars:7,consts:[["id","dwv"],["mode","determinate",3,"value"],[1,"button-row"],["name","tool",3,"disabled"],["color","primary",3,"value","title","disabled","click",4,"ngFor","ngForOf"],["name","reset",3,"change","disabled"],["color","primary","title","Reset",3,"click"],["color","primary","title","Toggle Orientation",3,"click"],["name","tags",3,"change","disabled"],["color","primary","title","Tags",3,"click"],["id","layerGroup0",1,"layerGroup"],["id","dropBox"],["class","legend mat-small",4,"ngIf"],["color","primary",3,"click","value","title","disabled"],[1,"legend","mat-small"],["href","https://github.com/ivmartel/dwv"],["href","https://github.com/angular/angular"]],template:function(t,r){t&1&&(Pe(0,"div",0),Mt(1,"mat-progress-bar",1),Pe(2,"div",2)(3,"mat-button-toggle-group",3),ut(4,Aj,3,4,"mat-button-toggle",4),Ve(),Pe(5,"mat-button-toggle-group",5),rn("change",function(l){return r.onSingleToogleChange(l)}),Pe(6,"mat-button-toggle",6),rn("click",function(){return r.onReset()}),Pe(7,"mat-icon"),_n(8,"refresh"),Ve()()(),Pe(9,"mat-button-toggle-group",5),rn("change",function(l){return r.onSingleToogleChange(l)}),Pe(10,"mat-button-toggle",7),rn("click",function(){return r.toggleOrientation()}),Pe(11,"mat-icon"),_n(12,"cameraswitch"),Ve()()(),Pe(13,"mat-button-toggle-group",8),rn("change",function(l){return r.onSingleToogleChange(l)}),Pe(14,"mat-button-toggle",9),rn("click",function(){return r.openTagsDialog()}),Pe(15,"mat-icon"),_n(16,"library_books"),Ve()()()(),Pe(17,"div",10),Mt(18,"div",11),Ve(),ut(19,Mj,9,2,"div",12),Ve()),t&2&&(Ge(),Mc("value",r.loadProgress),Ge(2),Ft("disabled",!r.dataLoaded),Ge(),Ft("ngForOf",r.toolNames),Ge(),Ft("disabled",!r.dataLoaded),Ge(4),Ft("disabled",!r.dataLoaded),Ge(4),Ft("disabled",!r.dataLoaded),Ge(6),Ft("ngIf",r.showLegend))},dependencies:[Fc,II,EI,$5,K5,ab,Pm,LA,oM,rM,lM,aM],styles:[`#dwv{height:90%}.legend{text-align:center;font-size:8pt;margin:1em}.layerGroup{position:relative;padding:0;display:flex;justify-content:center;height:90%}.layer{position:absolute;pointer-events:none}.dropBox{margin:auto;text-align:center;vertical-align:middle;width:50%;height:75%}
`],encapsulation:2})}return n})();var Lm=class n{title="dwv-angular-app";uri;ngOnInit(){window.location.search!==""&&(this.uri=window.location.href)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=Pt({type:n,selectors:[["app-root"]],standalone:!0,features:[kt],decls:1,vars:2,consts:[[3,"showLegend","uri"]],template:function(i,t){i&1&&Mt(0,"dwv-angular",0),i&2&&Ft("showLegend",!0)("uri",t.uri)},dependencies:[cM],encapsulation:2})};UI(Lm,wE).catch(n=>console.error(n));
