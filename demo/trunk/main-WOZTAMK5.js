var qR=Object.create;var Mg=Object.defineProperty,GR=Object.defineProperties,jR=Object.getOwnPropertyDescriptor,zR=Object.getOwnPropertyDescriptors,HR=Object.getOwnPropertyNames,fu=Object.getOwnPropertySymbols,QR=Object.getPrototypeOf,Rg=Object.prototype.hasOwnProperty,K_=Object.prototype.propertyIsEnumerable;var Z_=(n,e,t)=>e in n?Mg(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,we=(n,e)=>{for(var t in e||={})Rg.call(e,t)&&Z_(n,t,e[t]);if(fu)for(var t of fu(e))K_.call(e,t)&&Z_(n,t,e[t]);return n},Bt=(n,e)=>GR(n,zR(e));var nc=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var ic=(n,e)=>{var t={};for(var i in n)Rg.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&fu)for(var i of fu(n))e.indexOf(i)<0&&K_.call(n,i)&&(t[i]=n[i]);return t};var Be=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var WR=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of HR(e))!Rg.call(n,o)&&o!==t&&Mg(n,o,{get:()=>e[o],enumerable:!(i=jR(e,o))||i.enumerable});return n};var $R=(n,e,t)=>(t=n!=null?qR(QR(n)):{},WR(e||!n||!n.__esModule?Mg(t,"default",{value:n,enumerable:!0}):t,n));var pt=Be(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn._registerNode=Kn.Konva=Kn.glob=void 0;var V6=Math.PI/180;function B6(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}Kn.glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{};Kn.Konva={_global:Kn.glob,version:"9.3.16",isBrowser:B6(),isUnminified:/param/.test(function(n){}.toString()),dblClickWindow:400,getAngle(n){return Kn.Konva.angleDeg?n*V6:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Kn.Konva.DD.isDragging},isTransforming(){var n;return(n=Kn.Konva.Transformer)===null||n===void 0?void 0:n.isTransforming()},isDragReady(){return!!Kn.Konva.DD.node},releaseCanvasOnDestroy:!0,document:Kn.glob.document,_injectGlobal(n){Kn.glob.Konva=n}};var U6=n=>{Kn.Konva[n.prototype.getClassName()]=n};Kn._registerNode=U6;Kn.Konva._injectGlobal(Kn.Konva)});var Dn=Be(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.Util=un.Transform=void 0;var sv=pt(),cv=class n{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new n(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){let t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){let t=Math.cos(e),i=Math.sin(e),o=this.m[0]*t+this.m[2]*i,s=this.m[1]*t+this.m[3]*i,l=this.m[0]*-i+this.m[2]*t,d=this.m[1]*-i+this.m[3]*t;return this.m[0]=o,this.m[1]=s,this.m[2]=l,this.m[3]=d,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){let i=this.m[0]+this.m[2]*t,o=this.m[1]+this.m[3]*t,s=this.m[2]+this.m[0]*e,l=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=o,this.m[2]=s,this.m[3]=l,this}multiply(e){let t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],o=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],l=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],d=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=s,this.m[4]=l,this.m[5]=d,this}invert(){let e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,o=-this.m[2]*e,s=this.m[0]*e,l=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),d=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=o,this.m[3]=s,this.m[4]=l,this.m[5]=d,this}getMatrix(){return this.m}decompose(){let e=this.m[0],t=this.m[1],i=this.m[2],o=this.m[3],s=this.m[4],l=this.m[5],d=e*o-t*i,f={x:s,y:l,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){let p=Math.sqrt(e*e+t*t);f.rotation=t>0?Math.acos(e/p):-Math.acos(e/p),f.scaleX=p,f.scaleY=d/p,f.skewX=(e*i+t*o)/d,f.skewY=0}else if(i!=0||o!=0){let p=Math.sqrt(i*i+o*o);f.rotation=Math.PI/2-(o>0?Math.acos(-i/p):-Math.acos(i/p)),f.scaleX=d/p,f.scaleY=p,f.skewX=0,f.skewY=(e*i+t*o)/d}return f.rotation=un.Util._getRotation(f.rotation),f}};un.Transform=cv;var q6="[object Array]",G6="[object Number]",j6="[object String]",z6="[object Boolean]",H6=Math.PI/180,Q6=180/Math.PI,av="#",W6="",$6="0",Y6="Konva warning: ",BE="Konva error: ",X6="rgb(",lv={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Z6=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ff=[],K6=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,60)};un.Util={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===q6},_isNumber(n){return Object.prototype.toString.call(n)===G6&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===j6},_isBoolean(n){return Object.prototype.toString.call(n)===z6},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;let e=n[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){Ff.push(n),Ff.length===1&&K6(function(){let e=Ff;Ff=[],e.forEach(function(t){t()})})},createCanvasElement(){let n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,e){let t=un.Util.createImageElement();t.onload=function(){e(t)},t.src=n},_rgbToHex(n,e,t){return((1<<24)+(n<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(n){n=n.replace(av,W6);let e=parseInt(n,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=$6+n;return av+n},getRGB(n){let e;return n in lv?(e=lv[n],{r:e[0],g:e[1],b:e[2]}):n[0]===av?this._hexToRgb(n.substring(1)):n.substr(0,4)===X6?(e=Z6.exec(n.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",un.Util._namedColorToRBA(n)||un.Util._hex3ColorToRGBA(n)||un.Util._hex4ColorToRGBA(n)||un.Util._hex6ColorToRGBA(n)||un.Util._hex8ColorToRGBA(n)||un.Util._rgbColorToRGBA(n)||un.Util._rgbaColorToRGBA(n)||un.Util._hslColorToRGBA(n)},_namedColorToRBA(n){let e=lv[n.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];let e=n.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];let e=n.split(/ *, */).map((t,i)=>t.slice(-1)==="%"?i===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){let[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(t[0])/360,o=Number(t[1])/100,s=Number(t[2])/100,l,d,f;if(o===0)return f=s*255,{r:Math.round(f),g:Math.round(f),b:Math.round(f),a:1};s<.5?l=s*(1+o):l=s+o-s*o;let p=2*s-l,g=[0,0,0];for(let y=0;y<3;y++)d=i+1/3*-(y-1),d<0&&d++,d>1&&d--,6*d<1?f=p+(l-p)*6*d:2*d<1?f=l:3*d<2?f=p+(l-p)*(2/3-d)*6:f=p,g[y]=f*255;return{r:Math.round(g[0]),g:Math.round(g[1]),b:Math.round(g[2]),a:1}}},haveIntersection(n,e){return!(e.x>n.x+n.width||e.x+e.width<n.x||e.y>n.y+n.height||e.y+e.height<n.y)},cloneObject(n){let e={};for(let t in n)this._isPlainObject(n[t])?e[t]=this.cloneObject(n[t]):this._isArray(n[t])?e[t]=this.cloneArray(n[t]):e[t]=n[t];return e},cloneArray(n){return n.slice(0)},degToRad(n){return n*H6},radToDeg(n){return n*Q6},_degToRad(n){return un.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),un.Util.degToRad(n)},_radToDeg(n){return un.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),un.Util.radToDeg(n)},_getRotation(n){return sv.Konva.angleDeg?un.Util.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(BE+n)},error(n){console.error(BE+n)},warn(n){sv.Konva.showWarnings&&console.warn(Y6+n)},each(n,e){for(let t in n)e(t,n[t])},_inRange(n,e,t){return e<=n&&n<t},_getProjectionToSegment(n,e,t,i,o,s){let l,d,f,p=(n-t)*(n-t)+(e-i)*(e-i);if(p==0)l=n,d=e,f=(o-t)*(o-t)+(s-i)*(s-i);else{let g=((o-n)*(t-n)+(s-e)*(i-e))/p;g<0?(l=n,d=e,f=(n-o)*(n-o)+(e-s)*(e-s)):g>1?(l=t,d=i,f=(t-o)*(t-o)+(i-s)*(i-s)):(l=n+g*(t-n),d=e+g*(i-e),f=(l-o)*(l-o)+(d-s)*(d-s))}return[l,d,f]},_getProjectionToLine(n,e,t){let i=un.Util.cloneObject(n),o=Number.MAX_VALUE;return e.forEach(function(s,l){if(!t&&l===e.length-1)return;let d=e[(l+1)%e.length],f=un.Util._getProjectionToSegment(s.x,s.y,d.x,d.y,n.x,n.y),p=f[0],g=f[1],y=f[2];y<o&&(i.x=p,i.y=g,o=y)}),i},_prepareArrayForTween(n,e,t){let i,o=[],s=[];if(n.length>e.length){let d=e;e=n,n=d}for(i=0;i<n.length;i+=2)o.push({x:n[i],y:n[i+1]});for(i=0;i<e.length;i+=2)s.push({x:e[i],y:e[i+1]});let l=[];return s.forEach(function(d){let f=un.Util._getProjectionToLine(d,o,t);l.push(f.x),l.push(f.y)}),l},_prepareToStringify(n){let e;n.visitedByCircularReferenceRemoval=!0;for(let t in n)if(n.hasOwnProperty(t)&&n[t]&&typeof n[t]=="object"){if(e=Object.getOwnPropertyDescriptor(n,t),n[t].visitedByCircularReferenceRemoval||un.Util._isElement(n[t]))if(e.configurable)delete n[t];else return null;else if(un.Util._prepareToStringify(n[t])===null)if(e.configurable)delete n[t];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,e){for(let t in e)n[t]=e[t];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){sv.Konva.releaseCanvasOnDestroy&&n.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(n,e,t,i){let o=0,s=0,l=0,d=0;typeof i=="number"?o=s=l=d=Math.min(i,e/2,t/2):(o=Math.min(i[0]||0,e/2,t/2),s=Math.min(i[1]||0,e/2,t/2),d=Math.min(i[2]||0,e/2,t/2),l=Math.min(i[3]||0,e/2,t/2)),n.moveTo(o,0),n.lineTo(e-s,0),n.arc(e-s,s,s,Math.PI*3/2,0,!1),n.lineTo(e,t-d),n.arc(e-d,t-d,d,0,Math.PI/2,!1),n.lineTo(l,t),n.arc(l,t-l,l,Math.PI/2,Math.PI,!1),n.lineTo(0,o),n.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}}});var _t=Be(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.RGBComponent=J6;Ui.alphaComponent=eN;Ui.getNumberValidator=tN;Ui.getNumberOrArrayOfNumbersValidator=nN;Ui.getNumberOrAutoValidator=iN;Ui.getStringValidator=rN;Ui.getStringOrGradientValidator=oN;Ui.getFunctionValidator=sN;Ui.getNumberArrayValidator=aN;Ui.getBooleanValidator=lN;Ui.getComponentValidator=cN;var go=pt(),In=Dn();function yo(n){return In.Util._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||In.Util._isBoolean(n)?n:Object.prototype.toString.call(n)}function J6(n){return n>255?255:n<0?0:Math.round(n)}function eN(n){return n>1?1:n<1e-4?1e-4:n}function tN(){if(go.Konva.isUnminified)return function(n,e){return In.Util._isNumber(n)||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}}function nN(n){if(go.Konva.isUnminified)return function(e,t){let i=In.Util._isNumber(e),o=In.Util._isArray(e)&&e.length==n;return!i&&!o&&In.Util.warn(yo(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}}function iN(){if(go.Konva.isUnminified)return function(n,e){return In.Util._isNumber(n)||n==="auto"||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}}function rN(){if(go.Konva.isUnminified)return function(n,e){return In.Util._isString(n)||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}}function oN(){if(go.Konva.isUnminified)return function(n,e){let t=In.Util._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||i||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}}function sN(){if(go.Konva.isUnminified)return function(n,e){return In.Util._isFunction(n)||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),n}}function aN(){if(go.Konva.isUnminified)return function(n,e){let t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&n instanceof t||(In.Util._isArray(n)?n.forEach(function(i){In.Util._isNumber(i)||In.Util.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}}function lN(){if(go.Konva.isUnminified)return function(n,e){return n===!0||n===!1||In.Util.warn(yo(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}}function cN(n){if(go.Konva.isUnminified)return function(e,t){return e==null||In.Util.isObject(e)||In.Util.warn(yo(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}}});var gt=Be(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.Factory=void 0;var qi=Dn(),dN=_t(),nd="get",id="set";fr.Factory={addGetterSetter(n,e,t,i,o){fr.Factory.addGetter(n,e,t),fr.Factory.addSetter(n,e,i,o),fr.Factory.addOverloadedGetterSetter(n,e)},addGetter(n,e,t){let i=nd+qi.Util._capitalize(e);n.prototype[i]=n.prototype[i]||function(){let o=this.attrs[e];return o===void 0?t:o}},addSetter(n,e,t,i){let o=id+qi.Util._capitalize(e);n.prototype[o]||fr.Factory.overWriteSetter(n,e,t,i)},overWriteSetter(n,e,t,i){let o=id+qi.Util._capitalize(e);n.prototype[o]=function(s){return t&&s!==void 0&&s!==null&&(s=t.call(this,s,e)),this._setAttr(e,s),i&&i.call(this),this}},addComponentsGetterSetter(n,e,t,i,o){let s=t.length,l=qi.Util._capitalize,d=nd+l(e),f=id+l(e),p,g;n.prototype[d]=function(){let D={};for(p=0;p<s;p++)g=t[p],D[g]=this.getAttr(e+l(g));return D};let y=(0,dN.getComponentValidator)(t);n.prototype[f]=function(D){let b=this.attrs[e],C;i&&(D=i.call(this,D)),y&&y.call(this,D,e);for(C in D)D.hasOwnProperty(C)&&this._setAttr(e+l(C),D[C]);return D||t.forEach(w=>{this._setAttr(e+l(w),void 0)}),this._fireChangeEvent(e,b,D),o&&o.call(this),this},fr.Factory.addOverloadedGetterSetter(n,e)},addOverloadedGetterSetter(n,e){let t=qi.Util._capitalize(e),i=id+t,o=nd+t;n.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[o]()}},addDeprecatedGetterSetter(n,e,t,i){qi.Util.error("Adding deprecated "+e);let o=nd+qi.Util._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[o]=function(){qi.Util.error(s);let l=this.attrs[e];return l===void 0?t:l},fr.Factory.addSetter(n,e,i,function(){qi.Util.error(s)}),fr.Factory.addOverloadedGetterSetter(n,e)},backCompat(n,e){qi.Util.each(e,function(t,i){let o=n.prototype[i],s=nd+qi.Util._capitalize(t),l=id+qi.Util._capitalize(t);function d(){o.apply(this,arguments),qi.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[t]=d,n.prototype[s]=d,n.prototype[l]=d})},afterSetFilter(){this._filterUpToDate=!1}}});var hv=Be(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.HitContext=os.SceneContext=os.Context=void 0;var GE=Dn(),uN=pt();function hN(n){let e=[],t=n.length,i=GE.Util,o,s;for(o=0;o<t;o++)s=n[o],i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),e.push(s);return e}var UE=",",fN="(",mN=")",pN="([",gN="])",yN=";",vN="()",SN="=",qE=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],bN=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_N=100,ul=class{constructor(e){this.canvas=e,uN.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,o=i.length,s="",l,d,f,p;for(l=0;l<o;l++)d=i[l],f=d.method,f?(p=d.args,s+=f,e?s+=vN:GE.Util._isArray(p[0])?s+=pN+p.join(UE)+gN:(t&&(p=p.map(g=>typeof g=="number"?Math.floor(g):g)),s+=fN+p.join(UE)+mN)):(s+=d.property,e||(s+=SN+d.val)),s+=yN;return s}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=_N&&t.shift()}reset(){let e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){let t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){let t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){let t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){let t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,o,s,l){this._context.arc(e,t,i,o,s,l)}arcTo(e,t,i,o,s){this._context.arcTo(e,t,i,o,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,o,s,l){this._context.bezierCurveTo(e,t,i,o,s,l)}clearRect(e,t,i,o){this._context.clearRect(e,t,i,o)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){let i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,o){return this._context.createLinearGradient(e,t,i,o)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,o,s,l){return this._context.createRadialGradient(e,t,i,o,s,l)}drawImage(e,t,i,o,s,l,d,f,p){let g=arguments,y=this._context;g.length===3?y.drawImage(e,t,i):g.length===5?y.drawImage(e,t,i,o,s):g.length===9&&y.drawImage(e,t,i,o,s,l,d,f,p)}ellipse(e,t,i,o,s,l,d,f){this._context.ellipse(e,t,i,o,s,l,d,f)}isPointInPath(e,t,i,o){return i?this._context.isPointInPath(i,e,t,o):this._context.isPointInPath(e,t,o)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,o){this._context.fillRect(e,t,i,o)}strokeRect(e,t,i,o){this._context.strokeRect(e,t,i,o)}fillText(e,t,i,o){o?this._context.fillText(e,t,i,o):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,o){return this._context.getImageData(e,t,i,o)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,o){this._context.rect(e,t,i,o)}roundRect(e,t,i,o,s){this._context.roundRect(e,t,i,o,s)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,o){this._context.quadraticCurveTo(e,t,i,o)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,o,s,l){this._context.setTransform(e,t,i,o,s,l)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,o){this._context.strokeText(e,t,i,o)}transform(e,t,i,o,s,l){this._context.transform(e,t,i,o,s,l)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=qE.length,i=this.setAttr,o,s,l=function(d){let f=e[d],p;e[d]=function(){return s=hN(Array.prototype.slice.call(arguments,0)),p=f.apply(e,arguments),e._trace({method:d,args:s}),p}};for(o=0;o<t;o++)l(qE[o]);e.setAttr=function(){i.apply(e,arguments);let d=arguments[0],f=arguments[1];(d==="shadowOffsetX"||d==="shadowOffsetY"||d==="shadowBlur")&&(f=f/this.canvas.getPixelRatio()),e._trace({property:d,val:f})}}_applyGlobalCompositeOperation(e){let t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}};os.Context=ul;bN.forEach(function(n){Object.defineProperty(ul.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});var dv=class extends ul{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){let t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){let t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){let t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){let t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}let o=e.getFillPatternImage();if(o&&i==="pattern"){this._fillPattern(e);return}let s=e.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(e);return}let l=e.getFillRadialGradientColorStops();if(l&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):o?this._fillPattern(e):s?this._fillLinearGradient(e):l&&this._fillRadialGradient(e)}_strokeLinearGradient(e){let t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),o=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(t.x,t.y,i.x,i.y);if(o){for(let l=0;l<o.length;l+=2)s.addColorStop(o[l],o[l+1]);this.setAttr("strokeStyle",s)}}_stroke(e){let t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();let s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,o;let s=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",l=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,d=(o=e.getShadowOffset())!==null&&o!==void 0?o:{x:0,y:0},f=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),g=f.x*p,y=f.y*p;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",l*Math.min(Math.abs(g),Math.abs(y))),this.setAttr("shadowOffsetX",d.x*g),this.setAttr("shadowOffsetY",d.y*y)}};os.SceneContext=dv;var uv=class extends ul{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){let t=e.getStrokeScaleEnabled();if(!t){this.save();let s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);let i=e.hitStrokeWidth(),o=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}};os.HitContext=uv});var rd=Be(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.HitCanvas=ss.SceneCanvas=ss.Canvas=void 0;var Lf=Dn(),jE=hv(),zE=pt(),DN=gt(),CN=_t(),kf;function wN(){if(kf)return kf;let n=Lf.Util.createCanvasElement(),e=n.getContext("2d");return kf=function(){let t=zE.Konva._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}(),Lf.Util.releaseCanvas(n),kf}var hl=class{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;let i=(e||{}).pixelRatio||zE.Konva.pixelRatio||wN();this.pixelRatio=i,this._canvas=Lf.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){let t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";let t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";let t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(o){return Lf.Util.error("Unable to get data URL. "+o.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ss.Canvas=hl;DN.Factory.addGetterSetter(hl,"pixelRatio",void 0,(0,CN.getNumberValidator)());var fv=class extends hl{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new jE.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}};ss.SceneCanvas=fv;var mv=class extends hl{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new jE.HitContext(this),this.setSize(e.width,e.height)}};ss.HitCanvas=mv});var Nf=Be(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.DD=void 0;var od=pt(),IN=Dn();Hn.DD={get isDragging(){let n=!1;return Hn.DD._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return Hn.DD._dragElements.forEach(e=>{n=e.node}),n},_dragElements:new Map,_drag(n){let e=[];Hn.DD._dragElements.forEach((t,i)=>{let{node:o}=t,s=o.getStage();s.setPointersPositions(n),t.pointerId===void 0&&(t.pointerId=IN.Util._getFirstPointerId(n));let l=s._changedPointerPositions.find(d=>d.id===t.pointerId);if(l){if(t.dragStatus!=="dragging"){let d=o.dragDistance();if(Math.max(Math.abs(l.x-t.startPointerPos.x),Math.abs(l.y-t.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,t),e.push(o)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:n},!0)})},_endDragBefore(n){let e=[];Hn.DD._dragElements.forEach(t=>{let{node:i}=t,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(Hn.DD.justDragged=!0,od.Konva._mouseListenClick=!1,od.Konva._touchListenClick=!1,od.Konva._pointerListenClick=!1,t.dragStatus="stopped");let l=t.node.getLayer()||t.node instanceof od.Konva.Stage&&t.node;l&&e.indexOf(l)===-1&&e.push(l)}),e.forEach(t=>{t.draw()})},_endDragAfter(n){Hn.DD._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:n},!0),e.dragStatus!=="dragging"&&Hn.DD._dragElements.delete(t)})}};od.Konva.isBrowser&&(window.addEventListener("mouseup",Hn.DD._endDragBefore,!0),window.addEventListener("touchend",Hn.DD._endDragBefore,!0),window.addEventListener("touchcancel",Hn.DD._endDragBefore,!0),window.addEventListener("mousemove",Hn.DD._drag),window.addEventListener("touchmove",Hn.DD._drag),window.addEventListener("mouseup",Hn.DD._endDragAfter,!1),window.addEventListener("touchend",Hn.DD._endDragAfter,!1),window.addEventListener("touchcancel",Hn.DD._endDragAfter,!1))});var En=Be(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.Node=void 0;var Rt=Dn(),ad=gt(),sd=rd(),as=pt(),Ki=Nf(),Pn=_t(),Bf="absoluteOpacity",Vf="allEventListeners",vo="absoluteTransform",HE="absoluteScale",ua="canvas",EN="Change",TN="children",xN="konva",pv="listening",QE="mouseenter",WE="mouseleave",$E="set",YE="Shape",Uf=" ",XE="stage",ls="transform",AN="Stage",gv="visible",MN=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Uf),RN=1,tt=class n{constructor(e){this._id=RN++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===ls||e===vo)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===ls||e===vo)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){let o=t.map(s=>s+"Change.konva").join(Uf);this.on(o,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(ua)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===vo&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(ua)){let{scene:e,filter:t,hit:i}=this._cache.get(ua);Rt.Util.releaseCanvas(e,t,i),this._cache.delete(ua)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){let t=e||{},i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let o=Math.ceil(t.width||i.width),s=Math.ceil(t.height||i.height),l=t.pixelRatio,d=t.x===void 0?Math.floor(i.x):t.x,f=t.y===void 0?Math.floor(i.y):t.y,p=t.offset||0,g=t.drawBorder||!1,y=t.hitCanvasPixelRatio||1;if(!o||!s){Rt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}let D=Math.abs(Math.round(i.x)-d)>.5?1:0,b=Math.abs(Math.round(i.y)-f)>.5?1:0;o+=p*2+D,s+=p*2+b,d-=p,f-=p;let C=new sd.SceneCanvas({pixelRatio:l,width:o,height:s}),w=new sd.SceneCanvas({pixelRatio:l,width:0,height:0,willReadFrequently:!0}),x=new sd.HitCanvas({pixelRatio:y,width:o,height:s}),M=C.getContext(),F=x.getContext();return x.isCache=!0,C.isCache=!0,this._cache.delete(ua),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(C.getContext()._context.imageSmoothingEnabled=!1,w.getContext()._context.imageSmoothingEnabled=!1),M.save(),F.save(),M.translate(-d,-f),F.translate(-d,-f),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Bf),this._clearSelfAndDescendantCache(HE),this.drawScene(C,this),this.drawHit(x,this),this._isUnderCache=!1,M.restore(),F.restore(),g&&(M.save(),M.beginPath(),M.rect(0,0,o,s),M.closePath(),M.setAttr("strokeStyle","red"),M.setAttr("lineWidth",5),M.stroke(),M.restore()),this._cache.set(ua,{scene:C,filter:w,hit:x,x:d,y:f}),this._requestDraw(),this}isCached(){return this._cache.has(ua)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){let i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],o=1/0,s=1/0,l=-1/0,d=-1/0,f=this.getAbsoluteTransform(t);return i.forEach(function(p){let g=f.point(p);o===void 0&&(o=l=g.x,s=d=g.y),o=Math.min(o,g.x),s=Math.min(s,g.y),l=Math.max(l,g.x),d=Math.max(d,g.y)}),{x:o,y:s,width:l-o,height:d-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);let t=this._getCanvasCache();e.translate(t.x,t.y);let i=this._getCachedSceneCanvas(),o=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/o,i.height/o),e.restore()}_drawCachedHitCanvas(e){let t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,o=t.filter,s=o.getContext(),l,d,f,p;if(e){if(!this._filterUpToDate){let g=i.pixelRatio;o.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio);try{for(l=e.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),d=s.getImageData(0,0,o.getWidth(),o.getHeight()),f=0;f<l;f++){if(p=e[f],typeof p!="function"){Rt.Util.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,d),s.putImageData(d,0,0)}}catch(y){Rt.Util.error("Unable to apply filter. "+y.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return o}return i}on(e,t){if(this._cache&&this._cache.delete(Vf),arguments.length===3)return this._delegate.apply(this,arguments);let i=e.split(Uf),o=i.length,s,l,d,f,p;for(s=0;s<o;s++)l=i[s],d=l.split("."),f=d[0],p=d[1]||"",this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:p,handler:t});return this}off(e,t){let i=(e||"").split(Uf),o=i.length,s,l,d,f,p,g;if(this._cache&&this._cache.delete(Vf),!e)for(l in this.eventListeners)this._off(l);for(s=0;s<o;s++)if(d=i[s],f=d.split("."),p=f[0],g=f[1],p)this.eventListeners[p]&&this._off(p,g,t);else for(l in this.eventListeners)this._off(l,g,t);return this}dispatchEvent(e){let t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){let o=this;this.on(e,function(s){let l=s.target.findAncestors(t,!0,o);for(let d=0;d<l.length;d++)s=Rt.Util.cloneObject(s),s.currentTarget=l[d],i.call(l[d],s)})}remove(){return this.isDragging()&&this.stopDrag(),Ki.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(vo),this._clearSelfAndDescendantCache(Bf),this._clearSelfAndDescendantCache(HE),this._clearSelfAndDescendantCache(XE),this._clearSelfAndDescendantCache(gv),this._clearSelfAndDescendantCache(pv)}_remove(){this._clearCaches();let e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){let t="get"+Rt.Util._capitalize(e);return Rt.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==TN&&(i=$E+Rt.Util._capitalize(t),Rt.Util._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(pv,this._isListening)}_isListening(e){if(!this.listening())return!1;let i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(gv,this._isVisible)}_isVisible(e){if(!this.visible())return!1;let i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);let i=this.getLayer(),o=!1;Ki.DD._dragElements.forEach(l=>{l.dragStatus==="dragging"&&(l.node.nodeType==="Stage"||l.node.getLayer()===i)&&(o=!0)});let s=!t&&!as.Konva.hitOnDragEnabled&&(o||as.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,o,s,l,d;function f(g){for(o=[],s=g.length,l=0;l<s;l++)d=g[l],i++,d.nodeType!==YE&&(o=o.concat(d.getChildren().slice())),d._id===t._id&&(l=s);o.length>0&&o[0].getDepth()<=e&&f(o)}let p=this.getStage();return t.nodeType!==AN&&p&&f(p.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ls),this._clearSelfAndDescendantCache(vo)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){let e=this.getStage();if(!e)return null;let t=e.getPointerPosition();if(!t)return null;let i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);let o=this.getAbsoluteTransform(e).getMatrix(),s=new Rt.Transform,l=this.offset();return s.m=o.slice(),s.translate(l.x,l.y),s.getTranslation()}setAbsolutePosition(e){let l=this._clearTransform(),{x:t,y:i}=l,o=ic(l,["x","y"]);this.attrs.x=t,this.attrs.y=i,this._clearCache(ls);let s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(o),this.setPosition({x:e.x,y:e.y}),this._clearCache(ls),this._clearSelfAndDescendantCache(vo),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){let e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,o=this.x(),s=this.y();return t!==void 0&&(o+=t),i!==void 0&&(s+=i),this.setPosition({x:o,y:s}),this}_eachAncestorReverse(e,t){let i=[],o=this.getParent(),s,l;if(!(t&&t._id===this._id)){for(i.unshift(this);o&&(!t||o._id!==t._id);)i.unshift(o),o=o.parent;for(s=i.length,l=0;l<s;l++)e(i[l])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Rt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;let e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Rt.Util.warn("Node has no parent. moveUp function is ignored."),!1;let e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Rt.Util.warn("Node has no parent. moveDown function is ignored."),!1;let e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Rt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;let e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Rt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Rt.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");let t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Bf,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,o,s,l,d={attrs:{},className:this.getClassName()};for(t in e)i=e[t],l=Rt.Util.isObject(i)&&!Rt.Util._isPlainObject(i)&&!Rt.Util._isArray(i),!l&&(o=typeof this[t]=="function"&&this[t],delete e[t],s=o?o.call(this):null,e[t]=i,s!==i&&(d.attrs[t]=i));return Rt.Util._prepareToStringify(d)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){let o=[];t&&this._isMatch(e)&&o.push(this);let s=this.parent;for(;s;){if(s===i)return o;s._isMatch(e)&&o.push(s),s=s.parent}return o}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,o,s;for(o=0;o<i;o++)if(s=t[o],Rt.Util.isValidSelector(s)||(Rt.Util.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Rt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Rt.Util.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){let e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(XE,this._getStage)}_getStage(){let e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(vo,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Rt.Transform,this._eachAncestorReverse(function(i){let o=i.transformsEnabled();o==="all"?t.multiply(i.getTransform()):o==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(vo)||new Rt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();let i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){let o=this.attrs.x||0,s=this.attrs.y||0,l=this.attrs.offsetX||0,d=this.attrs.offsetY||0;t.translate(o-l,s-d)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();let o=this.getAbsoluteTransform(e).decompose();return{x:o.scaleX,y:o.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ls,this._getTransform)}_getTransform(){var e,t;let i=this._cache.get(ls)||new Rt.Transform;i.reset();let o=this.x(),s=this.y(),l=as.Konva.getAngle(this.rotation()),d=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,f=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,p=this.attrs.skewX||0,g=this.attrs.skewY||0,y=this.attrs.offsetX||0,D=this.attrs.offsetY||0;return(o!==0||s!==0)&&i.translate(o,s),l!==0&&i.rotate(l),(p!==0||g!==0)&&i.skew(p,g),(d!==1||f!==1)&&i.scale(d,f),(y!==0||D!==0)&&i.translate(-1*y,-1*D),i.dirty=!1,i}clone(e){let t=Rt.Util.cloneObject(this.attrs),i,o,s,l,d;for(i in e)t[i]=e[i];let f=new this.constructor(t);for(i in this.eventListeners)for(o=this.eventListeners[i],s=o.length,l=0;l<s;l++)d=o[l],d.name.indexOf(xN)<0&&(f.eventListeners[i]||(f.eventListeners[i]=[]),f.eventListeners[i].push(d));return f}_toKonvaCanvas(e){e=e||{};let t=this.getClientRect(),i=this.getStage(),o=e.x!==void 0?e.x:Math.floor(t.x),s=e.y!==void 0?e.y:Math.floor(t.y),l=e.pixelRatio||1,d=new sd.SceneCanvas({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:l}),f=d.getContext(),p=new sd.SceneCanvas({width:d.width/d.pixelRatio+Math.abs(o),height:d.height/d.pixelRatio+Math.abs(s),pixelRatio:d.pixelRatio});return e.imageSmoothingEnabled===!1&&(f._context.imageSmoothingEnabled=!1),f.save(),(o||s)&&f.translate(-1*o,-1*s),this.drawScene(d,void 0,p),f.restore(),d}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};let t=e.mimeType||null,i=e.quality||null,o=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(o),o}toImage(e){return new Promise((t,i)=>{try{let o=e?.callback;o&&delete e.callback,Rt.Util._urlToImage(this.toDataURL(e),function(s){t(s),o?.(s)})}catch(o){i(o)}})}toBlob(e){return new Promise((t,i)=>{try{let o=e?.callback;o&&delete e.callback,this.toCanvas(e).toBlob(s=>{t(s),o?.(s)},e?.mimeType,e?.quality)}catch(o){i(o)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():as.Konva.dragDistance}_off(e,t,i){let o=this.eventListeners[e],s,l,d;for(s=0;s<o.length;s++)if(l=o[s].name,d=o[s].handler,(l!=="konva"||t==="konva")&&(!t||l===t)&&(!i||i===d)){if(o.splice(s,1),o.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,t,i){this._fire(e+EN,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){let t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;let t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){let t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){let i=this[$E+Rt.Util._capitalize(e)];return Rt.Util._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(as.Konva.autoDrawEnabled){let e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,t){let i=this.attrs[e];i===t&&!Rt.Util.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let o;i!==void 0&&(o=this.attrs[e],o||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,o,i))}_fireAndBubble(e,t,i){if(t&&this.nodeType===YE&&(t.target=this),!((e===QE||e===WE)&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);let s=(e===QE||e===WE)&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!s&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i,o;let s=(t=this._cache.get(Vf))!==null&&t!==void 0?t:{},l=s?.[e];if(l===void 0){l=[];let d=Object.getPrototypeOf(this);for(;d;){let f=(o=(i=d.eventListeners)===null||i===void 0?void 0:i[e])!==null&&o!==void 0?o:[];l.push(...f),d=Object.getPrototypeOf(d)}s[e]=l,this._cache.set(Vf,s)}return l}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;let i=this._getProtoListeners(e);if(i)for(var o=0;o<i.length;o++)i[o].handler.call(this,t);let s=this.eventListeners[e];if(s)for(var o=0;o<s.length;o++)s[o].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){let t=e?e.pointerId:void 0,i=this.getStage(),o=this.getAbsolutePosition();if(!i)return;let s=i._getPointerById(t)||i._changedPointerPositions[0]||o;Ki.DD._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-o.x,y:s.y-o.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){Ki.DD._dragElements.has(this._id)||this._createDragElement(e);let i=Ki.DD._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){let i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let o={x:i.x-t.offset.x,y:i.y-t.offset.y},s=this.dragBoundFunc();if(s!==void 0){let l=s.call(this,o,e);l?o=l:Rt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==o.x||this._lastPos.y!==o.y)&&(this.setAbsolutePosition(o),this._requestDraw()),this._lastPos=o}stopDrag(e){let t=Ki.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),Ki.DD._endDragBefore(e),Ki.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){let e=Ki.DD._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||as.Konva.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let o=!1;Ki.DD._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(o=!0)}),o||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;let t=Ki.DD._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",o=t&&t.dragStatus==="ready";i?this.stopDrag():o&&Ki.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){let t=this.getStage();if(!t)return!1;let i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return Rt.Util.haveIntersection(i,this.getClientRect())}static create(e,t){return Rt.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=n.prototype.getClassName.call(e),o=e.children,s,l,d;t&&(e.attrs.container=t),as.Konva[i]||(Rt.Util.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");let f=as.Konva[i];if(s=new f(e.attrs),o)for(l=o.length,d=0;d<l;d++)s.add(n._createNode(o[d]));return s}};qf.Node=tt;tt.prototype.nodeType="Node";tt.prototype._attrsAffectingSize=[];tt.prototype.eventListeners={};tt.prototype.on.call(tt.prototype,MN,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ls),this._clearSelfAndDescendantCache(vo)});tt.prototype.on.call(tt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(gv)});tt.prototype.on.call(tt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(pv)});tt.prototype.on.call(tt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Bf)});var ln=ad.Factory.addGetterSetter;ln(tt,"zIndex");ln(tt,"absolutePosition");ln(tt,"position");ln(tt,"x",0,(0,Pn.getNumberValidator)());ln(tt,"y",0,(0,Pn.getNumberValidator)());ln(tt,"globalCompositeOperation","source-over",(0,Pn.getStringValidator)());ln(tt,"opacity",1,(0,Pn.getNumberValidator)());ln(tt,"name","",(0,Pn.getStringValidator)());ln(tt,"id","",(0,Pn.getStringValidator)());ln(tt,"rotation",0,(0,Pn.getNumberValidator)());ad.Factory.addComponentsGetterSetter(tt,"scale",["x","y"]);ln(tt,"scaleX",1,(0,Pn.getNumberValidator)());ln(tt,"scaleY",1,(0,Pn.getNumberValidator)());ad.Factory.addComponentsGetterSetter(tt,"skew",["x","y"]);ln(tt,"skewX",0,(0,Pn.getNumberValidator)());ln(tt,"skewY",0,(0,Pn.getNumberValidator)());ad.Factory.addComponentsGetterSetter(tt,"offset",["x","y"]);ln(tt,"offsetX",0,(0,Pn.getNumberValidator)());ln(tt,"offsetY",0,(0,Pn.getNumberValidator)());ln(tt,"dragDistance",null,(0,Pn.getNumberValidator)());ln(tt,"width",0,(0,Pn.getNumberValidator)());ln(tt,"height",0,(0,Pn.getNumberValidator)());ln(tt,"listening",!0,(0,Pn.getBooleanValidator)());ln(tt,"preventDefault",!0,(0,Pn.getBooleanValidator)());ln(tt,"filters",null,function(n){return this._filterUpToDate=!1,n});ln(tt,"visible",!0,(0,Pn.getBooleanValidator)());ln(tt,"transformsEnabled","all",(0,Pn.getStringValidator)());ln(tt,"size");ln(tt,"dragBoundFunc");ln(tt,"draggable",!1,(0,Pn.getBooleanValidator)());ad.Factory.backCompat(tt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})});var ld=Be(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.Container=void 0;var fl=gt(),yv=En(),Gf=_t(),So=class extends yv.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];let t=this.children||[],i=[];return t.forEach(function(o){e(o)&&i.push(o)}),i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}let t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){let t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){let i=[];return this._descendants(o=>{let s=o._isMatch(e);return s&&i.push(o),!!(s&&t)}),i}_descendants(e){let t=!1,i=this.getChildren();for(let o of i){if(t=e(o),t)return!0;if(o.hasChildren()&&(t=o._descendants(e),t))return!0}return!1}toObject(){let e=yv.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){let t=yv.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){let t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){let o=this.getLayer(),s=e||o&&o.getCanvas(),l=s&&s.getContext(),d=this._getCanvasCache(),f=d&&d.scene,p=s&&s.isCache;if(!this.isVisible()&&!p)return this;if(f){l.save();let g=this.getAbsoluteTransform(t).getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;let i=this.getLayer(),o=e||i&&i.hitCanvas,s=o&&o.getContext(),l=this._getCanvasCache();if(l&&l.hit){s.save();let f=this.getAbsoluteTransform(t).getMatrix();s.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",o,t);return this}_drawChildren(e,t,i,o){var s;let l=t&&t.getContext(),d=this.clipWidth(),f=this.clipHeight(),p=this.clipFunc(),g=typeof d=="number"&&typeof f=="number"||p,y=i===this;if(g){l.save();let b=this.getAbsoluteTransform(i),C=b.getMatrix();l.transform(C[0],C[1],C[2],C[3],C[4],C[5]),l.beginPath();let w;if(p)w=p.call(this,l,this);else{let x=this.clipX(),M=this.clipY();l.rect(x||0,M||0,d,f)}l.clip.apply(l,w),C=b.copy().invert().getMatrix(),l.transform(C[0],C[1],C[2],C[3],C[4],C[5])}let D=!y&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";D&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(b){b[e](t,i,o)}),D&&l.restore(),g&&l.restore()}getClientRect(e={}){var t;let i=e.skipTransform,o=e.relativeTo,s,l,d,f,p={x:1/0,y:1/0,width:0,height:0},g=this;(t=this.children)===null||t===void 0||t.forEach(function(b){if(!b.visible())return;let C=b.getClientRect({relativeTo:g,skipShadow:e.skipShadow,skipStroke:e.skipStroke});C.width===0&&C.height===0||(s===void 0?(s=C.x,l=C.y,d=C.x+C.width,f=C.y+C.height):(s=Math.min(s,C.x),l=Math.min(l,C.y),d=Math.max(d,C.x+C.width),f=Math.max(f,C.y+C.height)))});let y=this.find("Shape"),D=!1;for(let b=0;b<y.length;b++)if(y[b]._isVisible(this)){D=!0;break}return D&&s!==void 0?p={x:s,y:l,width:d-s,height:f-l}:p={x:0,y:0,width:0,height:0},i?p:this._transformedRect(p,o)}};jf.Container=So;fl.Factory.addComponentsGetterSetter(So,"clip",["x","y","width","height"]);fl.Factory.addGetterSetter(So,"clipX",void 0,(0,Gf.getNumberValidator)());fl.Factory.addGetterSetter(So,"clipY",void 0,(0,Gf.getNumberValidator)());fl.Factory.addGetterSetter(So,"clipWidth",void 0,(0,Gf.getNumberValidator)());fl.Factory.addGetterSetter(So,"clipHeight",void 0,(0,Gf.getNumberValidator)());fl.Factory.addGetterSetter(So,"clipFunc")});var Sv=Be(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.getCapturedShape=PN;ha.createEvent=vv;ha.hasPointerCapture=FN;ha.setPointerCapture=kN;ha.releaseCapture=KE;var ON=pt(),cd=new Map,ZE=ON.Konva._global.PointerEvent!==void 0;function PN(n){return cd.get(n)}function vv(n){return{evt:n,pointerId:n.pointerId}}function FN(n,e){return cd.get(n)===e}function kN(n,e){KE(n),e.getStage()&&(cd.set(n,e),ZE&&e._fire("gotpointercapture",vv(new PointerEvent("gotpointercapture"))))}function KE(n,e){let t=cd.get(n);if(!t)return;let i=t.getStage();i&&i.content,cd.delete(n),ZE&&t._fire("lostpointercapture",vv(new PointerEvent("lostpointercapture")))}});var hT=Be(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.Stage=jr.stages=void 0;var Gr=Dn(),LN=gt(),JE=ld(),Fn=pt(),bv=rd(),_v=Nf(),NN=pt(),bo=Sv(),VN="Stage",BN="string",eT="px",UN="mouseout",nT="mouseleave",iT="mouseover",rT="mouseenter",oT="mousemove",sT="mousedown",aT="mouseup",dd="pointermove",ud="pointerdown",pl="pointerup",hd="pointercancel",qN="lostpointercapture",zf="pointerout",Hf="pointerleave",Qf="pointerover",Wf="pointerenter",Cv="contextmenu",lT="touchstart",cT="touchend",dT="touchmove",uT="touchcancel",wv="wheel",GN=5,jN=[[rT,"_pointerenter"],[sT,"_pointerdown"],[oT,"_pointermove"],[aT,"_pointerup"],[nT,"_pointerleave"],[lT,"_pointerdown"],[dT,"_pointermove"],[cT,"_pointerup"],[uT,"_pointercancel"],[iT,"_pointerover"],[wv,"_wheel"],[Cv,"_contextmenu"],[ud,"_pointerdown"],[dd,"_pointermove"],[pl,"_pointerup"],[hd,"_pointercancel"],[qN,"_lostpointercapture"]],Dv={mouse:{[zf]:UN,[Hf]:nT,[Qf]:iT,[Wf]:rT,[dd]:oT,[ud]:sT,[pl]:aT,[hd]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[zf]:"touchout",[Hf]:"touchleave",[Qf]:"touchover",[Wf]:"touchenter",[dd]:dT,[ud]:lT,[pl]:cT,[hd]:uT,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[zf]:zf,[Hf]:Hf,[Qf]:Qf,[Wf]:Wf,[dd]:dd,[ud]:ud,[pl]:pl,[hd]:hd,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},fd=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",ml=n=>{let e=fd(n);if(e==="pointer")return Fn.Konva.pointerEventsEnabled&&Dv.pointer;if(e==="touch")return Dv.touch;if(e==="mouse")return Dv.mouse};function tT(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&Gr.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}var zN="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";jr.stages=[];var gl=class extends JE.Container{constructor(e){super(tT(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),jr.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{tT(this.attrs)}),this._checkVisibility()}_validateAdd(e){let t=e.getType()==="Layer",i=e.getType()==="FastLayer";t||i||Gr.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;let e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===BN){if(e.charAt(0)==="."){let i=e.slice(1);e=document.getElementsByClassName(i)[0]}else{var t;e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t)}if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let e=this.children,t=e.length,i;for(i=0;i<t;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),JE.Container.prototype.clone.call(this,e)}destroy(){super.destroy();let e=this.content;e&&Gr.Util._isInDocument(e)&&this.container().removeChild(e);let t=jr.stages.indexOf(this);return t>-1&&jr.stages.splice(t,1),Gr.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){let e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Gr.Util.warn(zN),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();let t=new bv.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,o=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),o.forEach(function(s){if(!s.isVisible())return;let l=s._toKonvaCanvas(e);i.drawImage(l._canvas,e.x,e.y,l.getWidth()/l.getPixelRatio(),l.getHeight()/l.getPixelRatio())}),t}getIntersection(e){if(!e)return null;let t=this.children,i=t.length,o=i-1,s;for(s=o;s>=0;s--){let l=t[s].getIntersection(e);if(l)return l}return null}_resizeDOM(){let e=this.width(),t=this.height();this.content&&(this.content.style.width=e+eT,this.content.style.height=t+eT),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e,...t){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}super.add(e);let i=this.children.length;return i>GN&&Gr.Util.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Fn.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return bo.hasPointerCapture(e,this)}setPointerCapture(e){bo.setPointerCapture(e,this)}releaseCapture(e){bo.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){Fn.Konva.isBrowser&&jN.forEach(([e,t])=>{this.content.addEventListener(e,i=>{this[t](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);let t=ml(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);let t=ml(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){let t=ml(e.type),i=fd(e.type);if(!t)return;this.setPointersPositions(e);let o=this._getTargetShape(i),s=!(Fn.Konva.isDragging()||Fn.Konva.isTransforming())||Fn.Konva.hitOnDragEnabled;o&&s?(o._fireAndBubble(t.pointerout,{evt:e}),o._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){let t=ml(e.type),i=fd(e.type);if(!t)return;this.setPointersPositions(e);let o=!1;this._changedPointerPositions.forEach(s=>{let l=this.getIntersection(s);if(_v.DD.justDragged=!1,Fn.Konva["_"+i+"ListenClick"]=!0,!l||!l.isListening()){this[i+"ClickStartShape"]=void 0;return}Fn.Konva.capturePointerEventsEnabled&&l.setPointerCapture(s.id),this[i+"ClickStartShape"]=l,l._fireAndBubble(t.pointerdown,{evt:e,pointerId:s.id}),o=!0;let d=e.type.indexOf("touch")>=0;l.preventDefault()&&e.cancelable&&d&&e.preventDefault()}),o||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){let t=ml(e.type),i=fd(e.type);if(!t||(Fn.Konva.isDragging()&&_v.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),!(!(Fn.Konva.isDragging()||Fn.Konva.isTransforming())||Fn.Konva.hitOnDragEnabled)))return;let s={},l=!1,d=this._getTargetShape(i);this._changedPointerPositions.forEach(f=>{let p=bo.getCapturedShape(f.id)||this.getIntersection(f),g=f.id,y={evt:e,pointerId:g},D=d!==p;if(D&&d&&(d._fireAndBubble(t.pointerout,we({},y),p),d._fireAndBubble(t.pointerleave,we({},y),p)),p){if(s[p._id])return;s[p._id]=!0}p&&p.isListening()?(l=!0,D&&(p._fireAndBubble(t.pointerover,we({},y),d),p._fireAndBubble(t.pointerenter,we({},y),d),this[i+"targetShape"]=p),p._fireAndBubble(t.pointermove,we({},y))):d&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:g}),this[i+"targetShape"]=null)}),l||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){let t=ml(e.type),i=fd(e.type);if(!t)return;this.setPointersPositions(e);let o=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"],l={},d=!1;this._changedPointerPositions.forEach(f=>{let p=bo.getCapturedShape(f.id)||this.getIntersection(f);if(p){if(p.releaseCapture(f.id),l[p._id])return;l[p._id]=!0}let g=f.id,y={evt:e,pointerId:g},D=!1;Fn.Konva["_"+i+"InDblClickWindow"]?(D=!0,clearTimeout(this[i+"DblTimeout"])):_v.DD.justDragged||(Fn.Konva["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Fn.Konva["_"+i+"InDblClickWindow"]=!1},Fn.Konva.dblClickWindow),p&&p.isListening()?(d=!0,this[i+"ClickEndShape"]=p,p._fireAndBubble(t.pointerup,we({},y)),Fn.Konva["_"+i+"ListenClick"]&&o&&o===p&&(p._fireAndBubble(t.pointerclick,we({},y)),D&&s&&s===p&&p._fireAndBubble(t.pointerdblclick,we({},y)))):(this[i+"ClickEndShape"]=null,Fn.Konva["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:g}),D&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:g}))}),d||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Fn.Konva["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);let t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(Cv,{evt:e}):this._fire(Cv,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);let t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(wv,{evt:e}):this._fire(wv,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);let t=bo.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(pl,bo.createEvent(e)),bo.releaseCapture(e.pointerId)}_lostpointercapture(e){bo.releaseCapture(e.pointerId)}setPointersPositions(e){let t=this._getContentPosition(),i=null,o=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-t.left)/t.scaleX,y:(s.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,o=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:o},this._pointerPositions=[{x:i,y:o,id:Gr.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:o,id:Gr.Util._getFirstPointerId(e)}])}_setPointerPosition(e){Gr.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};let e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new bv.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new bv.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Fn.Konva.isBrowser)return;let e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return Gr.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};jr.Stage=gl;gl.prototype.nodeType=VN;(0,NN._registerNode)(gl);LN.Factory.addGetterSetter(gl,"container");Fn.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{jr.stages.forEach(n=>{n.batchDraw()})})});var Qn=Be(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.Shape=_o.shapes=void 0;var HN=pt(),zr=Dn(),Ve=gt(),fT=En(),jn=_t(),QN=pt(),Iv=Sv(),mT="hasShadow",pT="shadowRGBA",gT="patternImage",yT="linearGradient",vT="radialGradient",$f;function Ev(){return $f||($f=zr.Util.createCanvasElement().getContext("2d"),$f)}_o.shapes={};function WN(n){let e=this.attrs.fillRule;e?n.fill(e):n.fill()}function $N(n){n.stroke()}function YN(n){let e=this.attrs.fillRule;e?n.fill(e):n.fill()}function XN(n){n.stroke()}function ZN(){this._clearCache(mT)}function KN(){this._clearCache(pT)}function JN(){this._clearCache(gT)}function e9(){this._clearCache(yT)}function t9(){this._clearCache(vT)}var Te=class extends fT.Node{constructor(e){super(e);let t;for(;t=zr.Util.getRandomColor(),!(t&&!(t in _o.shapes)););this.colorKey=t,_o.shapes[t]=this}getContext(){return zr.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return zr.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(mT,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(gT,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){let t=Ev().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){let i=new zr.Transform;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(HN.Konva.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());let o=i.getMatrix(),s=typeof DOMMatrix>"u"?{a:o[0],b:o[1],c:o[2],d:o[3],e:o[4],f:o[5]}:new DOMMatrix(o);t.setTransform(s)}return t}}_getLinearGradient(){return this._getCache(yT,this.__getLinearGradient)}__getLinearGradient(){let e=this.fillLinearGradientColorStops();if(e){let t=Ev(),i=this.fillLinearGradientStartPoint(),o=this.fillLinearGradientEndPoint(),s=t.createLinearGradient(i.x,i.y,o.x,o.y);for(let l=0;l<e.length;l+=2)s.addColorStop(e[l],e[l+1]);return s}}_getRadialGradient(){return this._getCache(vT,this.__getRadialGradient)}__getRadialGradient(){let e=this.fillRadialGradientColorStops();if(e){let t=Ev(),i=this.fillRadialGradientStartPoint(),o=this.fillRadialGradientEndPoint(),s=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),o.x,o.y,this.fillRadialGradientEndRadius());for(let l=0;l<e.length;l+=2)s.addColorStop(e[l],e[l+1]);return s}}getShadowRGBA(){return this._getCache(pT,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;let e=zr.Util.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){let e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){let t=this.getStage();if(!t)return!1;let i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return fT.Node.prototype.destroy.call(this),delete _o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;let o=e||this.hasFill(),s=this.hasStroke(),l=this.getAbsoluteOpacity()!==1;if(o&&s&&l)return!0;let d=this.hasShadow(),f=this.shadowForStrokeEnabled();return!!(o&&s&&d&&f)}setStrokeHitEnabled(e){zr.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){let e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,i=this.getParent();for(;i;){if(i.isCached()){t=!0;break}i=i.getParent()}let o=e.skipTransform,s=e.relativeTo||t&&this.getStage()||void 0,l=this.getSelfRect(),f=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,p=l.width+f,g=l.height+f,y=!e.skipShadow&&this.hasShadow(),D=y?this.shadowOffsetX():0,b=y?this.shadowOffsetY():0,C=p+Math.abs(D),w=g+Math.abs(b),x=y&&this.shadowBlur()||0,M=C+x*2,F=w+x*2,k={width:M,height:F,x:-(f/2+x)+Math.min(D,0)+l.x,y:-(f/2+x)+Math.min(b,0)+l.y};return o?k:this._transformedRect(k,s)}drawScene(e,t,i){let o=this.getLayer(),s=e||o.getCanvas(),l=s.getContext(),d=this._getCanvasCache(),f=this.getSceneFunc(),p=this.hasShadow(),g,y,D=s.isCache,b=t===this;if(!this.isVisible()&&!b)return this;if(d){l.save();let w=this.getAbsoluteTransform(t).getMatrix();return l.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedSceneCanvas(l),l.restore(),this}if(!f)return this;if(l.save(),this._useBufferCanvas()&&!D){g=this.getStage();let w=i||g.bufferCanvas;y=w.getContext(),y.clear(),y.save(),y._applyLineJoin(this);var C=this.getAbsoluteTransform(t).getMatrix();y.transform(C[0],C[1],C[2],C[3],C[4],C[5]),f.call(this,y,this),y.restore();let x=w.pixelRatio;p&&l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(w._canvas,0,0,w.width/x,w.height/x)}else{if(l._applyLineJoin(this),!b){var C=this.getAbsoluteTransform(t).getMatrix();l.transform(C[0],C[1],C[2],C[3],C[4],C[5]),l._applyOpacity(this),l._applyGlobalCompositeOperation(this)}p&&l._applyShadow(this),f.call(this,l,this)}return l.restore(),this}drawHit(e,t,i=!1){if(!this.shouldDrawHit(t,i))return this;let o=this.getLayer(),s=e||o.hitCanvas,l=s&&s.getContext(),d=this.hitFunc()||this.sceneFunc(),f=this._getCanvasCache(),p=f&&f.hit;if(this.colorKey||zr.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){l.save();let y=this.getAbsoluteTransform(t).getMatrix();return l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(l),l.restore(),this}if(!d)return this;if(l.save(),l._applyLineJoin(this),!(this===t)){let y=this.getAbsoluteTransform(t).getMatrix();l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}return d.call(this,l,this),l.restore(),this}drawHitFromCache(e=0){let t=this._getCanvasCache(),i=this._getCachedSceneCanvas(),o=t.hit,s=o.getContext(),l=o.getWidth(),d=o.getHeight(),f,p,g,y,D,b;s.clear(),s.drawImage(i._canvas,0,0,l,d);try{for(f=s.getImageData(0,0,l,d),p=f.data,g=p.length,y=zr.Util._hexToRgb(this.colorKey),D=0;D<g;D+=4)b=p[D+3],b>e?(p[D]=y.r,p[D+1]=y.g,p[D+2]=y.b,p[D+3]=255):p[D+3]=0;s.putImageData(f,0,0)}catch(C){zr.Util.error("Unable to draw hit graph from cached scene canvas. "+C.message)}return this}hasPointerCapture(e){return Iv.hasPointerCapture(e,this)}setPointerCapture(e){Iv.setPointerCapture(e,this)}releaseCapture(e){Iv.releaseCapture(e,this)}};_o.Shape=Te;Te.prototype._fillFunc=WN;Te.prototype._strokeFunc=$N;Te.prototype._fillFuncHit=YN;Te.prototype._strokeFuncHit=XN;Te.prototype._centroid=!1;Te.prototype.nodeType="Shape";(0,QN._registerNode)(Te);Te.prototype.eventListeners={};Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",ZN);Te.prototype.on.call(Te.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",KN);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",JN);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",e9);Te.prototype.on.call(Te.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",t9);Ve.Factory.addGetterSetter(Te,"stroke",void 0,(0,jn.getStringOrGradientValidator)());Ve.Factory.addGetterSetter(Te,"strokeWidth",2,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillAfterStrokeEnabled",!1);Ve.Factory.addGetterSetter(Te,"hitStrokeWidth","auto",(0,jn.getNumberOrAutoValidator)());Ve.Factory.addGetterSetter(Te,"strokeHitEnabled",!0,(0,jn.getBooleanValidator)());Ve.Factory.addGetterSetter(Te,"perfectDrawEnabled",!0,(0,jn.getBooleanValidator)());Ve.Factory.addGetterSetter(Te,"shadowForStrokeEnabled",!0,(0,jn.getBooleanValidator)());Ve.Factory.addGetterSetter(Te,"lineJoin");Ve.Factory.addGetterSetter(Te,"lineCap");Ve.Factory.addGetterSetter(Te,"sceneFunc");Ve.Factory.addGetterSetter(Te,"hitFunc");Ve.Factory.addGetterSetter(Te,"dash");Ve.Factory.addGetterSetter(Te,"dashOffset",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"shadowColor",void 0,(0,jn.getStringValidator)());Ve.Factory.addGetterSetter(Te,"shadowBlur",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"shadowOpacity",1,(0,jn.getNumberValidator)());Ve.Factory.addComponentsGetterSetter(Te,"shadowOffset",["x","y"]);Ve.Factory.addGetterSetter(Te,"shadowOffsetX",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"shadowOffsetY",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillPatternImage");Ve.Factory.addGetterSetter(Te,"fill",void 0,(0,jn.getStringOrGradientValidator)());Ve.Factory.addGetterSetter(Te,"fillPatternX",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillPatternY",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillLinearGradientColorStops");Ve.Factory.addGetterSetter(Te,"strokeLinearGradientColorStops");Ve.Factory.addGetterSetter(Te,"fillRadialGradientStartRadius",0);Ve.Factory.addGetterSetter(Te,"fillRadialGradientEndRadius",0);Ve.Factory.addGetterSetter(Te,"fillRadialGradientColorStops");Ve.Factory.addGetterSetter(Te,"fillPatternRepeat","repeat");Ve.Factory.addGetterSetter(Te,"fillEnabled",!0);Ve.Factory.addGetterSetter(Te,"strokeEnabled",!0);Ve.Factory.addGetterSetter(Te,"shadowEnabled",!0);Ve.Factory.addGetterSetter(Te,"dashEnabled",!0);Ve.Factory.addGetterSetter(Te,"strokeScaleEnabled",!0);Ve.Factory.addGetterSetter(Te,"fillPriority","color");Ve.Factory.addComponentsGetterSetter(Te,"fillPatternOffset",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillPatternOffsetX",0,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillPatternOffsetY",0,(0,jn.getNumberValidator)());Ve.Factory.addComponentsGetterSetter(Te,"fillPatternScale",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillPatternScaleX",1,(0,jn.getNumberValidator)());Ve.Factory.addGetterSetter(Te,"fillPatternScaleY",1,(0,jn.getNumberValidator)());Ve.Factory.addComponentsGetterSetter(Te,"fillLinearGradientStartPoint",["x","y"]);Ve.Factory.addComponentsGetterSetter(Te,"strokeLinearGradientStartPoint",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillLinearGradientStartPointX",0);Ve.Factory.addGetterSetter(Te,"strokeLinearGradientStartPointX",0);Ve.Factory.addGetterSetter(Te,"fillLinearGradientStartPointY",0);Ve.Factory.addGetterSetter(Te,"strokeLinearGradientStartPointY",0);Ve.Factory.addComponentsGetterSetter(Te,"fillLinearGradientEndPoint",["x","y"]);Ve.Factory.addComponentsGetterSetter(Te,"strokeLinearGradientEndPoint",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillLinearGradientEndPointX",0);Ve.Factory.addGetterSetter(Te,"strokeLinearGradientEndPointX",0);Ve.Factory.addGetterSetter(Te,"fillLinearGradientEndPointY",0);Ve.Factory.addGetterSetter(Te,"strokeLinearGradientEndPointY",0);Ve.Factory.addComponentsGetterSetter(Te,"fillRadialGradientStartPoint",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillRadialGradientStartPointX",0);Ve.Factory.addGetterSetter(Te,"fillRadialGradientStartPointY",0);Ve.Factory.addComponentsGetterSetter(Te,"fillRadialGradientEndPoint",["x","y"]);Ve.Factory.addGetterSetter(Te,"fillRadialGradientEndPointX",0);Ve.Factory.addGetterSetter(Te,"fillRadialGradientEndPointY",0);Ve.Factory.addGetterSetter(Te,"fillPatternRotation",0);Ve.Factory.addGetterSetter(Te,"fillRule",void 0,(0,jn.getStringValidator)());Ve.Factory.backCompat(Te,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})});var Av=Be(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.Layer=void 0;var Do=Dn(),Tv=ld(),yl=En(),xv=gt(),ST=rd(),n9=_t(),i9=Qn(),r9=pt(),o9="#",s9="beforeDraw",a9="draw",bT=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],l9=bT.length,cs=class extends Tv.Container{constructor(e){super(e),this.canvas=new ST.SceneCanvas,this.hitCanvas=new ST.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);let t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){yl.Node.prototype.moveToTop.call(this);let e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!yl.Node.prototype.moveUp.call(this))return!1;let t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(yl.Node.prototype.moveDown.call(this)){let e=this.getStage();if(e){let t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(yl.Node.prototype.moveToBottom.call(this)){let e=this.getStage();if(e){let t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){let e=this.getNativeCanvasElement();return yl.Node.prototype.remove.call(this),e&&e.parentNode&&Do.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){let t=e.getType();t!=="Group"&&t!=="Shape"&&Do.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),yl.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Do.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Do.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Do.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let o=0;o<l9;o++){let s=bT[o],l=this._getIntersection({x:e.x+s.x*t,y:e.y+s.y*t}),d=l.shape;if(d)return d;if(i=!!l.antialiased,!l.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){let t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,o=i[3];if(o===255){let s=Do.Util._rgbToHex(i[0],i[1],i[2]),l=i9.shapes[o9+s];return l?{shape:l}:{antialiased:!0}}else if(o>0)return{antialiased:!0};return{}}drawScene(e,t){let i=this.getLayer(),o=e||i&&i.getCanvas();return this._fire(s9,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),Tv.Container.prototype.drawScene.call(this,o,t),this._fire(a9,{node:this}),this}drawHit(e,t){let i=this.getLayer(),o=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Tv.Container.prototype.drawHit.call(this,o,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Do.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Do.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;let e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Do.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Yf.Layer=cs;cs.prototype.nodeType="Layer";(0,r9._registerNode)(cs);xv.Factory.addGetterSetter(cs,"imageSmoothingEnabled",!0);xv.Factory.addGetterSetter(cs,"clearBeforeDraw",!0);xv.Factory.addGetterSetter(cs,"hitGraphEnabled",!0,(0,n9.getBooleanValidator)())});var _T=Be(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.FastLayer=void 0;var c9=Dn(),d9=Av(),u9=pt(),md=class extends d9.Layer{constructor(e){super(e),this.listening(!1),c9.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};Xf.FastLayer=md;md.prototype.nodeType="FastLayer";(0,u9._registerNode)(md)});var Kf=Be(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.Group=void 0;var h9=Dn(),f9=ld(),m9=pt(),pd=class extends f9.Container{_validateAdd(e){let t=e.getType();t!=="Group"&&t!=="Shape"&&h9.Util.throw("You may only add groups and shapes to groups.")}};Zf.Group=pd;pd.prototype.nodeType="Group";(0,m9._registerNode)(pd)});var em=Be(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.Animation=void 0;var Mv=pt(),DT=Dn(),Rv=function(){return Mv.glob.performance&&Mv.glob.performance.now?function(){return Mv.glob.performance.now()}:function(){return new Date().getTime()}}(),vl=class n{constructor(e,t){this.id=n.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Rv(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){let t=this.layers,i=t.length;for(let o=0;o<i;o++)if(t[o]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){let t=n.animations,i=t.length;for(let o=0;o<i;o++)if(t[o].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Rv(),n._addAnimation(this),this}stop(){return n._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){let t=e.id,i=this.animations,o=i.length;for(let s=0;s<o;s++)if(i[s].id===t){this.animations.splice(s,1);break}}static _runFrames(){let e={},t=this.animations;for(let i=0;i<t.length;i++){let o=t[i],s=o.layers,l=o.func;o._updateFrameObject(Rv());let d=s.length,f;if(l?f=l.call(o,o.frame)!==!1:f=!0,!!f)for(let p=0;p<d;p++){let g=s[p];g._id!==void 0&&(e[g._id]=g)}}for(let i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){let e=n;e.animations.length?(e._runFrames(),DT.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,DT.Util.requestAnimFrame(this._animationLoop))}};Jf.Animation=vl;vl.animations=[];vl.animIdCounter=0;vl.animRunning=!1});var ET=Be(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Easings=Hr.Tween=void 0;var Co=Dn(),p9=em(),g9=En(),y9=pt(),v9={node:1,duration:1,easing:1,onFinish:1,yoyo:1},S9=1,CT=2,wT=3,b9=0,IT=["fill","stroke","shadowColor"],Ov=class{constructor(e,t,i,o,s,l,d){this.prop=e,this.propFunc=t,this.begin=o,this._pos=o,this.duration=l,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(e){let t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=CT,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=wT,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){let e=this.getTimer()-this._startTime;this.state===CT?this.setTime(e):this.state===wT&&this.setTime(this.duration-e)}pause(){this.state=S9,this.fire("onPause")}getTimer(){return new Date().getTime()}},Sl=class n{constructor(e){let t=this,i=e.node,o=i._id,s,l=e.easing||Hr.Easings.Linear,d=!!e.yoyo,f;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=i,this._id=b9++;let p=i.getLayer()||(i instanceof y9.Konva.Stage?i.getLayers():null);p||Co.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new p9.Animation(function(){t.tween.onEnterFrame()},p),this.tween=new Ov(f,function(g){t._tweenFunc(g)},l,0,1,s*1e3,d),this._addListeners(),n.attrs[o]||(n.attrs[o]={}),n.attrs[o][this._id]||(n.attrs[o][this._id]={}),n.tweens[o]||(n.tweens[o]={});for(f in e)v9[f]===void 0&&this._addAttr(f,e[f]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){let i=this.node,o=i._id,s,l,d,f,p,g,y,D;if(d=n.tweens[o][e],d&&delete n.attrs[o][d][e],s=i.getAttr(e),Co.Util._isArray(t))if(l=[],p=Math.max(t.length,s.length),e==="points"&&t.length!==s.length&&(t.length>s.length?(y=s,s=Co.Util._prepareArrayForTween(s,t,i.closed())):(g=t,t=Co.Util._prepareArrayForTween(t,s,i.closed()))),e.indexOf("fill")===0)for(f=0;f<p;f++)if(f%2===0)l.push(t[f]-s[f]);else{let b=Co.Util.colorToRGBA(s[f]);D=Co.Util.colorToRGBA(t[f]),s[f]=b,l.push({r:D.r-b.r,g:D.g-b.g,b:D.b-b.b,a:D.a-b.a})}else for(f=0;f<p;f++)l.push(t[f]-s[f]);else IT.indexOf(e)!==-1?(s=Co.Util.colorToRGBA(s),D=Co.Util.colorToRGBA(t),l={r:D.r-s.r,g:D.g-s.g,b:D.b-s.b,a:D.a-s.a}):l=t-s;n.attrs[o][this._id][e]={start:s,diff:l,end:t,trueEnd:g,trueStart:y},n.tweens[o][e]=this._id}_tweenFunc(e){let t=this.node,i=n.attrs[t._id][this._id],o,s,l,d,f,p,g,y;for(o in i){if(s=i[o],l=s.start,d=s.diff,y=s.end,Co.Util._isArray(l))if(f=[],g=Math.max(l.length,y.length),o.indexOf("fill")===0)for(p=0;p<g;p++)p%2===0?f.push((l[p]||0)+d[p]*e):f.push("rgba("+Math.round(l[p].r+d[p].r*e)+","+Math.round(l[p].g+d[p].g*e)+","+Math.round(l[p].b+d[p].b*e)+","+(l[p].a+d[p].a*e)+")");else for(p=0;p<g;p++)f.push((l[p]||0)+d[p]*e);else IT.indexOf(o)!==-1?f="rgba("+Math.round(l.r+d.r*e)+","+Math.round(l.g+d.g*e)+","+Math.round(l.b+d.b*e)+","+(l.a+d.a*e)+")":f=l+d*e;t.setAttr(o,f)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{let e=this.node,t=n.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{let e=this.node,t=n.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let e=this.node._id,t=this._id,i=n.tweens[e],o;this.pause();for(o in i)delete n.tweens[e][o];delete n.attrs[e][t]}};Hr.Tween=Sl;Sl.attrs={};Sl.tweens={};g9.Node.prototype.to=function(n){let e=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),e&&e()},new Sl(n).play()};Hr.Easings={BackEaseIn(n,e,t,i){return t*(n/=i)*n*((1.70158+1)*n-1.70158)+e},BackEaseOut(n,e,t,i){return t*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+e},BackEaseInOut(n,e,t,i){let o=1.70158;return(n/=i/2)<1?t/2*(n*n*(((o*=1.525)+1)*n-o))+e:t/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+e},ElasticEaseIn(n,e,t,i,o,s){let l=0;return n===0?e:(n/=i)===1?e+t:(s||(s=i*.3),!o||o<Math.abs(t)?(o=t,l=s/4):l=s/(2*Math.PI)*Math.asin(t/o),-(o*Math.pow(2,10*(n-=1))*Math.sin((n*i-l)*(2*Math.PI)/s))+e)},ElasticEaseOut(n,e,t,i,o,s){let l=0;return n===0?e:(n/=i)===1?e+t:(s||(s=i*.3),!o||o<Math.abs(t)?(o=t,l=s/4):l=s/(2*Math.PI)*Math.asin(t/o),o*Math.pow(2,-10*n)*Math.sin((n*i-l)*(2*Math.PI)/s)+t+e)},ElasticEaseInOut(n,e,t,i,o,s){let l=0;return n===0?e:(n/=i/2)===2?e+t:(s||(s=i*(.3*1.5)),!o||o<Math.abs(t)?(o=t,l=s/4):l=s/(2*Math.PI)*Math.asin(t/o),n<1?-.5*(o*Math.pow(2,10*(n-=1))*Math.sin((n*i-l)*(2*Math.PI)/s))+e:o*Math.pow(2,-10*(n-=1))*Math.sin((n*i-l)*(2*Math.PI)/s)*.5+t+e)},BounceEaseOut(n,e,t,i){return(n/=i)<1/2.75?t*(7.5625*n*n)+e:n<2/2.75?t*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?t*(7.5625*(n-=2.25/2.75)*n+.9375)+e:t*(7.5625*(n-=2.625/2.75)*n+.984375)+e},BounceEaseIn(n,e,t,i){return t-Hr.Easings.BounceEaseOut(i-n,0,t,i)+e},BounceEaseInOut(n,e,t,i){return n<i/2?Hr.Easings.BounceEaseIn(n*2,0,t,i)*.5+e:Hr.Easings.BounceEaseOut(n*2-i,0,t,i)*.5+t*.5+e},EaseIn(n,e,t,i){return t*(n/=i)*n+e},EaseOut(n,e,t,i){return-t*(n/=i)*(n-2)+e},EaseInOut(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e},StrongEaseIn(n,e,t,i){return t*(n/=i)*n*n*n*n+e},StrongEaseOut(n,e,t,i){return t*((n=n/i-1)*n*n*n*n+1)+e},StrongEaseInOut(n,e,t,i){return(n/=i/2)<1?t/2*n*n*n*n*n+e:t/2*((n-=2)*n*n*n*n+2)+e},Linear(n,e,t,i){return t*n/i+e}}});var MT=Be(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.Konva=void 0;var _9=pt(),Pv=Dn(),D9=En(),C9=ld(),TT=hT(),w9=Av(),I9=_T(),E9=Kf(),T9=Nf(),xT=Qn(),x9=em(),AT=ET(),A9=hv(),M9=rd();bl.Konva=Pv.Util._assign(_9.Konva,{Util:Pv.Util,Transform:Pv.Transform,Node:D9.Node,Container:C9.Container,Stage:TT.Stage,stages:TT.stages,Layer:w9.Layer,FastLayer:I9.FastLayer,Group:E9.Group,DD:T9.DD,Shape:xT.Shape,shapes:xT.shapes,Animation:x9.Animation,Tween:AT.Tween,Easings:AT.Easings,Context:A9.Context,Canvas:M9.Canvas});bl.default=bl.Konva});var OT=Be(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.Arc=void 0;var tm=gt(),R9=Qn(),RT=pt(),nm=_t(),O9=pt(),mr=class extends R9.Shape{_sceneFunc(e){let t=RT.Konva.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){let e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),o=RT.Konva.getAngle(i?360-this.angle():this.angle()),s=Math.cos(Math.min(o,Math.PI)),l=1,d=Math.sin(Math.min(Math.max(Math.PI,o),3*Math.PI/2)),f=Math.sin(Math.min(o,Math.PI/2)),p=s*(s>0?e:t),g=l*(l>0?t:e),y=d*(d>0?e:t),D=f*(f>0?t:e);return{x:p,y:i?-1*D:y,width:g-p,height:D-y}}};im.Arc=mr;mr.prototype._centroid=!0;mr.prototype.className="Arc";mr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,O9._registerNode)(mr);tm.Factory.addGetterSetter(mr,"innerRadius",0,(0,nm.getNumberValidator)());tm.Factory.addGetterSetter(mr,"outerRadius",0,(0,nm.getNumberValidator)());tm.Factory.addGetterSetter(mr,"angle",0,(0,nm.getNumberValidator)());tm.Factory.addGetterSetter(mr,"clockwise",!1,(0,nm.getBooleanValidator)())});var kv=Be(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.Line=void 0;var rm=gt(),P9=pt(),F9=Qn(),FT=_t();function Fv(n,e,t,i,o,s,l){let d=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-e,2)),f=Math.sqrt(Math.pow(o-t,2)+Math.pow(s-i,2)),p=l*d/(d+f),g=l*f/(d+f),y=t-p*(o-n),D=i-p*(s-e),b=t+g*(o-n),C=i+g*(s-e);return[y,D,b,C]}function PT(n,e){let t=n.length,i=[];for(let o=2;o<t-2;o+=2){let s=Fv(n[o-2],n[o-1],n[o],n[o+1],n[o+2],n[o+3],e);isNaN(s[0])||(i.push(s[0]),i.push(s[1]),i.push(n[o]),i.push(n[o+1]),i.push(s[2]),i.push(s[3]))}return i}var Qr=class extends F9.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){let t=this.points(),i=t.length,o=this.tension(),s=this.closed(),l=this.bezier(),d,f,p;if(i){if(e.beginPath(),e.moveTo(t[0],t[1]),o!==0&&i>4){for(d=this.getTensionPoints(),f=d.length,p=s?0:4,s||e.quadraticCurveTo(d[0],d[1],d[2],d[3]);p<f-2;)e.bezierCurveTo(d[p++],d[p++],d[p++],d[p++],d[p++],d[p++]);s||e.quadraticCurveTo(d[f-2],d[f-1],t[i-2],t[i-1])}else if(l)for(p=2;p<i;)e.bezierCurveTo(t[p++],t[p++],t[p++],t[p++],t[p++],t[p++]);else for(p=2;p<i;p+=2)e.lineTo(t[p],t[p+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():PT(this.points(),this.tension())}_getTensionPointsClosed(){let e=this.points(),t=e.length,i=this.tension(),o=Fv(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),s=Fv(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),l=PT(e,i);return[o[2],o[3]].concat(l).concat([s[0],s[1],e[t-2],e[t-1],s[2],s[3],o[0],o[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],i=e[0],o=e[1],s=e[1],l,d;for(let f=0;f<e.length/2;f++)l=e[f*2],d=e[f*2+1],t=Math.min(t,l),i=Math.max(i,l),o=Math.min(o,d),s=Math.max(s,d);return{x:t,y:o,width:i-t,height:s-o}}};om.Line=Qr;Qr.prototype.className="Line";Qr.prototype._attrsAffectingSize=["points","bezier","tension"];(0,P9._registerNode)(Qr);rm.Factory.addGetterSetter(Qr,"closed",!1);rm.Factory.addGetterSetter(Qr,"bezier",!1);rm.Factory.addGetterSetter(Qr,"tension",0,(0,FT.getNumberValidator)());rm.Factory.addGetterSetter(Qr,"points",[],(0,FT.getNumberArrayValidator)())});var kT=Be(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.t2length=ni.getQuadraticArcLength=ni.getCubicArcLength=ni.binomialCoefficients=ni.cValues=ni.tValues=void 0;ni.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]];ni.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]];ni.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];var k9=(n,e,t)=>{let i,o,l=t/2;i=0;for(let d=0;d<20;d++)o=l*ni.tValues[20][d]+l,i+=ni.cValues[20][d]*N9(n,e,o);return l*i};ni.getCubicArcLength=k9;var L9=(n,e,t)=>{t===void 0&&(t=1);let i=n[0]-2*n[1]+n[2],o=e[0]-2*e[1]+e[2],s=2*n[1]-2*n[0],l=2*e[1]-2*e[0],d=4*(i*i+o*o),f=4*(i*s+o*l),p=s*s+l*l;if(d===0)return t*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(e[2]-e[0],2));let g=f/(2*d),y=p/d,D=t+g,b=y-g*g,C=D*D+b>0?Math.sqrt(D*D+b):0,w=g*g+b>0?Math.sqrt(g*g+b):0,x=g+Math.sqrt(g*g+b)!==0?b*Math.log(Math.abs((D+C)/(g+w))):0;return Math.sqrt(d)/2*(D*C-g*w+x)};ni.getQuadraticArcLength=L9;function N9(n,e,t){let i=Lv(1,t,n),o=Lv(1,t,e),s=i*i+o*o;return Math.sqrt(s)}var Lv=(n,e,t)=>{let i=t.length-1,o,s;if(i===0)return 0;if(n===0){s=0;for(let l=0;l<=i;l++)s+=ni.binomialCoefficients[i][l]*Math.pow(1-e,i-l)*Math.pow(e,l)*t[l];return s}else{o=new Array(i);for(let l=0;l<i;l++)o[l]=i*(t[l+1]-t[l]);return Lv(n-1,e,o)}},V9=(n,e,t)=>{let i=1,o=n/e,s=(n-t(o))/e,l=0;for(;i>.001;){let d=t(o+s),f=Math.abs(n-d)/e;if(f<i)i=f,o+=s;else{let p=t(o-s),g=Math.abs(n-p)/e;g<i?(i=g,o-=s):s/=2}if(l++,l>500)break}return o};ni.t2length=V9});var am=Be(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.Path=void 0;var B9=gt(),U9=Qn(),q9=pt(),_l=kT(),fa=class n extends U9.Shape{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=n.parsePathData(this.data()),this.pathLength=n.getPathLength(this.dataArray)}_sceneFunc(e){let t=this.dataArray;e.beginPath();let i=!1;for(let w=0;w<t.length;w++){let x=t[w].command,M=t[w].points;switch(x){case"L":e.lineTo(M[0],M[1]);break;case"M":e.moveTo(M[0],M[1]);break;case"C":e.bezierCurveTo(M[0],M[1],M[2],M[3],M[4],M[5]);break;case"Q":e.quadraticCurveTo(M[0],M[1],M[2],M[3]);break;case"A":var o=M[0],s=M[1],l=M[2],d=M[3],f=M[4],p=M[5],g=M[6],y=M[7],D=l>d?l:d,b=l>d?1:l/d,C=l>d?d/l:1;e.translate(o,s),e.rotate(g),e.scale(b,C),e.arc(0,0,D,f,f+p,1-y),e.scale(1/b,1/C),e.rotate(-g),e.translate(-o,-s);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(f){if(f.command==="A"){let p=f.points[4],g=f.points[5],y=f.points[4]+g,D=Math.PI/180;if(Math.abs(p-y)<D&&(D=Math.abs(p-y)),g<0)for(let b=p-D;b>y;b-=D){let C=n.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],b,0);e.push(C.x,C.y)}else for(let b=p+D;b<y;b+=D){let C=n.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],b,0);e.push(C.x,C.y)}}else if(f.command==="C")for(let p=0;p<=1;p+=.01){let g=n.getPointOnCubicBezier(p,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);e.push(g.x,g.y)}else e=e.concat(f.points)});let t=e[0],i=e[0],o=e[1],s=e[1],l,d;for(let f=0;f<e.length/2;f++)l=e[f*2],d=e[f*2+1],isNaN(l)||(t=Math.min(t,l),i=Math.max(i,l)),isNaN(d)||(o=Math.min(o,d),s=Math.max(s,d));return{x:t,y:o,width:i-t,height:s-o}}getLength(){return this.pathLength}getPointAtLength(e){return n.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,o){return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t))}static getPathLength(e){let t=0;for(let i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let i,o=0,s=t.length;if(!s)return null;for(;o<s&&e>t[o].pathLength;)e-=t[o].pathLength,++o;if(o===s)return i=t[o-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return i=t[o].points.slice(0,2),{x:i[0],y:i[1]};let l=t[o],d=l.points;switch(l.command){case"L":return n.getPointOnLine(e,l.start.x,l.start.y,d[0],d[1]);case"C":return n.getPointOnCubicBezier((0,_l.t2length)(e,n.getPathLength(t),w=>(0,_l.getCubicArcLength)([l.start.x,d[0],d[2],d[4]],[l.start.y,d[1],d[3],d[5]],w)),l.start.x,l.start.y,d[0],d[1],d[2],d[3],d[4],d[5]);case"Q":return n.getPointOnQuadraticBezier((0,_l.t2length)(e,n.getPathLength(t),w=>(0,_l.getQuadraticArcLength)([l.start.x,d[0],d[2]],[l.start.y,d[1],d[3]],w)),l.start.x,l.start.y,d[0],d[1],d[2],d[3]);case"A":var f=d[0],p=d[1],g=d[2],y=d[3],D=d[4],b=d[5],C=d[6];return D+=b*e/l.pathLength,n.getPointOnEllipticalArc(f,p,g,y,D,C)}return null}static getPointOnLine(e,t,i,o,s,l,d){l=l??t,d=d??i;let f=this.getLineLength(t,i,o,s);if(f<1e-10)return{x:t,y:i};if(o===t)return{x:l,y:d+(s>i?e:-e)};let p=(s-i)/(o-t),g=Math.sqrt(e*e/(1+p*p))*(o<t?-1:1),y=p*g;if(Math.abs(d-i-p*(l-t))<1e-10)return{x:l+g,y:d+y};let D=((l-t)*(o-t)+(d-i)*(s-i))/(f*f),b=t+D*(o-t),C=i+D*(s-i),w=this.getLineLength(l,d,b,C),x=Math.sqrt(e*e-w*w),M=Math.sqrt(x*x/(1+p*p))*(o<t?-1:1),F=p*M;return{x:b+M,y:C+F}}static getPointOnCubicBezier(e,t,i,o,s,l,d,f,p){function g(x){return x*x*x}function y(x){return 3*x*x*(1-x)}function D(x){return 3*x*(1-x)*(1-x)}function b(x){return(1-x)*(1-x)*(1-x)}let C=f*g(e)+l*y(e)+o*D(e)+t*b(e),w=p*g(e)+d*y(e)+s*D(e)+i*b(e);return{x:C,y:w}}static getPointOnQuadraticBezier(e,t,i,o,s,l,d){function f(b){return b*b}function p(b){return 2*b*(1-b)}function g(b){return(1-b)*(1-b)}let y=l*f(e)+o*p(e)+t*g(e),D=d*f(e)+s*p(e)+i*g(e);return{x:y,y:D}}static getPointOnEllipticalArc(e,t,i,o,s,l){let d=Math.cos(l),f=Math.sin(l),p={x:i*Math.cos(s),y:o*Math.sin(s)};return{x:e+(p.x*d-p.y*f),y:t+(p.x*f+p.y*d)}}static parsePathData(e){if(!e)return[];let t=e,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var o=0;o<i.length;o++)t=t.replace(new RegExp(i[o],"g"),"|"+i[o]);let s=t.split("|"),l=[],d=[],f=0,p=0,g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,y;for(o=1;o<s.length;o++){let Y=s[o],ne=Y.charAt(0);for(Y=Y.slice(1),d.length=0;y=g.exec(Y);)d.push(y[0]);let O=[];for(let j=0,T=d.length;j<T;j++){if(d[j]==="00"){O.push(0,0);continue}let K=parseFloat(d[j]);isNaN(K)?O.push(0):O.push(K)}for(;O.length>0&&!isNaN(O[0]);){let j="",T=[],K=f,pe=p;var D,b,C,w,x,M,F,k,N,q;switch(ne){case"l":f+=O.shift(),p+=O.shift(),j="L",T.push(f,p);break;case"L":f=O.shift(),p=O.shift(),T.push(f,p);break;case"m":var Q=O.shift(),z=O.shift();if(f+=Q,p+=z,j="M",l.length>2&&l[l.length-1].command==="z"){for(let oe=l.length-2;oe>=0;oe--)if(l[oe].command==="M"){f=l[oe].points[0]+Q,p=l[oe].points[1]+z;break}}T.push(f,p),ne="l";break;case"M":f=O.shift(),p=O.shift(),j="M",T.push(f,p),ne="L";break;case"h":f+=O.shift(),j="L",T.push(f,p);break;case"H":f=O.shift(),j="L",T.push(f,p);break;case"v":p+=O.shift(),j="L",T.push(f,p);break;case"V":p=O.shift(),j="L",T.push(f,p);break;case"C":T.push(O.shift(),O.shift(),O.shift(),O.shift()),f=O.shift(),p=O.shift(),T.push(f,p);break;case"c":T.push(f+O.shift(),p+O.shift(),f+O.shift(),p+O.shift()),f+=O.shift(),p+=O.shift(),j="C",T.push(f,p);break;case"S":b=f,C=p,D=l[l.length-1],D.command==="C"&&(b=f+(f-D.points[2]),C=p+(p-D.points[3])),T.push(b,C,O.shift(),O.shift()),f=O.shift(),p=O.shift(),j="C",T.push(f,p);break;case"s":b=f,C=p,D=l[l.length-1],D.command==="C"&&(b=f+(f-D.points[2]),C=p+(p-D.points[3])),T.push(b,C,f+O.shift(),p+O.shift()),f+=O.shift(),p+=O.shift(),j="C",T.push(f,p);break;case"Q":T.push(O.shift(),O.shift()),f=O.shift(),p=O.shift(),T.push(f,p);break;case"q":T.push(f+O.shift(),p+O.shift()),f+=O.shift(),p+=O.shift(),j="Q",T.push(f,p);break;case"T":b=f,C=p,D=l[l.length-1],D.command==="Q"&&(b=f+(f-D.points[0]),C=p+(p-D.points[1])),f=O.shift(),p=O.shift(),j="Q",T.push(b,C,f,p);break;case"t":b=f,C=p,D=l[l.length-1],D.command==="Q"&&(b=f+(f-D.points[0]),C=p+(p-D.points[1])),f+=O.shift(),p+=O.shift(),j="Q",T.push(b,C,f,p);break;case"A":w=O.shift(),x=O.shift(),M=O.shift(),F=O.shift(),k=O.shift(),N=f,q=p,f=O.shift(),p=O.shift(),j="A",T=this.convertEndpointToCenterParameterization(N,q,f,p,F,k,w,x,M);break;case"a":w=O.shift(),x=O.shift(),M=O.shift(),F=O.shift(),k=O.shift(),N=f,q=p,f+=O.shift(),p+=O.shift(),j="A",T=this.convertEndpointToCenterParameterization(N,q,f,p,F,k,w,x,M);break}l.push({command:j||ne,points:T,start:{x:K,y:pe},pathLength:this.calcLength(K,pe,j||ne,T)})}(ne==="z"||ne==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(e,t,i,o){let s,l,d,f,p=n;switch(i){case"L":return p.getLineLength(e,t,o[0],o[1]);case"C":return(0,_l.getCubicArcLength)([e,o[0],o[2],o[4]],[t,o[1],o[3],o[5]],1);case"Q":return(0,_l.getQuadraticArcLength)([e,o[0],o[2]],[t,o[1],o[3]],1);case"A":s=0;var g=o[4],y=o[5],D=o[4]+y,b=Math.PI/180;if(Math.abs(g-D)<b&&(b=Math.abs(g-D)),l=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],g,0),y<0)for(f=g-b;f>D;f-=b)d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;else for(f=g+b;f<D;f+=b)d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],f,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),l=d;return d=p.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],D,0),s+=p.getLineLength(l.x,l.y,d.x,d.y),s}return 0}static convertEndpointToCenterParameterization(e,t,i,o,s,l,d,f,p){let g=p*(Math.PI/180),y=Math.cos(g)*(e-i)/2+Math.sin(g)*(t-o)/2,D=-1*Math.sin(g)*(e-i)/2+Math.cos(g)*(t-o)/2,b=y*y/(d*d)+D*D/(f*f);b>1&&(d*=Math.sqrt(b),f*=Math.sqrt(b));let C=Math.sqrt((d*d*(f*f)-d*d*(D*D)-f*f*(y*y))/(d*d*(D*D)+f*f*(y*y)));s===l&&(C*=-1),isNaN(C)&&(C=0);let w=C*d*D/f,x=C*-f*y/d,M=(e+i)/2+Math.cos(g)*w-Math.sin(g)*x,F=(t+o)/2+Math.sin(g)*w+Math.cos(g)*x,k=function(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])},N=function(O,j){return(O[0]*j[0]+O[1]*j[1])/(k(O)*k(j))},q=function(O,j){return(O[0]*j[1]<O[1]*j[0]?-1:1)*Math.acos(N(O,j))},Q=q([1,0],[(y-w)/d,(D-x)/f]),z=[(y-w)/d,(D-x)/f],Y=[(-1*y-w)/d,(-1*D-x)/f],ne=q(z,Y);return N(z,Y)<=-1&&(ne=Math.PI),N(z,Y)>=1&&(ne=0),l===0&&ne>0&&(ne=ne-2*Math.PI),l===1&&ne<0&&(ne=ne+2*Math.PI),[M,F,d,f,Q,ne,g,l]}};sm.Path=fa;fa.prototype.className="Path";fa.prototype._attrsAffectingSize=["data"];(0,q9._registerNode)(fa);B9.Factory.addGetterSetter(fa,"data")});var VT=Be(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.Arrow=void 0;var lm=gt(),G9=kv(),NT=_t(),j9=pt(),LT=am(),wo=class extends G9.Line{_sceneFunc(e){super._sceneFunc(e);let t=Math.PI*2,i=this.points(),o=i,s=this.tension()!==0&&i.length>4;s&&(o=this.getTensionPoints());let l=this.pointerLength(),d=i.length,f,p;if(s){let D=[o[o.length-4],o[o.length-3],o[o.length-2],o[o.length-1],i[d-2],i[d-1]],b=LT.Path.calcLength(o[o.length-4],o[o.length-3],"C",D),C=LT.Path.getPointOnQuadraticBezier(Math.min(1,1-l/b),D[0],D[1],D[2],D[3],D[4],D[5]);f=i[d-2]-C.x,p=i[d-1]-C.y}else f=i[d-2]-i[d-4],p=i[d-1]-i[d-3];let g=(Math.atan2(p,f)+t)%t,y=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[d-2],i[d-1]),e.rotate(g),e.moveTo(0,0),e.lineTo(-l,y/2),e.lineTo(-l,-y/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),s?(f=(o[0]+o[2])/2-i[0],p=(o[1]+o[3])/2-i[1]):(f=i[2]-i[0],p=i[3]-i[1]),e.rotate((Math.atan2(-p,-f)+t)%t),e.moveTo(0,0),e.lineTo(-l,y/2),e.lineTo(-l,-y/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){let t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){let e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x-t,y:e.y-t,width:e.width+t*2,height:e.height+t*2}}};cm.Arrow=wo;wo.prototype.className="Arrow";(0,j9._registerNode)(wo);lm.Factory.addGetterSetter(wo,"pointerLength",10,(0,NT.getNumberValidator)());lm.Factory.addGetterSetter(wo,"pointerWidth",10,(0,NT.getNumberValidator)());lm.Factory.addGetterSetter(wo,"pointerAtBeginning",!1);lm.Factory.addGetterSetter(wo,"pointerAtEnding",!0)});var BT=Be(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.Circle=void 0;var z9=gt(),H9=Qn(),Q9=_t(),W9=pt(),ds=class extends H9.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};dm.Circle=ds;ds.prototype._centroid=!0;ds.prototype.className="Circle";ds.prototype._attrsAffectingSize=["radius"];(0,W9._registerNode)(ds);z9.Factory.addGetterSetter(ds,"radius",0,(0,Q9.getNumberValidator)())});var qT=Be(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.Ellipse=void 0;var Nv=gt(),$9=Qn(),UT=_t(),Y9=pt(),Wr=class extends $9.Shape{_sceneFunc(e){let t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};um.Ellipse=Wr;Wr.prototype.className="Ellipse";Wr.prototype._centroid=!0;Wr.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,Y9._registerNode)(Wr);Nv.Factory.addComponentsGetterSetter(Wr,"radius",["x","y"]);Nv.Factory.addGetterSetter(Wr,"radiusX",0,(0,UT.getNumberValidator)());Nv.Factory.addGetterSetter(Wr,"radiusY",0,(0,UT.getNumberValidator)())});var GT=Be(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.Image=void 0;var Vv=Dn(),ma=gt(),X9=Qn(),Z9=pt(),gd=_t(),Ji=class n extends X9.Shape{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){let e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){let e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){let t=this.getWidth(),i=this.getHeight(),o=this.cornerRadius(),s=this.attrs.image,l;if(s){let d=this.attrs.cropWidth,f=this.attrs.cropHeight;d&&f?l=[s,this.cropX(),this.cropY(),d,f,0,0,t,i]:l=[s,0,0,t,i]}(this.hasFill()||this.hasStroke()||o)&&(e.beginPath(),o?Vv.Util.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),s&&(o&&e.clip(),e.drawImage.apply(e,l))}_hitFunc(e){let t=this.width(),i=this.height(),o=this.cornerRadius();e.beginPath(),o?Vv.Util.drawRoundedRectPath(e,t,i,o):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t;return(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width}getHeight(){var e,t;return(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height}static fromURL(e,t,i=null){let o=Vv.Util.createImageElement();o.onload=function(){let s=new n({image:o});t(s)},o.onerror=i,o.crossOrigin="Anonymous",o.src=e}};hm.Image=Ji;Ji.prototype.className="Image";(0,Z9._registerNode)(Ji);ma.Factory.addGetterSetter(Ji,"cornerRadius",0,(0,gd.getNumberOrArrayOfNumbersValidator)(4));ma.Factory.addGetterSetter(Ji,"image");ma.Factory.addComponentsGetterSetter(Ji,"crop",["x","y","width","height"]);ma.Factory.addGetterSetter(Ji,"cropX",0,(0,gd.getNumberValidator)());ma.Factory.addGetterSetter(Ji,"cropY",0,(0,gd.getNumberValidator)());ma.Factory.addGetterSetter(Ji,"cropWidth",0,(0,gd.getNumberValidator)());ma.Factory.addGetterSetter(Ji,"cropHeight",0,(0,gd.getNumberValidator)())});var HT=Be(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.Tag=Dl.Label=void 0;var fm=gt(),K9=Qn(),J9=Kf(),jv=_t(),jT=pt(),zT=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],e7="Change.konva",t7="none",Bv="up",Uv="right",qv="down",Gv="left",n7=zT.length,yd=class extends J9.Group{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,i,o=function(){t._sync()};for(i=0;i<n7;i++)e.on(zT[i]+e7,o)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),i,o,s,l,d,f,p;if(e&&t){switch(i=e.width(),o=e.height(),s=t.pointerDirection(),l=t.pointerWidth(),p=t.pointerHeight(),d=0,f=0,s){case Bv:d=i/2,f=-1*p;break;case Uv:d=i+l,f=o/2;break;case qv:d=i/2,f=o+p;break;case Gv:d=-1*l,f=o/2;break}t.setAttrs({x:-1*d,y:-1*f,width:i,height:o}),e.setAttrs({x:-1*d,y:-1*f})}}};Dl.Label=yd;yd.prototype.className="Label";(0,jT._registerNode)(yd);var Io=class extends K9.Shape{_sceneFunc(e){let t=this.width(),i=this.height(),o=this.pointerDirection(),s=this.pointerWidth(),l=this.pointerHeight(),d=this.cornerRadius(),f=0,p=0,g=0,y=0;typeof d=="number"?f=p=g=y=Math.min(d,t/2,i/2):(f=Math.min(d[0]||0,t/2,i/2),p=Math.min(d[1]||0,t/2,i/2),y=Math.min(d[2]||0,t/2,i/2),g=Math.min(d[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(f,0),o===Bv&&(e.lineTo((t-s)/2,0),e.lineTo(t/2,-1*l),e.lineTo((t+s)/2,0)),e.lineTo(t-p,0),e.arc(t-p,p,p,Math.PI*3/2,0,!1),o===Uv&&(e.lineTo(t,(i-l)/2),e.lineTo(t+s,i/2),e.lineTo(t,(i+l)/2)),e.lineTo(t,i-y),e.arc(t-y,i-y,y,0,Math.PI/2,!1),o===qv&&(e.lineTo((t+s)/2,i),e.lineTo(t/2,i+l),e.lineTo((t-s)/2,i)),e.lineTo(g,i),e.arc(g,i-g,g,Math.PI/2,Math.PI,!1),o===Gv&&(e.lineTo(0,(i+l)/2),e.lineTo(-1*s,i/2),e.lineTo(0,(i-l)/2)),e.lineTo(0,f),e.arc(f,f,f,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,i=this.pointerWidth(),o=this.pointerHeight(),s=this.pointerDirection(),l=this.width(),d=this.height();return s===Bv?(t-=o,d+=o):s===qv?d+=o:s===Gv?(e-=i*1.5,l+=i):s===Uv&&(l+=i*1.5),{x:e,y:t,width:l,height:d}}};Dl.Tag=Io;Io.prototype.className="Tag";(0,jT._registerNode)(Io);fm.Factory.addGetterSetter(Io,"pointerDirection",t7);fm.Factory.addGetterSetter(Io,"pointerWidth",0,(0,jv.getNumberValidator)());fm.Factory.addGetterSetter(Io,"pointerHeight",0,(0,jv.getNumberValidator)());fm.Factory.addGetterSetter(Io,"cornerRadius",0,(0,jv.getNumberOrArrayOfNumbersValidator)(4))});var zv=Be(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.Rect=void 0;var i7=gt(),r7=Qn(),o7=pt(),s7=Dn(),a7=_t(),Cl=class extends r7.Shape{_sceneFunc(e){let t=this.cornerRadius(),i=this.width(),o=this.height();e.beginPath(),t?s7.Util.drawRoundedRectPath(e,i,o,t):e.rect(0,0,i,o),e.closePath(),e.fillStrokeShape(this)}};mm.Rect=Cl;Cl.prototype.className="Rect";(0,o7._registerNode)(Cl);i7.Factory.addGetterSetter(Cl,"cornerRadius",0,(0,a7.getNumberOrArrayOfNumbersValidator)(4))});var $T=Be(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.RegularPolygon=void 0;var QT=gt(),l7=Qn(),WT=_t(),c7=pt(),Eo=class extends l7.Shape{_sceneFunc(e){let t=this._getPoints();e.beginPath(),e.moveTo(t[0].x,t[0].y);for(let i=1;i<t.length;i++)e.lineTo(t[i].x,t[i].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){let e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(let o=0;o<e;o++)i.push({x:t*Math.sin(o*2*Math.PI/e),y:-1*t*Math.cos(o*2*Math.PI/e)});return i}getSelfRect(){let e=this._getPoints(),t=e[0].x,i=e[0].y,o=e[0].x,s=e[0].y;return e.forEach(l=>{t=Math.min(t,l.x),i=Math.max(i,l.x),o=Math.min(o,l.y),s=Math.max(s,l.y)}),{x:t,y:o,width:i-t,height:s-o}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};pm.RegularPolygon=Eo;Eo.prototype.className="RegularPolygon";Eo.prototype._centroid=!0;Eo.prototype._attrsAffectingSize=["radius"];(0,c7._registerNode)(Eo);QT.Factory.addGetterSetter(Eo,"radius",0,(0,WT.getNumberValidator)());QT.Factory.addGetterSetter(Eo,"sides",0,(0,WT.getNumberValidator)())});var KT=Be(gm=>{"use strict";Object.defineProperty(gm,"__esModule",{value:!0});gm.Ring=void 0;var XT=gt(),d7=Qn(),ZT=_t(),u7=pt(),YT=Math.PI*2,To=class extends d7.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,YT,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),YT,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};gm.Ring=To;To.prototype.className="Ring";To.prototype._centroid=!0;To.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,u7._registerNode)(To);XT.Factory.addGetterSetter(To,"innerRadius",0,(0,ZT.getNumberValidator)());XT.Factory.addGetterSetter(To,"outerRadius",0,(0,ZT.getNumberValidator)())});var ex=Be(ym=>{"use strict";Object.defineProperty(ym,"__esModule",{value:!0});ym.Sprite=void 0;var pa=gt(),h7=Qn(),f7=em(),JT=_t(),m7=pt(),er=class extends h7.Shape{constructor(e){super(e),this._updated=!0,this.anim=new f7.Animation(()=>{let t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){let t=this.animation(),i=this.frameIndex(),o=i*4,s=this.animations()[t],l=this.frameOffsets(),d=s[o+0],f=s[o+1],p=s[o+2],g=s[o+3],y=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,g),e.closePath(),e.fillStrokeShape(this)),y)if(l){let D=l[t],b=i*2;e.drawImage(y,d,f,p,g,D[b+0],D[b+1],p,g)}else e.drawImage(y,d,f,p,g,0,0,p,g)}_hitFunc(e){let t=this.animation(),i=this.frameIndex(),o=i*4,s=this.animations()[t],l=this.frameOffsets(),d=s[o+2],f=s[o+3];if(e.beginPath(),l){let p=l[t],g=i*2;e.rect(p[g+0],p[g+1],d,f)}else e.rect(0,0,d,f);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){let e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;let e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){let e=this.frameIndex(),t=this.animation(),i=this.animations(),o=i[t],s=o.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}};ym.Sprite=er;er.prototype.className="Sprite";(0,m7._registerNode)(er);pa.Factory.addGetterSetter(er,"animation");pa.Factory.addGetterSetter(er,"animations");pa.Factory.addGetterSetter(er,"frameOffsets");pa.Factory.addGetterSetter(er,"image");pa.Factory.addGetterSetter(er,"frameIndex",0,(0,JT.getNumberValidator)());pa.Factory.addGetterSetter(er,"frameRate",17,(0,JT.getNumberValidator)());pa.Factory.backCompat(er,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"})});var tx=Be(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.Star=void 0;var Hv=gt(),p7=Qn(),Qv=_t(),g7=pt(),$r=class extends p7.Shape{_sceneFunc(e){let t=this.innerRadius(),i=this.outerRadius(),o=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let s=1;s<o*2;s++){let l=s%2===0?i:t,d=l*Math.sin(s*Math.PI/o),f=-1*l*Math.cos(s*Math.PI/o);e.lineTo(d,f)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};vm.Star=$r;$r.prototype.className="Star";$r.prototype._centroid=!0;$r.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,g7._registerNode)($r);Hv.Factory.addGetterSetter($r,"numPoints",5,(0,Qv.getNumberValidator)());Hv.Factory.addGetterSetter($r,"innerRadius",0,(0,Qv.getNumberValidator)());Hv.Factory.addGetterSetter($r,"outerRadius",0,(0,Qv.getNumberValidator)())});var Zv=Be(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});Sd.Text=void 0;Sd.stringToArray=sx;var Xv=Dn(),ui=gt(),y7=Qn(),Wv=pt(),us=_t(),v7=pt();function sx(n){return[...n].reduce((e,t,i,o)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(t)?e.push(t):new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(o[i+1]||""))?e.push(t+o[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:e.push(t),e),[])}var wl="auto",S7="center",ax="inherit",vd="justify",b7="Change.konva",_7="2d",nx="-",lx="left",D7="text",C7="Text",w7="top",I7="bottom",ix="middle",cx="normal",E7="px ",Sm=" ",T7="right",rx="rtl",x7="word",A7="char",ox="none",$v="\u2026",dx=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],M7=dx.length;function R7(n){return n.split(",").map(e=>{e=e.trim();let t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}var bm;function Yv(){return bm||(bm=Xv.Util.createCanvasElement().getContext(_7),bm)}function O7(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function P7(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function F7(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}var vn=class extends y7.Shape{constructor(e){super(F7(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<M7;t++)this.on(dx[t]+b7,this._setTextData);this._setTextData()}_sceneFunc(e){let t=this.textArr,i=t.length;if(!this.text())return;let o=this.padding(),s=this.fontSize(),l=this.lineHeight()*s,d=this.verticalAlign(),f=this.direction(),p=0,g=this.align(),y=this.getWidth(),D=this.letterSpacing(),b=this.fill(),C=this.textDecoration(),w=C.indexOf("underline")!==-1,x=C.indexOf("line-through")!==-1,M;f=f===ax?e.direction:f;let F=l/2,k=ix;if(Wv.Konva._fixTextRendering){let K=this.measureSize("M");k="alphabetic",F=(K.fontBoundingBoxAscent-K.fontBoundingBoxDescent)/2+l/2}var N=0,q=0;for(f===rx&&e.setAttr("direction",f),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",k),e.setAttr("textAlign",lx),d===ix?p=(this.getHeight()-i*l-o*2)/2:d===I7&&(p=this.getHeight()-i*l-o*2),e.translate(o,p+o),M=0;M<i;M++){var N=0,q=0,Q=t[M],z=Q.text,Y=Q.width,ne=Q.lastInParagraph,O,j,T;if(e.save(),g===T7?N+=y-Y-o*2:g===S7&&(N+=(y-Y-o*2)/2),w){e.save(),e.beginPath();let oe=Wv.Konva._fixTextRendering?Math.round(s/4):Math.round(s/2),V=N,$=F+q+oe;e.moveTo(V,$),O=z.split(" ").length-1,j=O===0,T=g===vd&&!ne?y-o*2:Y,e.lineTo(V+Math.round(T),$),e.lineWidth=s/15;let ce=this._getLinearGradient();e.strokeStyle=ce||b,e.stroke(),e.restore()}if(x){e.save(),e.beginPath();let oe=Wv.Konva._fixTextRendering?-Math.round(s/4):0;e.moveTo(N,F+q+oe),O=z.split(" ").length-1,j=O===0,T=g===vd&&ne&&!j?y-o*2:Y,e.lineTo(N+Math.round(T),F+q+oe),e.lineWidth=s/15;let V=this._getLinearGradient();e.strokeStyle=V||b,e.stroke(),e.restore()}if(f!==rx&&(D!==0||g===vd)){O=z.split(" ").length-1;let oe=sx(z);for(let V=0;V<oe.length;V++){let $=oe[V];$===" "&&!ne&&g===vd&&(N+=(y-o*2-Y)/O),this._partialTextX=N,this._partialTextY=F+q,this._partialText=$,e.fillStrokeShape(this),N+=this.measureSize($).width+D}}else D!==0&&e.setAttr("letterSpacing",`${D}px`),this._partialTextX=N,this._partialTextY=F+q,this._partialText=z,e.fillStrokeShape(this);e.restore(),i>1&&(F+=l)}}_hitFunc(e){let t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){let t=Xv.Util._isString(e)?e:e==null?"":e+"";return this._setAttr(D7,t),this}getWidth(){return this.attrs.width===wl||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===wl||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Xv.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,o,s,l,d,f,p,g,y,D;let b=Yv(),C=this.fontSize(),w;b.save(),b.font=this._getContextFont(),w=b.measureText(e),b.restore();let x=C/100;return{actualBoundingBoxAscent:(t=w.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*x,actualBoundingBoxDescent:(i=w.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(o=w.actualBoundingBoxLeft)!==null&&o!==void 0?o:-7.421875*x,actualBoundingBoxRight:(s=w.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*x,alphabeticBaseline:(l=w.alphabeticBaseline)!==null&&l!==void 0?l:0,emHeightAscent:(d=w.emHeightAscent)!==null&&d!==void 0?d:100*x,emHeightDescent:(f=w.emHeightDescent)!==null&&f!==void 0?f:-20*x,fontBoundingBoxAscent:(p=w.fontBoundingBoxAscent)!==null&&p!==void 0?p:91*x,fontBoundingBoxDescent:(g=w.fontBoundingBoxDescent)!==null&&g!==void 0?g:21*x,hangingBaseline:(y=w.hangingBaseline)!==null&&y!==void 0?y:72.80000305175781*x,ideographicBaseline:(D=w.ideographicBaseline)!==null&&D!==void 0?D:-21*x,width:w.width,height:C}}_getContextFont(){return this.fontStyle()+Sm+this.fontVariant()+Sm+(this.fontSize()+E7)+R7(this.fontFamily())}_addTextLine(e){this.align()===vd&&(e=e.trim());let i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){let t=this.letterSpacing(),i=e.length;return Yv().measureText(e).width+(i?t*(i-1):0)}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,o=this.lineHeight()*t,s=this.attrs.width,l=this.attrs.height,d=s!==wl&&s!==void 0,f=l!==wl&&l!==void 0,p=this.padding(),g=s-p*2,y=l-p*2,D=0,b=this.wrap(),C=b!==ox,w=b!==A7&&C,x=this.ellipsis();this.textArr=[],Yv().font=this._getContextFont();let M=x?this._getTextWidth($v):0;for(let k=0,N=e.length;k<N;++k){let q=e[k],Q=this._getTextWidth(q);if(d&&Q>g)for(;q.length>0;){let z=0,Y=q.length,ne="",O=0;for(;z<Y;){let j=z+Y>>>1,T=q.slice(0,j+1),K=this._getTextWidth(T)+M;K<=g?(z=j+1,ne=T,O=K):Y=j}if(ne){if(w){var F;let T=q[ne.length];(T===Sm||T===nx)&&O<=g?F=ne.length:F=Math.max(ne.lastIndexOf(Sm),ne.lastIndexOf(nx))+1,F>0&&(z=F,ne=ne.slice(0,z),O=this._getTextWidth(ne))}if(ne=ne.trimRight(),this._addTextLine(ne),i=Math.max(i,O),D+=o,this._shouldHandleEllipsis(D)){this._tryToAddEllipsisToLastLine();break}if(q=q.slice(z),q=q.trimLeft(),q.length>0&&(Q=this._getTextWidth(q),Q<=g)){this._addTextLine(q),D+=o,i=Math.max(i,Q);break}}else break}else this._addTextLine(q),D+=o,i=Math.max(i,Q),this._shouldHandleEllipsis(D)&&k<N-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),f&&D+o>y)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){let t=+this.fontSize(),i=this.lineHeight()*t,o=this.attrs.height,s=o!==wl&&o!==void 0,l=this.padding(),d=o-l*2;return!(this.wrap()!==ox)||s&&e+i>d}_tryToAddEllipsisToLastLine(){let e=this.attrs.width,t=e!==wl&&e!==void 0,i=this.padding(),o=e-i*2,s=this.ellipsis(),l=this.textArr[this.textArr.length-1];!l||!s||(t&&(this._getTextWidth(l.text+$v)<o||(l.text=l.text.slice(0,l.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(l.text+$v))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){let e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};Sd.Text=vn;vn.prototype._fillFunc=O7;vn.prototype._strokeFunc=P7;vn.prototype.className=C7;vn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,v7._registerNode)(vn);ui.Factory.overWriteSetter(vn,"width",(0,us.getNumberOrAutoValidator)());ui.Factory.overWriteSetter(vn,"height",(0,us.getNumberOrAutoValidator)());ui.Factory.addGetterSetter(vn,"direction",ax);ui.Factory.addGetterSetter(vn,"fontFamily","Arial");ui.Factory.addGetterSetter(vn,"fontSize",12,(0,us.getNumberValidator)());ui.Factory.addGetterSetter(vn,"fontStyle",cx);ui.Factory.addGetterSetter(vn,"fontVariant",cx);ui.Factory.addGetterSetter(vn,"padding",0,(0,us.getNumberValidator)());ui.Factory.addGetterSetter(vn,"align",lx);ui.Factory.addGetterSetter(vn,"verticalAlign",w7);ui.Factory.addGetterSetter(vn,"lineHeight",1,(0,us.getNumberValidator)());ui.Factory.addGetterSetter(vn,"wrap",x7);ui.Factory.addGetterSetter(vn,"ellipsis",!1,(0,us.getBooleanValidator)());ui.Factory.addGetterSetter(vn,"letterSpacing",0,(0,us.getNumberValidator)());ui.Factory.addGetterSetter(vn,"text","",(0,us.getStringValidator)());ui.Factory.addGetterSetter(vn,"textDecoration","")});var px=Be(_m=>{"use strict";Object.defineProperty(_m,"__esModule",{value:!0});_m.TextPath=void 0;var Kv=Dn(),pr=gt(),k7=Qn(),bd=am(),Jv=Zv(),ux=_t(),L7=pt(),N7="",hx="normal";function fx(n){n.fillText(this.partialText,0,0)}function mx(n){n.strokeText(this.partialText,0,0)}var kn=class extends k7.Shape{constructor(e){super(e),this.dummyCanvas=Kv.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return bd.Path.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;let t=this.pathLength;return e-1>t?null:bd.Path.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=bd.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();let t=this.textDecoration(),i=this.fill(),o=this.fontSize(),s=this.glyphInfo;t==="underline"&&e.beginPath();for(let l=0;l<s.length;l++){e.save();let d=s[l].p0;e.translate(d.x,d.y),e.rotate(s[l].rotation),this.partialText=s[l].text,e.fillStrokeShape(this),t==="underline"&&(l===0&&e.moveTo(0,o/2+1),e.lineTo(o,o/2+1)),e.restore()}t==="underline"&&(e.strokeStyle=i,e.lineWidth=o/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();let t=this.glyphInfo;if(t.length>=1){let i=t[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<t.length;i++){let o=t[i].p1;e.lineTo(o.x,o.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Kv.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Jv.Text.prototype.setText.call(this,e)}_getContextFont(){return Jv.Text.prototype._getContextFont.call(this)}_getTextSize(e){let i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();let o=i.measureText(e);return i.restore(),{width:o.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){let{width:e,height:t}=this._getTextSize(this.attrs.text);if(this.textWidth=e,this.textHeight=t,this.glyphInfo=[],!this.attrs.data)return null;let i=this.letterSpacing(),o=this.align(),s=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*i,0),d=0;o==="center"&&(d=Math.max(0,this.pathLength/2-l/2)),o==="right"&&(d=Math.max(0,this.pathLength-l));let f=(0,Jv.stringToArray)(this.text()),p=d;for(let g=0;g<f.length;g++){let y=this._getPointAtLength(p);if(!y)return;let D=this._getTextSize(f[g]).width+i;if(f[g]===" "&&o==="justify"){let F=this.text().split(" ").length-1;D+=(this.pathLength-l)/F}let b=this._getPointAtLength(p+D);if(!b)return;let C=bd.Path.getLineLength(y.x,y.y,b.x,b.y),w=0;if(s)try{w=s(f[g-1],f[g])*this.fontSize()}catch{w=0}y.x+=w,b.x+=w,this.textWidth+=w;let x=bd.Path.getPointOnLine(w+C/2,y.x,y.y,b.x,b.y),M=Math.atan2(b.y-y.y,b.x-y.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:f[g],rotation:M,p0:y,p1:b}),p+=D}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};let e=[];this.glyphInfo.forEach(function(p){e.push(p.p0.x),e.push(p.p0.y),e.push(p.p1.x),e.push(p.p1.y)});let t=e[0]||0,i=e[0]||0,o=e[1]||0,s=e[1]||0,l,d;for(let p=0;p<e.length/2;p++)l=e[p*2],d=e[p*2+1],t=Math.min(t,l),i=Math.max(i,l),o=Math.min(o,d),s=Math.max(s,d);let f=this.fontSize();return{x:t-f/2,y:o-f/2,width:i-t+f,height:s-o+f}}destroy(){return Kv.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};_m.TextPath=kn;kn.prototype._fillFunc=fx;kn.prototype._strokeFunc=mx;kn.prototype._fillFuncHit=fx;kn.prototype._strokeFuncHit=mx;kn.prototype.className="TextPath";kn.prototype._attrsAffectingSize=["text","fontSize","data"];(0,L7._registerNode)(kn);pr.Factory.addGetterSetter(kn,"data");pr.Factory.addGetterSetter(kn,"fontFamily","Arial");pr.Factory.addGetterSetter(kn,"fontSize",12,(0,ux.getNumberValidator)());pr.Factory.addGetterSetter(kn,"fontStyle",hx);pr.Factory.addGetterSetter(kn,"align","left");pr.Factory.addGetterSetter(kn,"letterSpacing",0,(0,ux.getNumberValidator)());pr.Factory.addGetterSetter(kn,"textBaseline","middle");pr.Factory.addGetterSetter(kn,"fontVariant",hx);pr.Factory.addGetterSetter(kn,"text",N7);pr.Factory.addGetterSetter(kn,"textDecoration",null);pr.Factory.addGetterSetter(kn,"kerningFunc",null)});var Dx=Be(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.Transformer=void 0;var rn=Dn(),zt=gt(),gx=En(),V7=Qn(),B7=zv(),yx=Kf(),gr=pt(),hs=_t(),U7=pt(),bx="tr-konva",q7=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${bx}`).join(" "),vx="nodesRect",G7=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],j7={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},z7="ontouchstart"in gr.Konva._global;function H7(n,e,t){if(n==="rotater")return t;e+=rn.Util.degToRad(j7[n]||0);let i=(rn.Util.radToDeg(e)%360+360)%360;return rn.Util._inRange(i,315+22.5,360)||rn.Util._inRange(i,0,22.5)?"ns-resize":rn.Util._inRange(i,45-22.5,45+22.5)?"nesw-resize":rn.Util._inRange(i,90-22.5,90+22.5)?"ew-resize":rn.Util._inRange(i,135-22.5,135+22.5)?"nwse-resize":rn.Util._inRange(i,180-22.5,180+22.5)?"ns-resize":rn.Util._inRange(i,225-22.5,225+22.5)?"nesw-resize":rn.Util._inRange(i,270-22.5,270+22.5)?"ew-resize":rn.Util._inRange(i,315-22.5,315+22.5)?"nwse-resize":(rn.Util.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}var Dm=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Sx=1e8;function Q7(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function _x(n,e,t){let i=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),o=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return Bt(we({},n),{rotation:n.rotation+e,x:i,y:o})}function W7(n,e){let t=Q7(n);return _x(n,e,t)}function $7(n,e,t){let i=e;for(let o=0;o<n.length;o++){let s=gr.Konva.getAngle(n[o]),l=Math.abs(s-e)%(Math.PI*2);Math.min(l,Math.PI*2-l)<t&&(i=s)}return i}var eS=0,Et=class extends yx.Group{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(q7,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return rn.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return bx+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();let t=e.filter(o=>o.isAncestorOf(this)?(rn.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(o=>{let s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=o._attrsAffectingSize.map(d=>d+"Change."+this._getEventNamespace()).join(" ");o.on(l,s),o.on(G7.map(d=>d+`.${this._getEventNamespace()}`).join(" "),s),o.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(o)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,i=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!t)return;let o=e.getAbsolutePosition(),s=o.x-t.x,l=o.y-t.y;this.nodes().forEach(d=>{if(d===e||d.isDragging())return;let f=d.getAbsolutePosition();d.setAbsolutePosition({x:f.x+s,y:f.y+l}),d.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(vx),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(vx,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),i){let o=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(i),l=e.getAbsolutePosition(i),d=o.x*s.x-e.offsetX()*s.x,f=o.y*s.y-e.offsetY()*s.y,p=(gr.Konva.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),g={x:l.x+d*Math.cos(p)+f*Math.sin(-p),y:l.y+f*Math.cos(p)+d*Math.sin(p),width:o.width*s.x,height:o.height*s.y,rotation:p};return _x(g,-gr.Konva.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-Sx,y:-Sx,width:0,height:0,rotation:0};let t=[];this.nodes().map(p=>{let g=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),y=[{x:g.x,y:g.y},{x:g.x+g.width,y:g.y},{x:g.x+g.width,y:g.y+g.height},{x:g.x,y:g.y+g.height}],D=p.getAbsoluteTransform();y.forEach(function(b){let C=D.point(b);t.push(C)})});let i=new rn.Transform;i.rotate(-gr.Konva.getAngle(this.rotation()));let o=1/0,s=1/0,l=-1/0,d=-1/0;t.forEach(function(p){let g=i.point(p);o===void 0&&(o=l=g.x,s=d=g.y),o=Math.min(o,g.x),s=Math.min(s,g.y),l=Math.max(l,g.x),d=Math.max(d,g.y)}),i.invert();let f=i.point({x:o,y:s});return{x:f.x,y:f.y,width:l-o,height:d-s,rotation:gr.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Dm.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){let t=new B7.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:z7?10:"auto"}),i=this;t.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),t.on("dragstart",o=>{t.stopDrag(),o.cancelBubble=!0}),t.on("dragend",o=>{o.cancelBubble=!0}),t.on("mouseenter",()=>{let o=gr.Konva.getAngle(this.rotation()),s=this.rotateAnchorCursor(),l=H7(e,o,s);t.getStage().content&&(t.getStage().content.style.cursor=l),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){let e=new V7.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(t,i){let o=i.getParent(),s=o.padding();t.beginPath(),t.rect(-s,-s,i.width()+s*2,i.height()+s*2),t.moveTo(i.width()/2,-s),o.rotateEnabled()&&o.rotateLineVisible()&&t.lineTo(i.width()/2,-o.rotateAnchorOffset()*rn.Util._sign(i.height())-s),t.fillStrokeShape(i)},hitFunc:(t,i)=>{if(!this.shouldOverdrawWholeArea())return;let o=this.padding();t.beginPath(),t.rect(-o,-o,i.width()+o*2,i.height()+o*2),t.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];let t=this._getNodeRect(),i=t.width,o=t.height,s=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));this.sin=Math.abs(o/s),this.cos=Math.abs(i/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;let l=e.target.getAbsolutePosition(),d=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:d.x-l.x,y:d.y-l.y},eS++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(f=>{f._fire("transformstart",{evt:e.evt,target:f})})}_handleMouseMove(e){let t,i,o,s=this.findOne("."+this._movingAnchorName),l=s.getStage();l.setPointersPositions(e);let d=l.getPointerPosition(),f={x:d.x-this._anchorDragOffset.x,y:d.y-this._anchorDragOffset.y},p=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(f=this.anchorDragBoundFunc()(p,f,e)),s.setAbsolutePosition(f);let g=s.getAbsolutePosition();if(p.x===g.x&&p.y===g.y)return;if(this._movingAnchorName==="rotater"){let q=this._getNodeRect();t=s.x()-q.width/2,i=-s.y()+q.height/2;let Q=Math.atan2(-i,t)+Math.PI/2;q.height<0&&(Q-=Math.PI);let Y=gr.Konva.getAngle(this.rotation())+Q,ne=gr.Konva.getAngle(this.rotationSnapTolerance()),j=$7(this.rotationSnaps(),Y,ne)-q.rotation,T=W7(q,j);this._fitNodesInto(T,e);return}let y=this.shiftBehavior(),D;y==="inverted"?D=this.keepRatio()&&!e.shiftKey:y==="none"?D=this.keepRatio():D=this.keepRatio()||e.shiftKey;var M=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(D){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};o=Math.sqrt(Math.pow(b.x-s.x(),2)+Math.pow(b.y-s.y(),2));var C=this.findOne(".top-left").x()>b.x?-1:1,w=this.findOne(".top-left").y()>b.y?-1:1;t=o*this.cos*C,i=o*this.sin*w,this.findOne(".top-left").x(b.x-t),this.findOne(".top-left").y(b.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(D){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};o=Math.sqrt(Math.pow(s.x()-b.x,2)+Math.pow(b.y-s.y(),2));var C=this.findOne(".top-right").x()<b.x?-1:1,w=this.findOne(".top-right").y()>b.y?-1:1;t=o*this.cos*C,i=o*this.sin*w,this.findOne(".top-right").x(b.x+t),this.findOne(".top-right").y(b.y-i)}var x=s.position();this.findOne(".top-left").y(x.y),this.findOne(".bottom-right").x(x.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(D){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};o=Math.sqrt(Math.pow(b.x-s.x(),2)+Math.pow(s.y()-b.y,2));var C=b.x<s.x()?-1:1,w=s.y()<b.y?-1:1;t=o*this.cos*C,i=o*this.sin*w,s.x(b.x-t),s.y(b.y+i)}x=s.position(),this.findOne(".top-left").x(x.x),this.findOne(".bottom-right").y(x.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(D){var b=M?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};o=Math.sqrt(Math.pow(s.x()-b.x,2)+Math.pow(s.y()-b.y,2));var C=this.findOne(".bottom-right").x()<b.x?-1:1,w=this.findOne(".bottom-right").y()<b.y?-1:1;t=o*this.cos*C,i=o*this.sin*w,this.findOne(".bottom-right").x(b.x+t),this.findOne(".bottom-right").y(b.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var M=this.centeredScaling()||e.altKey;if(M){let q=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),z=q.x(),Y=q.y(),ne=this.getWidth()-Q.x(),O=this.getHeight()-Q.y();Q.move({x:-z,y:-Y}),q.move({x:ne,y:O})}let F=this.findOne(".top-left").getAbsolutePosition();t=F.x,i=F.y;let k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),N=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:k,height:N,rotation:gr.Konva.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));let i=this.getNode();eS--,this._fire("transformend",{evt:e,target:i}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),i&&this._nodes.forEach(o=>{var s;o._fire("transformend",{evt:e,target:o}),(s=o.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){let i=this._getNodeRect(),o=1;if(rn.Util._inRange(e.width,-this.padding()*2-o,o)){this.update();return}if(rn.Util._inRange(e.height,-this.padding()*2-o,o)){this.update();return}let s=new rn.Transform;if(s.rotate(gr.Konva.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){let D=s.point({x:-this.padding()*2,y:0});e.x+=D.x,e.y+=D.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){let D=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){let D=s.point({x:0,y:-this.padding()*2});e.x+=D.x,e.y+=D.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){let D=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){let D=this.boundBoxFunc()(i,e);D?e=D:rn.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}let l=1e7,d=new rn.Transform;d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.width/l,i.height/l);let f=new rn.Transform,p=e.width/l,g=e.height/l;this.flipEnabled()===!1?(f.translate(e.x,e.y),f.rotate(e.rotation),f.translate(e.width<0?e.width:0,e.height<0?e.height:0),f.scale(Math.abs(p),Math.abs(g))):(f.translate(e.x,e.y),f.rotate(e.rotation),f.scale(p,g));let y=f.multiply(d.invert());this._nodes.forEach(D=>{var b;let C=D.getParent().getAbsoluteTransform(),w=D.getTransform().copy();w.translate(D.offsetX(),D.offsetY());let x=new rn.Transform;x.multiply(C.copy().invert()).multiply(y).multiply(C).multiply(w);let M=x.decompose();D.setAttrs(M),(b=D.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(rn.Util._getRotation(e.rotation)),this._nodes.forEach(D=>{this._fire("transform",{evt:t,target:D}),D._fire("transform",{evt:t,target:D})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;let t=this._getNodeRect();this.rotation(rn.Util._getRotation(t.rotation));let i=t.width,o=t.height,s=this.enabledAnchors(),l=this.resizeEnabled(),d=this.padding(),f=this.anchorSize(),p=this.find("._anchor");p.forEach(y=>{y.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+d,offsetY:f/2+d,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+d,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-d,offsetY:f/2+d,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+d,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-d,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+d,offsetY:f/2-d,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-d,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-d,offsetY:f/2-d,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*rn.Util._sign(o)-d,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});let g=this.anchorStyleFunc();g&&p.forEach(y=>{g(y)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();let e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),yx.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return gx.Node.prototype.toObject.call(this)}clone(e){return gx.Node.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Cm.Transformer=Et;Et.isTransforming=()=>eS>0;function Y7(n){return n instanceof Array||rn.Util.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){Dm.indexOf(e)===-1&&rn.Util.warn("Unknown anchor name: "+e+". Available names are: "+Dm.join(", "))}),n||[]}Et.prototype.className="Transformer";(0,U7._registerNode)(Et);zt.Factory.addGetterSetter(Et,"enabledAnchors",Dm,Y7);zt.Factory.addGetterSetter(Et,"flipEnabled",!0,(0,hs.getBooleanValidator)());zt.Factory.addGetterSetter(Et,"resizeEnabled",!0);zt.Factory.addGetterSetter(Et,"anchorSize",10,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"rotateEnabled",!0);zt.Factory.addGetterSetter(Et,"rotateLineVisible",!0);zt.Factory.addGetterSetter(Et,"rotationSnaps",[]);zt.Factory.addGetterSetter(Et,"rotateAnchorOffset",50,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"rotateAnchorCursor","crosshair");zt.Factory.addGetterSetter(Et,"rotationSnapTolerance",5,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"borderEnabled",!0);zt.Factory.addGetterSetter(Et,"anchorStroke","rgb(0, 161, 255)");zt.Factory.addGetterSetter(Et,"anchorStrokeWidth",1,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"anchorFill","white");zt.Factory.addGetterSetter(Et,"anchorCornerRadius",0,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"borderStroke","rgb(0, 161, 255)");zt.Factory.addGetterSetter(Et,"borderStrokeWidth",1,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"borderDash");zt.Factory.addGetterSetter(Et,"keepRatio",!0);zt.Factory.addGetterSetter(Et,"shiftBehavior","default");zt.Factory.addGetterSetter(Et,"centeredScaling",!1);zt.Factory.addGetterSetter(Et,"ignoreStroke",!1);zt.Factory.addGetterSetter(Et,"padding",0,(0,hs.getNumberValidator)());zt.Factory.addGetterSetter(Et,"node");zt.Factory.addGetterSetter(Et,"nodes");zt.Factory.addGetterSetter(Et,"boundBoxFunc");zt.Factory.addGetterSetter(Et,"anchorDragBoundFunc");zt.Factory.addGetterSetter(Et,"anchorStyleFunc");zt.Factory.addGetterSetter(Et,"shouldOverdrawWholeArea",!1);zt.Factory.addGetterSetter(Et,"useSingleNodeRotation",!0);zt.Factory.backCompat(Et,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"})});var wx=Be(Im=>{"use strict";Object.defineProperty(Im,"__esModule",{value:!0});Im.Wedge=void 0;var wm=gt(),X7=Qn(),Z7=pt(),Cx=_t(),K7=pt(),yr=class extends X7.Shape{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Z7.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}};Im.Wedge=yr;yr.prototype.className="Wedge";yr.prototype._centroid=!0;yr.prototype._attrsAffectingSize=["radius"];(0,K7._registerNode)(yr);wm.Factory.addGetterSetter(yr,"radius",0,(0,Cx.getNumberValidator)());wm.Factory.addGetterSetter(yr,"angle",0,(0,Cx.getNumberValidator)());wm.Factory.addGetterSetter(yr,"clockwise",!1);wm.Factory.backCompat(yr,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"})});var Tx=Be(Em=>{"use strict";Object.defineProperty(Em,"__esModule",{value:!0});Em.Blur=void 0;var Ix=gt(),J7=En(),eV=_t();function Ex(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var tV=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],nV=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function iV(n,e){let t=n.data,i=n.width,o=n.height,s,l,d,f,p,g,y,D,b,C,w,x,M,F,k,N,q,Q,z,Y,ne,O,j,T,K=e+e+1,pe=i-1,oe=o-1,V=e+1,$=V*(V+1)/2,ce=new Ex,X=null,W=ce,De=null,ye=null,he=tV[e],Ge=nV[e];for(d=1;d<K;d++)W=W.next=new Ex,d===V&&(X=W);for(W.next=ce,y=g=0,l=0;l<o;l++){for(N=q=Q=z=D=b=C=w=0,x=V*(Y=t[g]),M=V*(ne=t[g+1]),F=V*(O=t[g+2]),k=V*(j=t[g+3]),D+=$*Y,b+=$*ne,C+=$*O,w+=$*j,W=ce,d=0;d<V;d++)W.r=Y,W.g=ne,W.b=O,W.a=j,W=W.next;for(d=1;d<V;d++)f=g+((pe<d?pe:d)<<2),D+=(W.r=Y=t[f])*(T=V-d),b+=(W.g=ne=t[f+1])*T,C+=(W.b=O=t[f+2])*T,w+=(W.a=j=t[f+3])*T,N+=Y,q+=ne,Q+=O,z+=j,W=W.next;for(De=ce,ye=X,s=0;s<i;s++)t[g+3]=j=w*he>>Ge,j!==0?(j=255/j,t[g]=(D*he>>Ge)*j,t[g+1]=(b*he>>Ge)*j,t[g+2]=(C*he>>Ge)*j):t[g]=t[g+1]=t[g+2]=0,D-=x,b-=M,C-=F,w-=k,x-=De.r,M-=De.g,F-=De.b,k-=De.a,f=y+((f=s+e+1)<pe?f:pe)<<2,N+=De.r=t[f],q+=De.g=t[f+1],Q+=De.b=t[f+2],z+=De.a=t[f+3],D+=N,b+=q,C+=Q,w+=z,De=De.next,x+=Y=ye.r,M+=ne=ye.g,F+=O=ye.b,k+=j=ye.a,N-=Y,q-=ne,Q-=O,z-=j,ye=ye.next,g+=4;y+=i}for(s=0;s<i;s++){for(q=Q=z=N=b=C=w=D=0,g=s<<2,x=V*(Y=t[g]),M=V*(ne=t[g+1]),F=V*(O=t[g+2]),k=V*(j=t[g+3]),D+=$*Y,b+=$*ne,C+=$*O,w+=$*j,W=ce,d=0;d<V;d++)W.r=Y,W.g=ne,W.b=O,W.a=j,W=W.next;for(p=i,d=1;d<=e;d++)g=p+s<<2,D+=(W.r=Y=t[g])*(T=V-d),b+=(W.g=ne=t[g+1])*T,C+=(W.b=O=t[g+2])*T,w+=(W.a=j=t[g+3])*T,N+=Y,q+=ne,Q+=O,z+=j,W=W.next,d<oe&&(p+=i);for(g=s,De=ce,ye=X,l=0;l<o;l++)f=g<<2,t[f+3]=j=w*he>>Ge,j>0?(j=255/j,t[f]=(D*he>>Ge)*j,t[f+1]=(b*he>>Ge)*j,t[f+2]=(C*he>>Ge)*j):t[f]=t[f+1]=t[f+2]=0,D-=x,b-=M,C-=F,w-=k,x-=De.r,M-=De.g,F-=De.b,k-=De.a,f=s+((f=l+V)<oe?f:oe)*i<<2,D+=N+=De.r=t[f],b+=q+=De.g=t[f+1],C+=Q+=De.b=t[f+2],w+=z+=De.a=t[f+3],De=De.next,x+=Y=ye.r,M+=ne=ye.g,F+=O=ye.b,k+=j=ye.a,N-=Y,q-=ne,Q-=O,z-=j,ye=ye.next,g+=i}}var rV=function(e){let t=Math.round(this.blurRadius());t>0&&iV(e,t)};Em.Blur=rV;Ix.Factory.addGetterSetter(J7.Node,"blurRadius",0,(0,eV.getNumberValidator)(),Ix.Factory.afterSetFilter)});var Ax=Be(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.Brighten=void 0;var xx=gt(),oV=En(),sV=_t(),aV=function(n){let e=this.brightness()*255,t=n.data,i=t.length,o;for(o=0;o<i;o+=4)t[o]+=e,t[o+1]+=e,t[o+2]+=e};Tm.Brighten=aV;xx.Factory.addGetterSetter(oV.Node,"brightness",0,(0,sV.getNumberValidator)(),xx.Factory.afterSetFilter)});var Rx=Be(xm=>{"use strict";Object.defineProperty(xm,"__esModule",{value:!0});xm.Contrast=void 0;var Mx=gt(),lV=En(),cV=_t(),dV=function(n){let e=Math.pow((this.contrast()+100)/100,2),t=n.data,i=t.length,o=150,s=150,l=150,d;for(d=0;d<i;d+=4)o=t[d],s=t[d+1],l=t[d+2],o/=255,o-=.5,o*=e,o+=.5,o*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,o=o<0?0:o>255?255:o,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,t[d]=o,t[d+1]=s,t[d+2]=l};xm.Contrast=dV;Mx.Factory.addGetterSetter(lV.Node,"contrast",0,(0,cV.getNumberValidator)(),Mx.Factory.afterSetFilter)});var Px=Be(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.Emboss=void 0;var fs=gt(),Am=En(),uV=Dn(),Ox=_t(),hV=function(n){let e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,i=this.embossDirection(),o=this.embossBlend(),s=0,l=0,d=n.data,f=n.width,p=n.height,g=f*4,y=p;switch(i){case"top-left":s=-1,l=-1;break;case"top":s=-1,l=0;break;case"top-right":s=-1,l=1;break;case"right":s=0,l=1;break;case"bottom-right":s=1,l=1;break;case"bottom":s=1,l=0;break;case"bottom-left":s=1,l=-1;break;case"left":s=0,l=-1;break;default:uV.Util.error("Unknown emboss direction: "+i)}do{let D=(y-1)*g,b=s;y+b<1&&(b=0),y+b>p&&(b=0);let C=(y-1+b)*f*4,w=f;do{let x=D+(w-1)*4,M=l;w+M<1&&(M=0),w+M>f&&(M=0);let F=C+(w-1+M)*4,k=d[x]-d[F],N=d[x+1]-d[F+1],q=d[x+2]-d[F+2],Q=k,z=Q>0?Q:-Q,Y=N>0?N:-N,ne=q>0?q:-q;if(Y>z&&(Q=N),ne>z&&(Q=q),Q*=e,o){let O=d[x]+Q,j=d[x+1]+Q,T=d[x+2]+Q;d[x]=O>255?255:O<0?0:O,d[x+1]=j>255?255:j<0?0:j,d[x+2]=T>255?255:T<0?0:T}else{let O=t-Q;O<0?O=0:O>255&&(O=255),d[x]=d[x+1]=d[x+2]=O}}while(--w)}while(--y)};Mm.Emboss=hV;fs.Factory.addGetterSetter(Am.Node,"embossStrength",.5,(0,Ox.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Am.Node,"embossWhiteLevel",.5,(0,Ox.getNumberValidator)(),fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Am.Node,"embossDirection","top-left",null,fs.Factory.afterSetFilter);fs.Factory.addGetterSetter(Am.Node,"embossBlend",!1,null,fs.Factory.afterSetFilter)});var kx=Be(Rm=>{"use strict";Object.defineProperty(Rm,"__esModule",{value:!0});Rm.Enhance=void 0;var Fx=gt(),fV=En(),mV=_t();function tS(n,e,t,i,o){let s=t-e,l=o-i,d;return s===0?i+l/2:l===0?i:(d=(n-e)/s,d=l*d+i,d)}var pV=function(n){let e=n.data,t=e.length,i=e[0],o=i,s,l=e[1],d=l,f,p=e[2],g=p,y,D,b=this.enhance();if(b===0)return;for(D=0;D<t;D+=4)s=e[D+0],s<i?i=s:s>o&&(o=s),f=e[D+1],f<l?l=f:f>d&&(d=f),y=e[D+2],y<p?p=y:y>g&&(g=y);o===i&&(o=255,i=0),d===l&&(d=255,l=0),g===p&&(g=255,p=0);let C,w,x,M,F,k,N,q,Q;for(b>0?(w=o+b*(255-o),x=i-b*(i-0),F=d+b*(255-d),k=l-b*(l-0),q=g+b*(255-g),Q=p-b*(p-0)):(C=(o+i)*.5,w=o+b*(o-C),x=i+b*(i-C),M=(d+l)*.5,F=d+b*(d-M),k=l+b*(l-M),N=(g+p)*.5,q=g+b*(g-N),Q=p+b*(p-N)),D=0;D<t;D+=4)e[D+0]=tS(e[D+0],i,o,x,w),e[D+1]=tS(e[D+1],l,d,k,F),e[D+2]=tS(e[D+2],p,g,Q,q)};Rm.Enhance=pV;Fx.Factory.addGetterSetter(fV.Node,"enhance",0,(0,mV.getNumberValidator)(),Fx.Factory.afterSetFilter)});var Lx=Be(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.Grayscale=void 0;var gV=function(n){let e=n.data,t=e.length,i,o;for(i=0;i<t;i+=4)o=.34*e[i]+.5*e[i+1]+.16*e[i+2],e[i]=o,e[i+1]=o,e[i+2]=o};Om.Grayscale=gV});var Nx=Be(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.HSL=void 0;var Il=gt(),nS=En(),iS=_t();Il.Factory.addGetterSetter(nS.Node,"hue",0,(0,iS.getNumberValidator)(),Il.Factory.afterSetFilter);Il.Factory.addGetterSetter(nS.Node,"saturation",0,(0,iS.getNumberValidator)(),Il.Factory.afterSetFilter);Il.Factory.addGetterSetter(nS.Node,"luminance",0,(0,iS.getNumberValidator)(),Il.Factory.afterSetFilter);var yV=function(n){let e=n.data,t=e.length,i=1,o=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=this.luminance()*127,d,f=i*o*Math.cos(s*Math.PI/180),p=i*o*Math.sin(s*Math.PI/180),g=.299*i+.701*f+.167*p,y=.587*i-.587*f+.33*p,D=.114*i-.114*f-.497*p,b=.299*i-.299*f-.328*p,C=.587*i+.413*f+.035*p,w=.114*i-.114*f+.293*p,x=.299*i-.3*f+1.25*p,M=.587*i-.586*f-1.05*p,F=.114*i+.886*f-.2*p,k,N,q,Q;for(d=0;d<t;d+=4)k=e[d+0],N=e[d+1],q=e[d+2],Q=e[d+3],e[d+0]=g*k+y*N+D*q+l,e[d+1]=b*k+C*N+w*q+l,e[d+2]=x*k+M*N+F*q+l,e[d+3]=Q};Pm.HSL=yV});var Vx=Be(Fm=>{"use strict";Object.defineProperty(Fm,"__esModule",{value:!0});Fm.HSV=void 0;var El=gt(),rS=En(),oS=_t(),vV=function(n){let e=n.data,t=e.length,i=Math.pow(2,this.value()),o=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,l=i*o*Math.cos(s*Math.PI/180),d=i*o*Math.sin(s*Math.PI/180),f=.299*i+.701*l+.167*d,p=.587*i-.587*l+.33*d,g=.114*i-.114*l-.497*d,y=.299*i-.299*l-.328*d,D=.587*i+.413*l+.035*d,b=.114*i-.114*l+.293*d,C=.299*i-.3*l+1.25*d,w=.587*i-.586*l-1.05*d,x=.114*i+.886*l-.2*d,M,F,k,N;for(let q=0;q<t;q+=4)M=e[q+0],F=e[q+1],k=e[q+2],N=e[q+3],e[q+0]=f*M+p*F+g*k,e[q+1]=y*M+D*F+b*k,e[q+2]=C*M+w*F+x*k,e[q+3]=N};Fm.HSV=vV;El.Factory.addGetterSetter(rS.Node,"hue",0,(0,oS.getNumberValidator)(),El.Factory.afterSetFilter);El.Factory.addGetterSetter(rS.Node,"saturation",0,(0,oS.getNumberValidator)(),El.Factory.afterSetFilter);El.Factory.addGetterSetter(rS.Node,"value",0,(0,oS.getNumberValidator)(),El.Factory.afterSetFilter)});var Bx=Be(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.Invert=void 0;var SV=function(n){let e=n.data,t=e.length,i;for(i=0;i<t;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]};km.Invert=SV});var jx=Be(Nm=>{"use strict";Object.defineProperty(Nm,"__esModule",{value:!0});Nm.Kaleidoscope=void 0;var Lm=gt(),qx=En(),Ux=Dn(),Gx=_t(),bV=function(n,e,t){let i=n.data,o=e.data,s=n.width,l=n.height,d=t.polarCenterX||s/2,f=t.polarCenterY||l/2,p,g,y,D=0,b=0,C=0,w=0,x,M=Math.sqrt(d*d+f*f);g=s-d,y=l-f,x=Math.sqrt(g*g+y*y),M=x>M?x:M;let F=l,k=s,N,q,Q=360/k*Math.PI/180,z,Y;for(q=0;q<k;q+=1)for(z=Math.sin(q*Q),Y=Math.cos(q*Q),N=0;N<F;N+=1)g=Math.floor(d+M*N/F*Y),y=Math.floor(f+M*N/F*z),p=(y*s+g)*4,D=i[p+0],b=i[p+1],C=i[p+2],w=i[p+3],p=(q+N*s)*4,o[p+0]=D,o[p+1]=b,o[p+2]=C,o[p+3]=w},_V=function(n,e,t){let i=n.data,o=e.data,s=n.width,l=n.height,d=t.polarCenterX||s/2,f=t.polarCenterY||l/2,p,g,y,D,b,C=0,w=0,x=0,M=0,F,k=Math.sqrt(d*d+f*f);g=s-d,y=l-f,F=Math.sqrt(g*g+y*y),k=F>k?F:k;let N=l,q=s,Q,z,Y=t.polarRotation||0,ne,O;for(g=0;g<s;g+=1)for(y=0;y<l;y+=1)D=g-d,b=y-f,Q=Math.sqrt(D*D+b*b)*N/k,z=(Math.atan2(b,D)*180/Math.PI+360+Y)%360,z=z*q/360,ne=Math.floor(z),O=Math.floor(Q),p=(O*s+ne)*4,C=i[p+0],w=i[p+1],x=i[p+2],M=i[p+3],p=(y*s+g)*4,o[p+0]=C,o[p+1]=w,o[p+2]=x,o[p+3]=M},DV=function(n){let e=n.width,t=n.height,i,o,s,l,d,f,p,g,y,D,b=Math.round(this.kaleidoscopePower()),C=Math.round(this.kaleidoscopeAngle()),w=Math.floor(e*(C%360)/360);if(b<1)return;let x=Ux.Util.createCanvasElement();x.width=e,x.height=t;let M=x.getContext("2d").getImageData(0,0,e,t);Ux.Util.releaseCanvas(x),bV(n,M,{polarCenterX:e/2,polarCenterY:t/2});let F=e/Math.pow(2,b);for(;F<=8;)F=F*2,b-=1;F=Math.ceil(F);let k=F,N=0,q=k,Q=1;for(w+F>e&&(N=k,q=0,Q=-1),o=0;o<t;o+=1)for(i=N;i!==q;i+=Q)s=Math.round(i+w)%e,y=(e*o+s)*4,d=M.data[y+0],f=M.data[y+1],p=M.data[y+2],g=M.data[y+3],D=(e*o+i)*4,M.data[D+0]=d,M.data[D+1]=f,M.data[D+2]=p,M.data[D+3]=g;for(o=0;o<t;o+=1)for(k=Math.floor(F),l=0;l<b;l+=1){for(i=0;i<k+1;i+=1)y=(e*o+i)*4,d=M.data[y+0],f=M.data[y+1],p=M.data[y+2],g=M.data[y+3],D=(e*o+k*2-i-1)*4,M.data[D+0]=d,M.data[D+1]=f,M.data[D+2]=p,M.data[D+3]=g;k*=2}_V(M,n,{polarRotation:0})};Nm.Kaleidoscope=DV;Lm.Factory.addGetterSetter(qx.Node,"kaleidoscopePower",2,(0,Gx.getNumberValidator)(),Lm.Factory.afterSetFilter);Lm.Factory.addGetterSetter(qx.Node,"kaleidoscopeAngle",0,(0,Gx.getNumberValidator)(),Lm.Factory.afterSetFilter)});var Hx=Be(Bm=>{"use strict";Object.defineProperty(Bm,"__esModule",{value:!0});Bm.Mask=void 0;var zx=gt(),CV=En(),wV=_t();function Vm(n,e,t){let i=(t*n.width+e)*4,o=[];return o.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),o}function _d(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function IV(n){let e=[0,0,0];for(let t=0;t<n.length;t++)e[0]+=n[t][0],e[1]+=n[t][1],e[2]+=n[t][2];return e[0]/=n.length,e[1]/=n.length,e[2]/=n.length,e}function EV(n,e){let t=Vm(n,0,0),i=Vm(n,n.width-1,0),o=Vm(n,0,n.height-1),s=Vm(n,n.width-1,n.height-1),l=e||10;if(_d(t,i)<l&&_d(i,s)<l&&_d(s,o)<l&&_d(o,t)<l){let d=IV([i,t,s,o]),f=[];for(let p=0;p<n.width*n.height;p++){let g=_d(d,[n.data[p*4],n.data[p*4+1],n.data[p*4+2]]);f[p]=g<l?0:255}return f}}function TV(n,e){for(let t=0;t<n.width*n.height;t++)n.data[4*t+3]=e[t]}function xV(n,e,t){let i=[1,1,1,1,0,1,1,1,1],o=Math.round(Math.sqrt(i.length)),s=Math.floor(o/2),l=[];for(let d=0;d<t;d++)for(let f=0;f<e;f++){let p=d*e+f,g=0;for(let y=0;y<o;y++)for(let D=0;D<o;D++){let b=d+y-s,C=f+D-s;if(b>=0&&b<t&&C>=0&&C<e){let w=b*e+C,x=i[y*o+D];g+=n[w]*x}}l[p]=g===255*8?255:0}return l}function AV(n,e,t){let i=[1,1,1,1,1,1,1,1,1],o=Math.round(Math.sqrt(i.length)),s=Math.floor(o/2),l=[];for(let d=0;d<t;d++)for(let f=0;f<e;f++){let p=d*e+f,g=0;for(let y=0;y<o;y++)for(let D=0;D<o;D++){let b=d+y-s,C=f+D-s;if(b>=0&&b<t&&C>=0&&C<e){let w=b*e+C,x=i[y*o+D];g+=n[w]*x}}l[p]=g>=255*4?255:0}return l}function MV(n,e,t){let i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],o=Math.round(Math.sqrt(i.length)),s=Math.floor(o/2),l=[];for(let d=0;d<t;d++)for(let f=0;f<e;f++){let p=d*e+f,g=0;for(let y=0;y<o;y++)for(let D=0;D<o;D++){let b=d+y-s,C=f+D-s;if(b>=0&&b<t&&C>=0&&C<e){let w=b*e+C,x=i[y*o+D];g+=n[w]*x}}l[p]=g}return l}var RV=function(n){let e=this.threshold(),t=EV(n,e);return t&&(t=xV(t,n.width,n.height),t=AV(t,n.width,n.height),t=MV(t,n.width,n.height),TV(n,t)),n};Bm.Mask=RV;zx.Factory.addGetterSetter(CV.Node,"threshold",0,(0,wV.getNumberValidator)(),zx.Factory.afterSetFilter)});var Wx=Be(Um=>{"use strict";Object.defineProperty(Um,"__esModule",{value:!0});Um.Noise=void 0;var Qx=gt(),OV=En(),PV=_t(),FV=function(n){let e=this.noise()*255,t=n.data,i=t.length,o=e/2;for(let s=0;s<i;s+=4)t[s+0]+=o-2*o*Math.random(),t[s+1]+=o-2*o*Math.random(),t[s+2]+=o-2*o*Math.random()};Um.Noise=FV;Qx.Factory.addGetterSetter(OV.Node,"noise",.2,(0,PV.getNumberValidator)(),Qx.Factory.afterSetFilter)});var Yx=Be(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.Pixelate=void 0;var $x=gt(),kV=Dn(),LV=En(),NV=_t(),VV=function(n){let e=Math.ceil(this.pixelSize()),t=n.width,i=n.height,o,s,l,d,f,p,g,y=Math.ceil(t/e),D=Math.ceil(i/e),b,C,w,x,M,F,k,N=n.data;if(e<=0){kV.Util.error("pixelSize value can not be <= 0");return}for(M=0;M<y;M+=1)for(F=0;F<D;F+=1){for(d=0,f=0,p=0,g=0,b=M*e,C=b+e,w=F*e,x=w+e,k=0,o=b;o<C;o+=1)if(!(o>=t))for(s=w;s<x;s+=1)s>=i||(l=(t*s+o)*4,d+=N[l+0],f+=N[l+1],p+=N[l+2],g+=N[l+3],k+=1);for(d=d/k,f=f/k,p=p/k,g=g/k,o=b;o<C;o+=1)if(!(o>=t))for(s=w;s<x;s+=1)s>=i||(l=(t*s+o)*4,N[l+0]=d,N[l+1]=f,N[l+2]=p,N[l+3]=g)}};qm.Pixelate=VV;$x.Factory.addGetterSetter(LV.Node,"pixelSize",8,(0,NV.getNumberValidator)(),$x.Factory.afterSetFilter)});var Zx=Be(Gm=>{"use strict";Object.defineProperty(Gm,"__esModule",{value:!0});Gm.Posterize=void 0;var Xx=gt(),BV=En(),UV=_t(),qV=function(n){let e=Math.round(this.levels()*254)+1,t=n.data,i=t.length,o=255/e,s;for(s=0;s<i;s+=1)t[s]=Math.floor(t[s]/o)*o};Gm.Posterize=qV;Xx.Factory.addGetterSetter(BV.Node,"levels",.5,(0,UV.getNumberValidator)(),Xx.Factory.afterSetFilter)});var Kx=Be(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.RGB=void 0;var jm=gt(),sS=En(),GV=_t(),jV=function(n){let e=n.data,t=e.length,i=this.red(),o=this.green(),s=this.blue(),l,d;for(l=0;l<t;l+=4)d=(.34*e[l]+.5*e[l+1]+.16*e[l+2])/255,e[l]=d*i,e[l+1]=d*o,e[l+2]=d*s,e[l+3]=e[l+3]};zm.RGB=jV;jm.Factory.addGetterSetter(sS.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});jm.Factory.addGetterSetter(sS.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});jm.Factory.addGetterSetter(sS.Node,"blue",0,GV.RGBComponent,jm.Factory.afterSetFilter)});var Jx=Be(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.RGBA=void 0;var Dd=gt(),Hm=En(),zV=_t(),HV=function(n){let e=n.data,t=e.length,i=this.red(),o=this.green(),s=this.blue(),l=this.alpha();for(let d=0;d<t;d+=4){let f=1-l;e[d]=i*l+e[d]*f,e[d+1]=o*l+e[d+1]*f,e[d+2]=s*l+e[d+2]*f}};Qm.RGBA=HV;Dd.Factory.addGetterSetter(Hm.Node,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Dd.Factory.addGetterSetter(Hm.Node,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});Dd.Factory.addGetterSetter(Hm.Node,"blue",0,zV.RGBComponent,Dd.Factory.afterSetFilter);Dd.Factory.addGetterSetter(Hm.Node,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n})});var eA=Be(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.Sepia=void 0;var QV=function(n){let e=n.data,t=e.length,i,o,s,l;for(i=0;i<t;i+=4)o=e[i+0],s=e[i+1],l=e[i+2],e[i+0]=Math.min(255,o*.393+s*.769+l*.189),e[i+1]=Math.min(255,o*.349+s*.686+l*.168),e[i+2]=Math.min(255,o*.272+s*.534+l*.131)};Wm.Sepia=QV});var tA=Be($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0});$m.Solarize=void 0;var WV=function(n){let e=n.data,t=n.width,i=n.height,o=t*4,s=i;do{let l=(s-1)*o,d=t;do{let f=l+(d-1)*4,p=e[f],g=e[f+1],y=e[f+2];p>127&&(p=255-p),g>127&&(g=255-g),y>127&&(y=255-y),e[f]=p,e[f+1]=g,e[f+2]=y}while(--d)}while(--s)};$m.Solarize=WV});var iA=Be(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.Threshold=void 0;var nA=gt(),$V=En(),YV=_t(),XV=function(n){let e=this.threshold()*255,t=n.data,i=t.length;for(let o=0;o<i;o+=1)t[o]=t[o]<e?0:255};Ym.Threshold=XV;nA.Factory.addGetterSetter($V.Node,"threshold",.5,(0,YV.getNumberValidator)(),nA.Factory.afterSetFilter)});var sA=Be(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.Konva=void 0;var rA=MT(),ZV=OT(),KV=VT(),JV=BT(),eB=qT(),tB=GT(),oA=HT(),nB=kv(),iB=am(),rB=zv(),oB=$T(),sB=KT(),aB=ex(),lB=tx(),cB=Zv(),dB=px(),uB=Dx(),hB=wx(),fB=Tx(),mB=Ax(),pB=Rx(),gB=Px(),yB=kx(),vB=Lx(),SB=Nx(),bB=Vx(),_B=Bx(),DB=jx(),CB=Hx(),wB=Wx(),IB=Yx(),EB=Zx(),TB=Kx(),xB=Jx(),AB=eA(),MB=tA(),RB=iA();Xm.Konva=rA.Konva.Util._assign(rA.Konva,{Arc:ZV.Arc,Arrow:KV.Arrow,Circle:JV.Circle,Ellipse:eB.Ellipse,Image:tB.Image,Label:oA.Label,Tag:oA.Tag,Line:nB.Line,Path:iB.Path,Rect:rB.Rect,RegularPolygon:oB.RegularPolygon,Ring:sB.Ring,Sprite:aB.Sprite,Star:lB.Star,Text:cB.Text,TextPath:dB.TextPath,Transformer:uB.Transformer,Wedge:hB.Wedge,Filters:{Blur:fB.Blur,Brighten:mB.Brighten,Contrast:pB.Contrast,Emboss:gB.Emboss,Enhance:yB.Enhance,Grayscale:vB.Grayscale,HSL:SB.HSL,HSV:bB.HSV,Invert:_B.Invert,Kaleidoscope:DB.Kaleidoscope,Mask:CB.Mask,Noise:wB.Noise,Pixelate:IB.Pixelate,Posterize:EB.Posterize,RGB:TB.RGB,RGBA:xB.RGBA,Sepia:AB.Sepia,Solarize:MB.Solarize,Threshold:RB.Threshold}})});var aS=Be((aA,lA)=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});var OB=sA();lA.exports=OB.Konva});var lS=Be((MK,Zm)=>{"use strict";var cA=function(){var n={};n.floodFill=function(s,l,d,f,p,g){return g?t(s,l,d,f,p):e(s,l,d,f,p)};function e(s,l,d,f,p){var g,y,D,b,C,w,x,M,F,k,N=s.data,q=s.width,Q=s.height,z=s.bytes,Y=-1,ne=q+1,O=-1,j=Q+1,T=d*q+l,K=new Uint8Array(q*Q),pe=new Uint8Array(p||q*Q);if(pe[T]===1)return null;T=T*z;var oe=[N[T],N[T+1],N[T+2],N[T+3]],V=[{y:d,left:l-1,right:l+1,dir:1}];do{for(b=V.shift(),k=!1,y=b.left+1;y<b.right;y++)if(x=b.y*q,T=(x+y)*z,pe[x+y]!==1&&(g=N[T]-oe[0],!(g>f||g<-f)&&(g=N[T+1]-oe[1],!(g>f||g<-f)&&(g=N[T+2]-oe[2],!(g>f||g<-f))))){for(k=!0,K[x+y]=1,pe[x+y]=1,w=y-1;w>-1&&(M=x+w,T=M*z,!(pe[M]===1||(g=N[T]-oe[0],g>f||g<-f)||(g=N[T+1]-oe[1],g>f||g<-f)||(g=N[T+2]-oe[2],g>f||g<-f)));)K[M]=1,pe[M]=1,w--;for(C=y+1;C<q&&(F=x+C,T=F*z,!(pe[F]===1||(g=N[T]-oe[0],g>f||g<-f)||(g=N[T+1]-oe[1],g>f||g<-f)||(g=N[T+2]-oe[2],g>f||g<-f)));)K[F]=1,pe[F]=1,C++;w<ne&&(ne=w+1),C>Y&&(Y=C-1),D=b.y-b.dir,D>=0&&D<Q&&(w<b.left&&V.push({y:D,left:w,right:b.left,dir:-b.dir}),b.right<C&&V.push({y:D,left:b.right,right:C,dir:-b.dir})),D=b.y+b.dir,D>=0&&D<Q&&w<C&&V.push({y:D,left:w,right:C,dir:b.dir})}k&&(b.y<j&&(j=b.y),b.y>O&&(O=b.y))}while(V.length>0);return{data:K,width:s.width,height:s.height,bounds:{minX:ne,minY:j,maxX:Y,maxY:O}}}function t(s,l,d,f,p){var g,y,D,b,C,w,x,M,F,k,N=s.data,q=s.width,Q=s.height,z=s.bytes,Y=-1,ne=q+1,O=-1,j=Q+1,T=d*q+l,K=new Uint8Array(q*Q),pe=new Uint8Array(p||q*Q);if(pe[T]===1)return null;T=T*z;var oe=[N[T],N[T+1],N[T+2],N[T+3]],V=[{y:d,left:l-1,right:l+1,dir:1}];do{for(b=V.shift(),k=!1,y=b.left+1;y<b.right;y++)if(x=b.y*q,T=(x+y)*z,pe[x+y]!==1&&(k=!0,K[x+y]=1,pe[x+y]=1,g=N[T]-oe[0],!(g>f||g<-f)&&(g=N[T+1]-oe[1],!(g>f||g<-f)&&(g=N[T+2]-oe[2],!(g>f||g<-f))))){for(w=y-1;w>-1&&(M=x+w,T=M*z,!(pe[M]===1||(K[M]=1,pe[M]=1,w--,g=N[T]-oe[0],g>f||g<-f)||(g=N[T+1]-oe[1],g>f||g<-f)||(g=N[T+2]-oe[2],g>f||g<-f))););for(C=y+1;C<q&&(F=x+C,T=F*z,!(pe[F]===1||(K[F]=1,pe[F]=1,C++,g=N[T]-oe[0],g>f||g<-f)||(g=N[T+1]-oe[1],g>f||g<-f)||(g=N[T+2]-oe[2],g>f||g<-f))););w<ne&&(ne=w+1),C>Y&&(Y=C-1),D=b.y-b.dir,D>=0&&D<Q&&(w<b.left&&V.push({y:D,left:w,right:b.left,dir:-b.dir}),b.right<C&&V.push({y:D,left:b.right,right:C,dir:-b.dir})),D=b.y+b.dir,D>=0&&D<Q&&w<C&&V.push({y:D,left:w,right:C,dir:b.dir})}k&&(b.y<j&&(j=b.y),b.y>O&&(O=b.y))}while(V.length>0);return{data:K,width:s.width,height:s.height,bounds:{minX:ne,minY:j,maxX:Y,maxY:O}}}n.gaussBlur=function(s,l){var d,f,p,g,y,D,b,C,w=l*2+1,x=l*l,M=new Float32Array(w),F=0,k=s.width,N=s.height,q=s.data,Q=s.bounds.minX,z=s.bounds.maxX,Y=s.bounds.minY,ne=s.bounds.maxY;for(d=0;d<l;d++){var O=(l-d)*(l-d),j=Math.exp(-O/(2*x))/(2*Math.PI*x);M[l+d]=M[l-d]=j,F+=2*j}for(d=0;d<w;d++)M[d]/=F;var T=new Uint8Array(k*N),K=l+k,pe=l+N;for(y=Y;y<ne+1;y++)for(g=Q;g<z+1;g++){for(D=0,f=y*k+g,b=l-g>0?l-g:0,C=K-g<w?K-g:w,p=f-l,d=b;d<C;d++)D+=q[p+d]*M[d];for(b=l-y>0?l-y:0,C=pe-y<w?pe-y:w,p=f-l*k,d=b;d<C;d++)D+=q[p+d*k]*M[d];T[f]=D>.5?1:0}return{data:T,width:k,height:N,bounds:{minX:Q,minY:Y,maxX:z,maxY:ne}}};function i(s,l,d){var f,p,g,y,D,b,C,w=s.width,x=s.height,M=s.data,F=new Uint8Array(M),k=s.bounds.minX,N=s.bounds.maxX,q=s.bounds.minY,Q=s.bounds.maxY,z=w*x,Y=new Uint8Array(z),ne=[],O=Math.max(k,1),j=Math.min(N,w-2),T=Math.max(q,1),K=Math.min(Q,x-2);if(d&&d.length>0)for(D=0;D<z;D++)d[D]===1&&(F[D]=1);for(y=T;y<K+1;y++)for(f=O;f<j+1;f++)D=y*w+f,M[D]!==0&&(b=D+w,C=D-w,(F[D+1]===0||F[D-1]===0||F[b]===0||F[b+1]===0||F[b-1]===0||F[C]===0||F[C+1]===0||F[C-1]===0)&&ne.push(D));if(k==0)for(y=q;y<Q+1;y++)M[y*w]===1&&ne.push(y*w);if(N==w-1)for(y=q;y<Q+1;y++)M[y*w+N]===1&&ne.push(y*w+N);if(q==0)for(f=k;f<N+1;f++)M[f]===1&&ne.push(f);if(Q==x-1)for(f=k;f<N+1;f++)M[Q*w+f]===1&&ne.push(Q*w+f);var pe=[],oe,V,$=l+w,ce=l+x,X=l*2+1;for(z=ne.length,g=0;g<z;g++){for(D=ne[g],Y[D]=1,pe.push(D),f=D%w,y=(D-f)/w,oe=l-f>0?l-f:0,V=$-f<X?$-f:X,b=D-l,p=oe;p<V;p++)C=b+p,Y[C]===0&&(Y[C]=1,pe.push(C));for(oe=l-y>0?l-y:0,V=ce-y<X?ce-y:X,b=D-l*w,p=oe;p<V;p++)C=b+p*w,Y[C]===0&&(Y[C]=1,pe.push(C))}return pe}n.gaussBlurOnlyBorder=function(s,l,d){var f=i(s,l,d),p,g,y,D,b,C,w,x,M,F,k,N=l*2+1,q=2*l*l,Q=new Float32Array(N),z=0,Y=s.width,ne=s.height,O=s.data,j=s.bounds.minX,T=s.bounds.maxX,K=s.bounds.minY,pe=s.bounds.maxY,oe=f.length;for(y=0;y<l;y++)g=(l-y)*(l-y),p=Math.exp(-g/q)/Math.PI,Q[l+y]=Q[l-y]=p,z+=2*p;for(y=0;y<N;y++)Q[y]/=z;var V=new Uint8Array(O),$=l+Y,ce=l+ne;for(y=0;y<oe;y++){for(b=f[y],M=0,w=b%Y,x=(b-w)/Y,F=l-w>0?l-w:0,k=$-w<N?$-w:N,C=b-l,D=F;D<k;D++)M+=O[C+D]*Q[D];if(M>.5){V[b]=1,w<j&&(j=w),w>T&&(T=w),x<K&&(K=x),x>pe&&(pe=x);continue}for(F=l-x>0?l-x:0,k=ce-x<N?ce-x:N,C=b-l*Y,D=F;D<k;D++)M+=O[C+D*Y]*Q[D];M>.5?(V[b]=1,w<j&&(j=w),w>T&&(T=w),x<K&&(K=x),x>pe&&(pe=x)):V[b]=0}return{data:V,width:Y,height:ne,bounds:{minX:j,minY:K,maxX:T,maxY:pe}}},n.createBorderMask=function(s){var l,d,f,p,g,y=s.width,D=s.height,b=s.data,C=s.bounds.minX,w=s.bounds.maxX,x=s.bounds.minY,M=s.bounds.maxY,F=w-C+1,k=M-x+1,N=new Uint8Array(F*k),q=Math.max(C,1),Q=Math.min(w,y-2),z=Math.max(x,1),Y=Math.min(M,D-2);for(d=z;d<Y+1;d++)for(l=q;l<Q+1;l++)f=d*y+l,b[f]!==0&&(p=f+y,g=f-y,(b[f+1]===0||b[f-1]===0||b[p]===0||b[p+1]===0||b[p-1]===0||b[g]===0||b[g+1]===0||b[g-1]===0)&&(N[(d-x)*F+(l-C)]=1));if(C==0)for(d=x;d<M+1;d++)b[d*y]===1&&(N[(d-x)*F]=1);if(w==y-1)for(d=x;d<M+1;d++)b[d*y+w]===1&&(N[(d-x)*F+(w-C)]=1);if(x==0)for(l=C;l<w+1;l++)b[l]===1&&(N[l-C]=1);if(M==D-1)for(l=C;l<w+1;l++)b[M*y+l]===1&&(N[(M-x)*F+(l-C)]=1);return{data:N,width:F,height:k,offset:{x:C,y:x}}},n.getBorderIndices=function(s){var l,d,f,p,g,y=s.width,D=s.height,b=s.data,C=[],w=y-1,x=D-1;for(d=1;d<x;d++)for(l=1;l<w;l++)f=d*y+l,b[f]!==0&&(p=f+y,g=f-y,(b[f+1]===0||b[f-1]===0||b[p]===0||b[p+1]===0||b[p-1]===0||b[g]===0||b[g+1]===0||b[g-1]===0)&&C.push(f));for(d=0;d<D;d++)b[d*y]===1&&C.push(d*y);for(l=0;l<y;l++)b[l]===1&&C.push(l);for(f=y-1,d=0;d<D;d++)b[d*y+f]===1&&C.push(d*y+f);for(f=(D-1)*y,l=0;l<y;l++)b[f+l]===1&&C.push(f+l);return C};function o(s){var l,d,f=s.width,p=s.data,g=s.bounds.minX,y=s.bounds.maxX,D=s.bounds.minY,b=s.bounds.maxY,C=y-g+3,w=b-D+3,x=new Uint8Array(C*w);for(d=D;d<b+1;d++)for(l=g;l<y+1;l++)p[d*f+l]===1&&(x[(d-D+1)*C+(l-g+1)]=1);return{data:x,width:C,height:w,offset:{x:g-1,y:D-1}}}return n.traceContours=function(s){var l=o(s),d=[],f=0,p=l.width,g=p*2,y=l.height,D=l.data,b=l.offset.x,C=l.offset.y,w=new Uint8Array(D),x,M,F,k,N,q,Q,z,Y,ne,O,j,T,K,pe,oe=[[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1],[1,-1]];for(k=1;k<y-1;k++)for(F=1;F<p-1;F++)if(N=k*p+F,D[N]===1){for(x=-p;x<g;x+=g)if(D[N+x]===0&&w[N+x]===0){for(z=x===p,f++,Q=[],Y=z?2:6,j=T=ne={x:F,y:k},O=null;;){for(w[j.y*p+j.x]=f,M=0;M<8;M++){if(Y=(Y+1)%8,pe=oe[Y],K={x:j.x+pe[0],y:j.y+pe[1]},q=K.y*p+K.x,D[q]===1){w[q]=f;break}w[q]=-1,K=null}if(K===null)break;if(j=K,O){if(T.x===ne.x&&T.y===ne.y&&j.x===O.x&&j.y===O.y)break}else O=K;Q.push({x:T.x+b,y:T.y+C}),T=j,Y=(Y+4)%8}K!=null&&(Q.push({x:ne.x+b,y:ne.y+C}),d.push({inner:z,label:f,points:Q}))}}return d},n.simplifyContours=function(s,l,d){var f=s.length,p=[],g,y,D,b,C,w,x,M,F,k,N,q,Q,z,Y,ne,O,j,T,K,pe;for(y=0;y<f;y++){if(b=s[y],C=b.points,w=b.points.length,w<d){for(x=[],D=0;D<w;D++)x.push({x:C[D].x,y:C[D].y});p.push({inner:b.inner,label:b.label,points:x,initialCount:w});continue}M=[0,w-1],F=[{first:0,last:w-1}];do if(k=F.shift(),!(k.last<=k.first+1)){for(N=-1,q=k.first,g=k.first+1;g<k.last;g++)T=C[g],K=C[k.first],pe=C[k.last],O=T.x-K.x,j=T.y-K.y,z=Math.sqrt(O*O+j*j),O=T.x-pe.x,j=T.y-pe.y,Y=Math.sqrt(O*O+j*j),O=K.x-pe.x,j=K.y-pe.y,ne=Math.sqrt(O*O+j*j),z>=Math.sqrt(Y*Y+ne*ne)?Q=Y:Y>=Math.sqrt(z*z+ne*ne)?Q=z:Q=Math.abs((j*T.x-O*T.y+K.x*pe.y-pe.x*K.y)/ne),Q>N&&(q=g,N=Q);N>l&&(M.push(q),F.push({first:k.first,last:q}),F.push({first:q,last:k.last}))}while(F.length>0);for(x=[],w=M.length,M.sort(function(oe,V){return oe-V}),D=0;D<w;D++)x.push({x:C[M[D]].x,y:C[M[D]].y});p.push({inner:b.inner,label:b.label,points:x,initialCount:b.points.length})}return p},n}();typeof Zm<"u"&&Zm!==null&&(Zm.exports=cA);typeof window<"u"&&window!==null&&(window.MagicWand=cA)});var dS=Be((dA,cS)=>{"use strict";(function(n){typeof dA=="object"&&typeof cS<"u"?cS.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=n()})(function(){return function n(e,t,i){function o(d,f){if(!t[d]){if(!e[d]){var p=typeof nc=="function"&&nc;if(!f&&p)return p(d,!0);if(s)return s(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var y=t[d]={exports:{}};e[d][0].call(y.exports,function(D){var b=e[d][1][D];return o(b||D)},y,y.exports,n,e,t,i)}return t[d].exports}for(var s=typeof nc=="function"&&nc,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,e,t){"use strict";var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(l){for(var d,f,p,g,y,D,b,C=[],w=0,x=l.length,M=x,F=i.getTypeOf(l)!=="string";w<l.length;)M=x-w,p=F?(d=l[w++],f=w<x?l[w++]:0,w<x?l[w++]:0):(d=l.charCodeAt(w++),f=w<x?l.charCodeAt(w++):0,w<x?l.charCodeAt(w++):0),g=d>>2,y=(3&d)<<4|f>>4,D=1<M?(15&f)<<2|p>>6:64,b=2<M?63&p:64,C.push(s.charAt(g)+s.charAt(y)+s.charAt(D)+s.charAt(b));return C.join("")},t.decode=function(l){var d,f,p,g,y,D,b=0,C=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var x,M=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&M--,l.charAt(l.length-2)===s.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|M):new Array(0|M);b<l.length;)d=s.indexOf(l.charAt(b++))<<2|(g=s.indexOf(l.charAt(b++)))>>4,f=(15&g)<<4|(y=s.indexOf(l.charAt(b++)))>>2,p=(3&y)<<6|(D=s.indexOf(l.charAt(b++))),x[C++]=d,y!==64&&(x[C++]=f),D!==64&&(x[C++]=p);return x}},{"./support":30,"./utils":32}],2:[function(n,e,t){"use strict";var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function d(f,p,g,y,D){this.compressedSize=f,this.uncompressedSize=p,this.crc32=g,this.compression=y,this.compressedContent=D}d.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),p=this;return f.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(f,p,g){return f.pipe(new s).pipe(new l("uncompressedSize")).pipe(p.compressWorker(g)).pipe(new l("compressedSize")).withStreamInfo("compression",p)},e.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,e,t){"use strict";var i=n("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},t.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,e,t){"use strict";var i=n("./utils"),o=function(){for(var s,l=[],d=0;d<256;d++){s=d;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;l[d]=s}return l}();e.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(d,f,p,g){var y=o,D=g+p;d^=-1;for(var b=g;b<D;b++)d=d>>>8^y[255&(d^f[b])];return-1^d}(0|l,s,s.length,0):function(d,f,p,g){var y=o,D=g+p;d^=-1;for(var b=g;b<D;b++)d=d>>>8^y[255&(d^f.charCodeAt(b))];return-1^d}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(n,e,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(n,e,t){"use strict";var i=null;i=typeof Promise<"u"?Promise:n("lie"),e.exports={Promise:i}},{lie:37}],7:[function(n,e,t){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),l=n("./stream/GenericWorker"),d=i?"uint8array":"array";function f(p,g){l.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=g,this.meta={}}t.magic="\b\0",s.inherits(f,l),f.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(d,p.data),!1)},f.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(g){p.push({data:g,meta:p.meta})}},t.compressWorker=function(p){return new f("Deflate",p)},t.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,e,t){"use strict";function i(y,D){var b,C="";for(b=0;b<D;b++)C+=String.fromCharCode(255&y),y>>>=8;return C}function o(y,D,b,C,w,x){var M,F,k=y.file,N=y.compression,q=x!==d.utf8encode,Q=s.transformTo("string",x(k.name)),z=s.transformTo("string",d.utf8encode(k.name)),Y=k.comment,ne=s.transformTo("string",x(Y)),O=s.transformTo("string",d.utf8encode(Y)),j=z.length!==k.name.length,T=O.length!==Y.length,K="",pe="",oe="",V=k.dir,$=k.date,ce={crc32:0,compressedSize:0,uncompressedSize:0};D&&!b||(ce.crc32=y.crc32,ce.compressedSize=y.compressedSize,ce.uncompressedSize=y.uncompressedSize);var X=0;D&&(X|=8),q||!j&&!T||(X|=2048);var W=0,De=0;V&&(W|=16),w==="UNIX"?(De=798,W|=function(he,Ge){var cn=he;return he||(cn=Ge?16893:33204),(65535&cn)<<16}(k.unixPermissions,V)):(De=20,W|=function(he){return 63&(he||0)}(k.dosPermissions)),M=$.getUTCHours(),M<<=6,M|=$.getUTCMinutes(),M<<=5,M|=$.getUTCSeconds()/2,F=$.getUTCFullYear()-1980,F<<=4,F|=$.getUTCMonth()+1,F<<=5,F|=$.getUTCDate(),j&&(pe=i(1,1)+i(f(Q),4)+z,K+="up"+i(pe.length,2)+pe),T&&(oe=i(1,1)+i(f(ne),4)+O,K+="uc"+i(oe.length,2)+oe);var ye="";return ye+=`
\0`,ye+=i(X,2),ye+=N.magic,ye+=i(M,2),ye+=i(F,2),ye+=i(ce.crc32,4),ye+=i(ce.compressedSize,4),ye+=i(ce.uncompressedSize,4),ye+=i(Q.length,2),ye+=i(K.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ye+Q+K,dirRecord:p.CENTRAL_FILE_HEADER+i(De,2)+ye+i(ne.length,2)+"\0\0\0\0"+i(W,4)+i(C,4)+Q+K+ne}}var s=n("../utils"),l=n("../stream/GenericWorker"),d=n("../utf8"),f=n("../crc32"),p=n("../signature");function g(y,D,b,C){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=b,this.encodeFileName=C,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(g,l),g.prototype.push=function(y){var D=y.meta.percent||0,b=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(D+100*(b-C-1))/b:100}}))},g.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var D=this.streamFiles&&!y.file.dir;if(D){var b=o(y,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(y){this.accumulate=!1;var D=this.streamFiles&&!y.file.dir,b=o(y,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),D)this.push({data:function(C){return p.DATA_DESCRIPTOR+i(C.crc32,4)+i(C.compressedSize,4)+i(C.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var y=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var b=this.bytesWritten-y,C=function(w,x,M,F,k){var N=s.transformTo("string",k(F));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(w,2)+i(w,2)+i(x,4)+i(M,4)+i(N.length,2)+N}(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:C,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(y){this._sources.push(y);var D=this;return y.on("data",function(b){D.processChunk(b)}),y.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),y.on("error",function(b){D.error(b)}),this},g.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(y){var D=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var b=0;b<D.length;b++)try{D[b].error(y)}catch{}return!0},g.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,D=0;D<y.length;D++)y[D].lock()},e.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,e,t){"use strict";var i=n("../compressions"),o=n("./ZipFileWorker");t.generateWorker=function(s,l,d){var f=new o(l.streamFiles,d,l.platform,l.encodeFileName),p=0;try{s.forEach(function(g,y){p++;var D=function(x,M){var F=x||M,k=i[F];if(!k)throw new Error(F+" is not a valid compression method !");return k}(y.options.compression,l.compression),b=y.options.compressionOptions||l.compressionOptions||{},C=y.dir,w=y.date;y._compressWorker(D,b).withStreamInfo("file",{name:g,dir:C,date:w,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(f)}),f.entriesCount=p}catch(g){f.error(g)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,e,t){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,e,t){"use strict";var i=n("./utils"),o=n("./external"),s=n("./utf8"),l=n("./zipEntries"),d=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function p(g){return new o.Promise(function(y,D){var b=g.decompressed.getContentWorker().pipe(new d);b.on("error",function(C){D(C)}).on("end",function(){b.streamInfo.crc32!==g.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}e.exports=function(g,y){var D=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",g,!0,y.optimizedBinaryString,y.base64).then(function(b){var C=new l(y);return C.load(b),C}).then(function(b){var C=[o.Promise.resolve(b)],w=b.files;if(y.checkCRC32)for(var x=0;x<w.length;x++)C.push(p(w[x]));return o.Promise.all(C)}).then(function(b){for(var C=b.shift(),w=C.files,x=0;x<w.length;x++){var M=w[x],F=M.fileNameStr,k=i.resolve(M.fileNameStr);D.file(k,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:y.createFolders}),M.dir||(D.file(k).unsafeOriginalName=F)}return C.zipComment.length&&(D.comment=C.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,e,t){"use strict";var i=n("../utils"),o=n("../stream/GenericWorker");function s(l,d){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(d)}i.inherits(s,o),s.prototype._bindStream=function(l){var d=this;(this._stream=l).pause(),l.on("data",function(f){d.push({data:f,meta:{percent:0}})}).on("error",function(f){d.isPaused?this.generatedError=f:d.error(f)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,e,t){"use strict";var i=n("readable-stream").Readable;function o(s,l,d){i.call(this,l),this._helper=s;var f=this;s.on("data",function(p,g){f.push(p)||f._helper.pause(),d&&d(g)}).on("error",function(p){f.emit("error",p)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},e.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,e,t){"use strict";e.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,o)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var o=new Buffer(i);return o.fill(0),o},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,e,t){"use strict";function i(k,N,q){var Q,z=s.getTypeOf(N),Y=s.extend(q||{},f);Y.date=Y.date||new Date,Y.compression!==null&&(Y.compression=Y.compression.toUpperCase()),typeof Y.unixPermissions=="string"&&(Y.unixPermissions=parseInt(Y.unixPermissions,8)),Y.unixPermissions&&16384&Y.unixPermissions&&(Y.dir=!0),Y.dosPermissions&&16&Y.dosPermissions&&(Y.dir=!0),Y.dir&&(k=w(k)),Y.createFolders&&(Q=C(k))&&x.call(this,Q,!0);var ne=z==="string"&&Y.binary===!1&&Y.base64===!1;q&&q.binary!==void 0||(Y.binary=!ne),(N instanceof p&&N.uncompressedSize===0||Y.dir||!N||N.length===0)&&(Y.base64=!1,Y.binary=!0,N="",Y.compression="STORE",z="string");var O=null;O=N instanceof p||N instanceof l?N:D.isNode&&D.isStream(N)?new b(k,N):s.prepareContent(k,N,Y.binary,Y.optimizedBinaryString,Y.base64);var j=new g(k,O,Y);this.files[k]=j}var o=n("./utf8"),s=n("./utils"),l=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),f=n("./defaults"),p=n("./compressedObject"),g=n("./zipObject"),y=n("./generate"),D=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),C=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var N=k.lastIndexOf("/");return 0<N?k.substring(0,N):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},x=function(k,N){return N=N!==void 0?N:f.createFolders,k=w(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:N}),this.files[k]};function M(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var F={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var N,q,Q;for(N in this.files)Q=this.files[N],(q=N.slice(this.root.length,N.length))&&N.slice(0,this.root.length)===this.root&&k(q,Q)},filter:function(k){var N=[];return this.forEach(function(q,Q){k(q,Q)&&N.push(Q)}),N},file:function(k,N,q){if(arguments.length!==1)return k=this.root+k,i.call(this,k,N,q),this;if(M(k)){var Q=k;return this.filter(function(Y,ne){return!ne.dir&&Q.test(Y)})}var z=this.files[this.root+k];return z&&!z.dir?z:null},folder:function(k){if(!k)return this;if(M(k))return this.filter(function(z,Y){return Y.dir&&k.test(z)});var N=this.root+k,q=x.call(this,N),Q=this.clone();return Q.root=q.name,Q},remove:function(k){k=this.root+k;var N=this.files[k];if(N||(k.slice(-1)!=="/"&&(k+="/"),N=this.files[k]),N&&!N.dir)delete this.files[k];else for(var q=this.filter(function(z,Y){return Y.name.slice(0,k.length)===k}),Q=0;Q<q.length;Q++)delete this.files[q[Q].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var N,q={};try{if((q=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=q.type.toLowerCase(),q.compression=q.compression.toUpperCase(),q.type==="binarystring"&&(q.type="string"),!q.type)throw new Error("No output type specified.");s.checkSupport(q.type),q.platform!=="darwin"&&q.platform!=="freebsd"&&q.platform!=="linux"&&q.platform!=="sunos"||(q.platform="UNIX"),q.platform==="win32"&&(q.platform="DOS");var Q=q.comment||this.comment||"";N=y.generateWorker(this,q,Q)}catch(z){(N=new l("error")).error(z)}return new d(N,q.type||"string",q.mimeType)},generateAsync:function(k,N){return this.generateInternalStream(k).accumulate(N)},generateNodeStream:function(k,N){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(N)}};e.exports=F},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,e,t){"use strict";e.exports=n("stream")},{stream:void 0}],17:[function(n,e,t){"use strict";var i=n("./DataReader");function o(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),d=s.charCodeAt(1),f=s.charCodeAt(2),p=s.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===l&&this.data[g+1]===d&&this.data[g+2]===f&&this.data[g+3]===p)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),d=s.charCodeAt(1),f=s.charCodeAt(2),p=s.charCodeAt(3),g=this.readData(4);return l===g[0]&&d===g[1]&&f===g[2]&&p===g[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,e,t){"use strict";var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,d=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)d=(d<<8)+this.byteAt(l);return this.index+=s,d},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},e.exports=o},{"../utils":32}],19:[function(n,e,t){"use strict";var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,e,t){"use strict";var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,e,t){"use strict";var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},e.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,e,t){"use strict";var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),l=n("./StringReader"),d=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");e.exports=function(p){var g=i.getTypeOf(p);return i.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new d(p):o.uint8array?new f(i.transformTo("uint8array",p)):new s(i.transformTo("array",p)):new l(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,e,t){"use strict";t.LOCAL_FILE_HEADER="PK",t.CENTRAL_FILE_HEADER="PK",t.CENTRAL_DIRECTORY_END="PK",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,e,t){"use strict";var i=n("./GenericWorker"),o=n("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},e.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,e,t){"use strict";var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},e.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,e,t){"use strict";var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,o),s.prototype.processChunk=function(l){if(l){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+l.data.length}o.prototype.processChunk.call(this,l)},e.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,e,t){"use strict";var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(f){d.dataIsReady=!0,d.data=f,d.max=f&&f.length||0,d.type=i.getTypeOf(f),d.isPaused||d._tickAndRepeat()},function(f){d.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,d);break;case"uint8array":l=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":l=this.data.slice(this.index,d)}return this.index=d,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,e,t){"use strict";function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},e.exports=i},{}],29:[function(n,e,t){"use strict";var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),l=n("../base64"),d=n("../support"),f=n("../external"),p=null;if(d.nodestream)try{p=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(D,b){return new f.Promise(function(C,w){var x=[],M=D._internalType,F=D._outputType,k=D._mimeType;D.on("data",function(N,q){x.push(N),b&&b(q)}).on("error",function(N){x=[],w(N)}).on("end",function(){try{var N=function(q,Q,z){switch(q){case"blob":return i.newBlob(i.transformTo("arraybuffer",Q),z);case"base64":return l.encode(Q);default:return i.transformTo(q,Q)}}(F,function(q,Q){var z,Y=0,ne=null,O=0;for(z=0;z<Q.length;z++)O+=Q[z].length;switch(q){case"string":return Q.join("");case"array":return Array.prototype.concat.apply([],Q);case"uint8array":for(ne=new Uint8Array(O),z=0;z<Q.length;z++)ne.set(Q[z],Y),Y+=Q[z].length;return ne;case"nodebuffer":return Buffer.concat(Q);default:throw new Error("concat : unsupported type '"+q+"'")}}(M,x),k);C(N)}catch(q){w(q)}x=[]}).resume()})}function y(D,b,C){var w=b;switch(b){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=b,this._mimeType=C,i.checkSupport(w),this._worker=D.pipe(new o(w)),D.lock()}catch(x){this._worker=new s("error"),this._worker.error(x)}}y.prototype={accumulate:function(D){return g(this,D)},on:function(D,b){var C=this;return D==="data"?this._worker.on(D,function(w){b.call(C,w.data,w.meta)}):this._worker.on(D,function(){i.delay(b,arguments,C)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},D)}},e.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,e,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",t.nodebuffer=typeof Buffer<"u",t.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")t.blob=!1;else{var i=new ArrayBuffer(0);try{t.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),t.blob=o.getBlob("application/zip").size===0}catch{t.blob=!1}}}try{t.nodestream=!!n("readable-stream").Readable}catch{t.nodestream=!1}},{"readable-stream":16}],31:[function(n,e,t){"use strict";for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),l=n("./stream/GenericWorker"),d=new Array(256),f=0;f<256;f++)d[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;d[254]=d[254]=1;function p(){l.call(this,"utf-8 decode"),this.leftOver=null}function g(){l.call(this,"utf-8 encode")}t.utf8encode=function(y){return o.nodebuffer?s.newBufferFrom(y,"utf-8"):function(D){var b,C,w,x,M,F=D.length,k=0;for(x=0;x<F;x++)(64512&(C=D.charCodeAt(x)))==55296&&x+1<F&&(64512&(w=D.charCodeAt(x+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),x++),k+=C<128?1:C<2048?2:C<65536?3:4;for(b=o.uint8array?new Uint8Array(k):new Array(k),x=M=0;M<k;x++)(64512&(C=D.charCodeAt(x)))==55296&&x+1<F&&(64512&(w=D.charCodeAt(x+1)))==56320&&(C=65536+(C-55296<<10)+(w-56320),x++),C<128?b[M++]=C:(C<2048?b[M++]=192|C>>>6:(C<65536?b[M++]=224|C>>>12:(b[M++]=240|C>>>18,b[M++]=128|C>>>12&63),b[M++]=128|C>>>6&63),b[M++]=128|63&C);return b}(y)},t.utf8decode=function(y){return o.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(D){var b,C,w,x,M=D.length,F=new Array(2*M);for(b=C=0;b<M;)if((w=D[b++])<128)F[C++]=w;else if(4<(x=d[w]))F[C++]=65533,b+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&b<M;)w=w<<6|63&D[b++],x--;1<x?F[C++]=65533:w<65536?F[C++]=w:(w-=65536,F[C++]=55296|w>>10&1023,F[C++]=56320|1023&w)}return F.length!==C&&(F.subarray?F=F.subarray(0,C):F.length=C),i.applyFromCharCode(F)}(y=i.transformTo(o.uint8array?"uint8array":"array",y))},i.inherits(p,l),p.prototype.processChunk=function(y){var D=i.transformTo(o.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=D;(D=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),D.set(b,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var C=function(x,M){var F;for((M=M||x.length)>x.length&&(M=x.length),F=M-1;0<=F&&(192&x[F])==128;)F--;return F<0||F===0?M:F+d[x[F]]>M?F:M}(D),w=D;C!==D.length&&(o.uint8array?(w=D.subarray(0,C),this.leftOver=D.subarray(C,D.length)):(w=D.slice(0,C),this.leftOver=D.slice(C,D.length))),this.push({data:t.utf8decode(w),meta:y.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=p,i.inherits(g,l),g.prototype.processChunk=function(y){this.push({data:t.utf8encode(y.data),meta:y.meta})},t.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,e,t){"use strict";var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),l=n("./external");function d(b){return b}function f(b,C){for(var w=0;w<b.length;++w)C[w]=255&b.charCodeAt(w);return C}n("setimmediate"),t.newBlob=function(b,C){t.checkSupport("blob");try{return new Blob([b],{type:C})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(b),w.getBlob(C)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(b,C,w){var x=[],M=0,F=b.length;if(F<=w)return String.fromCharCode.apply(null,b);for(;M<F;)C==="array"||C==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(M,Math.min(M+w,F)))):x.push(String.fromCharCode.apply(null,b.subarray(M,Math.min(M+w,F)))),M+=w;return x.join("")},stringifyByChar:function(b){for(var C="",w=0;w<b.length;w++)C+=String.fromCharCode(b[w]);return C},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function g(b){var C=65536,w=t.getTypeOf(b),x=!0;if(w==="uint8array"?x=p.applyCanBeUsed.uint8array:w==="nodebuffer"&&(x=p.applyCanBeUsed.nodebuffer),x)for(;1<C;)try{return p.stringifyByChunk(b,w,C)}catch{C=Math.floor(C/2)}return p.stringifyByChar(b)}function y(b,C){for(var w=0;w<b.length;w++)C[w]=b[w];return C}t.applyFromCharCode=g;var D={};D.string={string:d,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return D.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,s.allocBuffer(b.length))}},D.array={string:g,array:d,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},D.arraybuffer={string:function(b){return g(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:d,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},D.uint8array={string:g,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:d,nodebuffer:function(b){return s.newBufferFrom(b)}},D.nodebuffer={string:g,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return D.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:d},t.transformTo=function(b,C){if(C=C||"",!b)return C;t.checkSupport(b);var w=t.getTypeOf(C);return D[w][b](C)},t.resolve=function(b){for(var C=b.split("/"),w=[],x=0;x<C.length;x++){var M=C[x];M==="."||M===""&&x!==0&&x!==C.length-1||(M===".."?w.pop():w.push(M))}return w.join("/")},t.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(b){var C,w,x="";for(w=0;w<(b||"").length;w++)x+="\\x"+((C=b.charCodeAt(w))<16?"0":"")+C.toString(16).toUpperCase();return x},t.delay=function(b,C,w){setImmediate(function(){b.apply(w||null,C||[])})},t.inherits=function(b,C){function w(){}w.prototype=C.prototype,b.prototype=new w},t.extend=function(){var b,C,w={};for(b=0;b<arguments.length;b++)for(C in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],C)&&w[C]===void 0&&(w[C]=arguments[b][C]);return w},t.prepareContent=function(b,C,w,x,M){return l.Promise.resolve(C).then(function(F){return i.blob&&(F instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(F))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,N){var q=new FileReader;q.onload=function(Q){k(Q.target.result)},q.onerror=function(Q){N(Q.target.error)},q.readAsArrayBuffer(F)}):F}).then(function(F){var k=t.getTypeOf(F);return k?(k==="arraybuffer"?F=t.transformTo("uint8array",F):k==="string"&&(M?F=o.decode(F):w&&x!==!0&&(F=function(N){return f(N,i.uint8array?new Uint8Array(N.length):new Array(N.length))}(F))),F):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,e,t){"use strict";var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),l=n("./zipEntry"),d=n("./support");function f(p){this.files=[],this.loadOptions=p}f.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(p)+")")}},isSignature:function(p,g){var y=this.reader.index;this.reader.setIndex(p);var D=this.reader.readString(4)===g;return this.reader.setIndex(y),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",y=o.transformTo(g,p);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,g,y,D=this.zip64EndOfCentralSize-44;0<D;)p=this.reader.readInt(2),g=this.reader.readInt(4),y=this.reader.readData(g),this.zip64ExtensibleData[p]={id:p,length:g,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,g;for(p=0;p<this.files.length;p++)g=this.files[p],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(p=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var g=p;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var D=g-y;if(0<D)this.isSignature(g,s.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,e,t){"use strict";var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),l=n("./crc32"),d=n("./utf8"),f=n("./compressions"),p=n("./support");function g(y,D){this.options=y,this.loadOptions=D}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var D,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(C){for(var w in f)if(Object.prototype.hasOwnProperty.call(f,w)&&f[w].magic===C)return f[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,D,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var D=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(D),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var D,b,C,w=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<w;)D=y.readInt(2),b=y.readInt(2),C=y.readData(b),this.extraFields[D]={id:D,length:b,value:C};y.setIndex(w)},handleUTF8:function(){var y=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var b=o.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var C=this.findExtraFieldUnicodeComment();if(C!==null)this.fileCommentStr=C;else{var w=o.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var D=i(y.value);return D.readInt(1)!==1||l(this.fileName)!==D.readInt(4)?null:d.utf8decode(D.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var D=i(y.value);return D.readInt(1)!==1||l(this.fileComment)!==D.readInt(4)?null:d.utf8decode(D.readData(y.length-5))}return null}},e.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,e,t){"use strict";function i(D,b,C){this.name=D,this.dir=C.dir,this.date=C.date,this.comment=C.comment,this.unixPermissions=C.unixPermissions,this.dosPermissions=C.dosPermissions,this._data=b,this._dataBinary=C.binary,this.options={compression:C.compression,compressionOptions:C.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),l=n("./utf8"),d=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(D){var b=null,C="string";try{if(!D)throw new Error("No output type specified.");var w=(C=D.toLowerCase())==="string"||C==="text";C!=="binarystring"&&C!=="text"||(C="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!w&&(b=b.pipe(new l.Utf8EncodeWorker)),!x&&w&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(M){(b=new f("error")).error(M)}return new o(b,C,"")},async:function(D,b){return this.internalStream(D).accumulate(b)},nodeStream:function(D,b){return this.internalStream(D||"nodebuffer").toNodejsStream(b)},_compressWorker:function(D,b){if(this._data instanceof d&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var C=this._decompressWorker();return this._dataBinary||(C=C.pipe(new l.Utf8EncodeWorker)),d.createWorkerFrom(C,D,b)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<p.length;y++)i.prototype[p[y]]=g;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,e,t){(function(i){"use strict";var o,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var d=0,f=new l(D),p=i.document.createTextNode("");f.observe(p,{characterData:!0}),o=function(){p.data=d=++d%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){D(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(D,0)};else{var g=new i.MessageChannel;g.port1.onmessage=D,o=function(){g.port2.postMessage(0)}}var y=[];function D(){var b,C;s=!0;for(var w=y.length;w;){for(C=y,y=[],b=-1;++b<w;)C[b]();w=y.length}s=!1}e.exports=function(b){y.push(b)!==1||s||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,e,t){"use strict";var i=n("immediate");function o(){}var s={},l=["REJECTED"],d=["FULFILLED"],f=["PENDING"];function p(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,w!==o&&b(this,w)}function g(w,x,M){this.promise=w,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function y(w,x,M){i(function(){var F;try{F=x(M)}catch(k){return s.reject(w,k)}F===w?s.reject(w,new TypeError("Cannot resolve promise with itself")):s.resolve(w,F)})}function D(w){var x=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof x=="function")return function(){x.apply(w,arguments)}}function b(w,x){var M=!1;function F(q){M||(M=!0,s.reject(w,q))}function k(q){M||(M=!0,s.resolve(w,q))}var N=C(function(){x(k,F)});N.status==="error"&&F(N.value)}function C(w,x){var M={};try{M.value=w(x),M.status="success"}catch(F){M.status="error",M.value=F}return M}(e.exports=p).prototype.finally=function(w){if(typeof w!="function")return this;var x=this.constructor;return this.then(function(M){return x.resolve(w()).then(function(){return M})},function(M){return x.resolve(w()).then(function(){throw M})})},p.prototype.catch=function(w){return this.then(null,w)},p.prototype.then=function(w,x){if(typeof w!="function"&&this.state===d||typeof x!="function"&&this.state===l)return this;var M=new this.constructor(o);return this.state!==f?y(M,this.state===d?w:x,this.outcome):this.queue.push(new g(M,w,x)),M},g.prototype.callFulfilled=function(w){s.resolve(this.promise,w)},g.prototype.otherCallFulfilled=function(w){y(this.promise,this.onFulfilled,w)},g.prototype.callRejected=function(w){s.reject(this.promise,w)},g.prototype.otherCallRejected=function(w){y(this.promise,this.onRejected,w)},s.resolve=function(w,x){var M=C(D,x);if(M.status==="error")return s.reject(w,M.value);var F=M.value;if(F)b(w,F);else{w.state=d,w.outcome=x;for(var k=-1,N=w.queue.length;++k<N;)w.queue[k].callFulfilled(x)}return w},s.reject=function(w,x){w.state=l,w.outcome=x;for(var M=-1,F=w.queue.length;++M<F;)w.queue[M].callRejected(x);return w},p.resolve=function(w){return w instanceof this?w:s.resolve(new this(o),w)},p.reject=function(w){var x=new this(o);return s.reject(x,w)},p.all=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,F=!1;if(!M)return this.resolve([]);for(var k=new Array(M),N=0,q=-1,Q=new this(o);++q<M;)z(w[q],q);return Q;function z(Y,ne){x.resolve(Y).then(function(O){k[ne]=O,++N!==M||F||(F=!0,s.resolve(Q,k))},function(O){F||(F=!0,s.reject(Q,O))})}},p.race=function(w){var x=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=w.length,F=!1;if(!M)return this.resolve([]);for(var k=-1,N=new this(o);++k<M;)q=w[k],x.resolve(q).then(function(Q){F||(F=!0,s.resolve(N,Q))},function(Q){F||(F=!0,s.reject(N,Q))});var q;return N}},{immediate:36}],38:[function(n,e,t){"use strict";var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,e,t){"use strict";var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/messages"),d=n("./zlib/zstream"),f=Object.prototype.toString,p=0,g=-1,y=0,D=8;function b(w){if(!(this instanceof b))return new b(w);this.options=o.assign({level:g,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},w||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var M=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(M!==p)throw new Error(l[M]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var F;if(F=typeof x.dictionary=="string"?s.string2buf(x.dictionary):f.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(M=i.deflateSetDictionary(this.strm,F))!==p)throw new Error(l[M]);this._dict_set=!0}}function C(w,x){var M=new b(x);if(M.push(w,!0),M.err)throw M.msg||l[M.err];return M.result}b.prototype.push=function(w,x){var M,F,k=this.strm,N=this.options.chunkSize;if(this.ended)return!1;F=x===~~x?x:x===!0?4:0,typeof w=="string"?k.input=s.string2buf(w):f.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(N),k.next_out=0,k.avail_out=N),(M=i.deflate(k,F))!==1&&M!==p)return this.onEnd(M),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||F!==4&&F!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&M!==1);return F===4?(M=i.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===p):F!==2||(this.onEnd(p),!(k.avail_out=0))},b.prototype.onData=function(w){this.chunks.push(w)},b.prototype.onEnd=function(w){w===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},t.Deflate=b,t.deflate=C,t.deflateRaw=function(w,x){return(x=x||{}).raw=!0,C(w,x)},t.gzip=function(w,x){return(x=x||{}).gzip=!0,C(w,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,e,t){"use strict";var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/constants"),d=n("./zlib/messages"),f=n("./zlib/zstream"),p=n("./zlib/gzheader"),g=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var C=this.options;C.raw&&0<=C.windowBits&&C.windowBits<16&&(C.windowBits=-C.windowBits,C.windowBits===0&&(C.windowBits=-15)),!(0<=C.windowBits&&C.windowBits<16)||b&&b.windowBits||(C.windowBits+=32),15<C.windowBits&&C.windowBits<48&&!(15&C.windowBits)&&(C.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var w=i.inflateInit2(this.strm,C.windowBits);if(w!==l.Z_OK)throw new Error(d[w]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function D(b,C){var w=new y(C);if(w.push(b,!0),w.err)throw w.msg||d[w.err];return w.result}y.prototype.push=function(b,C){var w,x,M,F,k,N,q=this.strm,Q=this.options.chunkSize,z=this.options.dictionary,Y=!1;if(this.ended)return!1;x=C===~~C?C:C===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?q.input=s.binstring2buf(b):g.call(b)==="[object ArrayBuffer]"?q.input=new Uint8Array(b):q.input=b,q.next_in=0,q.avail_in=q.input.length;do{if(q.avail_out===0&&(q.output=new o.Buf8(Q),q.next_out=0,q.avail_out=Q),(w=i.inflate(q,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&z&&(N=typeof z=="string"?s.string2buf(z):g.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,w=i.inflateSetDictionary(this.strm,N)),w===l.Z_BUF_ERROR&&Y===!0&&(w=l.Z_OK,Y=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);q.next_out&&(q.avail_out!==0&&w!==l.Z_STREAM_END&&(q.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=s.utf8border(q.output,q.next_out),F=q.next_out-M,k=s.buf2string(q.output,M),q.next_out=F,q.avail_out=Q-F,F&&o.arraySet(q.output,q.output,M,F,0),this.onData(k)):this.onData(o.shrinkBuf(q.output,q.next_out)))),q.avail_in===0&&q.avail_out===0&&(Y=!0)}while((0<q.avail_in||q.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(w=i.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(q.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},t.Inflate=y,t.inflate=D,t.inflateRaw=function(b,C){return(C=C||{}).raw=!0,D(b,C)},t.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,e,t){"use strict";var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";t.assign=function(l){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var p in f)f.hasOwnProperty(p)&&(l[p]=f[p])}}return l},t.shrinkBuf=function(l,d){return l.length===d?l:l.subarray?l.subarray(0,d):(l.length=d,l)};var o={arraySet:function(l,d,f,p,g){if(d.subarray&&l.subarray)l.set(d.subarray(f,f+p),g);else for(var y=0;y<p;y++)l[g+y]=d[f+y]},flattenChunks:function(l){var d,f,p,g,y,D;for(d=p=0,f=l.length;d<f;d++)p+=l[d].length;for(D=new Uint8Array(p),d=g=0,f=l.length;d<f;d++)y=l[d],D.set(y,g),g+=y.length;return D}},s={arraySet:function(l,d,f,p,g){for(var y=0;y<p;y++)l[g+y]=d[f+y]},flattenChunks:function(l){return[].concat.apply([],l)}};t.setTyped=function(l){l?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,o)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},{}],42:[function(n,e,t){"use strict";var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new i.Buf8(256),d=0;d<256;d++)l[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function f(p,g){if(g<65537&&(p.subarray&&s||!p.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(p,g));for(var y="",D=0;D<g;D++)y+=String.fromCharCode(p[D]);return y}l[254]=l[254]=1,t.string2buf=function(p){var g,y,D,b,C,w=p.length,x=0;for(b=0;b<w;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<w&&(64512&(D=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(D-56320),b++),x+=y<128?1:y<2048?2:y<65536?3:4;for(g=new i.Buf8(x),b=C=0;C<x;b++)(64512&(y=p.charCodeAt(b)))==55296&&b+1<w&&(64512&(D=p.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(D-56320),b++),y<128?g[C++]=y:(y<2048?g[C++]=192|y>>>6:(y<65536?g[C++]=224|y>>>12:(g[C++]=240|y>>>18,g[C++]=128|y>>>12&63),g[C++]=128|y>>>6&63),g[C++]=128|63&y);return g},t.buf2binstring=function(p){return f(p,p.length)},t.binstring2buf=function(p){for(var g=new i.Buf8(p.length),y=0,D=g.length;y<D;y++)g[y]=p.charCodeAt(y);return g},t.buf2string=function(p,g){var y,D,b,C,w=g||p.length,x=new Array(2*w);for(y=D=0;y<w;)if((b=p[y++])<128)x[D++]=b;else if(4<(C=l[b]))x[D++]=65533,y+=C-1;else{for(b&=C===2?31:C===3?15:7;1<C&&y<w;)b=b<<6|63&p[y++],C--;1<C?x[D++]=65533:b<65536?x[D++]=b:(b-=65536,x[D++]=55296|b>>10&1023,x[D++]=56320|1023&b)}return f(x,D)},t.utf8border=function(p,g){var y;for((g=g||p.length)>p.length&&(g=p.length),y=g-1;0<=y&&(192&p[y])==128;)y--;return y<0||y===0?g:y+l[p[y]]>g?y:g}},{"./common":41}],43:[function(n,e,t){"use strict";e.exports=function(i,o,s,l){for(var d=65535&i|0,f=i>>>16&65535|0,p=0;s!==0;){for(s-=p=2e3<s?2e3:s;f=f+(d=d+o[l++]|0)|0,--p;);d%=65521,f%=65521}return d|f<<16|0}},{}],44:[function(n,e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,e,t){"use strict";var i=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();e.exports=function(o,s,l,d){var f=i,p=d+l;o^=-1;for(var g=d;g<p;g++)o=o>>>8^f[255&(o^s[g])];return-1^o}},{}],46:[function(n,e,t){"use strict";var i,o=n("../utils/common"),s=n("./trees"),l=n("./adler32"),d=n("./crc32"),f=n("./messages"),p=0,g=4,y=0,D=-2,b=-1,C=4,w=2,x=8,M=9,F=286,k=30,N=19,q=2*F+1,Q=15,z=3,Y=258,ne=Y+z+1,O=42,j=113,T=1,K=2,pe=3,oe=4;function V(A,de){return A.msg=f[de],de}function $(A){return(A<<1)-(4<A?9:0)}function ce(A){for(var de=A.length;0<=--de;)A[de]=0}function X(A){var de=A.state,le=de.pending;le>A.avail_out&&(le=A.avail_out),le!==0&&(o.arraySet(A.output,de.pending_buf,de.pending_out,le,A.next_out),A.next_out+=le,de.pending_out+=le,A.total_out+=le,A.avail_out-=le,de.pending-=le,de.pending===0&&(de.pending_out=0))}function W(A,de){s._tr_flush_block(A,0<=A.block_start?A.block_start:-1,A.strstart-A.block_start,de),A.block_start=A.strstart,X(A.strm)}function De(A,de){A.pending_buf[A.pending++]=de}function ye(A,de){A.pending_buf[A.pending++]=de>>>8&255,A.pending_buf[A.pending++]=255&de}function he(A,de){var le,G,B=A.max_chain_length,Z=A.strstart,ue=A.prev_length,me=A.nice_match,ee=A.strstart>A.w_size-ne?A.strstart-(A.w_size-ne):0,Se=A.window,Re=A.w_mask,be=A.prev,je=A.strstart+Y,Jt=Se[Z+ue-1],Tt=Se[Z+ue];A.prev_length>=A.good_match&&(B>>=2),me>A.lookahead&&(me=A.lookahead);do if(Se[(le=de)+ue]===Tt&&Se[le+ue-1]===Jt&&Se[le]===Se[Z]&&Se[++le]===Se[Z+1]){Z+=2,le++;do;while(Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Se[++Z]===Se[++le]&&Z<je);if(G=Y-(je-Z),Z=je-Y,ue<G){if(A.match_start=de,me<=(ue=G))break;Jt=Se[Z+ue-1],Tt=Se[Z+ue]}}while((de=be[de&Re])>ee&&--B!=0);return ue<=A.lookahead?ue:A.lookahead}function Ge(A){var de,le,G,B,Z,ue,me,ee,Se,Re,be=A.w_size;do{if(B=A.window_size-A.lookahead-A.strstart,A.strstart>=be+(be-ne)){for(o.arraySet(A.window,A.window,be,be,0),A.match_start-=be,A.strstart-=be,A.block_start-=be,de=le=A.hash_size;G=A.head[--de],A.head[de]=be<=G?G-be:0,--le;);for(de=le=be;G=A.prev[--de],A.prev[de]=be<=G?G-be:0,--le;);B+=be}if(A.strm.avail_in===0)break;if(ue=A.strm,me=A.window,ee=A.strstart+A.lookahead,Se=B,Re=void 0,Re=ue.avail_in,Se<Re&&(Re=Se),le=Re===0?0:(ue.avail_in-=Re,o.arraySet(me,ue.input,ue.next_in,Re,ee),ue.state.wrap===1?ue.adler=l(ue.adler,me,Re,ee):ue.state.wrap===2&&(ue.adler=d(ue.adler,me,Re,ee)),ue.next_in+=Re,ue.total_in+=Re,Re),A.lookahead+=le,A.lookahead+A.insert>=z)for(Z=A.strstart-A.insert,A.ins_h=A.window[Z],A.ins_h=(A.ins_h<<A.hash_shift^A.window[Z+1])&A.hash_mask;A.insert&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[Z+z-1])&A.hash_mask,A.prev[Z&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=Z,Z++,A.insert--,!(A.lookahead+A.insert<z)););}while(A.lookahead<ne&&A.strm.avail_in!==0)}function cn(A,de){for(var le,G;;){if(A.lookahead<ne){if(Ge(A),A.lookahead<ne&&de===p)return T;if(A.lookahead===0)break}if(le=0,A.lookahead>=z&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+z-1])&A.hash_mask,le=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),le!==0&&A.strstart-le<=A.w_size-ne&&(A.match_length=he(A,le)),A.match_length>=z)if(G=s._tr_tally(A,A.strstart-A.match_start,A.match_length-z),A.lookahead-=A.match_length,A.match_length<=A.max_lazy_match&&A.lookahead>=z){for(A.match_length--;A.strstart++,A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+z-1])&A.hash_mask,le=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart,--A.match_length!=0;);A.strstart++}else A.strstart+=A.match_length,A.match_length=0,A.ins_h=A.window[A.strstart],A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+1])&A.hash_mask;else G=s._tr_tally(A,0,A.window[A.strstart]),A.lookahead--,A.strstart++;if(G&&(W(A,!1),A.strm.avail_out===0))return T}return A.insert=A.strstart<z-1?A.strstart:z-1,de===g?(W(A,!0),A.strm.avail_out===0?pe:oe):A.last_lit&&(W(A,!1),A.strm.avail_out===0)?T:K}function yt(A,de){for(var le,G,B;;){if(A.lookahead<ne){if(Ge(A),A.lookahead<ne&&de===p)return T;if(A.lookahead===0)break}if(le=0,A.lookahead>=z&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+z-1])&A.hash_mask,le=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),A.prev_length=A.match_length,A.prev_match=A.match_start,A.match_length=z-1,le!==0&&A.prev_length<A.max_lazy_match&&A.strstart-le<=A.w_size-ne&&(A.match_length=he(A,le),A.match_length<=5&&(A.strategy===1||A.match_length===z&&4096<A.strstart-A.match_start)&&(A.match_length=z-1)),A.prev_length>=z&&A.match_length<=A.prev_length){for(B=A.strstart+A.lookahead-z,G=s._tr_tally(A,A.strstart-1-A.prev_match,A.prev_length-z),A.lookahead-=A.prev_length-1,A.prev_length-=2;++A.strstart<=B&&(A.ins_h=(A.ins_h<<A.hash_shift^A.window[A.strstart+z-1])&A.hash_mask,le=A.prev[A.strstart&A.w_mask]=A.head[A.ins_h],A.head[A.ins_h]=A.strstart),--A.prev_length!=0;);if(A.match_available=0,A.match_length=z-1,A.strstart++,G&&(W(A,!1),A.strm.avail_out===0))return T}else if(A.match_available){if((G=s._tr_tally(A,0,A.window[A.strstart-1]))&&W(A,!1),A.strstart++,A.lookahead--,A.strm.avail_out===0)return T}else A.match_available=1,A.strstart++,A.lookahead--}return A.match_available&&(G=s._tr_tally(A,0,A.window[A.strstart-1]),A.match_available=0),A.insert=A.strstart<z-1?A.strstart:z-1,de===g?(W(A,!0),A.strm.avail_out===0?pe:oe):A.last_lit&&(W(A,!1),A.strm.avail_out===0)?T:K}function Ye(A,de,le,G,B){this.good_length=A,this.max_lazy=de,this.nice_length=le,this.max_chain=G,this.func=B}function $t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*q),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*N+1)),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(Q+1),this.heap=new o.Buf16(2*F+1),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*F+1),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Dt(A){var de;return A&&A.state?(A.total_in=A.total_out=0,A.data_type=w,(de=A.state).pending=0,de.pending_out=0,de.wrap<0&&(de.wrap=-de.wrap),de.status=de.wrap?O:j,A.adler=de.wrap===2?0:1,de.last_flush=p,s._tr_init(de),y):V(A,D)}function Vn(A){var de=Dt(A);return de===y&&function(le){le.window_size=2*le.w_size,ce(le.head),le.max_lazy_match=i[le.level].max_lazy,le.good_match=i[le.level].good_length,le.nice_match=i[le.level].nice_length,le.max_chain_length=i[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=z-1,le.match_available=0,le.ins_h=0}(A.state),de}function Wn(A,de,le,G,B,Z){if(!A)return D;var ue=1;if(de===b&&(de=6),G<0?(ue=0,G=-G):15<G&&(ue=2,G-=16),B<1||M<B||le!==x||G<8||15<G||de<0||9<de||Z<0||C<Z)return V(A,D);G===8&&(G=9);var me=new $t;return(A.state=me).strm=A,me.wrap=ue,me.gzhead=null,me.w_bits=G,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=B+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+z-1)/z),me.window=new o.Buf8(2*me.w_size),me.head=new o.Buf16(me.hash_size),me.prev=new o.Buf16(me.w_size),me.lit_bufsize=1<<B+6,me.pending_buf_size=4*me.lit_bufsize,me.pending_buf=new o.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=de,me.strategy=Z,me.method=le,Vn(A)}i=[new Ye(0,0,0,0,function(A,de){var le=65535;for(le>A.pending_buf_size-5&&(le=A.pending_buf_size-5);;){if(A.lookahead<=1){if(Ge(A),A.lookahead===0&&de===p)return T;if(A.lookahead===0)break}A.strstart+=A.lookahead,A.lookahead=0;var G=A.block_start+le;if((A.strstart===0||A.strstart>=G)&&(A.lookahead=A.strstart-G,A.strstart=G,W(A,!1),A.strm.avail_out===0)||A.strstart-A.block_start>=A.w_size-ne&&(W(A,!1),A.strm.avail_out===0))return T}return A.insert=0,de===g?(W(A,!0),A.strm.avail_out===0?pe:oe):(A.strstart>A.block_start&&(W(A,!1),A.strm.avail_out),T)}),new Ye(4,4,8,4,cn),new Ye(4,5,16,8,cn),new Ye(4,6,32,32,cn),new Ye(4,4,16,16,yt),new Ye(8,16,32,32,yt),new Ye(8,16,128,128,yt),new Ye(8,32,128,256,yt),new Ye(32,128,258,1024,yt),new Ye(32,258,258,4096,yt)],t.deflateInit=function(A,de){return Wn(A,de,x,15,8,0)},t.deflateInit2=Wn,t.deflateReset=Vn,t.deflateResetKeep=Dt,t.deflateSetHeader=function(A,de){return A&&A.state?A.state.wrap!==2?D:(A.state.gzhead=de,y):D},t.deflate=function(A,de){var le,G,B,Z;if(!A||!A.state||5<de||de<0)return A?V(A,D):D;if(G=A.state,!A.output||!A.input&&A.avail_in!==0||G.status===666&&de!==g)return V(A,A.avail_out===0?-5:D);if(G.strm=A,le=G.last_flush,G.last_flush=de,G.status===O)if(G.wrap===2)A.adler=0,De(G,31),De(G,139),De(G,8),G.gzhead?(De(G,(G.gzhead.text?1:0)+(G.gzhead.hcrc?2:0)+(G.gzhead.extra?4:0)+(G.gzhead.name?8:0)+(G.gzhead.comment?16:0)),De(G,255&G.gzhead.time),De(G,G.gzhead.time>>8&255),De(G,G.gzhead.time>>16&255),De(G,G.gzhead.time>>24&255),De(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),De(G,255&G.gzhead.os),G.gzhead.extra&&G.gzhead.extra.length&&(De(G,255&G.gzhead.extra.length),De(G,G.gzhead.extra.length>>8&255)),G.gzhead.hcrc&&(A.adler=d(A.adler,G.pending_buf,G.pending,0)),G.gzindex=0,G.status=69):(De(G,0),De(G,0),De(G,0),De(G,0),De(G,0),De(G,G.level===9?2:2<=G.strategy||G.level<2?4:0),De(G,3),G.status=j);else{var ue=x+(G.w_bits-8<<4)<<8;ue|=(2<=G.strategy||G.level<2?0:G.level<6?1:G.level===6?2:3)<<6,G.strstart!==0&&(ue|=32),ue+=31-ue%31,G.status=j,ye(G,ue),G.strstart!==0&&(ye(G,A.adler>>>16),ye(G,65535&A.adler)),A.adler=1}if(G.status===69)if(G.gzhead.extra){for(B=G.pending;G.gzindex<(65535&G.gzhead.extra.length)&&(G.pending!==G.pending_buf_size||(G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),X(A),B=G.pending,G.pending!==G.pending_buf_size));)De(G,255&G.gzhead.extra[G.gzindex]),G.gzindex++;G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),G.gzindex===G.gzhead.extra.length&&(G.gzindex=0,G.status=73)}else G.status=73;if(G.status===73)if(G.gzhead.name){B=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),X(A),B=G.pending,G.pending===G.pending_buf_size)){Z=1;break}Z=G.gzindex<G.gzhead.name.length?255&G.gzhead.name.charCodeAt(G.gzindex++):0,De(G,Z)}while(Z!==0);G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),Z===0&&(G.gzindex=0,G.status=91)}else G.status=91;if(G.status===91)if(G.gzhead.comment){B=G.pending;do{if(G.pending===G.pending_buf_size&&(G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),X(A),B=G.pending,G.pending===G.pending_buf_size)){Z=1;break}Z=G.gzindex<G.gzhead.comment.length?255&G.gzhead.comment.charCodeAt(G.gzindex++):0,De(G,Z)}while(Z!==0);G.gzhead.hcrc&&G.pending>B&&(A.adler=d(A.adler,G.pending_buf,G.pending-B,B)),Z===0&&(G.status=103)}else G.status=103;if(G.status===103&&(G.gzhead.hcrc?(G.pending+2>G.pending_buf_size&&X(A),G.pending+2<=G.pending_buf_size&&(De(G,255&A.adler),De(G,A.adler>>8&255),A.adler=0,G.status=j)):G.status=j),G.pending!==0){if(X(A),A.avail_out===0)return G.last_flush=-1,y}else if(A.avail_in===0&&$(de)<=$(le)&&de!==g)return V(A,-5);if(G.status===666&&A.avail_in!==0)return V(A,-5);if(A.avail_in!==0||G.lookahead!==0||de!==p&&G.status!==666){var me=G.strategy===2?function(ee,Se){for(var Re;;){if(ee.lookahead===0&&(Ge(ee),ee.lookahead===0)){if(Se===p)return T;break}if(ee.match_length=0,Re=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++,Re&&(W(ee,!1),ee.strm.avail_out===0))return T}return ee.insert=0,Se===g?(W(ee,!0),ee.strm.avail_out===0?pe:oe):ee.last_lit&&(W(ee,!1),ee.strm.avail_out===0)?T:K}(G,de):G.strategy===3?function(ee,Se){for(var Re,be,je,Jt,Tt=ee.window;;){if(ee.lookahead<=Y){if(Ge(ee),ee.lookahead<=Y&&Se===p)return T;if(ee.lookahead===0)break}if(ee.match_length=0,ee.lookahead>=z&&0<ee.strstart&&(be=Tt[je=ee.strstart-1])===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]){Jt=ee.strstart+Y;do;while(be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&be===Tt[++je]&&je<Jt);ee.match_length=Y-(Jt-je),ee.match_length>ee.lookahead&&(ee.match_length=ee.lookahead)}if(ee.match_length>=z?(Re=s._tr_tally(ee,1,ee.match_length-z),ee.lookahead-=ee.match_length,ee.strstart+=ee.match_length,ee.match_length=0):(Re=s._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++),Re&&(W(ee,!1),ee.strm.avail_out===0))return T}return ee.insert=0,Se===g?(W(ee,!0),ee.strm.avail_out===0?pe:oe):ee.last_lit&&(W(ee,!1),ee.strm.avail_out===0)?T:K}(G,de):i[G.level].func(G,de);if(me!==pe&&me!==oe||(G.status=666),me===T||me===pe)return A.avail_out===0&&(G.last_flush=-1),y;if(me===K&&(de===1?s._tr_align(G):de!==5&&(s._tr_stored_block(G,0,0,!1),de===3&&(ce(G.head),G.lookahead===0&&(G.strstart=0,G.block_start=0,G.insert=0))),X(A),A.avail_out===0))return G.last_flush=-1,y}return de!==g?y:G.wrap<=0?1:(G.wrap===2?(De(G,255&A.adler),De(G,A.adler>>8&255),De(G,A.adler>>16&255),De(G,A.adler>>24&255),De(G,255&A.total_in),De(G,A.total_in>>8&255),De(G,A.total_in>>16&255),De(G,A.total_in>>24&255)):(ye(G,A.adler>>>16),ye(G,65535&A.adler)),X(A),0<G.wrap&&(G.wrap=-G.wrap),G.pending!==0?y:1)},t.deflateEnd=function(A){var de;return A&&A.state?(de=A.state.status)!==O&&de!==69&&de!==73&&de!==91&&de!==103&&de!==j&&de!==666?V(A,D):(A.state=null,de===j?V(A,-3):y):D},t.deflateSetDictionary=function(A,de){var le,G,B,Z,ue,me,ee,Se,Re=de.length;if(!A||!A.state||(Z=(le=A.state).wrap)===2||Z===1&&le.status!==O||le.lookahead)return D;for(Z===1&&(A.adler=l(A.adler,de,Re,0)),le.wrap=0,Re>=le.w_size&&(Z===0&&(ce(le.head),le.strstart=0,le.block_start=0,le.insert=0),Se=new o.Buf8(le.w_size),o.arraySet(Se,de,Re-le.w_size,le.w_size,0),de=Se,Re=le.w_size),ue=A.avail_in,me=A.next_in,ee=A.input,A.avail_in=Re,A.next_in=0,A.input=de,Ge(le);le.lookahead>=z;){for(G=le.strstart,B=le.lookahead-(z-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[G+z-1])&le.hash_mask,le.prev[G&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=G,G++,--B;);le.strstart=G,le.lookahead=z-1,Ge(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=z-1,le.match_available=0,A.next_in=me,A.input=ee,A.avail_in=ue,le.wrap=Z,y},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,e,t){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,e,t){"use strict";e.exports=function(i,o){var s,l,d,f,p,g,y,D,b,C,w,x,M,F,k,N,q,Q,z,Y,ne,O,j,T,K;s=i.state,l=i.next_in,T=i.input,d=l+(i.avail_in-5),f=i.next_out,K=i.output,p=f-(o-i.avail_out),g=f+(i.avail_out-257),y=s.dmax,D=s.wsize,b=s.whave,C=s.wnext,w=s.window,x=s.hold,M=s.bits,F=s.lencode,k=s.distcode,N=(1<<s.lenbits)-1,q=(1<<s.distbits)-1;e:do{M<15&&(x+=T[l++]<<M,M+=8,x+=T[l++]<<M,M+=8),Q=F[x&N];t:for(;;){if(x>>>=z=Q>>>24,M-=z,(z=Q>>>16&255)===0)K[f++]=65535&Q;else{if(!(16&z)){if(!(64&z)){Q=F[(65535&Q)+(x&(1<<z)-1)];continue t}if(32&z){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}Y=65535&Q,(z&=15)&&(M<z&&(x+=T[l++]<<M,M+=8),Y+=x&(1<<z)-1,x>>>=z,M-=z),M<15&&(x+=T[l++]<<M,M+=8,x+=T[l++]<<M,M+=8),Q=k[x&q];n:for(;;){if(x>>>=z=Q>>>24,M-=z,!(16&(z=Q>>>16&255))){if(!(64&z)){Q=k[(65535&Q)+(x&(1<<z)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(ne=65535&Q,M<(z&=15)&&(x+=T[l++]<<M,(M+=8)<z&&(x+=T[l++]<<M,M+=8)),y<(ne+=x&(1<<z)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(x>>>=z,M-=z,(z=f-p)<ne){if(b<(z=ne-z)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(j=w,(O=0)===C){if(O+=D-z,z<Y){for(Y-=z;K[f++]=w[O++],--z;);O=f-ne,j=K}}else if(C<z){if(O+=D+C-z,(z-=C)<Y){for(Y-=z;K[f++]=w[O++],--z;);if(O=0,C<Y){for(Y-=z=C;K[f++]=w[O++],--z;);O=f-ne,j=K}}}else if(O+=C-z,z<Y){for(Y-=z;K[f++]=w[O++],--z;);O=f-ne,j=K}for(;2<Y;)K[f++]=j[O++],K[f++]=j[O++],K[f++]=j[O++],Y-=3;Y&&(K[f++]=j[O++],1<Y&&(K[f++]=j[O++]))}else{for(O=f-ne;K[f++]=K[O++],K[f++]=K[O++],K[f++]=K[O++],2<(Y-=3););Y&&(K[f++]=K[O++],1<Y&&(K[f++]=K[O++]))}break}}break}}while(l<d&&f<g);l-=Y=M>>3,x&=(1<<(M-=Y<<3))-1,i.next_in=l,i.next_out=f,i.avail_in=l<d?d-l+5:5-(l-d),i.avail_out=f<g?g-f+257:257-(f-g),s.hold=x,s.bits=M}},{}],49:[function(n,e,t){"use strict";var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),l=n("./inffast"),d=n("./inftrees"),f=1,p=2,g=0,y=-2,D=1,b=852,C=592;function w(O){return(O>>>24&255)+(O>>>8&65280)+((65280&O)<<8)+((255&O)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(O){var j;return O&&O.state?(j=O.state,O.total_in=O.total_out=j.total=0,O.msg="",j.wrap&&(O.adler=1&j.wrap),j.mode=D,j.last=0,j.havedict=0,j.dmax=32768,j.head=null,j.hold=0,j.bits=0,j.lencode=j.lendyn=new i.Buf32(b),j.distcode=j.distdyn=new i.Buf32(C),j.sane=1,j.back=-1,g):y}function F(O){var j;return O&&O.state?((j=O.state).wsize=0,j.whave=0,j.wnext=0,M(O)):y}function k(O,j){var T,K;return O&&O.state?(K=O.state,j<0?(T=0,j=-j):(T=1+(j>>4),j<48&&(j&=15)),j&&(j<8||15<j)?y:(K.window!==null&&K.wbits!==j&&(K.window=null),K.wrap=T,K.wbits=j,F(O))):y}function N(O,j){var T,K;return O?(K=new x,(O.state=K).window=null,(T=k(O,j))!==g&&(O.state=null),T):y}var q,Q,z=!0;function Y(O){if(z){var j;for(q=new i.Buf32(512),Q=new i.Buf32(32),j=0;j<144;)O.lens[j++]=8;for(;j<256;)O.lens[j++]=9;for(;j<280;)O.lens[j++]=7;for(;j<288;)O.lens[j++]=8;for(d(f,O.lens,0,288,q,0,O.work,{bits:9}),j=0;j<32;)O.lens[j++]=5;d(p,O.lens,0,32,Q,0,O.work,{bits:5}),z=!1}O.lencode=q,O.lenbits=9,O.distcode=Q,O.distbits=5}function ne(O,j,T,K){var pe,oe=O.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new i.Buf8(oe.wsize)),K>=oe.wsize?(i.arraySet(oe.window,j,T-oe.wsize,oe.wsize,0),oe.wnext=0,oe.whave=oe.wsize):(K<(pe=oe.wsize-oe.wnext)&&(pe=K),i.arraySet(oe.window,j,T-K,pe,oe.wnext),(K-=pe)?(i.arraySet(oe.window,j,T-K,K,0),oe.wnext=K,oe.whave=oe.wsize):(oe.wnext+=pe,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=pe))),0}t.inflateReset=F,t.inflateReset2=k,t.inflateResetKeep=M,t.inflateInit=function(O){return N(O,15)},t.inflateInit2=N,t.inflate=function(O,j){var T,K,pe,oe,V,$,ce,X,W,De,ye,he,Ge,cn,yt,Ye,$t,Dt,Vn,Wn,A,de,le,G,B=0,Z=new i.Buf8(4),ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!O||!O.state||!O.output||!O.input&&O.avail_in!==0)return y;(T=O.state).mode===12&&(T.mode=13),V=O.next_out,pe=O.output,ce=O.avail_out,oe=O.next_in,K=O.input,$=O.avail_in,X=T.hold,W=T.bits,De=$,ye=ce,de=g;e:for(;;)switch(T.mode){case D:if(T.wrap===0){T.mode=13;break}for(;W<16;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(2&T.wrap&&X===35615){Z[T.check=0]=255&X,Z[1]=X>>>8&255,T.check=s(T.check,Z,2,0),W=X=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&X)<<8)+(X>>8))%31){O.msg="incorrect header check",T.mode=30;break}if((15&X)!=8){O.msg="unknown compression method",T.mode=30;break}if(W-=4,A=8+(15&(X>>>=4)),T.wbits===0)T.wbits=A;else if(A>T.wbits){O.msg="invalid window size",T.mode=30;break}T.dmax=1<<A,O.adler=T.check=1,T.mode=512&X?10:12,W=X=0;break;case 2:for(;W<16;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(T.flags=X,(255&T.flags)!=8){O.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){O.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=X>>8&1),512&T.flags&&(Z[0]=255&X,Z[1]=X>>>8&255,T.check=s(T.check,Z,2,0)),W=X=0,T.mode=3;case 3:for(;W<32;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.head&&(T.head.time=X),512&T.flags&&(Z[0]=255&X,Z[1]=X>>>8&255,Z[2]=X>>>16&255,Z[3]=X>>>24&255,T.check=s(T.check,Z,4,0)),W=X=0,T.mode=4;case 4:for(;W<16;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.head&&(T.head.xflags=255&X,T.head.os=X>>8),512&T.flags&&(Z[0]=255&X,Z[1]=X>>>8&255,T.check=s(T.check,Z,2,0)),W=X=0,T.mode=5;case 5:if(1024&T.flags){for(;W<16;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.length=X,T.head&&(T.head.extra_len=X),512&T.flags&&(Z[0]=255&X,Z[1]=X>>>8&255,T.check=s(T.check,Z,2,0)),W=X=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&($<(he=T.length)&&(he=$),he&&(T.head&&(A=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),i.arraySet(T.head.extra,K,oe,he,A)),512&T.flags&&(T.check=s(T.check,K,he,oe)),$-=he,oe+=he,T.length-=he),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if($===0)break e;for(he=0;A=K[oe+he++],T.head&&A&&T.length<65536&&(T.head.name+=String.fromCharCode(A)),A&&he<$;);if(512&T.flags&&(T.check=s(T.check,K,he,oe)),$-=he,oe+=he,A)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if($===0)break e;for(he=0;A=K[oe+he++],T.head&&A&&T.length<65536&&(T.head.comment+=String.fromCharCode(A)),A&&he<$;);if(512&T.flags&&(T.check=s(T.check,K,he,oe)),$-=he,oe+=he,A)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;W<16;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(X!==(65535&T.check)){O.msg="header crc mismatch",T.mode=30;break}W=X=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),O.adler=T.check=0,T.mode=12;break;case 10:for(;W<32;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}O.adler=T.check=w(X),W=X=0,T.mode=11;case 11:if(T.havedict===0)return O.next_out=V,O.avail_out=ce,O.next_in=oe,O.avail_in=$,T.hold=X,T.bits=W,2;O.adler=T.check=1,T.mode=12;case 12:if(j===5||j===6)break e;case 13:if(T.last){X>>>=7&W,W-=7&W,T.mode=27;break}for(;W<3;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}switch(T.last=1&X,W-=1,3&(X>>>=1)){case 0:T.mode=14;break;case 1:if(Y(T),T.mode=20,j!==6)break;X>>>=2,W-=2;break e;case 2:T.mode=17;break;case 3:O.msg="invalid block type",T.mode=30}X>>>=2,W-=2;break;case 14:for(X>>>=7&W,W-=7&W;W<32;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if((65535&X)!=(X>>>16^65535)){O.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&X,W=X=0,T.mode=15,j===6)break e;case 15:T.mode=16;case 16:if(he=T.length){if($<he&&(he=$),ce<he&&(he=ce),he===0)break e;i.arraySet(pe,K,oe,he,V),$-=he,oe+=he,ce-=he,V+=he,T.length-=he;break}T.mode=12;break;case 17:for(;W<14;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(T.nlen=257+(31&X),X>>>=5,W-=5,T.ndist=1+(31&X),X>>>=5,W-=5,T.ncode=4+(15&X),X>>>=4,W-=4,286<T.nlen||30<T.ndist){O.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;W<3;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.lens[ue[T.have++]]=7&X,X>>>=3,W-=3}for(;T.have<19;)T.lens[ue[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,le={bits:T.lenbits},de=d(0,T.lens,0,19,T.lencode,0,T.work,le),T.lenbits=le.bits,de){O.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ye=(B=T.lencode[X&(1<<T.lenbits)-1])>>>16&255,$t=65535&B,!((yt=B>>>24)<=W);){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if($t<16)X>>>=yt,W-=yt,T.lens[T.have++]=$t;else{if($t===16){for(G=yt+2;W<G;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(X>>>=yt,W-=yt,T.have===0){O.msg="invalid bit length repeat",T.mode=30;break}A=T.lens[T.have-1],he=3+(3&X),X>>>=2,W-=2}else if($t===17){for(G=yt+3;W<G;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}W-=yt,A=0,he=3+(7&(X>>>=yt)),X>>>=3,W-=3}else{for(G=yt+7;W<G;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}W-=yt,A=0,he=11+(127&(X>>>=yt)),X>>>=7,W-=7}if(T.have+he>T.nlen+T.ndist){O.msg="invalid bit length repeat",T.mode=30;break}for(;he--;)T.lens[T.have++]=A}}if(T.mode===30)break;if(T.lens[256]===0){O.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,le={bits:T.lenbits},de=d(f,T.lens,0,T.nlen,T.lencode,0,T.work,le),T.lenbits=le.bits,de){O.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,le={bits:T.distbits},de=d(p,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,le),T.distbits=le.bits,de){O.msg="invalid distances set",T.mode=30;break}if(T.mode=20,j===6)break e;case 20:T.mode=21;case 21:if(6<=$&&258<=ce){O.next_out=V,O.avail_out=ce,O.next_in=oe,O.avail_in=$,T.hold=X,T.bits=W,l(O,ye),V=O.next_out,pe=O.output,ce=O.avail_out,oe=O.next_in,K=O.input,$=O.avail_in,X=T.hold,W=T.bits,T.mode===12&&(T.back=-1);break}for(T.back=0;Ye=(B=T.lencode[X&(1<<T.lenbits)-1])>>>16&255,$t=65535&B,!((yt=B>>>24)<=W);){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(Ye&&!(240&Ye)){for(Dt=yt,Vn=Ye,Wn=$t;Ye=(B=T.lencode[Wn+((X&(1<<Dt+Vn)-1)>>Dt)])>>>16&255,$t=65535&B,!(Dt+(yt=B>>>24)<=W);){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}X>>>=Dt,W-=Dt,T.back+=Dt}if(X>>>=yt,W-=yt,T.back+=yt,T.length=$t,Ye===0){T.mode=26;break}if(32&Ye){T.back=-1,T.mode=12;break}if(64&Ye){O.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ye,T.mode=22;case 22:if(T.extra){for(G=T.extra;W<G;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.length+=X&(1<<T.extra)-1,X>>>=T.extra,W-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ye=(B=T.distcode[X&(1<<T.distbits)-1])>>>16&255,$t=65535&B,!((yt=B>>>24)<=W);){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(!(240&Ye)){for(Dt=yt,Vn=Ye,Wn=$t;Ye=(B=T.distcode[Wn+((X&(1<<Dt+Vn)-1)>>Dt)])>>>16&255,$t=65535&B,!(Dt+(yt=B>>>24)<=W);){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}X>>>=Dt,W-=Dt,T.back+=Dt}if(X>>>=yt,W-=yt,T.back+=yt,64&Ye){O.msg="invalid distance code",T.mode=30;break}T.offset=$t,T.extra=15&Ye,T.mode=24;case 24:if(T.extra){for(G=T.extra;W<G;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}T.offset+=X&(1<<T.extra)-1,X>>>=T.extra,W-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){O.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(ce===0)break e;if(he=ye-ce,T.offset>he){if((he=T.offset-he)>T.whave&&T.sane){O.msg="invalid distance too far back",T.mode=30;break}Ge=he>T.wnext?(he-=T.wnext,T.wsize-he):T.wnext-he,he>T.length&&(he=T.length),cn=T.window}else cn=pe,Ge=V-T.offset,he=T.length;for(ce<he&&(he=ce),ce-=he,T.length-=he;pe[V++]=cn[Ge++],--he;);T.length===0&&(T.mode=21);break;case 26:if(ce===0)break e;pe[V++]=T.length,ce--,T.mode=21;break;case 27:if(T.wrap){for(;W<32;){if($===0)break e;$--,X|=K[oe++]<<W,W+=8}if(ye-=ce,O.total_out+=ye,T.total+=ye,ye&&(O.adler=T.check=T.flags?s(T.check,pe,ye,V-ye):o(T.check,pe,ye,V-ye)),ye=ce,(T.flags?X:w(X))!==T.check){O.msg="incorrect data check",T.mode=30;break}W=X=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;W<32;){if($===0)break e;$--,X+=K[oe++]<<W,W+=8}if(X!==(4294967295&T.total)){O.msg="incorrect length check",T.mode=30;break}W=X=0}T.mode=29;case 29:de=1;break e;case 30:de=-3;break e;case 31:return-4;case 32:default:return y}return O.next_out=V,O.avail_out=ce,O.next_in=oe,O.avail_in=$,T.hold=X,T.bits=W,(T.wsize||ye!==O.avail_out&&T.mode<30&&(T.mode<27||j!==4))&&ne(O,O.output,O.next_out,ye-O.avail_out)?(T.mode=31,-4):(De-=O.avail_in,ye-=O.avail_out,O.total_in+=De,O.total_out+=ye,T.total+=ye,T.wrap&&ye&&(O.adler=T.check=T.flags?s(T.check,pe,ye,O.next_out-ye):o(T.check,pe,ye,O.next_out-ye)),O.data_type=T.bits+(T.last?64:0)+(T.mode===12?128:0)+(T.mode===20||T.mode===15?256:0),(De==0&&ye===0||j===4)&&de===g&&(de=-5),de)},t.inflateEnd=function(O){if(!O||!O.state)return y;var j=O.state;return j.window&&(j.window=null),O.state=null,g},t.inflateGetHeader=function(O,j){var T;return O&&O.state&&2&(T=O.state).wrap?((T.head=j).done=!1,g):y},t.inflateSetDictionary=function(O,j){var T,K=j.length;return O&&O.state?(T=O.state).wrap!==0&&T.mode!==11?y:T.mode===11&&o(1,j,K,0)!==T.check?-3:ne(O,j,K,K)?(T.mode=31,-4):(T.havedict=1,g):y},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,e,t){"use strict";var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(f,p,g,y,D,b,C,w){var x,M,F,k,N,q,Q,z,Y,ne=w.bits,O=0,j=0,T=0,K=0,pe=0,oe=0,V=0,$=0,ce=0,X=0,W=null,De=0,ye=new i.Buf16(16),he=new i.Buf16(16),Ge=null,cn=0;for(O=0;O<=15;O++)ye[O]=0;for(j=0;j<y;j++)ye[p[g+j]]++;for(pe=ne,K=15;1<=K&&ye[K]===0;K--);if(K<pe&&(pe=K),K===0)return D[b++]=20971520,D[b++]=20971520,w.bits=1,0;for(T=1;T<K&&ye[T]===0;T++);for(pe<T&&(pe=T),O=$=1;O<=15;O++)if($<<=1,($-=ye[O])<0)return-1;if(0<$&&(f===0||K!==1))return-1;for(he[1]=0,O=1;O<15;O++)he[O+1]=he[O]+ye[O];for(j=0;j<y;j++)p[g+j]!==0&&(C[he[p[g+j]]++]=j);if(q=f===0?(W=Ge=C,19):f===1?(W=o,De-=257,Ge=s,cn-=257,256):(W=l,Ge=d,-1),O=T,N=b,V=j=X=0,F=-1,k=(ce=1<<(oe=pe))-1,f===1&&852<ce||f===2&&592<ce)return 1;for(;;){for(Q=O-V,Y=C[j]<q?(z=0,C[j]):C[j]>q?(z=Ge[cn+C[j]],W[De+C[j]]):(z=96,0),x=1<<O-V,T=M=1<<oe;D[N+(X>>V)+(M-=x)]=Q<<24|z<<16|Y|0,M!==0;);for(x=1<<O-1;X&x;)x>>=1;if(x!==0?(X&=x-1,X+=x):X=0,j++,--ye[O]==0){if(O===K)break;O=p[g+C[j]]}if(pe<O&&(X&k)!==F){for(V===0&&(V=pe),N+=T,$=1<<(oe=O-V);oe+V<K&&!(($-=ye[oe+V])<=0);)oe++,$<<=1;if(ce+=1<<oe,f===1&&852<ce||f===2&&592<ce)return 1;D[F=X&k]=pe<<24|oe<<16|N-b|0}}return X!==0&&(D[N+X]=O-V<<24|64<<16|0),w.bits=pe,0}},{"../utils/common":41}],51:[function(n,e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,e,t){"use strict";var i=n("../utils/common"),o=0,s=1;function l(B){for(var Z=B.length;0<=--Z;)B[Z]=0}var d=0,f=29,p=256,g=p+1+f,y=30,D=19,b=2*g+1,C=15,w=16,x=7,M=256,F=16,k=17,N=18,q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=new Array(2*(g+2));l(ne);var O=new Array(2*y);l(O);var j=new Array(512);l(j);var T=new Array(256);l(T);var K=new Array(f);l(K);var pe,oe,V,$=new Array(y);function ce(B,Z,ue,me,ee){this.static_tree=B,this.extra_bits=Z,this.extra_base=ue,this.elems=me,this.max_length=ee,this.has_stree=B&&B.length}function X(B,Z){this.dyn_tree=B,this.max_code=0,this.stat_desc=Z}function W(B){return B<256?j[B]:j[256+(B>>>7)]}function De(B,Z){B.pending_buf[B.pending++]=255&Z,B.pending_buf[B.pending++]=Z>>>8&255}function ye(B,Z,ue){B.bi_valid>w-ue?(B.bi_buf|=Z<<B.bi_valid&65535,De(B,B.bi_buf),B.bi_buf=Z>>w-B.bi_valid,B.bi_valid+=ue-w):(B.bi_buf|=Z<<B.bi_valid&65535,B.bi_valid+=ue)}function he(B,Z,ue){ye(B,ue[2*Z],ue[2*Z+1])}function Ge(B,Z){for(var ue=0;ue|=1&B,B>>>=1,ue<<=1,0<--Z;);return ue>>>1}function cn(B,Z,ue){var me,ee,Se=new Array(C+1),Re=0;for(me=1;me<=C;me++)Se[me]=Re=Re+ue[me-1]<<1;for(ee=0;ee<=Z;ee++){var be=B[2*ee+1];be!==0&&(B[2*ee]=Ge(Se[be]++,be))}}function yt(B){var Z;for(Z=0;Z<g;Z++)B.dyn_ltree[2*Z]=0;for(Z=0;Z<y;Z++)B.dyn_dtree[2*Z]=0;for(Z=0;Z<D;Z++)B.bl_tree[2*Z]=0;B.dyn_ltree[2*M]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function Ye(B){8<B.bi_valid?De(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function $t(B,Z,ue,me){var ee=2*Z,Se=2*ue;return B[ee]<B[Se]||B[ee]===B[Se]&&me[Z]<=me[ue]}function Dt(B,Z,ue){for(var me=B.heap[ue],ee=ue<<1;ee<=B.heap_len&&(ee<B.heap_len&&$t(Z,B.heap[ee+1],B.heap[ee],B.depth)&&ee++,!$t(Z,me,B.heap[ee],B.depth));)B.heap[ue]=B.heap[ee],ue=ee,ee<<=1;B.heap[ue]=me}function Vn(B,Z,ue){var me,ee,Se,Re,be=0;if(B.last_lit!==0)for(;me=B.pending_buf[B.d_buf+2*be]<<8|B.pending_buf[B.d_buf+2*be+1],ee=B.pending_buf[B.l_buf+be],be++,me===0?he(B,ee,Z):(he(B,(Se=T[ee])+p+1,Z),(Re=q[Se])!==0&&ye(B,ee-=K[Se],Re),he(B,Se=W(--me),ue),(Re=Q[Se])!==0&&ye(B,me-=$[Se],Re)),be<B.last_lit;);he(B,M,Z)}function Wn(B,Z){var ue,me,ee,Se=Z.dyn_tree,Re=Z.stat_desc.static_tree,be=Z.stat_desc.has_stree,je=Z.stat_desc.elems,Jt=-1;for(B.heap_len=0,B.heap_max=b,ue=0;ue<je;ue++)Se[2*ue]!==0?(B.heap[++B.heap_len]=Jt=ue,B.depth[ue]=0):Se[2*ue+1]=0;for(;B.heap_len<2;)Se[2*(ee=B.heap[++B.heap_len]=Jt<2?++Jt:0)]=1,B.depth[ee]=0,B.opt_len--,be&&(B.static_len-=Re[2*ee+1]);for(Z.max_code=Jt,ue=B.heap_len>>1;1<=ue;ue--)Dt(B,Se,ue);for(ee=je;ue=B.heap[1],B.heap[1]=B.heap[B.heap_len--],Dt(B,Se,1),me=B.heap[1],B.heap[--B.heap_max]=ue,B.heap[--B.heap_max]=me,Se[2*ee]=Se[2*ue]+Se[2*me],B.depth[ee]=(B.depth[ue]>=B.depth[me]?B.depth[ue]:B.depth[me])+1,Se[2*ue+1]=Se[2*me+1]=ee,B.heap[1]=ee++,Dt(B,Se,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],function(Tt,_i){var Ss,ji,Bn,gn,_r,Mo,Di=_i.dyn_tree,Ql=_i.max_code,jd=_i.stat_desc.static_tree,zp=_i.stat_desc.has_stree,Ro=_i.stat_desc.extra_bits,Da=_i.stat_desc.extra_base,$n=_i.stat_desc.max_length,Ai=0;for(gn=0;gn<=C;gn++)Tt.bl_count[gn]=0;for(Di[2*Tt.heap[Tt.heap_max]+1]=0,Ss=Tt.heap_max+1;Ss<b;Ss++)$n<(gn=Di[2*Di[2*(ji=Tt.heap[Ss])+1]+1]+1)&&(gn=$n,Ai++),Di[2*ji+1]=gn,Ql<ji||(Tt.bl_count[gn]++,_r=0,Da<=ji&&(_r=Ro[ji-Da]),Mo=Di[2*ji],Tt.opt_len+=Mo*(gn+_r),zp&&(Tt.static_len+=Mo*(jd[2*ji+1]+_r)));if(Ai!==0){do{for(gn=$n-1;Tt.bl_count[gn]===0;)gn--;Tt.bl_count[gn]--,Tt.bl_count[gn+1]+=2,Tt.bl_count[$n]--,Ai-=2}while(0<Ai);for(gn=$n;gn!==0;gn--)for(ji=Tt.bl_count[gn];ji!==0;)Ql<(Bn=Tt.heap[--Ss])||(Di[2*Bn+1]!==gn&&(Tt.opt_len+=(gn-Di[2*Bn+1])*Di[2*Bn],Di[2*Bn+1]=gn),ji--)}}(B,Z),cn(Se,Jt,B.bl_count)}function A(B,Z,ue){var me,ee,Se=-1,Re=Z[1],be=0,je=7,Jt=4;for(Re===0&&(je=138,Jt=3),Z[2*(ue+1)+1]=65535,me=0;me<=ue;me++)ee=Re,Re=Z[2*(me+1)+1],++be<je&&ee===Re||(be<Jt?B.bl_tree[2*ee]+=be:ee!==0?(ee!==Se&&B.bl_tree[2*ee]++,B.bl_tree[2*F]++):be<=10?B.bl_tree[2*k]++:B.bl_tree[2*N]++,Se=ee,Jt=(be=0)===Re?(je=138,3):ee===Re?(je=6,3):(je=7,4))}function de(B,Z,ue){var me,ee,Se=-1,Re=Z[1],be=0,je=7,Jt=4;for(Re===0&&(je=138,Jt=3),me=0;me<=ue;me++)if(ee=Re,Re=Z[2*(me+1)+1],!(++be<je&&ee===Re)){if(be<Jt)for(;he(B,ee,B.bl_tree),--be!=0;);else ee!==0?(ee!==Se&&(he(B,ee,B.bl_tree),be--),he(B,F,B.bl_tree),ye(B,be-3,2)):be<=10?(he(B,k,B.bl_tree),ye(B,be-3,3)):(he(B,N,B.bl_tree),ye(B,be-11,7));Se=ee,Jt=(be=0)===Re?(je=138,3):ee===Re?(je=6,3):(je=7,4)}}l($);var le=!1;function G(B,Z,ue,me){ye(B,(d<<1)+(me?1:0),3),function(ee,Se,Re,be){Ye(ee),be&&(De(ee,Re),De(ee,~Re)),i.arraySet(ee.pending_buf,ee.window,Se,Re,ee.pending),ee.pending+=Re}(B,Z,ue,!0)}t._tr_init=function(B){le||(function(){var Z,ue,me,ee,Se,Re=new Array(C+1);for(ee=me=0;ee<f-1;ee++)for(K[ee]=me,Z=0;Z<1<<q[ee];Z++)T[me++]=ee;for(T[me-1]=ee,ee=Se=0;ee<16;ee++)for($[ee]=Se,Z=0;Z<1<<Q[ee];Z++)j[Se++]=ee;for(Se>>=7;ee<y;ee++)for($[ee]=Se<<7,Z=0;Z<1<<Q[ee]-7;Z++)j[256+Se++]=ee;for(ue=0;ue<=C;ue++)Re[ue]=0;for(Z=0;Z<=143;)ne[2*Z+1]=8,Z++,Re[8]++;for(;Z<=255;)ne[2*Z+1]=9,Z++,Re[9]++;for(;Z<=279;)ne[2*Z+1]=7,Z++,Re[7]++;for(;Z<=287;)ne[2*Z+1]=8,Z++,Re[8]++;for(cn(ne,g+1,Re),Z=0;Z<y;Z++)O[2*Z+1]=5,O[2*Z]=Ge(Z,5);pe=new ce(ne,q,p+1,g,C),oe=new ce(O,Q,0,y,C),V=new ce(new Array(0),z,0,D,x)}(),le=!0),B.l_desc=new X(B.dyn_ltree,pe),B.d_desc=new X(B.dyn_dtree,oe),B.bl_desc=new X(B.bl_tree,V),B.bi_buf=0,B.bi_valid=0,yt(B)},t._tr_stored_block=G,t._tr_flush_block=function(B,Z,ue,me){var ee,Se,Re=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=function(be){var je,Jt=4093624447;for(je=0;je<=31;je++,Jt>>>=1)if(1&Jt&&be.dyn_ltree[2*je]!==0)return o;if(be.dyn_ltree[18]!==0||be.dyn_ltree[20]!==0||be.dyn_ltree[26]!==0)return s;for(je=32;je<p;je++)if(be.dyn_ltree[2*je]!==0)return s;return o}(B)),Wn(B,B.l_desc),Wn(B,B.d_desc),Re=function(be){var je;for(A(be,be.dyn_ltree,be.l_desc.max_code),A(be,be.dyn_dtree,be.d_desc.max_code),Wn(be,be.bl_desc),je=D-1;3<=je&&be.bl_tree[2*Y[je]+1]===0;je--);return be.opt_len+=3*(je+1)+5+5+4,je}(B),ee=B.opt_len+3+7>>>3,(Se=B.static_len+3+7>>>3)<=ee&&(ee=Se)):ee=Se=ue+5,ue+4<=ee&&Z!==-1?G(B,Z,ue,me):B.strategy===4||Se===ee?(ye(B,2+(me?1:0),3),Vn(B,ne,O)):(ye(B,4+(me?1:0),3),function(be,je,Jt,Tt){var _i;for(ye(be,je-257,5),ye(be,Jt-1,5),ye(be,Tt-4,4),_i=0;_i<Tt;_i++)ye(be,be.bl_tree[2*Y[_i]+1],3);de(be,be.dyn_ltree,je-1),de(be,be.dyn_dtree,Jt-1)}(B,B.l_desc.max_code+1,B.d_desc.max_code+1,Re+1),Vn(B,B.dyn_ltree,B.dyn_dtree)),yt(B),me&&Ye(B)},t._tr_tally=function(B,Z,ue){return B.pending_buf[B.d_buf+2*B.last_lit]=Z>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&Z,B.pending_buf[B.l_buf+B.last_lit]=255&ue,B.last_lit++,Z===0?B.dyn_ltree[2*ue]++:(B.matches++,Z--,B.dyn_ltree[2*(T[ue]+p+1)]++,B.dyn_dtree[2*W(Z)]++),B.last_lit===B.lit_bufsize-1},t._tr_align=function(B){ye(B,2,3),he(B,M,ne),function(Z){Z.bi_valid===16?(De(Z,Z.bi_buf),Z.bi_buf=0,Z.bi_valid=0):8<=Z.bi_valid&&(Z.pending_buf[Z.pending++]=255&Z.bi_buf,Z.bi_buf>>=8,Z.bi_valid-=8)}(B)}},{"../utils/common":41}],53:[function(n,e,t){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,e,t){(function(i){(function(o,s){"use strict";if(!o.setImmediate){var l,d,f,p,g=1,y={},D=!1,b=o.document,C=Object.getPrototypeOf&&Object.getPrototypeOf(o);C=C&&C.setTimeout?C:o,l={}.toString.call(o.process)==="[object process]"?function(F){process.nextTick(function(){x(F)})}:function(){if(o.postMessage&&!o.importScripts){var F=!0,k=o.onmessage;return o.onmessage=function(){F=!1},o.postMessage("","*"),o.onmessage=k,F}}()?(p="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",M,!1):o.attachEvent("onmessage",M),function(F){o.postMessage(p+F,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(F){x(F.data)},function(F){f.port2.postMessage(F)}):b&&"onreadystatechange"in b.createElement("script")?(d=b.documentElement,function(F){var k=b.createElement("script");k.onreadystatechange=function(){x(F),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(F){setTimeout(x,0,F)},C.setImmediate=function(F){typeof F!="function"&&(F=new Function(""+F));for(var k=new Array(arguments.length-1),N=0;N<k.length;N++)k[N]=arguments[N+1];var q={callback:F,args:k};return y[g]=q,l(g),g++},C.clearImmediate=w}function w(F){delete y[F]}function x(F){if(D)setTimeout(x,0,F);else{var k=y[F];if(k){D=!0;try{(function(N){var q=N.callback,Q=N.args;switch(Q.length){case 0:q();break;case 1:q(Q[0]);break;case 2:q(Q[0],Q[1]);break;case 3:q(Q[0],Q[1],Q[2]);break;default:q.apply(s,Q)}})(k)}finally{w(F),D=!1}}}}function M(F){F.source===o&&typeof F.data=="string"&&F.data.indexOf(p)===0&&x(+F.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var uA=Be((Cd,uS)=>{"use strict";(function(n,e){typeof Cd=="object"&&typeof uS=="object"?uS.exports=e(aS(),lS(),dS()):typeof define=="function"&&define.amd?define(["konva","konmagic-wand-tool","jszip"],e):typeof Cd=="object"?Cd.dwv=e(aS(),lS(),dS()):n.dwv=e(n.Konva,n.MagicWand,n.JSZip)})(Cd,function(n,e,t){return function(){"use strict";var i={654:function(u){u.exports=t},944:function(u){u.exports=n},324:function(u){u.exports=e}},o={};function s(u){var r=o[u];if(r!==void 0)return r.exports;var a=o[u]={exports:{}};return i[u](a,a.exports,s),a.exports}s.n=function(u){var r=u&&u.__esModule?function(){return u.default}:function(){return u};return s.d(r,{a:r}),r},s.d=function(u,r){for(var a in r)s.o(r,a)&&!s.o(u,a)&&Object.defineProperty(u,a,{enumerable:!0,get:r[a]})},s.o=function(u,r){return Object.prototype.hasOwnProperty.call(u,r)},s.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})};var l={};s.r(l),s.d(l,{Annotation:function(){return Es},AnnotationGroup:function(){return Kd},AnnotationGroupFactory:function(){return hu},App:function(){return FR},AppOptions:function(){return PR},BLACK:function(){return N},ChangeSegmentColourCommand:function(){return LR},Circle:function(){return Bo},ColourMap:function(){return M},DataElement:function(){return $n},DeleteSegmentCommand:function(){return kR},DicomCode:function(){return lg},DicomData:function(){return Eg},DicomParser:function(){return Yp},DicomSRContent:function(){return Qi},DicomWriter:function(){return O5},DrawController:function(){return v_},DrawLayer:function(){return Ea},DrawShapeHandler:function(){return __},Ellipse:function(){return Vo},Geometry:function(){return Ca},Image:function(){return Ds},Index:function(){return d},LayerGroup:function(){return T_},MaskFactory:function(){return ug},MaskSegment:function(){return r_},MaskSegmentHelper:function(){return Ag},MaskSegmentViewHelper:function(){return NR},Matrix33:function(){return K},NumberRange:function(){return x5},Orientation:function(){return Dr},OverlayData:function(){return Y_},PlaneHelper:function(){return hg},Point:function(){return ce},Point2D:function(){return V},Point3D:function(){return $},Protractor:function(){return No},RGB:function(){return k},ROI:function(){return zi},Rectangle:function(){return Lo},RescaleSlopeAndIntercept:function(){return Hd},Scalar2D:function(){return VR},Scalar3D:function(){return BR},ScrollWheel:function(){return Yl},Size:function(){return Oo},Spacing:function(){return Po},Tag:function(){return Bn},TagValueExtractor:function(){return Ub},ToolConfig:function(){return OR},ToolboxController:function(){return O_},Vector3D:function(){return O},View:function(){return m_},ViewConfig:function(){return X_},ViewController:function(){return p_},ViewLayer:function(){return ri},WindowLevel:function(){return g},WriterRule:function(){return A5},addTagsToDictionary:function(){return le},buildMultipart:function(){return A},createImage:function(){return Q5},createMaskImage:function(){return W5},createView:function(){return $5},customUI:function(){return C_},decoderScripts:function(){return su},defaultPresets:function(){return y},defaults:function(){return Uo},getDefaultDicomSegJson:function(){return h_},getDicomSRContentItem:function(){return Ig},getDwvVersion:function(){return C5},getElementsFromJSONTags:function(){return Yd},getEllipseIndices:function(){return K5},getLayerDetailsFromEvent:function(){return Pt},getMousePoint:function(){return Tn},getOrientationName:function(){return Lb},getPixelDataTag:function(){return zp},getRectangleIndices:function(){return Z5},getReverseOrientation:function(){return Hp},getSRContent:function(){return uu},getTagFromKey:function(){return _r},getTouchPoints:function(){return fi},getTypedArray:function(){return _b},getUID:function(){return zb},hasDicomPrefix:function(){return w5},i18n:function(){return X},isEqualRgb:function(){return q},labToUintLab:function(){return Q},logger:function(){return p},luts:function(){return F},precisionRound:function(){return cn},srgbToCielab:function(){return Y},toolList:function(){return D_},toolOptions:function(){return Zl}});class d{#e;constructor(r){if(!r||r===void 0)throw new Error("Cannot create index with no values.");if(r.length===0)throw new Error("Cannot create index with empty values.");if(!r.every(function(a){return!isNaN(a)}))throw new Error("Cannot create index with non number values.");this.#e=r}get(r){return this.#e[r]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(r){return!!r&&this.length()===r.length()}equals(r){if(!this.canCompare(r))return!1;for(let a=0,c=this.length();a<c;++a)if(this.get(a)!==r.get(a))return!1;return!0}compare(r){if(!this.canCompare(r))return null;let a=[];for(let c=0,h=this.length();c<h;++c)this.get(c)!==r.get(c)&&a.push(c);return a}add(r){if(!this.canCompare(r))return null;let a=[];for(let c=0,h=this.length();c<h;++c)a.push(this.get(c)+r.get(c));return new d(a)}getWithNew2D(r,a){let c=[r,a];for(let h=2,m=this.length();h<m;++h)c.push(this.get(h));return new d(c)}}class f{#e;#t;#n;#i;constructor(r,a){if(this.#e=r,this.#t=r.isID(),this.#n=Math.pow(2,a),!this.#t){this.#i=new Float32Array(this.#n);for(let c=0;c<this.#n;++c)this.#i[c]=this.#e.apply(c)}}getRSI(){return this.#e}getLength(){return this.#n}getValue(r){return this.#t?r:this.#i[r]}}let p={levels:{TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},level:3,trace:function(u){this.level<=this.levels.TRACE&&console.trace(u)},debug:function(u){this.level<=this.levels.DEBUG&&console.debug(u)},info:function(u){this.level<=this.levels.INFO&&console.info(u)},warn:function(u){this.level<=this.levels.WARN&&console.warn(u)},error:function(u){this.level<=this.levels.ERROR&&console.error(u)}};class g{center;width;constructor(r,a){a<1&&(p.warn("Using minimum window width since input is not valid: "+a),a=1),this.center=r,this.width=a}equals(r){return r!=null&&this.center===r.center&&this.width===r.width}}let y={CT:{mediastinum:new g(40,400),lung:new g(-500,1500),bone:new g(500,2e3),brain:new g(40,80),head:new g(90,350)}};class D{#e;#t=0;#n=0;#i=255;#r=null;#o=null;#s=null;#a=null;constructor(r){this.#e=r,this.#c()}getWindowLevel(){return this.#e}#c(){let r=this.#e.center,a=this.#e.width,c=r+this.#t;this.#r=c-.5-(a-1)/2,this.#o=c-.5+(a-1)/2,this.#s=(this.#i-this.#n)/(a-1),this.#a=(-(c-.5)/(a-1)+.5)*(this.#i-this.#n)+this.#n}setSignedOffset(r){this.#t=r,this.#c()}apply(r){return r<=this.#r?this.#n:r>this.#o?this.#i:r*this.#s+this.#a}}class b{#e;#t;#n;#i=0;#r=!0;constructor(r,a,c){if(this.#e=r,a){let h=this.#e.getLength();this.#i=h/2}else this.#i=0;this.#r=c}getVoiLut(){return this.#t}getModalityLut(){return this.#e}setVoiLut(r){if(this.#t=r,this.#t.setSignedOffset(this.#e.getRSI().getSlope()*this.#i),this.#r){let a=this.#e.getLength();this.#n=new Uint8ClampedArray(a);for(let c=0;c<a;++c)this.#n[c]=this.#t.apply(this.#e.getValue(c))}}getValue(r){return this.#r?this.#n[r+this.#i]:Math.floor(this.#t.apply(r+this.#i))}}function C(u){let r=[];for(let a=0;a<256;++a)r.push(u(a));return r}function w(u){return u}function x(u){return 255-u}class M{red;green;blue;constructor(r,a,c){this.red=r,this.green=a,this.blue=c}}let F={plain:{red:C(w),green:C(w),blue:C(w)},invPlain:{red:C(x),green:C(x),blue:C(x)},rainbow:{blue:[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,247,239,231,223,215,207,199,191,183,175,167,159,151,143,135,127,119,111,103,95,87,79,71,63,55,47,39,31,23,15,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,120,128,136,144,152,160,168,176,184,192,200,208,216,224,232,240,248,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,253,251,249,247,245,243,241,239,237,235,233,231,229,227,225,223,221,219,217,215,213,211,209,207,205,203,201,199,197,195,193,192,189,186,183,180,177,174,171,168,165,162,159,156,153,150,147,144,141,138,135,132,129,126,123,120,117,114,111,108,105,102,99,96,93,90,87,84,81,78,75,72,69,66,63,60,57,54,51,48,45,42,39,36,33,30,27,24,21,18,15,12,9,6,3],red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,62,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,20,18,16,14,12,10,8,6,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255]},hot:{red:C(function(u){let r=3*u;return r>255?255:r}),green:C(function(u){let r=85.33333333333333,a=0;return u>=r&&(a=3*(u-r),a>255)?255:a}),blue:C(function(u){let r=85.33333333333333,a=0;return u>=2*r&&(a=3*(u-2*r),a>255)?255:a})},hot_iron:{red:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100,104,108,112,116,120,124,128,132,136,140,144,148,152,156,160,164,168,172,176,180,184,188,192,196,200,204,208,212,216,220,224,228,232,236,240,244,248,252,255]},pet:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,128,126,124,122,120,118,116,114,112,110,108,106,104,102,100,98,96,94,92,90,88,86,84,82,80,78,76,74,72,70,68,66,64,63,61,59,57,55,53,51,49,47,45,43,41,39,37,35,33,31,29,27,25,23,21,19,17,15,13,11,9,7,5,3,1,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,255],blue:[0,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,185,187,189,191,193,195,197,199,201,203,205,207,209,211,213,215,217,219,221,223,225,227,229,231,233,235,237,239,241,243,245,247,249,251,253,255,252,248,244,240,236,232,228,224,220,216,212,208,204,200,196,192,188,184,180,176,172,168,164,160,156,152,148,144,140,136,132,128,124,120,116,112,108,104,100,96,92,88,84,80,76,72,68,64,60,56,52,48,44,40,36,32,28,24,20,16,12,8,4,0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,85,89,93,97,101,105,109,113,117,121,125,129,133,137,141,145,149,153,157,161,165,170,174,178,182,186,190,194,198,202,206,210,214,218,222,226,230,234,238,242,246,250,255]},hot_metal_blue:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,52,55,57,59,62,64,66,69,71,74,76,78,81,83,85,88,90,93,96,99,102,105,108,111,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,166,169,172,175,178,181,184,187,190,194,198,201,205,209,213,217,221,224,228,232,236,240,244,247,251,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,6,8,9,11,13,15,17,19,21,23,24,26,28,30,32,34,36,38,40,41,43,45,47,49,51,53,55,56,58,60,62,64,66,68,70,72,73,75,77,79,81,83,85,87,88,90,92,94,96,98,100,102,104,105,107,109,111,113,115,117,119,120,122,124,126,128,130,132,134,136,137,139,141,143,145,147,149,151,152,154,156,158,160,162,164,166,168,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,201,203,205,207,209,211,213,215,216,218,220,222,224,226,228,229,231,233,235,237,239,240,242,244,246,248,250,251,253,255],blue:[0,2,4,6,8,10,12,14,16,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,179,181,183,184,186,188,190,192,194,196,198,200,197,194,191,188,185,182,179,176,174,171,168,165,162,159,156,153,150,144,138,132,126,121,115,109,103,97,91,85,79,74,68,62,56,50,47,44,41,38,35,32,29,26,24,21,18,15,12,9,6,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,6,9,12,15,18,21,24,26,29,32,35,38,41,44,47,50,53,56,59,62,65,68,71,74,76,79,82,85,88,91,94,97,100,103,106,109,112,115,118,121,124,126,129,132,135,138,141,144,147,150,153,156,159,162,165,168,171,174,176,179,182,185,188,191,194,197,200,203,206,210,213,216,219,223,226,229,232,236,239,242,245,249,252,255]},pet_20step:{red:[0,0,0,0,0,0,0,0,0,0,0,0,0,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,208,192,192,192,192,192,192,192,192,192,192,192,192,192,176,176,176,176,176,176,176,176,176,176,176,176,176,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255],green:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,112,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,96,96,96,96,96,96,96,96,96,96,96,96,96,144,144,144,144,144,144,144,144,144,144,144,144,144,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,224,208,208,208,208,208,208,208,208,208,208,208,208,208,176,176,176,176,176,176,176,176,176,176,176,176,176,144,144,144,144,144,144,144,144,144,144,144,144,96,96,96,96,96,96,96,96,96,96,96,96,96,48,48,48,48,48,48,48,48,48,48,48,48,48,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255],blue:[0,0,0,0,0,0,0,0,0,0,0,0,0,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,112,112,112,112,112,112,112,112,112,112,112,112,128,128,128,128,128,128,128,128,128,128,128,128,128,176,176,176,176,176,176,176,176,176,176,176,176,176,192,192,192,192,192,192,192,192,192,192,192,192,192,224,224,224,224,224,224,224,224,224,224,224,224,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,48,80,80,80,80,80,80,80,80,80,80,80,80,80,64,64,64,64,64,64,64,64,64,64,64,64,80,80,80,80,80,80,80,80,80,80,80,80,80,96,96,96,96,96,96,96,96,96,96,96,96,96,64,64,64,64,64,64,64,64,64,64,64,64,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255]}};class k{r;g;b;constructor(r,a,c){this.r=r,this.g=a,this.b=c}}let N={r:0,g:0,b:0};function q(u,r){return u!==null&&r!==null&&u!==void 0&&r!==void 0&&u.r===r.r&&u.g===r.g&&u.b===r.b}function Q(u){return{l:655.35*u.l,a:257*u.a+32896,b:257*u.b+32896}}let z={x:95.0489,y:100,z:108.884};function Y(u){return function(r){function a(m){let v=null;return v=m>.008856452?Math.pow(m,.333333333):7.787037037*m+.137931034,v}let c=z,h=a(r.y/c.y);return{l:116*h-16,a:500*(a(r.x/c.x)-h),b:200*(h-a(r.z/c.z))}}(function(r){function a(v){let S=null;return S=v<=.04045?v/12.92:Math.pow((v+.055)/1.055,2.4),S}let c=a(r.r/255),h=a(r.g/255),m=a(r.b/255);return{x:100*(.4124*c+.3576*h+.1805*m),y:100*(.2126*c+.7152*h+.0722*m),z:100*(.0193*c+.1192*h+.9505*m)}}(u))}function ne(u){let r={Yellow:"#ffff00",Red:"#ff0000",White:"#ffffff",Green:"#008000",Blue:"#0000ff",Lime:"#00ff00",Fuchsia:"#ff00ff",Black:"#000000"},a="#ffff00";return r[u]!==void 0&&(a=r[u]),a}class O{#e;#t;#n;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c}getX(){return this.#e}getY(){return this.#t}getZ(){return this.#n}equals(r){return r!==null&&this.#e===r.getX()&&this.#t===r.getY()&&this.#n===r.getZ()}toString(){return"("+this.#e+", "+this.#t+", "+this.#n+")"}norm(){return Math.sqrt(this.#e*this.#e+this.#t*this.#t+this.#n*this.#n)}crossProduct(r){return new O(this.#t*r.getZ()-r.getY()*this.#n,this.#n*r.getX()-r.getZ()*this.#e,this.#e*r.getY()-r.getX()*this.#t)}dotProduct(r){return this.#e*r.getX()+this.#t*r.getY()+this.#n*r.getZ()}isCodirectional(r){return this.dotProduct(r)>0}}Number.EPSILON;let j=1e-4;function T(u,r,a){return a===void 0&&(a=Number.EPSILON),Math.abs(u-r)<a}class K{#e;#t;constructor(r){this.#e=r}get(r,a){return this.#e[3*r+a]}getInverse(){return this.#t===void 0&&(this.#t=function(r){let a=r.get(0,0),c=r.get(0,1),h=r.get(0,2),m=r.get(1,0),v=r.get(1,1),S=r.get(1,2),_=r.get(2,0),E=r.get(2,1),I=r.get(2,2),R=v*I-S*E,P=S*_-m*I,U=m*E-v*_,H=a*R+c*P+h*U;if(H!==0)return H=1/H,new K([H*R,H*(h*E-c*I),H*(c*S-h*v),H*P,H*(a*I-h*_),H*(h*m-a*S),H*U,H*(c*_-a*E),H*(a*v-c*m)]);p.warn("Cannot invert 3*3 matrix with zero determinant.")}(this)),this.#t}equals(r,a){for(let c=0;c<3;++c)for(let h=0;h<3;++h)if(!T(this.get(c,h),r.get(c,h),a))return!1;return!0}toString(){let r="[";for(let a=0;a<3;++a){a!==0&&(r+=`, 
 `);for(let c=0;c<3;++c)c!==0&&(r+=", "),r+=this.get(a,c)}return r+="]",r}multiply(r){let a=[];for(let c=0;c<3;++c)for(let h=0;h<3;++h){let m=0;for(let v=0;v<3;++v)m+=this.get(c,v)*r.get(v,h);a.push(m)}return new K(a)}getAbs(){let r=[];for(let a=0;a<3;++a)for(let c=0;c<3;++c)r.push(Math.abs(this.get(a,c)));return new K(r)}multiplyArray3D(r){if(r.length!==3)throw new Error("Cannot multiply 3x3 matrix with non 3D array: "+r.length);let a=[];for(let c=0;c<3;++c){let h=0;for(let m=0;m<3;++m)h+=this.get(c,m)*r[m];a.push(h)}return a}multiplyVector3D(r){let a=this.multiplyArray3D([r.getX(),r.getY(),r.getZ()]);return new O(a[0],a[1],a[2])}multiplyPoint3D(r){let a=this.multiplyArray3D([r.getX(),r.getY(),r.getZ()]);return new $(a[0],a[1],a[2])}multiplyIndex3D(r){let a=this.multiplyArray3D(r.getValues());return new d(a)}getRowAbsMax(r){let a=[Math.abs(this.get(r,0)),Math.abs(this.get(r,1)),Math.abs(this.get(r,2))],c=Math.max.apply(null,a),h=a.indexOf(c);return{value:this.get(r,h),index:h}}getColAbsMax(r){let a=[Math.abs(this.get(0,r)),Math.abs(this.get(1,r)),Math.abs(this.get(2,r))],c=Math.max.apply(null,a),h=a.indexOf(c);return{value:this.get(h,r),index:h}}asOneAndZeros(){let r=[];for(let a=0;a<3;++a){let c=this.getRowAbsMax(a),h=c.value>0?1:-1;for(let m=0;m<3;++m)m===c.index?r.push(1*h):r.push(0)}return new K(r)}getThirdColMajorDirection(){return this.getColAbsMax(2).index}}function pe(){return new K([1,0,0,0,1,0,0,0,1])}function oe(u){return u.equals(pe())}class V{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getX(){return this.#e}getY(){return this.#t}getValues(){return[this.#e,this.#t]}getCentroid(){return this}equals(r){return r!=null&&this.#e===r.getX()&&this.#t===r.getY()}toString(){return"("+this.#e+", "+this.#t+")"}getDistance(r){let a=this.#e-r.getX(),c=this.#t-r.getY();return Math.sqrt(a*a+c*c)}}class ${#e;#t;#n;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c}getX(){return this.#e}getY(){return this.#t}getZ(){return this.#n}getValues(){return[this.#e,this.#t,this.#n]}equals(r){return r!==null&&this.#e===r.getX()&&this.#t===r.getY()&&this.#n===r.getZ()}isSimilar(r,a){return r!==null&&T(this.#e,r.getX(),a)&&T(this.#t,r.getY(),a)&&T(this.#n,r.getZ(),a)}toString(){return"("+this.#e+", "+this.#t+", "+this.#n+")"}getDistance(r){return Math.sqrt(this.#i(r))}#i(r){let a=this.#e-r.getX(),c=this.#t-r.getY(),h=this.#n-r.getZ();return a*a+c*c+h*h}getClosest(r){let a=0,c=this.#i(r[a]);for(let h=0;h<r.length;++h){let m=this.#i(r[h]);m<c&&(a=h,c=m)}return a}minus(r){return new O(this.#e-r.getX(),this.#t-r.getY(),this.#n-r.getZ())}}class ce{#e;constructor(r){if(!r||r===void 0)throw new Error("Cannot create point with no values.");if(r.length===0)throw new Error("Cannot create point with empty values.");if(!r.every(function(a){return!isNaN(a)}))throw new Error("Cannot create point with non number values.");this.#e=r}get(r){return this.#e[r]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}canCompare(r){return!!r&&this.length()===r.length()}equals(r){if(!this.canCompare(r))return!1;for(let a=0,c=this.length();a<c;++a)if(this.get(a)!==r.get(a))return!1;return!0}compare(r){if(!this.canCompare(r))return null;let a=[];for(let c=0,h=this.length();c<h;++c)this.get(c)!==r.get(c)&&a.push(c);return a}get3D(){return new $(this.get(0),this.get(1),this.get(2))}add(r){if(!this.canCompare(r))return null;let a=[],c=this.getValues(),h=r.getValues();for(let m=0;m<c.length;++m)a.push(c[m]+h[m]);return new ce(a)}mergeWith3D(r){let a=this.getValues();return a[0]=r.getX(),a[1]=r.getY(),a[2]=r.getZ(),new ce(a)}}let X={t(u){let r=u,a=u.split(".");return a.length===2&&a[0]==="unit"&&(r={mm:"mm",cm2:"cm\xB2",degree:"\xB0"}[a[1]]),r}};function W(u,r,a){if(u==null||r==null)return!1;let c=a>0?0|a:0;return u.substring(c,c+r.length)===r}function De(u,r){return u!=null&&r!=null&&u.substring(u.length-r.length)===r}function ye(u){let r=[];if(u==null)return r;let a=/{(\w+)}/g,c=a.exec(u);for(;c;)r.push(c[1]),c=a.exec(u);return r}function he(u){let r=null;if(u!=null&&u[0]!=="."){let a=u.toLowerCase().split(".");a.length!==1&&(r=a.pop(),/[a-z]/.test(r)&&!r.includes("/")||(r=null))}return r}function Ge(u){let r=new Uint8Array(u.length);for(let a=0,c=u.length;a<c;a++)r[a]=u.charCodeAt(a);return r}function cn(u,r){let a=Math.pow(10,r),c=.01/a;return Math.round(u*a+c)/a}function yt(u,r){if(r===void 0){r=[];for(let c=0;c<u.length;++c)r.push(c)}for(let c=0;c<r.length;++c)if(r[c]>=u.length)throw new Error("Non valid dimension for toStringId");let a="";for(let c=0;c<r.length;++c)c!==0&&(a+="_"),a+="#"+r[c]+"-"+u[r[c]];return a}function Ye(u,r){return u!==null&&r!==null&&u!==void 0&&r!==void 0&&$t(u.slice().sort(),r.slice().sort())}function $t(u,r){return u!==null&&r!==null&&u!==void 0&&r!==void 0&&u.length===r.length&&u.every(function(a,c){return a===r[c]})}function Dt(u){return String.fromCharCode.apply(String,u)}function Vn(u,r,a,c){(a===void 0||a<0||a>=u.length)&&(a=0),(c===void 0||c<=a||c>u.length)&&(c=u.length);for(let h=a;h<c;++h)if(r(u[h],h,u))return h}function Wn(u){return function(r,a,c){for(let h=0;h<u.length;++h)if(c[a+h]!==u[h])return!1;return!0}}function A(u,r){let a=`\r
`,c=0,h=[];for(let _=0;_<u.length;++_){let E="";_!==0&&(E+=a),E+="--"+r+a;let I=Object.keys(u[_]);for(let P=0;P<I.length;++P){let U=I[P];U!=="data"&&(E+=U+": "+u[_][U]+a)}E+=a;let R=Ge(E);h.push(R),c+=R.byteLength+u[_].data.byteLength}let m=Ge(`\r
--`+r+"--"+a),v=new Uint8Array(c+m.byteLength),S=0;for(let _=0;_<u.length;++_)v.set(h[_],S),S+=h[_].byteLength,v.set(new Uint8Array(u[_].data),S),S+=u[_].data.byteLength;return v.set(m,S),v}let de={"0000":{"0000":["UL","1","CommandGroupLength"],"0001":["UL","1","CommandLengthToEnd"],"0002":["UI","1","AffectedSOPClassUID"],"0003":["UI","1","RequestedSOPClassUID"],"0010":["SH","1","CommandRecognitionCode"],"0100":["US","1","CommandField"],"0110":["US","1","MessageID"],"0120":["US","1","MessageIDBeingRespondedTo"],"0200":["AE","1","Initiator"],"0300":["AE","1","Receiver"],"0400":["AE","1","FindLocation"],"0600":["AE","1","MoveDestination"],"0700":["US","1","Priority"],"0800":["US","1","CommandDataSetType"],"0850":["US","1","NumberOfMatches"],"0860":["US","1","ResponseSequenceNumber"],"0900":["US","1","Status"],"0901":["AT","1-n","OffendingElement"],"0902":["LO","1","ErrorComment"],"0903":["US","1","ErrorID"],1e3:["UI","1","AffectedSOPInstanceUID"],1001:["UI","1","RequestedSOPInstanceUID"],1002:["US","1","EventTypeID"],1005:["AT","1-n","AttributeIdentifierList"],1008:["US","1","ActionTypeID"],1020:["US","1","NumberOfRemainingSuboperations"],1021:["US","1","NumberOfCompletedSuboperations"],1022:["US","1","NumberOfFailedSuboperations"],1023:["US","1","NumberOfWarningSuboperations"],1030:["AE","1","MoveOriginatorApplicationEntityTitle"],1031:["US","1","MoveOriginatorMessageID"],4e3:["LT","1","DialogReceiver"],4010:["LT","1","TerminalType"],5010:["SH","1","MessageSetID"],5020:["SH","1","EndMessageID"],5110:["LT","1","DisplayFormat"],5120:["LT","1","PagePositionID"],5130:["CS","1","TextFormatID"],5140:["CS","1","NormalReverse"],5150:["CS","1","AddGrayScale"],5160:["CS","1","Borders"],5170:["IS","1","Copies"],5180:["CS","1","CommandMagnificationType"],5190:["CS","1","Erase"],"51A0":["CS","1","Print"],"51B0":["US","1-n","Overlays"]},"0002":{"0000":["UL","1","FileMetaInformationGroupLength"],"0001":["OB","1","FileMetaInformationVersion"],"0002":["UI","1","MediaStorageSOPClassUID"],"0003":["UI","1","MediaStorageSOPInstanceUID"],"0010":["UI","1","TransferSyntaxUID"],"0012":["UI","1","ImplementationClassUID"],"0013":["SH","1","ImplementationVersionName"],"0016":["AE","1","SourceApplicationEntityTitle"],"0017":["AE","1","SendingApplicationEntityTitle"],"0018":["AE","1","ReceivingApplicationEntityTitle"],"0026":["UR","1","SourcePresentationAddress"],"0027":["UR","1","SendingPresentationAddress"],"0028":["UR","1","ReceivingPresentationAddress"],"0031":["OB","1","RTVMetaInformationVersion"],"0032":["UI","1","RTVCommunicationSOPClassUID"],"0033":["UI","1","RTVCommunicationSOPInstanceUID"],"0035":["OB","1","RTVSourceIdentifier"],"0036":["OB","1","RTVFlowIdentifier"],"0037":["UL","1","RTVFlowRTPSamplingRate"],"0038":["FD","1","RTVFlowActualFrameDuration"],"0100":["UI","1","PrivateInformationCreatorUID"],"0102":["OB","1","PrivateInformation"]},"0004":{"0000":["UL","1","GenericGroupLength"],1130:["CS","1","FileSetID"],1141:["CS","1-8","FileSetDescriptorFileID"],1142:["CS","1","SpecificCharacterSetOfFileSetDescriptorFile"],1200:["UL","1","OffsetOfTheFirstDirectoryRecordOfTheRootDirectoryEntity"],1202:["UL","1","OffsetOfTheLastDirectoryRecordOfTheRootDirectoryEntity"],1212:["US","1","FileSetConsistencyFlag"],1220:["SQ","1","DirectoryRecordSequence"],1400:["UL","1","OffsetOfTheNextDirectoryRecord"],1410:["US","1","RecordInUseFlag"],1420:["UL","1","OffsetOfReferencedLowerLevelDirectoryEntity"],1430:["CS","1","DirectoryRecordType"],1432:["UI","1","PrivateRecordUID"],1500:["CS","1-8","ReferencedFileID"],1504:["UL","1","MRDRDirectoryRecordOffset"],1510:["UI","1","ReferencedSOPClassUIDInFile"],1511:["UI","1","ReferencedSOPInstanceUIDInFile"],1512:["UI","1","ReferencedTransferSyntaxUIDInFile"],"151A":["UI","1-n","ReferencedRelatedGeneralSOPClassUIDInFile"],1600:["UL","1","NumberOfReferences"]},"0008":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","LengthToEnd"],"0005":["CS","1-n","SpecificCharacterSet"],"0006":["SQ","1","LanguageCodeSequence"],"0008":["CS","2-n","ImageType"],"0010":["SH","1","RecognitionCode"],"0012":["DA","1","InstanceCreationDate"],"0013":["TM","1","InstanceCreationTime"],"0014":["UI","1","InstanceCreatorUID"],"0015":["DT","1","InstanceCoercionDateTime"],"0016":["UI","1","SOPClassUID"],"0018":["UI","1","SOPInstanceUID"],"001A":["UI","1-n","RelatedGeneralSOPClassUID"],"001B":["UI","1","OriginalSpecializedSOPClassUID"],"0020":["DA","1","StudyDate"],"0021":["DA","1","SeriesDate"],"0022":["DA","1","AcquisitionDate"],"0023":["DA","1","ContentDate"],"0024":["DA","1","OverlayDate"],"0025":["DA","1","CurveDate"],"002A":["DT","1","AcquisitionDateTime"],"0030":["TM","1","StudyTime"],"0031":["TM","1","SeriesTime"],"0032":["TM","1","AcquisitionTime"],"0033":["TM","1","ContentTime"],"0034":["TM","1","OverlayTime"],"0035":["TM","1","CurveTime"],"0040":["US","1","DataSetType"],"0041":["LO","1","DataSetSubtype"],"0042":["CS","1","NuclearMedicineSeriesType"],"0050":["SH","1","AccessionNumber"],"0051":["SQ","1","IssuerOfAccessionNumberSequence"],"0052":["CS","1","QueryRetrieveLevel"],"0053":["CS","1","QueryRetrieveView"],"0054":["AE","1-n","RetrieveAETitle"],"0055":["AE","1","StationAETitle"],"0056":["CS","1","InstanceAvailability"],"0058":["UI","1-n","FailedSOPInstanceUIDList"],"0060":["CS","1","Modality"],"0061":["CS","1-n","ModalitiesInStudy"],"0062":["UI","1-n","SOPClassesInStudy"],"0063":["SQ","1","AnatomicRegionsInStudyCodeSequence"],"0064":["CS","1","ConversionType"],"0068":["CS","1","PresentationIntentType"],"0070":["LO","1","Manufacturer"],"0080":["LO","1","InstitutionName"],"0081":["ST","1","InstitutionAddress"],"0082":["SQ","1","InstitutionCodeSequence"],"0090":["PN","1","ReferringPhysicianName"],"0092":["ST","1","ReferringPhysicianAddress"],"0094":["SH","1-n","ReferringPhysicianTelephoneNumbers"],"0096":["SQ","1","ReferringPhysicianIdentificationSequence"],"009C":["PN","1-n","ConsultingPhysicianName"],"009D":["SQ","1","ConsultingPhysicianIdentificationSequence"],"0100":["SH","1","CodeValue"],"0101":["LO","1","ExtendedCodeValue"],"0102":["SH","1","CodingSchemeDesignator"],"0103":["SH","1","CodingSchemeVersion"],"0104":["LO","1","CodeMeaning"],"0105":["CS","1","MappingResource"],"0106":["DT","1","ContextGroupVersion"],"0107":["DT","1","ContextGroupLocalVersion"],"0108":["LT","1","ExtendedCodeMeaning"],"0109":["SQ","1","CodingSchemeResourcesSequence"],"010A":["CS","1","CodingSchemeURLType"],"010B":["CS","1","ContextGroupExtensionFlag"],"010C":["UI","1","CodingSchemeUID"],"010D":["UI","1","ContextGroupExtensionCreatorUID"],"010E":["UR","1","CodingSchemeURL"],"010F":["CS","1","ContextIdentifier"],"0110":["SQ","1","CodingSchemeIdentificationSequence"],"0112":["LO","1","CodingSchemeRegistry"],"0114":["ST","1","CodingSchemeExternalID"],"0115":["ST","1","CodingSchemeName"],"0116":["ST","1","CodingSchemeResponsibleOrganization"],"0117":["UI","1","ContextUID"],"0118":["UI","1","MappingResourceUID"],"0119":["UC","1","LongCodeValue"],"0120":["UR","1","URNCodeValue"],"0121":["SQ","1","EquivalentCodeSequence"],"0122":["LO","1","MappingResourceName"],"0123":["SQ","1","ContextGroupIdentificationSequence"],"0124":["SQ","1","MappingResourceIdentificationSequence"],"0201":["SH","1","TimezoneOffsetFromUTC"],"0202":["","",""],"0220":["SQ","1","ResponsibleGroupCodeSequence"],"0221":["CS","1","EquipmentModality"],"0222":["LO","1","ManufacturerRelatedModelGroup"],"0300":["SQ","1","PrivateDataElementCharacteristicsSequence"],"0301":["US","1","PrivateGroupReference"],"0302":["LO","1","PrivateCreatorReference"],"0303":["CS","1","BlockIdentifyingInformationStatus"],"0304":["US","1-n","NonidentifyingPrivateElements"],"0305":["SQ","1","DeidentificationActionSequence"],"0306":["US","1-n","IdentifyingPrivateElements"],"0307":["CS","1","DeidentificationAction"],"0308":["US","1","PrivateDataElement"],"0309":["UL","1-3","PrivateDataElementValueMultiplicity"],"030A":["CS","1","PrivateDataElementValueRepresentation"],"030B":["UL","1-2","PrivateDataElementNumberOfItems"],"030C":["UC","1","PrivateDataElementName"],"030D":["UC","1","PrivateDataElementKeyword"],"030E":["UT","1","PrivateDataElementDescription"],"030F":["UT","1","PrivateDataElementEncoding"],"0310":["SQ","1","PrivateDataElementDefinitionSequence"],1e3:["AE","1","NetworkID"],1010:["SH","1","StationName"],1030:["LO","1","StudyDescription"],1032:["SQ","1","ProcedureCodeSequence"],"103E":["LO","1","SeriesDescription"],"103F":["SQ","1","SeriesDescriptionCodeSequence"],1040:["LO","1","InstitutionalDepartmentName"],1041:["SQ","1","InstitutionalDepartmentTypeCodeSequence"],1048:["PN","1-n","PhysiciansOfRecord"],1049:["SQ","1","PhysiciansOfRecordIdentificationSequence"],1050:["PN","1-n","PerformingPhysicianName"],1052:["SQ","1","PerformingPhysicianIdentificationSequence"],1060:["PN","1-n","NameOfPhysiciansReadingStudy"],1062:["SQ","1","PhysiciansReadingStudyIdentificationSequence"],1070:["PN","1-n","OperatorsName"],1072:["SQ","1","OperatorIdentificationSequence"],1080:["LO","1-n","AdmittingDiagnosesDescription"],1084:["SQ","1","AdmittingDiagnosesCodeSequence"],1090:["LO","1","ManufacturerModelName"],1100:["SQ","1","ReferencedResultsSequence"],1110:["SQ","1","ReferencedStudySequence"],1111:["SQ","1","ReferencedPerformedProcedureStepSequence"],1115:["SQ","1","ReferencedSeriesSequence"],1120:["SQ","1","ReferencedPatientSequence"],1125:["SQ","1","ReferencedVisitSequence"],1130:["SQ","1","ReferencedOverlaySequence"],1134:["SQ","1","ReferencedStereometricInstanceSequence"],"113A":["SQ","1","ReferencedWaveformSequence"],1140:["SQ","1","ReferencedImageSequence"],1145:["SQ","1","ReferencedCurveSequence"],"114A":["SQ","1","ReferencedInstanceSequence"],"114B":["SQ","1","ReferencedRealWorldValueMappingInstanceSequence"],1150:["UI","1","ReferencedSOPClassUID"],1155:["UI","1","ReferencedSOPInstanceUID"],1156:["SQ","1","DefinitionSourceSequence"],"115A":["UI","1-n","SOPClassesSupported"],1160:["IS","1-n","ReferencedFrameNumber"],1161:["UL","1-n","SimpleFrameList"],1162:["UL","3-3n","CalculatedFrameList"],1163:["FD","2","TimeRange"],1164:["SQ","1","FrameExtractionSequence"],1167:["UI","1","MultiFrameSourceSOPInstanceUID"],1190:["UR","1","RetrieveURL"],1195:["UI","1","TransactionUID"],1196:["US","1","WarningReason"],1197:["US","1","FailureReason"],1198:["SQ","1","FailedSOPSequence"],1199:["SQ","1","ReferencedSOPSequence"],"119A":["SQ","1","OtherFailuresSequence"],1200:["SQ","1","StudiesContainingOtherReferencedInstancesSequence"],1250:["SQ","1","RelatedSeriesSequence"],2110:["CS","1","LossyImageCompressionRetired"],2111:["ST","1","DerivationDescription"],2112:["SQ","1","SourceImageSequence"],2120:["SH","1","StageName"],2122:["IS","1","StageNumber"],2124:["IS","1","NumberOfStages"],2127:["SH","1","ViewName"],2128:["IS","1","ViewNumber"],2129:["IS","1","NumberOfEventTimers"],"212A":["IS","1","NumberOfViewsInStage"],2130:["DS","1-n","EventElapsedTimes"],2132:["LO","1-n","EventTimerNames"],2133:["SQ","1","EventTimerSequence"],2134:["FD","1","EventTimeOffset"],2135:["SQ","1","EventCodeSequence"],2142:["IS","1","StartTrim"],2143:["IS","1","StopTrim"],2144:["IS","1","RecommendedDisplayFrameRate"],2200:["CS","1","TransducerPosition"],2204:["CS","1","TransducerOrientation"],2208:["CS","1","AnatomicStructure"],2218:["SQ","1","AnatomicRegionSequence"],2220:["SQ","1","AnatomicRegionModifierSequence"],2228:["SQ","1","PrimaryAnatomicStructureSequence"],2229:["SQ","1","AnatomicStructureSpaceOrRegionSequence"],2230:["SQ","1","PrimaryAnatomicStructureModifierSequence"],2240:["SQ","1","TransducerPositionSequence"],2242:["SQ","1","TransducerPositionModifierSequence"],2244:["SQ","1","TransducerOrientationSequence"],2246:["SQ","1","TransducerOrientationModifierSequence"],2251:["SQ","1","AnatomicStructureSpaceOrRegionCodeSequenceTrial"],2253:["SQ","1","AnatomicPortalOfEntranceCodeSequenceTrial"],2255:["SQ","1","AnatomicApproachDirectionCodeSequenceTrial"],2256:["ST","1","AnatomicPerspectiveDescriptionTrial"],2257:["SQ","1","AnatomicPerspectiveCodeSequenceTrial"],2258:["ST","1","AnatomicLocationOfExaminingInstrumentDescriptionTrial"],2259:["SQ","1","AnatomicLocationOfExaminingInstrumentCodeSequenceTrial"],"225A":["SQ","1","AnatomicStructureSpaceOrRegionModifierCodeSequenceTrial"],"225C":["SQ","1","OnAxisBackgroundAnatomicStructureCodeSequenceTrial"],3001:["SQ","1","AlternateRepresentationSequence"],3002:["UI","1-n","AvailableTransferSyntaxUID"],3010:["UI","1-n","IrradiationEventUID"],3011:["SQ","1","SourceIrradiationEventSequence"],3012:["UI","1","RadiopharmaceuticalAdministrationEventUID"],4e3:["LT","1","IdentifyingComments"],9007:["CS","4","FrameType"],9092:["SQ","1","ReferencedImageEvidenceSequence"],9121:["SQ","1","ReferencedRawDataSequence"],9123:["UI","1","CreatorVersionUID"],9124:["SQ","1","DerivationImageSequence"],9154:["SQ","1","SourceImageEvidenceSequence"],9205:["CS","1","PixelPresentation"],9206:["CS","1","VolumetricProperties"],9207:["CS","1","VolumeBasedCalculationTechnique"],9208:["CS","1","ComplexImageComponent"],9209:["CS","1","AcquisitionContrast"],9215:["SQ","1","DerivationCodeSequence"],9237:["SQ","1","ReferencedPresentationStateSequence"],9410:["SQ","1","ReferencedOtherPlaneSequence"],9458:["SQ","1","FrameDisplaySequence"],9459:["FL","1","RecommendedDisplayFrameRateInFloat"],9460:["CS","1","SkipFrameRangeFlag"]},"0010":{"0000":["UL","1","GenericGroupLength"],"0010":["PN","1","PatientName"],"0020":["LO","1","PatientID"],"0021":["LO","1","IssuerOfPatientID"],"0022":["CS","1","TypeOfPatientID"],"0024":["SQ","1","IssuerOfPatientIDQualifiersSequence"],"0026":["SQ","1","SourcePatientGroupIdentificationSequence"],"0027":["SQ","1","GroupOfPatientsIdentificationSequence"],"0028":["US","3","SubjectRelativePositionInImage"],"0030":["DA","1","PatientBirthDate"],"0032":["TM","1","PatientBirthTime"],"0033":["LO","1","PatientBirthDateInAlternativeCalendar"],"0034":["LO","1","PatientDeathDateInAlternativeCalendar"],"0035":["CS","1","PatientAlternativeCalendar"],"0040":["CS","1","PatientSex"],"0050":["SQ","1","PatientInsurancePlanCodeSequence"],"0101":["SQ","1","PatientPrimaryLanguageCodeSequence"],"0102":["SQ","1","PatientPrimaryLanguageModifierCodeSequence"],"0200":["CS","1","QualityControlSubject"],"0201":["SQ","1","QualityControlSubjectTypeCodeSequence"],"0212":["UC","1","StrainDescription"],"0213":["LO","1","StrainNomenclature"],"0214":["LO","1","StrainStockNumber"],"0215":["SQ","1","StrainSourceRegistryCodeSequence"],"0216":["SQ","1","StrainStockSequence"],"0217":["LO","1","StrainSource"],"0218":["UT","1","StrainAdditionalInformation"],"0219":["SQ","1","StrainCodeSequence"],"0221":["SQ","1","GeneticModificationsSequence"],"0222":["UC","1","GeneticModificationsDescription"],"0223":["LO","1","GeneticModificationsNomenclature"],"0229":["SQ","1","GeneticModificationsCodeSequence"],1e3:["LO","1-n","OtherPatientIDs"],1001:["PN","1-n","OtherPatientNames"],1002:["SQ","1","OtherPatientIDsSequence"],1005:["PN","1","PatientBirthName"],1010:["AS","1","PatientAge"],1020:["DS","1","PatientSize"],1021:["SQ","1","PatientSizeCodeSequence"],1022:["DS","1","PatientBodyMassIndex"],1023:["DS","1","MeasuredAPDimension"],1024:["DS","1","MeasuredLateralDimension"],1030:["DS","1","PatientWeight"],1040:["LO","1","PatientAddress"],1050:["LO","1-n","InsurancePlanIdentification"],1060:["PN","1","PatientMotherBirthName"],1080:["LO","1","MilitaryRank"],1081:["LO","1","BranchOfService"],1090:["LO","1","MedicalRecordLocator"],1100:["SQ","1","ReferencedPatientPhotoSequence"],2e3:["LO","1-n","MedicalAlerts"],2110:["LO","1-n","Allergies"],2150:["LO","1","CountryOfResidence"],2152:["LO","1","RegionOfResidence"],2154:["SH","1-n","PatientTelephoneNumbers"],2155:["LT","1","PatientTelecomInformation"],2160:["SH","1","EthnicGroup"],2180:["SH","1","Occupation"],"21A0":["CS","1","SmokingStatus"],"21B0":["LT","1","AdditionalPatientHistory"],"21C0":["US","1","PregnancyStatus"],"21D0":["DA","1","LastMenstrualDate"],"21F0":["LO","1","PatientReligiousPreference"],2201:["LO","1","PatientSpeciesDescription"],2202:["SQ","1","PatientSpeciesCodeSequence"],2203:["CS","1","PatientSexNeutered"],2210:["CS","1","AnatomicalOrientationType"],2292:["LO","1","PatientBreedDescription"],2293:["SQ","1","PatientBreedCodeSequence"],2294:["SQ","1","BreedRegistrationSequence"],2295:["LO","1","BreedRegistrationNumber"],2296:["SQ","1","BreedRegistryCodeSequence"],2297:["PN","1","ResponsiblePerson"],2298:["CS","1","ResponsiblePersonRole"],2299:["LO","1","ResponsibleOrganization"],4e3:["LT","1","PatientComments"],9431:["FL","1","ExaminedBodyThickness"]},"0012":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ClinicalTrialSponsorName"],"0020":["LO","1","ClinicalTrialProtocolID"],"0021":["LO","1","ClinicalTrialProtocolName"],"0030":["LO","1","ClinicalTrialSiteID"],"0031":["LO","1","ClinicalTrialSiteName"],"0040":["LO","1","ClinicalTrialSubjectID"],"0042":["LO","1","ClinicalTrialSubjectReadingID"],"0050":["LO","1","ClinicalTrialTimePointID"],"0051":["ST","1","ClinicalTrialTimePointDescription"],"0052":["FD","1","LongitudinalTemporalOffsetFromEvent"],"0053":["CS","1","LongitudinalTemporalEventType"],"0060":["LO","1","ClinicalTrialCoordinatingCenterName"],"0062":["CS","1","PatientIdentityRemoved"],"0063":["LO","1-n","DeidentificationMethod"],"0064":["SQ","1","DeidentificationMethodCodeSequence"],"0071":["LO","1","ClinicalTrialSeriesID"],"0072":["LO","1","ClinicalTrialSeriesDescription"],"0081":["LO","1","ClinicalTrialProtocolEthicsCommitteeName"],"0082":["LO","1","ClinicalTrialProtocolEthicsCommitteeApprovalNumber"],"0083":["SQ","1","ConsentForClinicalTrialUseSequence"],"0084":["CS","1","DistributionType"],"0085":["CS","1","ConsentForDistributionFlag"],"0086":["DA","1","EthicsCommitteeApprovalEffectivenessStartDate"],"0087":["DA","1","EthicsCommitteeApprovalEffectivenessEndDate"]},"0014":{"0000":["UL","1","GenericGroupLength"],"0023":["ST","1","CADFileFormat"],"0024":["ST","1","ComponentReferenceSystem"],"0025":["ST","1","ComponentManufacturingProcedure"],"0028":["ST","1","ComponentManufacturer"],"0030":["DS","1-n","MaterialThickness"],"0032":["DS","1-n","MaterialPipeDiameter"],"0034":["DS","1-n","MaterialIsolationDiameter"],"0042":["ST","1","MaterialGrade"],"0044":["ST","1","MaterialPropertiesDescription"],"0045":["ST","1","MaterialPropertiesFileFormatRetired"],"0046":["LT","1","MaterialNotes"],"0050":["CS","1","ComponentShape"],"0052":["CS","1","CurvatureType"],"0054":["DS","1","OuterDiameter"],"0056":["DS","1","InnerDiameter"],"0100":["LO","1-n","ComponentWelderIDs"],"0101":["CS","1","SecondaryApprovalStatus"],"0102":["DA","1","SecondaryReviewDate"],"0103":["TM","1","SecondaryReviewTime"],"0104":["PN","1","SecondaryReviewerName"],"0105":["ST","1","RepairID"],"0106":["SQ","1","MultipleComponentApprovalSequence"],"0107":["CS","1-n","OtherApprovalStatus"],"0108":["CS","1-n","OtherSecondaryApprovalStatus"],1010:["ST","1","ActualEnvironmentalConditions"],1020:["DA","1","ExpiryDate"],1040:["ST","1","EnvironmentalConditions"],2002:["SQ","1","EvaluatorSequence"],2004:["IS","1","EvaluatorNumber"],2006:["PN","1","EvaluatorName"],2008:["IS","1","EvaluationAttempt"],2012:["SQ","1","IndicationSequence"],2014:["IS","1","IndicationNumber"],2016:["SH","1","IndicationLabel"],2018:["ST","1","IndicationDescription"],"201A":["CS","1-n","IndicationType"],"201C":["CS","1","IndicationDisposition"],"201E":["SQ","1","IndicationROISequence"],2030:["SQ","1","IndicationPhysicalPropertySequence"],2032:["SH","1","PropertyLabel"],2202:["IS","1","CoordinateSystemNumberOfAxes"],2204:["SQ","1","CoordinateSystemAxesSequence"],2206:["ST","1","CoordinateSystemAxisDescription"],2208:["CS","1","CoordinateSystemDataSetMapping"],"220A":["IS","1","CoordinateSystemAxisNumber"],"220C":["CS","1","CoordinateSystemAxisType"],"220E":["CS","1","CoordinateSystemAxisUnits"],2210:["OB","1","CoordinateSystemAxisValues"],2220:["SQ","1","CoordinateSystemTransformSequence"],2222:["ST","1","TransformDescription"],2224:["IS","1","TransformNumberOfAxes"],2226:["IS","1-n","TransformOrderOfAxes"],2228:["CS","1","TransformedAxisUnits"],"222A":["DS","1-n","CoordinateSystemTransformRotationAndScaleMatrix"],"222C":["DS","1-n","CoordinateSystemTransformTranslationMatrix"],3011:["DS","1","InternalDetectorFrameTime"],3012:["DS","1","NumberOfFramesIntegrated"],3020:["SQ","1","DetectorTemperatureSequence"],3022:["ST","1","SensorName"],3024:["DS","1","HorizontalOffsetOfSensor"],3026:["DS","1","VerticalOffsetOfSensor"],3028:["DS","1","SensorTemperature"],3040:["SQ","1","DarkCurrentSequence"],3050:["ox","1","DarkCurrentCounts"],3060:["SQ","1","GainCorrectionReferenceSequence"],3070:["ox","1","AirCounts"],3071:["DS","1","KVUsedInGainCalibration"],3072:["DS","1","MAUsedInGainCalibration"],3073:["DS","1","NumberOfFramesUsedForIntegration"],3074:["LO","1","FilterMaterialUsedInGainCalibration"],3075:["DS","1","FilterThicknessUsedInGainCalibration"],3076:["DA","1","DateOfGainCalibration"],3077:["TM","1","TimeOfGainCalibration"],3080:["OB","1","BadPixelImage"],3099:["LT","1","CalibrationNotes"],3100:["LT","1","LinearityCorrectionTechnique"],3101:["LT","1","BeamHardeningCorrectionTechnique"],4002:["SQ","1","PulserEquipmentSequence"],4004:["CS","1","PulserType"],4006:["LT","1","PulserNotes"],4008:["SQ","1","ReceiverEquipmentSequence"],"400A":["CS","1","AmplifierType"],"400C":["LT","1","ReceiverNotes"],"400E":["SQ","1","PreAmplifierEquipmentSequence"],"400F":["LT","1","PreAmplifierNotes"],4010:["SQ","1","TransmitTransducerSequence"],4011:["SQ","1","ReceiveTransducerSequence"],4012:["US","1","NumberOfElements"],4013:["CS","1","ElementShape"],4014:["DS","1","ElementDimensionA"],4015:["DS","1","ElementDimensionB"],4016:["DS","1","ElementPitchA"],4017:["DS","1","MeasuredBeamDimensionA"],4018:["DS","1","MeasuredBeamDimensionB"],4019:["DS","1","LocationOfMeasuredBeamDiameter"],"401A":["DS","1","NominalFrequency"],"401B":["DS","1","MeasuredCenterFrequency"],"401C":["DS","1","MeasuredBandwidth"],"401D":["DS","1","ElementPitchB"],4020:["SQ","1","PulserSettingsSequence"],4022:["DS","1","PulseWidth"],4024:["DS","1","ExcitationFrequency"],4026:["CS","1","ModulationType"],4028:["DS","1","Damping"],4030:["SQ","1","ReceiverSettingsSequence"],4031:["DS","1","AcquiredSoundpathLength"],4032:["CS","1","AcquisitionCompressionType"],4033:["IS","1","AcquisitionSampleSize"],4034:["DS","1","RectifierSmoothing"],4035:["SQ","1","DACSequence"],4036:["CS","1","DACType"],4038:["DS","1-n","DACGainPoints"],"403A":["DS","1-n","DACTimePoints"],"403C":["DS","1-n","DACAmplitude"],4040:["SQ","1","PreAmplifierSettingsSequence"],4050:["SQ","1","TransmitTransducerSettingsSequence"],4051:["SQ","1","ReceiveTransducerSettingsSequence"],4052:["DS","1","IncidentAngle"],4054:["ST","1","CouplingTechnique"],4056:["ST","1","CouplingMedium"],4057:["DS","1","CouplingVelocity"],4058:["DS","1","ProbeCenterLocationX"],4059:["DS","1","ProbeCenterLocationZ"],"405A":["DS","1","SoundPathLength"],"405C":["ST","1","DelayLawIdentifier"],4060:["SQ","1","GateSettingsSequence"],4062:["DS","1","GateThreshold"],4064:["DS","1","VelocityOfSound"],4070:["SQ","1","CalibrationSettingsSequence"],4072:["ST","1","CalibrationProcedure"],4074:["SH","1","ProcedureVersion"],4076:["DA","1","ProcedureCreationDate"],4078:["DA","1","ProcedureExpirationDate"],"407A":["DA","1","ProcedureLastModifiedDate"],"407C":["TM","1-n","CalibrationTime"],"407E":["DA","1-n","CalibrationDate"],4080:["SQ","1","ProbeDriveEquipmentSequence"],4081:["CS","1","DriveType"],4082:["LT","1","ProbeDriveNotes"],4083:["SQ","1","DriveProbeSequence"],4084:["DS","1","ProbeInductance"],4085:["DS","1","ProbeResistance"],4086:["SQ","1","ReceiveProbeSequence"],4087:["SQ","1","ProbeDriveSettingsSequence"],4088:["DS","1","BridgeResistors"],4089:["DS","1","ProbeOrientationAngle"],"408B":["DS","1","UserSelectedGainY"],"408C":["DS","1","UserSelectedPhase"],"408D":["DS","1","UserSelectedOffsetX"],"408E":["DS","1","UserSelectedOffsetY"],4091:["SQ","1","ChannelSettingsSequence"],4092:["DS","1","ChannelThreshold"],"409A":["SQ","1","ScannerSettingsSequence"],"409B":["ST","1","ScanProcedure"],"409C":["DS","1","TranslationRateX"],"409D":["DS","1","TranslationRateY"],"409F":["DS","1","ChannelOverlap"],"40A0":["LO","1-n","ImageQualityIndicatorType"],"40A1":["LO","1-n","ImageQualityIndicatorMaterial"],"40A2":["LO","1-n","ImageQualityIndicatorSize"],5002:["IS","1","LINACEnergy"],5004:["IS","1","LINACOutput"],5100:["US","1","ActiveAperture"],5101:["DS","1","TotalAperture"],5102:["DS","1","ApertureElevation"],5103:["DS","1","MainLobeAngle"],5104:["DS","1","MainRoofAngle"],5105:["CS","1","ConnectorType"],5106:["SH","1","WedgeModelNumber"],5107:["DS","1","WedgeAngleFloat"],5108:["DS","1","WedgeRoofAngle"],5109:["CS","1","WedgeElement1Position"],"510A":["DS","1","WedgeMaterialVelocity"],"510B":["SH","1","WedgeMaterial"],"510C":["DS","1","WedgeOffsetZ"],"510D":["DS","1","WedgeOriginOffsetX"],"510E":["DS","1","WedgeTimeDelay"],"510F":["SH","1","WedgeName"],5110:["SH","1","WedgeManufacturerName"],5111:["LO","1","WedgeDescription"],5112:["DS","1","NominalBeamAngle"],5113:["DS","1","WedgeOffsetX"],5114:["DS","1","WedgeOffsetY"],5115:["DS","1","WedgeTotalLength"],5116:["DS","1","WedgeInContactLength"],5117:["DS","1","WedgeFrontGap"],5118:["DS","1","WedgeTotalHeight"],5119:["DS","1","WedgeFrontHeight"],"511A":["DS","1","WedgeRearHeight"],"511B":["DS","1","WedgeTotalWidth"],"511C":["DS","1","WedgeInContactWidth"],"511D":["DS","1","WedgeChamferHeight"],"511E":["CS","1","WedgeCurve"],"511F":["DS","1","RadiusAlongWedge"]},"0016":{"0000":["UL","1","GenericGroupLength"],"0001":["DS","1","WhitePoint"],"0002":["DS","3","PrimaryChromaticities"],"0003":["UT","1","BatteryLevel"],"0004":["DS","1","ExposureTimeInSeconds"],"0005":["DS","1","FNumber"],"0006":["IS","1","OECFRows"],"0007":["IS","1","OECFColumns"],"0008":["UC","1-n","OECFColumnNames"],"0009":["DS","1-n","OECFValues"],"000A":["IS","1","SpatialFrequencyResponseRows"],"000B":["IS","1","SpatialFrequencyResponseColumns"],"000C":["UC","1-n","SpatialFrequencyResponseColumnNames"],"000D":["DS","1-n","SpatialFrequencyResponseValues"],"000E":["IS","1","ColorFilterArrayPatternRows"],"000F":["IS","1","ColorFilterArrayPatternColumns"],"0010":["DS","1-n","ColorFilterArrayPatternValues"],"0011":["US","1","FlashFiringStatus"],"0012":["US","1","FlashReturnStatus"],"0013":["US","1","FlashMode"],"0014":["US","1","FlashFunctionPresent"],"0015":["US","1","FlashRedEyeMode"],"0016":["US","1","ExposureProgram"],"0017":["UT","1","SpectralSensitivity"],"0018":["IS","1","PhotographicSensitivity"],"0019":["IS","1","SelfTimerMode"],"001A":["US","1","SensitivityType"],"001B":["IS","1","StandardOutputSensitivity"],"001C":["IS","1","RecommendedExposureIndex"],"001D":["IS","1","ISOSpeed"],"001E":["IS","1","ISOSpeedLatitudeyyy"],"001F":["IS","1","ISOSpeedLatitudezzz"],"0020":["UT","1","EXIFVersion"],"0021":["DS","1","ShutterSpeedValue"],"0022":["DS","1","ApertureValue"],"0023":["DS","1","BrightnessValue"],"0024":["DS","1","ExposureBiasValue"],"0025":["DS","1","MaxApertureValue"],"0026":["DS","1","SubjectDistance"],"0027":["US","1","MeteringMode"],"0028":["US","1","LightSource"],"0029":["DS","1","FocalLength"],"002A":["IS","2-4","SubjectArea"],"002B":["OB","1","MakerNote"],"0030":["DS","1","Temperature"],"0031":["DS","1","Humidity"],"0032":["DS","1","Pressure"],"0033":["DS","1","WaterDepth"],"0034":["DS","1","Acceleration"],"0035":["DS","1","CameraElevationAngle"],"0036":["DS","1-2","FlashEnergy"],"0037":["IS","2","SubjectLocation"],"0038":["DS","1","PhotographicExposureIndex"],"0039":["US","1","SensingMethod"],"003A":["US","1","FileSource"],"003B":["US","1","SceneType"],"0041":["US","1","CustomRendered"],"0042":["US","1","ExposureMode"],"0043":["US","1","WhiteBalance"],"0044":["DS","1","DigitalZoomRatio"],"0045":["IS","1","FocalLengthIn35mmFilm"],"0046":["US","1","SceneCaptureType"],"0047":["US","1","GainControl"],"0048":["US","1","Contrast"],"0049":["US","1","Saturation"],"004A":["US","1","Sharpness"],"004B":["OB","1","DeviceSettingDescription"],"004C":["US","1","SubjectDistanceRange"],"004D":["UT","1","CameraOwnerName"],"004E":["DS","4","LensSpecification"],"004F":["UT","1","LensMake"],"0050":["UT","1","LensModel"],"0051":["UT","1","LensSerialNumber"],"0061":["CS","1","InteroperabilityIndex"],"0062":["OB","1","InteroperabilityVersion"],"0070":["OB","1","GPSVersionID"],"0071":["CS","1","GPSLatitudeRef"],"0072":["DS","3","GPSLatitude"],"0073":["CS","1","GPSLongitudeRef"],"0074":["DS","3","GPSLongitude"],"0075":["US","1","GPSAltitudeRef"],"0076":["DS","1","GPSAltitude"],"0077":["DT","1","GPSTimeStamp"],"0078":["UT","1","GPSSatellites"],"0079":["CS","1","GPSStatus"],"007A":["CS","1","GPSMeasureMode"],"007B":["DS","1","GPSDOP"],"007C":["CS","1","GPSSpeedRef"],"007D":["DS","1","GPSSpeed"],"007E":["CS","1","GPSTrackRef"],"007F":["DS","1","GPSTrack"],"0080":["CS","1","GPSImgDirectionRef"],"0081":["DS","1","GPSImgDirection"],"0082":["UT","1","GPSMapDatum"],"0083":["CS","1","GPSDestLatitudeRef"],"0084":["DS","3","GPSDestLatitude"],"0085":["CS","1","GPSDestLongitudeRef"],"0086":["DS","3","GPSDestLongitude"],"0087":["CS","1","GPSDestBearingRef"],"0088":["DS","1","GPSDestBearing"],"0089":["CS","1","GPSDestDistanceRef"],"008A":["DS","1","GPSDestDistance"],"008B":["OB","1","GPSProcessingMethod"],"008C":["OB","1","GPSAreaInformation"],"008D":["DT","1","GPSDateStamp"],"008E":["IS","1","GPSDifferential"],1001:["CS","1","LightSourcePolarization"],1002:["DS","1","EmitterColorTemperature"],1003:["CS","1","ContactMethod"],1004:["CS","1-n","ImmersionMedia"],1005:["DS","1","OpticalMagnificationFactor"]},"0018":{"0000":["UL","1","GenericGroupLength"],"0010":["LO","1","ContrastBolusAgent"],"0012":["SQ","1","ContrastBolusAgentSequence"],"0013":["FL","1","ContrastBolusT1Relaxivity"],"0014":["SQ","1","ContrastBolusAdministrationRouteSequence"],"0015":["CS","1","BodyPartExamined"],"0020":["CS","1-n","ScanningSequence"],"0021":["CS","1-n","SequenceVariant"],"0022":["CS","1-n","ScanOptions"],"0023":["CS","1","MRAcquisitionType"],"0024":["SH","1","SequenceName"],"0025":["CS","1","AngioFlag"],"0026":["SQ","1","InterventionDrugInformationSequence"],"0027":["TM","1","InterventionDrugStopTime"],"0028":["DS","1","InterventionDrugDose"],"0029":["SQ","1","InterventionDrugCodeSequence"],"002A":["SQ","1","AdditionalDrugSequence"],"0030":["LO","1-n","Radionuclide"],"0031":["LO","1","Radiopharmaceutical"],"0032":["DS","1","EnergyWindowCenterline"],"0033":["DS","1-n","EnergyWindowTotalWidth"],"0034":["LO","1","InterventionDrugName"],"0035":["TM","1","InterventionDrugStartTime"],"0036":["SQ","1","InterventionSequence"],"0037":["CS","1","TherapyType"],"0038":["CS","1","InterventionStatus"],"0039":["CS","1","TherapyDescription"],"003A":["ST","1","InterventionDescription"],"0040":["IS","1","CineRate"],"0042":["CS","1","InitialCineRunState"],"0050":["DS","1","SliceThickness"],"0060":["DS","1","KVP"],"0061":["DS","1",""],"0070":["IS","1","CountsAccumulated"],"0071":["CS","1","AcquisitionTerminationCondition"],"0072":["DS","1","EffectiveDuration"],"0073":["CS","1","AcquisitionStartCondition"],"0074":["IS","1","AcquisitionStartConditionData"],"0075":["IS","1","AcquisitionTerminationConditionData"],"0080":["DS","1","RepetitionTime"],"0081":["DS","1","EchoTime"],"0082":["DS","1","InversionTime"],"0083":["DS","1","NumberOfAverages"],"0084":["DS","1","ImagingFrequency"],"0085":["SH","1","ImagedNucleus"],"0086":["IS","1-n","EchoNumbers"],"0087":["DS","1","MagneticFieldStrength"],"0088":["DS","1","SpacingBetweenSlices"],"0089":["IS","1","NumberOfPhaseEncodingSteps"],"0090":["DS","1","DataCollectionDiameter"],"0091":["IS","1","EchoTrainLength"],"0093":["DS","1","PercentSampling"],"0094":["DS","1","PercentPhaseFieldOfView"],"0095":["DS","1","PixelBandwidth"],1e3:["LO","1","DeviceSerialNumber"],1002:["UI","1","DeviceUID"],1003:["LO","1","DeviceID"],1004:["LO","1","PlateID"],1005:["LO","1","GeneratorID"],1006:["LO","1","GridID"],1007:["LO","1","CassetteID"],1008:["LO","1","GantryID"],1009:["UT","1","UniqueDeviceIdentifier"],"100A":["SQ","1","UDISequence"],"100B":["UI","1-n","ManufacturerDeviceClassUID"],1010:["LO","1","SecondaryCaptureDeviceID"],1011:["LO","1","HardcopyCreationDeviceID"],1012:["DA","1","DateOfSecondaryCapture"],1014:["TM","1","TimeOfSecondaryCapture"],1016:["LO","1","SecondaryCaptureDeviceManufacturer"],1017:["LO","1","HardcopyDeviceManufacturer"],1018:["LO","1","SecondaryCaptureDeviceManufacturerModelName"],1019:["LO","1-n","SecondaryCaptureDeviceSoftwareVersions"],"101A":["LO","1-n","HardcopyDeviceSoftwareVersion"],"101B":["LO","1","HardcopyDeviceManufacturerModelName"],1020:["LO","1-n","SoftwareVersions"],1022:["SH","1","VideoImageFormatAcquired"],1023:["LO","1","DigitalImageFormatAcquired"],1030:["LO","1","ProtocolName"],1040:["LO","1","ContrastBolusRoute"],1041:["DS","1","ContrastBolusVolume"],1042:["TM","1","ContrastBolusStartTime"],1043:["TM","1","ContrastBolusStopTime"],1044:["DS","1","ContrastBolusTotalDose"],1045:["IS","1","SyringeCounts"],1046:["DS","1-n","ContrastFlowRate"],1047:["DS","1-n","ContrastFlowDuration"],1048:["CS","1","ContrastBolusIngredient"],1049:["DS","1","ContrastBolusIngredientConcentration"],1050:["DS","1","SpatialResolution"],1060:["DS","1","TriggerTime"],1061:["LO","1","TriggerSourceOrType"],1062:["IS","1","NominalInterval"],1063:["DS","1","FrameTime"],1064:["LO","1","CardiacFramingType"],1065:["DS","1-n","FrameTimeVector"],1066:["DS","1","FrameDelay"],1067:["DS","1","ImageTriggerDelay"],1068:["DS","1","MultiplexGroupTimeOffset"],1069:["DS","1","TriggerTimeOffset"],"106A":["CS","1","SynchronizationTrigger"],"106C":["US","2","SynchronizationChannel"],"106E":["UL","1","TriggerSamplePosition"],1070:["LO","1","RadiopharmaceuticalRoute"],1071:["DS","1","RadiopharmaceuticalVolume"],1072:["TM","1","RadiopharmaceuticalStartTime"],1073:["TM","1","RadiopharmaceuticalStopTime"],1074:["DS","1","RadionuclideTotalDose"],1075:["DS","1","RadionuclideHalfLife"],1076:["DS","1","RadionuclidePositronFraction"],1077:["DS","1","RadiopharmaceuticalSpecificActivity"],1078:["DT","1","RadiopharmaceuticalStartDateTime"],1079:["DT","1","RadiopharmaceuticalStopDateTime"],1080:["CS","1","BeatRejectionFlag"],1081:["IS","1","LowRRValue"],1082:["IS","1","HighRRValue"],1083:["IS","1","IntervalsAcquired"],1084:["IS","1","IntervalsRejected"],1085:["LO","1","PVCRejection"],1086:["IS","1","SkipBeats"],1088:["IS","1","HeartRate"],1090:["IS","1","CardiacNumberOfImages"],1094:["IS","1","TriggerWindow"],1100:["DS","1","ReconstructionDiameter"],1110:["DS","1","DistanceSourceToDetector"],1111:["DS","1","DistanceSourceToPatient"],1114:["DS","1","EstimatedRadiographicMagnificationFactor"],1120:["DS","1","GantryDetectorTilt"],1121:["DS","1","GantryDetectorSlew"],1130:["DS","1","TableHeight"],1131:["DS","1","TableTraverse"],1134:["CS","1","TableMotion"],1135:["DS","1-n","TableVerticalIncrement"],1136:["DS","1-n","TableLateralIncrement"],1137:["DS","1-n","TableLongitudinalIncrement"],1138:["DS","1","TableAngle"],"113A":["CS","1","TableType"],1140:["CS","1","RotationDirection"],1141:["DS","1","AngularPosition"],1142:["DS","1-n","RadialPosition"],1143:["DS","1","ScanArc"],1144:["DS","1","AngularStep"],1145:["DS","1","CenterOfRotationOffset"],1146:["DS","1-n","RotationOffset"],1147:["CS","1","FieldOfViewShape"],1149:["IS","1-2","FieldOfViewDimensions"],1150:["IS","1","ExposureTime"],1151:["IS","1","XRayTubeCurrent"],1152:["IS","1","Exposure"],1153:["IS","1","ExposureInuAs"],1154:["DS","1","AveragePulseWidth"],1155:["CS","1","RadiationSetting"],1156:["CS","1","RectificationType"],"115A":["CS","1","RadiationMode"],"115E":["DS","1","ImageAndFluoroscopyAreaDoseProduct"],1160:["SH","1","FilterType"],1161:["LO","1-n","TypeOfFilters"],1162:["DS","1","IntensifierSize"],1164:["DS","2","ImagerPixelSpacing"],1166:["CS","1-n","Grid"],1170:["IS","1","GeneratorPower"],1180:["SH","1","CollimatorGridName"],1181:["CS","1","CollimatorType"],1182:["IS","1-2","FocalDistance"],1183:["DS","1-2","XFocusCenter"],1184:["DS","1-2","YFocusCenter"],1190:["DS","1-n","FocalSpots"],1191:["CS","1","AnodeTargetMaterial"],"11A0":["DS","1","BodyPartThickness"],"11A2":["DS","1","CompressionForce"],"11A3":["DS","1","CompressionPressure"],"11A4":["LO","1","PaddleDescription"],"11A5":["DS","1","CompressionContactArea"],"11B0":["LO","1","AcquisitionMode"],"11B1":["LO","1","DoseModeName"],"11B2":["CS","1","AcquiredSubtractionMaskFlag"],"11B3":["CS","1","FluoroscopyPersistenceFlag"],"11B4":["CS","1","FluoroscopyLastImageHoldPersistenceFlag"],"11B5":["IS","1","UpperLimitNumberOfPersistentFluoroscopyFrames"],"11B6":["CS","1","ContrastBolusAutoInjectionTriggerFlag"],"11B7":["FD","1","ContrastBolusInjectionDelay"],"11B8":["SQ","1","XAAcquisitionPhaseDetailsSequence"],"11B9":["FD","1","XAAcquisitionFrameRate"],"11BA":["SQ","1","XAPlaneDetailsSequence"],"11BB":["LO","1","AcquisitionFieldOfViewLabel"],"11BC":["SQ","1","XRayFilterDetailsSequence"],"11BD":["FD","1","XAAcquisitionDuration"],"11BE":["CS","1","ReconstructionPipelineType"],"11BF":["SQ","1","ImageFilterDetailsSequence"],"11C0":["CS","1","AppliedMaskSubtractionFlag"],"11C1":["SQ","1","RequestedSeriesDescriptionCodeSequence"],1200:["DA","1-n","DateOfLastCalibration"],1201:["TM","1-n","TimeOfLastCalibration"],1202:["DT","1","DateTimeOfLastCalibration"],1203:["DT","1","CalibrationDateTime"],1210:["SH","1-n","ConvolutionKernel"],1240:["IS","1-n","UpperLowerPixelValues"],1242:["IS","1","ActualFrameDuration"],1243:["IS","1","CountRate"],1244:["US","1","PreferredPlaybackSequencing"],1250:["SH","1","ReceiveCoilName"],1251:["SH","1","TransmitCoilName"],1260:["SH","1","PlateType"],1261:["LO","1","PhosphorType"],1271:["FD","1","WaterEquivalentDiameter"],1272:["SQ","1","WaterEquivalentDiameterCalculationMethodCodeSequence"],1300:["DS","1","ScanVelocity"],1301:["CS","1-n","WholeBodyTechnique"],1302:["IS","1","ScanLength"],1310:["US","4","AcquisitionMatrix"],1312:["CS","1","InPlanePhaseEncodingDirection"],1314:["DS","1","FlipAngle"],1315:["CS","1","VariableFlipAngleFlag"],1316:["DS","1","SAR"],1318:["DS","1","dBdt"],1320:["FL","1","B1rms"],1400:["LO","1","AcquisitionDeviceProcessingDescription"],1401:["LO","1","AcquisitionDeviceProcessingCode"],1402:["CS","1","CassetteOrientation"],1403:["CS","1","CassetteSize"],1404:["US","1","ExposuresOnPlate"],1405:["IS","1","RelativeXRayExposure"],1411:["DS","1","ExposureIndex"],1412:["DS","1","TargetExposureIndex"],1413:["DS","1","DeviationIndex"],1450:["DS","1","ColumnAngulation"],1460:["DS","1","TomoLayerHeight"],1470:["DS","1","TomoAngle"],1480:["DS","1","TomoTime"],1490:["CS","1","TomoType"],1491:["CS","1","TomoClass"],1495:["IS","1","NumberOfTomosynthesisSourceImages"],1500:["CS","1","PositionerMotion"],1508:["CS","1","PositionerType"],1510:["DS","1","PositionerPrimaryAngle"],1511:["DS","1","PositionerSecondaryAngle"],1520:["DS","1-n","PositionerPrimaryAngleIncrement"],1521:["DS","1-n","PositionerSecondaryAngleIncrement"],1530:["DS","1","DetectorPrimaryAngle"],1531:["DS","1","DetectorSecondaryAngle"],1600:["CS","1-3","ShutterShape"],1602:["IS","1","ShutterLeftVerticalEdge"],1604:["IS","1","ShutterRightVerticalEdge"],1606:["IS","1","ShutterUpperHorizontalEdge"],1608:["IS","1","ShutterLowerHorizontalEdge"],1610:["IS","2","CenterOfCircularShutter"],1612:["IS","1","RadiusOfCircularShutter"],1620:["IS","2-2n","VerticesOfThePolygonalShutter"],1622:["US","1","ShutterPresentationValue"],1623:["US","1","ShutterOverlayGroup"],1624:["US","3","ShutterPresentationColorCIELabValue"],1630:["CS","1","OutlineShapeType"],1631:["FD","1","OutlineLeftVerticalEdge"],1632:["FD","1","OutlineRightVerticalEdge"],1633:["FD","1","OutlineUpperHorizontalEdge"],1634:["FD","1","OutlineLowerHorizontalEdge"],1635:["FD","2","CenterOfCircularOutline"],1636:["FD","1","DiameterOfCircularOutline"],1637:["UL","1","NumberOfPolygonalVertices"],1638:["OF","1","VerticesOfThePolygonalOutline"],1700:["CS","1-3","CollimatorShape"],1702:["IS","1","CollimatorLeftVerticalEdge"],1704:["IS","1","CollimatorRightVerticalEdge"],1706:["IS","1","CollimatorUpperHorizontalEdge"],1708:["IS","1","CollimatorLowerHorizontalEdge"],1710:["IS","2","CenterOfCircularCollimator"],1712:["IS","1","RadiusOfCircularCollimator"],1720:["IS","2-2n","VerticesOfThePolygonalCollimator"],1800:["CS","1","AcquisitionTimeSynchronized"],1801:["SH","1","TimeSource"],1802:["CS","1","TimeDistributionProtocol"],1803:["LO","1","NTPSourceAddress"],2001:["IS","1-n","PageNumberVector"],2002:["SH","1-n","FrameLabelVector"],2003:["DS","1-n","FramePrimaryAngleVector"],2004:["DS","1-n","FrameSecondaryAngleVector"],2005:["DS","1-n","SliceLocationVector"],2006:["SH","1-n","DisplayWindowLabelVector"],2010:["DS","2","NominalScannedPixelSpacing"],2020:["CS","1","DigitizingDeviceTransportDirection"],2030:["DS","1","RotationOfScannedFilm"],2041:["SQ","1","BiopsyTargetSequence"],2042:["UI","1","TargetUID"],2043:["FL","2","LocalizingCursorPosition"],2044:["FL","3","CalculatedTargetPosition"],2045:["SH","1","TargetLabel"],2046:["FL","1","DisplayedZValue"],3100:["CS","1","IVUSAcquisition"],3101:["DS","1","IVUSPullbackRate"],3102:["DS","1","IVUSGatedRate"],3103:["IS","1","IVUSPullbackStartFrameNumber"],3104:["IS","1","IVUSPullbackStopFrameNumber"],3105:["IS","1-n","LesionNumber"],4e3:["LT","1","AcquisitionComments"],5e3:["SH","1-n","OutputPower"],5010:["LO","1-n","TransducerData"],5011:["SQ","1","TransducerIdentificationSequence"],5012:["DS","1","FocusDepth"],5020:["LO","1","ProcessingFunction"],5021:["LO","1","PostprocessingFunction"],5022:["DS","1","MechanicalIndex"],5024:["DS","1","BoneThermalIndex"],5026:["DS","1","CranialThermalIndex"],5027:["DS","1","SoftTissueThermalIndex"],5028:["DS","1","SoftTissueFocusThermalIndex"],5029:["DS","1","SoftTissueSurfaceThermalIndex"],5030:["DS","1","DynamicRange"],5040:["DS","1","TotalGain"],5050:["IS","1","DepthOfScanField"],5100:["CS","1","PatientPosition"],5101:["CS","1","ViewPosition"],5104:["SQ","1","ProjectionEponymousNameCodeSequence"],5210:["DS","6","ImageTransformationMatrix"],5212:["DS","3","ImageTranslationVector"],6e3:["DS","1","Sensitivity"],6011:["SQ","1","SequenceOfUltrasoundRegions"],6012:["US","1","RegionSpatialFormat"],6014:["US","1","RegionDataType"],6016:["UL","1","RegionFlags"],6018:["UL","1","RegionLocationMinX0"],"601A":["UL","1","RegionLocationMinY0"],"601C":["UL","1","RegionLocationMaxX1"],"601E":["UL","1","RegionLocationMaxY1"],6020:["SL","1","ReferencePixelX0"],6022:["SL","1","ReferencePixelY0"],6024:["US","1","PhysicalUnitsXDirection"],6026:["US","1","PhysicalUnitsYDirection"],6028:["FD","1","ReferencePixelPhysicalValueX"],"602A":["FD","1","ReferencePixelPhysicalValueY"],"602C":["FD","1","PhysicalDeltaX"],"602E":["FD","1","PhysicalDeltaY"],6030:["UL","1","TransducerFrequency"],6031:["CS","1","TransducerType"],6032:["UL","1","PulseRepetitionFrequency"],6034:["FD","1","DopplerCorrectionAngle"],6036:["FD","1","SteeringAngle"],6038:["UL","1","DopplerSampleVolumeXPositionRetired"],6039:["SL","1","DopplerSampleVolumeXPosition"],"603A":["UL","1","DopplerSampleVolumeYPositionRetired"],"603B":["SL","1","DopplerSampleVolumeYPosition"],"603C":["UL","1","TMLinePositionX0Retired"],"603D":["SL","1","TMLinePositionX0"],"603E":["UL","1","TMLinePositionY0Retired"],"603F":["SL","1","TMLinePositionY0"],6040:["UL","1","TMLinePositionX1Retired"],6041:["SL","1","TMLinePositionX1"],6042:["UL","1","TMLinePositionY1Retired"],6043:["SL","1","TMLinePositionY1"],6044:["US","1","PixelComponentOrganization"],6046:["UL","1","PixelComponentMask"],6048:["UL","1","PixelComponentRangeStart"],"604A":["UL","1","PixelComponentRangeStop"],"604C":["US","1","PixelComponentPhysicalUnits"],"604E":["US","1","PixelComponentDataType"],6050:["UL","1","NumberOfTableBreakPoints"],6052:["UL","1-n","TableOfXBreakPoints"],6054:["FD","1-n","TableOfYBreakPoints"],6056:["UL","1","NumberOfTableEntries"],6058:["UL","1-n","TableOfPixelValues"],"605A":["FL","1-n","TableOfParameterValues"],6060:["FL","1-n","RWaveTimeVector"],6070:["US","1","ActiveImageAreaOverlayGroup"],7e3:["CS","1","DetectorConditionsNominalFlag"],7001:["DS","1","DetectorTemperature"],7004:["CS","1","DetectorType"],7005:["CS","1","DetectorConfiguration"],7006:["LT","1","DetectorDescription"],7008:["LT","1","DetectorMode"],"700A":["SH","1","DetectorID"],"700C":["DA","1","DateOfLastDetectorCalibration"],"700E":["TM","1","TimeOfLastDetectorCalibration"],7010:["IS","1","ExposuresOnDetectorSinceLastCalibration"],7011:["IS","1","ExposuresOnDetectorSinceManufactured"],7012:["DS","1","DetectorTimeSinceLastExposure"],7014:["DS","1","DetectorActiveTime"],7016:["DS","1","DetectorActivationOffsetFromExposure"],"701A":["DS","2","DetectorBinning"],7020:["DS","2","DetectorElementPhysicalSize"],7022:["DS","2","DetectorElementSpacing"],7024:["CS","1","DetectorActiveShape"],7026:["DS","1-2","DetectorActiveDimensions"],7028:["DS","2","DetectorActiveOrigin"],"702A":["LO","1","DetectorManufacturerName"],"702B":["LO","1","DetectorManufacturerModelName"],7030:["DS","2","FieldOfViewOrigin"],7032:["DS","1","FieldOfViewRotation"],7034:["CS","1","FieldOfViewHorizontalFlip"],7036:["FL","2","PixelDataAreaOriginRelativeToFOV"],7038:["FL","1","PixelDataAreaRotationAngleRelativeToFOV"],7040:["LT","1","GridAbsorbingMaterial"],7041:["LT","1","GridSpacingMaterial"],7042:["DS","1","GridThickness"],7044:["DS","1","GridPitch"],7046:["IS","2","GridAspectRatio"],7048:["DS","1","GridPeriod"],"704C":["DS","1","GridFocalDistance"],7050:["CS","1-n","FilterMaterial"],7052:["DS","1-n","FilterThicknessMinimum"],7054:["DS","1-n","FilterThicknessMaximum"],7056:["FL","1-n","FilterBeamPathLengthMinimum"],7058:["FL","1-n","FilterBeamPathLengthMaximum"],7060:["CS","1","ExposureControlMode"],7062:["LT","1","ExposureControlModeDescription"],7064:["CS","1","ExposureStatus"],7065:["DS","1","PhototimerSetting"],8150:["DS","1","ExposureTimeInuS"],8151:["DS","1","XRayTubeCurrentInuA"],9004:["CS","1","ContentQualification"],9005:["SH","1","PulseSequenceName"],9006:["SQ","1","MRImagingModifierSequence"],9008:["CS","1","EchoPulseSequence"],9009:["CS","1","InversionRecovery"],9010:["CS","1","FlowCompensation"],9011:["CS","1","MultipleSpinEcho"],9012:["CS","1","MultiPlanarExcitation"],9014:["CS","1","PhaseContrast"],9015:["CS","1","TimeOfFlightContrast"],9016:["CS","1","Spoiling"],9017:["CS","1","SteadyStatePulseSequence"],9018:["CS","1","EchoPlanarPulseSequence"],9019:["FD","1","TagAngleFirstAxis"],9020:["CS","1","MagnetizationTransfer"],9021:["CS","1","T2Preparation"],9022:["CS","1","BloodSignalNulling"],9024:["CS","1","SaturationRecovery"],9025:["CS","1","SpectrallySelectedSuppression"],9026:["CS","1","SpectrallySelectedExcitation"],9027:["CS","1","SpatialPresaturation"],9028:["CS","1","Tagging"],9029:["CS","1","OversamplingPhase"],9030:["FD","1","TagSpacingFirstDimension"],9032:["CS","1","GeometryOfKSpaceTraversal"],9033:["CS","1","SegmentedKSpaceTraversal"],9034:["CS","1","RectilinearPhaseEncodeReordering"],9035:["FD","1","TagThickness"],9036:["CS","1","PartialFourierDirection"],9037:["CS","1","CardiacSynchronizationTechnique"],9041:["LO","1","ReceiveCoilManufacturerName"],9042:["SQ","1","MRReceiveCoilSequence"],9043:["CS","1","ReceiveCoilType"],9044:["CS","1","QuadratureReceiveCoil"],9045:["SQ","1","MultiCoilDefinitionSequence"],9046:["LO","1","MultiCoilConfiguration"],9047:["SH","1","MultiCoilElementName"],9048:["CS","1","MultiCoilElementUsed"],9049:["SQ","1","MRTransmitCoilSequence"],9050:["LO","1","TransmitCoilManufacturerName"],9051:["CS","1","TransmitCoilType"],9052:["FD","1-2","SpectralWidth"],9053:["FD","1-2","ChemicalShiftReference"],9054:["CS","1","VolumeLocalizationTechnique"],9058:["US","1","MRAcquisitionFrequencyEncodingSteps"],9059:["CS","1","Decoupling"],9060:["CS","1-2","DecoupledNucleus"],9061:["FD","1-2","DecouplingFrequency"],9062:["CS","1","DecouplingMethod"],9063:["FD","1-2","DecouplingChemicalShiftReference"],9064:["CS","1","KSpaceFiltering"],9065:["CS","1-2","TimeDomainFiltering"],9066:["US","1-2","NumberOfZeroFills"],9067:["CS","1","BaselineCorrection"],9069:["FD","1","ParallelReductionFactorInPlane"],9070:["FD","1","CardiacRRIntervalSpecified"],9073:["FD","1","AcquisitionDuration"],9074:["DT","1","FrameAcquisitionDateTime"],9075:["CS","1","DiffusionDirectionality"],9076:["SQ","1","DiffusionGradientDirectionSequence"],9077:["CS","1","ParallelAcquisition"],9078:["CS","1","ParallelAcquisitionTechnique"],9079:["FD","1-n","InversionTimes"],9080:["ST","1","MetaboliteMapDescription"],9081:["CS","1","PartialFourier"],9082:["FD","1","EffectiveEchoTime"],9083:["SQ","1","MetaboliteMapCodeSequence"],9084:["SQ","1","ChemicalShiftSequence"],9085:["CS","1","CardiacSignalSource"],9087:["FD","1","DiffusionBValue"],9089:["FD","3","DiffusionGradientOrientation"],9090:["FD","3","VelocityEncodingDirection"],9091:["FD","1","VelocityEncodingMinimumValue"],9092:["SQ","1","VelocityEncodingAcquisitionSequence"],9093:["US","1","NumberOfKSpaceTrajectories"],9094:["CS","1","CoverageOfKSpace"],9095:["UL","1","SpectroscopyAcquisitionPhaseRows"],9096:["FD","1","ParallelReductionFactorInPlaneRetired"],9098:["FD","1-2","TransmitterFrequency"],9100:["CS","1-2","ResonantNucleus"],9101:["CS","1","FrequencyCorrection"],9103:["SQ","1","MRSpectroscopyFOVGeometrySequence"],9104:["FD","1","SlabThickness"],9105:["FD","3","SlabOrientation"],9106:["FD","3","MidSlabPosition"],9107:["SQ","1","MRSpatialSaturationSequence"],9112:["SQ","1","MRTimingAndRelatedParametersSequence"],9114:["SQ","1","MREchoSequence"],9115:["SQ","1","MRModifierSequence"],9117:["SQ","1","MRDiffusionSequence"],9118:["SQ","1","CardiacSynchronizationSequence"],9119:["SQ","1","MRAveragesSequence"],9125:["SQ","1","MRFOVGeometrySequence"],9126:["SQ","1","VolumeLocalizationSequence"],9127:["UL","1","SpectroscopyAcquisitionDataColumns"],9147:["CS","1","DiffusionAnisotropyType"],9151:["DT","1","FrameReferenceDateTime"],9152:["SQ","1","MRMetaboliteMapSequence"],9155:["FD","1","ParallelReductionFactorOutOfPlane"],9159:["UL","1","SpectroscopyAcquisitionOutOfPlanePhaseSteps"],9166:["CS","1","BulkMotionStatus"],9168:["FD","1","ParallelReductionFactorSecondInPlane"],9169:["CS","1","CardiacBeatRejectionTechnique"],9170:["CS","1","RespiratoryMotionCompensationTechnique"],9171:["CS","1","RespiratorySignalSource"],9172:["CS","1","BulkMotionCompensationTechnique"],9173:["CS","1","BulkMotionSignalSource"],9174:["CS","1","ApplicableSafetyStandardAgency"],9175:["LO","1","ApplicableSafetyStandardDescription"],9176:["SQ","1","OperatingModeSequence"],9177:["CS","1","OperatingModeType"],9178:["CS","1","OperatingMode"],9179:["CS","1","SpecificAbsorptionRateDefinition"],9180:["CS","1","GradientOutputType"],9181:["FD","1","SpecificAbsorptionRateValue"],9182:["FD","1","GradientOutput"],9183:["CS","1","FlowCompensationDirection"],9184:["FD","1","TaggingDelay"],9185:["ST","1","RespiratoryMotionCompensationTechniqueDescription"],9186:["SH","1","RespiratorySignalSourceID"],9195:["FD","1","ChemicalShiftMinimumIntegrationLimitInHz"],9196:["FD","1","ChemicalShiftMaximumIntegrationLimitInHz"],9197:["SQ","1","MRVelocityEncodingSequence"],9198:["CS","1","FirstOrderPhaseCorrection"],9199:["CS","1","WaterReferencedPhaseCorrection"],9200:["CS","1","MRSpectroscopyAcquisitionType"],9214:["CS","1","RespiratoryCyclePosition"],9217:["FD","1","VelocityEncodingMaximumValue"],9218:["FD","1","TagSpacingSecondDimension"],9219:["SS","1","TagAngleSecondAxis"],9220:["FD","1","FrameAcquisitionDuration"],9226:["SQ","1","MRImageFrameTypeSequence"],9227:["SQ","1","MRSpectroscopyFrameTypeSequence"],9231:["US","1","MRAcquisitionPhaseEncodingStepsInPlane"],9232:["US","1","MRAcquisitionPhaseEncodingStepsOutOfPlane"],9234:["UL","1","SpectroscopyAcquisitionPhaseColumns"],9236:["CS","1","CardiacCyclePosition"],9239:["SQ","1","SpecificAbsorptionRateSequence"],9240:["US","1","RFEchoTrainLength"],9241:["US","1","GradientEchoTrainLength"],9250:["CS","1","ArterialSpinLabelingContrast"],9251:["SQ","1","MRArterialSpinLabelingSequence"],9252:["LO","1","ASLTechniqueDescription"],9253:["US","1","ASLSlabNumber"],9254:["FD","1","ASLSlabThickness"],9255:["FD","3","ASLSlabOrientation"],9256:["FD","3","ASLMidSlabPosition"],9257:["CS","1","ASLContext"],9258:["UL","1","ASLPulseTrainDuration"],9259:["CS","1","ASLCrusherFlag"],"925A":["FD","1","ASLCrusherFlowLimit"],"925B":["LO","1","ASLCrusherDescription"],"925C":["CS","1","ASLBolusCutoffFlag"],"925D":["SQ","1","ASLBolusCutoffTimingSequence"],"925E":["LO","1","ASLBolusCutoffTechnique"],"925F":["UL","1","ASLBolusCutoffDelayTime"],9260:["SQ","1","ASLSlabSequence"],9295:["FD","1","ChemicalShiftMinimumIntegrationLimitInppm"],9296:["FD","1","ChemicalShiftMaximumIntegrationLimitInppm"],9297:["CS","1","WaterReferenceAcquisition"],9298:["IS","1","EchoPeakPosition"],9301:["SQ","1","CTAcquisitionTypeSequence"],9302:["CS","1","AcquisitionType"],9303:["FD","1","TubeAngle"],9304:["SQ","1","CTAcquisitionDetailsSequence"],9305:["FD","1","RevolutionTime"],9306:["FD","1","SingleCollimationWidth"],9307:["FD","1","TotalCollimationWidth"],9308:["SQ","1","CTTableDynamicsSequence"],9309:["FD","1","TableSpeed"],9310:["FD","1","TableFeedPerRotation"],9311:["FD","1","SpiralPitchFactor"],9312:["SQ","1","CTGeometrySequence"],9313:["FD","3","DataCollectionCenterPatient"],9314:["SQ","1","CTReconstructionSequence"],9315:["CS","1","ReconstructionAlgorithm"],9316:["CS","1","ConvolutionKernelGroup"],9317:["FD","2","ReconstructionFieldOfView"],9318:["FD","3","ReconstructionTargetCenterPatient"],9319:["FD","1","ReconstructionAngle"],9320:["SH","1","ImageFilter"],9321:["SQ","1","CTExposureSequence"],9322:["FD","2","ReconstructionPixelSpacing"],9323:["CS","1-n","ExposureModulationType"],9324:["FD","1","EstimatedDoseSaving"],9325:["SQ","1","CTXRayDetailsSequence"],9326:["SQ","1","CTPositionSequence"],9327:["FD","1","TablePosition"],9328:["FD","1","ExposureTimeInms"],9329:["SQ","1","CTImageFrameTypeSequence"],9330:["FD","1","XRayTubeCurrentInmA"],9332:["FD","1","ExposureInmAs"],9333:["CS","1","ConstantVolumeFlag"],9334:["CS","1","FluoroscopyFlag"],9335:["FD","1","DistanceSourceToDataCollectionCenter"],9337:["US","1","ContrastBolusAgentNumber"],9338:["SQ","1","ContrastBolusIngredientCodeSequence"],9340:["SQ","1","ContrastAdministrationProfileSequence"],9341:["SQ","1","ContrastBolusUsageSequence"],9342:["CS","1","ContrastBolusAgentAdministered"],9343:["CS","1","ContrastBolusAgentDetected"],9344:["CS","1","ContrastBolusAgentPhase"],9345:["FD","1","CTDIvol"],9346:["SQ","1","CTDIPhantomTypeCodeSequence"],9351:["FL","1","CalciumScoringMassFactorPatient"],9352:["FL","3","CalciumScoringMassFactorDevice"],9353:["FL","1","EnergyWeightingFactor"],9360:["SQ","1","CTAdditionalXRaySourceSequence"],9361:["CS","1","MultienergyCTAcquisition"],9362:["SQ","1","MultienergyCTAcquisitionSequence"],9363:["SQ","1","MultienergyCTProcessingSequence"],9364:["SQ","1","MultienergyCTCharacteristicsSequence"],9365:["SQ","1","MultienergyCTXRaySourceSequence"],9366:["US","1","XRaySourceIndex"],9367:["UC","1","XRaySourceID"],9368:["CS","1","MultienergySourceTechnique"],9369:["DT","1","SourceStartDateTime"],"936A":["DT","1","SourceEndDateTime"],"936B":["US","1","SwitchingPhaseNumber"],"936C":["DS","1","SwitchingPhaseNominalDuration"],"936D":["DS","1","SwitchingPhaseTransitionDuration"],"936E":["DS","1","EffectiveBinEnergy"],"936F":["SQ","1","MultienergyCTXRayDetectorSequence"],9370:["US","1","XRayDetectorIndex"],9371:["UC","1","XRayDetectorID"],9372:["CS","1","MultienergyDetectorType"],9373:["ST","1","XRayDetectorLabel"],9374:["DS","1","NominalMaxEnergy"],9375:["DS","1","NominalMinEnergy"],9376:["US","1-n","ReferencedXRayDetectorIndex"],9377:["US","1-n","ReferencedXRaySourceIndex"],9378:["US","1-n","ReferencedPathIndex"],9379:["SQ","1","MultienergyCTPathSequence"],"937A":["US","1","MultienergyCTPathIndex"],"937B":["UT","1","MultienergyAcquisitionDescription"],"937C":["FD","1","MonoenergeticEnergyEquivalent"],"937D":["SQ","1","MaterialCodeSequence"],"937E":["CS","1","DecompositionMethod"],"937F":["UT","1","DecompositionDescription"],9380:["SQ","1","DecompositionAlgorithmIdentificationSequence"],9381:["SQ","1","DecompositionMaterialSequence"],9382:["SQ","1","MaterialAttenuationSequence"],9383:["DS","1","PhotonEnergy"],9384:["DS","1","XRayMassAttenuationCoefficient"],9401:["SQ","1","ProjectionPixelCalibrationSequence"],9402:["FL","1","DistanceSourceToIsocenter"],9403:["FL","1","DistanceObjectToTableTop"],9404:["FL","2","ObjectPixelSpacingInCenterOfBeam"],9405:["SQ","1","PositionerPositionSequence"],9406:["SQ","1","TablePositionSequence"],9407:["SQ","1","CollimatorShapeSequence"],9410:["CS","1","PlanesInAcquisition"],9412:["SQ","1","XAXRFFrameCharacteristicsSequence"],9417:["SQ","1","FrameAcquisitionSequence"],9420:["CS","1","XRayReceptorType"],9423:["LO","1","AcquisitionProtocolName"],9424:["LT","1","AcquisitionProtocolDescription"],9425:["CS","1","ContrastBolusIngredientOpaque"],9426:["FL","1","DistanceReceptorPlaneToDetectorHousing"],9427:["CS","1","IntensifierActiveShape"],9428:["FL","1-2","IntensifierActiveDimensions"],9429:["FL","2","PhysicalDetectorSize"],9430:["FL","2","PositionOfIsocenterProjection"],9432:["SQ","1","FieldOfViewSequence"],9433:["LO","1","FieldOfViewDescription"],9434:["SQ","1","ExposureControlSensingRegionsSequence"],9435:["CS","1","ExposureControlSensingRegionShape"],9436:["SS","1","ExposureControlSensingRegionLeftVerticalEdge"],9437:["SS","1","ExposureControlSensingRegionRightVerticalEdge"],9438:["SS","1","ExposureControlSensingRegionUpperHorizontalEdge"],9439:["SS","1","ExposureControlSensingRegionLowerHorizontalEdge"],9440:["SS","2","CenterOfCircularExposureControlSensingRegion"],9441:["US","1","RadiusOfCircularExposureControlSensingRegion"],9442:["SS","2-n","VerticesOfThePolygonalExposureControlSensingRegion"],9445:["","",""],9447:["FL","1","ColumnAngulationPatient"],9449:["FL","1","BeamAngle"],9451:["SQ","1","FrameDetectorParametersSequence"],9452:["FL","1","CalculatedAnatomyThickness"],9455:["SQ","1","CalibrationSequence"],9456:["SQ","1","ObjectThicknessSequence"],9457:["CS","1","PlaneIdentification"],9461:["FL","1-2","FieldOfViewDimensionsInFloat"],9462:["SQ","1","IsocenterReferenceSystemSequence"],9463:["FL","1","PositionerIsocenterPrimaryAngle"],9464:["FL","1","PositionerIsocenterSecondaryAngle"],9465:["FL","1","PositionerIsocenterDetectorRotationAngle"],9466:["FL","1","TableXPositionToIsocenter"],9467:["FL","1","TableYPositionToIsocenter"],9468:["FL","1","TableZPositionToIsocenter"],9469:["FL","1","TableHorizontalRotationAngle"],9470:["FL","1","TableHeadTiltAngle"],9471:["FL","1","TableCradleTiltAngle"],9472:["SQ","1","FrameDisplayShutterSequence"],9473:["FL","1","AcquiredImageAreaDoseProduct"],9474:["CS","1","CArmPositionerTabletopRelationship"],9476:["SQ","1","XRayGeometrySequence"],9477:["SQ","1","IrradiationEventIdentificationSequence"],9504:["SQ","1","XRay3DFrameTypeSequence"],9506:["SQ","1","ContributingSourcesSequence"],9507:["SQ","1","XRay3DAcquisitionSequence"],9508:["FL","1","PrimaryPositionerScanArc"],9509:["FL","1","SecondaryPositionerScanArc"],9510:["FL","1","PrimaryPositionerScanStartAngle"],9511:["FL","1","SecondaryPositionerScanStartAngle"],9514:["FL","1","PrimaryPositionerIncrement"],9515:["FL","1","SecondaryPositionerIncrement"],9516:["DT","1","StartAcquisitionDateTime"],9517:["DT","1","EndAcquisitionDateTime"],9518:["SS","1","PrimaryPositionerIncrementSign"],9519:["SS","1","SecondaryPositionerIncrementSign"],9524:["LO","1","ApplicationName"],9525:["LO","1","ApplicationVersion"],9526:["LO","1","ApplicationManufacturer"],9527:["CS","1","AlgorithmType"],9528:["LO","1","AlgorithmDescription"],9530:["SQ","1","XRay3DReconstructionSequence"],9531:["LO","1","ReconstructionDescription"],9538:["SQ","1","PerProjectionAcquisitionSequence"],9541:["SQ","1","DetectorPositionSequence"],9542:["SQ","1","XRayAcquisitionDoseSequence"],9543:["FD","1","XRaySourceIsocenterPrimaryAngle"],9544:["FD","1","XRaySourceIsocenterSecondaryAngle"],9545:["FD","1","BreastSupportIsocenterPrimaryAngle"],9546:["FD","1","BreastSupportIsocenterSecondaryAngle"],9547:["FD","1","BreastSupportXPositionToIsocenter"],9548:["FD","1","BreastSupportYPositionToIsocenter"],9549:["FD","1","BreastSupportZPositionToIsocenter"],9550:["FD","1","DetectorIsocenterPrimaryAngle"],9551:["FD","1","DetectorIsocenterSecondaryAngle"],9552:["FD","1","DetectorXPositionToIsocenter"],9553:["FD","1","DetectorYPositionToIsocenter"],9554:["FD","1","DetectorZPositionToIsocenter"],9555:["SQ","1","XRayGridSequence"],9556:["SQ","1","XRayFilterSequence"],9557:["FD","3","DetectorActiveAreaTLHCPosition"],9558:["FD","6","DetectorActiveAreaOrientation"],9559:["CS","1","PositionerPrimaryAngleDirection"],9601:["SQ","1","DiffusionBMatrixSequence"],9602:["FD","1","DiffusionBValueXX"],9603:["FD","1","DiffusionBValueXY"],9604:["FD","1","DiffusionBValueXZ"],9605:["FD","1","DiffusionBValueYY"],9606:["FD","1","DiffusionBValueYZ"],9607:["FD","1","DiffusionBValueZZ"],9621:["SQ","1","FunctionalMRSequence"],9622:["CS","1","FunctionalSettlingPhaseFramesPresent"],9623:["DT","1","FunctionalSyncPulse"],9624:["CS","1","SettlingPhaseFrame"],9701:["DT","1","DecayCorrectionDateTime"],9715:["FD","1","StartDensityThreshold"],9716:["FD","1","StartRelativeDensityDifferenceThreshold"],9717:["FD","1","StartCardiacTriggerCountThreshold"],9718:["FD","1","StartRespiratoryTriggerCountThreshold"],9719:["FD","1","TerminationCountsThreshold"],9720:["FD","1","TerminationDensityThreshold"],9721:["FD","1","TerminationRelativeDensityThreshold"],9722:["FD","1","TerminationTimeThreshold"],9723:["FD","1","TerminationCardiacTriggerCountThreshold"],9724:["FD","1","TerminationRespiratoryTriggerCountThreshold"],9725:["CS","1","DetectorGeometry"],9726:["FD","1","TransverseDetectorSeparation"],9727:["FD","1","AxialDetectorDimension"],9729:["US","1","RadiopharmaceuticalAgentNumber"],9732:["SQ","1","PETFrameAcquisitionSequence"],9733:["SQ","1","PETDetectorMotionDetailsSequence"],9734:["SQ","1","PETTableDynamicsSequence"],9735:["SQ","1","PETPositionSequence"],9736:["SQ","1","PETFrameCorrectionFactorsSequence"],9737:["SQ","1","RadiopharmaceuticalUsageSequence"],9738:["CS","1","AttenuationCorrectionSource"],9739:["US","1","NumberOfIterations"],9740:["US","1","NumberOfSubsets"],9749:["SQ","1","PETReconstructionSequence"],9751:["SQ","1","PETFrameTypeSequence"],9755:["CS","1","TimeOfFlightInformationUsed"],9756:["CS","1","ReconstructionType"],9758:["CS","1","DecayCorrected"],9759:["CS","1","AttenuationCorrected"],9760:["CS","1","ScatterCorrected"],9761:["CS","1","DeadTimeCorrected"],9762:["CS","1","GantryMotionCorrected"],9763:["CS","1","PatientMotionCorrected"],9764:["CS","1","CountLossNormalizationCorrected"],9765:["CS","1","RandomsCorrected"],9766:["CS","1","NonUniformRadialSamplingCorrected"],9767:["CS","1","SensitivityCalibrated"],9768:["CS","1","DetectorNormalizationCorrection"],9769:["CS","1","IterativeReconstructionMethod"],9770:["CS","1","AttenuationCorrectionTemporalRelationship"],9771:["SQ","1","PatientPhysiologicalStateSequence"],9772:["SQ","1","PatientPhysiologicalStateCodeSequence"],9801:["FD","1-n","DepthsOfFocus"],9803:["SQ","1","ExcludedIntervalsSequence"],9804:["DT","1","ExclusionStartDateTime"],9805:["FD","1","ExclusionDuration"],9806:["SQ","1","USImageDescriptionSequence"],9807:["SQ","1","ImageDataTypeSequence"],9808:["CS","1","DataType"],9809:["SQ","1","TransducerScanPatternCodeSequence"],"980B":["CS","1","AliasedDataType"],"980C":["CS","1","PositionMeasuringDeviceUsed"],"980D":["SQ","1","TransducerGeometryCodeSequence"],"980E":["SQ","1","TransducerBeamSteeringCodeSequence"],"980F":["SQ","1","TransducerApplicationCodeSequence"],9810:["xs","1","ZeroVelocityPixelValue"],9900:["LO","1","ReferenceLocationLabel"],9901:["UT","1","ReferenceLocationDescription"],9902:["SQ","1","ReferenceBasisCodeSequence"],9903:["SQ","1","ReferenceGeometryCodeSequence"],9904:["DS","1","OffsetDistance"],9905:["CS","1","OffsetDirection"],9906:["SQ","1","PotentialScheduledProtocolCodeSequence"],9907:["SQ","1","PotentialRequestedProcedureCodeSequence"],9908:["UC","1-n","PotentialReasonsForProcedure"],9909:["SQ","1","PotentialReasonsForProcedureCodeSequence"],"990A":["UC","1-n","PotentialDiagnosticTasks"],"990B":["SQ","1","ContraindicationsCodeSequence"],"990C":["SQ","1","ReferencedDefinedProtocolSequence"],"990D":["SQ","1","ReferencedPerformedProtocolSequence"],"990E":["SQ","1","PredecessorProtocolSequence"],"990F":["UT","1","ProtocolPlanningInformation"],9910:["UT","1","ProtocolDesignRationale"],9911:["SQ","1","PatientSpecificationSequence"],9912:["SQ","1","ModelSpecificationSequence"],9913:["SQ","1","ParametersSpecificationSequence"],9914:["SQ","1","InstructionSequence"],9915:["US","1","InstructionIndex"],9916:["LO","1","InstructionText"],9917:["UT","1","InstructionDescription"],9918:["CS","1","InstructionPerformedFlag"],9919:["DT","1","InstructionPerformedDateTime"],"991A":["UT","1","InstructionPerformanceComment"],"991B":["SQ","1","PatientPositioningInstructionSequence"],"991C":["SQ","1","PositioningMethodCodeSequence"],"991D":["SQ","1","PositioningLandmarkSequence"],"991E":["UI","1","TargetFrameOfReferenceUID"],"991F":["SQ","1","AcquisitionProtocolElementSpecificationSequence"],9920:["SQ","1","AcquisitionProtocolElementSequence"],9921:["US","1","ProtocolElementNumber"],9922:["LO","1","ProtocolElementName"],9923:["UT","1","ProtocolElementCharacteristicsSummary"],9924:["UT","1","ProtocolElementPurpose"],9930:["CS","1","AcquisitionMotion"],9931:["SQ","1","AcquisitionStartLocationSequence"],9932:["SQ","1","AcquisitionEndLocationSequence"],9933:["SQ","1","ReconstructionProtocolElementSpecificationSequence"],9934:["SQ","1","ReconstructionProtocolElementSequence"],9935:["SQ","1","StorageProtocolElementSpecificationSequence"],9936:["SQ","1","StorageProtocolElementSequence"],9937:["LO","1","RequestedSeriesDescription"],9938:["US","1-n","SourceAcquisitionProtocolElementNumber"],9939:["US","1-n","SourceAcquisitionBeamNumber"],"993A":["US","1-n","SourceReconstructionProtocolElementNumber"],"993B":["SQ","1","ReconstructionStartLocationSequence"],"993C":["SQ","1","ReconstructionEndLocationSequence"],"993D":["SQ","1","ReconstructionAlgorithmSequence"],"993E":["SQ","1","ReconstructionTargetCenterLocationSequence"],9941:["UT","1","ImageFilterDescription"],9942:["FD","1","CTDIvolNotificationTrigger"],9943:["FD","1","DLPNotificationTrigger"],9944:["CS","1","AutoKVPSelectionType"],9945:["FD","1","AutoKVPUpperBound"],9946:["FD","1","AutoKVPLowerBound"],9947:["CS","1","ProtocolDefinedPatientPosition"],A001:["SQ","1","ContributingEquipmentSequence"],A002:["DT","1","ContributionDateTime"],A003:["ST","1","ContributionDescription"]},"0020":{"0000":["UL","1","GenericGroupLength"],"000D":["UI","1","StudyInstanceUID"],"000E":["UI","1","SeriesInstanceUID"],"0010":["SH","1","StudyID"],"0011":["IS","1","SeriesNumber"],"0012":["IS","1","AcquisitionNumber"],"0013":["IS","1","InstanceNumber"],"0014":["IS","1","IsotopeNumber"],"0015":["IS","1","PhaseNumber"],"0016":["IS","1","IntervalNumber"],"0017":["IS","1","TimeSlotNumber"],"0018":["IS","1","AngleNumber"],"0019":["IS","1","ItemNumber"],"0020":["CS","2","PatientOrientation"],"0022":["IS","1","OverlayNumber"],"0024":["IS","1","CurveNumber"],"0026":["IS","1","LUTNumber"],"0030":["DS","3","ImagePosition"],"0032":["DS","3","ImagePositionPatient"],"0035":["DS","6","ImageOrientation"],"0037":["DS","6","ImageOrientationPatient"],"0050":["DS","1","Location"],"0052":["UI","1","FrameOfReferenceUID"],"0060":["CS","1","Laterality"],"0062":["CS","1","ImageLaterality"],"0070":["LO","1","ImageGeometryType"],"0080":["CS","1-n","MaskingImage"],"00AA":["IS","1","ReportNumber"],"0100":["IS","1","TemporalPositionIdentifier"],"0105":["IS","1","NumberOfTemporalPositions"],"0110":["DS","1","TemporalResolution"],"0200":["UI","1","SynchronizationFrameOfReferenceUID"],"0242":["UI","1","SOPInstanceUIDOfConcatenationSource"],1e3:["IS","1","SeriesInStudy"],1001:["IS","1","AcquisitionsInSeries"],1002:["IS","1","ImagesInAcquisition"],1003:["IS","1","ImagesInSeries"],1004:["IS","1","AcquisitionsInStudy"],1005:["IS","1","ImagesInStudy"],1020:["LO","1-n","Reference"],"103F":["LO","1","TargetPositionReferenceIndicator"],1040:["LO","1","PositionReferenceIndicator"],1041:["DS","1","SliceLocation"],1070:["IS","1-n","OtherStudyNumbers"],1200:["IS","1","NumberOfPatientRelatedStudies"],1202:["IS","1","NumberOfPatientRelatedSeries"],1204:["IS","1","NumberOfPatientRelatedInstances"],1206:["IS","1","NumberOfStudyRelatedSeries"],1208:["IS","1","NumberOfStudyRelatedInstances"],1209:["IS","1","NumberOfSeriesRelatedInstances"],3100:["CS","1-n","SourceImageIDs"],3401:["CS","1","ModifyingDeviceID"],3402:["CS","1","ModifiedImageID"],3403:["DA","1","ModifiedImageDate"],3404:["LO","1","ModifyingDeviceManufacturer"],3405:["TM","1","ModifiedImageTime"],3406:["LO","1","ModifiedImageDescription"],4e3:["LT","1","ImageComments"],5e3:["AT","1-n","OriginalImageIdentification"],5002:["LO","1-n","OriginalImageIdentificationNomenclature"],9056:["SH","1","StackID"],9057:["UL","1","InStackPositionNumber"],9071:["SQ","1","FrameAnatomySequence"],9072:["CS","1","FrameLaterality"],9111:["SQ","1","FrameContentSequence"],9113:["SQ","1","PlanePositionSequence"],9116:["SQ","1","PlaneOrientationSequence"],9128:["UL","1","TemporalPositionIndex"],9153:["FD","1","NominalCardiacTriggerDelayTime"],9154:["FL","1","NominalCardiacTriggerTimePriorToRPeak"],9155:["FL","1","ActualCardiacTriggerTimePriorToRPeak"],9156:["US","1","FrameAcquisitionNumber"],9157:["UL","1-n","DimensionIndexValues"],9158:["LT","1","FrameComments"],9161:["UI","1","ConcatenationUID"],9162:["US","1","InConcatenationNumber"],9163:["US","1","InConcatenationTotalNumber"],9164:["UI","1","DimensionOrganizationUID"],9165:["AT","1","DimensionIndexPointer"],9167:["AT","1","FunctionalGroupPointer"],9170:["SQ","1","UnassignedSharedConvertedAttributesSequence"],9171:["SQ","1","UnassignedPerFrameConvertedAttributesSequence"],9172:["SQ","1","ConversionSourceAttributesSequence"],9213:["LO","1","DimensionIndexPrivateCreator"],9221:["SQ","1","DimensionOrganizationSequence"],9222:["SQ","1","DimensionIndexSequence"],9228:["UL","1","ConcatenationFrameOffsetNumber"],9238:["LO","1","FunctionalGroupPrivateCreator"],9241:["FL","1","NominalPercentageOfCardiacPhase"],9245:["FL","1","NominalPercentageOfRespiratoryPhase"],9246:["FL","1","StartingRespiratoryAmplitude"],9247:["CS","1","StartingRespiratoryPhase"],9248:["FL","1","EndingRespiratoryAmplitude"],9249:["CS","1","EndingRespiratoryPhase"],9250:["CS","1","RespiratoryTriggerType"],9251:["FD","1","RRIntervalTimeNominal"],9252:["FD","1","ActualCardiacTriggerDelayTime"],9253:["SQ","1","RespiratorySynchronizationSequence"],9254:["FD","1","RespiratoryIntervalTime"],9255:["FD","1","NominalRespiratoryTriggerDelayTime"],9256:["FD","1","RespiratoryTriggerDelayThreshold"],9257:["FD","1","ActualRespiratoryTriggerDelayTime"],9301:["FD","3","ImagePositionVolume"],9302:["FD","6","ImageOrientationVolume"],9307:["CS","1","UltrasoundAcquisitionGeometry"],9308:["FD","3","ApexPosition"],9309:["FD","16","VolumeToTransducerMappingMatrix"],"930A":["FD","16","VolumeToTableMappingMatrix"],"930B":["CS","1","VolumeToTransducerRelationship"],"930C":["CS","1","PatientFrameOfReferenceSource"],"930D":["FD","1","TemporalPositionTimeOffset"],"930E":["SQ","1","PlanePositionVolumeSequence"],"930F":["SQ","1","PlaneOrientationVolumeSequence"],9310:["SQ","1","TemporalPositionSequence"],9311:["CS","1","DimensionOrganizationType"],9312:["UI","1","VolumeFrameOfReferenceUID"],9313:["UI","1","TableFrameOfReferenceUID"],9421:["LO","1","DimensionDescriptionLabel"],9450:["SQ","1","PatientOrientationInFrameSequence"],9453:["LO","1","FrameLabel"],9518:["US","1-n","AcquisitionIndex"],9529:["SQ","1","ContributingSOPInstancesReferenceSequence"],9536:["US","1","ReconstructionIndex"]},"0022":{"0000":["UL","1","GenericGroupLength"],"0001":["US","1","LightPathFilterPassThroughWavelength"],"0002":["US","2","LightPathFilterPassBand"],"0003":["US","1","ImagePathFilterPassThroughWavelength"],"0004":["US","2","ImagePathFilterPassBand"],"0005":["CS","1","PatientEyeMovementCommanded"],"0006":["SQ","1","PatientEyeMovementCommandCodeSequence"],"0007":["FL","1","SphericalLensPower"],"0008":["FL","1","CylinderLensPower"],"0009":["FL","1","CylinderAxis"],"000A":["FL","1","EmmetropicMagnification"],"000B":["FL","1","IntraOcularPressure"],"000C":["FL","1","HorizontalFieldOfView"],"000D":["CS","1","PupilDilated"],"000E":["FL","1","DegreeOfDilation"],"0010":["FL","1","StereoBaselineAngle"],"0011":["FL","1","StereoBaselineDisplacement"],"0012":["FL","1","StereoHorizontalPixelOffset"],"0013":["FL","1","StereoVerticalPixelOffset"],"0014":["FL","1","StereoRotation"],"0015":["SQ","1","AcquisitionDeviceTypeCodeSequence"],"0016":["SQ","1","IlluminationTypeCodeSequence"],"0017":["SQ","1","LightPathFilterTypeStackCodeSequence"],"0018":["SQ","1","ImagePathFilterTypeStackCodeSequence"],"0019":["SQ","1","LensesCodeSequence"],"001A":["SQ","1","ChannelDescriptionCodeSequence"],"001B":["SQ","1","RefractiveStateSequence"],"001C":["SQ","1","MydriaticAgentCodeSequence"],"001D":["SQ","1","RelativeImagePositionCodeSequence"],"001E":["FL","1","CameraAngleOfView"],"0020":["SQ","1","StereoPairsSequence"],"0021":["SQ","1","LeftImageSequence"],"0022":["SQ","1","RightImageSequence"],"0028":["CS","1","StereoPairsPresent"],"0030":["FL","1","AxialLengthOfTheEye"],"0031":["SQ","1","OphthalmicFrameLocationSequence"],"0032":["FL","2-2n","ReferenceCoordinates"],"0035":["FL","1","DepthSpatialResolution"],"0036":["FL","1","MaximumDepthDistortion"],"0037":["FL","1","AlongScanSpatialResolution"],"0038":["FL","1","MaximumAlongScanDistortion"],"0039":["CS","1","OphthalmicImageOrientation"],"0041":["FL","1","DepthOfTransverseImage"],"0042":["SQ","1","MydriaticAgentConcentrationUnitsSequence"],"0048":["FL","1","AcrossScanSpatialResolution"],"0049":["FL","1","MaximumAcrossScanDistortion"],"004E":["DS","1","MydriaticAgentConcentration"],"0055":["FL","1","IlluminationWaveLength"],"0056":["FL","1","IlluminationPower"],"0057":["FL","1","IlluminationBandwidth"],"0058":["SQ","1","MydriaticAgentSequence"],1007:["SQ","1","OphthalmicAxialMeasurementsRightEyeSequence"],1008:["SQ","1","OphthalmicAxialMeasurementsLeftEyeSequence"],1009:["CS","1","OphthalmicAxialMeasurementsDeviceType"],1010:["CS","1","OphthalmicAxialLengthMeasurementsType"],1012:["SQ","1","OphthalmicAxialLengthSequence"],1019:["FL","1","OphthalmicAxialLength"],1024:["SQ","1","LensStatusCodeSequence"],1025:["SQ","1","VitreousStatusCodeSequence"],1028:["SQ","1","IOLFormulaCodeSequence"],1029:["LO","1","IOLFormulaDetail"],1033:["FL","1","KeratometerIndex"],1035:["SQ","1","SourceOfOphthalmicAxialLengthCodeSequence"],1036:["SQ","1","SourceOfCornealSizeDataCodeSequence"],1037:["FL","1","TargetRefraction"],1039:["CS","1","RefractiveProcedureOccurred"],1040:["SQ","1","RefractiveSurgeryTypeCodeSequence"],1044:["SQ","1","OphthalmicUltrasoundMethodCodeSequence"],1045:["SQ","1","SurgicallyInducedAstigmatismSequence"],1046:["CS","1","TypeOfOpticalCorrection"],1047:["SQ","1","ToricIOLPowerSequence"],1048:["SQ","1","PredictedToricErrorSequence"],1049:["CS","1","PreSelectedForImplantation"],"104A":["SQ","1","ToricIOLPowerForExactEmmetropiaSequence"],"104B":["SQ","1","ToricIOLPowerForExactTargetRefractionSequence"],1050:["SQ","1","OphthalmicAxialLengthMeasurementsSequence"],1053:["FL","1","IOLPower"],1054:["FL","1","PredictedRefractiveError"],1059:["FL","1","OphthalmicAxialLengthVelocity"],1065:["LO","1","LensStatusDescription"],1066:["LO","1","VitreousStatusDescription"],1090:["SQ","1","IOLPowerSequence"],1092:["SQ","1","LensConstantSequence"],1093:["LO","1","IOLManufacturer"],1094:["LO","1","LensConstantDescription"],1095:["LO","1","ImplantName"],1096:["SQ","1","KeratometryMeasurementTypeCodeSequence"],1097:["LO","1","ImplantPartNumber"],1100:["SQ","1","ReferencedOphthalmicAxialMeasurementsSequence"],1101:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentNameCodeSequence"],1103:["SQ","1","RefractiveErrorBeforeRefractiveSurgeryCodeSequence"],1121:["FL","1","IOLPowerForExactEmmetropia"],1122:["FL","1","IOLPowerForExactTargetRefraction"],1125:["SQ","1","AnteriorChamberDepthDefinitionCodeSequence"],1127:["SQ","1","LensThicknessSequence"],1128:["SQ","1","AnteriorChamberDepthSequence"],"112A":["SQ","1","CalculationCommentSequence"],"112B":["CS","1","CalculationCommentType"],"112C":["LT","1","CalculationComment"],1130:["FL","1","LensThickness"],1131:["FL","1","AnteriorChamberDepth"],1132:["SQ","1","SourceOfLensThicknessDataCodeSequence"],1133:["SQ","1","SourceOfAnteriorChamberDepthDataCodeSequence"],1134:["SQ","1","SourceOfRefractiveMeasurementsSequence"],1135:["SQ","1","SourceOfRefractiveMeasurementsCodeSequence"],1140:["CS","1","OphthalmicAxialLengthMeasurementModified"],1150:["SQ","1","OphthalmicAxialLengthDataSourceCodeSequence"],1153:["SQ","1","OphthalmicAxialLengthAcquisitionMethodCodeSequence"],1155:["FL","1","SignalToNoiseRatio"],1159:["LO","1","OphthalmicAxialLengthDataSourceDescription"],1210:["SQ","1","OphthalmicAxialLengthMeasurementsTotalLengthSequence"],1211:["SQ","1","OphthalmicAxialLengthMeasurementsSegmentalLengthSequence"],1212:["SQ","1","OphthalmicAxialLengthMeasurementsLengthSummationSequence"],1220:["SQ","1","UltrasoundOphthalmicAxialLengthMeasurementsSequence"],1225:["SQ","1","OpticalOphthalmicAxialLengthMeasurementsSequence"],1230:["SQ","1","UltrasoundSelectedOphthalmicAxialLengthSequence"],1250:["SQ","1","OphthalmicAxialLengthSelectionMethodCodeSequence"],1255:["SQ","1","OpticalSelectedOphthalmicAxialLengthSequence"],1257:["SQ","1","SelectedSegmentalOphthalmicAxialLengthSequence"],1260:["SQ","1","SelectedTotalOphthalmicAxialLengthSequence"],1262:["SQ","1","OphthalmicAxialLengthQualityMetricSequence"],1265:["SQ","1","OphthalmicAxialLengthQualityMetricTypeCodeSequence"],1273:["LO","1","OphthalmicAxialLengthQualityMetricTypeDescription"],1300:["SQ","1","IntraocularLensCalculationsRightEyeSequence"],1310:["SQ","1","IntraocularLensCalculationsLeftEyeSequence"],1330:["SQ","1","ReferencedOphthalmicAxialLengthMeasurementQCImageSequence"],1415:["CS","1","OphthalmicMappingDeviceType"],1420:["SQ","1","AcquisitionMethodCodeSequence"],1423:["SQ","1","AcquisitionMethodAlgorithmSequence"],1436:["SQ","1","OphthalmicThicknessMapTypeCodeSequence"],1443:["SQ","1","OphthalmicThicknessMappingNormalsSequence"],1445:["SQ","1","RetinalThicknessDefinitionCodeSequence"],1450:["SQ","1","PixelValueMappingToCodedConceptSequence"],1452:["xs","1","MappedPixelValue"],1454:["LO","1","PixelValueMappingExplanation"],1458:["SQ","1","OphthalmicThicknessMapQualityThresholdSequence"],1460:["FL","1","OphthalmicThicknessMapThresholdQualityRating"],1463:["FL","2","AnatomicStructureReferencePoint"],1465:["SQ","1","RegistrationToLocalizerSequence"],1466:["CS","1","RegisteredLocalizerUnits"],1467:["FL","2","RegisteredLocalizerTopLeftHandCorner"],1468:["FL","2","RegisteredLocalizerBottomRightHandCorner"],1470:["SQ","1","OphthalmicThicknessMapQualityRatingSequence"],1472:["SQ","1","RelevantOPTAttributesSequence"],1512:["SQ","1","TransformationMethodCodeSequence"],1513:["SQ","1","TransformationAlgorithmSequence"],1515:["CS","1","OphthalmicAxialLengthMethod"],1517:["FL","1","OphthalmicFOV"],1518:["SQ","1","TwoDimensionalToThreeDimensionalMapSequence"],1525:["SQ","1","WideFieldOphthalmicPhotographyQualityRatingSequence"],1526:["SQ","1","WideFieldOphthalmicPhotographyQualityThresholdSequence"],1527:["FL","1","WideFieldOphthalmicPhotographyThresholdQualityRating"],1528:["FL","1","XCoordinatesCenterPixelViewAngle"],1529:["FL","1","YCoordinatesCenterPixelViewAngle"],1530:["UL","1","NumberOfMapPoints"],1531:["OF","1","TwoDimensionalToThreeDimensionalMapData"],1612:["SQ","1","DerivationAlgorithmSequence"],1615:["SQ","1","OphthalmicImageTypeCodeSequence"],1616:["LO","1","OphthalmicImageTypeDescription"],1618:["SQ","1","ScanPatternTypeCodeSequence"],1620:["SQ","1","ReferencedSurfaceMeshIdentificationSequence"],1622:["CS","1","OphthalmicVolumetricPropertiesFlag"],1624:["FL","1","OphthalmicAnatomicReferencePointXCoordinate"],1626:["FL","1","OphthalmicAnatomicReferencePointYCoordinate"],1628:["SQ","1","OphthalmicEnFaceImageQualityRatingSequence"],1630:["DS","1","QualityThreshold"],1640:["SQ","1","OCTBscanAnalysisAcquisitionParametersSequence"],1642:["UL","1","NumberOfBscansPerFrame"],1643:["FL","1","BscanSlabThickness"],1644:["FL","1","DistanceBetweenBscanSlabs"],1645:["FL","1","BscanCycleTime"],1646:["FL","1-n","BscanCycleTimeVector"],1649:["FL","1","AscanRate"],1650:["FL","1","BscanRate"],1658:["UL","1","SurfaceMeshZPixelOffset"]},"0024":{"0000":["UL","1","GenericGroupLength"],"0010":["FL","1","VisualFieldHorizontalExtent"],"0011":["FL","1","VisualFieldVerticalExtent"],"0012":["CS","1","VisualFieldShape"],"0016":["SQ","1","ScreeningTestModeCodeSequence"],"0018":["FL","1","MaximumStimulusLuminance"],"0020":["FL","1","BackgroundLuminance"],"0021":["SQ","1","StimulusColorCodeSequence"],"0024":["SQ","1","BackgroundIlluminationColorCodeSequence"],"0025":["FL","1","StimulusArea"],"0028":["FL","1","StimulusPresentationTime"],"0032":["SQ","1","FixationSequence"],"0033":["SQ","1","FixationMonitoringCodeSequence"],"0034":["SQ","1","VisualFieldCatchTrialSequence"],"0035":["US","1","FixationCheckedQuantity"],"0036":["US","1","PatientNotProperlyFixatedQuantity"],"0037":["CS","1","PresentedVisualStimuliDataFlag"],"0038":["US","1","NumberOfVisualStimuli"],"0039":["CS","1","ExcessiveFixationLossesDataFlag"],"0040":["CS","1","ExcessiveFixationLosses"],"0042":["US","1","StimuliRetestingQuantity"],"0044":["LT","1","CommentsOnPatientPerformanceOfVisualField"],"0045":["CS","1","FalseNegativesEstimateFlag"],"0046":["FL","1","FalseNegativesEstimate"],"0048":["US","1","NegativeCatchTrialsQuantity"],"0050":["US","1","FalseNegativesQuantity"],"0051":["CS","1","ExcessiveFalseNegativesDataFlag"],"0052":["CS","1","ExcessiveFalseNegatives"],"0053":["CS","1","FalsePositivesEstimateFlag"],"0054":["FL","1","FalsePositivesEstimate"],"0055":["CS","1","CatchTrialsDataFlag"],"0056":["US","1","PositiveCatchTrialsQuantity"],"0057":["CS","1","TestPointNormalsDataFlag"],"0058":["SQ","1","TestPointNormalsSequence"],"0059":["CS","1","GlobalDeviationProbabilityNormalsFlag"],"0060":["US","1","FalsePositivesQuantity"],"0061":["CS","1","ExcessiveFalsePositivesDataFlag"],"0062":["CS","1","ExcessiveFalsePositives"],"0063":["CS","1","VisualFieldTestNormalsFlag"],"0064":["SQ","1","ResultsNormalsSequence"],"0065":["SQ","1","AgeCorrectedSensitivityDeviationAlgorithmSequence"],"0066":["FL","1","GlobalDeviationFromNormal"],"0067":["SQ","1","GeneralizedDefectSensitivityDeviationAlgorithmSequence"],"0068":["FL","1","LocalizedDeviationFromNormal"],"0069":["LO","1","PatientReliabilityIndicator"],"0070":["FL","1","VisualFieldMeanSensitivity"],"0071":["FL","1","GlobalDeviationProbability"],"0072":["CS","1","LocalDeviationProbabilityNormalsFlag"],"0073":["FL","1","LocalizedDeviationProbability"],"0074":["CS","1","ShortTermFluctuationCalculated"],"0075":["FL","1","ShortTermFluctuation"],"0076":["CS","1","ShortTermFluctuationProbabilityCalculated"],"0077":["FL","1","ShortTermFluctuationProbability"],"0078":["CS","1","CorrectedLocalizedDeviationFromNormalCalculated"],"0079":["FL","1","CorrectedLocalizedDeviationFromNormal"],"0080":["CS","1","CorrectedLocalizedDeviationFromNormalProbabilityCalculated"],"0081":["FL","1","CorrectedLocalizedDeviationFromNormalProbability"],"0083":["SQ","1","GlobalDeviationProbabilitySequence"],"0085":["SQ","1","LocalizedDeviationProbabilitySequence"],"0086":["CS","1","FovealSensitivityMeasured"],"0087":["FL","1","FovealSensitivity"],"0088":["FL","1","VisualFieldTestDuration"],"0089":["SQ","1","VisualFieldTestPointSequence"],"0090":["FL","1","VisualFieldTestPointXCoordinate"],"0091":["FL","1","VisualFieldTestPointYCoordinate"],"0092":["FL","1","AgeCorrectedSensitivityDeviationValue"],"0093":["CS","1","StimulusResults"],"0094":["FL","1","SensitivityValue"],"0095":["CS","1","RetestStimulusSeen"],"0096":["FL","1","RetestSensitivityValue"],"0097":["SQ","1","VisualFieldTestPointNormalsSequence"],"0098":["FL","1","QuantifiedDefect"],"0100":["FL","1","AgeCorrectedSensitivityDeviationProbabilityValue"],"0102":["CS","1","GeneralizedDefectCorrectedSensitivityDeviationFlag"],"0103":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationValue"],"0104":["FL","1","GeneralizedDefectCorrectedSensitivityDeviationProbabilityValue"],"0105":["FL","1","MinimumSensitivityValue"],"0106":["CS","1","BlindSpotLocalized"],"0107":["FL","1","BlindSpotXCoordinate"],"0108":["FL","1","BlindSpotYCoordinate"],"0110":["SQ","1","VisualAcuityMeasurementSequence"],"0112":["SQ","1","RefractiveParametersUsedOnPatientSequence"],"0113":["CS","1","MeasurementLaterality"],"0114":["SQ","1","OphthalmicPatientClinicalInformationLeftEyeSequence"],"0115":["SQ","1","OphthalmicPatientClinicalInformationRightEyeSequence"],"0117":["CS","1","FovealPointNormativeDataFlag"],"0118":["FL","1","FovealPointProbabilityValue"],"0120":["CS","1","ScreeningBaselineMeasured"],"0122":["SQ","1","ScreeningBaselineMeasuredSequence"],"0124":["CS","1","ScreeningBaselineType"],"0126":["FL","1","ScreeningBaselineValue"],"0202":["LO","1","AlgorithmSource"],"0306":["LO","1","DataSetName"],"0307":["LO","1","DataSetVersion"],"0308":["LO","1","DataSetSource"],"0309":["LO","1","DataSetDescription"],"0317":["SQ","1","VisualFieldTestReliabilityGlobalIndexSequence"],"0320":["SQ","1","VisualFieldGlobalResultsIndexSequence"],"0325":["SQ","1","DataObservationSequence"],"0338":["CS","1","IndexNormalsFlag"],"0341":["FL","1","IndexProbability"],"0344":["SQ","1","IndexProbabilitySequence"]},"0028":{"0000":["UL","1","GenericGroupLength"],"0002":["US","1","SamplesPerPixel"],"0003":["US","1","SamplesPerPixelUsed"],"0004":["CS","1","PhotometricInterpretation"],"0005":["US","1","ImageDimensions"],"0006":["US","1","PlanarConfiguration"],"0008":["IS","1","NumberOfFrames"],"0009":["AT","1-n","FrameIncrementPointer"],"000A":["AT","1-n","FrameDimensionPointer"],"0010":["US","1","Rows"],"0011":["US","1","Columns"],"0012":["US","1","Planes"],"0014":["US","1","UltrasoundColorDataPresent"],"0020":["","",""],"0030":["DS","2","PixelSpacing"],"0031":["DS","2","ZoomFactor"],"0032":["DS","2","ZoomCenter"],"0034":["IS","2","PixelAspectRatio"],"0040":["CS","1","ImageFormat"],"0050":["LO","1-n","ManipulatedImage"],"0051":["CS","1-n","CorrectedImage"],"005F":["LO","1","CompressionRecognitionCode"],"0060":["CS","1","CompressionCode"],"0061":["SH","1","CompressionOriginator"],"0062":["LO","1","CompressionLabel"],"0063":["SH","1","CompressionDescription"],"0065":["CS","1-n","CompressionSequence"],"0066":["AT","1-n","CompressionStepPointers"],"0068":["US","1","RepeatInterval"],"0069":["US","1","BitsGrouped"],"0070":["US","1-n","PerimeterTable"],"0071":["xs","1","PerimeterValue"],"0080":["US","1","PredictorRows"],"0081":["US","1","PredictorColumns"],"0082":["US","1-n","PredictorConstants"],"0090":["CS","1","BlockedPixels"],"0091":["US","1","BlockRows"],"0092":["US","1","BlockColumns"],"0093":["US","1","RowOverlap"],"0094":["US","1","ColumnOverlap"],"0100":["US","1","BitsAllocated"],"0101":["US","1","BitsStored"],"0102":["US","1","HighBit"],"0103":["US","1","PixelRepresentation"],"0104":["xs","1","SmallestValidPixelValue"],"0105":["xs","1","LargestValidPixelValue"],"0106":["xs","1","SmallestImagePixelValue"],"0107":["xs","1","LargestImagePixelValue"],"0108":["xs","1","SmallestPixelValueInSeries"],"0109":["xs","1","LargestPixelValueInSeries"],"0110":["xs","1","SmallestImagePixelValueInPlane"],"0111":["xs","1","LargestImagePixelValueInPlane"],"0120":["xs","1","PixelPaddingValue"],"0121":["xs","1","PixelPaddingRangeLimit"],"0122":["FL","1","FloatPixelPaddingValue"],"0123":["FD","1","DoubleFloatPixelPaddingValue"],"0124":["FL","1","FloatPixelPaddingRangeLimit"],"0125":["FD","1","DoubleFloatPixelPaddingRangeLimit"],"0200":["US","1","ImageLocation"],"0300":["CS","1","QualityControlImage"],"0301":["CS","1","BurnedInAnnotation"],"0302":["CS","1","RecognizableVisualFeatures"],"0303":["CS","1","LongitudinalTemporalInformationModified"],"0304":["UI","1","ReferencedColorPaletteInstanceUID"],"0400":["LO","1","TransformLabel"],"0401":["LO","1","TransformVersionNumber"],"0402":["US","1","NumberOfTransformSteps"],"0403":["LO","1-n","SequenceOfCompressedData"],"0404":["AT","1-n","DetailsOfCoefficients"],"04x0":["US","1","RowsForNthOrderCoefficients"],"04x1":["US","1","ColumnsForNthOrderCoefficients"],"04x2":["LO","1-n","CoefficientCoding"],"04x3":["AT","1-n","CoefficientCodingPointers"],"0700":["LO","1","DCTLabel"],"0701":["CS","1-n","DataBlockDescription"],"0702":["AT","1-n","DataBlock"],"0710":["US","1","NormalizationFactorFormat"],"0720":["US","1","ZonalMapNumberFormat"],"0721":["AT","1-n","ZonalMapLocation"],"0722":["US","1","ZonalMapFormat"],"0730":["US","1","AdaptiveMapFormat"],"0740":["US","1","CodeNumberFormat"],"08x0":["CS","1-n","CodeLabel"],"08x2":["US","1","NumberOfTables"],"08x3":["AT","1-n","CodeTableLocation"],"08x4":["US","1","BitsForCodeWord"],"08x8":["AT","1-n","ImageDataLocation"],"0A02":["CS","1","PixelSpacingCalibrationType"],"0A04":["LO","1","PixelSpacingCalibrationDescription"],1040:["CS","1","PixelIntensityRelationship"],1041:["SS","1","PixelIntensityRelationshipSign"],1050:["DS","1-n","WindowCenter"],1051:["DS","1-n","WindowWidth"],1052:["DS","1","RescaleIntercept"],1053:["DS","1","RescaleSlope"],1054:["LO","1","RescaleType"],1055:["LO","1-n","WindowCenterWidthExplanation"],1056:["CS","1","VOILUTFunction"],1080:["CS","1","GrayScale"],1090:["CS","1","RecommendedViewingMode"],1100:["xs","3","GrayLookupTableDescriptor"],1101:["xs","3","RedPaletteColorLookupTableDescriptor"],1102:["xs","3","GreenPaletteColorLookupTableDescriptor"],1103:["xs","3","BluePaletteColorLookupTableDescriptor"],1104:["US","3","AlphaPaletteColorLookupTableDescriptor"],1111:["xs","4","LargeRedPaletteColorLookupTableDescriptor"],1112:["xs","4","LargeGreenPaletteColorLookupTableDescriptor"],1113:["xs","4","LargeBluePaletteColorLookupTableDescriptor"],1199:["UI","1","PaletteColorLookupTableUID"],1200:["xs","1-n or 1","GrayLookupTableData"],1201:["OW","1","RedPaletteColorLookupTableData"],1202:["OW","1","GreenPaletteColorLookupTableData"],1203:["OW","1","BluePaletteColorLookupTableData"],1204:["OW","1","AlphaPaletteColorLookupTableData"],1211:["OW","1","LargeRedPaletteColorLookupTableData"],1212:["OW","1","LargeGreenPaletteColorLookupTableData"],1213:["OW","1","LargeBluePaletteColorLookupTableData"],1214:["UI","1","LargePaletteColorLookupTableUID"],1221:["OW","1","SegmentedRedPaletteColorLookupTableData"],1222:["OW","1","SegmentedGreenPaletteColorLookupTableData"],1223:["OW","1","SegmentedBluePaletteColorLookupTableData"],1224:["OW","1","SegmentedAlphaPaletteColorLookupTableData"],1230:["SQ","1","StoredValueColorRangeSequence"],1231:["FD","1","MinimumStoredValueMapped"],1232:["FD","1","MaximumStoredValueMapped"],1300:["CS","1","BreastImplantPresent"],1350:["CS","1","PartialView"],1351:["ST","1","PartialViewDescription"],1352:["SQ","1","PartialViewCodeSequence"],"135A":["CS","1","SpatialLocationsPreserved"],1401:["SQ","1","DataFrameAssignmentSequence"],1402:["CS","1","DataPathAssignment"],1403:["US","1","BitsMappedToColorLookupTable"],1404:["SQ","1","BlendingLUT1Sequence"],1405:["CS","1","BlendingLUT1TransferFunction"],1406:["FD","1","BlendingWeightConstant"],1407:["US","3","BlendingLookupTableDescriptor"],1408:["OW","1","BlendingLookupTableData"],"140B":["SQ","1","EnhancedPaletteColorLookupTableSequence"],"140C":["SQ","1","BlendingLUT2Sequence"],"140D":["CS","1","BlendingLUT2TransferFunction"],"140E":["CS","1","DataPathID"],"140F":["CS","1","RGBLUTTransferFunction"],1410:["CS","1","AlphaLUTTransferFunction"],2e3:["OB","1","ICCProfile"],2002:["CS","1","ColorSpace"],2110:["CS","1","LossyImageCompression"],2112:["DS","1-n","LossyImageCompressionRatio"],2114:["CS","1-n","LossyImageCompressionMethod"],3e3:["SQ","1","ModalityLUTSequence"],3002:["xs","3","LUTDescriptor"],3003:["LO","1","LUTExplanation"],3004:["LO","1","ModalityLUTType"],3006:["xx","1-n or 1","LUTData"],3010:["SQ","1","VOILUTSequence"],3110:["SQ","1","SoftcopyVOILUTSequence"],4e3:["LT","1","ImagePresentationComments"],5e3:["SQ","1","BiPlaneAcquisitionSequence"],6010:["US","1","RepresentativeFrameNumber"],6020:["US","1-n","FrameNumbersOfInterest"],6022:["LO","1-n","FrameOfInterestDescription"],6023:["CS","1-n","FrameOfInterestType"],6030:["US","1-n","MaskPointers"],6040:["US","1-n","RWavePointer"],6100:["SQ","1","MaskSubtractionSequence"],6101:["CS","1","MaskOperation"],6102:["US","2-2n","ApplicableFrameRange"],6110:["US","1-n","MaskFrameNumbers"],6112:["US","1","ContrastFrameAveraging"],6114:["FL","2","MaskSubPixelShift"],6120:["SS","1","TIDOffset"],6190:["ST","1","MaskOperationExplanation"],7e3:["SQ","1","EquipmentAdministratorSequence"],7001:["US","1","NumberOfDisplaySubsystems"],7002:["US","1","CurrentConfigurationID"],7003:["US","1","DisplaySubsystemID"],7004:["SH","1","DisplaySubsystemName"],7005:["LO","1","DisplaySubsystemDescription"],7006:["CS","1","SystemStatus"],7007:["LO","1","SystemStatusComment"],7008:["SQ","1","TargetLuminanceCharacteristicsSequence"],7009:["US","1","LuminanceCharacteristicsID"],"700A":["SQ","1","DisplaySubsystemConfigurationSequence"],"700B":["US","1","ConfigurationID"],"700C":["SH","1","ConfigurationName"],"700D":["LO","1","ConfigurationDescription"],"700E":["US","1","ReferencedTargetLuminanceCharacteristicsID"],"700F":["SQ","1","QAResultsSequence"],7010:["SQ","1","DisplaySubsystemQAResultsSequence"],7011:["SQ","1","ConfigurationQAResultsSequence"],7012:["SQ","1","MeasurementEquipmentSequence"],7013:["CS","1-n","MeasurementFunctions"],7014:["CS","1","MeasurementEquipmentType"],7015:["SQ","1","VisualEvaluationResultSequence"],7016:["SQ","1","DisplayCalibrationResultSequence"],7017:["US","1","DDLValue"],7018:["FL","2","CIExyWhitePoint"],7019:["CS","1","DisplayFunctionType"],"701A":["FL","1","GammaValue"],"701B":["US","1","NumberOfLuminancePoints"],"701C":["SQ","1","LuminanceResponseSequence"],"701D":["FL","1","TargetMinimumLuminance"],"701E":["FL","1","TargetMaximumLuminance"],"701F":["FL","1","LuminanceValue"],7020:["LO","1","LuminanceResponseDescription"],7021:["CS","1","WhitePointFlag"],7022:["SQ","1","DisplayDeviceTypeCodeSequence"],7023:["SQ","1","DisplaySubsystemSequence"],7024:["SQ","1","LuminanceResultSequence"],7025:["CS","1","AmbientLightValueSource"],7026:["CS","1-n","MeasuredCharacteristics"],7027:["SQ","1","LuminanceUniformityResultSequence"],7028:["SQ","1","VisualEvaluationTestSequence"],7029:["CS","1","TestResult"],"702A":["LO","1","TestResultComment"],"702B":["CS","1","TestImageValidation"],"702C":["SQ","1","TestPatternCodeSequence"],"702D":["SQ","1","MeasurementPatternCodeSequence"],"702E":["SQ","1","VisualEvaluationMethodCodeSequence"],"7FE0":["UR","1","PixelDataProviderURL"],9001:["UL","1","DataPointRows"],9002:["UL","1","DataPointColumns"],9003:["CS","1","SignalDomainColumns"],9099:["US","1","LargestMonochromePixelValue"],9108:["CS","1","DataRepresentation"],9110:["SQ","1","PixelMeasuresSequence"],9132:["SQ","1","FrameVOILUTSequence"],9145:["SQ","1","PixelValueTransformationSequence"],9235:["CS","1","SignalDomainRows"],9411:["FL","1","DisplayFilterPercentage"],9415:["SQ","1","FramePixelShiftSequence"],9416:["US","1","SubtractionItemID"],9422:["SQ","1","PixelIntensityRelationshipLUTSequence"],9443:["SQ","1","FramePixelDataPropertiesSequence"],9444:["CS","1","GeometricalProperties"],9445:["FL","1","GeometricMaximumDistortion"],9446:["CS","1-n","ImageProcessingApplied"],9454:["CS","1","MaskSelectionMode"],9474:["CS","1","LUTFunction"],9478:["FL","1","MaskVisibilityPercentage"],9501:["SQ","1","PixelShiftSequence"],9502:["SQ","1","RegionPixelShiftSequence"],9503:["SS","2-2n","VerticesOfTheRegion"],9505:["SQ","1","MultiFramePresentationSequence"],9506:["US","2-2n","PixelShiftFrameRange"],9507:["US","2-2n","LUTFrameRange"],9520:["DS","16","ImageToEquipmentMappingMatrix"],9537:["CS","1","EquipmentCoordinateSystemIdentification"]},"0032":{"0000":["UL","1","GenericGroupLength"],"000A":["CS","1","StudyStatusID"],"000C":["CS","1","StudyPriorityID"],"0012":["LO","1","StudyIDIssuer"],"0032":["DA","1","StudyVerifiedDate"],"0033":["TM","1","StudyVerifiedTime"],"0034":["DA","1","StudyReadDate"],"0035":["TM","1","StudyReadTime"],1e3:["DA","1","ScheduledStudyStartDate"],1001:["TM","1","ScheduledStudyStartTime"],1010:["DA","1","ScheduledStudyStopDate"],1011:["TM","1","ScheduledStudyStopTime"],1020:["LO","1","ScheduledStudyLocation"],1021:["AE","1-n","ScheduledStudyLocationAETitle"],1030:["LO","1","ReasonForStudy"],1031:["SQ","1","RequestingPhysicianIdentificationSequence"],1032:["PN","1","RequestingPhysician"],1033:["LO","1","RequestingService"],1034:["SQ","1","RequestingServiceCodeSequence"],1040:["DA","1","StudyArrivalDate"],1041:["TM","1","StudyArrivalTime"],1050:["DA","1","StudyCompletionDate"],1051:["TM","1","StudyCompletionTime"],1055:["CS","1","StudyComponentStatusID"],1060:["LO","1","RequestedProcedureDescription"],1064:["SQ","1","RequestedProcedureCodeSequence"],1065:["SQ","1","RequestedLateralityCodeSequence"],1066:["UT","1","ReasonForVisit"],1067:["SQ","1","ReasonForVisitCodeSequence"],1070:["LO","1","RequestedContrastAgent"],4e3:["LT","1","StudyComments"]},"0034":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","FlowIdentifierSequence"],"0002":["OB","1","FlowIdentifier"],"0003":["UI","1","FlowTransferSyntaxUID"],"0004":["UL","1","FlowRTPSamplingRate"],"0005":["OB","1","SourceIdentifier"],"0007":["OB","1","FrameOriginTimestamp"],"0008":["CS","1","IncludesImagingSubject"],"0009":["SQ","1","FrameUsefulnessGroupSequence"],"000A":["SQ","1","RealTimeBulkDataFlowSequence"],"000B":["SQ","1","CameraPositionGroupSequence"],"000C":["CS","1","IncludesInformation"],"000D":["SQ","1","TimeOfFrameGroupSequence"]},"0038":{"0000":["UL","1","GenericGroupLength"],"0004":["SQ","1","ReferencedPatientAliasSequence"],"0008":["CS","1","VisitStatusID"],"0010":["LO","1","AdmissionID"],"0011":["LO","1","IssuerOfAdmissionID"],"0014":["SQ","1","IssuerOfAdmissionIDSequence"],"0016":["LO","1","RouteOfAdmissions"],"001A":["DA","1","ScheduledAdmissionDate"],"001B":["TM","1","ScheduledAdmissionTime"],"001C":["DA","1","ScheduledDischargeDate"],"001D":["TM","1","ScheduledDischargeTime"],"001E":["LO","1","ScheduledPatientInstitutionResidence"],"0020":["DA","1","AdmittingDate"],"0021":["TM","1","AdmittingTime"],"0030":["DA","1","DischargeDate"],"0032":["TM","1","DischargeTime"],"0040":["LO","1","DischargeDiagnosisDescription"],"0044":["SQ","1","DischargeDiagnosisCodeSequence"],"0050":["LO","1","SpecialNeeds"],"0060":["LO","1","ServiceEpisodeID"],"0061":["LO","1","IssuerOfServiceEpisodeID"],"0062":["LO","1","ServiceEpisodeDescription"],"0064":["SQ","1","IssuerOfServiceEpisodeIDSequence"],"0100":["SQ","1","PertinentDocumentsSequence"],"0101":["SQ","1","PertinentResourcesSequence"],"0102":["LO","1","ResourceDescription"],"0300":["LO","1","CurrentPatientLocation"],"0400":["LO","1","PatientInstitutionResidence"],"0500":["LO","1","PatientState"],"0502":["SQ","1","PatientClinicalTrialParticipationSequence"],4e3:["LT","1","VisitComments"]},"003A":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","WaveformOriginality"],"0005":["US","1","NumberOfWaveformChannels"],"0010":["UL","1","NumberOfWaveformSamples"],"001A":["DS","1","SamplingFrequency"],"0020":["SH","1","MultiplexGroupLabel"],"0200":["SQ","1","ChannelDefinitionSequence"],"0202":["IS","1","WaveformChannelNumber"],"0203":["SH","1","ChannelLabel"],"0205":["CS","1-n","ChannelStatus"],"0208":["SQ","1","ChannelSourceSequence"],"0209":["SQ","1","ChannelSourceModifiersSequence"],"020A":["SQ","1","SourceWaveformSequence"],"020C":["LO","1","ChannelDerivationDescription"],"0210":["DS","1","ChannelSensitivity"],"0211":["SQ","1","ChannelSensitivityUnitsSequence"],"0212":["DS","1","ChannelSensitivityCorrectionFactor"],"0213":["DS","1","ChannelBaseline"],"0214":["DS","1","ChannelTimeSkew"],"0215":["DS","1","ChannelSampleSkew"],"0218":["DS","1","ChannelOffset"],"021A":["US","1","WaveformBitsStored"],"0220":["DS","1","FilterLowFrequency"],"0221":["DS","1","FilterHighFrequency"],"0222":["DS","1","NotchFilterFrequency"],"0223":["DS","1","NotchFilterBandwidth"],"0230":["FL","1","WaveformDataDisplayScale"],"0231":["US","3","WaveformDisplayBackgroundCIELabValue"],"0240":["SQ","1","WaveformPresentationGroupSequence"],"0241":["US","1","PresentationGroupNumber"],"0242":["SQ","1","ChannelDisplaySequence"],"0244":["US","3","ChannelRecommendedDisplayCIELabValue"],"0245":["FL","1","ChannelPosition"],"0246":["CS","1","DisplayShadingFlag"],"0247":["FL","1","FractionalChannelDisplayScale"],"0248":["FL","1","AbsoluteChannelDisplayScale"],"0300":["SQ","1","MultiplexedAudioChannelsDescriptionCodeSequence"],"0301":["IS","1","ChannelIdentificationCode"],"0302":["CS","1","ChannelMode"],"0310":["UI","1","MultiplexGroupUID"],"0311":["DS","1","PowerlineFrequency"],"0312":["SQ","1","ChannelImpedanceSequence"],"0313":["DS","1","ImpedanceValue"],"0314":["DT","1","ImpedanceMeasurementDateTime"],"0315":["DS","1","ImpedanceMeasurementFrequency"],"0316":["CS","1","ImpedanceMeasurementCurrentType"]},"0040":{"0000":["UL","1","GenericGroupLength"],"0001":["AE","1-n","ScheduledStationAETitle"],"0002":["DA","1","ScheduledProcedureStepStartDate"],"0003":["TM","1","ScheduledProcedureStepStartTime"],"0004":["DA","1","ScheduledProcedureStepEndDate"],"0005":["TM","1","ScheduledProcedureStepEndTime"],"0006":["PN","1","ScheduledPerformingPhysicianName"],"0007":["LO","1","ScheduledProcedureStepDescription"],"0008":["SQ","1","ScheduledProtocolCodeSequence"],"0009":["SH","1","ScheduledProcedureStepID"],"000A":["SQ","1","StageCodeSequence"],"000B":["SQ","1","ScheduledPerformingPhysicianIdentificationSequence"],"0010":["SH","1-n","ScheduledStationName"],"0011":["SH","1","ScheduledProcedureStepLocation"],"0012":["LO","1","PreMedication"],"0020":["CS","1","ScheduledProcedureStepStatus"],"0026":["SQ","1","OrderPlacerIdentifierSequence"],"0027":["SQ","1","OrderFillerIdentifierSequence"],"0031":["UT","1","LocalNamespaceEntityID"],"0032":["UT","1","UniversalEntityID"],"0033":["CS","1","UniversalEntityIDType"],"0035":["CS","1","IdentifierTypeCode"],"0036":["SQ","1","AssigningFacilitySequence"],"0039":["SQ","1","AssigningJurisdictionCodeSequence"],"003A":["SQ","1","AssigningAgencyOrDepartmentCodeSequence"],"0100":["SQ","1","ScheduledProcedureStepSequence"],"0220":["SQ","1","ReferencedNonImageCompositeSOPInstanceSequence"],"0241":["AE","1","PerformedStationAETitle"],"0242":["SH","1","PerformedStationName"],"0243":["SH","1","PerformedLocation"],"0244":["DA","1","PerformedProcedureStepStartDate"],"0245":["TM","1","PerformedProcedureStepStartTime"],"0250":["DA","1","PerformedProcedureStepEndDate"],"0251":["TM","1","PerformedProcedureStepEndTime"],"0252":["CS","1","PerformedProcedureStepStatus"],"0253":["SH","1","PerformedProcedureStepID"],"0254":["LO","1","PerformedProcedureStepDescription"],"0255":["LO","1","PerformedProcedureTypeDescription"],"0260":["SQ","1","PerformedProtocolCodeSequence"],"0261":["CS","1","PerformedProtocolType"],"0270":["SQ","1","ScheduledStepAttributesSequence"],"0275":["SQ","1","RequestAttributesSequence"],"0280":["ST","1","CommentsOnThePerformedProcedureStep"],"0281":["SQ","1","PerformedProcedureStepDiscontinuationReasonCodeSequence"],"0293":["SQ","1","QuantitySequence"],"0294":["DS","1","Quantity"],"0295":["SQ","1","MeasuringUnitsSequence"],"0296":["SQ","1","BillingItemSequence"],"0300":["US","1","TotalTimeOfFluoroscopy"],"0301":["US","1","TotalNumberOfExposures"],"0302":["US","1","EntranceDose"],"0303":["US","1-2","ExposedArea"],"0306":["DS","1","DistanceSourceToEntrance"],"0307":["DS","1","DistanceSourceToSupport"],"030E":["SQ","1","ExposureDoseSequence"],"0310":["ST","1","CommentsOnRadiationDose"],"0312":["DS","1","XRayOutput"],"0314":["DS","1","HalfValueLayer"],"0316":["DS","1","OrganDose"],"0318":["CS","1","OrganExposed"],"0320":["SQ","1","BillingProcedureStepSequence"],"0321":["SQ","1","FilmConsumptionSequence"],"0324":["SQ","1","BillingSuppliesAndDevicesSequence"],"0330":["SQ","1","ReferencedProcedureStepSequence"],"0340":["SQ","1","PerformedSeriesSequence"],"0400":["LT","1","CommentsOnTheScheduledProcedureStep"],"0440":["SQ","1","ProtocolContextSequence"],"0441":["SQ","1","ContentItemModifierSequence"],"0500":["SQ","1","ScheduledSpecimenSequence"],"050A":["LO","1","SpecimenAccessionNumber"],"0512":["LO","1","ContainerIdentifier"],"0513":["SQ","1","IssuerOfTheContainerIdentifierSequence"],"0515":["SQ","1","AlternateContainerIdentifierSequence"],"0518":["SQ","1","ContainerTypeCodeSequence"],"051A":["LO","1","ContainerDescription"],"0520":["SQ","1","ContainerComponentSequence"],"0550":["SQ","1","SpecimenSequence"],"0551":["LO","1","SpecimenIdentifier"],"0552":["SQ","1","SpecimenDescriptionSequenceTrial"],"0553":["ST","1","SpecimenDescriptionTrial"],"0554":["UI","1","SpecimenUID"],"0555":["SQ","1","AcquisitionContextSequence"],"0556":["ST","1","AcquisitionContextDescription"],"0560":["SQ","1","SpecimenDescriptionSequence"],"0562":["SQ","1","IssuerOfTheSpecimenIdentifierSequence"],"059A":["SQ","1","SpecimenTypeCodeSequence"],"0600":["LO","1","SpecimenShortDescription"],"0602":["UT","1","SpecimenDetailedDescription"],"0610":["SQ","1","SpecimenPreparationSequence"],"0612":["SQ","1","SpecimenPreparationStepContentItemSequence"],"0620":["SQ","1","SpecimenLocalizationContentItemSequence"],"06FA":["LO","1","SlideIdentifier"],"0710":["SQ","1","WholeSlideMicroscopyImageFrameTypeSequence"],"071A":["SQ","1","ImageCenterPointCoordinatesSequence"],"072A":["DS","1","XOffsetInSlideCoordinateSystem"],"073A":["DS","1","YOffsetInSlideCoordinateSystem"],"074A":["DS","1","ZOffsetInSlideCoordinateSystem"],"08D8":["SQ","1","PixelSpacingSequence"],"08DA":["SQ","1","CoordinateSystemAxisCodeSequence"],"08EA":["SQ","1","MeasurementUnitsCodeSequence"],"09F8":["SQ","1","VitalStainCodeSequenceTrial"],1001:["SH","1","RequestedProcedureID"],1002:["LO","1","ReasonForTheRequestedProcedure"],1003:["SH","1","RequestedProcedurePriority"],1004:["LO","1","PatientTransportArrangements"],1005:["LO","1","RequestedProcedureLocation"],1006:["SH","1","PlacerOrderNumberProcedure"],1007:["SH","1","FillerOrderNumberProcedure"],1008:["LO","1","ConfidentialityCode"],1009:["SH","1","ReportingPriority"],"100A":["SQ","1","ReasonForRequestedProcedureCodeSequence"],1010:["PN","1-n","NamesOfIntendedRecipientsOfResults"],1011:["SQ","1","IntendedRecipientsOfResultsIdentificationSequence"],1012:["SQ","1","ReasonForPerformedProcedureCodeSequence"],1060:["LO","1","RequestedProcedureDescriptionTrial"],1101:["SQ","1","PersonIdentificationCodeSequence"],1102:["ST","1","PersonAddress"],1103:["LO","1-n","PersonTelephoneNumbers"],1104:["LT","1","PersonTelecomInformation"],1400:["LT","1","RequestedProcedureComments"],2001:["LO","1","ReasonForTheImagingServiceRequest"],2004:["DA","1","IssueDateOfImagingServiceRequest"],2005:["TM","1","IssueTimeOfImagingServiceRequest"],2006:["SH","1","PlacerOrderNumberImagingServiceRequestRetired"],2007:["SH","1","FillerOrderNumberImagingServiceRequestRetired"],2008:["PN","1","OrderEnteredBy"],2009:["SH","1","OrderEntererLocation"],2010:["SH","1","OrderCallbackPhoneNumber"],2011:["LT","1","OrderCallbackTelecomInformation"],2016:["LO","1","PlacerOrderNumberImagingServiceRequest"],2017:["LO","1","FillerOrderNumberImagingServiceRequest"],2400:["LT","1","ImagingServiceRequestComments"],3001:["LO","1","ConfidentialityConstraintOnPatientDataDescription"],4001:["CS","1","GeneralPurposeScheduledProcedureStepStatus"],4002:["CS","1","GeneralPurposePerformedProcedureStepStatus"],4003:["CS","1","GeneralPurposeScheduledProcedureStepPriority"],4004:["SQ","1","ScheduledProcessingApplicationsCodeSequence"],4005:["DT","1","ScheduledProcedureStepStartDateTime"],4006:["CS","1","MultipleCopiesFlag"],4007:["SQ","1","PerformedProcessingApplicationsCodeSequence"],4008:["DT","1","ScheduledProcedureStepExpirationDateTime"],4009:["SQ","1","HumanPerformerCodeSequence"],4010:["DT","1","ScheduledProcedureStepModificationDateTime"],4011:["DT","1","ExpectedCompletionDateTime"],4015:["SQ","1","ResultingGeneralPurposePerformedProcedureStepsSequence"],4016:["SQ","1","ReferencedGeneralPurposeScheduledProcedureStepSequence"],4018:["SQ","1","ScheduledWorkitemCodeSequence"],4019:["SQ","1","PerformedWorkitemCodeSequence"],4020:["CS","1","InputAvailabilityFlag"],4021:["SQ","1","InputInformationSequence"],4022:["SQ","1","RelevantInformationSequence"],4023:["UI","1","ReferencedGeneralPurposeScheduledProcedureStepTransactionUID"],4025:["SQ","1","ScheduledStationNameCodeSequence"],4026:["SQ","1","ScheduledStationClassCodeSequence"],4027:["SQ","1","ScheduledStationGeographicLocationCodeSequence"],4028:["SQ","1","PerformedStationNameCodeSequence"],4029:["SQ","1","PerformedStationClassCodeSequence"],4030:["SQ","1","PerformedStationGeographicLocationCodeSequence"],4031:["SQ","1","RequestedSubsequentWorkitemCodeSequence"],4032:["SQ","1","NonDICOMOutputCodeSequence"],4033:["SQ","1","OutputInformationSequence"],4034:["SQ","1","ScheduledHumanPerformersSequence"],4035:["SQ","1","ActualHumanPerformersSequence"],4036:["LO","1","HumanPerformerOrganization"],4037:["PN","1","HumanPerformerName"],4040:["CS","1","RawDataHandling"],4041:["CS","1","InputReadinessState"],4050:["DT","1","PerformedProcedureStepStartDateTime"],4051:["DT","1","PerformedProcedureStepEndDateTime"],4052:["DT","1","ProcedureStepCancellationDateTime"],4070:["SQ","1","OutputDestinationSequence"],4071:["SQ","1","DICOMStorageSequence"],4072:["SQ","1","STOWRSStorageSequence"],4073:["UR","1","StorageURL"],4074:["SQ","1","XDSStorageSequence"],8302:["DS","1","EntranceDoseInmGy"],8303:["CS","1","EntranceDoseDerivation"],9092:["SQ","1","ParametricMapFrameTypeSequence"],9094:["SQ","1","ReferencedImageRealWorldValueMappingSequence"],9096:["SQ","1","RealWorldValueMappingSequence"],9098:["SQ","1","PixelValueMappingCodeSequence"],9210:["SH","1","LUTLabel"],9211:["xs","1","RealWorldValueLastValueMapped"],9212:["FD","1-n","RealWorldValueLUTData"],9213:["FD","1","DoubleFloatRealWorldValueLastValueMapped"],9214:["FD","1","DoubleFloatRealWorldValueFirstValueMapped"],9216:["xs","1","RealWorldValueFirstValueMapped"],9220:["SQ","1","QuantityDefinitionSequence"],9224:["FD","1","RealWorldValueIntercept"],9225:["FD","1","RealWorldValueSlope"],A007:["CS","1","FindingsFlagTrial"],A010:["CS","1","RelationshipType"],A020:["SQ","1","FindingsSequenceTrial"],A021:["UI","1","FindingsGroupUIDTrial"],A022:["UI","1","ReferencedFindingsGroupUIDTrial"],A023:["DA","1","FindingsGroupRecordingDateTrial"],A024:["TM","1","FindingsGroupRecordingTimeTrial"],A026:["SQ","1","FindingsSourceCategoryCodeSequenceTrial"],A027:["LO","1","VerifyingOrganization"],A028:["SQ","1","DocumentingOrganizationIdentifierCodeSequenceTrial"],A030:["DT","1","VerificationDateTime"],A032:["DT","1","ObservationDateTime"],A033:["DT","1","ObservationStartDateTime"],A040:["CS","1","ValueType"],A043:["SQ","1","ConceptNameCodeSequence"],A047:["LO","1","MeasurementPrecisionDescriptionTrial"],A050:["CS","1","ContinuityOfContent"],A057:["CS","1-n","UrgencyOrPriorityAlertsTrial"],A060:["LO","1","SequencingIndicatorTrial"],A066:["SQ","1","DocumentIdentifierCodeSequenceTrial"],A067:["PN","1","DocumentAuthorTrial"],A068:["SQ","1","DocumentAuthorIdentifierCodeSequenceTrial"],A070:["SQ","1","IdentifierCodeSequenceTrial"],A073:["SQ","1","VerifyingObserverSequence"],A074:["OB","1","ObjectBinaryIdentifierTrial"],A075:["PN","1","VerifyingObserverName"],A076:["SQ","1","DocumentingObserverIdentifierCodeSequenceTrial"],A078:["SQ","1","AuthorObserverSequence"],A07A:["SQ","1","ParticipantSequence"],A07C:["SQ","1","CustodialOrganizationSequence"],A080:["CS","1","ParticipationType"],A082:["DT","1","ParticipationDateTime"],A084:["CS","1","ObserverType"],A085:["SQ","1","ProcedureIdentifierCodeSequenceTrial"],A088:["SQ","1","VerifyingObserverIdentificationCodeSequence"],A089:["OB","1","ObjectDirectoryBinaryIdentifierTrial"],A090:["SQ","1","EquivalentCDADocumentSequence"],A0B0:["US","2-2n","ReferencedWaveformChannels"],A110:["DA","1","DateOfDocumentOrVerbalTransactionTrial"],A112:["TM","1","TimeOfDocumentCreationOrVerbalTransactionTrial"],A120:["DT","1","DateTime"],A121:["DA","1","Date"],A122:["TM","1","Time"],A123:["PN","1","PersonName"],A124:["UI","1","UID"],A125:["CS","2","ReportStatusIDTrial"],A130:["CS","1","TemporalRangeType"],A132:["UL","1-n","ReferencedSamplePositions"],A136:["US","1-n","ReferencedFrameNumbers"],A138:["DS","1-n","ReferencedTimeOffsets"],A13A:["DT","1-n","ReferencedDateTime"],A160:["UT","1","TextValue"],A161:["FD","1-n","FloatingPointValue"],A162:["SL","1-n","RationalNumeratorValue"],A163:["UL","1-n","RationalDenominatorValue"],A167:["SQ","1","ObservationCategoryCodeSequenceTrial"],A168:["SQ","1","ConceptCodeSequence"],A16A:["ST","1","BibliographicCitationTrial"],A170:["SQ","1","PurposeOfReferenceCodeSequence"],A171:["UI","1","ObservationUID"],A172:["UI","1","ReferencedObservationUIDTrial"],A173:["CS","1","ReferencedObservationClassTrial"],A174:["CS","1","ReferencedObjectObservationClassTrial"],A180:["US","1","AnnotationGroupNumber"],A192:["DA","1","ObservationDateTrial"],A193:["TM","1","ObservationTimeTrial"],A194:["CS","1","MeasurementAutomationTrial"],A195:["SQ","1","ModifierCodeSequence"],A224:["ST","1","IdentificationDescriptionTrial"],A290:["CS","1","CoordinatesSetGeometricTypeTrial"],A296:["SQ","1","AlgorithmCodeSequenceTrial"],A297:["ST","1","AlgorithmDescriptionTrial"],A29A:["SL","2-2n","PixelCoordinatesSetTrial"],A300:["SQ","1","MeasuredValueSequence"],A301:["SQ","1","NumericValueQualifierCodeSequence"],A307:["PN","1","CurrentObserverTrial"],A30A:["DS","1-n","NumericValue"],A313:["SQ","1","ReferencedAccessionSequenceTrial"],A33A:["ST","1","ReportStatusCommentTrial"],A340:["SQ","1","ProcedureContextSequenceTrial"],A352:["PN","1","VerbalSourceTrial"],A353:["ST","1","AddressTrial"],A354:["LO","1","TelephoneNumberTrial"],A358:["SQ","1","VerbalSourceIdentifierCodeSequenceTrial"],A360:["SQ","1","PredecessorDocumentsSequence"],A370:["SQ","1","ReferencedRequestSequence"],A372:["SQ","1","PerformedProcedureCodeSequence"],A375:["SQ","1","CurrentRequestedProcedureEvidenceSequence"],A380:["SQ","1","ReportDetailSequenceTrial"],A385:["SQ","1","PertinentOtherEvidenceSequence"],A390:["SQ","1","HL7StructuredDocumentReferenceSequence"],A402:["UI","1","ObservationSubjectUIDTrial"],A403:["CS","1","ObservationSubjectClassTrial"],A404:["SQ","1","ObservationSubjectTypeCodeSequenceTrial"],A491:["CS","1","CompletionFlag"],A492:["LO","1","CompletionFlagDescription"],A493:["CS","1","VerificationFlag"],A494:["CS","1","ArchiveRequested"],A496:["CS","1","PreliminaryFlag"],A504:["SQ","1","ContentTemplateSequence"],A525:["SQ","1","IdenticalDocumentsSequence"],A600:["CS","1","ObservationSubjectContextFlagTrial"],A601:["CS","1","ObserverContextFlagTrial"],A603:["CS","1","ProcedureContextFlagTrial"],A730:["SQ","1","ContentSequence"],A731:["SQ","1","RelationshipSequenceTrial"],A732:["SQ","1","RelationshipTypeCodeSequenceTrial"],A744:["SQ","1","LanguageCodeSequenceTrial"],A801:["SQ","1","TabulatedValuesSequence"],A802:["UL","1","NumberOfTableRows"],A803:["UL","1","NumberOfTableColumns"],A804:["UL","1","TableRowNumber"],A805:["UL","1","TableColumnNumber"],A806:["SQ","1","TableRowDefinitionSequence"],A807:["SQ","1","TableColumnDefinitionSequence"],A808:["SQ","1","CellValuesSequence"],A992:["ST","1","UniformResourceLocatorTrial"],B020:["SQ","1","WaveformAnnotationSequence"],DB00:["CS","1","TemplateIdentifier"],DB06:["DT","1","TemplateVersion"],DB07:["DT","1","TemplateLocalVersion"],DB0B:["CS","1","TemplateExtensionFlag"],DB0C:["UI","1","TemplateExtensionOrganizationUID"],DB0D:["UI","1","TemplateExtensionCreatorUID"],DB73:["UL","1-n","ReferencedContentItemIdentifier"],E001:["ST","1","HL7InstanceIdentifier"],E004:["DT","1","HL7DocumentEffectiveTime"],E006:["SQ","1","HL7DocumentTypeCodeSequence"],E008:["SQ","1","DocumentClassCodeSequence"],E010:["UR","1","RetrieveURI"],E011:["UI","1","RetrieveLocationUID"],E020:["CS","1","TypeOfInstances"],E021:["SQ","1","DICOMRetrievalSequence"],E022:["SQ","1","DICOMMediaRetrievalSequence"],E023:["SQ","1","WADORetrievalSequence"],E024:["SQ","1","XDSRetrievalSequence"],E025:["SQ","1","WADORSRetrievalSequence"],E030:["UI","1","RepositoryUniqueID"],E031:["UI","1","HomeCommunityID"]},"0042":{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","DocumentTitle"],"0011":["OB","1","EncapsulatedDocument"],"0012":["LO","1","MIMETypeOfEncapsulatedDocument"],"0013":["SQ","1","SourceInstanceSequence"],"0014":["LO","1-n","ListOfMIMETypes"],"0015":["UL","1","EncapsulatedDocumentLength"]},"0044":{"0000":["UL","1","GenericGroupLength"],"0001":["ST","1","ProductPackageIdentifier"],"0002":["CS","1","SubstanceAdministrationApproval"],"0003":["LT","1","ApprovalStatusFurtherDescription"],"0004":["DT","1","ApprovalStatusDateTime"],"0007":["SQ","1","ProductTypeCodeSequence"],"0008":["LO","1-n","ProductName"],"0009":["LT","1","ProductDescription"],"000A":["LO","1","ProductLotIdentifier"],"000B":["DT","1","ProductExpirationDateTime"],"0010":["DT","1","SubstanceAdministrationDateTime"],"0011":["LO","1","SubstanceAdministrationNotes"],"0012":["LO","1","SubstanceAdministrationDeviceID"],"0013":["SQ","1","ProductParameterSequence"],"0019":["SQ","1","SubstanceAdministrationParameterSequence"],"0100":["SQ","1","ApprovalSequence"],"0101":["SQ","1","AssertionCodeSequence"],"0102":["UI","1","AssertionUID"],"0103":["SQ","1","AsserterIdentificationSequence"],"0104":["DT","1","AssertionDateTime"],"0105":["DT","1","AssertionExpirationDateTime"],"0106":["UT","1","AssertionComments"],"0107":["SQ","1","RelatedAssertionSequence"],"0108":["UI","1","ReferencedAssertionUID"],"0109":["SQ","1","ApprovalSubjectSequence"],"010A":["SQ","1","OrganizationalRoleCodeSequence"]},"0046":{"0000":["UL","1","GenericGroupLength"],"0012":["LO","1","LensDescription"],"0014":["SQ","1","RightLensSequence"],"0015":["SQ","1","LeftLensSequence"],"0016":["SQ","1","UnspecifiedLateralityLensSequence"],"0018":["SQ","1","CylinderSequence"],"0028":["SQ","1","PrismSequence"],"0030":["FD","1","HorizontalPrismPower"],"0032":["CS","1","HorizontalPrismBase"],"0034":["FD","1","VerticalPrismPower"],"0036":["CS","1","VerticalPrismBase"],"0038":["CS","1","LensSegmentType"],"0040":["FD","1","OpticalTransmittance"],"0042":["FD","1","ChannelWidth"],"0044":["FD","1","PupilSize"],"0046":["FD","1","CornealSize"],"0047":["SQ","1","CornealSizeSequence"],"0050":["SQ","1","AutorefractionRightEyeSequence"],"0052":["SQ","1","AutorefractionLeftEyeSequence"],"0060":["FD","1","DistancePupillaryDistance"],"0062":["FD","1","NearPupillaryDistance"],"0063":["FD","1","IntermediatePupillaryDistance"],"0064":["FD","1","OtherPupillaryDistance"],"0070":["SQ","1","KeratometryRightEyeSequence"],"0071":["SQ","1","KeratometryLeftEyeSequence"],"0074":["SQ","1","SteepKeratometricAxisSequence"],"0075":["FD","1","RadiusOfCurvature"],"0076":["FD","1","KeratometricPower"],"0077":["FD","1","KeratometricAxis"],"0080":["SQ","1","FlatKeratometricAxisSequence"],"0092":["CS","1","BackgroundColor"],"0094":["CS","1","Optotype"],"0095":["CS","1","OptotypePresentation"],"0097":["SQ","1","SubjectiveRefractionRightEyeSequence"],"0098":["SQ","1","SubjectiveRefractionLeftEyeSequence"],"0100":["SQ","1","AddNearSequence"],"0101":["SQ","1","AddIntermediateSequence"],"0102":["SQ","1","AddOtherSequence"],"0104":["FD","1","AddPower"],"0106":["FD","1","ViewingDistance"],"0110":["SQ","1","CorneaMeasurementsSequence"],"0111":["SQ","1","SourceOfCorneaMeasurementDataCodeSequence"],"0112":["SQ","1","SteepCornealAxisSequence"],"0113":["SQ","1","FlatCornealAxisSequence"],"0114":["FD","1","CornealPower"],"0115":["FD","1","CornealAxis"],"0116":["SQ","1","CorneaMeasurementMethodCodeSequence"],"0117":["FL","1","RefractiveIndexOfCornea"],"0118":["FL","1","RefractiveIndexOfAqueousHumor"],"0121":["SQ","1","VisualAcuityTypeCodeSequence"],"0122":["SQ","1","VisualAcuityRightEyeSequence"],"0123":["SQ","1","VisualAcuityLeftEyeSequence"],"0124":["SQ","1","VisualAcuityBothEyesOpenSequence"],"0125":["CS","1","ViewingDistanceType"],"0135":["SS","2","VisualAcuityModifiers"],"0137":["FD","1","DecimalVisualAcuity"],"0139":["LO","1","OptotypeDetailedDefinition"],"0145":["SQ","1","ReferencedRefractiveMeasurementsSequence"],"0146":["FD","1","SpherePower"],"0147":["FD","1","CylinderPower"],"0201":["CS","1","CornealTopographySurface"],"0202":["FL","2","CornealVertexLocation"],"0203":["FL","1","PupilCentroidXCoordinate"],"0204":["FL","1","PupilCentroidYCoordinate"],"0205":["FL","1","EquivalentPupilRadius"],"0207":["SQ","1","CornealTopographyMapTypeCodeSequence"],"0208":["IS","2-2n","VerticesOfTheOutlineOfPupil"],"0210":["SQ","1","CornealTopographyMappingNormalsSequence"],"0211":["SQ","1","MaximumCornealCurvatureSequence"],"0212":["FL","1","MaximumCornealCurvature"],"0213":["FL","2","MaximumCornealCurvatureLocation"],"0215":["SQ","1","MinimumKeratometricSequence"],"0218":["SQ","1","SimulatedKeratometricCylinderSequence"],"0220":["FL","1","AverageCornealPower"],"0224":["FL","1","CornealISValue"],"0227":["FL","1","AnalyzedArea"],"0230":["FL","1","SurfaceRegularityIndex"],"0232":["FL","1","SurfaceAsymmetryIndex"],"0234":["FL","1","CornealEccentricityIndex"],"0236":["FL","1","KeratoconusPredictionIndex"],"0238":["FL","1","DecimalPotentialVisualAcuity"],"0242":["CS","1","CornealTopographyMapQualityEvaluation"],"0244":["SQ","1","SourceImageCornealProcessedDataSequence"],"0247":["FL","3","CornealPointLocation"],"0248":["CS","1","CornealPointEstimated"],"0249":["FL","1","AxialPower"],"0250":["FL","1","TangentialPower"],"0251":["FL","1","RefractivePower"],"0252":["FL","1","RelativeElevation"],"0253":["FL","1","CornealWavefront"]},"0048":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ImagedVolumeWidth"],"0002":["FL","1","ImagedVolumeHeight"],"0003":["FL","1","ImagedVolumeDepth"],"0006":["UL","1","TotalPixelMatrixColumns"],"0007":["UL","1","TotalPixelMatrixRows"],"0008":["SQ","1","TotalPixelMatrixOriginSequence"],"0010":["CS","1","SpecimenLabelInImage"],"0011":["CS","1","FocusMethod"],"0012":["CS","1","ExtendedDepthOfField"],"0013":["US","1","NumberOfFocalPlanes"],"0014":["FL","1","DistanceBetweenFocalPlanes"],"0015":["US","3","RecommendedAbsentPixelCIELabValue"],"0100":["SQ","1","IlluminatorTypeCodeSequence"],"0102":["DS","6","ImageOrientationSlide"],"0105":["SQ","1","OpticalPathSequence"],"0106":["SH","1","OpticalPathIdentifier"],"0107":["ST","1","OpticalPathDescription"],"0108":["SQ","1","IlluminationColorCodeSequence"],"0110":["SQ","1","SpecimenReferenceSequence"],"0111":["DS","1","CondenserLensPower"],"0112":["DS","1","ObjectiveLensPower"],"0113":["DS","1","ObjectiveLensNumericalAperture"],"0120":["SQ","1","PaletteColorLookupTableSequence"],"0200":["SQ","1","ReferencedImageNavigationSequence"],"0201":["US","2","TopLeftHandCornerOfLocalizerArea"],"0202":["US","2","BottomRightHandCornerOfLocalizerArea"],"0207":["SQ","1","OpticalPathIdentificationSequence"],"021A":["SQ","1","PlanePositionSlideSequence"],"021E":["SL","1","ColumnPositionInTotalImagePixelMatrix"],"021F":["SL","1","RowPositionInTotalImagePixelMatrix"],"0301":["CS","1","PixelOriginInterpretation"],"0302":["UL","1","NumberOfOpticalPaths"],"0303":["UL","1","TotalPixelMatrixFocalPlanes"]},"0050":{"0000":["UL","1","GenericGroupLength"],"0004":["CS","1","CalibrationImage"],"0010":["SQ","1","DeviceSequence"],"0012":["SQ","1","ContainerComponentTypeCodeSequence"],"0013":["FD","1","ContainerComponentThickness"],"0014":["DS","1","DeviceLength"],"0015":["FD","1","ContainerComponentWidth"],"0016":["DS","1","DeviceDiameter"],"0017":["CS","1","DeviceDiameterUnits"],"0018":["DS","1","DeviceVolume"],"0019":["DS","1","InterMarkerDistance"],"001A":["CS","1","ContainerComponentMaterial"],"001B":["LO","1","ContainerComponentID"],"001C":["FD","1","ContainerComponentLength"],"001D":["FD","1","ContainerComponentDiameter"],"001E":["LO","1","ContainerComponentDescription"],"0020":["LO","1","DeviceDescription"],"0021":["ST","1","LongDeviceDescription"]},"0052":{"0000":["UL","1","GenericGroupLength"],"0001":["FL","1","ContrastBolusIngredientPercentByVolume"],"0002":["FD","1","OCTFocalDistance"],"0003":["FD","1","BeamSpotSize"],"0004":["FD","1","EffectiveRefractiveIndex"],"0006":["CS","1","OCTAcquisitionDomain"],"0007":["FD","1","OCTOpticalCenterWavelength"],"0008":["FD","1","AxialResolution"],"0009":["FD","1","RangingDepth"],"0011":["FD","1","ALineRate"],"0012":["US","1","ALinesPerFrame"],"0013":["FD","1","CatheterRotationalRate"],"0014":["FD","1","ALinePixelSpacing"],"0016":["SQ","1","ModeOfPercutaneousAccessSequence"],"0025":["SQ","1","IntravascularOCTFrameTypeSequence"],"0026":["CS","1","OCTZOffsetApplied"],"0027":["SQ","1","IntravascularFrameContentSequence"],"0028":["FD","1","IntravascularLongitudinalDistance"],"0029":["SQ","1","IntravascularOCTFrameContentSequence"],"0030":["SS","1","OCTZOffsetCorrection"],"0031":["CS","1","CatheterDirectionOfRotation"],"0033":["FD","1","SeamLineLocation"],"0034":["FD","1","FirstALineLocation"],"0036":["US","1","SeamLineIndex"],"0038":["US","1","NumberOfPaddedALines"],"0039":["CS","1","InterpolationType"],"003A":["CS","1","RefractiveIndexApplied"]},"0054":{"0000":["UL","1","GenericGroupLength"],"0010":["US","1-n","EnergyWindowVector"],"0011":["US","1","NumberOfEnergyWindows"],"0012":["SQ","1","EnergyWindowInformationSequence"],"0013":["SQ","1","EnergyWindowRangeSequence"],"0014":["DS","1","EnergyWindowLowerLimit"],"0015":["DS","1","EnergyWindowUpperLimit"],"0016":["SQ","1","RadiopharmaceuticalInformationSequence"],"0017":["IS","1","ResidualSyringeCounts"],"0018":["SH","1","EnergyWindowName"],"0020":["US","1-n","DetectorVector"],"0021":["US","1","NumberOfDetectors"],"0022":["SQ","1","DetectorInformationSequence"],"0030":["US","1-n","PhaseVector"],"0031":["US","1","NumberOfPhases"],"0032":["SQ","1","PhaseInformationSequence"],"0033":["US","1","NumberOfFramesInPhase"],"0036":["IS","1","PhaseDelay"],"0038":["IS","1","PauseBetweenFrames"],"0039":["CS","1","PhaseDescription"],"0050":["US","1-n","RotationVector"],"0051":["US","1","NumberOfRotations"],"0052":["SQ","1","RotationInformationSequence"],"0053":["US","1","NumberOfFramesInRotation"],"0060":["US","1-n","RRIntervalVector"],"0061":["US","1","NumberOfRRIntervals"],"0062":["SQ","1","GatedInformationSequence"],"0063":["SQ","1","DataInformationSequence"],"0070":["US","1-n","TimeSlotVector"],"0071":["US","1","NumberOfTimeSlots"],"0072":["SQ","1","TimeSlotInformationSequence"],"0073":["DS","1","TimeSlotTime"],"0080":["US","1-n","SliceVector"],"0081":["US","1","NumberOfSlices"],"0090":["US","1-n","AngularViewVector"],"0100":["US","1-n","TimeSliceVector"],"0101":["US","1","NumberOfTimeSlices"],"0200":["DS","1","StartAngle"],"0202":["CS","1","TypeOfDetectorMotion"],"0210":["IS","1-n","TriggerVector"],"0211":["US","1","NumberOfTriggersInPhase"],"0220":["SQ","1","ViewCodeSequence"],"0222":["SQ","1","ViewModifierCodeSequence"],"0300":["SQ","1","RadionuclideCodeSequence"],"0302":["SQ","1","AdministrationRouteCodeSequence"],"0304":["SQ","1","RadiopharmaceuticalCodeSequence"],"0306":["SQ","1","CalibrationDataSequence"],"0308":["US","1","EnergyWindowNumber"],"0400":["SH","1","ImageID"],"0410":["SQ","1","PatientOrientationCodeSequence"],"0412":["SQ","1","PatientOrientationModifierCodeSequence"],"0414":["SQ","1","PatientGantryRelationshipCodeSequence"],"0500":["CS","1","SliceProgressionDirection"],"0501":["CS","1","ScanProgressionDirection"],1e3:["CS","2","SeriesType"],1001:["CS","1","Units"],1002:["CS","1","CountsSource"],1004:["CS","1","ReprojectionMethod"],1006:["CS","1","SUVType"],1100:["CS","1","RandomsCorrectionMethod"],1101:["LO","1","AttenuationCorrectionMethod"],1102:["CS","1","DecayCorrection"],1103:["LO","1","ReconstructionMethod"],1104:["LO","1","DetectorLinesOfResponseUsed"],1105:["LO","1","ScatterCorrectionMethod"],1200:["DS","1","AxialAcceptance"],1201:["IS","2","AxialMash"],1202:["IS","1","TransverseMash"],1203:["DS","2","DetectorElementSize"],1210:["DS","1","CoincidenceWindowWidth"],1220:["CS","1-n","SecondaryCountsType"],1300:["DS","1","FrameReferenceTime"],1310:["IS","1","PrimaryPromptsCountsAccumulated"],1311:["IS","1-n","SecondaryCountsAccumulated"],1320:["DS","1","SliceSensitivityFactor"],1321:["DS","1","DecayFactor"],1322:["DS","1","DoseCalibrationFactor"],1323:["DS","1","ScatterFractionFactor"],1324:["DS","1","DeadTimeFactor"],1330:["US","1","ImageIndex"],1400:["CS","1-n","CountsIncluded"],1401:["CS","1","DeadTimeCorrectionFlag"]},"0060":{"0000":["UL","1","GenericGroupLength"],3e3:["SQ","1","HistogramSequence"],3002:["US","1","HistogramNumberOfBins"],3004:["xs","1","HistogramFirstBinValue"],3006:["xs","1","HistogramLastBinValue"],3008:["US","1","HistogramBinWidth"],3010:["LO","1","HistogramExplanation"],3020:["UL","1-n","HistogramData"]},"0062":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","SegmentationType"],"0002":["SQ","1","SegmentSequence"],"0003":["SQ","1","SegmentedPropertyCategoryCodeSequence"],"0004":["US","1","SegmentNumber"],"0005":["LO","1","SegmentLabel"],"0006":["ST","1","SegmentDescription"],"0007":["SQ","1","SegmentationAlgorithmIdentificationSequence"],"0008":["CS","1","SegmentAlgorithmType"],"0009":["LO","1-n","SegmentAlgorithmName"],"000A":["SQ","1","SegmentIdentificationSequence"],"000B":["US","1-n","ReferencedSegmentNumber"],"000C":["US","1","RecommendedDisplayGrayscaleValue"],"000D":["US","3","RecommendedDisplayCIELabValue"],"000E":["US","1","MaximumFractionalValue"],"000F":["SQ","1","SegmentedPropertyTypeCodeSequence"],"0010":["CS","1","SegmentationFractionalType"],"0011":["SQ","1","SegmentedPropertyTypeModifierCodeSequence"],"0012":["SQ","1","UsedSegmentsSequence"],"0013":["CS","1","SegmentsOverlap"],"0020":["UT","1","TrackingID"],"0021":["UI","1","TrackingUID"]},"0064":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","DeformableRegistrationSequence"],"0003":["UI","1","SourceFrameOfReferenceUID"],"0005":["SQ","1","DeformableRegistrationGridSequence"],"0007":["UL","3","GridDimensions"],"0008":["FD","3","GridResolution"],"0009":["OF","1","VectorGridData"],"000F":["SQ","1","PreDeformationMatrixRegistrationSequence"],"0010":["SQ","1","PostDeformationMatrixRegistrationSequence"]},"0066":{"0000":["UL","1","GenericGroupLength"],"0001":["UL","1","NumberOfSurfaces"],"0002":["SQ","1","SurfaceSequence"],"0003":["UL","1","SurfaceNumber"],"0004":["LT","1","SurfaceComments"],"0009":["CS","1","SurfaceProcessing"],"000A":["FL","1","SurfaceProcessingRatio"],"000B":["LO","1","SurfaceProcessingDescription"],"000C":["FL","1","RecommendedPresentationOpacity"],"000D":["CS","1","RecommendedPresentationType"],"000E":["CS","1","FiniteVolume"],"0010":["CS","1","Manifold"],"0011":["SQ","1","SurfacePointsSequence"],"0012":["SQ","1","SurfacePointsNormalsSequence"],"0013":["SQ","1","SurfaceMeshPrimitivesSequence"],"0015":["UL","1","NumberOfSurfacePoints"],"0016":["OF","1","PointCoordinatesData"],"0017":["FL","3","PointPositionAccuracy"],"0018":["FL","1","MeanPointDistance"],"0019":["FL","1","MaximumPointDistance"],"001A":["FL","6","PointsBoundingBoxCoordinates"],"001B":["FL","3","AxisOfRotation"],"001C":["FL","3","CenterOfRotation"],"001E":["UL","1","NumberOfVectors"],"001F":["US","1","VectorDimensionality"],"0020":["FL","1-n","VectorAccuracy"],"0021":["OF","1","VectorCoordinateData"],"0022":["OD","1","DoublePointCoordinatesData"],"0023":["OW","1","TrianglePointIndexList"],"0024":["OW","1","EdgePointIndexList"],"0025":["OW","1","VertexPointIndexList"],"0026":["SQ","1","TriangleStripSequence"],"0027":["SQ","1","TriangleFanSequence"],"0028":["SQ","1","LineSequence"],"0029":["OW","1","PrimitivePointIndexList"],"002A":["UL","1","SurfaceCount"],"002B":["SQ","1","ReferencedSurfaceSequence"],"002C":["UL","1","ReferencedSurfaceNumber"],"002D":["SQ","1","SegmentSurfaceGenerationAlgorithmIdentificationSequence"],"002E":["SQ","1","SegmentSurfaceSourceInstanceSequence"],"002F":["SQ","1","AlgorithmFamilyCodeSequence"],"0030":["SQ","1","AlgorithmNameCodeSequence"],"0031":["LO","1","AlgorithmVersion"],"0032":["LT","1","AlgorithmParameters"],"0034":["SQ","1","FacetSequence"],"0035":["SQ","1","SurfaceProcessingAlgorithmIdentificationSequence"],"0036":["LO","1","AlgorithmName"],"0037":["FL","1","RecommendedPointRadius"],"0038":["FL","1","RecommendedLineThickness"],"0040":["OL","1","LongPrimitivePointIndexList"],"0041":["OL","1","LongTrianglePointIndexList"],"0042":["OL","1","LongEdgePointIndexList"],"0043":["OL","1","LongVertexPointIndexList"],"0101":["SQ","1","TrackSetSequence"],"0102":["SQ","1","TrackSequence"],"0103":["OW","1","RecommendedDisplayCIELabValueList"],"0104":["SQ","1","TrackingAlgorithmIdentificationSequence"],"0105":["UL","1","TrackSetNumber"],"0106":["LO","1","TrackSetLabel"],"0107":["UT","1","TrackSetDescription"],"0108":["SQ","1","TrackSetAnatomicalTypeCodeSequence"],"0121":["SQ","1","MeasurementsSequence"],"0124":["SQ","1","TrackSetStatisticsSequence"],"0125":["OF","1","FloatingPointValues"],"0129":["OL","1","TrackPointIndexList"],"0130":["SQ","1","TrackStatisticsSequence"],"0132":["SQ","1","MeasurementValuesSequence"],"0133":["SQ","1","DiffusionAcquisitionCodeSequence"],"0134":["SQ","1","DiffusionModelCodeSequence"]},"0068":{"0000":["UL","1","GenericGroupLength"],6210:["LO","1","ImplantSize"],6221:["LO","1","ImplantTemplateVersion"],6222:["SQ","1","ReplacedImplantTemplateSequence"],6223:["CS","1","ImplantType"],6224:["SQ","1","DerivationImplantTemplateSequence"],6225:["SQ","1","OriginalImplantTemplateSequence"],6226:["DT","1","EffectiveDateTime"],6230:["SQ","1","ImplantTargetAnatomySequence"],6260:["SQ","1","InformationFromManufacturerSequence"],6265:["SQ","1","NotificationFromManufacturerSequence"],6270:["DT","1","InformationIssueDateTime"],6280:["ST","1","InformationSummary"],"62A0":["SQ","1","ImplantRegulatoryDisapprovalCodeSequence"],"62A5":["FD","1","OverallTemplateSpatialTolerance"],"62C0":["SQ","1","HPGLDocumentSequence"],"62D0":["US","1","HPGLDocumentID"],"62D5":["LO","1","HPGLDocumentLabel"],"62E0":["SQ","1","ViewOrientationCodeSequence"],"62F0":["SQ","1","ViewOrientationModifierCodeSequence"],"62F2":["FD","1","HPGLDocumentScaling"],6300:["OB","1","HPGLDocument"],6310:["US","1","HPGLContourPenNumber"],6320:["SQ","1","HPGLPenSequence"],6330:["US","1","HPGLPenNumber"],6340:["LO","1","HPGLPenLabel"],6345:["ST","1","HPGLPenDescription"],6346:["FD","2","RecommendedRotationPoint"],6347:["FD","4","BoundingRectangle"],6350:["US","1-n","ImplantTemplate3DModelSurfaceNumber"],6360:["SQ","1","SurfaceModelDescriptionSequence"],6380:["LO","1","SurfaceModelLabel"],6390:["FD","1","SurfaceModelScalingFactor"],"63A0":["SQ","1","MaterialsCodeSequence"],"63A4":["SQ","1","CoatingMaterialsCodeSequence"],"63A8":["SQ","1","ImplantTypeCodeSequence"],"63AC":["SQ","1","FixationMethodCodeSequence"],"63B0":["SQ","1","MatingFeatureSetsSequence"],"63C0":["US","1","MatingFeatureSetID"],"63D0":["LO","1","MatingFeatureSetLabel"],"63E0":["SQ","1","MatingFeatureSequence"],"63F0":["US","1","MatingFeatureID"],6400:["SQ","1","MatingFeatureDegreeOfFreedomSequence"],6410:["US","1","DegreeOfFreedomID"],6420:["CS","1","DegreeOfFreedomType"],6430:["SQ","1","TwoDMatingFeatureCoordinatesSequence"],6440:["US","1","ReferencedHPGLDocumentID"],6450:["FD","2","TwoDMatingPoint"],6460:["FD","4","TwoDMatingAxes"],6470:["SQ","1","TwoDDegreeOfFreedomSequence"],6490:["FD","3","ThreeDDegreeOfFreedomAxis"],"64A0":["FD","2","RangeOfFreedom"],"64C0":["FD","3","ThreeDMatingPoint"],"64D0":["FD","9","ThreeDMatingAxes"],"64F0":["FD","3","TwoDDegreeOfFreedomAxis"],6500:["SQ","1","PlanningLandmarkPointSequence"],6510:["SQ","1","PlanningLandmarkLineSequence"],6520:["SQ","1","PlanningLandmarkPlaneSequence"],6530:["US","1","PlanningLandmarkID"],6540:["LO","1","PlanningLandmarkDescription"],6545:["SQ","1","PlanningLandmarkIdentificationCodeSequence"],6550:["SQ","1","TwoDPointCoordinatesSequence"],6560:["FD","2","TwoDPointCoordinates"],6590:["FD","3","ThreeDPointCoordinates"],"65A0":["SQ","1","TwoDLineCoordinatesSequence"],"65B0":["FD","4","TwoDLineCoordinates"],"65D0":["FD","6","ThreeDLineCoordinates"],"65E0":["SQ","1","TwoDPlaneCoordinatesSequence"],"65F0":["FD","4","TwoDPlaneIntersection"],6610:["FD","3","ThreeDPlaneOrigin"],6620:["FD","3","ThreeDPlaneNormal"],7001:["CS","1","ModelModification"],7002:["CS","1","ModelMirroring"],7003:["SQ","1","ModelUsageCodeSequence"],7004:["UI","1","ModelGroupUID"],7005:["UR","1","RelativeURIReferenceWithinEncapsulatedDocument"]},"006A":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AnnotationCoordinateType"],"0002":["SQ","1","AnnotationGroupSequence"],"0003":["UI","1","AnnotationGroupUID"],"0005":["LO","1","AnnotationGroupLabel"],"0006":["UT","1","AnnotationGroupDescription"],"0007":["CS","1","AnnotationGroupGenerationType"],"0008":["SQ","1","AnnotationGroupAlgorithmIdentificationSequence"],"0009":["SQ","1","AnnotationPropertyCategoryCodeSequence"],"000A":["SQ","1","AnnotationPropertyTypeCodeSequence"],"000B":["SQ","1","AnnotationPropertyTypeModifierCodeSequence"],"000C":["UL","1","NumberOfAnnotations"],"000D":["CS","1","AnnotationAppliesToAllOpticalPaths"],"000E":["SH","1-n","ReferencedOpticalPathIdentifier"],"000F":["CS","1","AnnotationAppliesToAllZPlanes"],"0010":["FD","1-n","CommonZCoordinateValue"],"0011":["OL","1","AnnotationIndexList"]},"0070":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","GraphicAnnotationSequence"],"0002":["CS","1","GraphicLayer"],"0003":["CS","1","BoundingBoxAnnotationUnits"],"0004":["CS","1","AnchorPointAnnotationUnits"],"0005":["CS","1","GraphicAnnotationUnits"],"0006":["ST","1","UnformattedTextValue"],"0008":["SQ","1","TextObjectSequence"],"0009":["SQ","1","GraphicObjectSequence"],"0010":["FL","2","BoundingBoxTopLeftHandCorner"],"0011":["FL","2","BoundingBoxBottomRightHandCorner"],"0012":["CS","1","BoundingBoxTextHorizontalJustification"],"0014":["FL","2","AnchorPoint"],"0015":["CS","1","AnchorPointVisibility"],"0020":["US","1","GraphicDimensions"],"0021":["US","1","NumberOfGraphicPoints"],"0022":["FL","2-n","GraphicData"],"0023":["CS","1","GraphicType"],"0024":["CS","1","GraphicFilled"],"0040":["IS","1","ImageRotationRetired"],"0041":["CS","1","ImageHorizontalFlip"],"0042":["US","1","ImageRotation"],"0050":["US","2","DisplayedAreaTopLeftHandCornerTrial"],"0051":["US","2","DisplayedAreaBottomRightHandCornerTrial"],"0052":["SL","2","DisplayedAreaTopLeftHandCorner"],"0053":["SL","2","DisplayedAreaBottomRightHandCorner"],"005A":["SQ","1","DisplayedAreaSelectionSequence"],"0060":["SQ","1","GraphicLayerSequence"],"0062":["IS","1","GraphicLayerOrder"],"0066":["US","1","GraphicLayerRecommendedDisplayGrayscaleValue"],"0067":["US","3","GraphicLayerRecommendedDisplayRGBValue"],"0068":["LO","1","GraphicLayerDescription"],"0080":["CS","1","ContentLabel"],"0081":["LO","1","ContentDescription"],"0082":["DA","1","PresentationCreationDate"],"0083":["TM","1","PresentationCreationTime"],"0084":["PN","1","ContentCreatorName"],"0086":["SQ","1","ContentCreatorIdentificationCodeSequence"],"0087":["SQ","1","AlternateContentDescriptionSequence"],"0100":["CS","1","PresentationSizeMode"],"0101":["DS","2","PresentationPixelSpacing"],"0102":["IS","2","PresentationPixelAspectRatio"],"0103":["FL","1","PresentationPixelMagnificationRatio"],"0207":["LO","1","GraphicGroupLabel"],"0208":["ST","1","GraphicGroupDescription"],"0209":["SQ","1","CompoundGraphicSequence"],"0226":["UL","1","CompoundGraphicInstanceID"],"0227":["LO","1","FontName"],"0228":["CS","1","FontNameType"],"0229":["LO","1","CSSFontName"],"0230":["FD","1","RotationAngle"],"0231":["SQ","1","TextStyleSequence"],"0232":["SQ","1","LineStyleSequence"],"0233":["SQ","1","FillStyleSequence"],"0234":["SQ","1","GraphicGroupSequence"],"0241":["US","3","TextColorCIELabValue"],"0242":["CS","1","HorizontalAlignment"],"0243":["CS","1","VerticalAlignment"],"0244":["CS","1","ShadowStyle"],"0245":["FL","1","ShadowOffsetX"],"0246":["FL","1","ShadowOffsetY"],"0247":["US","3","ShadowColorCIELabValue"],"0248":["CS","1","Underlined"],"0249":["CS","1","Bold"],"0250":["CS","1","Italic"],"0251":["US","3","PatternOnColorCIELabValue"],"0252":["US","3","PatternOffColorCIELabValue"],"0253":["FL","1","LineThickness"],"0254":["CS","1","LineDashingStyle"],"0255":["UL","1","LinePattern"],"0256":["OB","1","FillPattern"],"0257":["CS","1","FillMode"],"0258":["FL","1","ShadowOpacity"],"0261":["FL","1","GapLength"],"0262":["FL","1","DiameterOfVisibility"],"0273":["FL","2","RotationPoint"],"0274":["CS","1","TickAlignment"],"0278":["CS","1","ShowTickLabel"],"0279":["CS","1","TickLabelAlignment"],"0282":["CS","1","CompoundGraphicUnits"],"0284":["FL","1","PatternOnOpacity"],"0285":["FL","1","PatternOffOpacity"],"0287":["SQ","1","MajorTicksSequence"],"0288":["FL","1","TickPosition"],"0289":["SH","1","TickLabel"],"0294":["CS","1","CompoundGraphicType"],"0295":["UL","1","GraphicGroupID"],"0306":["CS","1","ShapeType"],"0308":["SQ","1","RegistrationSequence"],"0309":["SQ","1","MatrixRegistrationSequence"],"030A":["SQ","1","MatrixSequence"],"030B":["FD","16","FrameOfReferenceToDisplayedCoordinateSystemTransformationMatrix"],"030C":["CS","1","FrameOfReferenceTransformationMatrixType"],"030D":["SQ","1","RegistrationTypeCodeSequence"],"030F":["ST","1","FiducialDescription"],"0310":["SH","1","FiducialIdentifier"],"0311":["SQ","1","FiducialIdentifierCodeSequence"],"0312":["FD","1","ContourUncertaintyRadius"],"0314":["SQ","1","UsedFiducialsSequence"],"0318":["SQ","1","GraphicCoordinatesDataSequence"],"031A":["UI","1","FiducialUID"],"031B":["UI","1","ReferencedFiducialUID"],"031C":["SQ","1","FiducialSetSequence"],"031E":["SQ","1","FiducialSequence"],"031F":["SQ","1","FiducialsPropertyCategoryCodeSequence"],"0401":["US","3","GraphicLayerRecommendedDisplayCIELabValue"],"0402":["SQ","1","BlendingSequence"],"0403":["FL","1","RelativeOpacity"],"0404":["SQ","1","ReferencedSpatialRegistrationSequence"],"0405":["CS","1","BlendingPosition"],1101:["UI","1","PresentationDisplayCollectionUID"],1102:["UI","1","PresentationSequenceCollectionUID"],1103:["US","1","PresentationSequencePositionIndex"],1104:["SQ","1","RenderedImageReferenceSequence"],1201:["SQ","1","VolumetricPresentationStateInputSequence"],1202:["CS","1","PresentationInputType"],1203:["US","1","InputSequencePositionIndex"],1204:["CS","1","Crop"],1205:["US","1-n","CroppingSpecificationIndex"],1206:["CS","1","CompositingMethod"],1207:["US","1","VolumetricPresentationInputNumber"],1208:["CS","1","ImageVolumeGeometry"],1209:["UI","1","VolumetricPresentationInputSetUID"],"120A":["SQ","1","VolumetricPresentationInputSetSequence"],"120B":["CS","1","GlobalCrop"],"120C":["US","1-n","GlobalCroppingSpecificationIndex"],"120D":["CS","1","RenderingMethod"],1301:["SQ","1","VolumeCroppingSequence"],1302:["CS","1","VolumeCroppingMethod"],1303:["FD","6","BoundingBoxCrop"],1304:["SQ","1","ObliqueCroppingPlaneSequence"],1305:["FD","4","Plane"],1306:["FD","3","PlaneNormal"],1309:["US","1","CroppingSpecificationNumber"],1501:["CS","1","MultiPlanarReconstructionStyle"],1502:["CS","1","MPRThicknessType"],1503:["FD","1","MPRSlabThickness"],1505:["FD","3","MPRTopLeftHandCorner"],1507:["FD","3","MPRViewWidthDirection"],1508:["FD","1","MPRViewWidth"],"150C":["UL","1","NumberOfVolumetricCurvePoints"],"150D":["OD","1","VolumetricCurvePoints"],1511:["FD","3","MPRViewHeightDirection"],1512:["FD","1","MPRViewHeight"],1602:["CS","1","RenderProjection"],1603:["FD","3","ViewpointPosition"],1604:["FD","3","ViewpointLookAtPoint"],1605:["FD","3","ViewpointUpDirection"],1606:["FD","6","RenderFieldOfView"],1607:["FD","1","SamplingStepSize"],1701:["CS","1","ShadingStyle"],1702:["FD","1","AmbientReflectionIntensity"],1703:["FD","3","LightDirection"],1704:["FD","1","DiffuseReflectionIntensity"],1705:["FD","1","SpecularReflectionIntensity"],1706:["FD","1","Shininess"],1801:["SQ","1","PresentationStateClassificationComponentSequence"],1802:["CS","1","ComponentType"],1803:["SQ","1","ComponentInputSequence"],1804:["US","1","VolumetricPresentationInputIndex"],1805:["SQ","1","PresentationStateCompositorComponentSequence"],1806:["SQ","1","WeightingTransferFunctionSequence"],1807:["US","3","WeightingLookupTableDescriptor"],1808:["OB","1","WeightingLookupTableData"],1901:["SQ","1","VolumetricAnnotationSequence"],1903:["SQ","1","ReferencedStructuredContextSequence"],1904:["UI","1","ReferencedContentItem"],1905:["SQ","1","VolumetricPresentationInputAnnotationSequence"],1907:["CS","1","AnnotationClipping"],"1A01":["CS","1","PresentationAnimationStyle"],"1A03":["FD","1","RecommendedAnimationRate"],"1A04":["SQ","1","AnimationCurveSequence"],"1A05":["FD","1","AnimationStepSize"],"1A06":["FD","1","SwivelRange"],"1A07":["OD","1","VolumetricCurveUpDirections"],"1A08":["SQ","1","VolumeStreamSequence"],"1A09":["LO","1","RGBATransferFunctionDescription"],"1B01":["SQ","1","AdvancedBlendingSequence"],"1B02":["US","1","BlendingInputNumber"],"1B03":["SQ","1","BlendingDisplayInputSequence"],"1B04":["SQ","1","BlendingDisplaySequence"],"1B06":["CS","1","BlendingMode"],"1B07":["CS","1","TimeSeriesBlending"],"1B08":["CS","1","GeometryForDisplay"],"1B11":["SQ","1","ThresholdSequence"],"1B12":["SQ","1","ThresholdValueSequence"],"1B13":["CS","1","ThresholdType"],"1B14":["FD","1","ThresholdValue"]},"0072":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","HangingProtocolName"],"0004":["LO","1","HangingProtocolDescription"],"0006":["CS","1","HangingProtocolLevel"],"0008":["LO","1","HangingProtocolCreator"],"000A":["DT","1","HangingProtocolCreationDateTime"],"000C":["SQ","1","HangingProtocolDefinitionSequence"],"000E":["SQ","1","HangingProtocolUserIdentificationCodeSequence"],"0010":["LO","1","HangingProtocolUserGroupName"],"0012":["SQ","1","SourceHangingProtocolSequence"],"0014":["US","1","NumberOfPriorsReferenced"],"0020":["SQ","1","ImageSetsSequence"],"0022":["SQ","1","ImageSetSelectorSequence"],"0024":["CS","1","ImageSetSelectorUsageFlag"],"0026":["AT","1","SelectorAttribute"],"0028":["US","1","SelectorValueNumber"],"0030":["SQ","1","TimeBasedImageSetsSequence"],"0032":["US","1","ImageSetNumber"],"0034":["CS","1","ImageSetSelectorCategory"],"0038":["US","2","RelativeTime"],"003A":["CS","1","RelativeTimeUnits"],"003C":["SS","2","AbstractPriorValue"],"003E":["SQ","1","AbstractPriorCodeSequence"],"0040":["LO","1","ImageSetLabel"],"0050":["CS","1","SelectorAttributeVR"],"0052":["AT","1-n","SelectorSequencePointer"],"0054":["LO","1-n","SelectorSequencePointerPrivateCreator"],"0056":["LO","1","SelectorAttributePrivateCreator"],"005E":["AE","1-n","SelectorAEValue"],"005F":["AS","1-n","SelectorASValue"],"0060":["AT","1-n","SelectorATValue"],"0061":["DA","1-n","SelectorDAValue"],"0062":["CS","1-n","SelectorCSValue"],"0063":["DT","1-n","SelectorDTValue"],"0064":["IS","1-n","SelectorISValue"],"0065":["OB","1","SelectorOBValue"],"0066":["LO","1-n","SelectorLOValue"],"0067":["OF","1","SelectorOFValue"],"0068":["LT","1","SelectorLTValue"],"0069":["OW","1","SelectorOWValue"],"006A":["PN","1-n","SelectorPNValue"],"006B":["TM","1-n","SelectorTMValue"],"006C":["SH","1-n","SelectorSHValue"],"006D":["UN","1","SelectorUNValue"],"006E":["ST","1","SelectorSTValue"],"006F":["UC","1-n","SelectorUCValue"],"0070":["UT","1","SelectorUTValue"],"0071":["UR","1","SelectorURValue"],"0072":["DS","1-n","SelectorDSValue"],"0073":["OD","1","SelectorODValue"],"0074":["FD","1-n","SelectorFDValue"],"0075":["OL","1","SelectorOLValue"],"0076":["FL","1-n","SelectorFLValue"],"0078":["UL","1-n","SelectorULValue"],"007A":["US","1-n","SelectorUSValue"],"007C":["SL","1-n","SelectorSLValue"],"007E":["SS","1-n","SelectorSSValue"],"007F":["UI","1-n","SelectorUIValue"],"0080":["SQ","1","SelectorCodeSequenceValue"],"0081":["OV","1","SelectorOVValue"],"0082":["SV","1-n","SelectorSVValue"],"0083":["UV","1-n","SelectorUVValue"],"0100":["US","1","NumberOfScreens"],"0102":["SQ","1","NominalScreenDefinitionSequence"],"0104":["US","1","NumberOfVerticalPixels"],"0106":["US","1","NumberOfHorizontalPixels"],"0108":["FD","4","DisplayEnvironmentSpatialPosition"],"010A":["US","1","ScreenMinimumGrayscaleBitDepth"],"010C":["US","1","ScreenMinimumColorBitDepth"],"010E":["US","1","ApplicationMaximumRepaintTime"],"0200":["SQ","1","DisplaySetsSequence"],"0202":["US","1","DisplaySetNumber"],"0203":["LO","1","DisplaySetLabel"],"0204":["US","1","DisplaySetPresentationGroup"],"0206":["LO","1","DisplaySetPresentationGroupDescription"],"0208":["CS","1","PartialDataDisplayHandling"],"0210":["SQ","1","SynchronizedScrollingSequence"],"0212":["US","2-n","DisplaySetScrollingGroup"],"0214":["SQ","1","NavigationIndicatorSequence"],"0216":["US","1","NavigationDisplaySet"],"0218":["US","1-n","ReferenceDisplaySets"],"0300":["SQ","1","ImageBoxesSequence"],"0302":["US","1","ImageBoxNumber"],"0304":["CS","1","ImageBoxLayoutType"],"0306":["US","1","ImageBoxTileHorizontalDimension"],"0308":["US","1","ImageBoxTileVerticalDimension"],"0310":["CS","1","ImageBoxScrollDirection"],"0312":["CS","1","ImageBoxSmallScrollType"],"0314":["US","1","ImageBoxSmallScrollAmount"],"0316":["CS","1","ImageBoxLargeScrollType"],"0318":["US","1","ImageBoxLargeScrollAmount"],"0320":["US","1","ImageBoxOverlapPriority"],"0330":["FD","1","CineRelativeToRealTime"],"0400":["SQ","1","FilterOperationsSequence"],"0402":["CS","1","FilterByCategory"],"0404":["CS","1","FilterByAttributePresence"],"0406":["CS","1","FilterByOperator"],"0420":["US","3","StructuredDisplayBackgroundCIELabValue"],"0421":["US","3","EmptyImageBoxCIELabValue"],"0422":["SQ","1","StructuredDisplayImageBoxSequence"],"0424":["SQ","1","StructuredDisplayTextBoxSequence"],"0427":["SQ","1","ReferencedFirstFrameSequence"],"0430":["SQ","1","ImageBoxSynchronizationSequence"],"0432":["US","2-n","SynchronizedImageBoxList"],"0434":["CS","1","TypeOfSynchronization"],"0500":["CS","1","BlendingOperationType"],"0510":["CS","1","ReformattingOperationType"],"0512":["FD","1","ReformattingThickness"],"0514":["FD","1","ReformattingInterval"],"0516":["CS","1","ReformattingOperationInitialViewDirection"],"0520":["CS","1-n","ThreeDRenderingType"],"0600":["SQ","1","SortingOperationsSequence"],"0602":["CS","1","SortByCategory"],"0604":["CS","1","SortingDirection"],"0700":["CS","2","DisplaySetPatientOrientation"],"0702":["CS","1","VOIType"],"0704":["CS","1","PseudoColorType"],"0705":["SQ","1","PseudoColorPaletteInstanceReferenceSequence"],"0706":["CS","1","ShowGrayscaleInverted"],"0710":["CS","1","ShowImageTrueSizeFlag"],"0712":["CS","1","ShowGraphicAnnotationFlag"],"0714":["CS","1","ShowPatientDemographicsFlag"],"0716":["CS","1","ShowAcquisitionTechniquesFlag"],"0717":["CS","1","DisplaySetHorizontalJustification"],"0718":["CS","1","DisplaySetVerticalJustification"]},"0074":{"0000":["UL","1","GenericGroupLength"],"0120":["FD","1","ContinuationStartMeterset"],"0121":["FD","1","ContinuationEndMeterset"],1e3:["CS","1","ProcedureStepState"],1002:["SQ","1","ProcedureStepProgressInformationSequence"],1004:["DS","1","ProcedureStepProgress"],1006:["ST","1","ProcedureStepProgressDescription"],1007:["SQ","1","ProcedureStepProgressParametersSequence"],1008:["SQ","1","ProcedureStepCommunicationsURISequence"],"100A":["UR","1","ContactURI"],"100C":["LO","1","ContactDisplayName"],"100E":["SQ","1","ProcedureStepDiscontinuationReasonCodeSequence"],1020:["SQ","1","BeamTaskSequence"],1022:["CS","1","BeamTaskType"],1024:["IS","1","BeamOrderIndexTrial"],1025:["CS","1","AutosequenceFlag"],1026:["FD","1","TableTopVerticalAdjustedPosition"],1027:["FD","1","TableTopLongitudinalAdjustedPosition"],1028:["FD","1","TableTopLateralAdjustedPosition"],"102A":["FD","1","PatientSupportAdjustedAngle"],"102B":["FD","1","TableTopEccentricAdjustedAngle"],"102C":["FD","1","TableTopPitchAdjustedAngle"],"102D":["FD","1","TableTopRollAdjustedAngle"],1030:["SQ","1","DeliveryVerificationImageSequence"],1032:["CS","1","VerificationImageTiming"],1034:["CS","1","DoubleExposureFlag"],1036:["CS","1","DoubleExposureOrdering"],1038:["DS","1","DoubleExposureMetersetTrial"],"103A":["DS","4","DoubleExposureFieldDeltaTrial"],1040:["SQ","1","RelatedReferenceRTImageSequence"],1042:["SQ","1","GeneralMachineVerificationSequence"],1044:["SQ","1","ConventionalMachineVerificationSequence"],1046:["SQ","1","IonMachineVerificationSequence"],1048:["SQ","1","FailedAttributesSequence"],"104A":["SQ","1","OverriddenAttributesSequence"],"104C":["SQ","1","ConventionalControlPointVerificationSequence"],"104E":["SQ","1","IonControlPointVerificationSequence"],1050:["SQ","1","AttributeOccurrenceSequence"],1052:["AT","1","AttributeOccurrencePointer"],1054:["UL","1","AttributeItemSelector"],1056:["LO","1","AttributeOccurrencePrivateCreator"],1057:["IS","1-n","SelectorSequencePointerItems"],1200:["CS","1","ScheduledProcedureStepPriority"],1202:["LO","1","WorklistLabel"],1204:["LO","1","ProcedureStepLabel"],1210:["SQ","1","ScheduledProcessingParametersSequence"],1212:["SQ","1","PerformedProcessingParametersSequence"],1216:["SQ","1","UnifiedProcedureStepPerformedProcedureSequence"],1220:["SQ","1","RelatedProcedureStepSequence"],1222:["LO","1","ProcedureStepRelationshipType"],1224:["SQ","1","ReplacedProcedureStepSequence"],1230:["LO","1","DeletionLock"],1234:["AE","1","ReceivingAE"],1236:["AE","1","RequestingAE"],1238:["LT","1","ReasonForCancellation"],1242:["CS","1","SCPStatus"],1244:["CS","1","SubscriptionListStatus"],1246:["CS","1","UnifiedProcedureStepListStatus"],1324:["UL","1","BeamOrderIndex"],1338:["FD","1","DoubleExposureMeterset"],"133A":["FD","4","DoubleExposureFieldDelta"],1401:["SQ","1","BrachyTaskSequence"],1402:["DS","1","ContinuationStartTotalReferenceAirKerma"],1403:["DS","1","ContinuationEndTotalReferenceAirKerma"],1404:["IS","1","ContinuationPulseNumber"],1405:["SQ","1","ChannelDeliveryOrderSequence"],1406:["IS","1","ReferencedChannelNumber"],1407:["DS","1","StartCumulativeTimeWeight"],1408:["DS","1","EndCumulativeTimeWeight"],1409:["SQ","1","OmittedChannelSequence"],"140A":["CS","1","ReasonForChannelOmission"],"140B":["LO","1","ReasonForChannelOmissionDescription"],"140C":["IS","1","ChannelDeliveryOrderIndex"],"140D":["SQ","1","ChannelDeliveryContinuationSequence"],"140E":["SQ","1","OmittedApplicationSetupSequence"]},"0076":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantAssemblyTemplateName"],"0003":["LO","1","ImplantAssemblyTemplateIssuer"],"0006":["LO","1","ImplantAssemblyTemplateVersion"],"0008":["SQ","1","ReplacedImplantAssemblyTemplateSequence"],"000A":["CS","1","ImplantAssemblyTemplateType"],"000C":["SQ","1","OriginalImplantAssemblyTemplateSequence"],"000E":["SQ","1","DerivationImplantAssemblyTemplateSequence"],"0010":["SQ","1","ImplantAssemblyTemplateTargetAnatomySequence"],"0020":["SQ","1","ProcedureTypeCodeSequence"],"0030":["LO","1","SurgicalTechnique"],"0032":["SQ","1","ComponentTypesSequence"],"0034":["SQ","1","ComponentTypeCodeSequence"],"0036":["CS","1","ExclusiveComponentType"],"0038":["CS","1","MandatoryComponentType"],"0040":["SQ","1","ComponentSequence"],"0055":["US","1","ComponentID"],"0060":["SQ","1","ComponentAssemblySequence"],"0070":["US","1","Component1ReferencedID"],"0080":["US","1","Component1ReferencedMatingFeatureSetID"],"0090":["US","1","Component1ReferencedMatingFeatureID"],"00A0":["US","1","Component2ReferencedID"],"00B0":["US","1","Component2ReferencedMatingFeatureSetID"],"00C0":["US","1","Component2ReferencedMatingFeatureID"]},"0078":{"0000":["UL","1","GenericGroupLength"],"0001":["LO","1","ImplantTemplateGroupName"],"0010":["ST","1","ImplantTemplateGroupDescription"],"0020":["LO","1","ImplantTemplateGroupIssuer"],"0024":["LO","1","ImplantTemplateGroupVersion"],"0026":["SQ","1","ReplacedImplantTemplateGroupSequence"],"0028":["SQ","1","ImplantTemplateGroupTargetAnatomySequence"],"002A":["SQ","1","ImplantTemplateGroupMembersSequence"],"002E":["US","1","ImplantTemplateGroupMemberID"],"0050":["FD","3","ThreeDImplantTemplateGroupMemberMatchingPoint"],"0060":["FD","9","ThreeDImplantTemplateGroupMemberMatchingAxes"],"0070":["SQ","1","ImplantTemplateGroupMemberMatching2DCoordinatesSequence"],"0090":["FD","2","TwoDImplantTemplateGroupMemberMatchingPoint"],"00A0":["FD","4","TwoDImplantTemplateGroupMemberMatchingAxes"],"00B0":["SQ","1","ImplantTemplateGroupVariationDimensionSequence"],"00B2":["LO","1","ImplantTemplateGroupVariationDimensionName"],"00B4":["SQ","1","ImplantTemplateGroupVariationDimensionRankSequence"],"00B6":["US","1","ReferencedImplantTemplateGroupMemberID"],"00B8":["US","1","ImplantTemplateGroupVariationDimensionRank"]},"0080":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","SurfaceScanAcquisitionTypeCodeSequence"],"0002":["SQ","1","SurfaceScanModeCodeSequence"],"0003":["SQ","1","RegistrationMethodCodeSequence"],"0004":["FD","1","ShotDurationTime"],"0005":["FD","1","ShotOffsetTime"],"0006":["US","1-n","SurfacePointPresentationValueData"],"0007":["US","3-3n","SurfacePointColorCIELabValueData"],"0008":["SQ","1","UVMappingSequence"],"0009":["SH","1","TextureLabel"],"0010":["OF","1","UValueData"],"0011":["OF","1","VValueData"],"0012":["SQ","1","ReferencedTextureSequence"],"0013":["SQ","1","ReferencedSurfaceDataSequence"]},"0082":{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","AssessmentSummary"],"0003":["UT","1","AssessmentSummaryDescription"],"0004":["SQ","1","AssessedSOPInstanceSequence"],"0005":["SQ","1","ReferencedComparisonSOPInstanceSequence"],"0006":["UL","1","NumberOfAssessmentObservations"],"0007":["SQ","1","AssessmentObservationsSequence"],"0008":["CS","1","ObservationSignificance"],"000A":["UT","1","ObservationDescription"],"000C":["SQ","1","StructuredConstraintObservationSequence"],"0010":["SQ","1","AssessedAttributeValueSequence"],"0016":["LO","1","AssessmentSetID"],"0017":["SQ","1","AssessmentRequesterSequence"],"0018":["LO","1","SelectorAttributeName"],"0019":["LO","1","SelectorAttributeKeyword"],"0021":["SQ","1","AssessmentTypeCodeSequence"],"0022":["SQ","1","ObservationBasisCodeSequence"],"0023":["LO","1","AssessmentLabel"],"0032":["CS","1","ConstraintType"],"0033":["UT","1","SpecificationSelectionGuidance"],"0034":["SQ","1","ConstraintValueSequence"],"0035":["SQ","1","RecommendedDefaultValueSequence"],"0036":["CS","1","ConstraintViolationSignificance"],"0037":["UT","1","ConstraintViolationCondition"],"0038":["CS","1","ModifiableConstraintFlag"]},"0088":{"0000":["UL","1","GenericGroupLength"],"0130":["SH","1","StorageMediaFileSetID"],"0140":["UI","1","StorageMediaFileSetUID"],"0200":["SQ","1","IconImageSequence"],"0904":["LO","1","TopicTitle"],"0906":["ST","1","TopicSubject"],"0910":["LO","1","TopicAuthor"],"0912":["LO","1-32","TopicKeywords"]},"0100":{"0000":["UL","1","GenericGroupLength"],"0410":["CS","1","SOPInstanceStatus"],"0420":["DT","1","SOPAuthorizationDateTime"],"0424":["LT","1","SOPAuthorizationComment"],"0426":["LO","1","AuthorizationEquipmentCertificationNumber"]},"0400":{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","MACIDNumber"],"0010":["UI","1","MACCalculationTransferSyntaxUID"],"0015":["CS","1","MACAlgorithm"],"0020":["AT","1-n","DataElementsSigned"],"0100":["UI","1","DigitalSignatureUID"],"0105":["DT","1","DigitalSignatureDateTime"],"0110":["CS","1","CertificateType"],"0115":["OB","1","CertificateOfSigner"],"0120":["OB","1","Signature"],"0305":["CS","1","CertifiedTimestampType"],"0310":["OB","1","CertifiedTimestamp"],"0315":["FL","1",""],"0401":["SQ","1","DigitalSignaturePurposeCodeSequence"],"0402":["SQ","1","ReferencedDigitalSignatureSequence"],"0403":["SQ","1","ReferencedSOPInstanceMACSequence"],"0404":["OB","1","MAC"],"0500":["SQ","1","EncryptedAttributesSequence"],"0510":["UI","1","EncryptedContentTransferSyntaxUID"],"0520":["OB","1","EncryptedContent"],"0550":["SQ","1","ModifiedAttributesSequence"],"0551":["SQ","1","NonconformingModifiedAttributesSequence"],"0552":["OB","1","NonconformingDataElementValue"],"0561":["SQ","1","OriginalAttributesSequence"],"0562":["DT","1","AttributeModificationDateTime"],"0563":["LO","1","ModifyingSystem"],"0564":["LO","1","SourceOfPreviousValues"],"0565":["CS","1","ReasonForTheAttributeModification"],"0600":["CS","1","InstanceOriginStatus"]},1e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","3","EscapeTriplet"],"0011":["US","3","RunLengthTriplet"],"0012":["US","1","HuffmanTableSize"],"0013":["US","3","HuffmanTableTriplet"],"0014":["US","1","ShiftTableSize"],"0015":["US","3","ShiftTableTriplet"]},1010:{"0000":["UL","1","GenericGroupLength"],"0004":["US","1-n","ZonalMap"]},2e3:{"0000":["UL","1","GenericGroupLength"],"0010":["IS","1","NumberOfCopies"],"001E":["SQ","1","PrinterConfigurationSequence"],"0020":["CS","1","PrintPriority"],"0030":["CS","1","MediumType"],"0040":["CS","1","FilmDestination"],"0050":["LO","1","FilmSessionLabel"],"0060":["IS","1","MemoryAllocation"],"0061":["IS","1","MaximumMemoryAllocation"],"0062":["CS","1","ColorImagePrintingFlag"],"0063":["CS","1","CollationFlag"],"0065":["CS","1","AnnotationFlag"],"0067":["CS","1","ImageOverlayFlag"],"0069":["CS","1","PresentationLUTFlag"],"006A":["CS","1","ImageBoxPresentationLUTFlag"],"00A0":["US","1","MemoryBitDepth"],"00A1":["US","1","PrintingBitDepth"],"00A2":["SQ","1","MediaInstalledSequence"],"00A4":["SQ","1","OtherMediaAvailableSequence"],"00A8":["SQ","1","SupportedImageDisplayFormatsSequence"],"0500":["SQ","1","ReferencedFilmBoxSequence"],"0510":["SQ","1","ReferencedStoredPrintSequence"]},2010:{"0000":["UL","1","GenericGroupLength"],"0010":["ST","1","ImageDisplayFormat"],"0030":["CS","1","AnnotationDisplayFormatID"],"0040":["CS","1","FilmOrientation"],"0050":["CS","1","FilmSizeID"],"0052":["CS","1","PrinterResolutionID"],"0054":["CS","1","DefaultPrinterResolutionID"],"0060":["CS","1","MagnificationType"],"0080":["CS","1","SmoothingType"],"00A6":["CS","1","DefaultMagnificationType"],"00A7":["CS","1-n","OtherMagnificationTypesAvailable"],"00A8":["CS","1","DefaultSmoothingType"],"00A9":["CS","1-n","OtherSmoothingTypesAvailable"],"0100":["CS","1","BorderDensity"],"0110":["CS","1","EmptyImageDensity"],"0120":["US","1","MinDensity"],"0130":["US","1","MaxDensity"],"0140":["CS","1","Trim"],"0150":["ST","1","ConfigurationInformation"],"0152":["LT","1","ConfigurationInformationDescription"],"0154":["IS","1","MaximumCollatedFilms"],"015E":["US","1","Illumination"],"0160":["US","1","ReflectedAmbientLight"],"0376":["DS","2","PrinterPixelSpacing"],"0500":["SQ","1","ReferencedFilmSessionSequence"],"0510":["SQ","1","ReferencedImageBoxSequence"],"0520":["SQ","1","ReferencedBasicAnnotationBoxSequence"]},2020:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","ImageBoxPosition"],"0020":["CS","1","Polarity"],"0030":["DS","1","RequestedImageSize"],"0040":["CS","1","RequestedDecimateCropBehavior"],"0050":["CS","1","RequestedResolutionID"],"00A0":["CS","1","RequestedImageSizeFlag"],"00A2":["CS","1","DecimateCropResult"],"0110":["SQ","1","BasicGrayscaleImageSequence"],"0111":["SQ","1","BasicColorImageSequence"],"0130":["SQ","1","ReferencedImageOverlayBoxSequence"],"0140":["SQ","1","ReferencedVOILUTBoxSequence"]},2030:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","AnnotationPosition"],"0020":["LO","1","TextString"]},2040:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","ReferencedOverlayPlaneSequence"],"0011":["US","1-99","ReferencedOverlayPlaneGroups"],"0020":["SQ","1","OverlayPixelDataSequence"],"0060":["CS","1","OverlayMagnificationType"],"0070":["CS","1","OverlaySmoothingType"],"0072":["CS","1","OverlayOrImageMagnification"],"0074":["US","1","MagnifyToNumberOfColumns"],"0080":["CS","1","OverlayForegroundDensity"],"0082":["CS","1","OverlayBackgroundDensity"],"0090":["CS","1","OverlayMode"],"0100":["CS","1","ThresholdDensity"],"0500":["SQ","1","ReferencedImageBoxSequenceRetired"]},2050:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PresentationLUTSequence"],"0020":["CS","1","PresentationLUTShape"],"0500":["SQ","1","ReferencedPresentationLUTSequence"]},2100:{"0000":["UL","1","GenericGroupLength"],"0010":["SH","1","PrintJobID"],"0020":["CS","1","ExecutionStatus"],"0030":["CS","1","ExecutionStatusInfo"],"0040":["DA","1","CreationDate"],"0050":["TM","1","CreationTime"],"0070":["AE","1","Originator"],"0140":["AE","1","DestinationAE"],"0160":["SH","1","OwnerID"],"0170":["IS","1","NumberOfFilms"],"0500":["SQ","1","ReferencedPrintJobSequencePullStoredPrint"]},2110:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","PrinterStatus"],"0020":["CS","1","PrinterStatusInfo"],"0030":["LO","1","PrinterName"],"0099":["SH","1","PrintQueueID"]},2120:{"0000":["UL","1","GenericGroupLength"],"0010":["CS","1","QueueStatus"],"0050":["SQ","1","PrintJobDescriptionSequence"],"0070":["SQ","1","ReferencedPrintJobSequence"]},2130:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","PrintManagementCapabilitiesSequence"],"0015":["SQ","1","PrinterCharacteristicsSequence"],"0030":["SQ","1","FilmBoxContentSequence"],"0040":["SQ","1","ImageBoxContentSequence"],"0050":["SQ","1","AnnotationContentSequence"],"0060":["SQ","1","ImageOverlayBoxContentSequence"],"0080":["SQ","1","PresentationLUTContentSequence"],"00A0":["SQ","1","ProposedStudySequence"],"00C0":["SQ","1","OriginalImageSequence"]},2200:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LabelUsingInformationExtractedFromInstances"],"0002":["UT","1","LabelText"],"0003":["CS","1","LabelStyleSelection"],"0004":["LT","1","MediaDisposition"],"0005":["LT","1","BarcodeValue"],"0006":["CS","1","BarcodeSymbology"],"0007":["CS","1","AllowMediaSplitting"],"0008":["CS","1","IncludeNonDICOMObjects"],"0009":["CS","1","IncludeDisplayApplication"],"000A":["CS","1","PreserveCompositeInstancesAfterMediaCreation"],"000B":["US","1","TotalNumberOfPiecesOfMediaCreated"],"000C":["LO","1","RequestedMediaApplicationProfile"],"000D":["SQ","1","ReferencedStorageMediaSequence"],"000E":["AT","1-n","FailureAttributes"],"000F":["CS","1","AllowLossyCompression"],"0020":["CS","1","RequestPriority"]},3002:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTImageLabel"],"0003":["LO","1","RTImageName"],"0004":["ST","1","RTImageDescription"],"000A":["CS","1","ReportedValuesOrigin"],"000C":["CS","1","RTImagePlane"],"000D":["DS","3","XRayImageReceptorTranslation"],"000E":["DS","1","XRayImageReceptorAngle"],"0010":["DS","6","RTImageOrientation"],"0011":["DS","2","ImagePlanePixelSpacing"],"0012":["DS","2","RTImagePosition"],"0020":["SH","1","RadiationMachineName"],"0022":["DS","1","RadiationMachineSAD"],"0024":["DS","1","RadiationMachineSSD"],"0026":["DS","1","RTImageSID"],"0028":["DS","1","SourceToReferenceObjectDistance"],"0029":["IS","1","FractionNumber"],"0030":["SQ","1","ExposureSequence"],"0032":["DS","1","MetersetExposure"],"0034":["DS","4","DiaphragmPosition"],"0040":["SQ","1","FluenceMapSequence"],"0041":["CS","1","FluenceDataSource"],"0042":["DS","1","FluenceDataScale"],"0050":["SQ","1","PrimaryFluenceModeSequence"],"0051":["CS","1","FluenceMode"],"0052":["SH","1","FluenceModeID"]},3004:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","DVHType"],"0002":["CS","1","DoseUnits"],"0004":["CS","1","DoseType"],"0005":["CS","1","SpatialTransformOfDose"],"0006":["LO","1","DoseComment"],"0008":["DS","3","NormalizationPoint"],"000A":["CS","1","DoseSummationType"],"000C":["DS","2-n","GridFrameOffsetVector"],"000E":["DS","1","DoseGridScaling"],"0010":["SQ","1","RTDoseROISequence"],"0012":["DS","1","DoseValue"],"0014":["CS","1-3","TissueHeterogeneityCorrection"],"0040":["DS","3","DVHNormalizationPoint"],"0042":["DS","1","DVHNormalizationDoseValue"],"0050":["SQ","1","DVHSequence"],"0052":["DS","1","DVHDoseScaling"],"0054":["CS","1","DVHVolumeUnits"],"0056":["IS","1","DVHNumberOfBins"],"0058":["DS","2-2n","DVHData"],"0060":["SQ","1","DVHReferencedROISequence"],"0062":["CS","1","DVHROIContributionType"],"0070":["DS","1","DVHMinimumDose"],"0072":["DS","1","DVHMaximumDose"],"0074":["DS","1","DVHMeanDose"]},3006:{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","StructureSetLabel"],"0004":["LO","1","StructureSetName"],"0006":["ST","1","StructureSetDescription"],"0008":["DA","1","StructureSetDate"],"0009":["TM","1","StructureSetTime"],"0010":["SQ","1","ReferencedFrameOfReferenceSequence"],"0012":["SQ","1","RTReferencedStudySequence"],"0014":["SQ","1","RTReferencedSeriesSequence"],"0016":["SQ","1","ContourImageSequence"],"0018":["SQ","1","PredecessorStructureSetSequence"],"0020":["SQ","1","StructureSetROISequence"],"0022":["IS","1","ROINumber"],"0024":["UI","1","ReferencedFrameOfReferenceUID"],"0026":["LO","1","ROIName"],"0028":["ST","1","ROIDescription"],"002A":["IS","3","ROIDisplayColor"],"002C":["DS","1","ROIVolume"],"0030":["SQ","1","RTRelatedROISequence"],"0033":["CS","1","RTROIRelationship"],"0036":["CS","1","ROIGenerationAlgorithm"],"0037":["SQ","1","ROIDerivationAlgorithmIdentificationSequence"],"0038":["LO","1","ROIGenerationDescription"],"0039":["SQ","1","ROIContourSequence"],"0040":["SQ","1","ContourSequence"],"0042":["CS","1","ContourGeometricType"],"0044":["DS","1","ContourSlabThickness"],"0045":["DS","3","ContourOffsetVector"],"0046":["IS","1","NumberOfContourPoints"],"0048":["IS","1","ContourNumber"],"0049":["IS","1-n","AttachedContours"],"004A":["SQ","1","SourcePixelPlanesCharacteristicsSequence"],"0050":["DS","3-3n","ContourData"],"0080":["SQ","1","RTROIObservationsSequence"],"0082":["IS","1","ObservationNumber"],"0084":["IS","1","ReferencedROINumber"],"0085":["SH","1","ROIObservationLabel"],"0086":["SQ","1","RTROIIdentificationCodeSequence"],"0088":["ST","1","ROIObservationDescription"],"00A0":["SQ","1","RelatedRTROIObservationsSequence"],"00A4":["CS","1","RTROIInterpretedType"],"00A6":["PN","1","ROIInterpreter"],"00B0":["SQ","1","ROIPhysicalPropertiesSequence"],"00B2":["CS","1","ROIPhysicalProperty"],"00B4":["DS","1","ROIPhysicalPropertyValue"],"00B6":["SQ","1","ROIElementalCompositionSequence"],"00B7":["US","1","ROIElementalCompositionAtomicNumber"],"00B8":["FL","1","ROIElementalCompositionAtomicMassFraction"],"00B9":["SQ","1","AdditionalRTROIIdentificationCodeSequence"],"00C0":["SQ","1","FrameOfReferenceRelationshipSequence"],"00C2":["UI","1","RelatedFrameOfReferenceUID"],"00C4":["CS","1","FrameOfReferenceTransformationType"],"00C6":["DS","16","FrameOfReferenceTransformationMatrix"],"00C8":["LO","1","FrameOfReferenceTransformationComment"],"00C9":["SQ","1","PatientLocationCoordinatesSequence"],"00CA":["SQ","1","PatientLocationCoordinatesCodeSequence"],"00CB":["SQ","1","PatientSupportPositionSequence"]},3008:{"0000":["UL","1","GenericGroupLength"],"0010":["SQ","1","MeasuredDoseReferenceSequence"],"0012":["ST","1","MeasuredDoseDescription"],"0014":["CS","1","MeasuredDoseType"],"0016":["DS","1","MeasuredDoseValue"],"0020":["SQ","1","TreatmentSessionBeamSequence"],"0021":["SQ","1","TreatmentSessionIonBeamSequence"],"0022":["IS","1","CurrentFractionNumber"],"0024":["DA","1","TreatmentControlPointDate"],"0025":["TM","1","TreatmentControlPointTime"],"002A":["CS","1","TreatmentTerminationStatus"],"002B":["SH","1","TreatmentTerminationCode"],"002C":["CS","1","TreatmentVerificationStatus"],"0030":["SQ","1","ReferencedTreatmentRecordSequence"],"0032":["DS","1","SpecifiedPrimaryMeterset"],"0033":["DS","1","SpecifiedSecondaryMeterset"],"0036":["DS","1","DeliveredPrimaryMeterset"],"0037":["DS","1","DeliveredSecondaryMeterset"],"003A":["DS","1","SpecifiedTreatmentTime"],"003B":["DS","1","DeliveredTreatmentTime"],"0040":["SQ","1","ControlPointDeliverySequence"],"0041":["SQ","1","IonControlPointDeliverySequence"],"0042":["DS","1","SpecifiedMeterset"],"0044":["DS","1","DeliveredMeterset"],"0045":["FL","1","MetersetRateSet"],"0046":["FL","1","MetersetRateDelivered"],"0047":["FL","1-n","ScanSpotMetersetsDelivered"],"0048":["DS","1","DoseRateDelivered"],"0050":["SQ","1","TreatmentSummaryCalculatedDoseReferenceSequence"],"0052":["DS","1","CumulativeDoseToDoseReference"],"0054":["DA","1","FirstTreatmentDate"],"0056":["DA","1","MostRecentTreatmentDate"],"005A":["IS","1","NumberOfFractionsDelivered"],"0060":["SQ","1","OverrideSequence"],"0061":["AT","1","ParameterSequencePointer"],"0062":["AT","1","OverrideParameterPointer"],"0063":["IS","1","ParameterItemIndex"],"0064":["IS","1","MeasuredDoseReferenceNumber"],"0065":["AT","1","ParameterPointer"],"0066":["ST","1","OverrideReason"],"0067":["US","1","ParameterValueNumber"],"0068":["SQ","1","CorrectedParameterSequence"],"006A":["FL","1","CorrectionValue"],"0070":["SQ","1","CalculatedDoseReferenceSequence"],"0072":["IS","1","CalculatedDoseReferenceNumber"],"0074":["ST","1","CalculatedDoseReferenceDescription"],"0076":["DS","1","CalculatedDoseReferenceDoseValue"],"0078":["DS","1","StartMeterset"],"007A":["DS","1","EndMeterset"],"0080":["SQ","1","ReferencedMeasuredDoseReferenceSequence"],"0082":["IS","1","ReferencedMeasuredDoseReferenceNumber"],"0090":["SQ","1","ReferencedCalculatedDoseReferenceSequence"],"0092":["IS","1","ReferencedCalculatedDoseReferenceNumber"],"00A0":["SQ","1","BeamLimitingDeviceLeafPairsSequence"],"00B0":["SQ","1","RecordedWedgeSequence"],"00C0":["SQ","1","RecordedCompensatorSequence"],"00D0":["SQ","1","RecordedBlockSequence"],"00D1":["SQ","1","RecordedBlockSlabSequence"],"00E0":["SQ","1","TreatmentSummaryMeasuredDoseReferenceSequence"],"00F0":["SQ","1","RecordedSnoutSequence"],"00F2":["SQ","1","RecordedRangeShifterSequence"],"00F4":["SQ","1","RecordedLateralSpreadingDeviceSequence"],"00F6":["SQ","1","RecordedRangeModulatorSequence"],"0100":["SQ","1","RecordedSourceSequence"],"0105":["LO","1","SourceSerialNumber"],"0110":["SQ","1","TreatmentSessionApplicationSetupSequence"],"0116":["CS","1","ApplicationSetupCheck"],"0120":["SQ","1","RecordedBrachyAccessoryDeviceSequence"],"0122":["IS","1","ReferencedBrachyAccessoryDeviceNumber"],"0130":["SQ","1","RecordedChannelSequence"],"0132":["DS","1","SpecifiedChannelTotalTime"],"0134":["DS","1","DeliveredChannelTotalTime"],"0136":["IS","1","SpecifiedNumberOfPulses"],"0138":["IS","1","DeliveredNumberOfPulses"],"013A":["DS","1","SpecifiedPulseRepetitionInterval"],"013C":["DS","1","DeliveredPulseRepetitionInterval"],"0140":["SQ","1","RecordedSourceApplicatorSequence"],"0142":["IS","1","ReferencedSourceApplicatorNumber"],"0150":["SQ","1","RecordedChannelShieldSequence"],"0152":["IS","1","ReferencedChannelShieldNumber"],"0160":["SQ","1","BrachyControlPointDeliveredSequence"],"0162":["DA","1","SafePositionExitDate"],"0164":["TM","1","SafePositionExitTime"],"0166":["DA","1","SafePositionReturnDate"],"0168":["TM","1","SafePositionReturnTime"],"0171":["SQ","1","PulseSpecificBrachyControlPointDeliveredSequence"],"0172":["US","1","PulseNumber"],"0173":["SQ","1","BrachyPulseControlPointDeliveredSequence"],"0200":["CS","1","CurrentTreatmentStatus"],"0202":["ST","1","TreatmentStatusComment"],"0220":["SQ","1","FractionGroupSummarySequence"],"0223":["IS","1","ReferencedFractionNumber"],"0224":["CS","1","FractionGroupType"],"0230":["CS","1","BeamStopperPosition"],"0240":["SQ","1","FractionStatusSummarySequence"],"0250":["DA","1","TreatmentDate"],"0251":["TM","1","TreatmentTime"]},"300A":{"0000":["UL","1","GenericGroupLength"],"0002":["SH","1","RTPlanLabel"],"0003":["LO","1","RTPlanName"],"0004":["ST","1","RTPlanDescription"],"0006":["DA","1","RTPlanDate"],"0007":["TM","1","RTPlanTime"],"0009":["LO","1-n","TreatmentProtocols"],"000A":["CS","1","PlanIntent"],"000B":["LO","1-n","TreatmentSites"],"000C":["CS","1","RTPlanGeometry"],"000E":["ST","1","PrescriptionDescription"],"0010":["SQ","1","DoseReferenceSequence"],"0012":["IS","1","DoseReferenceNumber"],"0013":["UI","1","DoseReferenceUID"],"0014":["CS","1","DoseReferenceStructureType"],"0015":["CS","1","NominalBeamEnergyUnit"],"0016":["LO","1","DoseReferenceDescription"],"0018":["DS","3","DoseReferencePointCoordinates"],"001A":["DS","1","NominalPriorDose"],"0020":["CS","1","DoseReferenceType"],"0021":["DS","1","ConstraintWeight"],"0022":["DS","1","DeliveryWarningDose"],"0023":["DS","1","DeliveryMaximumDose"],"0025":["DS","1","TargetMinimumDose"],"0026":["DS","1","TargetPrescriptionDose"],"0027":["DS","1","TargetMaximumDose"],"0028":["DS","1","TargetUnderdoseVolumeFraction"],"002A":["DS","1","OrganAtRiskFullVolumeDose"],"002B":["DS","1","OrganAtRiskLimitDose"],"002C":["DS","1","OrganAtRiskMaximumDose"],"002D":["DS","1","OrganAtRiskOverdoseVolumeFraction"],"0040":["SQ","1","ToleranceTableSequence"],"0042":["IS","1","ToleranceTableNumber"],"0043":["SH","1","ToleranceTableLabel"],"0044":["DS","1","GantryAngleTolerance"],"0046":["DS","1","BeamLimitingDeviceAngleTolerance"],"0048":["SQ","1","BeamLimitingDeviceToleranceSequence"],"004A":["DS","1","BeamLimitingDevicePositionTolerance"],"004B":["FL","1","SnoutPositionTolerance"],"004C":["DS","1","PatientSupportAngleTolerance"],"004E":["DS","1","TableTopEccentricAngleTolerance"],"004F":["FL","1","TableTopPitchAngleTolerance"],"0050":["FL","1","TableTopRollAngleTolerance"],"0051":["DS","1","TableTopVerticalPositionTolerance"],"0052":["DS","1","TableTopLongitudinalPositionTolerance"],"0053":["DS","1","TableTopLateralPositionTolerance"],"0055":["CS","1","RTPlanRelationship"],"0070":["SQ","1","FractionGroupSequence"],"0071":["IS","1","FractionGroupNumber"],"0072":["LO","1","FractionGroupDescription"],"0078":["IS","1","NumberOfFractionsPlanned"],"0079":["IS","1","NumberOfFractionPatternDigitsPerDay"],"007A":["IS","1","RepeatFractionCycleLength"],"007B":["LT","1","FractionPattern"],"0080":["IS","1","NumberOfBeams"],"0082":["DS","3","BeamDoseSpecificationPoint"],"0083":["UI","1","ReferencedDoseReferenceUID"],"0084":["DS","1","BeamDose"],"0086":["DS","1","BeamMeterset"],"0088":["FL","1","BeamDosePointDepth"],"0089":["FL","1","BeamDosePointEquivalentDepth"],"008A":["FL","1","BeamDosePointSSD"],"008B":["CS","1","BeamDoseMeaning"],"008C":["SQ","1","BeamDoseVerificationControlPointSequence"],"008D":["FL","1","AverageBeamDosePointDepth"],"008E":["FL","1","AverageBeamDosePointEquivalentDepth"],"008F":["FL","1","AverageBeamDosePointSSD"],"0090":["CS","1","BeamDoseType"],"0091":["DS","1","AlternateBeamDose"],"0092":["CS","1","AlternateBeamDoseType"],"0093":["CS","1","DepthValueAveragingFlag"],"0094":["DS","1","BeamDosePointSourceToExternalContourDistance"],"00A0":["IS","1","NumberOfBrachyApplicationSetups"],"00A2":["DS","3","BrachyApplicationSetupDoseSpecificationPoint"],"00A4":["DS","1","BrachyApplicationSetupDose"],"00B0":["SQ","1","BeamSequence"],"00B2":["SH","1","TreatmentMachineName"],"00B3":["CS","1","PrimaryDosimeterUnit"],"00B4":["DS","1","SourceAxisDistance"],"00B6":["SQ","1","BeamLimitingDeviceSequence"],"00B8":["CS","1","RTBeamLimitingDeviceType"],"00BA":["DS","1","SourceToBeamLimitingDeviceDistance"],"00BB":["FL","1","IsocenterToBeamLimitingDeviceDistance"],"00BC":["IS","1","NumberOfLeafJawPairs"],"00BE":["DS","3-n","LeafPositionBoundaries"],"00C0":["IS","1","BeamNumber"],"00C2":["LO","1","BeamName"],"00C3":["ST","1","BeamDescription"],"00C4":["CS","1","BeamType"],"00C5":["FD","1","BeamDeliveryDurationLimit"],"00C6":["CS","1","RadiationType"],"00C7":["CS","1","HighDoseTechniqueType"],"00C8":["IS","1","ReferenceImageNumber"],"00CA":["SQ","1","PlannedVerificationImageSequence"],"00CC":["LO","1-n","ImagingDeviceSpecificAcquisitionParameters"],"00CE":["CS","1","TreatmentDeliveryType"],"00D0":["IS","1","NumberOfWedges"],"00D1":["SQ","1","WedgeSequence"],"00D2":["IS","1","WedgeNumber"],"00D3":["CS","1","WedgeType"],"00D4":["SH","1","WedgeID"],"00D5":["IS","1","WedgeAngle"],"00D6":["DS","1","WedgeFactor"],"00D7":["FL","1","TotalWedgeTrayWaterEquivalentThickness"],"00D8":["DS","1","WedgeOrientation"],"00D9":["FL","1","IsocenterToWedgeTrayDistance"],"00DA":["DS","1","SourceToWedgeTrayDistance"],"00DB":["FL","1","WedgeThinEdgePosition"],"00DC":["SH","1","BolusID"],"00DD":["ST","1","BolusDescription"],"00DE":["DS","1","EffectiveWedgeAngle"],"00E0":["IS","1","NumberOfCompensators"],"00E1":["SH","1","MaterialID"],"00E2":["DS","1","TotalCompensatorTrayFactor"],"00E3":["SQ","1","CompensatorSequence"],"00E4":["IS","1","CompensatorNumber"],"00E5":["SH","1","CompensatorID"],"00E6":["DS","1","SourceToCompensatorTrayDistance"],"00E7":["IS","1","CompensatorRows"],"00E8":["IS","1","CompensatorColumns"],"00E9":["DS","2","CompensatorPixelSpacing"],"00EA":["DS","2","CompensatorPosition"],"00EB":["DS","1-n","CompensatorTransmissionData"],"00EC":["DS","1-n","CompensatorThicknessData"],"00ED":["IS","1","NumberOfBoli"],"00EE":["CS","1","CompensatorType"],"00EF":["SH","1","CompensatorTrayID"],"00F0":["IS","1","NumberOfBlocks"],"00F2":["DS","1","TotalBlockTrayFactor"],"00F3":["FL","1","TotalBlockTrayWaterEquivalentThickness"],"00F4":["SQ","1","BlockSequence"],"00F5":["SH","1","BlockTrayID"],"00F6":["DS","1","SourceToBlockTrayDistance"],"00F7":["FL","1","IsocenterToBlockTrayDistance"],"00F8":["CS","1","BlockType"],"00F9":["LO","1","AccessoryCode"],"00FA":["CS","1","BlockDivergence"],"00FB":["CS","1","BlockMountingPosition"],"00FC":["IS","1","BlockNumber"],"00FE":["LO","1","BlockName"],"0100":["DS","1","BlockThickness"],"0102":["DS","1","BlockTransmission"],"0104":["IS","1","BlockNumberOfPoints"],"0106":["DS","2-2n","BlockData"],"0107":["SQ","1","ApplicatorSequence"],"0108":["SH","1","ApplicatorID"],"0109":["CS","1","ApplicatorType"],"010A":["LO","1","ApplicatorDescription"],"010C":["DS","1","CumulativeDoseReferenceCoefficient"],"010E":["DS","1","FinalCumulativeMetersetWeight"],"0110":["IS","1","NumberOfControlPoints"],"0111":["SQ","1","ControlPointSequence"],"0112":["IS","1","ControlPointIndex"],"0114":["DS","1","NominalBeamEnergy"],"0115":["DS","1","DoseRateSet"],"0116":["SQ","1","WedgePositionSequence"],"0118":["CS","1","WedgePosition"],"011A":["SQ","1","BeamLimitingDevicePositionSequence"],"011C":["DS","2-2n","LeafJawPositions"],"011E":["DS","1","GantryAngle"],"011F":["CS","1","GantryRotationDirection"],"0120":["DS","1","BeamLimitingDeviceAngle"],"0121":["CS","1","BeamLimitingDeviceRotationDirection"],"0122":["DS","1","PatientSupportAngle"],"0123":["CS","1","PatientSupportRotationDirection"],"0124":["DS","1","TableTopEccentricAxisDistance"],"0125":["DS","1","TableTopEccentricAngle"],"0126":["CS","1","TableTopEccentricRotationDirection"],"0128":["DS","1","TableTopVerticalPosition"],"0129":["DS","1","TableTopLongitudinalPosition"],"012A":["DS","1","TableTopLateralPosition"],"012C":["DS","3","IsocenterPosition"],"012E":["DS","3","SurfaceEntryPoint"],"0130":["DS","1","SourceToSurfaceDistance"],"0131":["FL","1","AverageBeamDosePointSourceToExternalContourDistance"],"0132":["FL","1","SourceToExternalContourDistance"],"0133":["FL","3","ExternalContourEntryPoint"],"0134":["DS","1","CumulativeMetersetWeight"],"0140":["FL","1","TableTopPitchAngle"],"0142":["CS","1","TableTopPitchRotationDirection"],"0144":["FL","1","TableTopRollAngle"],"0146":["CS","1","TableTopRollRotationDirection"],"0148":["FL","1","HeadFixationAngle"],"014A":["FL","1","GantryPitchAngle"],"014C":["CS","1","GantryPitchRotationDirection"],"014E":["FL","1","GantryPitchAngleTolerance"],"0150":["CS","1","FixationEye"],"0151":["DS","1","ChairHeadFramePosition"],"0152":["DS","1","HeadFixationAngleTolerance"],"0153":["DS","1","ChairHeadFramePositionTolerance"],"0154":["DS","1","FixationLightAzimuthalAngleTolerance"],"0155":["DS","1","FixationLightPolarAngleTolerance"],"0180":["SQ","1","PatientSetupSequence"],"0182":["IS","1","PatientSetupNumber"],"0183":["LO","1","PatientSetupLabel"],"0184":["LO","1","PatientAdditionalPosition"],"0190":["SQ","1","FixationDeviceSequence"],"0192":["CS","1","FixationDeviceType"],"0194":["SH","1","FixationDeviceLabel"],"0196":["ST","1","FixationDeviceDescription"],"0198":["SH","1","FixationDevicePosition"],"0199":["FL","1","FixationDevicePitchAngle"],"019A":["FL","1","FixationDeviceRollAngle"],"01A0":["SQ","1","ShieldingDeviceSequence"],"01A2":["CS","1","ShieldingDeviceType"],"01A4":["SH","1","ShieldingDeviceLabel"],"01A6":["ST","1","ShieldingDeviceDescription"],"01A8":["SH","1","ShieldingDevicePosition"],"01B0":["CS","1","SetupTechnique"],"01B2":["ST","1","SetupTechniqueDescription"],"01B4":["SQ","1","SetupDeviceSequence"],"01B6":["CS","1","SetupDeviceType"],"01B8":["SH","1","SetupDeviceLabel"],"01BA":["ST","1","SetupDeviceDescription"],"01BC":["DS","1","SetupDeviceParameter"],"01D0":["ST","1","SetupReferenceDescription"],"01D2":["DS","1","TableTopVerticalSetupDisplacement"],"01D4":["DS","1","TableTopLongitudinalSetupDisplacement"],"01D6":["DS","1","TableTopLateralSetupDisplacement"],"0200":["CS","1","BrachyTreatmentTechnique"],"0202":["CS","1","BrachyTreatmentType"],"0206":["SQ","1","TreatmentMachineSequence"],"0210":["SQ","1","SourceSequence"],"0212":["IS","1","SourceNumber"],"0214":["CS","1","SourceType"],"0216":["LO","1","SourceManufacturer"],"0218":["DS","1","ActiveSourceDiameter"],"021A":["DS","1","ActiveSourceLength"],"021B":["SH","1","SourceModelID"],"021C":["LO","1","SourceDescription"],"0222":["DS","1","SourceEncapsulationNominalThickness"],"0224":["DS","1","SourceEncapsulationNominalTransmission"],"0226":["LO","1","SourceIsotopeName"],"0228":["DS","1","SourceIsotopeHalfLife"],"0229":["CS","1","SourceStrengthUnits"],"022A":["DS","1","ReferenceAirKermaRate"],"022B":["DS","1","SourceStrength"],"022C":["DA","1","SourceStrengthReferenceDate"],"022E":["TM","1","SourceStrengthReferenceTime"],"0230":["SQ","1","ApplicationSetupSequence"],"0232":["CS","1","ApplicationSetupType"],"0234":["IS","1","ApplicationSetupNumber"],"0236":["LO","1","ApplicationSetupName"],"0238":["LO","1","ApplicationSetupManufacturer"],"0240":["IS","1","TemplateNumber"],"0242":["SH","1","TemplateType"],"0244":["LO","1","TemplateName"],"0250":["DS","1","TotalReferenceAirKerma"],"0260":["SQ","1","BrachyAccessoryDeviceSequence"],"0262":["IS","1","BrachyAccessoryDeviceNumber"],"0263":["SH","1","BrachyAccessoryDeviceID"],"0264":["CS","1","BrachyAccessoryDeviceType"],"0266":["LO","1","BrachyAccessoryDeviceName"],"026A":["DS","1","BrachyAccessoryDeviceNominalThickness"],"026C":["DS","1","BrachyAccessoryDeviceNominalTransmission"],"0271":["DS","1","ChannelEffectiveLength"],"0272":["DS","1","ChannelInnerLength"],"0273":["SH","1","AfterloaderChannelID"],"0274":["DS","1","SourceApplicatorTipLength"],"0280":["SQ","1","ChannelSequence"],"0282":["IS","1","ChannelNumber"],"0284":["DS","1","ChannelLength"],"0286":["DS","1","ChannelTotalTime"],"0288":["CS","1","SourceMovementType"],"028A":["IS","1","NumberOfPulses"],"028C":["DS","1","PulseRepetitionInterval"],"0290":["IS","1","SourceApplicatorNumber"],"0291":["SH","1","SourceApplicatorID"],"0292":["CS","1","SourceApplicatorType"],"0294":["LO","1","SourceApplicatorName"],"0296":["DS","1","SourceApplicatorLength"],"0298":["LO","1","SourceApplicatorManufacturer"],"029C":["DS","1","SourceApplicatorWallNominalThickness"],"029E":["DS","1","SourceApplicatorWallNominalTransmission"],"02A0":["DS","1","SourceApplicatorStepSize"],"02A1":["IS","1","ApplicatorShapeReferencedROINumber"],"02A2":["IS","1","TransferTubeNumber"],"02A4":["DS","1","TransferTubeLength"],"02B0":["SQ","1","ChannelShieldSequence"],"02B2":["IS","1","ChannelShieldNumber"],"02B3":["SH","1","ChannelShieldID"],"02B4":["LO","1","ChannelShieldName"],"02B8":["DS","1","ChannelShieldNominalThickness"],"02BA":["DS","1","ChannelShieldNominalTransmission"],"02C8":["DS","1","FinalCumulativeTimeWeight"],"02D0":["SQ","1","BrachyControlPointSequence"],"02D2":["DS","1","ControlPointRelativePosition"],"02D4":["DS","3","ControlPoint3DPosition"],"02D6":["DS","1","CumulativeTimeWeight"],"02E0":["CS","1","CompensatorDivergence"],"02E1":["CS","1","CompensatorMountingPosition"],"02E2":["DS","1-n","SourceToCompensatorDistance"],"02E3":["FL","1","TotalCompensatorTrayWaterEquivalentThickness"],"02E4":["FL","1","IsocenterToCompensatorTrayDistance"],"02E5":["FL","1","CompensatorColumnOffset"],"02E6":["FL","1-n","IsocenterToCompensatorDistances"],"02E7":["FL","1","CompensatorRelativeStoppingPowerRatio"],"02E8":["FL","1","CompensatorMillingToolDiameter"],"02EA":["SQ","1","IonRangeCompensatorSequence"],"02EB":["LT","1","CompensatorDescription"],"0302":["IS","1","RadiationMassNumber"],"0304":["IS","1","RadiationAtomicNumber"],"0306":["SS","1","RadiationChargeState"],"0308":["CS","1","ScanMode"],"0309":["CS","1","ModulatedScanModeType"],"030A":["FL","2","VirtualSourceAxisDistances"],"030C":["SQ","1","SnoutSequence"],"030D":["FL","1","SnoutPosition"],"030F":["SH","1","SnoutID"],"0312":["IS","1","NumberOfRangeShifters"],"0314":["SQ","1","RangeShifterSequence"],"0316":["IS","1","RangeShifterNumber"],"0318":["SH","1","RangeShifterID"],"0320":["CS","1","RangeShifterType"],"0322":["LO","1","RangeShifterDescription"],"0330":["IS","1","NumberOfLateralSpreadingDevices"],"0332":["SQ","1","LateralSpreadingDeviceSequence"],"0334":["IS","1","LateralSpreadingDeviceNumber"],"0336":["SH","1","LateralSpreadingDeviceID"],"0338":["CS","1","LateralSpreadingDeviceType"],"033A":["LO","1","LateralSpreadingDeviceDescription"],"033C":["FL","1","LateralSpreadingDeviceWaterEquivalentThickness"],"0340":["IS","1","NumberOfRangeModulators"],"0342":["SQ","1","RangeModulatorSequence"],"0344":["IS","1","RangeModulatorNumber"],"0346":["SH","1","RangeModulatorID"],"0348":["CS","1","RangeModulatorType"],"034A":["LO","1","RangeModulatorDescription"],"034C":["SH","1","BeamCurrentModulationID"],"0350":["CS","1","PatientSupportType"],"0352":["SH","1","PatientSupportID"],"0354":["LO","1","PatientSupportAccessoryCode"],"0355":["LO","1","TrayAccessoryCode"],"0356":["FL","1","FixationLightAzimuthalAngle"],"0358":["FL","1","FixationLightPolarAngle"],"035A":["FL","1","MetersetRate"],"0360":["SQ","1","RangeShifterSettingsSequence"],"0362":["LO","1","RangeShifterSetting"],"0364":["FL","1","IsocenterToRangeShifterDistance"],"0366":["FL","1","RangeShifterWaterEquivalentThickness"],"0370":["SQ","1","LateralSpreadingDeviceSettingsSequence"],"0372":["LO","1","LateralSpreadingDeviceSetting"],"0374":["FL","1","IsocenterToLateralSpreadingDeviceDistance"],"0380":["SQ","1","RangeModulatorSettingsSequence"],"0382":["FL","1","RangeModulatorGatingStartValue"],"0384":["FL","1","RangeModulatorGatingStopValue"],"0386":["FL","1","RangeModulatorGatingStartWaterEquivalentThickness"],"0388":["FL","1","RangeModulatorGatingStopWaterEquivalentThickness"],"038A":["FL","1","IsocenterToRangeModulatorDistance"],"038F":["FL","1-n","ScanSpotTimeOffset"],"0390":["SH","1","ScanSpotTuneID"],"0391":["IS","1-n","ScanSpotPrescribedIndices"],"0392":["IS","1","NumberOfScanSpotPositions"],"0393":["CS","1","ScanSpotReordered"],"0394":["FL","1-n","ScanSpotPositionMap"],"0395":["CS","1","ScanSpotReorderingAllowed"],"0396":["FL","1-n","ScanSpotMetersetWeights"],"0398":["FL","2","ScanningSpotSize"],"0399":["FL","2-2n","ScanSpotSizesDelivered"],"039A":["IS","1","NumberOfPaintings"],"03A0":["SQ","1","IonToleranceTableSequence"],"03A2":["SQ","1","IonBeamSequence"],"03A4":["SQ","1","IonBeamLimitingDeviceSequence"],"03A6":["SQ","1","IonBlockSequence"],"03A8":["SQ","1","IonControlPointSequence"],"03AA":["SQ","1","IonWedgeSequence"],"03AC":["SQ","1","IonWedgePositionSequence"],"0401":["SQ","1","ReferencedSetupImageSequence"],"0402":["ST","1","SetupImageComment"],"0410":["SQ","1","MotionSynchronizationSequence"],"0412":["FL","3","ControlPointOrientation"],"0420":["SQ","1","GeneralAccessorySequence"],"0421":["SH","1","GeneralAccessoryID"],"0422":["ST","1","GeneralAccessoryDescription"],"0423":["CS","1","GeneralAccessoryType"],"0424":["IS","1","GeneralAccessoryNumber"],"0425":["FL","1","SourceToGeneralAccessoryDistance"],"0426":["DS","1","IsocenterToGeneralAccessoryDistance"],"0431":["SQ","1","ApplicatorGeometrySequence"],"0432":["CS","1","ApplicatorApertureShape"],"0433":["FL","1","ApplicatorOpening"],"0434":["FL","1","ApplicatorOpeningX"],"0435":["FL","1","ApplicatorOpeningY"],"0436":["FL","1","SourceToApplicatorMountingPositionDistance"],"0440":["IS","1","NumberOfBlockSlabItems"],"0441":["SQ","1","BlockSlabSequence"],"0442":["DS","1","BlockSlabThickness"],"0443":["US","1","BlockSlabNumber"],"0450":["SQ","1","DeviceMotionControlSequence"],"0451":["CS","1","DeviceMotionExecutionMode"],"0452":["CS","1","DeviceMotionObservationMode"],"0453":["SQ","1","DeviceMotionParameterCodeSequence"],"0501":["FL","1","DistalDepthFraction"],"0502":["FL","1","DistalDepth"],"0503":["FL","2","NominalRangeModulationFractions"],"0504":["FL","2","NominalRangeModulatedRegionDepths"],"0505":["SQ","1","DepthDoseParametersSequence"],"0506":["SQ","1","DeliveredDepthDoseParametersSequence"],"0507":["FL","1","DeliveredDistalDepthFraction"],"0508":["FL","1","DeliveredDistalDepth"],"0509":["FL","2","DeliveredNominalRangeModulationFractions"],"0510":["FL","2","DeliveredNominalRangeModulatedRegionDepths"],"0511":["CS","1","DeliveredReferenceDoseDefinition"],"0512":["CS","1","ReferenceDoseDefinition"],"0600":["US","1","RTControlPointIndex"],"0601":["US","1","RadiationGenerationModeIndex"],"0602":["US","1","ReferencedDefinedDeviceIndex"],"0603":["US","1","RadiationDoseIdentificationIndex"],"0604":["US","1","NumberOfRTControlPoints"],"0605":["US","1","ReferencedRadiationGenerationModeIndex"],"0606":["US","1","TreatmentPositionIndex"],"0607":["US","1","ReferencedDeviceIndex"],"0608":["LO","1","TreatmentPositionGroupLabel"],"0609":["UI","1","TreatmentPositionGroupUID"],"060A":["SQ","1","TreatmentPositionGroupSequence"],"060B":["US","1","ReferencedTreatmentPositionIndex"],"060C":["US","1","ReferencedRadiationDoseIdentificationIndex"],"060D":["FD","1","RTAccessoryHolderWaterEquivalentThickness"],"060E":["US","1","ReferencedRTAccessoryHolderDeviceIndex"],"060F":["CS","1","RTAccessoryHolderSlotExistenceFlag"],"0610":["SQ","1","RTAccessoryHolderSlotSequence"],"0611":["LO","1","RTAccessoryHolderSlotID"],"0612":["FD","1","RTAccessoryHolderSlotDistance"],"0613":["FD","1","RTAccessorySlotDistance"],"0614":["SQ","1","RTAccessoryHolderDefinitionSequence"],"0615":["LO","1","RTAccessoryDeviceSlotID"],"0616":["SQ","1","RTRadiationSequence"],"0617":["SQ","1","RadiationDoseSequence"],"0618":["SQ","1","RadiationDoseIdentificationSequence"],"0619":["LO","1","RadiationDoseIdentificationLabel"],"061A":["CS","1","ReferenceDoseType"],"061B":["CS","1","PrimaryDoseValueIndicator"],"061C":["SQ","1","DoseValuesSequence"],"061D":["CS","1-n","DoseValuePurpose"],"061E":["FD","3","ReferenceDosePointCoordinates"],"061F":["SQ","1","RadiationDoseValuesParametersSequence"],"0620":["SQ","1","MetersetToDoseMappingSequence"],"0621":["SQ","1","ExpectedInVivoMeasurementValuesSequence"],"0622":["US","1","ExpectedInVivoMeasurementValueIndex"],"0623":["LO","1","RadiationDoseInVivoMeasurementLabel"],"0624":["FD","2","RadiationDoseCentralAxisDisplacement"],"0625":["FD","1","RadiationDoseValue"],"0626":["FD","1","RadiationDoseSourceToSkinDistance"],"0627":["FD","3","RadiationDoseMeasurementPointCoordinates"],"0628":["FD","1","RadiationDoseSourceToExternalContourDistance"],"0629":["SQ","1","RTToleranceSetSequence"],"062A":["LO","1","RTToleranceSetLabel"],"062B":["SQ","1","AttributeToleranceValuesSequence"],"062C":["FD","1","ToleranceValue"],"062D":["SQ","1","PatientSupportPositionToleranceSequence"],"062E":["FD","1","TreatmentTimeLimit"],"062F":["SQ","1","CArmPhotonElectronControlPointSequence"],"0630":["SQ","1","ReferencedRTRadiationSequence"],"0631":["SQ","1","ReferencedRTInstanceSequence"],"0632":["SQ","1","ReferencedRTPatientSetupSequence"],"0634":["FD","1","SourceToPatientSurfaceDistance"],"0635":["SQ","1","TreatmentMachineSpecialModeCodeSequence"],"0636":["US","1","IntendedNumberOfFractions"],"0637":["CS","1","RTRadiationSetIntent"],"0638":["CS","1","RTRadiationPhysicalAndGeometricContentDetailFlag"],"0639":["CS","1","RTRecordFlag"],"063A":["SQ","1","TreatmentDeviceIdentificationSequence"],"063B":["SQ","1","ReferencedRTPhysicianIntentSequence"],"063C":["FD","1","CumulativeMeterset"],"063D":["FD","1","DeliveryRate"],"063E":["SQ","1","DeliveryRateUnitSequence"],"063F":["SQ","1","TreatmentPositionSequence"],"0640":["FD","1","RadiationSourceAxisDistance"],"0641":["US","1","NumberOfRTBeamLimitingDevices"],"0642":["FD","1","RTBeamLimitingDeviceProximalDistance"],"0643":["FD","1","RTBeamLimitingDeviceDistalDistance"],"0644":["SQ","1","ParallelRTBeamDelimiterDeviceOrientationLabelCodeSequence"],"0645":["FD","1","BeamModifierOrientationAngle"],"0646":["SQ","1","FixedRTBeamDelimiterDeviceSequence"],"0647":["SQ","1","ParallelRTBeamDelimiterDeviceSequence"],"0648":["US","1","NumberOfParallelRTBeamDelimiters"],"0649":["FD","2-n","ParallelRTBeamDelimiterBoundaries"],"064A":["FD","2-n","ParallelRTBeamDelimiterPositions"],"064B":["FD","2","RTBeamLimitingDeviceOffset"],"064C":["SQ","1","RTBeamDelimiterGeometrySequence"],"064D":["SQ","1","RTBeamLimitingDeviceDefinitionSequence"],"064E":["CS","1","ParallelRTBeamDelimiterOpeningMode"],"064F":["CS","1-n","ParallelRTBeamDelimiterLeafMountingSide"],"0650":["UI","1","PatientSetupUID"],"0651":["SQ","1","WedgeDefinitionSequence"],"0652":["FD","1","RadiationBeamWedgeAngle"],"0653":["FD","1","RadiationBeamWedgeThinEdgeDistance"],"0654":["FD","1","RadiationBeamEffectiveWedgeAngle"],"0655":["US","1","NumberOfWedgePositions"],"0656":["SQ","1","RTBeamLimitingDeviceOpeningSequence"],"0657":["US","1","NumberOfRTBeamLimitingDeviceOpenings"],"0658":["SQ","1","RadiationDosimeterUnitSequence"],"0659":["SQ","1","RTDeviceDistanceReferenceLocationCodeSequence"],"065A":["SQ","1","RadiationDeviceConfigurationAndCommissioningKeySequence"],"065B":["SQ","1","PatientSupportPositionParameterSequence"],"065C":["CS","1","PatientSupportPositionSpecificationMethod"],"065D":["SQ","1","PatientSupportPositionDeviceParameterSequence"],"065E":["US","1","DeviceOrderIndex"],"065F":["US","1","PatientSupportPositionParameterOrderIndex"],"0660":["SQ","1","PatientSupportPositionDeviceToleranceSequence"],"0661":["US","1","PatientSupportPositionToleranceOrderIndex"],"0662":["SQ","1","CompensatorDefinitionSequence"],"0663":["CS","1","CompensatorMapOrientation"],"0664":["OF","1","CompensatorProximalThicknessMap"],"0665":["OF","1","CompensatorDistalThicknessMap"],"0666":["FD","1","CompensatorBasePlaneOffset"],"0667":["SQ","1","CompensatorShapeFabricationCodeSequence"],"0668":["SQ","1","CompensatorShapeSequence"],"0669":["FD","1","RadiationBeamCompensatorMillingToolDiameter"],"066A":["SQ","1","BlockDefinitionSequence"],"066B":["OF","1","BlockEdgeData"],"066C":["CS","1","BlockOrientation"],"066D":["FD","1","RadiationBeamBlockThickness"],"066E":["FD","1","RadiationBeamBlockSlabThickness"],"066F":["SQ","1","BlockEdgeDataSequence"],"0670":["US","1","NumberOfRTAccessoryHolders"],"0671":["SQ","1","GeneralAccessoryDefinitionSequence"],"0672":["US","1","NumberOfGeneralAccessories"],"0673":["SQ","1","BolusDefinitionSequence"],"0674":["US","1","NumberOfBoluses"],"0675":["UI","1","EquipmentFrameOfReferenceUID"],"0676":["ST","1","EquipmentFrameOfReferenceDescription"],"0677":["SQ","1","EquipmentReferencePointCoordinatesSequence"],"0678":["SQ","1","EquipmentReferencePointCodeSequence"],"0679":["FD","1","RTBeamLimitingDeviceAngle"],"067A":["FD","1","SourceRollAngle"],"067B":["SQ","1","RadiationGenerationModeSequence"],"067C":["SH","1","RadiationGenerationModeLabel"],"067D":["ST","1","RadiationGenerationModeDescription"],"067E":["SQ","1","RadiationGenerationModeMachineCodeSequence"],"067F":["SQ","1","RadiationTypeCodeSequence"],"0680":["DS","1","NominalEnergy"],"0681":["DS","1","MinimumNominalEnergy"],"0682":["DS","1","MaximumNominalEnergy"],"0683":["SQ","1","RadiationFluenceModifierCodeSequence"],"0684":["SQ","1","EnergyUnitCodeSequence"],"0685":["US","1","NumberOfRadiationGenerationModes"],"0686":["SQ","1","PatientSupportDevicesSequence"],"0687":["US","1","NumberOfPatientSupportDevices"],"0688":["FD","1","RTBeamModifierDefinitionDistance"],"0689":["SQ","1","BeamAreaLimitSequence"],"068A":["SQ","1","ReferencedRTPrescriptionSequence"],"0700":["UI","1","TreatmentSessionUID"],"0701":["CS","1","RTRadiationUsage"],"0702":["SQ","1","ReferencedRTRadiationSetSequence"],"0703":["SQ","1","ReferencedRTRadiationRecordSequence"],"0704":["US","1","RTRadiationSetDeliveryNumber"],"0705":["US","1","ClinicalFractionNumber"],"0706":["CS","1","RTTreatmentFractionCompletionStatus"],"0707":["CS","1","RTRadiationSetUsage"],"0708":["CS","1","TreatmentDeliveryContinuationFlag"],"0709":["CS","1","TreatmentRecordContentOrigin"],"0714":["CS","1","RTTreatmentTerminationStatus"],"0715":["SQ","1","RTTreatmentTerminationReasonCodeSequence"],"0716":["SQ","1","MachineSpecificTreatmentTerminationCodeSequence"],"0722":["SQ","1","RTRadiationSalvageRecordControlPointSequence"],"0723":["CS","1","StartingMetersetValueKnownFlag"],"0730":["ST","1","TreatmentTerminationDescription"],"0731":["SQ","1","TreatmentToleranceViolationSequence"],"0732":["CS","1","TreatmentToleranceViolationCategory"],"0733":["SQ","1","TreatmentToleranceViolationAttributeSequence"],"0734":["ST","1","TreatmentToleranceViolationDescription"],"0735":["ST","1","TreatmentToleranceViolationIdentification"],"0736":["DT","1","TreatmentToleranceViolationDateTime"],"073A":["DT","1","RecordedRTControlPointDateTime"],"073B":["US","1","ReferencedRadiationRTControlPointIndex"],"073E":["SQ","1","AlternateValueSequence"],"073F":["SQ","1","ConfirmationSequence"],"0740":["SQ","1","InterlockSequence"],"0741":["DT","1","InterlockDateTime"],"0742":["ST","1","InterlockDescription"],"0743":["SQ","1","InterlockOriginatingDeviceSequence"],"0744":["SQ","1","InterlockCodeSequence"],"0745":["SQ","1","InterlockResolutionCodeSequence"],"0746":["SQ","1","InterlockResolutionUserSequence"],"0760":["DT","1","OverrideDateTime"],"0761":["SQ","1","TreatmentToleranceViolationTypeCodeSequence"],"0762":["SQ","1","TreatmentToleranceViolationCauseCodeSequence"],"0772":["SQ","1","MeasuredMetersetToDoseMappingSequence"],"0773":["US","1","ReferencedExpectedInVivoMeasurementValueIndex"],"0774":["SQ","1","DoseMeasurementDeviceCodeSequence"],"0780":["SQ","1","AdditionalParameterRecordingInstanceSequence"],"0782":["US","1",""],"0783":["ST","1","InterlockOriginDescription"],"0784":["SQ","1","RTPatientPositionScopeSequence"],"0785":["UI","1","ReferencedTreatmentPositionGroupUID"],"0786":["US","1","RadiationOrderIndex"],"0787":["SQ","1","OmittedRadiationSequence"],"0788":["SQ","1","ReasonForOmissionCodeSequence"],"0789":["SQ","1","RTDeliveryStartPatientPositionSequence"],"078A":["SQ","1","RTTreatmentPreparationPatientPositionSequence"],"078B":["SQ","1","ReferencedRTTreatmentPreparationSequence"],"078C":["SQ","1","ReferencedPatientSetupPhotoSequence"],"078D":["SQ","1","PatientTreatmentPreparationMethodCodeSequence"],"078E":["LT","1","PatientTreatmentPreparationProcedureParameterDescription"],"078F":["SQ","1","PatientTreatmentPreparationDeviceSequence"],"0790":["SQ","1","PatientTreatmentPreparationProcedureSequence"],"0791":["SQ","1","PatientTreatmentPreparationProcedureCodeSequence"],"0792":["LT","1","PatientTreatmentPreparationMethodDescription"],"0793":["SQ","1","PatientTreatmentPreparationProcedureParameterSequence"],"0794":["LT","1","PatientSetupPhotoDescription"],"0795":["US","1","PatientTreatmentPreparationProcedureIndex"],"0796":["US","1","ReferencedPatientSetupProcedureIndex"],"0797":["SQ","1","RTRadiationTaskSequence"],"0798":["SQ","1","RTPatientPositionDisplacementSequence"],"0799":["SQ","1","RTPatientPositionSequence"],"079A":["LO","1","DisplacementReferenceLabel"],"079B":["FD","16","DisplacementMatrix"],"079C":["SQ","1","PatientSupportDisplacementSequence"],"079D":["SQ","1","DisplacementReferenceLocationCodeSequence"],"079E":["CS","1","RTRadiationSetDeliveryUsage"]},"300C":{"0000":["UL","1","GenericGroupLength"],"0002":["SQ","1","ReferencedRTPlanSequence"],"0004":["SQ","1","ReferencedBeamSequence"],"0006":["IS","1","ReferencedBeamNumber"],"0007":["IS","1","ReferencedReferenceImageNumber"],"0008":["DS","1","StartCumulativeMetersetWeight"],"0009":["DS","1","EndCumulativeMetersetWeight"],"000A":["SQ","1","ReferencedBrachyApplicationSetupSequence"],"000C":["IS","1","ReferencedBrachyApplicationSetupNumber"],"000E":["IS","1","ReferencedSourceNumber"],"0020":["SQ","1","ReferencedFractionGroupSequence"],"0022":["IS","1","ReferencedFractionGroupNumber"],"0040":["SQ","1","ReferencedVerificationImageSequence"],"0042":["SQ","1","ReferencedReferenceImageSequence"],"0050":["SQ","1","ReferencedDoseReferenceSequence"],"0051":["IS","1","ReferencedDoseReferenceNumber"],"0055":["SQ","1","BrachyReferencedDoseReferenceSequence"],"0060":["SQ","1","ReferencedStructureSetSequence"],"006A":["IS","1","ReferencedPatientSetupNumber"],"0080":["SQ","1","ReferencedDoseSequence"],"00A0":["IS","1","ReferencedToleranceTableNumber"],"00B0":["SQ","1","ReferencedBolusSequence"],"00C0":["IS","1","ReferencedWedgeNumber"],"00D0":["IS","1","ReferencedCompensatorNumber"],"00E0":["IS","1","ReferencedBlockNumber"],"00F0":["IS","1","ReferencedControlPointIndex"],"00F2":["SQ","1","ReferencedControlPointSequence"],"00F4":["IS","1","ReferencedStartControlPointIndex"],"00F6":["IS","1","ReferencedStopControlPointIndex"],"0100":["IS","1","ReferencedRangeShifterNumber"],"0102":["IS","1","ReferencedLateralSpreadingDeviceNumber"],"0104":["IS","1","ReferencedRangeModulatorNumber"],"0111":["SQ","1","OmittedBeamTaskSequence"],"0112":["CS","1","ReasonForOmission"],"0113":["LO","1","ReasonForOmissionDescription"],"0114":["SQ","1","PrescriptionOverviewSequence"],"0115":["FL","1","TotalPrescriptionDose"],"0116":["SQ","1","PlanOverviewSequence"],"0117":["US","1","PlanOverviewIndex"],"0118":["US","1","ReferencedPlanOverviewIndex"],"0119":["US","1","NumberOfFractionsIncluded"],"0120":["SQ","1","DoseCalibrationConditionsSequence"],"0121":["FD","1","AbsorbedDoseToMetersetRatio"],"0122":["FD","2","DelineatedRadiationFieldSize"],"0123":["CS","1","DoseCalibrationConditionsVerifiedFlag"],"0124":["FD","1","CalibrationReferencePointDepth"],"0125":["SQ","1","GatingBeamHoldTransitionSequence"],"0126":["CS","1","BeamHoldTransition"],"0127":["DT","1","BeamHoldTransitionDateTime"],"0128":["SQ","1","BeamHoldOriginatingDeviceSequence"]},"300E":{"0000":["UL","1","GenericGroupLength"],"0002":["CS","1","ApprovalStatus"],"0004":["DA","1","ReviewDate"],"0005":["TM","1","ReviewTime"],"0008":["PN","1","ReviewerName"]},3010:{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","RadiobiologicalDoseEffectSequence"],"0002":["CS","1","RadiobiologicalDoseEffectFlag"],"0003":["SQ","1","EffectiveDoseCalculationMethodCategoryCodeSequence"],"0004":["SQ","1","EffectiveDoseCalculationMethodCodeSequence"],"0005":["LO","1","EffectiveDoseCalculationMethodDescription"],"0006":["UI","1","ConceptualVolumeUID"],"0007":["SQ","1","OriginatingSOPInstanceReferenceSequence"],"0008":["SQ","1","ConceptualVolumeConstituentSequence"],"0009":["SQ","1","EquivalentConceptualVolumeInstanceReferenceSequence"],"000A":["SQ","1","EquivalentConceptualVolumesSequence"],"000B":["UI","1","ReferencedConceptualVolumeUID"],"000C":["UT","1","ConceptualVolumeCombinationExpression"],"000D":["US","1","ConceptualVolumeConstituentIndex"],"000E":["CS","1","ConceptualVolumeCombinationFlag"],"000F":["ST","1","ConceptualVolumeCombinationDescription"],"0010":["CS","1","ConceptualVolumeSegmentationDefinedFlag"],"0011":["SQ","1","ConceptualVolumeSegmentationReferenceSequence"],"0012":["SQ","1","ConceptualVolumeConstituentSegmentationReferenceSequence"],"0013":["UI","1","ConstituentConceptualVolumeUID"],"0014":["SQ","1","DerivationConceptualVolumeSequence"],"0015":["UI","1","SourceConceptualVolumeUID"],"0016":["SQ","1","ConceptualVolumeDerivationAlgorithmSequence"],"0017":["ST","1","ConceptualVolumeDescription"],"0018":["SQ","1","SourceConceptualVolumeSequence"],"0019":["SQ","1","AuthorIdentificationSequence"],"001A":["LO","1","ManufacturerModelVersion"],"001B":["UC","1","DeviceAlternateIdentifier"],"001C":["CS","1","DeviceAlternateIdentifierType"],"001D":["LT","1","DeviceAlternateIdentifierFormat"],"001E":["LO","1","SegmentationCreationTemplateLabel"],"001F":["UI","1","SegmentationTemplateUID"],"0020":["US","1","ReferencedSegmentReferenceIndex"],"0021":["SQ","1","SegmentReferenceSequence"],"0022":["US","1","SegmentReferenceIndex"],"0023":["SQ","1","DirectSegmentReferenceSequence"],"0024":["SQ","1","CombinationSegmentReferenceSequence"],"0025":["SQ","1","ConceptualVolumeSequence"],"0026":["SQ","1","SegmentedRTAccessoryDeviceSequence"],"0027":["SQ","1","SegmentCharacteristicsSequence"],"0028":["SQ","1","RelatedSegmentCharacteristicsSequence"],"0029":["US","1","SegmentCharacteristicsPrecedence"],"002A":["SQ","1","RTSegmentAnnotationSequence"],"002B":["SQ","1","SegmentAnnotationCategoryCodeSequence"],"002C":["SQ","1","SegmentAnnotationTypeCodeSequence"],"002D":["LO","1","DeviceLabel"],"002E":["SQ","1","DeviceTypeCodeSequence"],"002F":["SQ","1","SegmentAnnotationTypeModifierCodeSequence"],"0030":["SQ","1","PatientEquipmentRelationshipCodeSequence"],"0031":["UI","1","ReferencedFiducialsUID"],"0032":["SQ","1","PatientTreatmentOrientationSequence"],"0033":["SH","1","UserContentLabel"],"0034":["LO","1","UserContentLongLabel"],"0035":["SH","1","EntityLabel"],"0036":["LO","1","EntityName"],"0037":["ST","1","EntityDescription"],"0038":["LO","1","EntityLongLabel"],"0039":["US","1","DeviceIndex"],"003A":["US","1","RTTreatmentPhaseIndex"],"003B":["UI","1","RTTreatmentPhaseUID"],"003C":["US","1","RTPrescriptionIndex"],"003D":["US","1","RTSegmentAnnotationIndex"],"003E":["US","1","BasisRTTreatmentPhaseIndex"],"003F":["US","1","RelatedRTTreatmentPhaseIndex"],"0040":["US","1","ReferencedRTTreatmentPhaseIndex"],"0041":["US","1","ReferencedRTPrescriptionIndex"],"0042":["US","1","ReferencedParentRTPrescriptionIndex"],"0043":["ST","1","ManufacturerDeviceIdentifier"],"0044":["SQ","1","InstanceLevelReferencedPerformedProcedureStepSequence"],"0045":["CS","1","RTTreatmentPhaseIntentPresenceFlag"],"0046":["CS","1","RadiotherapyTreatmentType"],"0047":["CS","1-n","TeletherapyRadiationType"],"0048":["CS","1-n","BrachytherapySourceType"],"0049":["SQ","1","ReferencedRTTreatmentPhaseSequence"],"004A":["SQ","1","ReferencedDirectSegmentInstanceSequence"],"004B":["SQ","1","IntendedRTTreatmentPhaseSequence"],"004C":["DA","1","IntendedPhaseStartDate"],"004D":["DA","1","IntendedPhaseEndDate"],"004E":["SQ","1","RTTreatmentPhaseIntervalSequence"],"004F":["CS","1","TemporalRelationshipIntervalAnchor"],"0050":["FD","1","MinimumNumberOfIntervalDays"],"0051":["FD","1","MaximumNumberOfIntervalDays"],"0052":["UI","1-n","PertinentSOPClassesInStudy"],"0053":["UI","1-n","PertinentSOPClassesInSeries"],"0054":["LO","1","RTPrescriptionLabel"],"0055":["SQ","1","RTPhysicianIntentPredecessorSequence"],"0056":["LO","1","RTTreatmentApproachLabel"],"0057":["SQ","1","RTPhysicianIntentSequence"],"0058":["US","1","RTPhysicianIntentIndex"],"0059":["CS","1","RTTreatmentIntentType"],"005A":["UT","1","RTPhysicianIntentNarrative"],"005B":["SQ","1","RTProtocolCodeSequence"],"005C":["ST","1","ReasonForSuperseding"],"005D":["SQ","1","RTDiagnosisCodeSequence"],"005E":["US","1","ReferencedRTPhysicianIntentIndex"],"005F":["SQ","1","RTPhysicianIntentInputInstanceSequence"],"0060":["SQ","1","RTAnatomicPrescriptionSequence"],"0061":["UT","1","PriorTreatmentDoseDescription"],"0062":["SQ","1","PriorTreatmentReferenceSequence"],"0063":["CS","1","DosimetricObjectiveEvaluationScope"],"0064":["SQ","1","TherapeuticRoleCategoryCodeSequence"],"0065":["SQ","1","TherapeuticRoleTypeCodeSequence"],"0066":["US","1","ConceptualVolumeOptimizationPrecedence"],"0067":["SQ","1","ConceptualVolumeCategoryCodeSequence"],"0068":["CS","1","ConceptualVolumeBlockingConstraint"],"0069":["SQ","1","ConceptualVolumeTypeCodeSequence"],"006A":["SQ","1","ConceptualVolumeTypeModifierCodeSequence"],"006B":["SQ","1","RTPrescriptionSequence"],"006C":["SQ","1","DosimetricObjectiveSequence"],"006D":["SQ","1","DosimetricObjectiveTypeCodeSequence"],"006E":["UI","1","DosimetricObjectiveUID"],"006F":["UI","1","ReferencedDosimetricObjectiveUID"],"0070":["SQ","1","DosimetricObjectiveParameterSequence"],"0071":["SQ","1","ReferencedDosimetricObjectivesSequence"],"0073":["CS","1","AbsoluteDosimetricObjectiveFlag"],"0074":["FD","1","DosimetricObjectiveWeight"],"0075":["CS","1","DosimetricObjectivePurpose"],"0076":["SQ","1","PlanningInputInformationSequence"],"0077":["LO","1","TreatmentSite"],"0078":["SQ","1","TreatmentSiteCodeSequence"],"0079":["SQ","1","FractionPatternSequence"],"007A":["UT","1","TreatmentTechniqueNotes"],"007B":["UT","1","PrescriptionNotes"],"007C":["IS","1","NumberOfIntervalFractions"],"007D":["US","1","NumberOfFractions"],"007E":["US","1","IntendedDeliveryDuration"],"007F":["UT","1","FractionationNotes"],"0080":["SQ","1","RTTreatmentTechniqueCodeSequence"],"0081":["SQ","1","PrescriptionNotesSequence"],"0082":["SQ","1","FractionBasedRelationshipSequence"],"0083":["CS","1","FractionBasedRelationshipIntervalAnchor"],"0084":["FD","1","MinimumHoursBetweenFractions"],"0085":["TM","1-n","IntendedFractionStartTime"],"0086":["LT","1","IntendedStartDayOfWeek"],"0087":["SQ","1","WeekdayFractionPatternSequence"],"0088":["SQ","1","DeliveryTimeStructureCodeSequence"],"0089":["SQ","1","TreatmentSiteModifierCodeSequence"],"0090":["CS","1","RoboticBaseLocationIndicator"],"0091":["SQ","1","RoboticPathNodeSetCodeSequence"],"0092":["UL","1","RoboticNodeIdentifier"],"0093":["FD","3","RTTreatmentSourceCoordinates"],"0094":["FD","1","RadiationSourceCoordinateSystemYawAngle"],"0095":["FD","1","RadiationSourceCoordinateSystemRollAngle"],"0096":["FD","1","RadiationSourceCoordinateSystemPitchAngle"],"0097":["SQ","1","RoboticPathControlPointSequence"],"0098":["SQ","1","TomotherapeuticControlPointSequence"],"0099":["FD","1-n","TomotherapeuticLeafOpenDurations"],"009A":["FD","1-n","TomotherapeuticLeafInitialClosedDurations"]},4e3:{"0000":["UL","1","GenericGroupLength"],"0010":["LT","1","Arbitrary"],4e3:["LT","1","TextComments"]},4008:{"0000":["UL","1","GenericGroupLength"],"0040":["SH","1","ResultsID"],"0042":["LO","1","ResultsIDIssuer"],"0050":["SQ","1","ReferencedInterpretationSequence"],"00FF":["CS","1","ReportProductionStatusTrial"],"0100":["DA","1","InterpretationRecordedDate"],"0101":["TM","1","InterpretationRecordedTime"],"0102":["PN","1","InterpretationRecorder"],"0103":["LO","1","ReferenceToRecordedSound"],"0108":["DA","1","InterpretationTranscriptionDate"],"0109":["TM","1","InterpretationTranscriptionTime"],"010A":["PN","1","InterpretationTranscriber"],"010B":["ST","1","InterpretationText"],"010C":["PN","1","InterpretationAuthor"],"0111":["SQ","1","InterpretationApproverSequence"],"0112":["DA","1","InterpretationApprovalDate"],"0113":["TM","1","InterpretationApprovalTime"],"0114":["PN","1","PhysicianApprovingInterpretation"],"0115":["LT","1","InterpretationDiagnosisDescription"],"0117":["SQ","1","InterpretationDiagnosisCodeSequence"],"0118":["SQ","1","ResultsDistributionListSequence"],"0119":["PN","1","DistributionName"],"011A":["LO","1","DistributionAddress"],"0200":["SH","1","InterpretationID"],"0202":["LO","1","InterpretationIDIssuer"],"0210":["CS","1","InterpretationTypeID"],"0212":["CS","1","InterpretationStatusID"],"0300":["ST","1","Impressions"],4e3:["ST","1","ResultsComments"]},4010:{"0000":["UL","1","GenericGroupLength"],"0001":["CS","1","LowEnergyDetectors"],"0002":["CS","1","HighEnergyDetectors"],"0004":["SQ","1","DetectorGeometrySequence"],1001:["SQ","1","ThreatROIVoxelSequence"],1004:["FL","3","ThreatROIBase"],1005:["FL","3","ThreatROIExtents"],1006:["OB","1","ThreatROIBitmap"],1007:["SH","1","RouteSegmentID"],1008:["CS","1","GantryType"],1009:["CS","1","OOIOwnerType"],"100A":["SQ","1","RouteSegmentSequence"],1010:["US","1","PotentialThreatObjectID"],1011:["SQ","1","ThreatSequence"],1012:["CS","1","ThreatCategory"],1013:["LT","1","ThreatCategoryDescription"],1014:["CS","1","ATDAbilityAssessment"],1015:["CS","1","ATDAssessmentFlag"],1016:["FL","1","ATDAssessmentProbability"],1017:["FL","1","Mass"],1018:["FL","1","Density"],1019:["FL","1","ZEffective"],"101A":["SH","1","BoardingPassID"],"101B":["FL","3","CenterOfMass"],"101C":["FL","3","CenterOfPTO"],"101D":["FL","6-n","BoundingPolygon"],"101E":["SH","1","RouteSegmentStartLocationID"],"101F":["SH","1","RouteSegmentEndLocationID"],1020:["CS","1","RouteSegmentLocationIDType"],1021:["CS","1-n","AbortReason"],1023:["FL","1","VolumeOfPTO"],1024:["CS","1","AbortFlag"],1025:["DT","1","RouteSegmentStartTime"],1026:["DT","1","RouteSegmentEndTime"],1027:["CS","1","TDRType"],1028:["CS","1","InternationalRouteSegment"],1029:["LO","1-n","ThreatDetectionAlgorithmAndVersion"],"102A":["SH","1","AssignedLocation"],"102B":["DT","1","AlarmDecisionTime"],1031:["CS","1","AlarmDecision"],1033:["US","1","NumberOfTotalObjects"],1034:["US","1","NumberOfAlarmObjects"],1037:["SQ","1","PTORepresentationSequence"],1038:["SQ","1","ATDAssessmentSequence"],1039:["CS","1","TIPType"],"103A":["CS","1","DICOSVersion"],1041:["DT","1","OOIOwnerCreationTime"],1042:["CS","1","OOIType"],1043:["FL","3","OOISize"],1044:["CS","1","AcquisitionStatus"],1045:["SQ","1","BasisMaterialsCodeSequence"],1046:["CS","1","PhantomType"],1047:["SQ","1","OOIOwnerSequence"],1048:["CS","1","ScanType"],1051:["LO","1","ItineraryID"],1052:["SH","1","ItineraryIDType"],1053:["LO","1","ItineraryIDAssigningAuthority"],1054:["SH","1","RouteID"],1055:["SH","1","RouteIDAssigningAuthority"],1056:["CS","1","InboundArrivalType"],1058:["SH","1","CarrierID"],1059:["CS","1","CarrierIDAssigningAuthority"],1060:["FL","3","SourceOrientation"],1061:["FL","3","SourcePosition"],1062:["FL","1","BeltHeight"],1064:["SQ","1","AlgorithmRoutingCodeSequence"],1067:["CS","1","TransportClassification"],1068:["LT","1","OOITypeDescriptor"],1069:["FL","1","TotalProcessingTime"],"106C":["OB","1","DetectorCalibrationData"],"106D":["CS","1","AdditionalScreeningPerformed"],"106E":["CS","1","AdditionalInspectionSelectionCriteria"],"106F":["SQ","1","AdditionalInspectionMethodSequence"],1070:["CS","1","AITDeviceType"],1071:["SQ","1","QRMeasurementsSequence"],1072:["SQ","1","TargetMaterialSequence"],1073:["FD","1","SNRThreshold"],1075:["DS","1","ImageScaleRepresentation"],1076:["SQ","1","ReferencedPTOSequence"],1077:["SQ","1","ReferencedTDRInstanceSequence"],1078:["ST","1","PTOLocationDescription"],1079:["SQ","1","AnomalyLocatorIndicatorSequence"],"107A":["FL","3","AnomalyLocatorIndicator"],"107B":["SQ","1","PTORegionSequence"],"107C":["CS","1","InspectionSelectionCriteria"],"107D":["SQ","1","SecondaryInspectionMethodSequence"],"107E":["DS","6","PRCSToRCSOrientation"]},"4FFE":{"0000":["UL","1","GenericGroupLength"],"0001":["SQ","1","MACParametersSequence"]},5e3:{"0000":["UL","1","GenericGroupLength"],"0005":["US","1","CurveDimensions"],"0010":["US","1","NumberOfPoints"],"0020":["CS","1","TypeOfData"],"0022":["LO","1","CurveDescription"],"0030":["SH","1-n","AxisUnits"],"0040":["SH","1-n","AxisLabels"],"0103":["US","1","DataValueRepresentation"],"0104":["US","1-n","MinimumCoordinateValue"],"0105":["US","1-n","MaximumCoordinateValue"],"0106":["SH","1-n","CurveRange"],"0110":["US","1-n","CurveDataDescriptor"],"0112":["US","1-n","CoordinateStartValue"],"0114":["US","1-n","CoordinateStepValue"],1001:["CS","1","CurveActivationLayer"],2e3:["US","1","AudioType"],2002:["US","1","AudioSampleFormat"],2004:["US","1","NumberOfChannels"],2006:["UL","1","NumberOfSamples"],2008:["UL","1","SampleRate"],"200A":["UL","1","TotalTime"],"200C":["ox","1","AudioSampleData"],"200E":["LT","1","AudioComments"],2500:["LO","1","CurveLabel"],2600:["SQ","1","CurveReferencedOverlaySequence"],2610:["US","1","CurveReferencedOverlayGroup"],3e3:["ox","1","CurveData"]},5200:{"0000":["UL","1","GenericGroupLength"],9229:["SQ","1","SharedFunctionalGroupsSequence"],9230:["SQ","1","PerFrameFunctionalGroupsSequence"]},5400:{"0000":["UL","1","GenericGroupLength"],"0100":["SQ","1","WaveformSequence"],"0110":["ox","1","ChannelMinimumValue"],"0112":["ox","1","ChannelMaximumValue"],1004:["US","1","WaveformBitsAllocated"],1006:["CS","1","WaveformSampleInterpretation"],"100A":["ox","1","WaveformPaddingValue"],1010:["ox","1","WaveformData"]},5600:{"0000":["UL","1","GenericGroupLength"],"0010":["OF","1","FirstOrderPhaseCorrectionAngle"],"0020":["OF","1","SpectroscopyData"]},6e3:{"0000":["UL","1","GenericGroupLength"],"0010":["US","1","OverlayRows"],"0011":["US","1","OverlayColumns"],"0012":["US","1","OverlayPlanes"],"0015":["IS","1","NumberOfFramesInOverlay"],"0022":["LO","1","OverlayDescription"],"0040":["CS","1","OverlayType"],"0045":["LO","1","OverlaySubtype"],"0050":["SS","2","OverlayOrigin"],"0051":["US","1","ImageFrameOrigin"],"0052":["US","1","OverlayPlaneOrigin"],"0060":["CS","1","OverlayCompressionCode"],"0061":["SH","1","OverlayCompressionOriginator"],"0062":["SH","1","OverlayCompressionLabel"],"0063":["CS","1","OverlayCompressionDescription"],"0066":["AT","1-n","OverlayCompressionStepPointers"],"0068":["US","1","OverlayRepeatInterval"],"0069":["US","1","OverlayBitsGrouped"],"0100":["US","1","OverlayBitsAllocated"],"0102":["US","1","OverlayBitPosition"],"0110":["CS","1","OverlayFormat"],"0200":["US","1","OverlayLocation"],"0800":["CS","1-n","OverlayCodeLabel"],"0802":["US","1","OverlayNumberOfTables"],"0803":["AT","1-n","OverlayCodeTableLocation"],"0804":["US","1","OverlayBitsForCodeWord"],1001:["CS","1","OverlayActivationLayer"],1100:["US","1","OverlayDescriptorGray"],1101:["US","1","OverlayDescriptorRed"],1102:["US","1","OverlayDescriptorGreen"],1103:["US","1","OverlayDescriptorBlue"],1200:["US","1-n","OverlaysGray"],1201:["US","1-n","OverlaysRed"],1202:["US","1-n","OverlaysGreen"],1203:["US","1-n","OverlaysBlue"],1301:["IS","1","ROIArea"],1302:["DS","1","ROIMean"],1303:["DS","1","ROIStandardDeviation"],1500:["LO","1","OverlayLabel"],3e3:["ox","1","OverlayData"],4e3:["LT","1","OverlayComments"]},"7F00":{"0000":["UL","1","GenericGroupLength"],"0010":["ox","1","VariablePixelData"],"0011":["US","1","VariableNextDataGroup"],"0020":["OW","1","VariableCoefficientsSDVN"],"0030":["OW","1","VariableCoefficientsSDHN"],"0040":["OW","1","VariableCoefficientsSDDN"]},"7FE0":{"0000":["UL","1","GenericGroupLength"],"0001":["OV","1","ExtendedOffsetTable"],"0002":["OV","1","ExtendedOffsetTableLengths"],"0008":["OF","1","FloatPixelData"],"0009":["OD","1","DoubleFloatPixelData"],"0010":["ox","1","PixelData"],"0020":["OW","1","CoefficientsSDVN"],"0030":["OW","1","CoefficientsSDHN"],"0040":["OW","1","CoefficientsSDDN"]},FFFA:{"0000":["UL","1","GenericGroupLength"],FFFA:["SQ","1","DigitalSignaturesSequence"]},FFFC:{"0000":["UL","1","GenericGroupLength"],FFFC:["OB","1","DataSetTrailingPadding"]},FFFE:{"0000":["UL","1","GenericGroupLength"],E000:["NONE","1","Item"],E00D:["NONE","1","ItemDelimitationItem"],E0DD:["NONE","1","SequenceDelimitationItem"]}};function le(u,r){de[u]=r}let G={"0000":"Command","0002":"Meta Element","0004":"File Set","0008":"Identifying","0009":"SPI Identifying","0010":"Patient","0012":"Clinical Trial","0018":"Acquisition","0019":"SPI Acquisition","0020":"Image","0021":"SPI Image","0022":"Ophtalmology","0028":"Image Presentation","0032":"Study","0038":"Visit","003A":"Waveform","0040":"Procedure","0042":"Encapsulated Document","0050":"Device Informations","0054":"Nuclear Medicine","0060":"Histogram","0070":"Presentation State","0072":"Hanging Protocol","0088":"Storage","0100":"Authorization","0400":"Digital Signature",1e3:"Code Table",1010:"Zonal Map",2e3:"Film Session",2010:"Film Box",2020:"Image Box",2030:"Annotation",2040:"Overlay Box",2050:"Presentation LUT",2100:"Print Job",2110:"Printer",2120:"Queue",2130:"Print Content",2200:"Media Creation",3002:"RT Image",3004:"RT Dose",3006:"RT StructureSet",3008:"RT Treatment","300A":"RT Plan","300C":"RT Relationship","300E":"RT Approval",4e3:"Text",4008:"Results","4FFE":"MAC Parameters",5e3:"Curve",5002:"Curve",5004:"Curve",5006:"Curve",5008:"Curve","500A":"Curve","500C":"Curve","500E":"Curve",5400:"Waveform Data",6e3:"Overlays",6002:"Overlays",6004:"Overlays",6008:"Overlays","600A":"Overlays","600C":"Overlays","600E":"Overlays",FFFC:"Generic","7FE0":"Pixel Data",FFFF:"Unknown"},B={OB:!0,OD:!0,OF:!0,OL:!0,OV:!0,OW:!0,SQ:!0,SV:!0,UC:!0,UN:!0,UR:!0,UT:!0,UV:!0,ox:!0};function Z(u){return B[u]!==void 0}let ue={SH:!0,LO:!0,UC:!0,ST:!0,LT:!0,UT:!0,PN:!0};function me(u){return ue[u]!==void 0}let ee={AE:"string",AS:"string",AT:void 0,CS:"string",DA:"string",DS:"string",DT:"string",FL:"Float32",FD:"Float64",IS:"string",LO:"string",LT:"string",OB:"Uint8",OD:"Uint64",OF:"Uint32",OL:"Uint32",OV:"Uint64",OW:"Uint16",PN:"string",SH:"string",SL:"Int32",SQ:void 0,SS:"Int16",ST:"string",SV:"Int64",TM:"string",UC:"string",UI:"string",UL:"Uint32",UN:"Uint8",UR:"string",US:"Uint16",UT:"string",UV:"Uint64"},Se={"1.2.840.10008.1.2":"Implicit VR Little Endian","1.2.840.10008.1.2.1":"Explicit VR Little Endian","1.2.840.10008.1.2.1.98":"Encapsulated Uncompressed Explicit VR Little Endian","1.2.840.10008.1.2.1.99":"Deflated Explicit VR Little Endian","1.2.840.10008.1.2.2":"Explicit VR Big Endian (Retired)","1.2.840.10008.1.2.4.50":"JPEG Baseline (Process 1)","1.2.840.10008.1.2.4.51":"JPEG Extended (Process 2 & 4)","1.2.840.10008.1.2.4.52":"JPEG Extended (Process 3 & 5) (Retired)","1.2.840.10008.1.2.4.53":"JPEG Spectral Selection, Non-Hierarchical (Process 6 & 8) (Retired)","1.2.840.10008.1.2.4.54":"JPEG Spectral Selection, Non-Hierarchical (Process 7 & 9) (Retired)","1.2.840.10008.1.2.4.55":"JPEG Full Progression, Non-Hierarchical (Process 10 & 12) (Retired)","1.2.840.10008.1.2.4.56":"JPEG Full Progression, Non-Hierarchical (Process 11 & 13) (Retired)","1.2.840.10008.1.2.4.57":"JPEG Lossless, Non-Hierarchical (Process 14)","1.2.840.10008.1.2.4.58":"JPEG Lossless, Non-Hierarchical (Process 15) (Retired)","1.2.840.10008.1.2.4.59":"JPEG Extended, Hierarchical (Process 16 & 18) (Retired)","1.2.840.10008.1.2.4.60":"JPEG Extended, Hierarchical (Process 17 & 19) (Retired)","1.2.840.10008.1.2.4.61":"JPEG Spectral Selection, Hierarchical (Process 20 & 22) (Retired)","1.2.840.10008.1.2.4.62":"JPEG Spectral Selection, Hierarchical (Process 21 & 23) (Retired)","1.2.840.10008.1.2.4.63":"JPEG Full Progression, Hierarchical (Process 24 & 26) (Retired)","1.2.840.10008.1.2.4.64":"JPEG Full Progression, Hierarchical (Process 25 & 27) (Retired)","1.2.840.10008.1.2.4.65":"JPEG Lossless, Hierarchical (Process 28) (Retired)","1.2.840.10008.1.2.4.66":"JPEG Lossless, Hierarchical (Process 29) (Retired)","1.2.840.10008.1.2.4.70":"JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1])","1.2.840.10008.1.2.4.80":"JPEG-LS Lossless Image Compression","1.2.840.10008.1.2.4.81":"JPEG-LS Lossy (Near-Lossless) Image Compression","1.2.840.10008.1.2.4.90":"JPEG 2000 Image Compression (Lossless Only)","1.2.840.10008.1.2.4.91":"JPEG 2000 Image Compression","1.2.840.10008.1.2.4.92":"JPEG 2000 Part 2 Multi-component Image Compression (Lossless Only)","1.2.840.10008.1.2.4.93":"JPEG 2000 Part 2 Multi-component Image Compression","1.2.840.10008.1.2.4.94":"JPIP Referenced","1.2.840.10008.1.2.4.95":"JPIP Referenced Deflate","1.2.840.10008.1.2.4.100":"MPEG2 Main Profile / Main Level","1.2.840.10008.1.2.4.101":"MPEG2 Main Profile / High Level","1.2.840.10008.1.2.4.102":"MPEG-4 AVC/H.264 High Profile / Level 4.1","1.2.840.10008.1.2.4.103":"MPEG-4 AVC/H.264 BD-compatible High Profile / Level 4.1","1.2.840.10008.1.2.4.104":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 2D Video","1.2.840.10008.1.2.4.105":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 3D Video","1.2.840.10008.1.2.4.106":"MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2","1.2.840.10008.1.2.4.107":"HEVC/H.265 Main Profile / Level 5.1","1.2.840.10008.1.2.4.108":"HEVC/H.265 Main 10 Profile / Level 5.1","1.2.840.10008.1.2.5":"RLE Lossless","1.2.840.10008.1.2.6.1":"RFC 2557 MIME encapsulation (Retired)","1.2.840.10008.1.2.6.2":"XML Encoding (Retired)","1.2.840.10008.1.2.7.1":"SMPTE ST 2110-20 Uncompressed Progressive Active Video","1.2.840.10008.1.2.7.2":"SMPTE ST 2110-20 Uncompressed Interlaced Active Video","1.2.840.10008.1.2.7.3":"SMPTE ST 2110-30 PCM Digital Audio","1.2.840.10008.1.20":"Papyrus 3 Implicit VR Little Endian (Retired)"},Re="1.2.840.10008.1.2",be="1.2.840.10008.1.2.1",je="1.2.840.10008.1.2.2",Jt="1.2.840.10008.1.2.4.50",Tt="1.2.840.10008.1.2.4.51",_i="1.2.840.10008.1.2.4.57",Ss="1.2.840.10008.1.2.4.70",ji="1.2.840.10008.1.2.5";class Bn{#e;#t;constructor(r,a){if(!r||r===void 0)throw new Error("Cannot create tag with no group.");if(r.length!==4)throw new Error("Cannot create tag with badly sized group: "+r);if(!a||a===void 0)throw new Error("Cannot create tag with no element.");if(a.length!==4)throw new Error("Cannot create tag with badly sized element: "+a);this.#e=r,this.#t=a}getGroup(){return this.#e}getElement(){return this.#t}toString(){return this.getKey()+": "+this.getNameFromDictionary()}equals(r){return r!=null&&this.#e===r.getGroup()&&this.#t===r.getElement()}getKey(){return this.#e+this.#t}getGroupName(){return G[this.#e]}isWithVR(){return!(this.#e==="FFFE"&&(this.#t==="E000"||this.#t==="E00D"||this.#t==="E0DD"))}isPrivate(){return parseInt(this.#e,16)%2==1}#n(){let r;return de[this.#e]!==void 0&&de[this.#e][this.#t]!==void 0&&(r=de[this.#e][this.#t]),r}getVrFromDictionary(){let r,a=this.#n();return a!==void 0&&(r=a[0]),r}getNameFromDictionary(){let r,a=this.#n();return a!==void 0&&(r=a[2]),r}}function gn(u,r){let a=parseInt(u.getGroup(),16)-parseInt(r.getGroup(),16);return a===0&&(a=parseInt(u.getElement(),16)-parseInt(r.getElement(),16)),a}function _r(u){if(!u||u===void 0)throw new Error("Cannot create tag with no key.");if(u.length!==8)throw new Error("Cannot create tag with badly sized key: "+u);return new Bn(u.substring(0,4),u.substring(4,8))}function Mo(){return new Bn("FFFE","E000")}function Di(u){return u.getKey()==="FFFEE000"}function Ql(u){return u.getKey()==="FFFEE00D"}function jd(u){return u.getKey()==="FFFEE0DD"}function zp(){return new Bn("7FE0","0010")}function Ro(u){return u.getKey()==="7FE00010"}function Da(u){if(u==null)return null;let r=null,a=null,c=de,h=Object.keys(c),m,v=null,S=!1;for(let _=0,E=h.length;_<E;++_){r=h[_],v=Object.keys(c[r]);for(let I=0,R=v.length;I<R;++I)if(a=v[I],c[r][a][2]===u){S=!0;break}if(S)break}return S&&(m=new Bn(r,a)),m}class $n{vr;value;tag;vl;undefinedLength;startOffset;endOffset;items;constructor(r){this.vr=r}}function Ai(u){let r=u.byteLength,a=new Uint8Array(u.buffer,u.byteOffset,r),c=u.BYTES_PER_ELEMENT,h;for(let m=0;m<r;m+=c)for(let v=m+c-1,S=m;v>S;v--,S++)h=a[S],a[S]=a[v],a[v]=h}class zd{#e;#t=!0;#n=function(){return new Int8Array(new Int16Array([1]).buffer)[0]>0}();#i;#r;constructor(r,a){this.#e=r,a!==void 0&&(this.#t=a),this.#i=this.#t!==this.#n,this.#r=new DataView(r)}readUint16(r){return this.#r.getUint16(r,this.#t)}readInt16(r){return this.#r.getInt16(r,this.#t)}readUint32(r){return this.#r.getUint32(r,this.#t)}readBigUint64(r){return this.#r.getBigUint64(r,this.#t)}readInt32(r){return this.#r.getInt32(r,this.#t)}readBigInt64(r){return this.#r.getBigInt64(r,this.#t)}readFloat32(r){return this.#r.getFloat32(r,this.#t)}readFloat64(r){return this.#r.getFloat64(r,this.#t)}readBinaryArray(r,a){let c=new Uint8Array(this.#e,r,a),h=8*c.length,m=new Uint8Array(h),v=0,S=0;for(let _=0;_<h;++_)v=_%8,S=Math.floor(_/8),m[_]=255*!!(c[S]&1<<v);return m}readUint8Array(r,a){return new Uint8Array(this.#e,r,a)}readInt8Array(r,a){return new Int8Array(this.#e,r,a)}readUint16Array(r,a){let c=Uint16Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Uint16Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Uint16Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readUint16(v),v+=c}return m}readInt16Array(r,a){let c=Int16Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Int16Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Int16Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readInt16(v),v+=c}return m}readUint32Array(r,a){let c=Uint32Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Uint32Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Uint32Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readUint32(v),v+=c}return m}readUint64Array(r,a){let c=BigUint64Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new BigUint64Array(this.#e,r,h),this.#i&&Ai(m);else{m=new BigUint64Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readBigUint64(v),v+=c}return m}readInt32Array(r,a){let c=Int32Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Int32Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Int32Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readInt32(v),v+=c}return m}readInt64Array(r,a){let c=BigInt64Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new BigInt64Array(this.#e,r,h),this.#i&&Ai(m);else{m=new BigInt64Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readBigInt64(v),v+=c}return m}readFloat32Array(r,a){let c=Float32Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Float32Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Float32Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readFloat32(v),v+=c}return m}readFloat64Array(r,a){let c=Float64Array.BYTES_PER_ELEMENT,h=a/c,m=null;if(r%c==0)m=new Float64Array(this.#e,r,h),this.#i&&Ai(m);else{m=new Float64Array(h);let v=r;for(let S=0;S<h;++S)m[S]=this.readFloat64(v),v+=c}return m}readHex(r){let a=this.readUint16(r).toString(16);return"0000".substring(0,4-a.length)+a.toUpperCase()}}function C5(){return"0.34.0"}function w5(u){return!(u.byteLength<132)&&new Uint8Array(u,128,4).reduce(function(r,a){return r+String.fromCharCode(a)},"")==="DICM"}let I5=String.fromCharCode("u200B");class E5{decode(r){let a="";for(let c=0,h=r.length;c<h;++c)a+=String.fromCharCode(r[c]);return a}}function Hp(u){if(!u)return null;let r={L:"R",R:"L",A:"P",P:"A",H:"F",F:"H"},a="";for(let c=0;c<u.length;c++){let h=r[u.substring(c,c+1)];h&&(a+=h)}return a}function vb(u){return u===Re}function Sb(u){return u===je}function Qp(u){return u===Jt||u===Tt}function Wp(u){return u===_i||u===Ss}function $p(u){return u.match(/1.2.840.10008.1.2.4.9/)!==null}function bb(u){return u===ji}function _b(u,r,a){let c=null;try{u===1||u===8?c=r===0?new Uint8Array(a):new Int8Array(a):u===16?c=r===0?new Uint16Array(a):new Int16Array(a):u===32&&(c=r===0?new Uint32Array(a):new Int32Array(a))}catch(h){if(h instanceof RangeError){let m=Math.floor(Math.log(a)/Math.log(2));p.error("Cannot allocate array of size: "+a+" (>2^"+m+").")}}return c}function nr(u,r){return r?8:Z(u)?12:8}let Db="00280008",Cb="00280100",wb="00280103",Ib="7FE00010";class Yp{#e={};#t;#n=new E5;#i=this.#n;#r(r){return this.#n.decode(r)}#o(r){return this.#i.decode(r)}getDefaultCharacterSet(){return this.#t}setDefaultCharacterSet(r){this.#t=r}setDecoderCharacterSet(r){this.#i=new TextDecoder(r)}getDicomElements(){return this.#e}#s(r,a){let c=r.readHex(a);a+=Uint16Array.BYTES_PER_ELEMENT;let h=r.readHex(a);return a+=Uint16Array.BYTES_PER_ELEMENT,{tag:new Bn(c,h),endOffset:a}}#a(r,a,c){let h={},m=this.#l(r,a,c);if(a=m.endOffset,jd(m.tag))return{data:h,endOffset:m.endOffset,isSeqDelim:!0};if(h[m.tag.getKey()]={tag:m.tag,vr:"NONE",vl:m.vl,undefinedLength:m.undefinedLength},m.undefinedLength){let v=!1;for(;!v;)m=this.#l(r,a,c),a=m.endOffset,v=Ql(m.tag),v||(h[m.tag.getKey()]=m)}else{let v=a;for(a-=m.vl;a<v;)m=this.#l(r,a,c),a=m.endOffset,h[m.tag.getKey()]=m}return{data:h,endOffset:a,isSeqDelim:!1}}#c(r,a,c){let h=[],m=this.#l(r,a,c),v=m.vl;a=m.endOffset;let S=!1;for(;!S;)m=this.#l(r,a,c),a=m.endOffset,S=jd(m.tag),S||(m.vr="OB",h.push(m));return{data:h,endOffset:a,offsetTableVl:v}}#l(r,a,c){let h=this.#s(r,a),m=h.tag;a=h.endOffset;let v=null,S=!1;m.isWithVR()?c?(v=m.getVrFromDictionary(),v===void 0&&(v="UN"),S=!0):(v=this.#r(r.readUint8Array(a,2)),a+=2*Uint8Array.BYTES_PER_ELEMENT,S=Z(v),S&&(a+=2*Uint8Array.BYTES_PER_ELEMENT)):(v="NONE",S=!0),function(H){return Object.keys(ee).concat(["NONE","ox","xx","xs"]).includes(H)}(v)||(p.warn("Unknown VR: "+v+" (for tag "+m.getKey()+"), treating as 'UN'"),v="UN");let _=0;S?(_=r.readUint32(a),a+=Uint32Array.BYTES_PER_ELEMENT):(_=r.readUint16(a),a+=Uint16Array.BYTES_PER_ELEMENT);let E=!1;_===4294967295&&(E=!0,_=0),m.isPrivate()&&v==="UN"&&_===0&&(v="SQ");let I,R=a,P=R+_;if(Ro(m)&&E){let H=this.#c(r,a,c);a=H.endOffset,R+=H.offsetTableVl,I=H.data,P=a,_=a-R}else if(v==="SQ"){let H;if(I=[],E){let J=!1;for(;!J;)H=this.#a(r,a,c),J=H.isSeqDelim,a=H.endOffset,J||I.push(H.data);P=a,_=a-R}else if(_!==0){let J=a+_;for(;a<J;)H=this.#a(r,a,c),I.push(H.data),a=H.endOffset;P=a,_=a-R}}let U=new $n(v);return U.tag=m,U.vl=_,U.startOffset=R,U.endOffset=P,E&&(U.undefinedLength=E),I&&(U.items=I),U}#u(r,a,c,h){let m=r.tag,v=r.vl,S=r.vr,_=r.startOffset,E=null,I=ee[S];if(Ro(m))if(r.undefinedLength){E=[];for(let R=0;R<r.items.length;++R)E.push(this.#u(r.items[R],a,c,h));delete r.items}else if(h>8&&S==="OB"&&(p.warn("Reading DICOM pixel data with bitsAllocated>8 and OB VR, treating as OW"),r.vr="OW"),E=[],h===1)E.push(a.readBinaryArray(_,v));else if(h===8)c===0?E.push(a.readUint8Array(_,v)):E.push(a.readInt8Array(_,v));else{if(h!==16)throw new Error("Unsupported bits allocated: "+h);c===0?E.push(a.readUint16Array(_,v)):E.push(a.readInt16Array(_,v))}else if(I!==void 0)if(I==="Uint8")E=a.readUint8Array(_,v);else if(I==="Uint16")E=a.readUint16Array(_,v),S[0]!=="O"&&(E=Array.from(E));else if(I==="Uint32")E=a.readUint32Array(_,v),S[0]!=="O"&&(E=Array.from(E));else if(I==="Uint64")E=a.readUint64Array(_,v);else if(I==="Int16")E=Array.from(a.readInt16Array(_,v));else if(I==="Int32")E=Array.from(a.readInt32Array(_,v));else if(I==="Int64")E=a.readInt64Array(_,v);else if(I==="Float32")E=Array.from(a.readFloat32Array(_,v));else if(I==="Float64")E=Array.from(a.readFloat64Array(_,v));else{if(I!=="string")throw new Error("Unknown VR type: "+I);{let R=a.readUint8Array(_,v);E=me(S)?this.#o(R):this.#r(R),E=function(P){let U=P,H=P.length-1;return P[H]===I5&&(U=P.substring(0,H)),U=U.trim(),U}(E).split("\\")}}else if(S==="xx")E=Array.from(a.readUint16Array(_,v));else if(S==="ox")E=h===8?c===0?Array.from(a.readUint8Array(_,v)):Array.from(a.readInt8Array(_,v)):c===0?Array.from(a.readUint16Array(_,v)):Array.from(a.readInt16Array(_,v));else if(S==="xs")E=c===0?Array.from(a.readUint16Array(_,v)):Array.from(a.readInt16Array(_,v));else if(S==="AT"){let R=a.readUint16Array(_,v);E=[];for(let P=0,U=R.length;P<U;P+=2){let H=R[P].toString(16),J=R[P+1].toString(16),te="(";te+="0000".substring(0,4-H.length)+H.toUpperCase(),te+=",",te+="0000".substring(0,4-J.length)+J.toUpperCase(),te+=")",E.push(te)}}else if(S==="SQ"){E=[];for(let R=0;R<r.items.length;++R){let P=r.items[R],U={},H=Object.keys(P),J=h,te=c;for(let ge=0;ge<H.length;++ge){let ie=P[Cb];ie!==void 0&&ie.value!==void 0&&(J=ie.value[0]),ie=P[wb],ie!==void 0&&ie.value!==void 0&&(te=ie.value[0]);let se=P[H[ge]];se.value=this.#u(se,a,te,J),delete se.tag,delete se.vl,delete se.startOffset,delete se.endOffset,U[H[ge]]=se}E.push(U)}delete r.items}else S==="NONE"||p.warn("Unknown VR: "+S+" (for tag "+r.tag.getKey()+")"),E=[];return E}#d(r,a,c,h){let m=Object.keys(r);for(let v=0;v<m.length;++v){let S=r[m[v]];S.value===void 0&&(S.value=this.#u(S,a,c,h)),delete S.tag,delete S.vl,delete S.startOffset,delete S.endOffset}}parse(r){let a=0,c="",h=null,m=new zd(r),v=new zd(r);a=128;let S=this.#r(m.readUint8Array(a,4));if(a+=4*Uint8Array.BYTES_PER_ELEMENT,S==="DICM"){h=this.#l(m,a,!1),h.value=this.#u(h,m),a=h.endOffset,this.#e[h.tag.getKey()]=h;let R=a+h.value[0];for(;a<R;)h=this.#l(m,a,!1),a=h.endOffset,this.#e[h.tag.getKey()]=h;if(h=this.#e["00020010"],h===void 0)throw new Error("Not a valid DICOM file (no TransferSyntaxUID found)");h.value=this.#u(h,m),c=h.value[0]}else{p.warn("No DICM prefix, trying to guess tansfer syntax."),h=this.#l(v,0,!1);let R=function(P){let U="0008",H=P.tag.getGroup();if(H!=="0800"&&H!==U)throw new Error("Not a valid DICOM file (no magic DICM word found and first element not in 0008 group)");let J=P.vr,te=J.charCodeAt(0),ge=J.charCodeAt(1),ie=!(te>=65&&te<=90&&ge>=65&&ge<=90),se=null;if(H===U)se=ie?Re:be;else{if(ie)throw new Error("Not a valid DICOM file (no magic DICM word foundand implicit VR big endian detected)");se=je}let ae=new $n("UI");return ae.tag=new Bn("0002","0010"),ae.value=[se],ae.vl=ae.value[0].length,ae.startOffset=P.startOffset,ae.endOffset=ae.startOffset+ae.vl,ae}(h);this.#e[R.tag.getKey()]=R,c=R.value[0],a=0}if(!function(R){return R===Re||R===be||R===je||Qp(R)||Wp(R)||$p(R)||bb(R)}(c))throw new Error("Unsupported DICOM transfer syntax: '"+c+"' ("+function(R){let P="Unknown";return Se[R]!==void 0&&(P=Se[R]),P}(c)+")");let _=!1;for(vb(c)&&(_=!0),Sb(c)&&(v=new zd(r,!1));a<r.byteLength;){h=this.#l(v,a,_),a=h.endOffset;let R=h.tag.getKey();this.#e[R]===void 0?this.#e[R]=h:p.warn("Not saving duplicate tag: "+R)}if(isNaN(a))throw new Error("Problem while parsing, bad offset");r.byteLength!==a&&p.warn("Did not reach the end of the buffer: "+a+" != "+r.byteLength);let E=0,I=16;if(this.#e[Ib]!==void 0&&(h=this.#e[wb],h!==void 0?(h.value=this.#u(h,v),E=h.value[0]):p.warn("Reading DICOM pixel data with default pixelRepresentation."),h=this.#e[Cb],h!==void 0?(h.value=this.#u(h,v),I=h.value[0]):p.warn("Reading DICOM pixel data with default bitsAllocated.")),this.#t!==void 0&&this.setDecoderCharacterSet(this.#t),h=this.#e["00080005"],h!==void 0){let R;h.value=this.#u(h,v),h.value.length===1?R=h.value[0]:(R=h.value[1],p.warn("Unsupported character set with code extensions: '"+R+"'.")),this.setDecoderCharacterSet(function(P){let U="utf-8";return P==="ISO_IR 100"?U="iso-8859-1":P==="ISO_IR 101"?U="iso-8859-2":P==="ISO_IR 109"?U="iso-8859-3":P==="ISO_IR 110"?U="iso-8859-4":P==="ISO_IR 144"?U="iso-8859-5":P==="ISO_IR 127"?U="iso-8859-6":P==="ISO_IR 126"?U="iso-8859-7":P==="ISO_IR 138"?U="iso-8859-8":P==="ISO_IR 148"?U="iso-8859-9":P==="ISO_IR 13"?U="shift-jis":P==="ISO_IR 166"?U="iso-8859-11":P==="ISO 2022 IR 87"?U="iso-2022-jp":P==="ISO 2022 IR 149"||P==="ISO 2022 IR 58"||(P==="ISO_IR 192"?U="utf-8":P==="GB18030"?U="gb18030":P==="GB2312"?U="gb2312":P==="GBK"&&(U="chinese")),U}(R))}if(this.#d(this.#e,v,E,I),h=this.#e[Ib],h!==void 0&&h.undefinedLength){let R=1;this.#e[Db]!==void 0&&(R=Number(this.#e[Db].value[0]));let P=h.value;if(P.length>1&&P.length>R){let U=P.length/R,H=[],J=0;for(let te=0;te<R;++te){J=te*U;let ge=0;for(let ae=0;ae<U;++ae)ge+=P[J+ae].length;let ie=new P[0].constructor(ge),se=0;for(let ae=0;ae<U;++ae)ie.set(P[J+ae],se),se+=P[J+ae].length;H[te]=ie}h.value=H}}}}class ii{#e={};add(r,a){this.#e[r]===void 0&&(this.#e[r]=[]),this.#e[r].push(a)}remove(r,a){if(this.#e[r]===void 0)return;let c=0;for(let h=0;h<this.#e[r].length;++h)this.#e[r][h]===a&&(++c,this.#e[r].splice(h,1));c===0&&p.debug("No callback found on remove listener for type "+r)}fireEvent=r=>{if(this.#e[r.type]===void 0)return;let a=this.#e[r.type].slice();for(let c=0;c<a.length;++c)a[c](r)}}function bs(u,r,a,c,h,m,v,S){v===void 0&&(v=!1),S===void 0&&(S=!1);let _=r;v?(m*=-1,S?_-=(h-1)*c:c*=-1):S&&(_+=(h-1)*c,c*=-1);let E=m-h*c,I=0,R=0;return{next:function(){if(I<a){let P={value:u(_),done:!1,index:_};return _+=c,++I,++R,R===h&&(R=0,_+=E),P}return{done:!0,index:_}}}}function Xp(u){let r=[],a=u.next();for(;!a.done;)r.push(a.value),a=u.next();return r}function Eb(u,r,a,c){let h=u.getGeometry().getSize(),m=2;c&&c!==void 0&&(m=c.getColAbsMax(2).index);let v=r.getValues(),S=new d(v.map(function(ie,se){return se===m||se>2?ie:0})),_=h.indexToOffset(S);a===void 0&&(a=!1);let E=null;E=a?function(ie){return u.getRescaledValueAtOffset(ie)}:function(ie){return u.getValueAtOffset(ie)};let I=h.get(0),R=h.get(1),P=h.get(2),U=h.getDimSize(2),H=u.getNumberOfComponents(),J=u.getPlanarConfiguration()===1,te=function(ie,se,ae,re,Ce,Ie,xe,ke){return H===1?bs(ie,se,ae,re,Ce,Ie,xe,ke):H===3?function(et,At,qt,ct,en,Pe,tn,Vt,Sn){let Ze=[];return Sn?(Ze.push(bs(et,At,qt,ct,en,Pe,tn,Vt)),Ze.push(bs(et,At+qt*ct,qt,ct,en,Pe,tn,Vt)),Ze.push(bs(et,At+2*qt*ct,qt,ct,en,Pe,tn,Vt))):(ct*=3,Pe*=3,Ze.push(bs(et,At,qt,ct,en,Pe,tn,Vt)),Ze.push(bs(et,At+1,qt,ct,en,Pe,tn,Vt)),Ze.push(bs(et,At+2,qt,ct,en,Pe,tn,Vt))),{next:function(){let He=Ze[0].next(),xn=Ze[1].next(),Yn=Ze[2].next();return He.done?{done:!0,index:Yn.index}:{value:[He.value,xn.value,Yn.value],done:!1,index:[He.index,xn.index,Yn.index]}}}}(ie,3*se,ae,re,Ce,Ie,xe,ke,J):void 0},ge=null;if(c&&c!==void 0){let ie=c.getColAbsMax(0),se=c.getColAbsMax(2),ae=!1,re=!1,Ce=null;if(se.index===2)Ce=I*R,ge=ie.index===0?te(E,_,Ce,1,I,I,ae,re):te(E,_,Ce,I,R,1,ae,re);else if(se.index===0)Ce=P*R,ge=ie.index===1?te(E,_,Ce,I,R,U,ae,re):te(E,_,Ce,U,P,I,ae,re);else{if(se.index!==1)throw new Error("Unknown direction: "+se.index);Ce=P*I,ge=ie.index===0?te(E,_,Ce,1,I,U,ae,re):te(E,_,Ce,U,P,1,ae,re)}}else if(u.getNumberOfComponents()===1)ge=function(ie,se,ae,re){re===void 0&&(re=1);let Ce=se;return{next:function(){if(Ce<ae){let Ie={value:ie(Ce),done:!1,index:Ce};return Ce+=re,Ie}return{done:!0,index:ae}}}}(E,_,_+U);else{if(u.getNumberOfComponents()!==3)throw new Error("Unsupported number of components: "+u.getNumberOfComponents());_*=3,U*=3,ge=function(ie,se,ae,re,Ce){re===void 0&&(re=1),Ce===void 0&&(Ce=!1);let Ie=se,xe=1;Ce?xe=(ae-se)/3:re*=3;let ke=Ie+xe,et=Ie+2*xe;return{next:function(){if(Ie<ae){let At={value:[ie(Ie),ie(ke),ie(et)],done:!1,index:[Ie,ke,et]};return Ie+=re,ke+=re,et+=re,At}return{done:!0,index:[ae]}}}}(E,_,_+U,1,J)}return ge}function Tb(u,r){let a=0,c=0;return{next:function(){if(a<r){c+1<u.length&&a>=u[c+1].index&&++c;let h={value:u[c].colour,done:!1,index:a};return++a,h}return{done:!0,index:r}}}}class Hd{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getSlope(){return this.#e}getIntercept(){return this.#t}apply(r){return r*this.#e+this.#t}equals(r){return r!=null&&this.getSlope()===r.getSlope()&&this.getIntercept()===r.getIntercept()}isID(){return this.getSlope()===1&&this.getIntercept()===0}}class Oo{#e;constructor(r){if(!r||r===void 0)throw new Error("Cannot create size with no values.");if(r.length===0)throw new Error("Cannot create size with empty values.");if(!r.every(function(a){return!isNaN(a)&&a!==0}))throw new Error("Cannot create size with non number or zero values.");this.#e=r}get(r){return this.#e[r]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}moreThanOne(r){return this.length()>=r+1&&this.get(r)!==1}canScroll3D(r){let a=2;return r!==void 0&&(a=r.getThirdColMajorDirection()),this.moreThanOne(a)}canScroll(r){let a=this.canScroll3D(r);for(let c=3;c<this.length();++c)a=a||this.moreThanOne(c);return a}getDimSize(r,a){if(r>this.length())return null;if(a===void 0)a=0;else if(a<0||a>r)throw new Error("Invalid start value for getDimSize");let c=1;for(let h=a;h<r;++h)c*=this.get(h);return c}getTotalSize(r){return this.getDimSize(this.length(),r)}equals(r){if(!r)return!1;let a=this.length();if(a!==r.length())return!1;for(let c=0;c<a;++c)if(this.get(c)!==r.get(c))return!1;return!0}isInBounds(r,a){if(!r)return!1;let c=this.length();if(c!==r.length())return!1;if(a===void 0){a=[];for(let v=0;v<c;++v)a.push(v)}else for(let v=0;v<c;++v)if(a[v]>c-1)throw new Error("Wrong input dir value: "+a[v]);for(let v=0;v<a.length;++v)if(h=r.get(a[v]),m=this.get(a[v]),!(h>=0&&h<m))return!1;var h,m;return!0}indexToOffset(r,a){if(r.length()<this.length())throw new Error("Incompatible index and size length");if(a===void 0)a=0;else if(a<0||a>this.length()-1)throw new Error("Invalid start value for indexToOffset");let c=0;for(let h=a;h<this.length();++h)c+=r.get(h)*this.getDimSize(h,a);return c}offsetToIndex(r){let a=new Array(this.length()),c=r,h=0;for(let m=this.length()-1;m>0;--m)h=this.getDimSize(m),a[m]=Math.floor(c/h),c-=a[m]*h;return a[0]=c,new d(a)}get2D(){return{x:this.get(0),y:this.get(1)}}}class T5{min;max;mean;stdDev;median;p25;p75;constructor(r,a,c,h){this.min=r,this.max=a,this.mean=c,this.stdDev=h}}function Zp(u,r){return function(a){return a!=null&&(a.includes("median")||a.includes("p25")||a.includes("p75"))}(r)?function(a){let c=Kp(a);return a.sort(function(h,m){return h-m}),c.median=Jp(a,.5),c.p25=Jp(a,.25),c.p75=Jp(a,.75),c}(u):Kp(u)}function Kp(u){let r=u[0],a=r,c=0,h=0,m=0,v=u.length;for(let I=0;I<v;++I)m=u[I],m<r?r=m:m>a&&(a=m),c+=m,h+=m*m;let S=c/v,_=h/v-S*S;_<0&&(_=0);let E=Math.sqrt(_);return new T5(r,a,S,E)}function Jp(u,r){if(u.length===0)throw new Error("Empty array provided for percentile calculation.");if(r<0||r>1)throw new Error("Invalid ratio provided for percentile calculation: "+r);if(r===0)return u[0];if(r===1)return u[u.length-1];let a=(u.length-1)*r,c=Math.floor(a),h=u[c];return h+(u[c+1]-h)*(a-c)}function Qd(){return Math.random().toString(36).substring(2,15)}class x5{min;max;constructor(r,a){this.min=r,this.max=a}}class Po{#e;constructor(r){if(!r||r===void 0)throw new Error("Cannot create spacing with no values.");if(r.length===0)throw new Error("Cannot create spacing with empty values.");if(!r.every(function(a){return!isNaN(a)&&a!==0}))throw new Error("Cannot create spacing with non number or zero values.");this.#e=r}get(r){return this.#e[r]}length(){return this.#e.length}toString(){return"("+this.#e.toString()+")"}getValues(){return this.#e.slice()}equals(r){if(!r)return!1;let a=this.length();if(a!==r.length())return!1;for(let c=0;c<a;++c)if(this.get(c)!==r.get(c))return!1;return!0}get2D(){return{x:this.get(0),y:this.get(1)}}}class Ca{#e;#t;#n;#i={};#r;#o=pe();#s=!1;constructor(r,a,c,h,m){this.#e=[r],this.#t=a,this.#n=c,m!==void 0&&(this.#r=m,this.#i[m]=[r]),h!==void 0&&(this.#o=h)}getInitialTime(){return this.#r}getCurrentTotalNumberOfSlices(){let r=Object.keys(this.#i);if(r.length===0)return this.#e.length;let a=0;for(let c=0;c<r.length;++c)a+=this.#i[r[c]].length;return a}hasSlicesAtTime(r){return this.#i[r]!==void 0}getCurrentNumberOfSlicesBeforeTime(r){let a=Object.keys(this.#i);if(a.length===0)return;let c=0;for(let h=0;h<a.length;++h){let m=a[h];if(parseInt(m,10)===r)break;c+=this.#i[m].length}return c}getOrigin(){return this.#e[0]}getOrigins(){return this.#e}includesOrigin(r,a){for(let c=0;c<this.#e.length;++c)if(this.#e[c].isSimilar(r,a))return!0;return!1}getSize(r){let a=this.#t;if(r&&r!==void 0){let c=Wl([this.#t.get(0),this.#t.get(1),this.#t.get(2)],r);c=c.map(Math.abs),a=new Oo(c.concat(this.#t.getValues().slice(3)))}return a}#a(){let r=function(a){if(a.length<=1)return;let c=[];for(let v=0;v<a.length-1;++v){let S=a[v],_=a[v+1],E=S.getDistance(_);if(E===0)throw new Error("Zero slice spacing "+S.toString()+" "+_.toString());c.push(E)}let h=Kp(c),m=cn(h.mean,4);return h.stdDev>j&&p.warn("Varying slice spacing, value: "+m+" (mean: "+h.mean+", min: "+h.min+", max: "+h.max+", stdDev: "+h.stdDev+")"),m}(this.#e);if(r!==void 0&&this.#n.get(2)!==r){p.trace("Using geometric spacing "+r+" instead of tag spacing "+this.#n.get(2));let a=this.#n.getValues();a[2]=r,this.#n=new Po(a)}}getSpacing(r){this.#s&&(this.#a(),this.#s=!1);let a=this.#n;if(r&&r!==void 0){let c=Wl([this.#n.get(0),this.#n.get(1),this.#n.get(2)],r);c=c.map(Math.abs),a=new Po(c)}return a}getRealSpacing(){return this.getSpacing(this.#o.getInverse().asOneAndZeros())}getOrientation(){return this.#o}getSliceIndex(r,a){let c=this.#e;a!==void 0&&(c=this.#i[a]);let h=r.getClosest(c),m=c[h],v=r.minus(m);return new O(this.#o.get(0,2),this.#o.get(1,2),this.#o.get(2,2)).isCodirectional(v)?h+1:h}appendOrigin(r,a,c){let h=function(m){return m.equals(r)};if(c!==void 0){if(this.#i[c].find(h)!==void 0)throw new Error("Cannot append same time origin twice");this.#i[c].splice(a,0,r)}if(c===void 0||c===this.#r){if(this.#e.find(h)!==void 0)throw new Error("Cannot append same origin twice");this.#s=!0,this.#e.splice(a,0,r);let m=this.#t.getValues();m[2]+=1,this.#t=new Oo(m)}}appendFrame(r,a){this.#i[a]=[r];let c=this.#t.getValues(),h=this.#n.getValues();c.length===4?c[3]+=1:(c.push(2),h.push(1)),this.#t=new Oo(c),this.#n=new Po(h)}toString(){return"Origin: "+this.getOrigin()+", Size: "+this.getSize()+", Spacing: "+this.getSpacing()+", Orientation: "+this.getOrientation()}equals(r){return r!==null&&this.getOrigin().equals(r.getOrigin())&&this.getSize().equals(r.getSize())&&this.getSpacing().equals(r.getSpacing())}isInBounds(r){return this.isIndexInBounds(this.worldToIndex(r))}isIndexInBounds(r,a){return this.getSize().isInBounds(r,a)}indexToWorld(r){let a=this.getSpacing(),c=new $(r.get(0)*a.get(0),r.get(1)*a.get(1),r.get(2)*a.get(2)),h=this.getOrientation().multiplyPoint3D(c),m=r.getValues(),v=this.getOrigin();return m[0]=v.getX()+h.getX(),m[1]=v.getY()+h.getY(),m[2]=v.getZ()+h.getZ(),new ce(m)}pointToWorld(r){let a=this.getSpacing(),c=new $(r.getX()*a.get(0),r.getY()*a.get(1),r.getZ()*a.get(2)),h=this.getOrientation().multiplyPoint3D(c),m=this.getOrigin();return new $(m.getX()+h.getX(),m.getY()+h.getY(),m.getZ()+h.getZ())}worldToIndex(r){let a=this.getOrigin(),c=new $(r.get(0)-a.getX(),r.get(1)-a.getY(),r.get(2)-a.getZ()),h=this.getOrientation().getInverse().multiplyPoint3D(c),m=r.getValues(),v=this.getSpacing();return m[0]=Math.round(h.getX()/v.get(0)),m[1]=Math.round(h.getY()/v.get(1)),m[2]=Math.round(h.getZ()/v.get(2)),new d(m)}worldToPoint(r){let a=this.getOrigin(),c=new $(r.get(0)-a.getX(),r.get(1)-a.getY(),r.get(2)-a.getZ()),h=this.getOrientation().getInverse().multiplyPoint3D(c),m=r.getValues(),v=this.getSpacing();return m[0]=h.getX()/v.get(0),m[1]=h.getY()/v.get(1),m[2]=h.getZ()/v.get(2),new $(m[0],m[1],m[2])}}function Wl(u,r){return r.getInverse().multiplyArray3D(u)}function xb(u,r){return r.multiplyArray3D(u)}function $l(u){return("0"+u).slice(-2)}function eg(u){if(u===void 0||u.value.length!==1)return;let r=u.value[0],a=4,c=6;return r.length===10&&(a=5,c=8),{year:parseInt(r.substring(0,4),10),monthIndex:r.length>=a+2?parseInt(r.substring(a,a+2),10)-1:0,day:r.length===c+2?parseInt(r.substring(c,c+2),10):0}}function Wd(u){if(u===void 0||u.value.length!==1)return;let r=u.value[0],a=parseInt(r.substring(0,2),10),c=r.length>=4?parseInt(r.substring(2,4),10):0,h=r.length>=6?parseInt(r.substring(4,6),10):0,m=r.length>=8?r.substring(7,10):0;return{hours:a,minutes:c,seconds:h,milliseconds:m===0?0:parseInt(m,10)*Math.pow(10,3-m.length)}}function Ab(u){return{year:u.getFullYear().toString(),monthIndex:$l((u.getMonth()+1).toString()),day:$l(u.getDate().toString())}}function Mb(u){return{hours:$l(u.getHours().toString()),minutes:$l(u.getMinutes().toString()),seconds:$l(u.getSeconds().toString())}}function Rb(u){return u.year+u.monthIndex+u.day}function Ob(u){return u.hours+u.minutes+u.seconds}function Pb(){return new K([1,0,0,0,0,1,0,-1,0])}let Dr={Axial:"axial",Coronal:"coronal",Sagittal:"sagittal"};function Fb(u){let r;return u===Dr.Axial?r=pe():u===Dr.Coronal?r=Pb():u===Dr.Sagittal&&(r=new K([0,0,-1,1,0,0,0,-1,0])),r}function kb(u){let r=new O(u.get(0,0),u.get(1,0),u.get(2,0)),a=new O(u.get(0,1),u.get(1,1),u.get(2,1)),c=new O(u.get(0,2),u.get(1,2),u.get(2,2));return tg(r)+tg(a)+tg(c)}function tg(u){let r=new O(Math.abs(u.getX()),Math.abs(u.getY()),Math.abs(u.getZ())),a="",c=u.getX()<0?"R":"L",h=u.getY()<0?"A":"P",m=u.getZ()<0?"I":"S",v=1e-4;for(let S=0;S<3;S++)if(r.getX()>v&&r.getX()>r.getY()&&r.getX()>r.getZ())a+=c,r=new O(0,r.getY(),r.getZ());else if(r.getY()>v&&r.getY()>r.getX()&&r.getY()>r.getZ())a+=h,r=new O(r.getX(),0,r.getZ());else{if(!(r.getZ()>v&&r.getZ()>r.getX()&&r.getZ()>r.getY()))break;a+=m,r=new O(r.getX(),r.getY(),0)}return a}function Lb(u){let r,a=Nb(u);return a!==void 0&&(r=function(c){let h;return["LPS","LAI","RPI","RAS","ALS","ARI","PLI","PRS"].includes(c)?h=Dr.Axial:["LSA","LIP","RSP","RIA","ILA","IRP","SLP","SRA"].includes(c)?h=Dr.Coronal:["PSL","PIR","ASR","AIL","IAR","IPL","SAL","SPR"].includes(c)&&(h=Dr.Sagittal),h}(kb(a.asOneAndZeros()))),r}function Nb(u){let r;if(u!==void 0&&u.length===6){let a=new O(u[0],u[1],u[2]),c=new O(u[3],u[4],u[5]),h=a.crossProduct(c);r=new K([a.getX(),c.getX(),h.getX(),a.getY(),c.getY(),h.getY(),a.getZ(),c.getZ(),h.getZ()])}return r}function Vb(u,r){let a=pe();return r!==void 0&&(a=u.asOneAndZeros().getInverse().multiply(r)),a.getAbs()}function ng(u){let r=u["00280010"];if(r===void 0)throw new Error("Missing DICOM image number of rows");if(r.value.length===0)throw new Error("Empty DICOM image number of rows");let a=u["00280011"];if(a===void 0)throw new Error("Missing DICOM image number of columns");if(a.value.length===0)throw new Error("Empty DICOM image number of columns");return[a.value[0],r.value[0]]}function Bb(u){if(u["00280030"]===void 0)return null;let r=u["00280030"],a=[parseFloat(r.value[1]),parseFloat(r.value[0])];return u["00180088"]!==void 0&&a.push(parseFloat(u["00180088"].value[0])),new Po(a)}function Yr(u,r,a){let c="";if(u===void 0)c+=" "+r+" is undefined,";else if(u.value.length===0)c+=" "+r+" is empty,";else if(a!==void 0)for(let h=0;h<a.length;++h)u.value.includes(a[h])||(c+=" "+r+" does not contain "+a[h]+" (value: "+u.value+"),");return c}class Ub{getTime(r){}}class qb{#e;#t;getWarning(){return this.#e}checkElements(r){let a;this.#e=void 0,ng(r);let c=r["00080060"];if(c!==void 0&&(a=c.value[0],a==="PT")){let h=function(m){let v,S="";S+=Yr(m["00280051"],"Corrected Image (00280051)",["ATTN","DECY"]),S+=Yr(m["00541102"],"Decay Correction (00541102)",["START"]),S+=Yr(m["00541001"],"Units (00541001)",["BQML"]);let _=m["00101030"],E=Yr(_," PatientWeight (00101030)");if(E.length===0){let P=parseFloat(_.value[0]);isNaN(P)?S+=" PatientWeight is not a number":v=P}else S+=E;let I=function(P){let U,H="",J=eg(P["00080021"]),te,ge,ie,se=P["00540016"];if(H+=Yr(se,"RadiopharmaceuticalInformationSequence (00540016)"),se!==void 0){se.value.length!==1&&p.warn("Found more than 1 istopes in RadiopharmaceuticalInformation Sequence.");let ke="RadionuclideTotalDose (00181074)",et=se.value[0]["00181074"];if(U=Yr(et,ke),U.length===0){let tn=parseFloat(et.value[0]);isNaN(tn)?H+=" TotalDose is not a number":te=tn}else H+=U;let At="RadionuclideHalfLife (00181075)",qt=se.value[0]["00181075"];if(U=Yr(qt,At),U.length===0){let tn=parseFloat(qt.value[0]);isNaN(tn)?H+=" HalfLife is not a number":ge=tn}else H+=U;let ct=se.value[0]["00181078"],en,Pe;if(ct===void 0)en=J,Pe=Wd(se.value[0]["00181072"]);else{let tn=function(Vt){if(Vt===void 0||Vt.value.length!==1)return;let Sn=Vt.value[0].split("&")[0],Ze=new $n("DA");Ze.value=[Sn.substring(0,8)];let He=eg(Ze),xn=new $n("TM");return xn.value=[Sn.substring(8)],{date:He,time:Sn.length>=9?Wd(xn):void 0}}(ct);en=tn.date,Pe=tn.time}Pe===void 0&&(Pe={hours:0,minutes:0,seconds:0,milliseconds:0}),ie=new Date(en.year,en.monthIndex,en.day,Pe.hours,Pe.minutes,Pe.seconds,Pe.milliseconds)}let ae=Wd(P["00080031"]),re=new Date(J.year,J.monthIndex,J.day,ae.hours,ae.minutes,ae.seconds,ae.milliseconds),Ce=P["00080022"],Ie=P["00080032"];if(Ce!==void 0&&Ie!==void 0){let ke=eg(Ce),et=Wd(Ie),At=new Date(ke.year,ke.monthIndex,ke.day,et.hours,et.minutes,et.seconds,et.milliseconds);if(re>At){let qt="Series date/time is after Aquisition date/time (diff="+(re.getTime()-At.getTime()).toString()+"ms) ";p.debug(qt);let ct=0,en="FrameReferenceTime (00541300)",Pe=P["00541300"];H+=Yr(Pe,en),Pe!==void 0&&(ct=Pe.value[0]);let tn=0,Vt="ActualFrameDuration (0018,1242)",Sn=P["00181242"];if(H+=Yr(Sn,Vt),Sn!==void 0&&(tn=Sn.value[0]),ct>0&&tn>0){tn/=1e3,ct/=1e3;let Ze=Math.log(2)/ge,He=Ze*tn,xn=1/Ze*Math.log(He/(1-Math.exp(-He)))-ct;re=new Date(ke.year,ke.monthIndex,ke.day,et.hours,et.minutes,et.seconds+xn,et.milliseconds)}}}let xe;if(re!==void 0&&ie!==void 0&&te!==void 0&&ge!==void 0){let ke=(re.getTime()-ie.getTime())/1e3;xe=te*Math.pow(2,-ke/ge)}return{value:xe,warning:H}}(m);S+=I.warning;let R={};return S.length!==0?R.warning="Cannot calculate PET SUV:"+S:R.value=1e3*v/I.value,R}(r);this.#t=h.value,this.#e=h.warning}return this.#e}create(r,a,c){let h=ng(r),m=[h[0],h[1],1],v=r["00280008"];if(v!==void 0){let vt=parseInt(v.value[0],10);vt>1&&m.push(vt)}let S=new Oo(m),_=function(vt){let ve=1,Le=1,it=["00280030","00181164","00182010","00280034"];for(let an=0;an<it.length;++an){let An=vt[it[an]];if(An&&An.value.length===2){ve=parseFloat(An.value[0]),Le=parseFloat(An.value[1]);break}}return Le===0&&(p.warn("Zero column spacing."),Le=1),ve===0&&(p.warn("Zero row spacing."),ve=1),new Po([Le,ve,1])}(r),E=r["00020010"].value[0],I=$p(E),R=Qp(E),P=Wp(E),U=r["00200032"],H=new Array(0,0,0);U!==void 0&&(H=[parseFloat(U.value[0]),parseFloat(U.value[1]),parseFloat(U.value[2])]);let J=function(vt){let ve=vt["00200037"],Le;return ve!==void 0&&(Le=Nb(ve.value.map(it=>parseFloat(it)))),Le}(r),te=new $(H[0],H[1],H[2]),ge=new Ub().getTime(r),ie=new Ca(te,S,_,J,ge),se,ae=r["00080018"];ae!==void 0&&(se=ae.value[0]);let re=1,Ce=r["00280002"];Ce!==void 0&&(re=Ce.value[0]);let Ie=S.getTotalSize()*re;if(Ie!==a.length){if(p.warn("Badly sized pixel buffer: "+a.length+" != "+Ie),!(Ie<a.length))throw new Error("Underestimated buffer size, can't fix it...");a=a.slice(0,S.getTotalSize())}let xe=new Ds(ie,a,[se]),ke=r["00280004"];if(ke!==void 0){let vt=ke.value[0].toUpperCase();(I||R||P)&&vt!=="MONOCHROME1"&&vt!=="MONOCHROME2"&&(vt="RGB"),vt==="RGB"&&re===1&&(vt="PALETTE COLOR"),xe.setPhotometricInterpretation(vt)}let et=r["00280006"];et!==void 0&&xe.setPlanarConfiguration(et.value[0]);let At=1,qt=r["00281053"];if(qt!==void 0){let vt=parseFloat(qt.value[0]);isNaN(vt)||(At=vt)}let ct=0,en=r["00281052"];if(en!==void 0){let vt=parseFloat(en.value[0]);isNaN(vt)||(ct=vt)}let Pe={numberOfFiles:c},tn=r["00080060"];tn!==void 0&&(Pe.Modality=tn.value[0]);let Vt=!1,Sn=1;this.#t!==void 0&&(Vt=!0,Sn=this.#t,p.info("Applying PET SUV calibration: "+Sn),At*=Sn,ct*=Sn);let Ze=new Hd(At,ct);xe.setRescaleSlopeAndIntercept(Ze);let He=function(vt){let ve,Le=r[vt];return Le!==void 0&&(ve=Le.value[0]),ve};if(Pe.TransferSyntaxUID=He("00020010"),Pe.MediaStorageSOPClassUID=He("00020002"),Pe.SOPClassUID=He("00080016"),Pe.Modality=He("00080060"),Pe.ImageType=He("00080008"),Pe.SamplesPerPixel=He("00280002"),Pe.PhotometricInterpretation=He("00280004"),Pe.PixelRepresentation=He("00280103"),Pe.BitsAllocated=He("00280100"),Pe.BitsStored=He("00280101"),Pe.HighBit=He("00280102"),Pe.StudyDate=He("00080020"),Pe.StudyTime=He("00080030"),Pe.StudyInstanceUID=He("0020000D"),Pe.StudyID=He("00200010"),Pe.SeriesInstanceUID=He("0020000E"),Pe.SeriesNumber=He("00200011"),Pe.ReferringPhysicianName=He("00080090"),Pe.PatientName=He("00100010"),Pe.PatientID=He("00100020"),Pe.PatientBirthDate=He("00100030"),Pe.PatientSex=He("00100040"),Pe.Manufacturer=He("00080070"),Pe.ManufacturerModelName=He("00081090"),Pe.DeviceSerialNumber=He("00181000"),Pe.SoftwareVersions=He("00181020"),Pe.ImageOrientationPatient=He("00200037"),Pe.FrameOfReferenceUID=He("00200052"),Pe.IsSigned=Pe.PixelRepresentation===1,Vt)Pe.pixelUnit="SUV";else{let vt=function(ve){let Le,it=["00281054","00541001"];for(let an=0;an<it.length;++an){let An=ve[it[an]];if(An!==void 0){Le=An.value[0];break}}if(Le===void 0){let an=ve["00080060"];an!==void 0&&an.value[0]==="CT"&&(Le="HU")}return Le}(r);vt!==void 0&&(Pe.pixelUnit=vt)}let xn={},Yn=r["00281050"],Qt=r["00281051"],Cn=r["00281055"];if(Yn!==void 0&&Qt!==void 0){let vt;for(let ve=0;ve<Yn.value.length;++ve){let Le=parseFloat(Yn.value[ve]),it=parseFloat(Qt.value[ve]);Le&&it&&it!==0&&(vt="",Cn!==void 0&&(vt=Cn.value[ve]),vt===""&&(vt="Default"+ve),it*=Sn,it<1&&(it=1),xn[vt]={wl:[new g(Le*Sn,it)],name:vt}),it===0&&p.warn("Zero window width found in DICOM.")}}if(Pe.windowPresets=xn,xe.getPhotometricInterpretation()==="PALETTE COLOR"){let vt=r["00281201"],ve=r["00281202"],Le=r["00281203"],it,an,An,oi=r["00281101"];if(oi!==void 0&&oi.value.length===3){if(oi.value[2]===16){let Mi=!1,or=oi.value[0];or===0&&(or=65536);let tc=vt.vl;if(tc!==2*or&&(Mi=!0,p.info("16bits lut but size is not double. desc: "+or+" vl: "+tc)),parseInt(r["00280100"].value[0],10)===8&&(Mi=!0,p.info("Scaling 16bits color lut since bits allocated is 8.")),Mi){let Ma=function(UR){return UR>>8};it=vt.value.map(Ma),an=ve.value.map(Ma),An=Le.value.map(Ma)}}else if(oi.value[2]===8){p.info("Scaling 16bits color lut since the lut descriptor is 8.");let Mi=vt.value.slice(0);it=Array.from(new Uint8Array(Mi.buffer)),Mi=ve.value.slice(0),an=Array.from(new Uint8Array(Mi.buffer)),Mi=Le.value.slice(0),An=Array.from(new Uint8Array(Mi.buffer))}}F.palette={red:it,green:an,blue:An}}let ec=r["00082144"];return ec!==void 0&&(Pe.RecommendedDisplayFrameRate=parseInt(ec.value[0],10)),xe.setMeta(Pe),xe}}class Gb{#e=!0;#t;constructor(r,a){a!==void 0&&(this.#e=a),this.#t=new DataView(r)}writeUint8(r,a){return this.#t.setUint8(r,a),r+Uint8Array.BYTES_PER_ELEMENT}writeInt8(r,a){return this.#t.setInt8(r,a),r+Int8Array.BYTES_PER_ELEMENT}writeUint16(r,a){return this.#t.setUint16(r,a,this.#e),r+Uint16Array.BYTES_PER_ELEMENT}writeInt16(r,a){return this.#t.setInt16(r,a,this.#e),r+Int16Array.BYTES_PER_ELEMENT}writeUint32(r,a){return this.#t.setUint32(r,a,this.#e),r+Uint32Array.BYTES_PER_ELEMENT}writeUint64(r,a){return this.#t.setBigUint64(r,a,this.#e),r+BigUint64Array.BYTES_PER_ELEMENT}writeInt32(r,a){return this.#t.setInt32(r,a,this.#e),r+Int32Array.BYTES_PER_ELEMENT}writeInt64(r,a){return this.#t.setBigInt64(r,a,this.#e),r+BigInt64Array.BYTES_PER_ELEMENT}writeFloat32(r,a){return this.#t.setFloat32(r,a,this.#e),r+Float32Array.BYTES_PER_ELEMENT}writeFloat64(r,a){return this.#t.setFloat64(r,a,this.#e),r+Float64Array.BYTES_PER_ELEMENT}writeHex(r,a){let c=parseInt(a,16);return this.#t.setUint16(r,c,this.#e),r+Uint16Array.BYTES_PER_ELEMENT}writeBinaryArray(r,a){if(a.length%8!=0)throw new Error("Cannot write boolean array as binary.");let c=null,h=null;for(let m=0,v=a.length;m<v;m+=8){c=0;for(let S=0;S<8;++S)h=a[m+S]===0?0:1,c+=h<<S;r=this.writeUint8(r,c)}return r}writeUint8Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeUint8(r,a[c]);return r}writeInt8Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeInt8(r,a[c]);return r}writeUint16Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeUint16(r,a[c]);return r}writeInt16Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeInt16(r,a[c]);return r}writeUint32Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeUint32(r,a[c]);return r}writeUint64Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeUint64(r,a[c]);return r}writeInt32Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeInt32(r,a[c]);return r}writeInt64Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeInt64(r,a[c]);return r}writeFloat32Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeFloat32(r,a[c]);return r}writeFloat64Array(r,a){for(let c=0,h=a.length;c<h;++c)r=this.writeFloat64(r,a[c]);return r}}let jb=0;class A5{action;value;constructor(r){this.action=r}}let M5={copy:function(u){return u},remove:function(){return null},clear:function(u){return u.value=[],u},replace:function(u,r){return u.value=[r],u}};function zb(u){let r="1.2.826.0.1.3680043.9.7278.1.",a="";if(u==="ImplementationClassUID")a=r+"0.34.0";else{let c="."+new Date().toISOString().replace(/\D/g,"").substring(0,14);jb+=1;let h="."+jb;a=r;let m=29+h.length+c.length,v=Math.min(u.length,64-m);if(v>1){let S="";for(let _=0;_<v;++_)S+=u.charCodeAt(_);a+=S.substring(0,v)}a+=c+h}return a}function ig(u){return u%2==0}function rg(u){let r=ee[u];return r!==void 0&&r==="string"}function og(u,r){let a=new Uint8Array(u.length+1);return a.set(u),a.set(r,u.length),a}class R5{encode(r){let a=new Uint8Array(r.length);for(let c=0,h=r.length;c<h;++c)a[c]=r.charCodeAt(c);return a}}let sg="00080005",ag="00280100";class O5{#e=!1;#t=!0;#n={default:{action:"copy",value:null}};#i=this.#n;#r=[];#o=new R5;#s=this.#o;setUseUnVrForPrivateSq(r){this.#e=r}setFixUnknownVR(r){this.#t=r}setRules(r,a){if(this.#i=r,this.#r=[],a){let c=Object.keys(r);for(let h of c){let m=r[h];if(m.action==="replace"&&m.value!==void 0&&m.value!==null){let v,S=!1;if(h.length===8&&(S=_r(h).getNameFromDictionary()!==void 0),S)v=h;else{let _=Da(h);_!==void 0&&(v=_.getKey())}v!==void 0&&this.#r.push(v)}}}}#a(r){return this.#o.encode(r)}#c(r){return this.#s.encode(r)}useSpecialTextEncoder(){this.#s=new TextEncoder}getElementToWrite(r){let a=r.tag.getGroupName(),c=r.tag.getNameFromDictionary(),h;return h=this.#i[r.tag.getKey()]!==void 0?this.#i[r.tag.getKey()]:c!==void 0&&this.#i[c]!==void 0?this.#i[c]:this.#i[a]!==void 0?this.#i[a]:this.#i.default,M5[h.action](r,h.value)}#l(r,a,c,h){let m;for(let v=0;v<c.length;++v){if(m=c[v],m.length===0)continue;let S=!1,_=m.find(I=>Di(I.tag));_!==void 0&&_.undefinedLength!==void 0&&(S=_.undefinedLength);let E=new $n("NONE");E.vl=S?4294967295:_.vl,E.tag=Mo(),E.value=[],a=this.#f(r,E,a,h);for(let I of m)Di(I.tag)||Ql(I.tag)||(a=this.#f(r,I,a,h));if(S){let I=new $n("NONE");I.vl=0,I.tag=new Bn("FFFE","E00D"),I.value=[],a=this.#f(r,I,a,h)}}return a}#u(r,a,c,h,m){let v=c;if(a.vr!=="NONE")if(h instanceof Uint8Array)c=h.length===8*a.vl?r.writeBinaryArray(c,h):r.writeUint8Array(c,h);else if(h instanceof Int8Array)c=r.writeInt8Array(c,h);else if(h instanceof Uint16Array)c=r.writeUint16Array(c,h);else if(h instanceof Int16Array)c=r.writeInt16Array(c,h);else if(h instanceof Uint32Array)c=r.writeUint32Array(c,h);else if(h instanceof Int32Array)c=r.writeInt32Array(c,h);else if(h instanceof BigUint64Array)c=r.writeUint64Array(c,h);else if(h instanceof BigInt64Array)c=r.writeInt64Array(c,h);else{let S=ee[a.vr];if(S!==void 0)if(S==="Uint8")c=r.writeUint8Array(c,h);else if(S==="Uint16")c=r.writeUint16Array(c,h);else if(S==="Int16")c=r.writeInt16Array(c,h);else if(S==="Uint32")c=r.writeUint32Array(c,h);else if(S==="Int32")c=r.writeInt32Array(c,h);else if(S==="Uint64")c=r.writeUint64Array(c,h);else if(S==="Int64")c=r.writeInt64Array(c,h);else if(S==="Float32")c=r.writeFloat32Array(c,h);else if(S==="Float64")c=r.writeFloat64Array(c,h);else{if(S!=="string")throw new Error("Unknown VR type: "+S);c=r.writeUint8Array(c,h)}else if(a.vr==="SQ")c=this.#l(r,c,h,m);else if(a.vr==="AT")for(let _=0;_<h.length;++_){let E=h[_]+"",I=E.substring(1,5),R=E.substring(6,10),P=[parseInt(I,16),parseInt(R,16)];c=r.writeUint16Array(c,P)}else a.vr==="xs"?c=h instanceof Int16Array?r.writeInt16Array(c,h):r.writeUint16Array(c,h):p.warn("Unknown VR: "+a.vr)}if(a.vr!=="SQ"&&a.vr!=="NONE"){let S=c-v;if(S!==a.vl){let _="Offset difference and VL are not equal: "+S+" != "+a.vl;_+=" (",a.tag!==void 0&&(_+=a.tag+", "),_+="vr:"+a.vr+")",p.warn(_)}}return c}#d(r,a,c,h,m){let v=!1;if(a.undefinedLength!==void 0&&(v=a.undefinedLength),v){let S={};S.FFFEE000={tag:Mo(),vr:"NONE",vl:0,value:[]};for(let _=0;_<h.length;++_)S[_]={tag:Mo(),vr:a.vr,vl:h[_].length,value:h[_]};c=this.#l(r,c,[S],m)}else{let S=h[0];h.length>1&&(S=function(_){let E=_.length,I=_[0].length;if(I===void 0)return _;let R=E*I,P=new _[0].constructor(R);for(let U=0;U<E;U++){let H=U*I;P.set(_[U],H)}return P}(h)),c=this.#u(r,a,c,S,m)}return c}#f(r,a,c,h){let m=a.tag.isWithVR(),v=!(!h&&m)||Z(a.vr);c=r.writeHex(c,a.tag.getGroup()),c=r.writeHex(c,a.tag.getElement());let S=a.vr;this.#e&&a.tag.isPrivate()&&S==="SQ"&&(p.warn("Write element using VR=UN for private sequence."),S="UN"),m&&!h&&(c=r.writeUint8Array(c,this.#a(S)),v&&(c+=2));let _=!1;(a.vr==="SQ"||Ro(a.tag))&&a.undefinedLength!==void 0&&(_=a.undefinedLength);let E=!1;Di(a.tag)&&a.undefinedLength!==void 0&&(E=a.undefinedLength);let I=a.vl;(_||E)&&(I=4294967295),c=v?r.writeUint32(c,I):r.writeUint16(c,I);let R=a.value;if(R===void 0&&(R=[]),c=Ro(a.tag)?this.#d(r,a,c,R,h):this.#u(r,a,c,R,h),_){let P=new $n("NONE");P.vl=0,P.tag=new Bn("FFFE","E0DD"),P.value=[],c=this.#f(r,P,c,h)}return c}getBuffer(r){let a=r["00020010"].value[0],c=vb(a),h=Sb(a);if(r[sg]!==void 0){let Ze=r[sg].value[0];Ze!==void 0&&Ze!=="ISO-IR 6"&&(p.debug("Change charset to UTF, was: "+Ze),this.useSpecialTextEncoder(),r[sg].value=["ISO_IR 192"])}let m;r[ag]!==void 0&&(m=r[ag].value[0]);let v=132,S=0,_=[],E=[],I,R,P=0,U=new Bn("0002","0000"),H=new Bn("0002","0001"),J=new Bn("0002","0012"),te=new Bn("0002","0013"),ge=this.#r.slice(),ie=Object.keys(r);for(let Ze=0,He=ie.length;Ze<He;++Ze){let xn=r[ie[Ze]];if(xn.tag=_r(ie[Ze]),I=this.getElementToWrite(xn),!(I===null||U.equals(I.tag)||H.equals(I.tag)||J.equals(I.tag)||te.equals(I.tag))){S=0;let Yn=ge.indexOf(I.tag.getKey());Yn!==-1&&ge.splice(Yn,1),this.#t&&P5(I,!h),this.#h(I,I.value,c,m),R=I.tag.getGroupName(),S+=nr(I.vr,R!=="Meta Element"&&c),S+=I.vl,R==="Meta Element"?(_.push(I),P+=S):E.push(I),v+=S}}for(let Ze of ge){let He=_r(Ze),xn=new $n(He.getVrFromDictionary()),Yn;if(xn.tag=He,this.#i[Ze]!==void 0)Yn=this.#i[Ze].value;else{let Cn=He.getNameFromDictionary();Yn=this.#i[Cn].value}let Qt=nr(xn.vr,c);Qt+=this.#h(xn,[Yn],c),E.push(xn),v+=Qt}let se=$d("FileMetaInformationVersion"),ae=nr(se.vr,!1);ae+=this.#h(se,[0,1],!1),_.push(se),P+=ae,v+=ae;let re=$d("ImplementationClassUID"),Ce=nr(re.vr,!1),Ie=zb("ImplementationClassUID").replace("-beta",".99");Ce+=this.#h(re,[Ie],!1),_.push(re),P+=Ce,v+=Ce;let xe=$d("ImplementationVersionName"),ke=nr(xe.vr,!1),et="DWV_"+"0.34.0".replace("-beta",".99");ke+=this.#h(xe,[et],!1),_.push(xe),P+=ke,v+=ke;let At=function(Ze,He){return gn(Ze.tag,He.tag)};_.sort(At),E.sort(At);let qt=$d("FileMetaInformationGroupLength"),ct=nr(qt.vr,!1);ct+=this.#h(qt,new Uint32Array([P]),!1),v+=ct;let en=new ArrayBuffer(v),Pe=new Gb(en),tn=new Gb(en,!h),Vt=128;Vt=Pe.writeUint8Array(Vt,this.#a("DICM")),Vt=this.#f(Pe,qt,Vt,!1);for(let Ze=0,He=_.length;Ze<He;++Ze)Vt=this.#f(Pe,_[Ze],Vt,!1);let Sn=132+ct+P;Vt!==Sn&&p.warn("Bad size calculation... meta offset: "+Vt+", calculated size:"+Sn+" (diff:"+(Vt-Sn)+")");for(let Ze=0,He=E.length;Ze<He;++Ze)Vt=this.#f(tn,E[Ze],Vt,c);return Vt!==v&&p.warn("Bad size calculation... final offset: "+Vt+", calculated size:"+v+" (diff:"+(Vt-v)+")"),en}#h(r,a,c,h){let m=0;if(r.vr==="SQ"){if(a!==null&&a!==0){let S=[],_=!1;r.undefinedLength!==void 0&&(_=r.undefinedLength,delete r.undefinedLength);for(let E=0;E<a.length;++E){let I=a[E],R=[],P=0;if(I===null||I===0)continue;let U=h,H=I[ag];H!==void 0&&H.value!==void 0&&(U=H.value[0]);let J=Object.keys(I);for(let ie=0,se=J.length;ie<se;++ie){let ae=J[ie],re=I[ae];re.tag=_r(ae),Di(re.tag)||(P+=this.#h(re,re.value,c,U),R.push(re),P+=nr(re.vr,c))}let te={tag:Mo(),vr:"NONE",vl:P,value:[]};_&&(te.undefinedLength=_),R.push(te),P+=nr(te.vr,c),_&&(P+=nr("NONE",c));let ge=function(ie,se){return gn(ie.tag,se.tag)};R.sort(ge),m+=P,S.push(R)}_&&(m+=nr("NONE",c)),r.value=S,r.vl=m,_&&(r.undefinedLength=_)}}else{if(rg(v=r.vr)||v==="OB"){let S=function(_){let E="";return rg(_)&&(E=_==="UI"?"\0":" "),E}(r.vr);if(rg(r.vr)){let _;me(r.vr)?(a=this.#c(a.join("\\")),_=this.#c(S)):(a=this.#a(a.join("\\")),_=this.#a(S)),ig(a.length)||(a=og(a,_))}else r.vr==="OB"&&(a=function(_){if(_==null||_.length===void 0)throw new Error("Cannot pad undefined or null OB value.");if(_.length!==0&&_[0].length!==void 0){let E=0;for(let I=0;I<_.length;++I)E+=_[I].length;ig(E)||(_[_.length-1]=og(_[_.length-1],[0]))}else ig(_.length)||(_=og(_,[0]));return _}(a))}if(m=0,r.vr==="AT")m=4*a.length;else if(r.vr==="xs")m=a.length*Uint16Array.BYTES_PER_ELEMENT;else if(function(S){let _=ee[S];return _!==void 0&&_!=="string"}(r.vr)||r.vr==="ox"){if(Ro(r.tag)&&Array.isArray(a)){m=0;for(let _=0;_<a.length;++_)m+=a[_].length}else m=a.length;let S=ee[r.vr];if(Ro(r.tag)||r.vr==="ox")if(r.undefinedLength){let _=nr("NONE",c);m+=_,m+=_*a.length,m+=_}else h!==void 0&&(h===1?m/=8:h===16&&(m*=Uint16Array.BYTES_PER_ELEMENT));else{if(S===void 0)throw new Error("Unsupported element: "+r.vr);{let _=function(E){let I;return E==="Uint8"?I=Uint8Array.BYTES_PER_ELEMENT:E==="Uint16"?I=Uint16Array.BYTES_PER_ELEMENT:E==="Int16"?I=Int16Array.BYTES_PER_ELEMENT:E==="Uint32"?I=Uint32Array.BYTES_PER_ELEMENT:E==="Int32"?I=Int32Array.BYTES_PER_ELEMENT:E==="Float32"?I=Float32Array.BYTES_PER_ELEMENT:E==="Float64"?I=Float64Array.BYTES_PER_ELEMENT:E==="Uint64"?I=BigUint64Array.BYTES_PER_ELEMENT:E==="Int64"&&(I=BigInt64Array.BYTES_PER_ELEMENT),I}(S);if(_===void 0)throw new Error("Unknown bytes per element for VR type: "+S);m*=_}}}else m=a.length;r.value=a,r.vl=m}var v;return m}}function P5(u,r){if(u.vr==="UN"){let a=u.tag.getVrFromDictionary();if(a!==void 0&&u.vr!==a){u.vr=a;let c=ee[u.vr];if(c!==void 0&&c!=="Uint8"&&c!=="string"){let h=function(m,v,S){let _;if(m.buffer===void 0)return _;let E=new zd(m.buffer,S),I=m.byteOffset,R=m.length,P=ee[v];return P==="Uint16"?_=E.readUint16Array(I,R):P==="Uint32"?_=E.readUint32Array(I,R):P==="Uint64"?_=E.readUint64Array(I,R):P==="Int16"?_=Array.from(E.readInt16Array(I,R)):P==="Int32"?_=Array.from(E.readInt32Array(I,R)):P==="Int64"?_=E.readInt64Array(I,R):P==="Float32"?_=Array.from(E.readFloat32Array(I,R)):P==="Float64"&&(_=Array.from(E.readFloat64Array(I,R))),_}(u.value,u.vr,r);h!==void 0&&(u.value=h)}p.info("Element "+u.tag.getGroup()+" "+u.tag.getElement()+" VR changed from UN to "+u.vr)}}}function $d(u){let r=Da(u),a=new $n(r.getVrFromDictionary());return a.tag=r,a}function Yd(u){let r=Object.keys(u),a={};for(let c=0,h=r.length;c<h;++c){let m=Da(r[c]);if(m===void 0)continue;let v=m.getVrFromDictionary(),S,_=!1,E=u[r[c]];if(v==="SQ"){let R=[];if(E.undefinedLength!==void 0&&(_=E.undefinedLength),E.value!==void 0&&E.value!==null)for(let P=0;P<E.value.length;++P)R.push(Yd(E.value[P]));else p.trace("Undefined or null simpleTag SQ value.");S=R}else S=Array.isArray(E)?E:[E];let I=new $n(v);I.tag=m,I.value=S,_&&(I.undefinedLength=_),a[m.getKey()]=I}return a}let Xr={CodeValue:"00080100",CodingSchemeDesignator:"00080102",CodeMeaning:"00080104",LongCodeValue:"00080119",URNCodeValue:"00080120"};class lg{meaning;value;longValue;urnValue;schemeDesignator;constructor(r){this.meaning=r}toString(){return"("+this.value+", "+this.schemeDesignator+", '"+this.meaning+"')"}}function _s(u,r){return Object.keys(u).length===Object.keys(r).length&&Object.keys(u).every(a=>Object.prototype.hasOwnProperty.call(r,a)&&u[a]===r[a])}function wa(u){let r=new lg(u[Xr.CodeMeaning].value[0]);if(u[Xr.CodeValue]!==void 0)r.value=u[Xr.CodeValue].value[0];else if(u[Xr.LongCodeValue]!==void 0)r.longValue=u[Xr.LongCodeValue].value[0];else{if(u[Xr.URNCodeValue]===void 0)throw new Error("Invalid code with no value, no long value and no urn value.");r.urnValue=u[Xr.URNCodeValue].value[0]}if(r.value!==void 0||r.longValue!==void 0){if(u[Xr.CodingSchemeDesignator]===void 0)throw new Error("No coding sheme designator when code value or long value is present");r.schemeDesignator=u[Xr.CodingSchemeDesignator].value[0]}return r}function Fo(u){let r={};return u.value!==void 0?r.CodeValue=u.value:u.longValue!==void 0?r.LongCodeValue=u.longValue:u.urnValue!==void 0&&(r.URNCodeValue=u.urnValue),u.schemeDesignator!==void 0&&(r.CodingSchemeDesignator=u.schemeDesignator),r.CodeMeaning=u.meaning,r}let F5={111030:"Image Region",112039:"Tracking Identifier",112040:"Tracking Unique Identifier",113048:"Pixel by pixel Maximum",113049:"Pixel by pixel mean",113051:"Pixel by pixel Minimum",113061:"Standard Deviation",113076:"Segmentation",121055:"Path",121207:"Height",121322:"Source image for image processing operation",121324:"Source Image",122438:"Reference Points",125007:"Measurement Group",125309:"Short label",128773:"Reference Geometry"},k5={1483009:"Angle",42798e3:"Area",103355008:"Width",103339001:"Long axis",103340004:"Short axis",131190003:"Radius",261665006:"Unknown",410668003:"Length",718499004:"Color"},L5={1:"No units",mm:"Millimeter",deg:"Degree - plane angle",cm2:"Square centimeter","cm2/ml":"Square centimeter per milliliter","/cm":"Per centimeter","g/ml":"Gram per milliliter","g/ml{SUVbw}":"Standardized Uptake Value body weight","mg/ml":"Milligram per milliliter","umol/ml":"Micromole per milliliter","Bq/ml":"Becquerels per milliliter","mg/min/ml":"Milligrams per minute per milliliter","umol/min/ml":"Micromole per minute per milliliter","ml/min/g":"Milliliter per minute per gram","ml/g":"Milliliter per gram","ml/min/ml":"Milliliter per minute per milliliter","ml/ml":"Milliliter per milliliter","%":"Percentage","[hnsf'U]":"Hounsfield unit","10*23/ml":"Electron density","{counts}":"Counts","{counts}/s":"Counts per second","{propcounts}":"Proportional to counts","{propcounts}/s":"Proportional to counts per second"};function Ci(u,r){let a,c;return r==="DCM"?a=F5[u]:r==="SCT"?a=k5[u]:r==="UCUM"&&(a=L5[u]),a!==void 0&&(c=new lg(a),c.schemeDesignator=r,c.value=u),c}function Hb(){return Ci("125007","DCM")}function Qb(){return Ci("128773","DCM")}function Wb(){return Ci("121324","DCM")}function $b(){return Ci("112039","DCM")}function Yb(){return Ci("125309","DCM")}function Xd(){return Ci("122438","DCM")}function Xb(){return Ci("718499004","SCT")}let cg={angle:{key:"1483009",scheme:"SCT"},length:{key:"410668003",scheme:"SCT"},surface:{key:"42798000",scheme:"SCT"},height:{key:"121207",scheme:"DCM"},width:{key:"103355008",scheme:"SCT"},radius:{key:"131190003",scheme:"SCT"},a:{key:"103339001",scheme:"SCT"},b:{key:"103340004",scheme:"SCT"},min:{key:"113051",scheme:"DCM"},max:{key:"113048",scheme:"DCM"},mean:{key:"113049",scheme:"DCM"},stddev:{key:"113061",scheme:"DCM"}};function N5(u){let r;for(let a in cg){let c=cg[a];if(c.scheme===u.schemeDesignator&&c.key===u.value){r=a;break}}return r}let dg={"unit.mm":"mm","unit.cm2":"cm2","unit.degree":"deg",HU:"[hnsf'U]",MGML:"mg/ml",ED:"10*23/ml",PCT:"%",CNTS:"{counts}",NONE:"1",CM2:"cm2",CM2ML:"cm2/ml",PCNT:"%",CPS:"{counts}/s",BQML:"Bq/ml",MGMINML:"mg/min/ml",UMOLMINML:"umol/min/ml",MLMING:"ml/min/g",MLG:"ml/g","1CM":"/cm",UMOLML:"umol/ml",PROPCNTS:"{propcounts}",PROPCPS:"{propcounts}/s",MLMINML:"ml/min/ml",MLML:"ml/ml",GML:"g/ml",SUV:"g/ml{SUVbw}"};function V5(u){let r;for(let a in dg){let c=dg[a];if(u.schemeDesignator==="UCUM"&&c===u.value){r=a;break}}return r}let Zb="00620005",Kb="00620009",Jb="0062000C",e_="0062000D",t_="00620003",n_="0062000F",i_="00620020";class r_{number;label;algorithmType;algorithmName;displayValue;displayRGBValue;propertyTypeCode;propertyCategoryCode;trackingUid;trackingId;constructor(r,a,c){this.number=r,this.label=a,this.algorithmType=c}}function B5(u){let r=new r_(u["00620004"].value[0],u[Zb]?u[Zb].value[0]:"n/a",u["00620008"].value[0]);if(u[Kb]!==void 0&&(r.algorithmName=u[Kb].value[0]),u[Jb]!==void 0)r.displayValue=u[Jb].value[0];else if(u[e_]!==void 0){let c=u[e_].value,h=function(m){return function(v){function S(R){let P=null;return P=R<=.0031308?12.92*R:1.055*Math.pow(R,.416666667)-.055,Math.min(1,Math.max(0,P))}let _=v.x/100,E=v.y/100,I=v.z/100;return{r:Math.round(255*S(3.2406*_-1.5372*E-.4986*I)),g:Math.round(255*S(-.9689*_+1.8758*E+.0415*I)),b:Math.round(255*S(.0557*_-.204*E+1.057*I))}}(function(v){function S(I){let R=null;return R=I>.206896552?Math.pow(I,3):.128418549*I-.017712903,R}let _=z,E=(v.l+16)/116;return{x:_.x*S(E+v.a/500),y:_.y*S(E),z:_.z*S(E-v.b/200)}}(m))}({l:.001525902*(a={l:c[0],a:c[1],b:c[2]}).l,a:.003891051*a.a-128,b:.003891051*a.b-128});r.displayRGBValue=h}var a;if(u[t_]===void 0)throw new Error("Missing Segmented Property Category Code Sequence.");if(r.propertyCategoryCode=wa(u[t_].value[0]),u[n_]===void 0)throw new Error("Missing Segmented Property Type Code Sequence.");return r.propertyTypeCode=wa(u[n_].value[0]),u[i_]!==void 0&&(r.trackingId=u[i_].value[0],r.trackingUid=u["00620021"].value[0]),r}function U5(u){let r=u.algorithmType;r===void 0&&(r="MANUAL");let a={SegmentNumber:u.number,SegmentLabel:u.label,SegmentAlgorithmType:r};if(r!=="MANUAL"&&u.algorithmName!==void 0&&(a.SegmentAlgorithmName=u.algorithmName),u.displayRGBValue){let c=Q(Y(u.displayRGBValue));a.RecommendedDisplayCIELabValue=[Math.round(c.l),Math.round(c.a),Math.round(c.b)]}else a.RecommendedDisplayGrayscaleValue=u.displayValue;return u.propertyCategoryCode&&(a.SegmentedPropertyCategoryCodeSequence={value:[Fo(u.propertyCategoryCode)]}),u.propertyTypeCode&&(a.SegmentedPropertyTypeCodeSequence={value:[Fo(u.propertyTypeCode)]}),u.trackingId&&(a.TrackingID=u.trackingId,a.TrackingUID=u.trackingUid),a}let o_="00089124",s_="00082112",a_="00081150",l_="00081155",c_="00209116",d_="00289110";class q5{dimIndex;imagePosPat;derivationImages;refSegmentNumber;imageOrientationPatient;spacing;constructor(r,a,c,h){this.dimIndex=r,this.imagePosPat=a,this.derivationImages=c,this.refSegmentNumber=h}}function G5(u){let r=[];if(u[o_]!==void 0){let S=u[o_].value;for(let _=0;_<S.length;++_){let E=[];if(S[_][s_]!==void 0){let I=S[_][s_].value;for(let R=0;R<I.length;++R){let P={};I[R][a_]!==void 0&&(P.referencedSOPClassUID=I[R][a_].value[0]),I[R][l_]!==void 0&&(P.referencedSOPInstanceUID=I[R][l_].value[0]),E.push(P)}}r.push({sourceImages:E})}}let a=u["00209111"].value[0]["00209157"].value,c=u["0062000A"].value,h=parseInt(c[0]["0062000B"].value[0],0),m=u["00209113"].value[0]["00200032"].value;for(let S=0;S<m.length;++S)m[S]=parseFloat(m[S]);let v=new q5(a,m,r,h);if(u[c_]!==void 0){let S=u[c_];if(S.value.length!==0){let _=S.value[0]["00200037"].value;_!==void 0&&(v.imageOrientationPatient=_)}}if(u[d_]!==void 0){let S=u[d_];if(S.value.length!==0){let _=Bb(S.value[0]);_!==void 0&&(v.spacing=_)}else p.warn("No shared functional group pixel measure sequence items.")}return v}function j5(u){let r={FrameContentSequence:{value:[{DimensionIndexValues:u.dimIndex}]},PlanePositionSequence:{value:[{ImagePositionPatient:u.imagePosPat}]},SegmentIdentificationSequence:{value:[{ReferencedSegmentNumber:u.refSegmentNumber}]}};if(u.derivationImages!==void 0){let a=Fo(Ci("121322","DCM")),c=Fo(Ci("113076","DCM")),h=[];for(let m of u.derivationImages){let v=[];for(let S of m.sourceImages)v.push({PurposeOfReferenceCodeSequence:{value:[a]},ReferencedSOPClassUID:S.referencedSOPClassUID,ReferencedSOPInstanceUID:S.referencedSOPInstanceUID});h.push({DerivationCodeSequence:{value:[c]},SourceImageSequence:{value:v}})}r.DerivationImageSequence={value:h}}return r}function u_(u,r){return JSON.stringify(u)===JSON.stringify(r)}function z5(u,r){let a=u[r.tag];if(r.type===1||r.type===2){if(a===void 0)throw new Error("Missing or empty "+r.name)}else if(a===void 0)return;let c,h=!1;if(c=a.value.length===1?a.value[0]:a.value,Array.isArray(c))for(let m=0;m<r.enum.length;++m){if(!Array.isArray(r.enum[m]))throw new Error("Cannot compare array and non array tag value.");if(Ye(r.enum[m],c)){h=!0;break}}else h=r.enum.includes(c);if(!h)throw new Error("Unsupported "+r.name+" value: "+c)}function H5(u,r,a){let c=u.getNumberOfComponents(),h,m;c===3?(h=function(_){return{r:u.getValueAtOffset(_),g:u.getValueAtOffset(_+1),b:u.getValueAtOffset(_+2)}},m=function(_,E){return E.displayRGBValue!==void 0&&_.r===E.displayRGBValue.r&&_.g===E.displayRGBValue.g&&_.b===E.displayRGBValue.b}):(h=function(_){return u.getValueAtOffset(_)},m=function(_,E){return _===E.displayValue});let v=u.getGeometry().getSize().getDimSize(2),S={};for(let _=0;_<v;++_){let E=h((a+_)*c);for(let I of r){let R=I.number-1;m(E,I)&&(S[R]===void 0&&(S[R]=new Uint8Array(v)),S[R][_]=1)}}return S}let Zd=[{name:"TransferSyntaxUID",tag:"00020010",type:"1",enum:[Re,be,je]},{name:"MediaStorageSOPClassUID",tag:"00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"SOPClassUID",tag:"00020002",type:"1",enum:["1.2.840.10008.5.1.4.1.1.66.4"]},{name:"Modality",tag:"00080060",type:"1",enum:["SEG"]},{name:"SegmentationType",tag:"00620001",type:"1",enum:["BINARY"]},{name:"DimensionOrganizationType",tag:"00209311",type:"3",enum:["3D"]},{name:"ImageType",tag:"00080008",type:"1",enum:[["DERIVED","PRIMARY"]]},{name:"SamplesPerPixel",tag:"00280002",type:"1",enum:[1]},{name:"PhotometricInterpretation",tag:"00280004",type:"1",enum:["MONOCHROME2"]},{name:"PixelRepresentation",tag:"00280103",type:"1",enum:[0]},{name:"BitsAllocated",tag:"00280100",type:"1",enum:[1]},{name:"BitsStored",tag:"00280101",type:"1",enum:[1]},{name:"HighBit",tag:"00280102",type:"1",enum:[0]}];function h_(){let u={};for(let r=0;r<Zd.length;++r){let a=Zd[r];u[a.name]=a.enum[0]}return u}class ug{#e;getWarning(){return this.#e}checkElements(r){}create(r,a){for(let ve=0;ve<Zd.length;++ve)z5(r,Zd[ve]);let c=ng(r),h=new Oo([c[0],c[1],1]),m=h.getTotalSize(),v=1,S=r["00280008"];if(S!==void 0&&(v=parseInt(S.value[0],10)),v!==a.length/m)throw new Error("Buffer and numberOfFrames meta are not equal."+v+" "+a.length/m);let _=function(ve){let Le=ve["00209221"];if(Le===void 0||Le.value.length!==1)throw new Error("Unsupported dimension organization sequence length");let it=Le.value[0]["00209164"].value[0],an=[],An=ve["00209222"];if(An!==void 0){let oi=An.value;if(oi.length!==2)throw new Error("Unsupported dimension index sequence length");let Mi;for(let or=0;or<oi.length;++or){let tc=oi[or]["00209164"].value[0];if(tc!==it)throw new Error("Dimension Index Sequence contains a unknown Dimension Organization");Mi=oi[or]["00209165"].value[0];let Ma={DimensionOrganizationUID:tc,DimensionIndexPointer:Mi};oi[or]["00209421"]!==void 0&&(Ma.DimensionDescriptionLabel=oi[or]["00209421"].value[0]),an.push(Ma)}if(Mi!=="(0020,0032)")throw new Error("Unsupported non image position as last index")}return{organizations:{value:[{DimensionOrganizationUID:it}]},indices:{value:an}}}(r),E=r["00620002"];if(E===void 0)throw new Error("Missing or empty segmentation sequence");let I=[],R,P,U=!1;for(let ve=0;ve<E.value.length;++ve){let Le=B5(E.value[ve]);Le.displayRGBValue!==void 0&&(U=!0),I.push(Le)}let H=r[52009229];if(H!==void 0){let ve=H.value[0];if(ve["00209116"]!==void 0){let Le=ve["00209116"];Le.value.length!==0?P=Le.value[0]["00200037"].value:p.warn("No shared functional group plane orientation sequence items.")}if(ve["00289110"]!==void 0){let Le=ve["00289110"];Le.value.length!==0?R=Bb(Le.value[0]):p.warn("No shared functional group pixel measure sequence items.")}}let J=function(ve,Le){return ve.some(function(it){return u_(Le,it)})},te=function(ve,Le){return ve.findIndex(function(it){return u_(Le,it)})},ge=r[52009230];if(ge===void 0)throw new Error("Missing or empty per frame functional sequence");if(v!==ge.value.length)throw new Error("perFrameFuncGroupSequence meta and numberOfFrames are not equal.");let ie=[];for(let ve=0;ve<ge.value.length;++ve)ie.push(G5(ge.value[ve]));let se=[];for(let ve=0;ve<ie.length;++ve){if(J(se,ie[ve].imagePosPat)||se.push(ie[ve].imagePosPat),ie[ve].imageOrientationPatient!==void 0){if(P===void 0)P=ie[ve].imageOrientationPatient;else if(!Ye(P,ie[ve].imageOrientationPatient))throw new Error("Unsupported multi orientation dicom seg.")}if(ie[ve].spacing!==void 0){if(R===void 0)R=ie[ve].spacing;else if(!R.equals(ie[ve].spacing))throw new Error("Unsupported multi resolution dicom seg.")}}if(R===void 0)throw new Error("No spacing found for DICOM SEG");if(R.length()!==3)throw new Error("Incomplete spacing found for DICOM SEG");if(P===void 0)throw new Error("No imageOrientationPatient found for DICOM SEG");if(P.length!==6)throw new Error("Incomplete imageOrientationPatient found for DICOM SEG");let ae=new O(parseFloat(P[0]),parseFloat(P[1]),parseFloat(P[2])),re=new O(parseFloat(P[3]),parseFloat(P[4]),parseFloat(P[5])),Ce=ae.crossProduct(re),Ie=new K([ae.getX(),re.getX(),Ce.getX(),ae.getY(),re.getY(),Ce.getY(),ae.getZ(),re.getZ(),Ce.getZ()]);se.sort(function(ve){let Le=ve.getInverse();return function(it,an){let An=Le.multiplyArray3D(it),oi=Le.multiplyArray3D(an);return An[2]-oi[2]}}(Ie));let xe=function(ve){return new $(ve[0],ve[1],ve[2])},ke=[];for(let ve=0;ve<se.length;++ve)ke.push(xe(se[ve]));let et=new Ca(ke[0],h,R,Ie),At=function(ve){let Le=ve>j;return Le&&(Le=ve>10*j,Le?(Le=ve>100*j,Le||p.warn("Using larger+ real world epsilon in SEG pos pat adding")):p.warn("Using larger real world epsilon in SEG pos pat adding")),Le},qt=[];qt.push(se[0]);let ct=0;for(let ve=1;ve<se.length;++ve){++ct;let Le=new d([0,0,ct]),it=et.indexToWorld(Le).get3D(),an=ke[ve],An=an.getDistance(it),oi=An;for(;At(An);)if(p.debug("Adding intermediate pos pats for DICOM seg at "+it.toString()),qt.push([it.getX(),it.getY(),it.getZ()]),++ct,Le=new d([0,0,ct]),it=et.indexToWorld(Le).get3D(),An=an.getDistance(it),An>oi)throw new Error("Test distance is increasing when adding intermediate pos pats");qt.push(se[ve])}let en=qt.length,Pe=new Ca(ke[0],h,R,Ie),tn=["0"];for(let ve=1;ve<en;++ve)Pe.appendOrigin(xe(qt[ve]),ve),tn.push(ve.toString());let Vt=function(ve){return function(Le){return Le.number===ve}},Sn=U?3:1,Ze=new a.constructor(Sn*m*en);Ze.fill(0);let He=null,xn=null;for(let ve=0;ve<ie.length;++ve){ct=te(qt,ie[ve].imagePosPat),xn=m*ve,He=m*ct;let Le=I.find(Vt(ie[ve].refSegmentNumber));for(let it=0;it<m;++it)if(a[xn+it]!==0){let an=Sn*(He+it);U?(Ze[an]=Le.displayRGBValue.r,Ze[an+1]=Le.displayRGBValue.g,Ze[an+2]=Le.displayRGBValue.b):Ze[an]=Le.displayValue}}let Yn=new Ds(Pe,Ze,tn);U&&Yn.setPhotometricInterpretation("RGB");let Qt=h_(),Cn=function(ve){let Le,it=r[ve];return it!==void 0&&(Le=it.value[0]),Le};Qt.StudyDate=Cn("00080020"),Qt.StudyTime=Cn("00080030"),Qt.StudyInstanceUID=Cn("0020000D"),Qt.StudyID=Cn("00200010"),Qt.SeriesDate=Cn("00080021"),Qt.SeriesTime=Cn("00080031"),Qt.SeriesInstanceUID=Cn("0020000E"),Qt.SeriesNumber=Cn("00200011"),Qt.ReferringPhysicianName=Cn("00080090"),Qt.PatientName=Cn("00100010"),Qt.PatientID=Cn("00100020"),Qt.PatientBirthDate=Cn("00100030"),Qt.PatientSex=Cn("00100040"),Qt.Manufacturer=Cn("00080070"),Qt.ManufacturerModelName=Cn("00081090"),Qt.DeviceSerialNumber=Cn("00181000"),Qt.SoftwareVersions=Cn("00181020"),Qt.DimensionOrganizationSequence=_.organizations,Qt.DimensionIndexSequence=_.indices,Qt.custom={segments:I,frameInfos:ie,SOPInstanceUID:r["00080018"].value[0]},Qt.numberOfFiles=en;let ec=r["00200052"];ec&&(Qt.FrameOfReferenceUID=ec.value[0]);let vt=r["00282110"];return vt&&(Qt.LossyImageCompression=vt.value[0]),Yn.setMeta(Qt),Yn}toDicom(r,a,c,h){let m=r.getMeta();a===void 0&&(a=m.segments);let v=r.getGeometry(),S=v.getSize();m.Rows=S.get(1),m.Columns=S.get(0);let _=new Date;m.ContentDate=Rb(Ab(_)),m.ContentTime=Ob(Mb(_)),c!==void 0&&(m.StudyInstanceUID=c.getMeta().StudyInstanceUID);let E=[];for(let re of a)E.push(U5(re));var I,R;m.SegmentSequence={value:E},m.SharedFunctionalGroupsSequence={value:[{PlaneOrientationSequence:{value:[(R=v.getOrientation(),{ImageOrientationPatient:[R.get(0,0),R.get(1,0),R.get(2,0),R.get(0,1),R.get(1,1),R.get(2,1)]})]},PixelMeasuresSequence:{value:[(I=v.getSpacing(),{SpacingBetweenSlices:I.get(2),PixelSpacing:[I.get(1),I.get(0)]})]}}]};let P=function(re,Ce){let Ie=re.getGeometry().getSize(),xe=Ie.getDimSize(2),ke={};for(let et=0;et<Ie.get(2);++et){let At=H5(re,Ce,et*xe),qt=Object.keys(At);for(let ct of qt)ke[ct]===void 0&&(ke[ct]={}),ke[ct][et]=At[ct]}return ke}(r,a),U=[],H=[],J=[];for(let re of a){let Ce=re.number,Ie=Ce-1;if(P[Ie]===void 0)continue;let xe=Object.keys(P[Ie]);for(let ke=xe.length-1;ke>=0;--ke){let et=Number.parseInt(xe[ke],10);H.push(P[Ie][et]);let At=r.getGeometry().getOrigins()[et],qt=[At.getX(),At.getY(),At.getZ()],ct={dimIndex:[Ce,xe.length-ke],imagePosPat:qt,refSegmentNumber:Ce};if(c!==void 0){let en=c.getGeometry().worldToIndex(new ce([At.getX(),At.getY(),At.getZ()]));ct.derivationImages=[{sourceImages:[{referencedSOPInstanceUID:c.getImageUid(en),referencedSOPClassUID:c.getMeta().SOPClassUID}]}],J.push({ReferencedSOPInstanceUID:c.getImageUid(en),ReferencedSOPClassUID:c.getMeta().SOPClassUID})}U.push(ct)}}m.NumberOfFrames=H.length.toString();let te=[];for(let re of U)te.push(j5(re));if(m.PerFrameFunctionalGroupsSequence={value:te},c!==void 0){let re=[];re.push({ReferencedInstanceSequence:{value:J},SeriesInstanceUID:c.getMeta().SeriesInstanceUID}),m.ReferencedSeriesSequence={value:re}}h!==void 0&&function(re,Ce){let Ie=Object.keys(Ce);for(let xe of Ie)re[xe]!==void 0&&p.trace("Overwritting tag: "+xe),re[xe]=Ce[xe]}(m,h);let ge=Yd(m),ie=S.getDimSize(2),se=H.length*ie/8,ae=new $n("OB");return ae.tag=new Bn("7FE0","0010"),ae.vl=se,ae.value=H,ge["7FE00010"]=ae,ge}}function Q5(u){return new qb().create(u,u["7FE00010"].value[0],1)}function W5(u){return new ug().create(u,u["7FE00010"].value[0])}class Ds{#e;#t;#n;#i=new Hd(1,0);#r=null;#o=!0;#s=!0;#a="MONOCHROME2";#c=0;#l;#u={};#d=null;#f=null;#h=null;#m=new ii;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c,this.#l=this.#t.length/this.#e.getSize().getTotalSize()}getImageUid(r){let a=this.#n[0];return this.#n.length!==1&&r!==void 0&&(a=this.#n[this.getSecondaryOffset(r)]),a}getOriginForImageUid(r){let a,c=this.#n.indexOf(r);return c!==-1&&(a=this.getGeometry().getOrigins()[c]),a}includesImageUid(r){return this.#n.includes(r)}containsImageUids(r){return function(a,c){if(a===null||c===null||a===void 0||c===void 0||a.length===0||c.length===0||c.length>a.length)return!1;for(let h of c)if(!a.includes(h))return!1;return!0}(this.#n,r)}getGeometry(){return this.#e}getBuffer(){return this.#t}canQuantify(){return this.getNumberOfComponents()===1}canWindowLevel(){return this.isMonochrome()}isMonochrome(){return this.getPhotometricInterpretation().match(/MONOCHROME/)!==null}canScroll(r){let a=this.getGeometry().getSize(),c=1;return this.#u.numberOfFiles!==void 0&&(c=this.#u.numberOfFiles),a.canScroll(r)||c!==1}#p(){return this.#e.getSize().getTotalSize(2)}getSecondaryOffset(r){return this.#e.getSize().indexToOffset(r,2)}getRescaleSlopeAndIntercept(r){let a=this.#i;if(!this.isConstantRSI()){if(r===void 0)throw new Error("Cannot get non constant RSI with empty slice index.");let c=this.getSecondaryOffset(r);this.#r[c]!==void 0?a=this.#r[c]:p.warn("undefined non constant rsi at "+c)}return a}#y(r){return this.#r[r]}setRescaleSlopeAndIntercept(r,a){if(this.#o=this.#o&&r.isID(),this.#s){if(!this.#i.equals(r))if(a===void 0)this.#i=r;else{this.#s=!1,this.#r=[];for(let c=0,h=this.#p();c<h;++c)this.#r.push(this.#i);this.#i=null,this.#r.splice(a,0,r)}}else{if(a===void 0)throw new Error("Cannot store non constant RSI with empty slice index.");this.#r.splice(a,0,r)}}isIdentityRSI(){return this.#o}isConstantRSI(){return this.#s}getPhotometricInterpretation(){return this.#a}setPhotometricInterpretation(r){this.#a=r}getPlanarConfiguration(){return this.#c}setPlanarConfiguration(r){this.#c=r}getNumberOfComponents(){return this.#l}getMeta(){return this.#u}setMeta(r){this.#u=r}getValueAtOffset(r){return this.#t[r]}getOffsets(r){let a;if(typeof r=="number"){if(this.#l!==1)throw new Error("Number of components is not 1 for getting single value.");a=[r]}else if(r.r!==void 0&&r.g!==void 0&&r.b!==void 0){if(this.#l!==3)throw new Error("Number of components is not 3 for getting RGB value.");a=[r.r,r.g,r.b]}let c=[],h;for(let m=0;m<this.#t.length;m+=this.#l){h=!0;for(let v=0;v<this.#l;++v)if(this.#t[m+v]!==a[v]){h=!1;break}h&&c.push(m)}return c}hasValues(r){if(r===void 0||r.length===0)return[];let a=[];for(let E=0;E<r.length;++E)this.#l===1?a.push([r[E]]):this.#l===3&&a.push([r[E].r,r[E].g,r[E].b]);let c;this.#l===1?c=function(E,I){return E[0]===I[0]}:this.#l===3&&(c=function(E,I){return E[0]===I[0]&&E[1]===I[1]&&E[2]===I[2]});let h=function(E){return function(I){return c(I,E)}},m=new Array(r.length);m.fill(!1);let v=a.slice(),S,_;for(let E=0,I=this.#t.length;E<I;E+=this.#l){_=[];for(let R=0;R<v.length;++R){S=!0;for(let P=0;P<this.#l;++P)if(this.#t[E+P]!==v[R][P]){S=!1;break}S&&(m[a.findIndex(h(v[R]))]=!0,_.push(R))}for(let R=0;R<_.length;++R)v.splice(_[R],1);if(v.length===0)break}return m}clone(){let r=this.#t.slice(0),a=new Ds(this.getGeometry(),r,this.#n);if(this.isConstantRSI())a.setRescaleSlopeAndIntercept(this.getRescaleSlopeAndIntercept());else for(let c=0;c<this.#p();++c)a.setRescaleSlopeAndIntercept(this.#y(c),c);return a.setPhotometricInterpretation(this.getPhotometricInterpretation()),a.setPlanarConfiguration(this.getPlanarConfiguration()),a.setMeta(this.getMeta()),a}#v(r){let a=this.#t;if(this.#t=_b(8*this.#t.BYTES_PER_ELEMENT,this.#u.IsSigned?1:0,r),this.#t===null)throw new Error("Cannot reallocate data for image.");this.#t.set(a),a=null}appendSlice(r){if(r===null)throw new Error("Cannot append null slice");let a=r.getGeometry().getSize(),c=this.#e.getSize();if(a.get(2)!==1)throw new Error("Cannot append more than one slice");if(c.get(0)!==a.get(0))throw new Error("Cannot append a slice with different number of columns");if(c.get(1)!==a.get(1))throw new Error("Cannot append a slice with different number of rows");if(!this.#e.getOrientation().equals(r.getGeometry().getOrientation(),1e-4))throw new Error("Cannot append a slice with different orientation");if(this.#a!==r.getPhotometricInterpretation())throw new Error("Cannot append a slice with different photometric interpretation");for(let ie in this.#u)if(ie!=="windowPresets"&&ie!=="numberOfFiles"&&ie!=="custom"&&this.#u[ie]!==r.getMeta()[ie])throw new Error("Cannot append a slice with different "+ie+": "+this.#u[ie]+" != "+r.getMeta()[ie]);let h=r.getDataRange(),m=this.getDataRange();this.#d={min:Math.min(h.min,m.min),max:Math.max(h.max,m.max)};let v=r.getRescaledDataRange(),S=this.getRescaledDataRange();this.#f={min:Math.min(v.min,S.min),max:Math.max(v.max,S.max)};let _=r.getGeometry().getInitialTime(),E=!1;_===void 0||this.#e.hasSlicesAtTime(_)||(this.appendFrame(_,r.getGeometry().getOrigin()),c=this.#e.getSize(),E=!0);let I=function(ie,se){let ae=se.getInitialTime(),re=[];return re.push(0),re.push(0),re.push(ie.getSliceIndex(se.getOrigin(),ae)),ae!==void 0&&re.push(ae),new d(re)}(this.#e,r.getGeometry()),R=this.#l*c.getDimSize(2);if(this.#u.numberOfFiles===void 0)throw new Error("Missing number of files for buffer manipulation.");let P=R*this.#u.numberOfFiles;this.#t.length!==P&&this.#v(P);let U=I.get(2),H=U;_!==void 0&&(H+=this.#e.getCurrentNumberOfSlicesBeforeTime(_));let J=H*R,te=this.#e.getCurrentTotalNumberOfSlices()*R;J<te&&this.#t.set(this.#t.subarray(J,te),J+R),this.#t.set(r.getBuffer(),J),E||this.#e.appendOrigin(r.getGeometry().getOrigin(),U,_),this.setRescaleSlopeAndIntercept(r.getRescaleSlopeAndIntercept(),H);let ge=this.#n.length;if(this.#n.splice(H,0,r.getImageUid()),this.#u.windowPresets!==void 0){let ie=this.#u.windowPresets,se=r.getMeta().windowPresets,ae=Object.keys(se),re=null;for(let Ce=0;Ce<ae.length;++Ce){re=ae[Ce];let Ie=se[re],xe=ie[re];if(xe!==void 0){if((xe.perslice===void 0||xe.perslice===!1)&&!xe.wl[0].equals(Ie.wl[0])){xe.perslice=!0;for(let ke=0;ke<ge-1;++ke)xe.wl.push(xe.wl[0])}xe.perslice!==void 0&&xe.perslice===!0&&ie[re].wl.splice(H,0,Ie.wl[0])}else ie[re]=se[re]}}this.#S({type:"imagegeometrychange"})}appendFrameBuffer(r,a){let c=this.#e.getSize(),h=this.#l*c.getDimSize(2);if(this.#u.numberOfFiles===void 0)throw new Error("Missing number of files for frame buffer manipulation.");let m=h*this.#u.numberOfFiles;this.#t.length!==m&&this.#v(m),a>=this.#u.numberOfFiles?p.warn("Ignoring frame at index "+a+" (size: "+this.#u.numberOfFiles+")"):(this.#t.set(r,h*a),this.appendFrame(a,new $(0,0,0)))}appendFrame(r,a){this.#e.appendFrame(a,r),this.#S({type:"appendframe"})}getDataRange(){return this.#d||(this.#d=this.calculateDataRange()),this.#d}getRescaledDataRange(){return this.#f||(this.#f=this.calculateRescaledDataRange()),this.#f}getHistogram(){if(!this.#h){let r=this.calculateHistogram();this.#d=r.dataRange,this.#f=r.rescaledDataRange,this.#h=r.histogram}return this.#h}addEventListener(r,a){this.#m.add(r,a)}removeEventListener(r,a){this.#m.remove(r,a)}#S=r=>{this.#m.fireEvent(r)};setAtOffsets(r,a){let c,h;if(typeof a=="number"){if(this.#l!==1)throw new Error("Number of components is not 1 for setting single value.");c=[a]}else if(a.r!==void 0&&a.g!==void 0&&a.b!==void 0){if(this.#l!==3)throw new Error("Number of components is not 3 for setting RGB value.");c=[a.r,a.g,a.b]}for(let m=0,v=r.length;m<v;++m){h=r[m];for(let S=0;S<this.#l;++S)this.#t[h+S]=c[S]}this.#S({type:"imagecontentchange"})}setAtOffsetsAndGetOriginals(r,a){let c=[];for(let h=0;h<r.length;++h){let m=r[h],v=3*m[0],S={r:this.#t[v],g:this.#t[v+1],b:this.#t[v+2]},_=[];_.push({index:0,colour:S});for(let E=0;E<m.length;++E){v=3*m[E];let I={r:this.#t[v],g:this.#t[v+1],b:this.#t[v+2]};S.r===I.r&&S.g===I.g&&S.b===I.b||(_.push({index:E,colour:I}),S=I),this.#t[v]=a.r,this.#t[v+1]=a.g,this.#t[v+2]=a.b}c.push(_)}return this.#S({type:"imagecontentchange"}),c}setAtOffsetsWithIterator(r,a){for(let c=0;c<r.length;++c){let h=r[c],m;Array.isArray(a)?m=Tb(a[c],h.length):a.r!==void 0&&a.g!==void 0&&a.b!==void 0&&(m=Tb([{index:0,colour:a}],h.length));let v=m.next();for(;!v.done;){let S=3*h[v.index];this.#t[S]=v.value.r,this.#t[S+1]=v.value.g,this.#t[S+2]=v.value.b,v=m.next()}}this.#S({type:"imagecontentchange"})}getValue(r,a,c,h){let m=new d([r,a,c,h||0]);return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(m))}getValueAtIndex(r){return this.getValueAtOffset(this.getGeometry().getSize().indexToOffset(r))}getRescaledValue(r,a,c,h){h===void 0&&(h=0);let m=this.getValue(r,a,c,h);if(!this.isIdentityRSI())if(this.isConstantRSI())m=this.getRescaleSlopeAndIntercept().apply(m);else{let v=new d([r,a,c,h]);m=this.getRescaleSlopeAndIntercept(v).apply(m)}return m}getRescaledValueAtIndex(r){return this.getRescaledValueAtOffset(this.getGeometry().getSize().indexToOffset(r))}getRescaledValueAtOffset(r){let a=this.getValueAtOffset(r);if(!this.isIdentityRSI())if(this.isConstantRSI())a=this.getRescaleSlopeAndIntercept().apply(a);else{let c=this.getGeometry().getSize().offsetToIndex(r);a=this.getRescaleSlopeAndIntercept(c).apply(a)}return a}calculateDataRange(){let r=this.getValueAtOffset(0),a=r,c=0,h=this.getGeometry().getSize(),m=h.getTotalSize();h.length()>=3&&(m=h.getDimSize(3));for(let v=0;v<m;++v)c=this.getValueAtOffset(v),c>a&&(a=c),c<r&&(r=c);return{min:r,max:a}}calculateRescaledDataRange(){if(this.isIdentityRSI())return this.getDataRange();if(this.isConstantRSI()){let r=this.getDataRange(),a=this.getRescaleSlopeAndIntercept().apply(r.min),c=this.getRescaleSlopeAndIntercept().apply(r.max);return{min:a<c?a:c,max:a>c?a:c}}{let r=this.getRescaledValueAtOffset(0),a=r,c=0,h=this.getGeometry().getSize(),m=h.getTotalSize();h.length()===3&&(m=h.getDimSize(3));for(let v=0;v<m;++v)c=this.getRescaledValueAtOffset(v),c>a&&(a=c),c<r&&(r=c);return{min:r,max:a}}}calculateHistogram(){let r=this.getGeometry().getSize(),a=[],c=this.getValueAtOffset(0),h=c,m=0,v=this.getRescaledValueAtOffset(0),S=v,_=0;for(let P=0,U=r.getTotalSize();P<U;++P)m=this.getValueAtOffset(P),m>h&&(h=m),m<c&&(c=m),_=this.getRescaledValueAtOffset(P),_>S&&(S=_),_<v&&(v=_),a[_]=(a[_]||0)+1;let E={min:c,max:h},I={min:v,max:S},R=[];for(let P=v;P<=S;++P)R.push([P,a[P]||0]);return{dataRange:E,rescaledDataRange:I,histogram:R}}convolute2D(r){if(r.length!==9)throw new Error("The convolution matrix does not have a length of 9; it has "+r.length);let a=this.clone(),c=a.getBuffer(),h=this.getGeometry().getSize(),m=h.getDimSize(2)*this.getNumberOfComponents();for(let v=0;v<h.get(2);++v)this.convoluteBuffer(r,c,v*m);return a}convoluteBuffer(r,a,c){let h=this.getGeometry().getSize(),m=h.get(0),v=h.get(1),S=this.getNumberOfComponents(),_=1,E=1;S===3&&(this.getPlanarConfiguration()===0?_=3:E=h.getDimSize(2));let I=[];I[0]=(-m-1)*_,I[1]=-m*_,I[2]=(1-m)*_,I[3]=-_,I[4]=0,I[5]=1*_,I[6]=(m-1)*_,I[7]=m*_,I[8]=(m+1)*_;let R=[];R[0]=I[4],R[1]=I[4],R[2]=I[5],R[3]=I[4],R[4]=I[4],R[5]=I[5],R[6]=I[7],R[7]=I[7],R[8]=I[8];let P=[];P[0]=I[1],P[1]=I[1],P[2]=I[2],P[3]=I[4],P[4]=I[4],P[5]=I[5],P[6]=I[7],P[7]=I[7],P[8]=I[8];let U=[];U[0]=I[1],U[1]=I[1],U[2]=I[2],U[3]=I[4],U[4]=I[4],U[5]=I[5],U[6]=I[4],U[7]=I[4],U[8]=I[5];let H=[];H[0]=I[3],H[1]=I[4],H[2]=I[5],H[3]=I[3],H[4]=I[4],H[5]=I[5],H[6]=I[6],H[7]=I[7],H[8]=I[8];let J=[];J[0]=I[0],J[1]=I[1],J[2]=I[2],J[3]=I[3],J[4]=I[4],J[5]=I[5],J[6]=I[3],J[7]=I[4],J[8]=I[5];let te=[];te[0]=I[3],te[1]=I[4],te[2]=I[4],te[3]=I[3],te[4]=I[4],te[5]=I[4],te[6]=I[6],te[7]=I[7],te[8]=I[7];let ge=[];ge[0]=I[0],ge[1]=I[1],ge[2]=I[1],ge[3]=I[3],ge[4]=I[4],ge[5]=I[4],ge[6]=I[6],ge[7]=I[7],ge[8]=I[7];let ie=[];ie[0]=I[0],ie[1]=I[1],ie[2]=I[1],ie[3]=I[3],ie[4]=I[4],ie[5]=I[4],ie[6]=I[3],ie[7]=I[4],ie[8]=I[4];let se=c,ae=0,re=[];for(let Ce=0;Ce<S;++Ce){se+=Ce*E;for(let Ie=0;Ie<v;++Ie)for(let xe=0;xe<m;++xe){re=I,xe===0&&Ie===0?re=R:xe===0&&Ie===v-1?re=U:xe===m-1&&Ie===0?re=te:xe===m-1&&Ie===v-1?re=ie:xe===0&&Ie!==v-1&&Ie!==0?re=P:xe===m-1&&Ie!==v-1&&Ie!==0?re=ge:xe!==0&&xe!==m-1&&Ie===0?re=H:xe!==0&&xe!==m-1&&Ie===v-1&&(re=J),ae=0;for(let ke=0;ke<9;++ke)ae+=this.getValueAtOffset(se+re[ke])*r[ke];a[se]=ae,se+=_}}}transform(r){let a=this.clone(),c=a.getBuffer();for(let h=0,m=c.length;h<m;++h)c[h]=r(a.getValueAtOffset(h));return a}compose(r,a){let c=this.clone(),h=c.getBuffer();for(let m=0,v=h.length;m<v;++m)h[m]=Math.floor(a(this.getValueAtOffset(m),r.getValueAtOffset(m)));return c}}class f_{create(r,a){let c=new m_(a);a.getPhotometricInterpretation()==="MONOCHROME1"?c.setColourMap("invPlain"):a.getPhotometricInterpretation()==="PALETTE COLOR"&&(F.palette!==void 0?c.setColourMap("palette"):p.warn("Cannot find Palette lut"));let h={};if(a.getMeta().windowPresets!==void 0&&(h=a.getMeta().windowPresets),h.minmax={name:"minmax"},y!==void 0){let m=a.getMeta().Modality;for(let v in y[m]){let S=y[m][v];h[v]={wl:[new g(S.center,S.width)],name:v}}}return c.setWindowPresets(h),c.init(),c}}let Ia=["wlchange","wlpresetadd","colourmapchange","positionchange","opacitychange","alphafuncchange"];function $5(u,r){return new f_().create(u,r)}class m_{#e;#t;#n;#i={minmax:{name:"minmax"}};#r=null;#o;#s="plain";#a=null;#c;#l=new ii;constructor(r){this.#e=r,this.#e.addEventListener("appendframe",()=>{let a=this.getCurrentIndex();if(a.length()===3){let c=a.getValues();c.push(0),this.setCurrentIndex(new d(c))}})}getImage(){return this.#e}setImage(r){this.#e=r}getOrientation(){return this.#c}setOrientation(r){this.#c=r}init(){this.setInitialIndex()}setInitialIndex(){let r=this.#e.getGeometry().getSize(),a=new Array(r.length());a.fill(0),a[0]=Math.floor(r.get(0)/2),a[1]=Math.floor(r.get(1)/2),a[2]=Math.floor(r.get(2)/2),this.setCurrentIndex(new d(a),!0)}getPlaybackMilliseconds(r){return r||(r=10),Math.round(1e3/r)}#u=function(r,a){return 255};getAlphaFunction(){return this.#u}setAlphaFunction(r){this.#u=r,this.#h({type:"alphafuncchange"})}#d(){if(this.#r&&this.#i[this.#r]!==void 0&&this.#i[this.#r].perslice!==void 0&&this.#i[this.#r].perslice===!0){this.getCurrentIndex()||this.setInitialIndex();let c=this.getCurrentIndex(),h=this.#e.getSecondaryOffset(c),m=this.#i[this.#r].wl[h];this.setWindowLevel(m,this.#r,!0)}if(this.#o===void 0&&this.setWindowLevelPresetById(0,!0),this.#n===void 0||this.#e.isConstantRSI()!==this.#n){let c,h;this.#n=this.#e.isConstantRSI(),this.#n?(c=this.#e.getRescaleSlopeAndIntercept(),h=!0):(c=new Hd(1,0),h=!1);let m=new f(c,this.#e.getMeta().BitsStored);this.#t=new b(m,this.#e.getMeta().IsSigned,h)}let r=this.#t.getVoiLut(),a;if(r!==void 0&&(a=r.getWindowLevel()),r===void 0||!this.#o.equals(a)){let c=new D(this.#o);this.#t.setVoiLut(c)}return this.#t}getWindowPresets(){return this.#i}getWindowPresetsNames(){return Object.keys(this.#i)}setWindowPresets(r){this.#i=r}addWindowPresets(r){let a=Object.keys(r),c=null;for(let h=0;h<a.length;++h)if(c=a[h],this.#i[c]!==void 0){if(this.#i[c].perslice!==void 0&&this.#i[c].perslice===!0)throw new Error("Cannot add perslice preset");this.#i[c]=r[c]}else this.#i[c]=r[c],this.#h({type:"wlpresetadd",name:c})}getCurrentWindowPresetName(){return this.#r}getColourMap(){return this.#s}#f(){return F[this.#s]}setColourMap(r){if(!F[r])throw new Error("Unknown colour map: '"+r+"'");this.#s=r,this.#h({type:"colourmapchange",value:[r]})}getCurrentPosition(){return this.#a}getCurrentIndex(){let r=this.getCurrentPosition();return r?this.getImage().getGeometry().worldToIndex(r):null}getCurrentImageUid(){return this.#e.getImageUid(this.getCurrentIndex())}getOriginForImageUid(r){return this.#e.getOriginForImageUid(r)}includesImageUid(r){return this.#e.includesImageUid(r)}isPositionInBounds(r){r===void 0&&(r=this.#a);let a=this.#e.getGeometry(),c=a.worldToIndex(r),h=[this.getScrollIndex()];return c.length()===4&&h.push(3),a.isIndexInBounds(c,h)}getOrigin(r){let a=this.#e.getGeometry(),c=0;return r!==void 0&&(c=a.worldToIndex(r).get(2)),a.getOrigins()[c]}setCurrentPosition(r,a){let c=this.#e.getGeometry(),h=c.worldToIndex(r),m=[this.getScrollIndex()];return h.length()===4&&m.push(3),c.isIndexInBounds(h,m)?this.setCurrentIndex(h,a):(a||(this.#a=r,this.#h({type:"positionchange",value:[h.getValues(),r.getValues()],valid:!1})),!1)}setCurrentIndex(r,a){a===void 0&&(a=!1);let c=this.#e.getGeometry(),h=c.indexToWorld(r),m=[this.getScrollIndex()];if(r.length()===4&&m.push(3),!c.isIndexInBounds(r,m))return a||(this.#a=h,this.#h({type:"positionchange",value:[r.getValues(),h.getValues()],valid:!1})),!1;let v=null,S=null;if(this.getCurrentPosition()&&(S=this.getCurrentIndex()),S)if(S.canCompare(r))v=S.compare(r);else{v=[];let _=Math.min(S.length(),r.length());for(let I=0;I<_;++I)S.get(I)!==r.get(I)&&v.push(I);let E=Math.max(S.length(),r.length());for(let I=_;I<E;++I)v.push(I)}else{v=[];for(let _=0;_<r.length();++_)v.push(_)}if(this.#a=h,!a){let _={type:"positionchange",value:[r.getValues(),h.getValues()],diffDims:v,data:{imageUid:this.#e.getImageUid(r)}};if(this.#e.canQuantify()){let E=this.#e.getRescaledValueAtIndex(r);_.value.push(E)}this.#h(_)}return!0}setWindowLevel(r,a,c){if(a===void 0&&(a="manual"),a!=="manual"&&this.#i[a]===void 0)throw new Error("Unknown window level preset: '"+a+"'");c===void 0&&(c=!1);let h=!r.equals(this.#o),m=this.#r!==a;(h||m)&&(this.#o=r,this.#r=a,a==="manual"&&(this.#i[a]!==void 0?this.#i[a].wl[0]=r:this.addWindowPresets({manual:{wl:[r],name:"manual"}})),this.#h({type:"wlchange",value:[r.center,r.width,a],wc:r.center,ww:r.width,skipGenerate:c}))}getWindowLevel(){return this.#d().getVoiLut().getWindowLevel()}setWindowLevelPreset(r,a){let c=this.getWindowPresets()[r];if(c===void 0)throw new Error("Unknown window level preset: '"+r+"'");r==="minmax"&&c.wl===void 0&&(c.wl=[this.getWindowLevelMinMax()]);let h=c.wl[0];if(c.perslice!==void 0&&c.perslice===!0){let m=this.#e.getSecondaryOffset(this.getCurrentIndex());h=c.wl[m]}this.setWindowLevel(h,r,a)}setWindowLevelPresetById(r,a){let c=Object.keys(this.getWindowPresets());this.setWindowLevelPreset(c[r],a)}addEventListener(r,a){this.#l.add(r,a)}removeEventListener(r,a){this.#l.remove(r,a)}#h=r=>{this.#l.fireEvent(r)};getWindowLevelMinMax(){let r=this.getImage().getRescaledDataRange(),a=r.min,c=r.max-a;return c<1&&(p.warn("Zero or negative window width, defaulting to one."),c=1),new g(a+c/2,c)}setWindowLevelMinMax(){let r=this.getWindowLevelMinMax();this.setWindowLevel(r,"minmax")}generateImageData(r,a){a===void 0&&(this.getCurrentIndex()||this.setInitialIndex(),a=this.getCurrentIndex());let c=this.getImage(),h=!c.isConstantRSI(),m=Eb(c,a,h,this.getOrientation()),v=c.getPhotometricInterpretation();switch(v){case"MONOCHROME1":case"MONOCHROME2":(function(S,_,E,I,R){let P=0,U=0,H=_.next();for(;!H.done;)U=I.getValue(H.value),S.data[P]=R.red[U],S.data[P+1]=R.green[U],S.data[P+2]=R.blue[U],S.data[P+3]=E(H.value,H.index),P+=4,H=_.next()})(r,m,this.getAlphaFunction(),this.#d(),this.#f());break;case"PALETTE COLOR":(function(S,_,E,I,R){let P=function(te){return te>>8};R&&p.info("Scaling 16bits data to 8bits.");let U=0,H=0,J=_.next();for(;!J.done;)H=J.value,R?(S.data[U]=P(I.red[H]),S.data[U+1]=P(I.green[H]),S.data[U+2]=P(I.blue[H])):(S.data[U]=I.red[H],S.data[U+1]=I.green[H],S.data[U+2]=I.blue[H]),S.data[U+3]=E(H,J.index),U+=4,J=_.next()})(r,m,this.getAlphaFunction(),this.#f(),c.getMeta().BitsStored===16);break;case"RGB":(function(S,_,E){let I=0,R=_.next();for(;!R.done;)S.data[I]=R.value[0],S.data[I+1]=R.value[1],S.data[I+2]=R.value[2],S.data[I+3]=E(R.value,R.index),I+=4,R=_.next()})(r,m,this.getAlphaFunction());break;case"YBR_FULL":(function(S,_,E){let I=0,R=null,P=_.next();for(;!P.done;)U=P.value[0],H=P.value[1],R={r:U+1.402*((J=P.value[2])-128),g:U-.34414*(H-128)-.71414*(J-128),b:U+1.772*(H-128)},S.data[I]=R.r,S.data[I+1]=R.g,S.data[I+2]=R.b,S.data[I+3]=E(P.value,P.index),I+=4,P=_.next();var U,H,J})(r,m,this.getAlphaFunction());break;default:throw new Error("Unsupported photometric interpretation: "+v)}}getScrollIndex(){let r=null,a=this.getOrientation();return r=a!==void 0?a.getThirdColMajorDirection():2,r}isAquisitionOrientation(){return oe(this.#c)}}class hg{#e;#t;#n;#i;#r;constructor(r,a){this.#e=r,this.#t=r.getRealSpacing(),this.#n=r.getOrientation(),this.#i=a,this.#r=function(c,h){let m=c.asOneAndZeros().multiply(h);return c.asOneAndZeros().getAbs().equals(Pb().getAbs())&&(m=m.getAbs()),m}(this.#n,a)}getViewOrientation(){return this.#i}getTargetOrientation(){return this.#r}getOffset3DFromPlaneOffset(r){let a=new O(r.x,r.y,0),c=this.getTargetDeOrientedVector3D(a);return new O(c.getX()*this.#t.get(0),c.getY()*this.#t.get(1),c.getZ()*this.#t.get(2))}getPlaneOffsetFromOffset3D(r){let a=new O(r.x/this.#t.get(0),r.y/this.#t.get(1),r.z/this.#t.get(2)),c=this.getTargetOrientedVector3D(a);return{x:c.getX(),y:c.getY()}}getTargetOrientedVector3D(r){let a=r;return this.#r!==void 0&&(a=this.#r.getInverse().multiplyVector3D(r)),a}getTargetDeOrientedVector3D(r){let a=r;return this.#r!==void 0&&(a=this.#r.multiplyVector3D(r)),a}getTargetDeOrientedPoint3D(r){let a=r;return this.#r!==void 0&&(a=this.#r.multiplyPoint3D(r)),a}getImageOrientedVector3D(r){let a=r;if(this.#i!==void 0){let c=xb([r.getX(),r.getY(),r.getZ()],this.#i);a=new O(c[0],c[1],c[2])}return a}getImageOrientedPoint3D(r){let a=r;if(this.#i!==void 0){let c=xb([r.getX(),r.getY(),r.getZ()],this.#i);a=new $(c[0],c[1],c[2])}return a}getImageDeOrientedVector3D(r){let a=r;if(this.#i!==void 0){let c=Wl([r.getX(),r.getY(),r.getZ()],this.#i);a=new O(c[0],c[1],c[2])}return a}getImageDeOrientedPoint3D(r){let a=r;if(this.#i!==void 0){let c=Wl([r.getX(),r.getY(),r.getZ()],this.#i);a=new $(c[0],c[1],c[2])}return a}getPositionFromPlanePoint(r,a){let c=new $(r.getX(),r.getY(),a),h=this.getImageOrientedPoint3D(c);return this.#e.pointToWorld(h)}getPlanePointFromPosition(r){let a=this.#e.worldToPoint(r);return this.getImageDeOrientedPoint3D(a)}getCosines(){return[(r=this.#r).get(0,0),r.get(1,0),r.get(2,0),r.get(0,1),r.get(1,1),r.get(2,1)];var r}getPlanePoints(r){let a=this.getPlanePointFromPosition(r),c=this.getPositionFromPlanePoint(new V(0,0),a.getZ()),h=this.getCosines();return[c,new $(h[0],h[1],h[2]),new $(h[3],h[4],h[5])]}worldToIndex(r){return this.#e.worldToIndex(r)}isAquisitionOrientation(){return oe(this.#i)}getTargetOrientedPositiveXYZ(r){let a=Wl([r.x,r.y,r.z],this.#r);return{x:a[0],y:a[1],z:a[2]}}getScrollIndex(){let r=null;return r=this.#i!==void 0?this.#i.getThirdColMajorDirection():2,r}getNativeScrollIndex(){let r=null;return r=this.#n!==void 0?this.#n.getThirdColMajorDirection():2,r}}class p_{#e;#t;#n;#i=!1;constructor(r){if(r.getImage()===void 0)throw new Error("View does not have an image, cannot setup controller");this.#e=r,this.#t=new hg(r.getImage().getGeometry(),r.getOrientation()),r.getImage().getMeta().Modality==="SEG"&&(this.#i=!0)}getPlaneHelper(){return this.#t}isMask(){return this.#i}initialise(){this.setWindowLevelPresetById(0),this.setCurrentPosition(this.getPositionFromPlanePoint(new V(0,0)))}getModality(){return this.#e.getImage().getMeta().Modality}getWindowLevelPresetsNames(){return this.#e.getWindowPresetsNames()}addWindowLevelPresets(r){return this.#e.addWindowPresets(r)}setWindowLevelPreset(r){this.#e.setWindowLevelPreset(r)}setWindowLevelPresetById(r){this.#e.setWindowLevelPresetById(r)}isPlaying(){return this.#n!==void 0}getCurrentPosition(){return this.#e.getCurrentPosition()}getCurrentIndex(){return this.#e.getCurrentIndex()}getCurrentImageUid(){return this.#e.getCurrentImageUid()}getOriginForImageUid(r){return this.#e.getOriginForImageUid(r)}includesImageUid(r){return this.#e.includesImageUid(r)}getCurrentOrientedIndex(){let r=this.#e.getCurrentIndex();if(this.#e.getOrientation()!==void 0){let a=this.#t.getImageDeOrientedVector3D(new O(r.get(0),r.get(1),r.get(2)));r=new d([a.getX(),a.getY(),a.getZ()])}return r}getScrollIndex(){return this.#e.getScrollIndex()}getCurrentScrollIndexValue(){return this.#e.getCurrentIndex().get(this.#e.getScrollIndex())}getOrigin(r){return this.#e.getOrigin(r)}isAquisitionOrientation(){return this.#e.isAquisitionOrientation()}getPlanePoints(r){return this.#t.getPlanePoints(r)}getCurrentScrollPosition(){let r=this.#e.getScrollIndex();return this.#e.getCurrentPosition().get(r)}generateImageData(r,a){this.#e.generateImageData(r,a)}setImage(r){this.#e.setImage(r)}get2DSpacing(){return this.#e.getImage().getGeometry().getSpacing(this.#e.getOrientation()).get2D()}getRescaledImageValue(r){let a=this.#e.getImage();if(!a.canQuantify())return;let c=a.getGeometry(),h=c.worldToIndex(r),m;return c.isIndexInBounds(h)&&(m=a.getRescaledValueAtIndex(h)),m}getPixelUnit(){return this.#e.getImage().getMeta().pixelUnit}#r(r,a,c,h){let m=Xp(Eb(r,a,c,h)),v=r.getGeometry().getSize(h).getValues();v[2]=1;let S=new Oo(v),_=r.getGeometry().getSpacing(h).getValues();_[2]=1;let E=new Po(_),I=new $(0,0,0),R=new Ca(I,S,E);return new Ds(R,m)}getImageRegionValues(r,a){let c=this.#e.getImage(),h=this.#e.getOrientation(),m=this.getCurrentIndex(),v=!0;oe(h)||(c=this.#r(c,m,v,h),m=new d([0,0,0]),v=!1);let S=function(E,I,R,P,U){if(E.getNumberOfComponents()!==1)throw new Error("Unsupported number of components for region iterator: "+E.getNumberOfComponents());R===void 0&&(R=!1);let H=null;H=R?function(se){return E.getRescaledValueAtOffset(se)}:function(se){return E.getValueAtOffset(se)};let J=E.getGeometry().getSize();P===void 0&&(P=new V(0,0)),U===void 0&&(U=new V(J.get(0)-1,J.get(1)));let te=J.indexToOffset(I.getWithNew2D(P.getX(),P.getY())),ge=J.indexToOffset(I.getWithNew2D(U.getX(),U.getY()-1)),ie=Math.max(1,U.getX()-P.getX());return function(se,ae,re,Ce,Ie,xe){let ke=ae,et=0;return{next:function(){if(ke<re){let At={value:se(ke),done:!1,index:ke};return et+=1,ke+=1,et===Ie&&(et=0,ke+=xe),At}return{done:!0,index:re}}}}(H,te,ge+1,0,ie,J.get(0)-ie)}(c,m,v,r,a),_=[];return S&&(_=Xp(S)),_}getImageVariableRegionValues(r){let a=this.#e.getImage(),c=this.#e.getOrientation(),h=this.getCurrentIndex(),m=!0;oe(c)||(a=this.#r(a,h,m,c),h=new d([0,0,0]),m=!1);let v=function(_,E,I,R){if(_.getNumberOfComponents()!==1)throw new Error("Unsupported number of components for region iterator: "+_.getNumberOfComponents());I===void 0&&(I=!1);let P=null;P=I?function(se){return _.getRescaledValueAtOffset(se)}:function(se){return _.getValueAtOffset(se)};let U=_.getGeometry().getSize(),H=[],J,te=null,ge=null,ie=null;for(let se=0;se<R.length;++se){J=R[se];let ae=J[1][0]-J[0][0];ae!==0&&(ie=se,te||(te=J[0]),H.push([J[0][0],ae,U.get(0)-J[1][0]]))}if(ie!==null&&(ge=R[ie][1]),H.length!==0)return function(se,ae,re,Ce,Ie){let xe=ae,ke=0,et=0;return{next:function(){if(xe<re){let At={value:se(xe),done:!1,index:xe};return et+=1,xe+=1,et===Ie[ke][1]&&(et=0,xe+=Ie[ke][2],ke+=1,ke<Ie.length&&(xe+=Ie[ke][0])),At}return{done:!0,index:re}}}}(P,U.indexToOffset(E.getWithNew2D(te[0],te[1])),U.indexToOffset(E.getWithNew2D(ge[0],ge[1]))+1,0,H)}(a,h,m,r),S=[];return v&&(S=Xp(v)),S}canQuantifyImage(){return this.#e.getImage().canQuantify()}canWindowLevel(){return this.isMonochrome()}isMonochrome(){return this.#e.getImage().isMonochrome()}canScroll(){return this.#e.getImage().canScroll(this.#e.getOrientation())}getImageSize(){return this.#e.getImage().getGeometry().getSize(this.#e.getOrientation())}moreThanOne(r){return this.getImageSize().moreThanOne(r)}getImageWorldSize(){let r=this.#e.getImage().getGeometry(),a=r.getSize(this.#e.getOrientation()).get2D(),c=r.getSpacing(this.#e.getOrientation()).get2D();return{x:a.x*c.x,y:a.y*c.y}}getImageRescaledDataRange(){return this.#e.getImage().getRescaledDataRange()}equalImageMeta(r){let a=this.#e.getImage().getMeta(),c=Object.keys(r);for(let h=0;h<c.length;++h){let m=c[h];if(a[m]===void 0||a[m]!==r[m])return!1}return!0}isPositionInBounds(r){return this.#e.isPositionInBounds(r)}setCurrentPosition(r,a){return this.#e.setCurrentPosition(r,a)}getPositionFromPlanePoint(r,a){a===void 0&&(a=this.getCurrentScrollIndexValue());let c=new $(r.getX(),r.getY(),a),h=this.#t.getImageOrientedPoint3D(c),m=this.#e.getImage().getGeometry().pointToWorld(h);return this.getCurrentPosition().mergeWith3D(m)}getPlanePositionFromPosition(r){let a=this.#e.getImage().getGeometry().worldToPoint(r),c=this.#t.getImageDeOrientedPoint3D(a);return new V(c.getX(),c.getY())}getIndexFromPosition(r){return this.#e.getImage().getGeometry().worldToIndex(r)}setCurrentIndex(r,a){return this.#e.setCurrentIndex(r,a)}getPlanePositionFromPlanePoint(r){let a=this.getCurrentScrollIndexValue(),c=new $(r.getX(),r.getY(),a),h=this.#t.getTargetDeOrientedPoint3D(c),m=this.#e.getImage().getGeometry().getRealSpacing();return new $(h.getX()*m.get(0),h.getY()*m.get(1),h.getZ()*m.get(2))}getOffset3DFromPlaneOffset(r){return this.#t.getOffset3DFromPlaneOffset(r)}#o(r){let a=this.getCurrentIndex(),c=new Array(a.length());c.fill(0),r<c.length?c[r]=1:console.warn("Cannot increment given index: ",r,c.length);let h=new d(c);return a.add(h)}#s(r){let a=this.getCurrentIndex(),c=new Array(a.length());c.fill(0),r<c.length?c[r]=-1:console.warn("Cannot decrement given index: ",r,c.length);let h=new d(c);return a.add(h)}#a(){return this.#o(this.getScrollIndex())}#c(){return this.#s(this.getScrollIndex())}getIncrementPosition(r){return this.#e.getImage().getGeometry().indexToWorld(this.#o(r))}getDecrementPosition(r){return this.#e.getImage().getGeometry().indexToWorld(this.#s(r))}getIncrementScrollPosition(){return this.#e.getImage().getGeometry().indexToWorld(this.#a())}getDecrementScrollPosition(){return this.#e.getImage().getGeometry().indexToWorld(this.#c())}incrementIndex(r,a){return this.setCurrentIndex(this.#o(r),a)}decrementIndex(r,a){return this.setCurrentIndex(this.#s(r),a)}decrementScrollIndex(r){return this.setCurrentIndex(this.#c(),r)}incrementScrollIndex(r){return this.setCurrentIndex(this.#a(),r)}play(){if(this.canScroll())if(this.#n===void 0){let r=this.#e.getImage(),a=r.getMeta().RecommendedDisplayFrameRate,c=this.#e.getPlaybackMilliseconds(a),h=r.getGeometry().getSize().canScroll3D();this.#n=window.setInterval(()=>{let m=!1;if(m=h?this.incrementScrollIndex():this.incrementIndex(3),!m){let v=this.getCurrentIndex().getValues(),S=this.#e.getOrientation();h?v[S.getThirdColMajorDirection()]=0:v[3]=0;let _=new d(v),E=this.#e.getImage().getGeometry();this.setCurrentPosition(E.indexToWorld(_))}},c)}else this.stop()}stop(){this.#n!==void 0&&(clearInterval(this.#n),this.#n=void 0)}getWindowLevel(){return this.#e.getWindowLevel()}getCurrentWindowPresetName(){return this.#e.getCurrentWindowPresetName()}setWindowLevel(r){this.#e.setWindowLevel(r)}getColourMap(){return this.#e.getColourMap()}setColourMap(r){this.#e.setColourMap(r)}setViewAlphaFunction(r){this.#e.setAlphaFunction(r)}bindImageAndLayer(r){let a=this.#e.getImage();a.addEventListener("imagecontentchange",r.onimagecontentchange),a.addEventListener("imagegeometrychange",r.onimagegeometrychange)}unbindImageAndLayer(r){let a=this.#e.getImage();a.removeEventListener("imagecontentchange",r.onimagecontentchange),a.removeEventListener("imagegeometrychange",r.onimagegeometrychange)}}class Y5{#e=0;getSum(){return this.#e}add(r){this.#e+=function(a){return a.wheelDeltaY===void 0?-a.deltaY:a.wheelDeltaY>45?1:a.wheelDeltaY<-45?-1:-a.deltaY/60}(r)}clear(){this.#e=0}isTick(){return Math.abs(this.#e)>=1}}class Yl{#e;#t=new Y5;constructor(r){this.#e=r}wheel(r){this.#t.add(r);let a=this.#t.getSum()>=0;if(!this.#t.isTick())return;this.#t.clear(),r.preventDefault();let c=Pt(r),h=this.#e.getLayerGroupByDivId(c.groupDivId),m=h.getActiveViewLayer().getViewController(),v;h.canScroll()?v=a?m.getIncrementScrollPosition():m.getDecrementScrollPosition():h.moreThanOne(3)&&(v=a?m.getIncrementPosition(3):m.getDecrementPosition(3)),v!==void 0&&h.isPositionInBounds(v)&&m.setCurrentPosition(v)}}class sn{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getBegin(){return this.#e}getEnd(){return this.#t}equals(r){return r!==null&&this.getBegin().equals(r.getBegin())&&this.getEnd().equals(r.getEnd())}getDeltaX(){return this.getEnd().getX()-this.getBegin().getX()}getDeltaY(){return this.getEnd().getY()-this.getBegin().getY()}getLength(){return Math.sqrt(this.getDeltaX()*this.getDeltaX()+this.getDeltaY()*this.getDeltaY())}getWorldLength(r){let a=null;if(r!==null){let c=this.getDeltaX()*r.x,h=this.getDeltaY()*r.y;a=Math.sqrt(c*c+h*h)}return a}getMidpoint(){return new V((this.getBegin().getX()+this.getEnd().getX())/2,(this.getBegin().getY()+this.getEnd().getY())/2)}getCentroid(){return this.getMidpoint()}getSlope(){return this.getDeltaY()/this.getDeltaX()}getIntercept(){return(this.getEnd().getX()*this.getBegin().getY()-this.getBegin().getX()*this.getEnd().getY())/this.getDeltaX()}getInclination(){return 180-180*Math.atan2(this.getDeltaY(),this.getDeltaX())/Math.PI}quantify(r){let a={},c=r.get2DSpacing(),h=this.getWorldLength(c);return h!==null&&(a.length={value:h,unit:"unit.mm"}),a}}function fg(u,r){let a=u.getDeltaX(),c=u.getDeltaY(),h=r.getDeltaX(),m=r.getDeltaY(),v=a*h+c*m,S=a*m-c*h;return 360-(180-180*Math.atan2(S,v)/Math.PI)}function mg(u,r){let a=u.getDeltaX(),c=u.getDeltaY();return a*r.getDeltaX()+c*r.getDeltaY()==0}function ir(u,r,a,c){c===void 0&&(c={x:1,y:1});let h=-c.x*c.x/(c.y*c.y*u.getSlope());return y_(h,r.getY()-h*r.getX(),r,a,c)}function g_(u,r,a,c){let h=y_(u.getSlope(),u.getIntercept(),u.getBegin(),r,c),m;return m=function(v,S){let _=Math.min(S.getBegin().getX(),S.getEnd().getX()),E=Math.max(S.getBegin().getX(),S.getEnd().getX()),I=Math.min(S.getBegin().getY(),S.getEnd().getY()),R=Math.max(S.getBegin().getY(),S.getEnd().getY());return v.getX()>=_&&v.getX()<=E&&v.getY()>=I&&v.getY()<=R}(h.getBegin(),u)?h.getBegin():h.getEnd(),ir(u,m,a,c)}function y_(u,r,a,c,h){h===void 0&&(h={x:1,y:1});let m=0,v=0,S=0,_=0;if(T(u,0,j))m=a.getX()-c/(2*h.x),v=a.getY(),S=a.getX()+c/(2*h.x),_=a.getY();else if(Math.abs(u)>1e6)m=a.getX(),v=a.getY()-c/(2*h.y),S=a.getX(),_=a.getY()+c/(2*h.y);else{let E=h.x*h.x,I=h.y*h.y,R=c/(2*Math.sqrt(E+I*u*u));m=a.getX()-R,v=u*m+r,S=a.getX()+R,_=u*S+r}return new sn(new V(m,v),new V(S,_))}var X5=s(944),fe=s.n(X5);class Kd{#e;#t={};#n=new ii;#i;#r;constructor(r){this.#e=r!==void 0?r:[],this.#i=!0}getList(){return this.#e}getLength(){return this.#e.length}isEditable(){return this.#i}setEditable(r){this.#i=r,this.#o({type:"annotationgroupeditablechange",data:r})}getColour(){return this.#r}setColour(r){this.#r=r}add(r){this.#e.push(r),this.#o({type:"annotationadd",data:r})}update(r,a){let c=this.#e.findIndex(h=>h.id===r.id);c!==-1?(this.#e[c]=r,this.#o({type:"annotationupdate",data:r,keys:a})):p.warn("Cannot find annotation to update")}remove(r){let a=this.#e.findIndex(c=>c.id===r);if(a!==-1){let c=this.#e.splice(a,1)[0];this.#o({type:"annotationremove",data:c})}else p.warn("Cannot find annotation to remove")}setViewController(r){for(let a of this.#e)a.setViewController(r),a.updateQuantification()}find(r){return this.#e.find(a=>a.id===r)}getMeta(){return this.#t}hasMeta(r){return this.#t[r]!==void 0}getMetaValue(r){return this.#t[r]}setMetaValue(r,a){this.#t[r]=a}addEventListener(r,a){this.#n.add(r,a)}removeEventListener(r,a){this.#n.remove(r,a)}#o=r=>{this.#n.fireEvent(r)}}class v_{#e;getAnnotation(r){return this.#e.find(r)}getAnnotationGroup(){return this.#e}isAnnotationGroupEditable(){return this.#e.isEditable()}setAnnotationGroupEditable(r){this.#e.setEditable(r)}addAnnotation(r){this.#e.add(r)}updateAnnotation(r,a){this.#e.update(r,a)}removeAnnotation(r){this.#e.remove(r)}removeAnnotationWithCommand(r,a){let c=this.getAnnotation(r);if(c===void 0)return void p.warn("Cannot create remove command for undefined annotation: "+r);let h=new yg(c,this);a(h),h.execute()}updateAnnotationWithCommand(r,a,c,h){let m=this.getAnnotation(r);if(m===void 0)return void p.warn("Cannot create update command for undefined annotation: "+r);let v=new ws(m,a,c,this);h(v),v.execute()}removeAllAnnotationsWithCommand(r){for(let a of this.#e.getList())this.removeAnnotationWithCommand(a.id,r)}constructor(r){this.#e=r!==void 0?r:new Kd}hasAnnotationMeta(r){return this.#e.hasMeta(r)}setAnnotationMeta(r,a){this.#e.setMetaValue(r,a)}}class Jd{#e=10;#t="Verdana";#n="#fff";#i="#ffff80";#r={x:1,y:1};#o={x:1,y:1};#s=2;#a={x:.25,y:.25};#c=.2;#l=3;getFontFamily(){return this.#t}getFontSize(){return this.#e}getStrokeWidth(){return this.#s}getTextColour(){return this.#n}getLineColour(){return this.#i}setLineColour(r){this.#i=r}setBaseScale(r){this.#r=r}setZoomScale(r){this.#o=r}getBaseScale(){return this.#r}getZoomScale(){return this.#o}scale(r){return r/this.#r.x}applyZoomScale(r){return{x:r/this.#o.x,y:r/this.#o.y}}applyZoomRatio(r){return r*this.#o.x/this.#o.y}getShadowOffset(){return this.#a}getTagOpacity(){return this.#c}getTextPadding(){return this.#l}getFontStr(){return"normal "+this.getFontSize()+"px sans-serif"}getLineHeight(){return this.getFontSize()+this.getFontSize()/5}getScaledFontSize(){return this.scale(this.getFontSize())}getScaledStrokeWidth(){return this.scale(this.getStrokeWidth())}getShadowLineColour(){return r=this.getLineColour(),c=r,.001172549*(a={r:parseInt(c.substring(1,3),16),g:parseInt(c.substring(3,5),16),b:parseInt(c.substring(5,7),16)}).r+.002301961*a.g+447059e-9*a.b<.5?"#fff":"#000";var r,a,c}}function pg(u){return u.name()==="label"}function ko(u){return u.name()==="shape"}function S_(u){return u.name()==="position-group"}function eu(u){let r=u.getChildren(ko)[0];if(r instanceof fe().Line)return r}function xt(u,r){let a=u.getChildren(function(c){return c.id()==="anchor"+r})[0];if(a instanceof fe().Ellipse)return a}function gg(u){return function(r){return r.id()===u}}function Cs(u,r,a,c){let h=c.applyZoomScale(6),m={x:Math.abs(h.x),y:Math.abs(h.y)};return new(fe()).Ellipse({x:u,y:r,stroke:"#999",fill:"rgba(100,100,100,0.7",strokeWidth:c.getStrokeWidth(),strokeScaleEnabled:!1,radius:m,radiusX:m.x,radiusY:m.y,name:"anchor",id:a.toString(),dragOnTop:!1,draggable:!0,visible:!1})}function b_(u){return parseInt(u.substring(6),10)}class Lo{#e;#t;constructor(r,a){this.#e=new V(Math.min(r.getX(),a.getX()),Math.min(r.getY(),a.getY())),this.#t=new V(Math.max(r.getX(),a.getX()),Math.max(r.getY(),a.getY()))}getBegin(){return this.#e}getEnd(){return this.#t}equals(r){return r!==null&&this.getBegin().equals(r.getBegin())&&this.getEnd().equals(r.getEnd())}getSurface(){let r=this.getBegin(),a=this.getEnd();return Math.abs(a.getX()-r.getX())*Math.abs(a.getY()-r.getY())}getWorldSurface(r){return function(a,c,h){let m=null;return c!==null&&h!==null&&(m=a*c*h),m}(this.getSurface(),r.x,r.y)}getRealWidth(){return this.getEnd().getX()-this.getBegin().getX()}getRealHeight(){return this.getEnd().getY()-this.getBegin().getY()}getWidth(){return Math.abs(this.getRealWidth())}getHeight(){return Math.abs(this.getRealHeight())}getRound(){return{min:new V(Math.round(this.getBegin().getX()),Math.round(this.getBegin().getY())),max:new V(Math.round(this.getEnd().getX()),Math.round(this.getEnd().getY()))}}getCentroid(){return new V(this.getBegin().getX()+this.getWidth()/2,this.getBegin().getY()+this.getHeight()/2)}quantify(r,a){let c={},h=r.get2DSpacing();c.width={value:this.getWidth()*h.x,unit:"unit.mm"},c.height={value:this.getHeight()*h.y,unit:"unit.mm"};let m=this.getWorldSurface(h);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),r.canQuantifyImage()){let v=this.getRound(),S=r.getImageRegionValues(v.min,v.max),_=r.getPixelUnit(),E=Zp(S,a);c.min={value:E.min,unit:_},c.max={value:E.max,unit:_},c.mean={value:E.mean,unit:_},c.stdDev={value:E.stdDev,unit:_},E.median!==void 0&&(c.median={value:E.median,unit:_}),E.p25!==void 0&&(c.p25={value:E.p25,unit:_}),E.p75!==void 0&&(c.p75={value:E.p75,unit:_})}return c}}function Z5(u,r,a){let c=u.getValues(),h=c.slice(),m=[],v=r[0],S=Math.floor(v/2),_=r[1],E=Math.floor(_/2),I=a[0],R=a[1];for(let P=0;P<_;++P){h[R]=c[R]-E+P;for(let U=0;U<v;++U)h[I]=c[I]-S+U,m.push(new d(h.slice()))}return m}class zi{#e=[];constructor(r){r!==void 0&&(this.#e=r)}getPoint(r){return this.#e[r]}getPoints(){return this.#e}getLength(){return this.#e.length}addPoint(r){this.#e.push(r)}addPoints(r){this.#e=this.#e.concat(r)}getCentroid(){let r=0,a=0,c=0;for(let m=0;m<this.#e.length;++m){let v=this.#e[m],S;S=m===this.#e.length-1?this.#e[0]:this.#e[m+1];let _=v.getX()*S.getY()-S.getX()*v.getY();r+=_,a+=(v.getX()+S.getX())*_,c+=(v.getY()+S.getY())*_}r*=.5;let h=1/(6*r);return a*=h,c*=h,new V(a,c)}}class No{#e;constructor(r){if(r.length>3)throw new Error("Too many points for a protractor");this.#e=r.slice(0,3)}getPoint(r){return this.#e[r]}getLength(){return this.#e.length}getCentroid(){return this.#e[1]}quantify(r,a){let c={};if(this.#e.length===3){let h=fg(new sn(this.#e[0],this.#e[1]),new sn(this.#e[1],this.#e[2]));h>180&&(h=360-h),c.angle={value:h,unit:"unit.degree"}}return c}}class Vo{#e;#t;#n;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c}getCenter(){return this.#e}getCentroid(){return this.#e}getA(){return this.#t}getB(){return this.#n}equals(r){return r!==null&&this.getCenter().equals(r.getCenter())&&this.getA()===r.getA()&&this.getB()===r.getB()}getSurface(){return Math.PI*this.getA()*this.getB()}getWorldSurface(r){return function(a,c,h){let m=null;return c!==null&&h!==null&&(m=a*c*h),m}(this.getSurface(),r.x,r.y)}getRound(){let r=this.getCenter().getX(),a=this.getCenter().getY(),c=this.getA(),h=this.getB(),m=c/h,v=Math.pow(h,2),S=a+h,_=[];for(let E=a-h;E<S;++E){let I=v-Math.pow(E-a,2);if(Math.abs(I)<1e-7)continue;let R=m*Math.sqrt(I);R<.5||_.push([[Math.round(r-R),Math.round(E)],[Math.round(r+R),Math.round(E)]])}return _}quantify(r,a){let c={},h=r.get2DSpacing();c.a={value:this.getA()*h.x,unit:"unit.mm"},c.b={value:this.getB()*h.y,unit:"unit.mm"};let m=this.getWorldSurface(h);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),r.canQuantifyImage()){let v=this.getRound();if(v.length!==0){let S=r.getImageVariableRegionValues(v),_=r.getPixelUnit(),E=Zp(S,a);c.min={value:E.min,unit:_},c.max={value:E.max,unit:_},c.mean={value:E.mean,unit:_},c.stdDev={value:E.stdDev,unit:_},E.median!==void 0&&(c.median={value:E.median,unit:_}),E.p25!==void 0&&(c.p25={value:E.p25,unit:_}),E.p75!==void 0&&(c.p75={value:E.p75,unit:_})}}return c}}function K5(u,r,a){let c=u.getValues(),h=c.slice(),m=[],v=r[0],S=r[1],_=v/S,E=Math.pow(S,2),I=a[0],R=a[1];for(let P=0;P<S;++P){let U=Math.round(_*Math.sqrt(E-Math.pow(P,2))),H=c[R]+P,J=c[R]-P;for(let te=0;te<U;++te){let ge=c[I]+te,ie=c[I]-te;h[I]=ge,h[R]=H,m.push(new d(h.slice())),J!==H&&(h[R]=J,m.push(new d(h.slice()))),ie!==ge&&(h[I]=ie,h[R]=H,m.push(new d(h.slice())),J!==H&&(h[R]=J,m.push(new d(h.slice()))))}}return m}class Bo{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getCenter(){return this.#e}getCentroid(){return this.#e}getRadius(){return this.#t}equals(r){return r!==null&&this.getCenter().equals(r.getCenter())&&this.getRadius()===r.getRadius()}getSurface(){return Math.PI*this.getRadius()*this.getRadius()}getWorldSurface(r){return function(a,c,h){let m=null;return c!==null&&h!==null&&(m=a*c*h),m}(this.getSurface(),r.x,r.y)}getRound(){let r=this.getCenter().getX(),a=this.getCenter().getY(),c=this.getRadius(),h=Math.pow(c,2),m=a+c,v=[];for(let S=a-c;S<m;++S){let _=h-Math.pow(S-a,2);if(Math.abs(_)<1e-7)continue;let E=Math.sqrt(_);E<.5||v.push([[Math.round(r-E),Math.round(S)],[Math.round(r+E),Math.round(S)]])}return v}quantify(r,a){let c={},h=r.get2DSpacing();c.radius={value:this.getRadius()*h.x,unit:"unit.mm"};let m=this.getWorldSurface(h);if(m!==null&&(c.surface={value:m/100,unit:"unit.cm2"}),r.canQuantifyImage()){let v=this.getRound();if(v.length!==0){let S=r.getImageVariableRegionValues(v),_=r.getPixelUnit(),E=Zp(S,a);c.min={value:E.min,unit:_},c.max={value:E.max,unit:_},c.mean={value:E.mean,unit:_},c.stdDev={value:E.stdDev,unit:_},E.median!==void 0&&(c.median={value:E.median,unit:_}),E.p25!==void 0&&(c.p25={value:E.p25,unit:_}),E.p75!==void 0&&(c.p75={value:E.p75,unit:_})}}return c}}class J5{#e;#t;constructor(r,a){this.#e=r,this.#t=a}#n=null;#i=null;#r;#o;#s=!1;setShape(r,a,c){if(this.#i=r,this.#r=a,this.#o=c,this.#i){if(this.#l(),this.#n=c.getFactory(),this.#n===null)throw new Error("Could not find a factory to update shape.");this.#u()}}getShape(){return this.#i}getAnnotation(){return this.#o}isActive(){return this.#s}enable(){this.#s=!0,this.#i&&(this.#c(!0),this.#i.getLayer()&&this.#i.getLayer().draw())}disable(){this.#s=!1,this.#i&&(this.#c(!1),this.#i.getLayer()&&this.#i.getLayer().draw())}reset(){this.#i=void 0,this.#r=void 0,this.#o=void 0}resetAnchors(){this.#l(),this.#u(),this.#c(!0)}#a(r){this.#i&&this.#i.getParent()&&this.#i.getParent().find(".anchor").forEach(r)}#c(r){this.#a(function(a){a.visible(r)})}setAnchorsActive(r){let a=null;a=r?c=>{this.#d(c)}:c=>{this.#f(c)},this.#a(a)}#l(){this.#a(function(r){r.remove()})}#u(){if(!this.#i||!this.#i.getLayer())return;let r=this.#i.getParent(),a=this.#n.getAnchors(this.#i,this.#e.getStyle());for(let c=0;c<a.length;++c)this.#d(a[c]),r.add(a[c])}#d(r){let a;r.on("dragstart.edit",c=>{c.cancelBubble=!0,a={mathShape:this.#o.mathShape,referencePoints:this.#o.referencePoints}}),r.on("dragmove.edit",c=>{let h=c.target;h instanceof fe().Shape&&(function(m,v){let S=v.getParent();(function(_,E,I){let R=!1;_.x()<E.getX()?(_.x(E.getX()),R=!0):_.x()>I.getX()&&(_.x(I.getX()),R=!0),_.y()<E.getY()?(_.y(E.getY()),R=!0):_.y()>I.getY()&&(_.y(I.getY()),R=!0)})(v,new V(-S.x(),-S.y()),new V(m.x-S.x(),m.y-S.y()))}(this.#r.getBaseSize(),h),this.#n.constrainAnchorMove!==void 0&&this.#n.constrainAnchorMove(h),this.#n.updateAnnotationOnAnchorMove(this.#o,h),this.#n.updateShapeGroupOnAnchorMove(this.#o,h,this.#e.getStyle()),h.getLayer()?h.getLayer().draw():p.warn("No layer to draw the anchor!"),c.cancelBubble=!0)}),r.on("dragend.edit",c=>{let h={mathShape:this.#o.mathShape,referencePoints:this.#o.referencePoints},m=new ws(this.#o,a,h,this.#r.getDrawController());this.#e.addToUndoStack(m),this.#t({type:"annotationupdate",data:this.#o,dataid:this.#r.getDataId(),keys:Object.keys(h)}),a={mathShape:h.mathShape,referencePoints:h.referencePoints},c.cancelBubble=!0}),r.on("mousedown touchstart",c=>{c.target.moveToTop()}),r.on("mouseover.edit",c=>{let h=c.target;h instanceof fe().Shape&&(h.stroke("#ddd"),h.getLayer()?h.getLayer().draw():p.warn("No layer to draw the anchor!"))}),r.on("mouseout.edit",c=>{let h=c.target;h instanceof fe().Shape&&(h.stroke("#999"),h.getLayer()?h.getLayer().draw():p.warn("No layer to draw the anchor!"))})}#f(r){r.off("dragstart.edit"),r.off("dragmove.edit"),r.off("dragend.edit"),r.off("mousedown touchstart"),r.off("mouseover.edit"),r.off("mouseout.edit")}}class eR{#e;constructor(){this.createTrashIcon()}createTrashIcon(){this.#e=new(fe()).Group;let r=new(fe()).Line({points:[-10,-10,10,10],stroke:"red"}),a=new(fe()).Line({points:[10,-10,-10,10],stroke:"red"});this.#e.width(20),this.#e.height(20),this.#e.add(r),this.#e.add(a)}activate(r){let a=r.getKonvaStage(),c=a.scale(),h=r.getKonvaLayer(),m={x:1/c.x,y:1/c.y};this.#e.x(a.offset().x+a.width()/(2*c.x)),this.#e.y(a.offset().y+a.height()/(15*c.y)),this.#e.scale(m),h.add(this.#e),h.draw()}changeChildrenColourOnTrashHover(r,a,c){if(this.isOverTrash(r))return this.changeGroupChildrenColour(this.#e,"orange"),void this.changeGroupChildrenColour(a,"red");this.changeGroupChildrenColour(this.#e,"red"),this.changeGroupChildrenColour(a,c)}changeGroupChildrenColour(r,a){r.getChildren().forEach(function(c){c instanceof fe().Shape&&c.stroke!==void 0&&c.stroke(a)})}remove(){this.#e.remove()}isOverTrash(r){let a=this.#e.width()*Math.abs(this.#e.scaleX())/2,c=this.#e.height()*Math.abs(this.#e.scaleY())/2;return Math.abs(r.x-this.#e.x())<a&&Math.abs(r.y-this.#e.y())<c}}class __{#e;#t;#n;#i="pointer";#r;#o;#s;constructor(r,a){this.#e=r,this.#s=a,this.#t=new J5(r,a),this.#n=new eR}setEditorShape(r,a){let c=a.getDrawController();r&&r instanceof fe().Shape&&r!==this.#t.getShape()&&c.isAnnotationGroupEditable()&&(this.#t.disable(),this.#t.setShape(r,a,a.getDrawController().getAnnotation(r.getParent().id())),this.#t.enable())}getEditorShapeGroup(){let r;if(!this.#t.isActive()||(r=this.#t.getShape().getParent(),r instanceof fe().Group))return r}getEditorAnnotation(){let r;return this.#t.isActive()&&(r=this.#t.getAnnotation()),r}disableAndResetEditor(){this.#t.disable(),this.#t.reset()}#a(r,a){let c=a.getKonvaStage();return{x:c.offset().x+r.x/c.scale().x,y:c.offset().y+r.y/c.scale().y}}storeMouseOverCursor(r){this.#i=r}#c(){this.#r=document.body.style.cursor,document.body.style.cursor=this.#i,this.#o.opacity(.75)}onMouseOutShapeGroup(){this.#r!==void 0&&(document.body.style.cursor=this.#r,this.#r=void 0),this.#o!==void 0&&this.#o.opacity(1)}#l(r){r.on("mouseover",()=>{this.#o=r,this.#c()}),r.on("mouseout",()=>{this.onMouseOutShapeGroup(),this.#o=void 0})}#u(r){r.off("mouseover"),r.off("mouseout")}addShapeGroupListeners(r,a,c){this.#l(r),this.#d(r,a,c),this.#f(r,a,c),r.on("dblclick",()=>{let h=a.textExpr;C_.openRoiDialog(a,m=>{let v=m.textExpr,S=new ws(m,{textExpr:h},{textExpr:v},c.getDrawController());this.#e.addToUndoStack(S),S.execute()})})}#d(r,a,c){let h=c.getKonvaLayer(),m=r.getChildren(ko)[0];if(!(m instanceof fe().Shape))return;let v,S,_,E;m.draggable(!0),m.on("dragstart.draw",I=>{E=m.stroke(),v={x:m.x(),y:m.y()},S={x:I.target.x(),y:I.target.y()},_={mathShape:a.mathShape,referencePoints:a.referencePoints},this.#n.activate(c),this.#t.setAnchorsActive(!1),h.draw()}),m.on("dragmove.draw",I=>{let R=function(se,ae){return{min:new V(0,0),max:new V(se.x-Math.abs(ae.width()),se.y-Math.abs(ae.height()))}}(c.getBaseSize(),m);if(R&&!function(se,ae,re){let Ce=se.getClientRect({relativeTo:se.getParent()});return Ce.x>ae.getX()&&Ce.x<re.getX()&&Ce.y>ae.getY()&&Ce.y<re.getY()}(m,R.min,R.max))return m.x(S.x),void m.y(S.y);let P={x:I.target.x()-S.x,y:I.target.y()-S.y},U=r.getChildren(),H=a.labelPosition===void 0;for(let se of U)se===I.target||se.name()==="label"&&!H||se.name()==="connector"||se.move(P);S={x:I.target.x(),y:I.target.y()};let J=a.getFactory();J.updateAnnotationOnTranslation(a,P),J.updateLabelContent(a,r,this.#e.getStyle()),J.updateConnector(r);let te=Tn(I.evt),ge={x:te.getX(),y:te.getY()},ie=this.#a(ge,c);this.#n.changeChildrenColourOnTrashHover(ie,r,E),h.draw()}),m.on("dragend.draw",I=>{if(this.#n.remove(),I===void 0||I.evt===void 0)return;let R=m.x(),P=m.y(),U=Tn(I.evt),H={x:U.getX(),y:U.getY()},J=this.#a(H,c);if(this.#n.isOverTrash(J)){r.x(v.x),r.y(v.y),this.#t.disable(),this.#t.reset(),this.#n.changeGroupChildrenColour(r,E),a.mathShape=_.mathShape,a.referencePoints=_.referencePoints;let te=new yg(a,c.getDrawController());this.#e.addToUndoStack(te),te.execute(),this.onMouseOutShapeGroup()}else{let te={x:R-v.x,y:P-v.y};if(te.x!==0||te.y!==0){let ge={mathShape:a.mathShape,referencePoints:a.referencePoints},ie=new ws(a,_,ge,c.getDrawController());this.#e.addToUndoStack(ie),this.#s({type:"annotationupdate",data:a,dataid:c.getDataId(),keys:Object.keys(ge)}),_={mathShape:ge.mathShape,referencePoints:ge.referencePoints}}this.#t.setAnchorsActive(!0),this.#t.resetAnchors()}h.draw(),v={x:m.x(),y:m.y()}})}#f(r,a,c){let h=r.getChildren(pg)[0];if(!(h instanceof fe().Label))return;let m,v;h.draggable(!0),h.on("dragstart.draw",()=>{m={x:h.x(),y:h.y()},v=a.labelPosition}),h.on("dragmove.draw",()=>{a.getFactory().updateConnector(r)}),h.on("dragend.draw",()=>{let S=h.x()-m.x,_=h.y()-m.y;if(S!==0||_!==0){let E=new V(h.x(),h.y());a.labelPosition=E;let I=new ws(a,{labelPosition:v},{labelPosition:E},c.getDrawController());this.#e.addToUndoStack(I),this.#s({type:"annotationupdate",data:a,dataid:c.getDataId(),keys:["labelPosition"]}),v=E}m={x:h.x(),y:h.y()}})}removeShapeListeners(r){this.#u(r),r.off("dblclick");let a=r.getChildren(ko)[0];a instanceof fe().Shape&&(a.draggable(!1),a.off("dragstart.draw"),a.off("dragmove.draw"),a.off("dragend.draw"));let c=r.getChildren(pg)[0];c instanceof fe().Label&&(c.draggable(!1),c.off("dragstart.draw"),c.off("dragend.draw"))}}class Ea{#e;#t=null;#n;#i;#r={x:1,y:1};#o={x:1,y:1,z:1};#s={x:0,y:0};#a={x:0,y:0};#c={x:0,y:0};#l={x:0,y:0};#u;#d;#f;#h;#m;#p;#y=!0;constructor(r){this.#e=r,this.#e.className+=" drawLayer"}setShapeHandler(r){this.#p=r}getDataId(){return this.#f}getReferenceLayerId(){return this.#h}#v=new ii;getKonvaStage(){return this.#t}getKonvaLayer(){return this.#t.getLayers()[0]}getDrawController(){return this.#u}setPlaneHelper(r){this.#d=r}getId(){return this.#e.id}removeFromDOM(){this.#e.remove()}getBaseSize(){return this.#n}getOpacity(){return this.#t.opacity()}setOpacity(r){this.#t.opacity(Math.min(Math.max(r,0),1))}addFlipOffsetX(){let r=this.#t.scale(),a=this.#t.size();this.#l.x+=a.width/r.x;let c=this.#t.offset();c.x+=this.#l.x,this.#t.offset(c)}addFlipOffsetY(){let r=this.#t.scale(),a=this.#t.size();this.#l.y+=a.height/r.y;let c=this.#t.offset();c.y+=this.#l.y,this.#t.offset(c)}flipScaleX(){this.#o.x*=-1}flipScaleY(){this.#o.y*=-1}flipScaleZ(){this.#o.z*=-1}setScale(r,a){let c=this.#d.getTargetOrientedPositiveXYZ({x:r.x*this.#o.x,y:r.y*this.#o.y,z:r.z*this.#o.z}),h={x:this.#r.x*c.x,y:this.#r.y*c.y},m=this.#t.offset();if(Math.abs(r.x)===1&&Math.abs(r.y)===1&&Math.abs(r.z)===1){let v={x:m.x-this.#c.x,y:m.y-this.#c.y};this.#c={x:0,y:0},this.#t.offset(v)}else if(a!==void 0){let v=this.#d.getPlaneOffsetFromOffset3D({x:a.getX(),y:a.getY(),z:a.getZ()});v={x:v.x+this.#s.x,y:v.y+this.#s.y};let S=E_(m,this.#t.scale(),h,v),_={x:this.#c.x+S.x-m.x,y:this.#c.y+S.y-m.y};this.#c=_,this.#t.offset(S)}this.#t.scale(h),this.#T(h)}initScale(r,a){let c=this.#d.getTargetOrientedPositiveXYZ({x:r.x*this.#o.x,y:r.y*this.#o.y,z:r.z*this.#o.z}),h={x:this.#r.x*c.x,y:this.#r.y*c.y};this.#t.scale(h),this.#c={x:a.x/this.#r.x,y:a.y/this.#r.y};let m=this.#t.offset();this.#t.offset({x:m.x+this.#c.x,y:m.y+this.#c.y})}setOffset(r){let a=this.#d.getPlaneOffsetFromOffset3D(r);this.#t.offset({x:a.x+this.#a.x+this.#s.x+this.#c.x+this.#l.x,y:a.y+this.#a.y+this.#s.y+this.#c.y+this.#l.y})}setBaseOffset(r,a){let c=this.#d.getNativeScrollIndex(),h=this.#d.getPlaneOffsetFromOffset3D({x:c===0?r.getX():a.getX(),y:c===1?r.getY():a.getY(),z:c===2?r.getZ():a.getZ()}),m=this.#s.x!==h.x||this.#s.y!==h.y;if(m){let v=this.#t.offset();this.#t.offset({x:v.x-this.#s.x+h.x,y:v.y-this.#s.y+h.y}),this.#s=h}return m}display(r){this.#e.style.display=r?"":"none"}isVisible(){return this.#e.style.display===""}draw(){this.#t.draw()}initialise(r,a,c){this.#n=r,this.#i=a,this.#h=c,this.#t=new(fe()).Stage({container:this.#e,width:this.#n.x,height:this.#n.y,listening:!1}),this.#t.getContent().setAttribute("style","");let h=new(fe()).Layer({listening:!1,visible:!0});this.#t.add(h)}setAnnotationGroup(r,a,c){if(this.#f=a,r.addEventListener("annotationadd",h=>{this.#g(h.data,!0),this.getKonvaLayer().draw()}),r.addEventListener("annotationupdate",h=>{this.#I(h.data),this.getKonvaLayer().draw()}),r.addEventListener("annotationremove",h=>{this.#D(h.data),this.getKonvaLayer().draw()}),r.addEventListener("annotationgroupeditablechange",h=>{this.activateCurrentPositionShapes(h.data)}),this.#u=new v_(r),r.getLength()!==0)for(let h of r.getList())this.#g(h,!1),c(new tu(h,this.getDrawController()))}activateCurrentPositionShapes(r){let a=this.getKonvaLayer();if(this.#t.listening(!1),this.#p!==void 0){this.#p.disableAndResetEditor();let h=a.getChildren();for(let m of h)m instanceof fe().Group&&m.getChildren().forEach(v=>{v instanceof fe().Group&&this.#p.removeShapeListeners(v)})}let c=this.getDrawController();if(r&&c.getAnnotationGroup().isEditable()){let h=this.getCurrentPosGroup().getChildren();h.length!==0&&(this.#t.listening(!0),a.listening(!0)),this.#p!==void 0&&h.forEach(m=>{if(m instanceof fe().Group){let v=c.getAnnotation(m.id());this.#p.addShapeGroupListeners(m,v,this)}})}a.draw()}#S(r){let a;return a=r.planePoints!==void 0?r.planePoints:[r.planeOrigin],this.#b(a)}#b(r){let a="";for(let c of r)a.length!==0&&(a+="-"),a+=yt([cn(c.getX(),2),cn(c.getY(),2),cn(c.getZ(),2)]);return a}#_(r){let a,c=this.#S(r),h=this.getKonvaLayer().getChildren(gg(c));if(h.length!==0){let m=h[0];if(!(m instanceof fe().Group))return;let v=m.getChildren(gg(r.id));v.length!==0&&v[0]instanceof fe().Group&&(a=v[0])}return a}#g(r,a){if(!r.isCompatibleView(this.#d))return;let c=this.#S(r),h=this.getKonvaLayer().getChildren(gg(c))[0];if(h===void 0&&(h=new(fe()).Group({id:c,name:"position-group",visible:a}),this.getKonvaLayer().add(h)),!(h instanceof fe().Group))return;let m=new Jd,v=this.getKonvaStage();m.setZoomScale(v.scale());let S=r.getFactory().createShapeGroup(r,m);h.add(S),a&&this.#p!==void 0&&this.#p.addShapeGroupListeners(S,r,this),this.setLabelVisibility(S)}#D(r){let a=this.#_(r);return a instanceof fe().Group?(a.remove(),!0):(p.debug("No shape group to remove"),!1)}#I(r){r.updateQuantification(),this.#D(r)&&this.#g(r,!0)}fitToContainer(r,a,c){this.#t.width(r.x),this.#t.height(r.y);let h={x:a*this.#i.x,y:a*this.#i.y},m={x:this.#t.scale().x*h.x/this.#r.x,y:this.#t.scale().y*h.y/this.#r.y};this.#t.scale().x===m.x&&this.#t.scale().y===m.y||(this.#r=h,this.#t.scale(m));let v={x:c.x/h.x,y:c.y/h.y},S={x:r.x/h.x,y:r.y/h.y},_={x:this.#l.x!==0?S.x:0,y:this.#l.y!==0?S.y:0};this.#a.x===v.x&&this.#a.y===v.y&&this.#l.x===_.x&&this.#l.y===_.y||(this.#t.offset({x:this.#t.offset().x+v.x-this.#a.x+_.x-this.#l.x,y:this.#t.offset().y+v.y-this.#a.y+_.y-this.#l.y}),this.#l=_,this.#a=v)}isAnnotationVisible(r){let a=this.getGroup(r);return a!==void 0&&a.isVisible()}setAnnotationVisibility(r,a){let c=this.getGroup(r);return c!==void 0&&(a===void 0&&(a=!c.isVisible()),c.visible(a),this.draw(),!0)}setLabelsVisibility(r){this.#y=r;let a=this.getKonvaLayer().getChildren();for(let c of a)if(c instanceof fe().Group){let h=c.getChildren();for(let m of h)m instanceof fe().Group&&this.#w(m,r)}}#w(r,a){let c=r.getChildren(pg)[0];if(c instanceof fe().Label&&(a===void 0&&(a=!c.isVisible()),c.getText()!==void 0&&c.getText().text().length!==0)){c.visible(a);let h=r.getChildren(m=>m.className==="Line"&&m.name()==="connector")[0];h&&h.visible(a)}}setLabelVisibility(r){this.#w(r,this.#y)}deleteDraw(r,a){}deleteDraws(r){}getNumberOfDraws(){let r=this.getKonvaLayer().getChildren(),a=0;for(let c of r)c instanceof fe().Group&&(a+=c.getChildren().length);return a}bindInteraction(){this.#t.listening(!0),this.#e.style.pointerEvents="auto";let r=Ta;for(let a=0;a<r.length;++a)this.#e.addEventListener(r[a],this.#E)}unbindInteraction(){this.#t.listening(!1),this.#e.style.pointerEvents="none";let r=Ta;for(let a=0;a<r.length;++a)this.#e.removeEventListener(r[a],this.#E)}setCurrentPosition(r,a){a===void 0&&(a=this.#d.worldToIndex(r));let c=this.#d.getPlanePoints(r),h;h=this.#d.isAquisitionOrientation()?[c[0]]:c;let m=this.#b(h);return this.#C(m),this.#E({type:"positionchange",value:[a.getValues(),r.getValues()],valid:!0}),!0}#C(r){this.#m=r;let a=this.getKonvaLayer().getChildren(S_),c;for(let h=0,m=a.length;h<m;++h)c=!1,r!==void 0&&a[h].id()===r&&(c=!0),a[h].visible(c);this.getKonvaLayer().draw()}getCurrentPosGroup(){if(this.#m===void 0)return;let r=this.getKonvaLayer().getChildren(c=>c.id()===this.#m),a;return r.length===1?r[0]instanceof fe().Group&&(a=r[0]):r.length===0?(a=new(fe()).Group,a.name("position-group"),a.id(this.#m),a.visible(!0),this.getKonvaLayer().add(a)):p.warn("Unexpected number of draw position groups"),a}getGroup(r){let a=this.getKonvaLayer().findOne("#"+r);return a===void 0&&p.warn("Cannot find node with id: "+r),a}addEventListener(r,a){this.#v.add(r,a)}removeEventListener(r,a){this.#v.remove(r,a)}#E=r=>{r.srclayerid=this.getId(),r.dataid=this.#f,this.#v.fireEvent(r)};#T(r){let a=2/r.x,c=2/r.y,h=this.#t.find("Label");for(let m=0;m<h.length;++m)h[m].scale({x:a,y:c})}}class tu{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getName(){return"AddAnnotation-"+this.#e.id}execute(){this.#t.addAnnotation(this.#e)}undo(){this.#t.removeAnnotation(this.#e.id)}}class yg{#e;#t;constructor(r,a){this.#e=r,this.#t=a}getName(){return"RemoveAnnotation-"+this.#e.id}execute(){this.#t.removeAnnotation(this.#e.id)}undo(){this.#t.addAnnotation(this.#e)}}class ws{#e;#t;#n;#i;constructor(r,a,c,h){this.#e=r,this.#t=h,this.#n=a,this.#i=c}getName(){return"UpdateAnnotation-"+this.#e.id}execute(){let r=Object.keys(this.#i);for(let a of r)this.#e[a]=this.#i[a];this.#t.updateAnnotation(this.#e,r)}undo(){let r=Object.keys(this.#n);for(let a of r)this.#e[a]=this.#n[a];this.#t.updateAnnotation(this.#e,r)}}var tR=s(324),nu=s.n(tR);class Xl{constructor(r,a){this.pointArray=r?r.slice():[],this.controlPointIndexArray=a?a.slice():[]}getPoint(r){return this.pointArray[r]}isControlPoint(r){let a=this.pointArray.indexOf(r);if(a!==-1)return this.controlPointIndexArray.indexOf(a)!==-1;throw new Error("Error: isControlPoint called with not in list point.")}getLength(){return this.pointArray.length}addPoint(r){this.pointArray.push(r)}addControlPoint(r){let a=this.pointArray.indexOf(r);if(a===-1)throw new Error("Cannot mark a non registered point as control point.");this.controlPointIndexArray.push(a)}addPoints(r){this.pointArray=this.pointArray.concat(r)}appenPath(r){let a=this.pointArray.length;this.pointArray=this.pointArray.concat(r.pointArray);let c=[];for(let h=0;h<r.controlPointIndexArray.length;++h)c[h]=r.controlPointIndexArray[h]+a;this.controlPointIndexArray=this.controlPointIndexArray.concat(c)}}class nR{constructor(r,a){this.bucketCount=1<<r,this.mask=this.bucketCount-1,this.size=0,this.loc=0,this.cost=a!==void 0?a:function(c){return c},this.buckets=this.buildArray(this.bucketCount)}push(r){let a=this.getBucket(r);r.next=this.buckets[a],this.buckets[a]=r,this.size++}pop(){if(this.size===0)throw new Error("Cannot pop, bucketQueue is empty.");for(;this.buckets[this.loc]===null;)this.loc=(this.loc+1)%this.bucketCount;let r=this.buckets[this.loc];return this.buckets[this.loc]=r.next,r.next=null,this.size--,r}remove(r){if(!r)return!1;let a=this.getBucket(r),c=this.buckets[a];for(;c!==null&&(c.next===null||r.x!==c.next.x||r.y!==c.next.y);)c=c.next;return c!==null&&(c.next=c.next.next,this.size--,!0)}isEmpty(){return this.size===0}getBucket(r){return this.cost(r)&this.mask}buildArray(r){let a=new Array(r);for(let c=0;c<a.length;c++)a[c]=null;return a}}let iR=2/(3*Math.PI);function vg(u,r,a,c,h){let m=u[c][a],v=r[c][a],S=Math.sqrt(m*m+v*v);S=Math.max(S,1e-100),h.x=m/S,h.y=v/S}class rR{constructor(){this.width=-1,this.height=-1,this.curPoint=null,this.searchGranBits=8,this.searchGran=1<<this.searchGranBits,this.pointsPerPost=500,this.greyscale=null,this.laplace=null,this.gradient=null,this.gradX=null,this.gradY=null,this.parents=null,this.working=!1,this.trained=!1,this.trainingPoints=null,this.edgeWidth=2,this.trainingLength=32,this.edgeGran=256,this.edgeTraining=null,this.gradPointsNeeded=32,this.gradGran=1024,this.gradTraining=null,this.insideGran=256,this.insideTraining=null,this.outsideGran=256,this.outsideTraining=null}getTrainingIdx(r,a){return Math.round((r-1)*a)}getTrainedEdge(r){return this.edgeTraining[this.getTrainingIdx(this.edgeGran,r)]}getTrainedGrad(r){return this.gradTraining[this.getTrainingIdx(this.gradGran,r)]}getTrainedInside(r){return this.insideTraining[this.getTrainingIdx(this.insideGran,r)]}getTrainedOutside(r){return this.outsideTraining[this.getTrainingIdx(this.outsideGran,r)]}setWorking(r){this.working=r}setDimensions(r,a){this.width=r,this.height=a}setData(r){if(this.width===-1||this.height===-1)throw new Error("Dimensions have not been set.");this.greyscale=function(c,h,m){let v={data:[]};for(let S=0;S<m;S++){v.data[S]=[];for(let _=0;_<h;_++){let E=4*(S*h+_);v.data[S][_]=(c[E]+c[E+1]+c[E+2])/765}}return v.dx=function(S,_){return S+1===this.data[_].length&&S--,this.data[_][S+1]-this.data[_][S]},v.dy=function(S,_){return _+1===this.data.length&&_--,this.data[_][S]-this.data[_+1][S]},v.gradMagnitude=function(S,_){let E=this.dx(S,_),I=this.dy(S,_);return Math.sqrt(E*E+I*I)},v.laplace=function(S,_){let E=-16*this.data[_][S];return E+=this.data[_-2][S],E+=this.data[_-1][S-1]+2*this.data[_-1][S]+this.data[_-1][S+1],E+=this.data[_][S-2]+2*this.data[_][S-1]+2*this.data[_][S+1]+this.data[_][S+2],E+=this.data[_+1][S-1]+2*this.data[_+1][S]+this.data[_+1][S+1],E+=this.data[_+2][S],E},v}(r,this.width,this.height),this.laplace=function(c){let h=[];h[0]=[],h[1]=[];for(let m=1;m<c.data.length;m++)h[0][m]=1,h[1][m]=1;for(let m=2;m<c.data.length-2;m++){h[m]=[],h[m][0]=1,h[m][1]=1;for(let v=2;v<c.data[m].length-2;v++)h[m][v]=c.laplace(v,m)>.33?0:1;h[m][c.data[m].length-2]=1,h[m][c.data[m].length-1]=1}h[c.data.length-2]=[],h[c.data.length-1]=[];for(let m=1;m<c.data.length;m++)h[c.data.length-2][m]=1,h[c.data.length-1][m]=1;return h}(this.greyscale),this.gradient=function(c){let h=[],m=0,v=0,S=0;for(S=0;S<c.data.length-1;S++){for(h[S]=[],v=0;v<c.data[S].length-1;v++)h[S][v]=c.gradMagnitude(v,S),m=Math.max(h[S][v],m);h[S][c.data[S].length-1]=h[S][c.data.length-2]}h[c.data.length-1]=[];for(let _=0;_<h[0].length;_++)h[c.data.length-1][_]=h[c.data.length-2][_];for(S=0;S<h.length;S++)for(v=0;v<h[S].length;v++)h[S][v]=1-h[S][v]/m;return h}(this.greyscale),this.gradX=function(c){let h=[];for(let m=0;m<c.data.length;m++){h[m]=[];for(let v=0;v<c.data[m].length-1;v++)h[m][v]=c.dx(v,m);h[m][c.data[m].length-1]=h[m][c.data[m].length-2]}return h}(this.greyscale),this.gradY=function(c){let h=[];for(let m=0;m<c.data.length-1;m++){h[m]=[];for(let v=0;v<c.data[m].length;v++)h[m][v]=c.dy(v,m)}h[c.data.length-1]=[];for(let m=0;m<c.data[0].length;m++)h[c.data.length-1][m]=h[c.data.length-2][m];return h}(this.greyscale);let a=function(c,h,m,v){let S={inside:[],outside:[]},_={x:-1,y:-1};for(let E=0;E<h.length;E++){S.inside[E]=[],S.outside[E]=[];for(let I=0;I<h[E].length;I++){vg(h,m,I,E,_);let R=Math.round(I+c*_.y),P=Math.round(E-c*_.x),U=Math.round(I-c*_.y),H=Math.round(E+c*_.x);R=Math.max(Math.min(R,h[E].length-1),0),U=Math.max(Math.min(U,h[E].length-1),0),P=Math.max(Math.min(P,h.length-1),0),H=Math.max(Math.min(H,h.length-1),0),S.inside[E][I]=v.data[P][R],S.outside[E][I]=v.data[H][U]}}return S}(this.edgeWidth,this.gradX,this.gradY,this.greyscale);this.inside=a.inside,this.outside=a.outside,this.edgeTraining=[],this.gradTraining=[],this.insideTraining=[],this.outsideTraining=[]}findTrainingPoints(r){let a=[];if(this.parents!==null)for(let c=0;c<this.trainingLength&&r;c++)a.push(r),r=this.parents[r.y][r.x];return a}resetTraining(){this.trained=!1}doTraining(r){if(this.trainingPoints=this.findTrainingPoints(r),this.trainingPoints.length<8)return;let a=[];this.calculateTraining(a,this.edgeGran,this.greyscale,this.edgeTraining),this.calculateTraining(a,this.gradGran,this.gradient,this.gradTraining),this.calculateTraining(a,this.insideGran,this.inside,this.insideTraining),this.calculateTraining(a,this.outsideGran,this.outside,this.outsideTraining),this.trainingPoints.length<this.gradPointsNeeded&&this.addInStaticGrad(this.trainingPoints.length,this.gradPointsNeeded),this.trained=!0}calculateTraining(r,a,c,h){let m=0;for(r.length=a,m=0;m<a;m++)r[m]=0;let v=1;for(m=0;m<this.trainingPoints.length;m++){let S=this.trainingPoints[m],_=this.getTrainingIdx(a,c[S.y][S.x]);r[_]+=1,v=Math.max(v,r[_])}for(m=0;m<a;m++)r[m]=1-r[m]/v;(function(S,_){_[0]=.4*S[0]+.5*S[1]+.1*S[1],_[1]=.25*S[0]+.4*S[1]+.25*S[2]+.1*S[3];for(let I=2;I<S.length-2;I++)_[I]=.05*S[I-2]+.25*S[I-1]+.4*S[I]+.25*S[I+1]+.05*S[I+2];let E=S.length;_[E-2]=.25*S[E-1]+.4*S[E-2]+.25*S[E-3]+.1*S[E-4],_[E-1]=.4*S[E-1]+.5*S[E-2]+.1*S[E-3]})(r,h)}addInStaticGrad(r,a){for(let c=0;c<this.gradGran;c++)this.gradTraining[c]=Math.min(this.gradTraining[c],1-c*(a-r)/(a*this.gradGran))}gradDirection(r,a,c,h){return function(m,v,S,_,E,I){let R={x:-1,y:-1},P={x:-1,y:-1};vg(m,v,S,_,R),vg(m,v,E,I,P);let U=R.y*(E-S)-R.x*(I-_),H=P.y*(E-S)-P.x*(I-_);return U<0&&(U=-U,H=-H),S!==E&&_!==I&&(U*=Math.SQRT1_2,H*=Math.SQRT1_2),iR*(Math.acos(U)+Math.acos(H))}(this.gradX,this.gradY,r,a,c,h)}dist(r,a,c,h){let m=this.gradient[h][c];r!==c&&a!==h||(m*=Math.SQRT1_2);let v=this.laplace[h][c],S=this.gradDirection(r,a,c,h);return this.trained?.3*this.getTrainedGrad(m)+.3*v+.1*(S+this.getTrainedEdge(this.greyscale.data[a][r])+this.getTrainedInside(this.inside[a][r])+this.getTrainedOutside(this.outside[a][r])):.43*m+.43*v+.11*S}adj(r){let a=[],c=Math.max(r.x-1,0),h=Math.max(r.y-1,0),m=Math.min(r.x+1,this.greyscale.data[0].length-1),v=Math.min(r.y+1,this.greyscale.data.length-1),S=0;for(let _=h;_<=v;_++)for(let E=c;E<=m;E++)E===r.x&&_===r.y||(a[S++]={x:E,y:_});return a}#e=r=>Math.round(this.searchGran*this.cost[r.y][r.x]);setPoint(r){this.setWorking(!0),this.curPoint=r;let a=0,c=0;for(this.visited=[],c=0;c<this.height;c++)for(this.visited[c]=[],a=0;a<this.width;a++)this.visited[c][a]=!1;for(this.parents=[],c=0;c<this.height;c++)this.parents[c]=[];for(this.cost=[],c=0;c<this.height;c++)for(this.cost[c]=[],a=0;a<this.width;a++)this.cost[c][a]=Number.MAX_VALUE;this.cost[r.y][r.x]=0,this.pq=new nR(this.searchGranBits,this.#e),this.pq.push(r)}doWork(){if(!this.working)return;this.timeout=null;let r=0,a=[];for(;!this.pq.isEmpty()&&r<this.pointsPerPost;){let c=this.pq.pop();a.push(c),a.push(this.parents[c.y][c.x]),this.visited[c.y][c.x]=!0;let h=this.adj(c);for(let m=0;m<h.length;m++){let v=h[m],S=this.cost[c.y][c.x]+this.dist(c.x,c.y,v.x,v.y);S<this.cost[v.y][v.x]&&(this.cost[v.y][v.x]!==Number.MAX_VALUE&&this.pq.remove(v),this.cost[v.y][v.x]=S,this.parents[v.y][v.x]=c,this.pq.push(v))}r++}return a}}let Uo={labelText:{arrow:{"*":""},circle:{"*":"{surface}"},ellipse:{"*":"{surface}"},protractor:{"*":"{angle}"},rectangle:{"*":"{surface}"},roi:{"*":""},ruler:{"*":"{length}"}}};class Is{#e;constructor(r){this.#e=r}getPosition(r){let a=r.labelPosition;return a===void 0&&(a=this.#e(r)),a}create(r,a){let c=new(fe()).Text({fontSize:a.getFontSize(),fontFamily:a.getFontFamily(),fill:r.colour,padding:a.getTextPadding(),shadowColor:a.getShadowLineColour(),shadowOffset:a.getShadowOffset(),name:"text"}),h=r.getText();c.setText(h);let m=a.applyZoomScale(1),v={x:2*m.x,y:2*m.y},S=this.getPosition(r),_=new(fe()).Label({x:S.getX(),y:S.getY(),scale:v,visible:h.length!==0,name:"label"});return _.add(c),_.add(new(fe()).Tag({fill:r.colour,opacity:a.getTagOpacity()})),_}updatePosition(r,a){let c=a.getChildren(function(m){return m.name()==="label"})[0];if(!(c instanceof fe().Label))return;let h=this.getPosition(r);c.position({x:h.getX(),y:h.getY()})}getLabelAnchorsPosition(r){let a=r.x(),c=r.y(),h=r.width()*r.scale().x,m=r.height()*r.scale().y;return[new V(a+h/2,c),new V(a,c+m/2),new V(a+h/2,c+m),new V(a+h,c+m/2)]}getClosestPoints(r,a){let c=r[0].getDistance(a[0]),h=r[0],m=a[0];for(let v of r)for(let S of a){let _=v.getDistance(S);_<c&&(c=_,h=v,m=S)}return[h,m]}getConnector(r,a,c){let h=this.getLabelAnchorsPosition(a),m=this.getClosestPoints(r,h);return new(fe()).Line({points:[m[0].getX(),m[0].getY(),m[1].getX(),m[1].getY()],stroke:a.getText().fill(),strokeWidth:c.getStrokeWidth(),strokeScaleEnabled:!1,visible:a.visible(),dash:[10,7],name:"connector"})}updateConnector(r,a){let c=r.getChildren(function(S){return S.name()==="label"})[0];if(!(c instanceof fe().Label))return;let h=this.getLabelAnchorsPosition(c),m=this.getClosestPoints(a,h),v=r.getChildren(function(S){return S.name()==="connector"})[0];v instanceof fe().Line&&v.points([m[0].getX(),m[0].getY(),m[1].getX(),m[1].getY()])}updateContent(r,a){let c=a.getChildren(function(m){return m.name()==="label"})[0];if(!(c instanceof fe().Label))return;let h=r.getText();c.getText().setText(h),c.visible()&&c.visible(h.length!==0)}}class oR{#e=0;#t=0;getMin(){return this.#e}setMin(r){this.#e=r}getMax(){return this.#t}setMax(r){this.#t=r}getName(){return"Threshold"}#n=null;setOriginalImage(r){this.#n=r}getOriginalImage(){return this.#n}update(){let r=this.getOriginalImage(),a=r.getDataRange().min;return r.transform(c=>c<this.getMin()||c>this.getMax()?a:c)}}class sR{getName(){return"Sharpen"}#e=null;setOriginalImage(r){this.#e=r}getOriginalImage(){return this.#e}update(){return this.getOriginalImage().convolute2D([0,-1,0,-1,5,-1,0,-1,0])}}class aR{getName(){return"Sobel"}#e=null;setOriginalImage(r){this.#e=r}getOriginalImage(){return this.#e}update(){let r=this.getOriginalImage(),a=r.convolute2D([1,0,-1,2,0,-2,1,0,-1]),c=r.convolute2D([1,2,1,0,0,0,-1,-2,-1]);return a.compose(c,function(h,m){return Math.sqrt(h*h+m*m)})}}class Sg{#e;#t;#n;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c}getName(){return"Filter-"+this.#e.getName()}execute(){this.#n.setImage(this.#t,this.#e.update()),this.#n.render(this.#t);let r={type:"filterrun",id:this.getName(),dataId:this.#t};this.onExecute(r)}undo(){this.#n.setImage(this.#t,this.#e.getOriginalImage()),this.#n.render(this.#t);let r={type:"filterundo",id:this.getName(),dataid:this.#t};this.onUndo(r)}onExecute(r){}onUndo(r){}}let D_={},Zl={},lR={WindowLevel:class{#e;#t=!1;#n;#i;constructor(u){this.#e=u,this.#i=new Yl(u)}#r(u,r){this.#e.getLayerGroupByDivId(r).getActiveViewLayer().getViewController().isMonochrome()&&(this.#t=!0,this.#n=u)}#o(u,r){if(!this.#t)return;let a=this.#e.getLayerGroupByDivId(r).getActiveViewLayer().getViewController(),c=u.getX()-this.#n.getX(),h=this.#n.getY()-u.getY(),m=a.getImageRescaledDataRange(),v=.01*(m.max-m.min),S=a.getWindowLevel().center,_=a.getWindowLevel().width,E=S+Math.round(h*v),I=_+Math.round(c*v);var R;I=(R=I)<1?1:R;let P=new g(E,I);a.setWindowLevel(P),this.#n=u}#s(){this.#t&&(this.#t=!1)}mousedown=u=>{let r=Tn(u),a=Pt(u);this.#r(r,a.groupDivId)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#o(r,a.groupDivId)};mouseup=u=>{this.#s()};mouseout=u=>{this.#s()};touchstart=u=>{let r=fi(u),a=Pt(u);this.#r(r[0],a.groupDivId)};touchmove=u=>{let r=fi(u),a=Pt(u);this.#o(r[0],a.groupDivId)};touchend=u=>{this.#s()};dblclick=u=>{let r=Pt(u),a=Tn(u),c=this.#e.getLayerGroupByDivId(r.groupDivId).getActiveViewLayer(),h=c.displayToPlaneIndex(a),m=c.getViewController();if(!m.isMonochrome())return;let v=this.#e.getData(c.getDataId()).image,S=new g(v.getRescaledValueAtIndex(m.getCurrentIndex().getWithNew2D(h.get(0),h.get(1))),m.getWindowLevel().width);m.setWindowLevel(S)};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="WindowLevel",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Scroll:class{#e;#t=!1;#n;#i;#r;#o=!1;#s;constructor(u){this.#e=u,this.#i=new Yl(u)}#a(u,r){this.#d();let a=this.#e.getLayerGroupByDivId(r).getActiveViewLayer(),c=a.getViewController();c.isPlaying()&&c.stop(),this.#t=!0,this.#n=u;let h=a.displayToPlanePos(u),m=c.getPositionFromPlanePoint(h);c.setCurrentPosition(m)}#c(u,r){if(!this.#t)return void(this.#o&&this.#u(u,r));let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveViewLayer().getViewController(),h,m=u.getY()-this.#n.getY(),v=Math.abs(m)>15;v&&a.canScroll()&&(h=m>0?c.getDecrementScrollPosition():c.getIncrementScrollPosition());let S=u.getX()-this.#n.getX(),_=Math.abs(S)>15;_&&a.moreThanOne(3)&&(h=S>0?c.getIncrementPosition(3):c.getDecrementPosition(3)),h!==void 0&&a.isPositionInBounds(h)&&c.setCurrentPosition(h),(_||v)&&(this.#n=u)}#l(){this.#t&&(this.#t=!1)}mousedown=u=>{let r=Tn(u),a=Pt(u);this.#a(r,a.groupDivId)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#c(r,a.groupDivId)};mouseup=u=>{this.#l()};mouseout=u=>{this.#l(),this.#d()};touchstart=u=>{this.#r=setTimeout(()=>{this.dblclick(u)},500);let r=fi(u),a=Pt(u);this.#a(r[0],a.groupDivId)};touchmove=u=>{this.#r!==null&&(clearTimeout(this.#r),this.#r=null);let r=fi(u),a=Pt(u);this.#c(r[0],a.groupDivId)};touchend=u=>{this.#r!==null&&(clearTimeout(this.#r),this.#r=null),this.#l()};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="Scroll",this.#e.onKeydown(u)};dblclick=u=>{let r=Pt(u);this.#e.getLayerGroupByDivId(r.groupDivId).getActiveViewLayer().getViewController().play()};#u(u,r){let a=this.#e.getLayerGroupByDivId(r);this.#s=r,a.showTooltip(u)}#d(){this.#s!==void 0&&(this.#e.getLayerGroupByDivId(this.#s).removeTooltipDiv(),this.#s=void 0)}activate(u){u||this.#d()}setFeatures(u){u.displayTooltip!==void 0&&(this.#o=u.displayTooltip)}init(){}},ZoomAndPan:class{#e;#t=!1;#n;#i;#r;#o;constructor(u){this.#e=u}#s(u){this.#t=!0,this.#n=u,this.#i=!1}#a=u=>{this.#t=!0,this.#n=u[0],this.#i=!1,this.#r=new sn(u[0],u[1]),this.#o=this.#r.getMidpoint()};#c(u,r){if(!this.#t)return;this.#i=!0;let a=u.getX()-this.#n.getX(),c=u.getY()-this.#n.getY(),h=this.#e.getLayerGroupByDivId(r),m=h.getActiveViewLayer(),v=m.getViewController(),S=m.displayToPlaneScale(new V(a,c)),_=v.getOffset3DFromPlaneOffset({x:S.getX(),y:S.getY()});h.addTranslation({x:_.getX(),y:_.getY(),z:_.getZ()}),h.draw(),this.#n=u}#l=(u,r)=>{if(!this.#t)return;this.#i=!0;let a=new sn(u[0],u[1]).getLength()/this.#r.getLength(),c=this.#e.getLayerGroupByDivId(r),h=c.getActiveViewLayer(),m=h.getViewController();if(a===1){let v=u[0].getY()-this.#n.getY();if(Math.abs(v)<15)return;if(c.canScroll()){let S;S=v>0?m.getIncrementScrollPosition():m.getDecrementScrollPosition(),S!==void 0&&c.isPositionInBounds(S)&&m.setCurrentPosition(S)}}else{let v=(a-1)/10;if(Math.abs(v)%.1<=.05&&this.#o!==void 0){let S=h.displayToMainPlanePos(this.#o),_=m.getPlanePositionFromPlanePoint(S);c.addScale(v,_),c.draw()}}};#u(u,r){let a=this.#e.getLayerGroupByDivId(r).getActiveViewLayer(),c=a.getViewController(),h=a.displayToPlanePos(u),m=c.getPositionFromPlanePoint(h);c.setCurrentPosition(m)}#d(){this.#t&&(this.#t=!1)}mousedown=u=>{let r=Tn(u);this.#s(r)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#c(r,a.groupDivId)};mouseup=u=>{if(!this.#i){let r=Tn(u),a=Pt(u);this.#u(r,a.groupDivId)}this.#d()};mouseout=u=>{this.#d()};touchstart=u=>{let r=fi(u);r.length===1?this.#s(r[0]):r.length===2&&this.#a(r)};touchmove=u=>{let r=fi(u),a=Pt(u);r.length===1?this.#c(r[0],a.groupDivId):r.length===2&&this.#l(r,a.groupDivId)};touchend=u=>{if(!this.#i){let r=Tn(u),a=Pt(u);this.#u(r,a.groupDivId)}this.#d()};wheel=u=>{u.preventDefault();let r=-u.deltaY/500,a=Pt(u),c=Tn(u),h=this.#e.getLayerGroupByDivId(a.groupDivId),m=h.getActiveViewLayer(),v=m.getViewController(),S=m.displayToMainPlanePos(c),_=v.getPlanePositionFromPlanePoint(S);h.addScale(r,_),h.draw()};keydown=u=>{u.context="ZoomAndPan",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Opacity:class{#e;#t=!1;#n;#i;constructor(u){this.#e=u,this.#i=new Yl(u)}#r(u){this.#t=!0,this.#n=u}#o(u,r){if(!this.#t)return;let a=u.getX()-this.#n.getX();if(Math.abs(a)>15){let c=this.#e.getLayerGroupByDivId(r).getActiveViewLayer(),h=c.getOpacity();c.setOpacity(h+a/200),c.draw(),this.#n=u}}#s(){this.#t&&(this.#t=!1)}mousedown=u=>{let r=Tn(u);this.#r(r)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#o(r,a.groupDivId)};mouseup=u=>{this.#s()};mouseout=u=>{this.#s()};touchstart=u=>{let r=fi(u);this.#r(r[0])};touchmove=u=>{let r=fi(u),a=Pt(u);this.#o(r[0],a.groupDivId)};touchend=u=>{this.#s()};wheel=u=>{this.#i.wheel(u)};keydown=u=>{u.context="Opacity",this.#e.onKeydown(u)};activate(u){}init(){}setFeatures(u){}},Draw:class{#e;#t;#n;#i=!1;#r=null;#o=null;#s=null;#a;#c=[];#l=null;#u=!0;#d=[];#f;#h=!1;#m={};#p=!1;#y=[];constructor(u){this.#e=u,this.#t=new Yl(u),this.#f=new __(u,this.#x),this.#n=u.getStyle()}#v(u,r){let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveDrawLayer();if(c===void 0){let v=a.getActiveViewLayer().getDataId(),S=this.#e.getData(v).image.getMeta().SeriesInstanceUID;if(this.#d.includes(S))return void this.#x({type:"warn",message:"Cannot create draw layer, data is in black list"});let _=this.#e.createAnnotationData(v);this.#e.addAndRenderAnnotationData(_,r,v),c=a.getActiveDrawLayer(),c.setShapeHandler(this.#f),a.setActiveDrawLayerByDataId(c.getDataId())}let h=c.getDrawController().getAnnotationGroup(),m=c.getKonvaStage();if(this.#n.setZoomScale(m.scale()),h.isEditable()){let v=m.getIntersection({x:u.getX(),y:u.getY()});v?this.#g(c,v):this.#S(a,u)}}#S(u,r){this.#f.disableAndResetEditor(),this.#b();let a=u.getActiveViewLayer();this.#l=a.displayToPlanePos(r),this.#c.push(this.#l)}#b(){this.#i=!0,this.#o=new this.#r[this.#a],this.#c=[]}#_(){this.#i=!1,this.#c=[]}#g(u,r){let a=r.getParent();r instanceof fe().Tag&&(a=a.getParent());let c=a.find(".shape")[0];c instanceof fe().Shape&&(this.#x({type:"annotationselect",annotationid:a.id(),dataid:u.getDataId()}),this.#f.setEditorShape(c,u))}#D(u,r){let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveViewLayer().displayToPlanePos(u);(Math.abs(c.getX()-this.#l.getX())>0||Math.abs(c.getY()-this.#l.getY())>0)&&(this.#p&&this.#c.pop(),this.#l=c,this.#p=!0,this.#c.push(this.#l),this.#w(this.#c,a))}#I(u){if(this.#c.length!==0){if(this.#c.length===this.#o.getNPoints()){let r=this.#e.getLayerGroupByDivId(u);this.#C(this.#c,r),this.#_()}this.#p=!1}else p.warn("Draw mouseup but no points...")}mousedown=u=>{if(this.#i)return;let r=Tn(u),a=Pt(u);this.#v(r,a.groupDivId)};mousemove=u=>{if(!this.#i)return;let r=Tn(u),a=Pt(u);this.#D(r,a.groupDivId)};mouseup=u=>{if(!this.#i)return;let r=Pt(u);this.#I(r.groupDivId)};dblclick=u=>{if(this.#o&&this.#o.getNPoints()!==void 0||!this.#i)return;if(this.#c.length===0)return void p.warn("Draw dblclick but no points...");let r=Pt(u),a=this.#e.getLayerGroupByDivId(r.groupDivId);this.#C(this.#c,a),this.#_()};mouseout=u=>{if(!this.#i)return;let r=Pt(u);this.#I(r.groupDivId)};touchstart=u=>{if(this.#i)return;let r=fi(u),a=Pt(u);this.#v(r[0],a.groupDivId)};touchmove=u=>{if(!this.#i)return;let r=Pt(u),a=fi(u),c=this.#e.getLayerGroupByDivId(r.groupDivId),h=c.getActiveViewLayer().displayToPlanePos(a[0]);(Math.abs(h.getX()-this.#l.getX())>0||Math.abs(h.getY()-this.#l.getY())>0)&&(this.#c.length!==1&&this.#c.pop(),this.#l=h,this.#c.push(this.#l),this.#c.length<this.#o.getNPoints()&&(clearTimeout(this.timer),this.timer=setTimeout(()=>{this.#c.push(this.#l)},this.#o.getTimeout())),this.#w(this.#c,c))};touchend=u=>{this.dblclick(u)};wheel=u=>{this.#u&&this.#t.wheel(u)};keydown=u=>{this.#i||(u.context="Draw",this.#e.onKeydown(u));let r=this.#f.getEditorAnnotation();if((u.key==="Delete"||u.key==="Backspace")&&r!==void 0){let a=this.#e.getActiveLayerGroup().getActiveDrawLayer().getDrawController(),c=new yg(r,a);this.#e.addToUndoStack(c),c.execute(),this.#f.onMouseOutShapeGroup()}if(u.key==="Escape"&&this.#s!==null){let a=this.#s.getLayer();this.#s.destroy(),this.#s=null,this.#_(),a.draw()}};#w(u,r){this.#s&&(this.#s.destroy(),this.#s=null);let a=r.getActiveDrawLayer(),c=a.getDrawController(),h=a.getKonvaLayer(),m=r.getActiveViewLayer().getViewController();if(this.#h){let _=["#ffff80","#ff80ff","#80ffff","#80ff80","8080ff","ff8080"],E=a.getId(),I=E.substring(E.length-1),R=_[parseInt(I,10)-1];R!==void 0&&this.#n.setLineColour(R)}let v=new Es,S=c.getAnnotationGroup().getColour();v.colour=S!==void 0?S:this.#n.getLineColour(),v.init(m),this.#o.setAnnotationMathShape(v,u),this.#s=this.#o.createShapeGroup(v,this.#n),a.setLabelVisibility(this.#s),this.#s.getChildren(ko)[0].listening(!1),h.listening(!1),h.add(this.#s),h.draw()}#C(u,r){this.#s&&(this.#s.destroy(),this.#s=null);let a=r.getActiveDrawLayer(),c=a.getKonvaLayer(),h=a.getDrawController(),m=r.getActiveViewLayer().getViewController(),v=new Es,S=h.getAnnotationGroup().getColour();v.colour=S!==void 0?S:this.#n.getLineColour(),v.id=Qd(),v.init(m),this.#o.setAnnotationMathShape(v,u);let _=new tu(v,h);this.#e.addToUndoStack(_),_.execute(),c.listening(!0)}#E(u){let r=u.getId();return this.#y[r]===void 0&&(this.#y[r]=()=>{u.activateCurrentPositionShapes(!0)}),this.#y[r]}#T(u,r){u.setShapeHandler(this.#f),u.activateCurrentPositionShapes(r),r?this.#e.addEventListener("positionchange",this.#E(u)):this.#e.removeEventListener("positionchange",this.#E(u))}activate(u){u||this.#f.onMouseOutShapeGroup();let r=this.#e.getDrawLayers();for(let a of r)a!==void 0&&this.#T(a,u);this.#e.addEventListener("drawlayeradd",a=>{let c=this.#e.getDrawLayers(function(h){return h.getId()===a.layerid});c.length===1&&this.#T(c[0],u)})}setOptions(u){this.#r=u}getOptionsType(){return"factory"}setFeatures(u){if(u.autoShapeColour!==void 0&&(this.#h=u.autoShapeColour),u.shapeColour!==void 0&&(this.#n.setLineColour(u.shapeColour),this.#h=!1),u.shapeName!==void 0){if(!this.hasShape(u.shapeName))throw new Error("Unknown shape: '"+u.shapeName+"'");this.#a=u.shapeName}u.mouseOverCursor!==void 0&&this.#f.storeMouseOverCursor(u.mouseOverCursor),u.withScroll!==void 0&&(this.#u=u.withScroll),u.blacklist!==void 0&&(this.#d=u.blacklist)}init(){}getEventNames(){return["annotationupdate","annotationselect","warn"]}addEventListener(u,r){this.#m[u]===void 0&&(this.#m[u]=[]),this.#m[u].push(r)}removeEventListener(u,r){if(this.#m[u]!==void 0)for(let a=0;a<this.#m[u].length;++a)this.#m[u][a]===r&&this.#m[u].splice(a,1)}#x=u=>{if(this.#m[u.type]!==void 0)for(let r=0;r<this.#m[u.type].length;++r)this.#m[u.type][r](u)};hasShape(u){return this.#r[u]!==void 0}},Filter:class{#e;constructor(u){this.#e=u}#t=null;#n=0;#i=new ii;activate(u){for(let r in this.#t)u?(this.#t[r].addEventListener("filterrun",this.#r),this.#t[r].addEventListener("filter-undo",this.#r)):(this.#t[r].removeEventListener("filterrun",this.#r),this.#t[r].removeEventListener("filter-undo",this.#r))}setOptions(u){this.#t={};for(let r in u)this.#t[r]=new u[r](this.#e)}getOptionsType(){return"instance"}init(){for(let u in this.#t)this.#t[u].init()}keydown=u=>{u.context="Filter",this.#e.onKeydown(u)};getEventNames(){return["filterrun","filterundo"]}addEventListener(u,r){this.#i.add(u,r)}removeEventListener(u,r){this.#i.remove(u,r)}#r=u=>{this.#i.fireEvent(u)};getSelectedFilter(){return this.#n}setFeatures(u){if(u.filterName!==void 0){if(!this.hasFilter(u.filterName))throw new Error("Unknown filter: '"+u.filterName+"'");this.#n&&this.#n.activate(!1),this.#n=this.#t[u.filterName],this.#n.activate(!0)}if(u.run!==void 0&&u.run){let r={};u.runArgs!==void 0&&(r=u.runArgs),this.getSelectedFilter().run(r)}}getFilterList(){return this.#t}hasFilter(u){return this.#t[u]}},Floodfill:class{#e;constructor(u){this.#e=u}#t=5;#n=0;#i=2e3;#r=null;#o=null;#s=10;#a=null;#c=!1;#l;#u;#d=null;#f=[];#h=!1;#m=new Jd;#p=new ii;setExtend(u){this.#h=u}getExtend(){return this.#h}#y=(u,r)=>{let a=this.#e.getLayerGroupByDivId(r).getActiveViewLayer().displayToPlaneIndex(u);return{x:a.get(0),y:a.get(1)}};#v(u,r,a){this.#f=[];let c={data:this.#r.data,width:this.#r.width,height:this.#r.height,bytes:4};this.#o=nu().floodFill(c,u.x,u.y,r),this.#o=nu().gaussBlurOnlyBorder(this.#o,this.#t);let h=nu().traceContours(this.#o);if(h=nu().simplifyContours(h,this.#n,this.#i),h.length>0&&h[0].points[0].x){if(a)return h[0].points;for(let m=0,v=h[0].points.length;m<v;m++)this.#f.push(new V(h[0].points[m].x,h[0].points[m].y));return this.#f}return[]}#S(u,r,a){if(this.#d=this.#v(u,r,!1),this.#d.length!==0){let c=a.getActiveDrawLayer().getDrawController(),h=new zi(this.#d),m;if(this.#l===void 0){this.#l=new Es,this.#l.colour=this.#m.getLineColour(),this.#l.id=Qd();let v=a.getActiveViewLayer().getViewController();this.#l.init(v),this.#l.mathShape=h,m=new tu(this.#l,c)}else{let v=this.#l.mathShape;m=new ws(this.#l,{mathShape:v},{mathShape:h},c)}this.#e.addToUndoStack(m),m.execute()}return this.#d.length!==0}extend(u,r,a){if(!this.#u)throw"'initialpoint' not found. User must click before use extend!";let c=a.getActiveViewLayer().getViewController(),h=c.getCurrentIndex(),m=c.getImageSize(),v=this.#a||this.#s;for(let S=h.get(2),_=r||m.get(2);S<_&&this.#S(this.#u,v,a);S++)c.incrementIndex(2);c.setCurrentPosition(h);for(let S=h.get(2),_=u||0;S>_&&this.#S(this.#u,v,a);S--)c.decrementIndex(2);c.setCurrentPosition(h)}onThresholdChange(u){}#b(u,r){let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveViewLayer(),h=a.getActiveDrawLayer();if(h===void 0){let m=a.getActiveViewLayer().getDataId(),v=this.#e.createAnnotationData(m);this.#e.addAndRenderAnnotationData(v,r,m),h=a.getActiveDrawLayer(),a.setActiveDrawLayerByDataId(h.getDataId())}this.#r=c.getImageData(),this.#r?(this.#m.setZoomScale(h.getKonvaLayer().getAbsoluteScale()),this.#c=!0,this.#u=this.#y(u,r),this.#S(this.#u,this.#s,a),this.onThresholdChange(this.#s)):p.error("No image found")}#_(u,r){if(!this.#c)return;let a=this.#y(u,r);this.#a=Math.round(Math.sqrt(Math.pow(this.#u.x-a.x,2)+Math.pow(this.#u.y-a.y,2))/2),this.#a=this.#a<this.#s?this.#s:this.#a-this.#s,this.#S(this.#u,this.#a,this.#e.getLayerGroupByDivId(r)),this.onThresholdChange(this.#a)}#g(){this.#c&&(this.#c=!1)}mousedown=u=>{let r=Tn(u),a=Pt(u);this.#b(r,a.groupDivId)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#_(r,a.groupDivId)};mouseup=u=>{this.#g()};mouseout=u=>{this.#g()};touchstart=u=>{let r=fi(u),a=Pt(u);this.#b(r[0],a.groupDivId)};touchmove=u=>{let r=fi(u),a=Pt(u);this.#_(r[0],a.groupDivId)};touchend=u=>{this.#g()};keydown=u=>{u.context="Floodfill",this.#e.onKeydown(u)};activate(u){u&&(this.#m.setBaseScale(this.#e.getBaseScale()),this.setFeatures({shapeColour:this.#m.getLineColour()}))}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(u,r){this.#p.add(u,r)}removeEventListener(u,r){this.#p.remove(u,r)}setFeatures(u){u.shapeColour!==void 0&&this.#m.setLineColour(u.shapeColour)}},Livewire:class{#e;constructor(u){this.#e=u}#t=!1;#n;#i;#r=new Jd;#o=new Xl;#s=new Xl;#a=[];#c=5;#l=new ii;#u(u){let r=u.get(1);for(let a=0;a<r;++a)this.#a[a]=[]}#d(){this.#o=new Xl,this.#s=new Xl}#f=new rR;#h(u,r){let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveViewLayer(),h=c.getViewController().getImageSize(),m=c.displayToPlaneIndex(u);if(this.#t){let v=Math.abs(m.get(0)-this.#n.getX()),S=Math.abs(m.get(1)-this.#n.getY());if(v<this.#c&&S<this.#c)this.#p();else{this.#o=this.#s,this.#u(h);let _={x:m.get(0),y:m.get(1)};this.#f.doTraining(_),this.#o.addControlPoint(this.#s.getPoint(0))}}else{this.#t=!0,this.#n=new V(m.get(0),m.get(1)),this.#d(),this.#u(h);let v=a.getActiveDrawLayer();if(v===void 0){let E=a.getActiveViewLayer().getDataId(),I=this.#e.createAnnotationData(E);this.#e.addAndRenderAnnotationData(I,r,E),v=a.getActiveDrawLayer(),a.setActiveDrawLayerByDataId(v.getDataId())}this.#r.setZoomScale(v.getKonvaLayer().getAbsoluteScale());let S={x:m.get(0),y:m.get(1)};this.#f.doTraining(S);let _=new V(m.get(0),m.get(1));this.#o.addPoint(_),this.#o.addControlPoint(_)}}#m(u,r){if(!this.#t)return;let a=this.#e.getLayerGroupByDivId(r),c=a.getActiveViewLayer().displayToPlaneIndex(u),h={x:c.get(0),y:c.get(1)};this.#f.setPoint(h);let m=[],v=!1;for(;!this.#a[h.y][h.x]&&!v;)if(m=this.#f.doWork(),m.length===0)v=!0;else for(let I=0;I<m.length-1;I+=2){let R=m[I],P=m[I+1];this.#a[R.y][R.x]=P}for(this.#s=new Xl,v=!1;h&&!v;)this.#s.addPoint(new V(h.x,h.y)),this.#a[h.y]&&this.#a[h.y][h.x]?h=this.#a[h.y][h.x]:v=!0;this.#s.appenPath(this.#o);let S=a.getActiveDrawLayer().getDrawController(),_=new zi(this.#s.pointArray),E;if(this.#i===void 0){this.#i=new Es,this.#i.colour=this.#r.getLineColour(),this.#i.id=Qd();let I=a.getActiveViewLayer().getViewController();this.#i.init(I),this.#i.mathShape=_,E=new tu(this.#i,S)}else{let I=this.#i.mathShape;E=new ws(this.#i,{mathShape:I},{mathShape:_},S)}this.#e.addToUndoStack(E),E.execute()}#p(){this.#t=!1}mousedown=u=>{let r=Tn(u),a=Pt(u);this.#h(r,a.groupDivId)};mousemove=u=>{let r=Tn(u),a=Pt(u);this.#m(r,a.groupDivId)};mouseup(u){}mouseout=u=>{};dblclick=u=>{this.#p()};touchstart=u=>{let r=fi(u),a=Pt(u);this.#h(r[0],a.groupDivId)};touchmove=u=>{let r=fi(u),a=Pt(u);this.#m(r[0],a.groupDivId)};touchend=u=>{};keydown=u=>{u.context="Livewire",this.#e.onKeydown(u)};activate(u){if(u){let r=this.#e.getActiveLayerGroup().getActiveViewLayer(),a=r.getViewController().getImageSize();this.#f.setDimensions(a.get(0),a.get(1)),this.#f.setData(r.getImageData().data),this.#r.setBaseScale(this.#e.getBaseScale()),this.setFeatures({shapeColour:this.#r.getLineColour()})}}init(){}getEventNames(){return["drawcreate","drawchange","drawmove","drawdelete"]}addEventListener(u,r){this.#l.add(u,r)}removeEventListener(u,r){this.#l.remove(u,r)}setFeatures(u){u.shapeColour!==void 0&&this.#r.setLineColour(u.shapeColour)}}},bg={draw:{ArrowFactory:class{#e="arrow";#t=new Is(this.#l);static supports(u){return u instanceof V}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.referencePoints=[r[1]],u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(c);let h=this.#c(u,r);for(let S of h)a.add(S);let m=this.#t.create(u,r);a.add(m);let v=this.#n(c);return a.add(this.#t.getConnector(v,m,r)),a}#n(u){let r=u.points(),a=u.x(),c=u.y(),h=(r[0]+r[2])/2+a,m=(r[1]+r[3])/2+c;return[new V(h,m)]}#i(u){let r=u.points(),a=u.x(),c=u.y();return[new V(r[0]+a,r[1]+c),new V(r[2]+a,r[3]+c)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#u(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=r.getParent();if(!(a instanceof fe().Group))return;let c=this.#a(a),h=xt(a,0),m=xt(a,1),v=new V(h.x()-c.x(),h.y()-c.y()),S=new V(m.x()-c.x(),m.y()-c.y());u.mathShape=v,u.referencePoints=[S],u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=u.referencePoints[0],h=new sn(a,c),m=h.getBegin(),v=new V(m.getX()+r.x,m.getY()+r.y),S=h.getEnd(),_=new V(S.getX()+r.x,S.getY()+r.y);u.mathShape=v,u.referencePoints=[_],u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){return u[0]}#o(){return Uo.labelText.arrow}#s(u,r){let a=u.mathShape,c=u.referencePoints[0],h=new sn(a,c),m=new(fe()).Line({points:[a.getX(),a.getY(),c.getX(),c.getY()],stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),v=ir(h,a,20,r.getZoomScale()),S=ir(h,c,20,r.getZoomScale());return m.hitFunc(function(_){_.beginPath(),_.moveTo(v.getBegin().getX(),v.getBegin().getY()),_.lineTo(v.getEnd().getX(),v.getEnd().getY()),_.lineTo(S.getEnd().getX(),S.getEnd().getY()),_.lineTo(S.getBegin().getX(),S.getBegin().getY()),_.closePath(),_.fillStrokeShape(m)}),m}#a(u){return eu(u)}#c(u,r){let a=u.mathShape,c=u.referencePoints[0],h=new sn(a,c),m=g_(h,40,20,r.getZoomScale());return[new(fe()).Line({points:[h.getBegin().getX(),h.getBegin().getY(),m.getBegin().getX(),m.getBegin().getY(),m.getEnd().getX(),m.getEnd().getY()],fill:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,closed:!0,name:"shape-triangle"})]}#l(u){return u.mathShape}#u(u,r,a){let c=u.mathShape,h=u.referencePoints[0],m=new sn(c,h),v=r.getParent();if(!(v instanceof fe().Group))return;let S=this.#a(v);S.position({x:0,y:0}),S.points([c.getX(),c.getY(),h.getX(),h.getY()]);let _=v.getChildren(function(H){return H.name()==="shape-triangle"})[0];if(!(_ instanceof fe().Line))return;let E=xt(v,0),I=xt(v,1);switch(r.id()){case"anchor0":E.x(r.x()),E.y(r.y());break;case"anchor1":I.x(r.x()),I.y(r.y());break;default:p.error("Unhandled anchor id: "+r.id())}let R=g_(m,40,20,a.getZoomScale());_.position({x:0,y:0}),_.points([m.getBegin().getX(),m.getBegin().getY(),R.getBegin().getX(),R.getBegin().getY(),R.getEnd().getX(),R.getEnd().getY()]);let P=ir(m,c,20,a.getZoomScale()),U=ir(m,h,20,a.getZoomScale());S.hitFunc(function(H){H.beginPath(),H.moveTo(P.getBegin().getX(),P.getBegin().getY()),H.lineTo(P.getEnd().getX(),P.getEnd().getY()),H.lineTo(U.getEnd().getX(),U.getEnd().getY()),H.lineTo(U.getBegin().getX(),U.getBegin().getY()),H.closePath(),H.fillStrokeShape(S)})}#d(u,r){}#f(u,r){}},CircleFactory:class{#e="circle";#t=new Is(this.#c);static supports(u){return u instanceof Bo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(this.#s(u,r));let h=this.#t.create(u,r);a.add(this.#t.create(u,r));let m=this.#n(c);return a.add(this.#t.getConnector(m,h,r)),a}#n(u){let r=u.x(),a=u.y(),c=u.radius()*Math.sqrt(2)/2;return[new V(r-c,a-c),new V(r+c,a-c),new V(r-c,a+c),new V(r+c,a+c)]}#i(u){let r=u.x(),a=u.y(),c=u.radius();return[new V(r-c,a),new V(r+c,a),new V(r,a+c),new V(r,a-c)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){let r=u.getParent();if(!(r instanceof fe().Group))return;let a=xt(r,0),c=xt(r,1),h=xt(r,2),m=xt(r,3);switch(u.id()){case"anchor0":a.y(c.y());break;case"anchor1":c.y(a.y());break;case"anchor2":h.x(m.x());break;case"anchor3":m.x(h.x());break;default:p.error("Unhandled anchor id: "+u.id())}}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#l(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=u.mathShape,c=new V(a.getCenter().getX(),a.getCenter().getY()),h=new V(r.x(),r.y()),m=c.getDistance(h);u.mathShape=new Bo(c,m),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=a.getCenter(),h=new V(c.getX()+r.x,c.getY()+r.y);u.mathShape=new Bo(h,a.getRadius()),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){let r=Math.abs(u[0].getX()-u[1].getX()),a=Math.abs(u[0].getY()-u[1].getY()),c=Math.round(Math.sqrt(r*r+a*a));return new Bo(u[0],c)}#o(){return Uo.labelText.circle}#s(u,r){let a=u.mathShape;return new(fe()).Circle({x:a.getCenter().getX(),y:a.getCenter().getY(),radius:a.getRadius(),stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let r=u.getChildren(ko)[0];if(r instanceof fe().Circle)return r}#c(u){let r=u.mathShape,a=r.getCenter(),c=r.getRadius();return new V(a.getX()-c,a.getY()+c)}#l(u,r,a){let c=u.mathShape,h=c.getCenter(),m=c.getRadius(),v=r.getParent();if(!(v instanceof fe().Group))return;this.#a(v).radius(m);let S=xt(v,0),_=xt(v,1),E=xt(v,2),I=xt(v,3),R=_.x()<S.x()?-1:1,P=I.y()<E.y()?1:-1;switch(r.id()){case"anchor0":S.x(r.x()),_.x(h.getX()+R*m),E.y(h.getY()+m),I.y(h.getY()-m);break;case"anchor1":_.x(r.x()),S.x(h.getX()-R*m),E.y(h.getY()+m),I.y(h.getY()-m);break;case"anchor2":E.y(r.y()),S.x(h.getX()-m),_.x(h.getX()+m),I.y(h.getY()-P*m);break;case"anchor3":I.y(r.y()),S.x(h.getX()-m),_.x(h.getX()+m),E.y(h.getY()+P*m);break;default:p.error("Unhandled anchor id: "+r.id())}}#u(u,r){let a=u.mathShape,c=0,h=0;r!==void 0&&(c=r.x(),h=r.y());let m=new(fe()).Group;m.name("shadow");let v=a.getRound();for(let S=0;S<v.length;++S){let _=v[S],E=_[0][0],I=_[0][1],R=_[1][0],P=new(fe()).Rect({x:E-c,y:I-h,width:R-E,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});m.add(P)}return m}#d(u,r){let a=r.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),r.add(this.#u(u,r)))}},EllipseFactory:class{#e="ellipse";#t=new Is(this.#c);static supports(u){return u instanceof Vo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(this.#s(u,r));let h=this.#t.create(u,r);a.add(this.#t.create(u,r));let m=this.#n(c);return a.add(this.#t.getConnector(m,h,r)),a}#n(u){let r=u.x(),a=u.y(),c=u.radiusX()*Math.sqrt(2)/2,h=u.radiusY()*Math.sqrt(2)/2;return[new V(r-c,a-h),new V(r+c,a-h),new V(r-c,a+h),new V(r+c,a+h)]}#i(u){let r=u.x(),a=u.y(),c=u.radius();return[new V(r-c.x,a),new V(r+c.x,a),new V(r,a+c.y),new V(r,a-c.y)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){let r=u.getParent();if(!(r instanceof fe().Group))return;let a=xt(r,0),c=xt(r,1),h=xt(r,2),m=xt(r,3);switch(u.id()){case"anchor0":a.y(c.y());break;case"anchor1":c.y(a.y());break;case"anchor2":h.x(m.x());break;case"anchor3":m.x(h.x());break;default:p.error("Unhandled anchor id: "+u.id())}}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#l(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=u.mathShape,c=a.getCenter(),h=a.getA(),m=a.getB();switch(r.id()){case"anchor0":h=c.getX()-r.x();break;case"anchor1":h=r.x()-c.getX();break;case"anchor2":m=r.y()-c.getY();break;case"anchor3":m=c.getY()-r.y();break;default:p.error("Unhandled anchor id: "+r.id())}u.mathShape=new Vo(c,Math.abs(h),Math.abs(m)),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=a.getCenter(),h=new V(c.getX()+r.x,c.getY()+r.y);u.mathShape=new Vo(h,a.getA(),a.getB()),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){let r=Math.abs(u[0].getX()-u[1].getX()),a=Math.abs(u[0].getY()-u[1].getY());return new Vo(u[0],r,a)}#o(){return Uo.labelText.ellipse}#s(u,r){let a=u.mathShape,c=a.getCenter(),h={x:a.getA(),y:a.getB()};return new(fe()).Ellipse({x:c.getX(),y:c.getY(),radius:h,radiusX:h.x,radiusY:h.y,stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let r=u.getChildren(ko)[0];if(r instanceof fe().Ellipse)return r}#c(u){let r=u.mathShape,a=r.getCenter();return new V(a.getX()-r.getA(),a.getY()+r.getB())}#l(u,r,a){let c=u.mathShape,h=c.getCenter(),m=c.getA(),v=c.getB(),S=r.getParent();if(!(S instanceof fe().Group))return;this.#a(S).radius({x:m,y:v});let _=xt(S,0),E=xt(S,1),I=xt(S,2),R=xt(S,3),P=E.x()<_.x()?-1:1,U=R.y()<I.y()?1:-1;switch(r.id()){case"anchor0":_.x(r.x()),E.x(h.getX()+P*m),I.y(h.getY()+v),R.y(h.getY()-v);break;case"anchor1":E.x(r.x()),_.x(h.getX()-P*m),I.y(h.getY()+v),R.y(h.getY()-v);break;case"anchor2":I.y(r.y()),_.x(h.getX()-m),E.x(h.getX()+m),R.y(h.getY()-U*v);break;case"anchor3":R.y(r.y()),_.x(h.getX()-m),E.x(h.getX()+m),I.y(h.getY()+U*v);break;default:p.error("Unhandled anchor id: "+r.id())}}#u(u,r){let a=u.mathShape,c=0,h=0;r!==void 0&&(c=r.x(),h=r.y());let m=new(fe()).Group;m.name("shadow");let v=a.getRound();for(let S=0;S<v.length;++S){let _=v[S],E=_[0][0],I=_[0][1],R=_[1][0],P=new(fe()).Rect({x:E-c,y:I-h,width:R-E,height:1,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow-element"});m.add(P)}return m}#d(u,r){let a=r.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),r.add(this.#u(u,r)))}},ProtractorFactory:class{#e="protractor";#t=new Is(this.#l);static supports(u){return u instanceof No}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 3}getTimeout(){return 500}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=u.mathShape,c=new(fe()).Group;c.name(this.getGroupName()),c.visible(!0),c.id(u.id);let h=this.#s(u,r);if(c.add(this.#s(u,r)),a.getLength()===this.getNPoints()){let m=this.#c(u,r);for(let _ of m)c.add(_);let v=this.#t.create(u,r);c.add(this.#t.create(u,r));let S=this.#n(h);c.add(this.#t.getConnector(S,v,r))}return c}#n(u){let r=u.points(),a=u.x(),c=u.y();return[new V(r[2]+a,r[3]+c)]}#i(u){let r=u.points(),a=u.x(),c=u.y();return[new V(r[0]+a,r[1]+c),new V(r[2]+a,r[3]+c),new V(r[4]+a,r[5]+c)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#u(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=r.getParent();if(!(a instanceof fe().Group))return;let c=this.#a(a),h=xt(a,0),m=xt(a,1),v=xt(a,2),S=new V(h.x()-c.x(),h.y()-c.y()),_=new V(m.x()-c.x(),m.y()-c.y()),E=new V(v.x()-c.x(),v.y()-c.y());u.mathShape=new No([S,_,E]),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=[];for(let h=0;h<3;++h)c.push(new V(a.getPoint(h).getX()+r.x,a.getPoint(h).getY()+r.y));u.mathShape=new No(c),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){return new No(u)}#o(){return Uo.labelText.protractor}#s(u,r){let a=u.mathShape,c=[];for(let m=0;m<a.getLength();++m)c.push(a.getPoint(m).getX()),c.push(a.getPoint(m).getY());let h=new(fe()).Line({points:c,stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"});return a.getLength()===this.getNPoints()&&h.hitFunc(function(m){m.beginPath(),m.moveTo(a.getPoint(0).getX(),a.getPoint(0).getY()),m.lineTo(a.getPoint(1).getX(),a.getPoint(1).getY()),m.lineTo(a.getPoint(2).getX(),a.getPoint(2).getY()),m.closePath(),m.fillStrokeShape(h)}),h}#a(u){return eu(u)}#c(u,r){let a=u.mathShape,c=new sn(a.getPoint(0),a.getPoint(1)),h=new sn(a.getPoint(1),a.getPoint(2)),m=fg(c,h),v=c.getInclination();m>180&&(m=360-m,v+=m);let S=33*Math.min(c.getLength(),h.getLength())/100;return[new(fe()).Arc({innerRadius:S,outerRadius:S,stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,angle:m,rotation:-v,x:a.getPoint(1).getX(),y:a.getPoint(1).getY(),name:"shape-arc"})]}#l(u){let r=u.mathShape,a=new sn(r.getPoint(0),r.getPoint(1)),c=new sn(r.getPoint(1),r.getPoint(2)),h=(a.getMidpoint().getX()+c.getMidpoint().getX())/2,m=(a.getMidpoint().getY()+c.getMidpoint().getY())/2;return new V(h,m)}#u(u,r,a){let c=u.mathShape,h=new sn(c.getPoint(0),c.getPoint(1)),m=new sn(c.getPoint(1),c.getPoint(2)),v=r.getParent();if(!(v instanceof fe().Group))return;let S=this.#a(v);S.position({x:0,y:0}),S.points([c.getPoint(0).getX(),c.getPoint(0).getY(),c.getPoint(1).getX(),c.getPoint(1).getY(),c.getPoint(2).getX(),c.getPoint(2).getY()]);let _=v.getChildren(function(te){return te.name()==="shape-arc"})[0];if(!(_ instanceof fe().Arc))return;let E=xt(v,0),I=xt(v,1),R=xt(v,2);switch(r.id()){case"anchor0":E.x(r.x()),E.y(r.y());break;case"anchor1":I.x(r.x()),I.y(r.y());break;case"anchor2":R.x(r.x()),R.y(r.y())}let P=fg(h,m),U=h.getInclination();P>180&&(P=360-P,U+=P);let H=33*Math.min(h.getLength(),m.getLength())/100;_.innerRadius(H),_.outerRadius(H),_.angle(P),_.rotation(-U);let J={x:I.x(),y:I.y()};_.position(J),S.hitFunc(function(te){te.beginPath(),te.moveTo(c.getPoint(0).getX(),c.getPoint(0).getY()),te.lineTo(c.getPoint(1).getX(),c.getPoint(1).getY()),te.lineTo(c.getPoint(2).getX(),c.getPoint(2).getY()),te.closePath(),te.fillStrokeShape(S)})}#d(u,r){}#f(u,r){}},RectangleFactory:class{#e="rectangle";#t=new Is(this.#c);static supports(u){return u instanceof Lo}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(c);let h=this.#t.create(u,r);a.add(h);let m=this.#n(c);return a.add(this.#t.getConnector(m,h,r)),a}#n(u){let r=u.x(),a=u.y(),c=u.width(),h=u.height();return[new V(r+c/2,a),new V(r,a+h/2),new V(r+c/2,a+h),new V(r+c,a+h/2)]}#i(u){let r=u.x(),a=u.y(),c=u.width(),h=u.height();return[new V(r,a),new V(r+c,a),new V(r+c,a+h),new V(r,a+h)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#l(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=r.getParent();if(!(a instanceof fe().Group))return;let c=xt(a,0),h=xt(a,2),m=new V(c.x(),c.y()),v=new V(h.x(),h.y());u.mathShape=new Lo(m,v),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=a.getBegin(),h=new V(c.getX()+r.x,c.getY()+r.y),m=a.getEnd(),v=new V(m.getX()+r.x,m.getY()+r.y);u.mathShape=new Lo(h,v),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){return new Lo(u[0],u[1])}#o(){return Uo.labelText.rectangle}#s(u,r){let a=u.mathShape;return new(fe()).Rect({x:a.getBegin().getX(),y:a.getBegin().getY(),width:a.getWidth(),height:a.getHeight(),stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"})}#a(u){let r=u.getChildren(ko)[0];if(r instanceof fe().Rect)return r}#c(u){let r=u.mathShape;return new V(r.getBegin().getX(),r.getEnd().getY())}#l(u,r,a){let c=u.mathShape,h=c.getBegin(),m=r.getParent();if(!(m instanceof fe().Group))return;let v=this.#a(m);v.position({x:h.getX(),y:h.getY()}),v.size({width:c.getWidth(),height:c.getHeight()});let S=xt(m,0),_=xt(m,1),E=xt(m,2),I=xt(m,3);switch(r.id()){case"anchor0":S.x(r.x()),S.y(r.y()),_.y(r.y()),I.x(r.x());break;case"anchor1":_.x(r.x()),_.y(r.y()),S.y(r.y()),E.x(r.x());break;case"anchor2":E.x(r.x()),E.y(r.y()),I.y(r.y()),_.x(r.x());break;case"anchor3":I.x(r.x()),I.y(r.y()),E.y(r.y()),S.x(r.x());break;default:p.error("Unhandled anchor id: "+r.id())}}#u(u,r){let a=u.mathShape.getRound(),c=a.max.getX()-a.min.getX(),h=a.max.getY()-a.min.getY();return new(fe()).Rect({x:a.min.getX(),y:a.min.getY(),width:c,height:h,fill:"grey",strokeWidth:0,strokeScaleEnabled:!1,opacity:.3,name:"shadow"})}#d(u,r){let a=r.getChildren(function(c){return c.name()==="shadow"})[0];a!==void 0&&(a.destroy(),r.add(this.#u(u,r)))}},RoiFactory:class{#e="roi";#t=new Is(this.#c);static supports(u){return u instanceof zi}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){}getTimeout(){return 100}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(this.#s(u,r));let h=this.#t.create(u,r);a.add(this.#t.create(u,r));let m=this.#i(c);return a.add(this.#t.getConnector(m,h,r)),a}#n(u){let r=u.points(),a=u.x(),c=u.y(),h=[];for(let m=0;m<r.length;m+=2)h.push(new V(r[m]+a,r[m+1]+c));return h}#i(u){let r=u.points(),a=u.x(),c=u.y(),h=[];for(let m=0;m<r.length;m+=2){let v=(m+2)%r.length,S=(r[m]+r[v])/2+a,_=(r[m+1]+r[v+1])/2+c;h.push(new V(S,_))}return h}getAnchors(u,r){let a=this.#n(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#l(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=r.getParent();if(!(a instanceof fe().Group))return;let c=this.#a(a),h=u.mathShape.getPoints().slice(),m=new V(r.x()-c.x(),r.y()-c.y());h[b_(r.id())]=m,u.mathShape=new zi(h),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=[];for(let h=0;h<a.getLength();++h)c.push(new V(a.getPoint(h).getX()+r.x,a.getPoint(h).getY()+r.y));u.mathShape=new zi(c),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#i(r);this.#t.updateConnector(u,a)}#r(u){return new zi(u)}#o(){return Uo.labelText.roi}#s(u,r){let a=u.mathShape,c=[];for(let h=0;h<a.getLength();++h)c.push(a.getPoint(h).getX()),c.push(a.getPoint(h).getY());return new(fe()).Line({points:c,stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape",closed:!0})}#a(u){return eu(u)}#c(u){let r=u.mathShape;return new V(r.getPoint(0).getX(),r.getPoint(0).getY())}#l(u,r,a){let c=r.getParent();if(!(c instanceof fe().Group))return;let h=this.#a(c),m=h.points(),v=2*b_(r.id());m[v]=r.x()-h.x(),m[v+1]=r.y()-h.y(),h.points(m);let S=c.getChildren(function(_){return _.id()===r.id()})[0];S.x(r.x()),S.y(r.y())}#u(u,r){}#d(u,r){}},RulerFactory:class{#e="ruler";#t=new Is(this.#l);static supports(u){return u instanceof sn}getName(){return this.#e}getGroupName(){return this.#e+"-group"}getNPoints(){return 2}getTimeout(){return 0}setAnnotationMathShape(u,r){u.mathShape=this.#r(r),u.setTextExpr(this.#o()),u.updateQuantification()}createShapeGroup(u,r){let a=new(fe()).Group;a.name(this.getGroupName()),a.visible(!0),a.id(u.id);let c=this.#s(u,r);a.add(this.#s(u,r));let h=this.#c(u,r);for(let S of h)a.add(S);let m=this.#t.create(u,r);a.add(this.#t.create(u,r));let v=this.#n(c);return a.add(this.#t.getConnector(v,m,r)),a}#n(u){let r=u.points(),a=u.x(),c=u.y(),h=(r[0]+r[2])/2+a,m=(r[1]+r[3])/2+c;return[new V(h,m)]}#i(u){let r=u.points(),a=u.x(),c=u.y();return[new V(r[0]+a,r[1]+c),new V(r[2]+a,r[3]+c)]}getAnchors(u,r){let a=this.#i(u),c=[];for(let h=0;h<a.length;++h)c.push(Cs(a[h].getX(),a[h].getY(),"anchor"+h,r));return c}constrainAnchorMove(u){}updateShapeGroupOnAnchorMove(u,r,a){let c=r.getParent();c instanceof fe().Group&&(this.#u(u,r,a),this.updateLabelContent(u,c,a),u.labelPosition===void 0?this.#t.updatePosition(u,c):this.updateConnector(c))}updateAnnotationOnAnchorMove(u,r){let a=r.getParent();if(!(a instanceof fe().Group))return;let c=this.#a(a),h=xt(a,0),m=xt(a,1),v=new V(h.x()-c.x(),h.y()-c.y()),S=new V(m.x()-c.x(),m.y()-c.y());u.mathShape=new sn(v,S),u.updateQuantification()}updateAnnotationOnTranslation(u,r){let a=u.mathShape,c=a.getBegin(),h=new V(c.getX()+r.x,c.getY()+r.y),m=a.getEnd(),v=new V(m.getX()+r.x,m.getY()+r.y);u.mathShape=new sn(h,v),u.updateQuantification()}updateLabelContent(u,r,a){this.#t.updateContent(u,r)}updateConnector(u){let r=this.#a(u),a=this.#n(r);this.#t.updateConnector(u,a)}#r(u){return new sn(u[0],u[1])}#o(){return Uo.labelText.ruler}#s(u,r){let a=u.mathShape,c=new(fe()).Line({points:[a.getBegin().getX(),a.getBegin().getY(),a.getEnd().getX(),a.getEnd().getY()],stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape"}),h=ir(a,a.getBegin(),20,r.getZoomScale()),m=ir(a,a.getEnd(),20,r.getZoomScale());return c.hitFunc(function(v){v.beginPath(),v.moveTo(h.getBegin().getX(),h.getBegin().getY()),v.lineTo(h.getEnd().getX(),h.getEnd().getY()),v.lineTo(m.getEnd().getX(),m.getEnd().getY()),v.lineTo(m.getBegin().getX(),m.getBegin().getY()),v.closePath(),v.fillStrokeShape(c)}),c}#a(u){return eu(u)}#c(u,r){let a=u.mathShape,c=ir(a,a.getBegin(),20,r.getZoomScale()),h=new(fe()).Line({points:[c.getBegin().getX(),c.getBegin().getY(),c.getEnd().getX(),c.getEnd().getY()],stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick0"}),m=ir(a,a.getEnd(),20,r.getZoomScale());return[h,new(fe()).Line({points:[m.getBegin().getX(),m.getBegin().getY(),m.getEnd().getX(),m.getEnd().getY()],stroke:u.colour,strokeWidth:r.getStrokeWidth(),strokeScaleEnabled:!1,name:"shape-tick1"})]}#l(u){let r=u.mathShape,a=r.getBegin(),c=r.getEnd(),h=a;return a.getY()<c.getY()&&(h=c),h}#u(u,r,a){let c=u.mathShape,h=r.getParent();if(!(h instanceof fe().Group))return;let m=this.#a(h);m.position({x:0,y:0}),m.points([c.getBegin().getX(),c.getBegin().getY(),c.getEnd().getX(),c.getEnd().getY()]);let v=h.getChildren(function(P){return P.name()==="shape-tick0"})[0];if(!(v instanceof fe().Line))return;let S=h.getChildren(function(P){return P.name()==="shape-tick1"})[0];if(!(S instanceof fe().Line))return;let _=xt(h,0),E=xt(h,1);switch(r.id()){case"anchor0":_.x(r.x()),_.y(r.y());break;case"anchor1":E.x(r.x()),E.y(r.y());break;default:p.error("Unhandled anchor id: "+r.id())}let I=ir(c,c.getBegin(),20,a.getZoomScale());v.position({x:0,y:0}),v.points([I.getBegin().getX(),I.getBegin().getY(),I.getEnd().getX(),I.getEnd().getY()]);let R=ir(c,c.getEnd(),20,a.getZoomScale());S.position({x:0,y:0}),S.points([R.getBegin().getX(),R.getBegin().getY(),R.getEnd().getX(),R.getEnd().getY()]),m.hitFunc(function(P){P.beginPath(),P.moveTo(I.getBegin().getX(),I.getBegin().getY()),P.lineTo(I.getEnd().getX(),I.getEnd().getY()),P.lineTo(R.getEnd().getX(),R.getEnd().getY()),P.lineTo(R.getBegin().getX(),R.getBegin().getY()),P.closePath(),P.fillStrokeShape(m)})}#d(u,r){}#f(u,r){}}},filter:{Threshold:class{#e;constructor(u){this.#e=u}#t=new oR;#n=!0;#i=new ii;activate(u){u&&(this.#n=!0)}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run threshod filter on.");if(this.#t.setMin(u.min),this.#t.setMax(u.max),this.#n){let a=this.#e.getData(u.dataId).image;this.#t.setOriginalImage(a),this.#n=!1}let r=new Sg(this.#t,u.dataId,this.#e);r.onExecute=this.#r,r.onUndo=this.#r,r.execute(),this.#e.addToUndoStack(r)}addEventListener(u,r){this.#i.add(u,r)}removeEventListener(u,r){this.#i.remove(u,r)}#r=u=>{this.#i.fireEvent(u)}},Sobel:class{#e;constructor(u){this.#e=u}#t=new ii;activate(u){}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run sobel filter on.");let r=new aR,a=this.#e.getData(u.dataId).image;r.setOriginalImage(a);let c=new Sg(r,u.dataId,this.#e);c.onExecute=this.#n,c.onUndo=this.#n,c.execute(),this.#e.addToUndoStack(c)}addEventListener(u,r){this.#t.add(u,r)}removeEventListener(u,r){this.#t.remove(u,r)}#n=u=>{this.#t.fireEvent(u)}},Sharpen:class{#e;constructor(u){this.#e=u}#t=new ii;activate(u){}init(){}run(u){if(u.dataId===void 0)throw new Error("No dataId to run sharpen filter on.");let r=new sR,a=this.#e.getData(u.dataId).image;r.setOriginalImage(a);let c=new Sg(r,u.dataId,this.#e);c.onExecute=this.#n,c.onUndo=this.#n,c.execute(),this.#e.addToUndoStack(c)}addEventListener(u,r){this.#t.add(u,r)}removeEventListener(u,r){this.#t.remove(u,r)}#n=u=>{this.#t.fireEvent(u)}}}};class Es{id;referenceSopUID;mathShape;referencePoints;colour;quantification;textExpr;labelPosition;planeOrigin;planePoints;#e;getOrientationName(){let r;return this.planePoints!==void 0&&(r=Lb(this.planePoints[1].getValues().concat(this.planePoints[2].getValues()))),r}init(r){this.referenceSopUID===void 0?(this.#e=r,this.referenceSopUID=r.getCurrentImageUid(),this.planeOrigin=r.getOriginForImageUid(this.referenceSopUID),r.isAquisitionOrientation()||(this.planePoints=r.getPlanePoints(r.getCurrentPosition()))):p.debug("Cannot initialise annotation twice")}isCompatibleView(r){let a=!1;if(this.planePoints===void 0)r.isAquisitionOrientation()&&(a=!0);else{let c=r.getCosines(),h=new $(c[0],c[1],c[2]),m=new $(c[3],c[4],c[5]);h.equals(this.planePoints[1])&&m.equals(this.planePoints[2])&&(a=!0)}return a}setViewController(r){r.includesImageUid(this.referenceSopUID)&&this.isCompatibleView(r.getPlaneHelper())&&(this.#e=r,this.planeOrigin=r.getOriginForImageUid(this.referenceSopUID))}getCentroid(){let r;if(this.#e!==void 0&&this.mathShape.getCentroid!==void 0){let a=this.planeOrigin;this.planePoints!==void 0&&(a=this.planePoints[0]);let c=new ce([a.getX(),a.getY(),a.getZ()]),h=this.#e.getIndexFromPosition(c),m=this.#e.getScrollIndex(),v=h.getValues()[m],S=this.mathShape.getCentroid();r=this.#e.getPositionFromPlanePoint(S,v)}return r}setTextExpr(r){if(this.#e!==void 0){let a=this.#e.getModality();r[a]!==void 0?this.textExpr=r[a]:this.textExpr=r["*"]}else p.warn("Cannot set text expr without a view controller")}getText(){return function(r,a){let c="";if(r==null||(c=r,a==null))return c;let h=ye(r);for(let m=0;m<h.length;++m){let v=a[h[m]];if(v!=null&&v.value!==null&&v.value!==void 0){let S=v.value.toPrecision(4);v.unit!==null&&v.unit!==void 0&&v.unit.length!==0&&(v.unit!=="unit.degree"&&(S+=" "),S+=X.t(v.unit));let _="{"+h[m]+"}";c=c.replace(_,S)}}return c}(this.textExpr,this.quantification)}updateQuantification(){this.#e!==void 0&&this.mathShape.quantify!==void 0&&(this.quantification=this.mathShape.quantify(this.#e,ye(this.textExpr)))}getFactory(){let r;if(Zl.draw!==void 0)for(let a in Zl.draw){let c=Zl.draw[a];if(c.supports(this.mathShape)){r=new c;break}}if(r===void 0)for(let a in bg.draw){let c=bg.draw[a];if(c.supports(this.mathShape)){r=new c;break}}return r===void 0&&p.warn("No shape factory found for math shape"),r}}let Ta=["mousedown","mousemove","mouseup","mouseout","wheel","dblclick","touchstart","touchmove","touchend"],C_={openRoiDialog(u,r){let a=prompt("Label",u.textExpr);a!==null&&(u.textExpr=a,r(u))}};function w_(u){let r=0,a=0;if(u.length!==0&&u[0].target!==void 0){let h=u[0].target.offsetParent;for(;h;)isNaN(h.offsetLeft)||(r+=h.offsetLeft),isNaN(h.offsetTop)||(a+=h.offsetTop),h=h.offsetParent}else p.debug("No touch target offset parent.");let c=[];for(let h=0;h<u.length;++h)c.push(new V(u[h].pageX-r,u[h].pageY-a));return c}function fi(u){let r=[];return u.targetTouches!==void 0&&u.targetTouches.length!==0?r=w_(u.targetTouches):u.changedTouches!==void 0&&u.changedTouches.length!==0&&(r=w_(u.changedTouches)),r}function Tn(u){return new V(u.offsetX,u.offsetY)}function I_(u,r){let a=document.createElement("canvas");a.width=u,a.height=r;let c=document.createElement("canvas");c.width=1,c.height=1;let h=a.getContext("2d"),m=c.getContext("2d");return h&&(h.fillRect(u-1,r-1,1,1),m.drawImage(a,u-1,r-1,1,1,0,0,1,1)),m&&m.getImageData(0,0,1,1).data[3]!==0}class ri{#e;#t=null;#n=null;#i=null;#r=null;#o=!0;#s=null;#a;#c;#l=1;#u={x:1,y:1};#d={x:1,y:1};#f={x:1,y:1,z:1};#h={x:0,y:0};#m={x:0,y:0};#p={x:0,y:0};#y={x:0,y:0};#v={x:0,y:0};#S=null;#b;#_=new ii;#g=!1;#D;#I;constructor(r){this.#e=r,this.#e.className+=" viewLayer"}getDataId(){return this.#b}getScale(){return this.#u}getAbsoluteZoomOffset(){return{x:this.#y.x*this.#d.x,y:this.#y.y*this.#d.y}}setImageSmoothing(r){this.#g=r}setView(r,a){this.#b=a,r.addEventListener("wlchange",this.#T),r.addEventListener("colourmapchange",this.#x),r.addEventListener("positionchange",this.#A),r.addEventListener("alphafuncchange",this.#M);for(let c=0;c<Ia.length;++c)r.addEventListener(Ia[c],this.#C);this.#t=new p_(r),this.bindImage()}getViewController(){return this.#t}getImageData(){return this.#s}onimageset=r=>{this.#b===r.dataid&&(this.#t.setImage(r.value[0]),this.#w(this.#t.getImageSize().get2D()),this.#S=!0)};bindImage(){this.#t&&this.#t.bindImageAndLayer(this)}unbindImage(){this.#t&&this.#t.unbindImageAndLayer(this)}onimagecontentchange=r=>{this.#b===r.dataid&&(this.#o=this.#t.isPositionInBounds(),this.#S=!0,this.draw())};onimagegeometrychange=r=>{if(this.#b===r.dataid){let a=this.#t.getImageSize().get2D();if(this.#a.x!==a.x||this.#a.y!==a.y){if(this.#D!==void 0&&this.#I!==void 0){let c=this.#t.getOrigin(),h=this.#I.minus(c),m=this.#t.getOrigin(this.#t.getCurrentPosition()),v=this.#D.minus(m);this.setBaseOffset(h,v)}this.#w(a),this.#S=!0,this.draw()}}};getId(){return this.#e.id}removeFromDOM(){this.#e.remove()}getBaseSize(){return this.#a}getImageWorldSize(){return this.#t.getImageWorldSize()}getOpacity(){return this.#l}setOpacity(r){if(r===this.#l)return;this.#l=Math.min(Math.max(r,0),1);let a={type:"opacitychange",value:[this.#l]};this.#C(a)}addFlipOffsetX(){this.#v.x+=this.#n.width/this.#u.x,this.#h.x+=this.#v.x}addFlipOffsetY(){this.#v.y+=this.#n.height/this.#u.y,this.#h.y+=this.#v.y}flipScaleX(){this.#f.x*=-1}flipScaleY(){this.#f.y*=-1}flipScaleZ(){this.#f.z*=-1}setScale(r,a){let c=this.#t.getPlaneHelper(),h=c.getTargetOrientedPositiveXYZ({x:r.x*this.#f.x,y:r.y*this.#f.y,z:r.z*this.#f.z}),m={x:this.#d.x*h.x,y:this.#d.y*h.y};if(Math.abs(r.x)===1&&Math.abs(r.y)===1&&Math.abs(r.z)===1){let v={x:this.#h.x-this.#y.x,y:this.#h.y-this.#y.y};this.#y={x:0,y:0},this.#h=v}else if(a!==void 0){let v=c.getPlaneOffsetFromOffset3D({x:a.getX(),y:a.getY(),z:a.getZ()});v={x:v.x+this.#m.x,y:v.y+this.#m.y};let S=E_(this.#h,this.#u,m,v),_={x:this.#y.x+S.x-this.#h.x,y:this.#y.y+S.y-this.#h.y};this.#y=_,this.#h=S}this.#u=m}initScale(r,a){let c=this.#t.getPlaneHelper().getTargetOrientedPositiveXYZ({x:r.x*this.#f.x,y:r.y*this.#f.y,z:r.z*this.#f.z}),h={x:this.#d.x*c.x,y:this.#d.y*c.y};this.#u=h,this.#y={x:a.x/this.#d.x,y:a.y/this.#d.y},this.#h={x:this.#h.x+this.#y.x,y:this.#h.y+this.#y.y}}setBaseOffset(r,a,c,h){let m=this.#t.getPlaneHelper(),v=m.getNativeScrollIndex(),S=m.getPlaneOffsetFromOffset3D({x:v===0?r.getX():a.getX(),y:v===1?r.getY():a.getY(),z:v===2?r.getZ():a.getZ()}),_=this.#m.x!==S.x||this.#m.y!==S.y;return c!==void 0&&h!==void 0&&(this.#D=c,this.#I=h),_&&(this.#h={x:this.#h.x-this.#m.x+S.x,y:this.#h.y-this.#m.y+S.y},this.#m=S),_}setOffset(r){let a=this.#t.getPlaneHelper().getPlaneOffsetFromOffset3D(r);this.#h={x:a.x+this.#p.x+this.#m.x+this.#y.x+this.#v.x,y:a.y+this.#p.y+this.#m.y+this.#y.y+this.#v.y}}displayToPlaneIndex(r){let a=this.displayToPlanePos(r);return new d([Math.floor(a.getX()),Math.floor(a.getY())])}displayToPlaneScale(r){return new V(r.getX()/this.#u.x,r.getY()/this.#u.y)}displayToPlanePos(r){let a=this.displayToPlaneScale(r);return new V(a.getX()+this.#h.x,a.getY()+this.#h.y)}planePosToDisplay(r){let a=(r.getX()-this.#h.x+this.#m.x)*this.#u.x,c=(r.getY()-this.#h.y+this.#m.y)*this.#u.y;return(a<0||a>=this.#n.width)&&(a=void 0),(c<0||c>=this.#n.height)&&(c=void 0),new V(a,c)}displayToMainPlanePos(r){let a=this.displayToPlanePos(r);return new V(a.getX()-this.#m.x,a.getY()-this.#m.y)}display(r){this.#e.style.display=r?"":"none"}isVisible(){return this.#e.style.display===""}draw(){if(!this.#o)return;let r={type:"renderstart",layerid:this.getId(),dataid:this.getDataId()};this.#C(r),this.#S&&this.#E(),this.#r.globalAlpha=this.#l,this.clear(),this.#r.setTransform(this.#u.x,0,0,this.#u.y,-1*this.#h.x*this.#u.x,-1*this.#h.y*this.#u.y),this.#r.imageSmoothingEnabled=this.#g,this.#r.drawImage(this.#i,0,0),r={type:"renderend",layerid:this.getId(),dataid:this.getDataId()},this.#C(r)}initialise(r,a,c){this.#c=a,this.#l=Math.min(Math.max(c,0),1),this.#n=document.createElement("canvas"),this.#e.appendChild(this.#n),this.#n.getContext?(this.#r=this.#n.getContext("2d"),this.#r?(this.#i=document.createElement("canvas"),this.#w(r),this.#S=!0):alert("Error: failed to get the 2D context.")):alert("Error: no canvas.getContext method.")}#w(r){if(!I_(r.x,r.y))throw new Error("Cannot create canvas with size "+r.x+", "+r.y);this.#a=r,this.#i.width=this.#a.x,this.#i.height=this.#a.y,this.#r.clearRect(0,0,this.#a.x,this.#a.y),this.#s=this.#r.createImageData(this.#a.x,this.#a.y)}fitToContainer(r,a,c){let h=!1;if(this.#n.width!==r.x||this.#n.height!==r.y){if(!I_(r.x,r.y))throw new Error("Cannot resize canvas "+r.x+", "+r.y);this.#n.width=r.x,this.#n.height=r.y,h=!0}let m={x:a*this.#c.x,y:a*this.#c.y},v={x:this.#u.x*m.x/this.#d.x,y:this.#u.y*m.y/this.#d.y};this.#u.x===v.x&&this.#u.y===v.y||(this.#d=m,this.#u=v,h=!0);let S={x:c.x/m.x,y:c.y/m.y},_={x:r.x/m.x,y:r.y/m.y},E={x:this.#v.x!==0?_.x:0,y:this.#v.y!==0?_.y:0};this.#p.x===S.x&&this.#p.y===S.y&&this.#v.x===E.x&&this.#v.y===E.y||(this.#h={x:this.#h.x+S.x-this.#p.x+E.x-this.#v.x,y:this.#h.y+S.y-this.#p.y+E.y-this.#v.y},this.#v=E,this.#p=S,h=!0),h&&this.draw()}bindInteraction(){this.#e.style.pointerEvents="auto";let r=Ta;for(let a=0;a<r.length;++a){let c=r[a],h=c!=="wheel";this.#e.addEventListener(c,this.#C,{passive:h})}}unbindInteraction(){this.#e.style.pointerEvents="none";let r=Ta;for(let a=0;a<r.length;++a)this.#e.removeEventListener(r[a],this.#C)}addEventListener(r,a){this.#_.add(r,a)}removeEventListener(r,a){this.#_.remove(r,a)}#C=r=>{r.srclayerid=this.getId(),r.dataid=this.#b,this.#_.fireEvent(r)};#E(){this.#t.generateImageData(this.#s),this.#i.getContext("2d").putImageData(this.#s,0,0),this.#S=!1}#T=r=>{r.skipGenerate!==void 0&&r.skipGenerate===!0||(this.#S=!0,this.draw())};#x=r=>{r.skipGenerate!==void 0&&r.skipGenerate===!0||(this.#S=!0,this.draw())};#A=r=>{if(r.skipGenerate===void 0||r.skipGenerate!==!0){let a=!0;if(r.valid!==void 0&&(a=r.valid),a){let c=[0,1,2],h=c.indexOf(this.#t.getScrollIndex());c.splice(h,1),r.diffDims.filter(function(m){return c.indexOf(m)===-1}).length===0&&this.#o||(this.#o=!0,this.#S=!0,this.draw())}else this.#o&&(this.#o=!1,this.clear())}};#M=r=>{r.skipGenerate!==void 0&&r.skipGenerate===!0||(this.#S=!0,this.draw())};setCurrentPosition(r,a){return this.#t.setCurrentPosition(r)}clear(){this.#r.save(),this.#r.setTransform(1,0,0,1,0,0),this.#r.clearRect(0,0,this.#n.width,this.#n.height),this.#r.restore()}}function iu(u){let r=u.split("-layer-");return r.length!==2&&p.warn("Not the expected layer div id format..."),{groupDivId:r[0],layerIndex:r[1],layerId:u}}function Pt(u){let r=null,a=u.target.closest(".layer");return a&&a.id!==void 0&&(r=iu(a.id)),r}function E_(u,r,a,c){let h=(c.x-u.x)*r.x,m=(c.y-u.y)*r.y;return{x:c.x-h/a.x,y:c.y-m/a.y}}class T_{#e;#t=[];#n={x:1,y:1,z:1};#i={x:1,y:1,z:1};#r={x:0,y:0,z:0};#o=void 0;#s=void 0;#a=new ii;#c=!1;#l=[];#u;#d;#f=!1;constructor(r){this.#e=r}getShowCrosshair(){return this.#c}setShowCrosshair(r){this.#c=r,r?(this.addEventListener("offsetchange",this.#h),this.addEventListener("zoomchange",this.#h),this.#b()):(this.removeEventListener("offsetchange",this.#h),this.removeEventListener("zoomchange",this.#h),this.#_())}setImageSmoothing(r){this.#f=r;for(let a of this.#t)a instanceof ri&&a.setImageSmoothing(r)}#h=r=>{this.#b()};getDivId(){return this.#e.id}getScale(){return this.#n}getBaseScale(){return this.#i}getAddedScale(){return{x:this.#n.x/this.#i.x,y:this.#n.y/this.#i.y,z:this.#n.z/this.#i.z}}getOffset(){return this.#r}getNumberOfLayers(){let r=0;return this.#t.forEach(a=>{a!==void 0&&r++}),r}includes(r){if(r===void 0)return!1;for(let a of this.#t)if(a!==void 0&&a.getId()===r)return!0;return!1}getViewLayers(r){r===void 0&&(r=function(){return!0});let a=[];for(let c of this.#t)c instanceof ri&&r(c)&&a.push(c);return a}someViewLayer(r){let a=!1;for(let c of this.#t)if(c instanceof ri&&r(c)){a=!0;break}return a}getDrawLayers(r){r===void 0&&(r=function(){return!0});let a=[];for(let c of this.#t)c instanceof Ea&&r(c)&&a.push(c);return a}getNumberOfViewLayers(){let r=0;return this.#t.forEach(a=>{a!==void 0&&a instanceof ri&&r++}),r}getActiveViewLayer(){let r;if(this.#o!==void 0){let a=this.#t[this.#o];a instanceof ri&&(r=a)}return r}getBaseViewLayer(){let r;for(let a of this.#t)if(a instanceof ri){r=a;break}if(r!==void 0)return r;p.warn("No layer found")}getViewLayersByDataId(r){return this.getViewLayers(function(a){return a.getDataId()===r})}searchViewLayers(r){let a=[];for(let c of this.#t)c instanceof ri&&c.getViewController().equalImageMeta(r)&&a.push(c);return a}getViewDataIndices(){let r=[];for(let a of this.#t)a instanceof ri&&r.push(a.getDataId());return r}getActiveDrawLayer(){let r;if(this.#s!==void 0){let a=this.#t[this.#s];a instanceof Ea&&(r=a)}return r}getDrawLayersByDataId(r){return this.getDrawLayers(function(a){return a.getDataId()===r})}setActiveViewLayer(r){this.#t[r]instanceof ri?(this.#o=r,this.#g({type:"activelayerchange",value:[this.#t[r]]})):p.warn("No view layer to set as active with index: "+r)}setActiveViewLayerByDataId(r){let a;for(let c=0;c<this.#t.length;++c)if(this.#t[c]instanceof ri&&this.#t[c].getDataId()===r){a=c;break}a!==void 0?this.setActiveViewLayer(a):p.warn("No view layer to set as active with dataId: "+r)}setActiveDrawLayer(r){this.#s=r,this.#g({type:"activelayerchange",value:[this.#t[r]]})}setActiveDrawLayerByDataId(r){let a;for(let c=0;c<this.#t.length;++c)if(this.#t[c]instanceof Ea&&this.#t[c].getDataId()===r){a=c;break}a!==void 0?this.setActiveDrawLayer(a):p.warn("No draw layer to set as active with dataId: "+r)}addViewLayer(){let r=this.#t.length,a=this.#S();this.#e.append(a);let c=new ri(a);return c.setImageSmoothing(this.#f),this.#t.push(c),this.setActiveViewLayer(r),this.#m(c),c}addDrawLayer(){this.#s=this.#t.length;let r=this.#S();this.#e.append(r);let a=new Ea(r);return this.#t.push(a),this.#y(a),a}#m(r){r.addEventListener("positionchange",this.updateLayersToPositionChange);for(let a of Ia)r.addEventListener(a,this.#g);r.addEventListener("renderstart",this.#g),r.addEventListener("renderend",this.#g)}#p(r){r.removeEventListener("positionchange",this.updateLayersToPositionChange);for(let a of Ia)r.removeEventListener(a,this.#g);r.removeEventListener("renderstart",this.#g),r.removeEventListener("renderend",this.#g),r.unbindImage()}#y(r){r.addEventListener("positionchange",this.updateLayersToPositionChange),r.addEventListener("positionchange",this.#g),r.addEventListener("drawcreate",this.#g),r.addEventListener("drawdelete",this.#g)}#v(r){r.removeEventListener("positionchange",this.updateLayersToPositionChange),r.removeEventListener("positionchange",this.#g),r.removeEventListener("drawcreate",this.#g),r.removeEventListener("drawdelete",this.#g)}#S(){let r=document.createElement("div");return r.id=this.getDivId()+"-layer-"+this.#t.length,r.className="layer",r.style.pointerEvents="none",r}empty(){this.#t=[],this.#o=void 0,this.#s=void 0,this.#_();let r=this.#e.getElementsByClassName("layer");if(r)for(;r.length>0;)r[0].remove()}removeLayersByDataId(r){for(let a of this.#t)a!==void 0&&a.getDataId()===r&&this.removeLayer(a)}removeLayer(r){let a=this.#t.findIndex(c=>c===r);if(a===-1)throw new Error("Cannot find layer to remove");r instanceof ri?(this.#p(r),this.#o===a&&(this.#o=void 0)):(this.#v(r),this.#s===a&&(this.#s=void 0)),this.#t[a]=void 0,r.removeFromDOM()}#b(r){let a;r===void 0&&(r=this.#d),this.#_();for(let m of this.#t)if(m instanceof ri){a=m;break}if(a===void 0)return void p.warn("No layer to show crosshair");let c=a.getViewController().getPlanePositionFromPosition(r),h=a.planePosToDisplay(c);if(h.getY()!==void 0){let m=document.createElement("hr");m.id=this.getDivId()+"-scroll-crosshair-horizontal",m.className="horizontal",m.style.width=this.#e.offsetWidth+"px",m.style.left="0px",m.style.top=h.getY()+"px",this.#l.push(m),this.#e.appendChild(m)}if(h.getX()!==void 0){let m=document.createElement("hr");m.id=this.getDivId()+"-scroll-crosshair-vertical",m.className="vertical",m.style.width=this.#e.offsetHeight+"px",m.style.left=h.getX()+"px",m.style.top="0px",this.#l.push(m),this.#e.appendChild(m)}}#_(){for(let r of this.#l)r.remove();this.#l=[]}showTooltip(r){this.removeTooltipDiv();let a=this.getActiveViewLayer(),c=a.getViewController(),h=a.displayToPlanePos(r),m=c.getPositionFromPlanePoint(h),v=c.getRescaledImageValue(m);if(v!==void 0){let S=document.createElement("span");S.id="scroll-tooltip",S.style.left=r.getX()+10+"px",S.style.top=r.getY()+10+"px";let _=cn(v,3).toString();c.getPixelUnit()!==void 0&&(_+=" "+c.getPixelUnit()),S.appendChild(document.createTextNode(_)),this.#u=S,this.#e.appendChild(S)}}removeTooltipDiv(){this.#u!==void 0&&(this.#u.remove(),this.#u=void 0)}isPositionInBounds(r){return this.someViewLayer(function(a){return a.getViewController().isPositionInBounds(r)})}canScroll(){return this.someViewLayer(function(r){return r.getViewController().canScroll()})}moreThanOne(r){return this.someViewLayer(function(a){return a.getViewController().moreThanOne(r)})}updateLayersToPositionChange=r=>{for(let S of this.#t)S!==void 0&&(S.removeEventListener("positionchange",this.updateLayersToPositionChange),S.removeEventListener("positionchange",this.#g));let a=new d(r.value[0]),c=new ce(r.value[1]);this.#d=c,this.#c&&this.#b(c);let h={},m,v;for(let S of this.#t){if(S===void 0)continue;let _=!1;if(S instanceof ri){let I=S.getViewController(),R=I.getOrigin(),P=I.getOrigin(c),U,H;if(v===void 0)m=R,v=P,U=new O(0,0,0),H=new O(0,0,0);else if(I.isPositionInBounds(c)&&P!==void 0){let J=m.minus(R);U=new O(J.getX(),J.getY(),J.getZ());let te=v.minus(P);H=new O(te.getX(),te.getY(),te.getZ())}U!==void 0&&H!==void 0&&(_=S.setBaseOffset(U,H,v,m),h[S.getId()]={scroll:U,plane:H})}if(S instanceof Ea){let I=h[S.getReferenceLayerId()];I!==void 0&&(_=S.setBaseOffset(I.scroll,I.plane))}let E=!1;S.getId()!==r.srclayerid&&(E=S.setCurrentPosition(c,a)),!E&&_&&S.draw()}for(let S of this.#t)S!==void 0&&(S.addEventListener("positionchange",this.updateLayersToPositionChange),S.addEventListener("positionchange",this.#g))};getDivToWorldSizeRatio(){if(this.#e.offsetWidth===0&&this.#e.offsetHeight===0)throw new Error("Cannot fit to zero sized container.");let r=this.getMaxWorldSize();if(r!==void 0){if(this.#e.offsetHeight===0){let a=this.#e.offsetWidth/r.x,c=r.y*a;this.#e.style.height=c+"px"}return Math.min(this.#e.offsetWidth/r.x,this.#e.offsetHeight/r.y)}}fitToContainer(r){let a=this.getMaxWorldSize();if(a===void 0)return;let c={x:this.#e.offsetWidth,y:this.#e.offsetHeight},h={x:-.5*(c.x-Math.floor(a.x*r)),y:-.5*(c.y-Math.floor(a.y*r))};for(let m of this.#t)m!==void 0&&m.fitToContainer(c,r,h);this.#c&&this.#b()}getMaxWorldSize(){let r={x:0,y:0};for(let a of this.#t)if(a instanceof ri){let c=a.getImageWorldSize();c.x>r.x&&(r.x=c.x),c.y>r.y&&(r.y=c.y)}return r.x===0&&r.y===0&&(r=void 0),r}flipScaleZ(){this.#i.z*=-1,this.setScale(this.#i)}addScale(r,a){let c={x:this.#n.x*(1+r),y:this.#n.y*(1+r),z:this.#n.z*(1+r)};this.setScale(c,a)}setScale(r,a){this.#n=r;for(let h of this.#t)h!==void 0&&h.setScale(this.#n,a);let c=[r.x,r.y,r.z];a!==void 0&&(c.push(a.getX()),c.push(a.getY()),c.push(a.getZ())),this.#g({type:"zoomchange",value:c})}addTranslation(r){this.setOffset({x:this.#r.x-r.x,y:this.#r.y-r.y,z:this.#r.z-r.z})}setOffset(r){this.#r=r;for(let a of this.#t)a!==void 0&&a.setOffset(this.#r);this.#g({type:"offsetchange",value:[this.#r.x,this.#r.y,this.#r.z]})}reset(){this.setScale(this.#i),this.setOffset({x:0,y:0,z:0})}draw(){for(let r of this.#t)r!==void 0&&r.draw()}display(r){for(let a of this.#t)a!==void 0&&a.display(r)}addEventListener(r,a){this.#a.add(r,a)}removeEventListener(r,a){this.#a.remove(r,a)}#g=r=>{this.#a.fireEvent(r)}}let x_={WindowLevelBinder:class{getEventType=function(){return"wlchange"};getCallback=function(u){return function(r){let a=u.getViewLayersByDataId(r.dataid);if(a.length!==0){let c=a[0].getViewController();if(r.value.length===2){let h=new g(r.value[0],r.value[1]);c.setWindowLevel(h)}r.value.length===3&&c.setWindowLevelPreset(r.value[2])}}}},PositionBinder:class{getEventType=function(){return"positionchange"};getCallback=function(u){return function(r){let a=r.value[1],c=u.getActiveViewLayer().getViewController(),h=c.getCurrentPosition(),m=h.length(),v=a.length;v!==m&&(v===m-1?a.push(h.get(m-1)):v===m+1&&a.pop()),c.setCurrentPosition(new ce(a))}}},ZoomBinder:class{getEventType=function(){return"zoomchange"};getCallback=function(u){return function(r){let a={x:r.value[0],y:r.value[1],z:r.value[2]},c;r.value.length===6&&(c=new $(r.value[3],r.value[4],r.value[5])),u.setScale(a,c),u.draw()}}},OffsetBinder:class{getEventType=function(){return"offsetchange"};getCallback=function(u){return function(r){u.setOffset({x:r.value[0],y:r.value[1],z:r.value[2]}),u.draw()}}},OpacityBinder:class{getEventType=function(){return"opacitychange"};getCallback=function(u){return function(r){if(r.dataid===void 0)return;let a=u.getViewLayersByDataId(r.dataid),c=u.getBaseViewLayer();a.length!==0&&c!==a[0]&&(a[0].setOpacity(r.value),a[0].draw())}}},ColourMapBinder:class{getEventType=function(){return"colourmapchange"};getCallback=function(u){return function(r){let a=u.getViewLayersByDataId(r.dataid);a.length!==0&&a[0].getViewController().setColourMap(r.value[0])}}}};class cR{#e=[];#t;#n=!1;#i=[];#r=null;getLayerGroup(r){return this.#e[r]}getNumberOfLayerGroups(){return this.#e.length}getActiveLayerGroup(){return this.getLayerGroup(this.#t)}setActiveLayerGroup(r){this.getLayerGroup(r)!==void 0?this.#t=r:p.warn("No layer group to set as active with index: "+r)}getViewLayersByDataId(r){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getViewLayersByDataId(r));return a}getViewLayers(r){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getViewLayers(r));return a}getDrawLayersByDataId(r){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getDrawLayersByDataId(r));return a}getDrawLayers(r){let a=[];for(let c=0;c<this.#e.length;++c)a=a.concat(this.#e[c].getDrawLayers(r));return a}addLayerGroup(r){this.#t=this.#e.length;let a=new T_(r);a.setImageSmoothing(this.#n);let c=this.#r&&this.#r.length!==0;return c&&this.unbindLayerGroups(),this.#e.push(a),c&&this.bindLayerGroups(),a}getLayerGroupByDivId(r){return this.#e.find(function(a){return a.getDivId()===r})}setBinders(r){if(r==null)throw new Error("Cannot set null or undefined binders");this.#i.length!==0&&this.unbindLayerGroups(),this.#i=r.slice(),this.bindLayerGroups()}empty(){this.unbindLayerGroups();for(let r=0;r<this.#e.length;++r)this.#e[r].empty();this.#e=[],this.#t=void 0}removeLayersByDataId(r){for(let a of this.#e)a.removeLayersByDataId(r)}removeLayerGroup(r){let a=this.#e.findIndex(c=>c===r);if(a===-1)throw new Error("Cannot find layerGroup to remove");this.unbindLayerGroups(),r.empty(),this.#e.splice(a,1),this.#t===a&&(this.#t=void 0),this.bindLayerGroups()}reset(){for(let r=0;r<this.#e.length;++r)this.#e[r].reset()}draw(){for(let r=0;r<this.#e.length;++r)this.#e[r].draw()}fitToContainer(){let r,a=[];for(let c=0;c<this.#e.length;++c){let h=this.#e[c].getDivToWorldSizeRatio();h!==void 0&&(a.push(c),(r===void 0||h<r)&&(r=h))}if(r!==void 0)for(let c=0;c<this.#e.length;++c)a.includes(c)&&this.#e[c].fitToContainer(r)}bindLayerGroups(){if(this.#e.length!==0&&this.#e.length!==1&&this.#i.length!==0){this.#r=new Array(this.#e.length);for(let r=0;r<this.#e.length;++r)for(let a=0;a<this.#i.length;++a)this.#s(r,this.#i[a])}}unbindLayerGroups(){if(this.#e.length!==0&&this.#e.length!==1&&this.#i.length!==0&&this.#r){for(let r=0;r<this.#e.length;++r)for(let a=0;a<this.#i.length;++a)this.#a(r,this.#i[a]);this.#r=null}}setImageSmoothing(r){this.#n=r;for(let a=0;a<this.#e.length;++a)this.#e[a].setImageSmoothing(r)}#o(r,a){this.#r[a]===void 0&&(this.#r[a]=[]);let c=this.#r[a].find(function(h){return h.binder===r});return c===void 0&&(c={binder:r,callback:h=>{this.#a(a,r),r.getCallback(this.#e[a])(h),this.#s(a,r)}},this.#r[a].push(c)),c.callback}#s(r,a){for(let c=0;c<this.#e.length;++c)c!==r&&this.#e[r].addEventListener(a.getEventType(),this.#o(a,c))}#a(r,a){for(let c=0;c<this.#e.length;++c)c!==r&&this.#e[r].removeEventListener(a.getEventType(),this.#o(a,c))}}class dR{#e;constructor(r){this.#e=r}fromJSON(r){let a=JSON.parse(r),c=null;if(a.version==="0.1")c=this.#t(a);else if(a.version==="0.2")c=this.#n(a);else if(a.version==="0.3")c=this.#i(a);else if(a.version==="0.4")c=this.#r(a);else{if(a.version!=="0.5")throw new Error("Unknown state file format version: '"+a.version+"'.");c=this.#o(a)}return c}apply(r,a){let c=r.getActiveLayerGroup().getActiveViewLayer().getViewController(),h=new g(a["window-center"],a["window-width"]);c.setWindowLevel(h),c.setCurrentIndex(new d(a.position));let m=r.getActiveLayerGroup().getBaseScale(),v=null,S=null;if(a.scaleCenter!==void 0){v={x:a.scale*m.x,y:a.scale*m.y,z:1};let _=a.scaleCenter.x-a.scaleCenter.x*a.scale,E=a.scaleCenter.y-a.scaleCenter.y*a.scale,I=_+a.translation.x*v.x,R=E+a.translation.y*v.y;S={x:-I/v.x,y:-R/v.y,z:0}}else v={x:a.scale.x*m.x,y:a.scale.y*m.y,z:m.z},S={x:a.offset.x,y:a.offset.y,z:0};r.getActiveLayerGroup().setScale(v),r.getActiveLayerGroup().setOffset(S),r.setDrawings(a.drawings,a.drawingsDetails,this.#e)}#t(r){let a=function(c){let h=[],m={},v,S;for(let _=0,E=c.length;_<E;++_){h[_]=[];for(let I=0,R=c[_].length;I<R;++I){v=c[_][I];let P=[];for(let U=0,H=v.length;U<H;++U){S=fe().Node.create(v[U]),S.visible(!0);let J={x:0,y:0},te=S.getChildren(function(xe){return xe.name()==="shape"})[0];if(te.stroke(ne(te.stroke())),S.name()==="line-group"){S.name("ruler-group");let xe=new(fe()).Line({points:[te.points()[0],te.points()[1],te.points()[0],te.points()[1]],name:"shape-tick0"});S.add(xe);let ke=new(fe()).Line({points:[te.points()[2],te.points()[3],te.points()[2],te.points()[3]],name:"shape-tick1"});S.add(ke)}let ge=S.getChildren(function(xe){return xe.name()==="arc"});ge.length===1&&ge[0].name("shape-arc");let ie=S.getChildren(function(xe){return xe.name()==="text"}),se=new(fe()).Text({name:"text",text:""});ie.length===1?(J.x=ie[0].x(),J.y=ie[0].y(),ie[0].remove(),se=ie[0]):te.points().length!==0&&(J={x:te.points()[0],y:te.points()[1]});let ae=new(fe()).Label({x:J.x,y:J.y,name:"label"});ae.add(se),ae.add(new(fe()).Tag),S.add(ae),P.push(JSON.stringify(S.toObject()));let re=se.text(),Ce=re.length,Ie=null;S.name()==="ruler-group"?(Ie={length:{value:parseFloat(re.substring(0,Ce-2)),unit:re.substring(-2)}},re="{length}"):S.name()==="ellipse-group"||S.name()==="rectangle-group"?(Ie={surface:{value:parseFloat(re.substring(0,Ce-3)),unit:re.substring(-3)}},re="{surface}"):S.name()!=="protractor-group"&&S.name()!=="rectangle-group"||(Ie={angle:{value:parseFloat(re.substring(0,Ce-1)),unit:re.substring(-1)}},re="{angle}"),m[S.id()]={textExpr:re,longText:"",quant:Ie}}h[_].push(P)}}return{drawings:h,drawingsDetails:m}}(r.drawings);return r.drawings=A_(a.drawings).toObject(),r.drawingsDetails=_g(a.drawingsDetails),(r=ru(r)).drawings=ou(r.drawings),r}#n(r){return r.drawings=A_(r.drawings).toObject(),r.drawingsDetails=_g(function(a){let c={},h=typeof a=="string"?JSON.parse(a):a;for(let m=0,v=h.length;m<v;++m)for(let S=0,_=h[m].length;S<_;++S)for(let E=0,I=h[m][S].length;E<I;++E){let R=h[m][S][E];c[R.id]={textExpr:R.textExpr,longText:R.longText,quant:R.quant}}return c}(r.drawingsDetails)),(r=ru(r)).drawings=ou(r.drawings),r}#i(r){return r.drawingsDetails=_g(r.drawingsDetails),(r=ru(r)).drawings=ou(r.drawings),r}#r(r){return(r=ru(r)).drawings=ou(r.drawings),r}#o(r){return r}}function A_(u){let r,a,c,h=new(fe()).Layer({listening:!1,visible:!0}),m=typeof u=="string"?JSON.parse(u):u;for(let S=0,_=m.length;S<_;++S)for(let E=0,I=m[S].length;E<I;++E)if(a=m[S][E],a.length!==0){c=new(fe()).Group({id:(v=new d([1,1,S,E]),"slice-"+v.get(2)+"_frame-"+(v.length()===4?v.get(3):0)),name:"position-group",visible:!1});for(let R=0,P=a.length;R<P;++R)r=fe().Node.create(a[R]),r.draggable(!0),r.getChildren().forEach(function(U){U.draggable(!1)}),c.add(r);h.add(c)}var v;return h}function _g(u){let r={},a=Object.keys(u);for(let c=0,h=a.length;c<h;++c){let m=u[a[c]];r[a[c]]={meta:{textExpr:m.textExpr,longText:m.longText,quantification:m.quant}}}return r}function ru(u){let r=u.position;return u.position=[r.i,r.j,r.k],u}function ou(u){let r=u.children;for(let a=0,c=r.length;a<c;++a){let h=r[a],m=h.attrs.id.split("_"),v=parseInt(m[0].substring(6),10),S=parseInt(m[1].substring(6),10),_="#2-";_+=v===0&&S!==0?S:v,h.attrs.id=_}return u}function Kl(u){let r;return window.location.origin!=="null"&&(r=window.location.origin),new URL(u,r)}function M_(u){let r={},a=null;if(u&&(a=u.indexOf("?"))!==-1){r.base=u.substring(0,a);let c=u.indexOf("#");c===-1&&(c=u.length);let h=u.substring(a+1,c);r.query=function(m){let v={};if(m){let S=m.split("&");for(let _=0;_<S.length;++_){let E=S[_].split("=");v[E[0]]?(v[E[0]]instanceof Array||(v[E[0]]=[v[E[0]]]),v[E[0]].push(E[1])):v[E[0]]=E[1]}}return v}(h)}return r}class R_{#e=[];#t=0;#n=new ii;getStackSize(){return this.#e.length}getCurrentStackIndex(){return this.#t}add(r){this.#e=this.#e.slice(0,this.#t),this.#e.push(r),++this.#t,this.#i({type:"undoadd",command:r.getName()})}remove(r){let a=!1,c=this.#e.findIndex(function(h){return h.getName()===r});return c!==-1&&(this.#e.splice(c,1),--this.#t,a=!0,this.#i({type:"undoremove",command:r})),a}undo(){this.#t>0&&(--this.#t,this.#e[this.#t].undo(),this.#i({type:"undo",command:this.#e[this.#t].getName()}))}redo(){this.#t<this.#e.length&&(this.#e[this.#t].execute(),this.#i({type:"redo",command:this.#e[this.#t].getName()}),++this.#t)}addEventListener(r,a){this.#n.add(r,a)}removeEventListener(r,a){this.#n.remove(r,a)}#i=r=>{this.#n.fireEvent(r)}}class O_{#e;#t=null;#n=[];#i={};constructor(r){this.#e=r}init(){for(let r in this.#e)this.#e[r].init();this.enableShortcuts(!0)}enableShortcuts(r){r?window.addEventListener("keydown",this.#c("window","keydown"),!0):window.removeEventListener("keydown",this.#c("window","keydown"),!0)}getToolList(){return this.#e}hasTool(r){return this.getToolList()[r]!==void 0}getSelectedTool(){return this.#t}getSelectedToolEventHandler(r){return this.getSelectedTool()[r]}setSelectedTool(r){if(!this.hasTool(r))throw new Error("Unknown tool: '"+r+"'");this.#t&&this.#t.activate(!1),this.#t=this.#e[r],this.#t.activate(!0)}setToolFeatures(r){this.getSelectedTool()&&this.getSelectedTool().setFeatures(r)}bindLayerGroup(r,a){let c=r.getDivId();r.addEventListener("activelayerchange",this.#o(c)),this.#r(c,a)}#r(r,a){this.#i[r]!==void 0&&this.#a(this.#i[r]),this.#i[r]=a,this.#s(a)}#o(r){return a=>{let c=a.value[0];c!==void 0&&this.#r(r,c)}}#s(r){r.bindInteraction();let a=Ta;for(let c=0;c<a.length;++c)r.addEventListener(a[c],this.#c(r.getId(),a[c]))}#a(r){r.unbindInteraction();let a=Ta;for(let c=0;c<a.length;++c)r.removeEventListener(a[c],this.#c(r.getId(),a[c]))}#c(r,a){if(this.#n[r]===void 0&&(this.#n[r]=[]),this.#n[r][a]===void 0){let c=h=>{if(this.#t){let m=this.#t[h.type];m&&m(h)}};this.#n[r][a]=c}return this.#n[r][a]}}class Dg{#e=[];#t=2;#n;constructor(r){this.#n=r}setNumberOfDimensions(r){this.#t=r}setNToLoad(r){for(let a=0;a<r;++a){this.#e[a]=[];for(let c=0;c<this.#t;++c)this.#e[a][c]=0}}onprogress=r=>{if(!r.lengthComputable||r.subindex===void 0||r.index===void 0)return;let a=100*r.loaded/r.total;this.#e[r.index][r.subindex]=a;let c=null;c=r.item!==void 0?r.item:{loaded:this.#i(r.index),total:100,source:r.source},this.#n({lengthComputable:!0,loaded:this.#r(),total:100,item:c})};#i(r){let a=0;for(let c=0;c<this.#t;++c)a+=this.#e[r][c];return a/this.#t}#r(){let r=0,a=this.#e.length;for(let c=0;c<a;++c)r+=this.#i(c);return Math.round(r/a)}getMonoProgressHandler(r,a){return c=>{c.index=r,c.subindex=a,this.onprogress(c)}}getUndefinedMonoProgressHandler(r){return a=>{a.subindex=r,this.onprogress(a)}}}class P_{#e=null;#t=[];#n=null;#i=0;#r=0;#o;#s;getDefaultCharacterSet(){return this.#s}setDefaultCharacterSet(r){this.#s=r}#a(r){this.#e=r,this.#i=0,this.#r=0,this.#o=!1,this.#l(),this.#d()}#c(r){this.#t.push(r)}#l(){this.#t=[]}#u(r){this.#n=r}#d(){this.#n=null}#f=r=>{this.#i++,this.#i===this.#e.length&&this.onload({source:this.#e})};#h=r=>{this.#r++,this.#r===this.#e.length&&this.onloadend({source:this.#e})};#m(r,a){return c=>{c.source=a,r(c)}}load(r,a){this.onloadstart({source:r}),r.length===1&&(De(r[0],"DICOMDIR")||De(r[0],".dcmdir"))?this.#v(r[0],a):this.#y(r,a)}#p(r,a,c){return h=>{let m=h.target.status;m!==200&&m!==0?(this.onerror({source:a,error:"GET "+h.target.responseURL+" "+h.target.status+" ("+h.target.statusText+")",target:h.target}),this.#h()):r.load(h.target.response,a,c)}}#y(r,a){if(r===void 0||r.length===0)return;this.#a(r);let c=new Dg(this.onprogress);c.setNToLoad(r.length);let h=[];for(let R=0;R<Aa.length;++R)h.push(new Aa[R]);let m=r[0],v=null,S=!1;for(let R=0;R<h.length;++R)if(v=h[R],v.canLoadUrl(m,a)){S=!0,v.setOptions({numberOfFiles:r.length,defaultCharacterSet:this.getDefaultCharacterSet()}),v.onprogress=c.getUndefinedMonoProgressHandler(1),v.onloaditem=this.onloaditem,v.onload=this.#f,v.onloadend=this.#h,v.onerror=this.onerror,v.onabort=this.onabort,this.#u(v);break}if(!S)throw new Error("No loader found for url: "+m);let _=0,E=()=>{_<this.#t.length-1&&!this.#o&&(++_,this.#t[_].send(null))};for(let R=0;R<r.length;++R){if(m=r[R],!v.canLoadUrl(m,a))throw new Error("Input url of different type: "+m);let P=new XMLHttpRequest;if(P.open("GET",m,!0),a!==void 0){if(a.requestHeaders!==void 0){let J=a.requestHeaders;for(let te=0;te<J.length;++te)J[te].name!==void 0&&J[te].value!==void 0&&P.setRequestHeader(J[te].name,J[te].value)}a.withCredentials!==void 0&&(P.withCredentials=a.withCredentials)}P.onprogress=this.#m(c.getMonoProgressHandler(R,0),m),P.onload=this.#p(v,m,R),P.onloadend=E;let U=this.#m(this.onerror,m);P.onerror=J=>{this.#h(),U(J)};let H=this.#m(this.onabort,m);P.onabort=J=>{this.#h(),H(J)},v.loadUrlAs()===1&&(P.responseType="arraybuffer"),this.#c(P)}let I=this.#t.length;a!==void 0&&a.batchSize!==void 0&&I!==0&&(I=Math.min(a.batchSize,this.#t.length));for(let R=0;R<I;++R)this.#o||(_=R,this.#t[_].send(null))}#v(r,a){let c=new XMLHttpRequest;c.open("GET",r,!0),c.responseType="arraybuffer",c.onload=h=>{let m=h.target.status;if(m!==200&&m!==0)this.onerror({source:r,error:"GET "+h.target.responseURL+" "+h.target.status+" ("+h.target.statusText+")",target:h.target}),this.onloadend({});else{let v=function(E){let I=new Yp;I.parse(E);let R=I.getDicomElements();if(R["00041220"]===void 0||R["00041220"].value===void 0)return void p.warn("No Directory Record Sequence found in DICOMDIR.");let P=R["00041220"].value;if(P.length===0)return void p.warn("The Directory Record Sequence of the DICOMDIR is empty.");let U=[],H=null,J=null;for(let te=0;te<P.length;++te){if(P[te]["00041430"]===void 0||P[te]["00041430"].value===void 0)continue;let ge=P[te]["00041430"].value[0];if(ge==="STUDY")J=[],U.push(J);else if(ge==="SERIES")H=[],J.push(H);else if(ge==="IMAGE"){if(P[te]["00041500"]===void 0||P[te]["00041500"].value===void 0)continue;let ie=P[te]["00041500"].value;H.push(ie.join("/"))}}return U}(h.target.response)[0][0],S=r.split("/").slice(0,-1).join("/"),_=[];for(let E=0;E<v.length;++E)_.push(S+"/"+v[E]);this.#y(_,a)}},c.onerror=h=>{this.#m(this.onerror,r)(h),this.onloadend({})},c.onabort=h=>{this.#m(this.onabort,r)(h),this.onloadend({})},c.send(null)}abort(){this.#o=!0;for(let r=0;r<this.#t.length;++r)this.#t[r].readyState!==4&&this.#t[r].abort();this.#n&&this.#n.isLoading()&&this.#n.abort()}onloadstart(r){}onprogress(r){}onloaditem(r){}onload(r){}onloadend(r){}onerror(r){}onabort(r){}}class uR{constructor(r){this.poolSize=r,this.taskQueue=[],this.freeThreads=[];for(let a=0;a<r;++a)this.freeThreads.push(new hR(this));this.runningThreads=[]}addWorkerTask(r){if(this.freeThreads.length===this.poolSize&&this.onworkstart({type:"work-start"}),this.freeThreads.length>0){let a=this.freeThreads.shift();this.runningThreads.push(a),a.run(r)}else this.taskQueue.push(r)}abort(){this.#e(),this.onabort({type:"work-abort"}),this.onworkend({type:"work-end"})}onTaskEnd(r){if(this.taskQueue.length>0){let a=this.taskQueue.shift();r.run(a)}else{r.stop(),this.freeThreads.push(r);for(let a=0;a<this.runningThreads.length;++a)this.runningThreads[a].getId()===r.getId()&&this.runningThreads.splice(a,1);this.freeThreads.length===this.poolSize&&(this.onwork({type:"work"}),this.onworkend({type:"work-end"}))}}handleWorkerError=r=>{this.#e(),this.onerror({error:r}),this.onworkend({type:"work-end"})};#e(){this.taskQueue=[];for(let r=0;r<this.runningThreads.length;++r)this.runningThreads[r].stop();this.runningThreads=[]}onworkstart(r){}onworkitem(r){}onwork(r){}onworkend(r){}onerror(r){}onabort(r){}}class hR{constructor(r){this.parentPool=r,this.id=Math.random().toString(36).substring(2,15),this.runningTask=null,this.worker}getId(){return this.id}run(r){this.runningTask=r,this.worker===void 0&&(this.worker=new Worker(this.runningTask.script),this.worker.onmessage=this.onmessage,this.worker.onerror=this.onerror),this.worker.postMessage(this.runningTask.startMessage)}stop(){this.worker!==void 0&&(this.worker.terminate(),this.worker=void 0)}onmessage=r=>{r.itemNumber=this.runningTask.info.itemNumber,r.numberOfItems=this.runningTask.info.numberOfItems,r.index=this.runningTask.info.index,this.parentPool.onworkitem(r),this.parentPool.onTaskEnd(this)};onerror=r=>{r.itemNumber=this.runningTask.info.itemNumber,r.numberOfItems=this.runningTask.info.numberOfItems,r.index=this.runningTask.info.index,this.parentPool.handleWorkerError(r),this.stop()}}class fR{constructor(r,a,c){this.script=r,this.startMessage=a,this.info=c}}let mR=typeof JpegImage<"u",pR=typeof jpeg<"u"&&jpeg.lossless!==void 0,gR=typeof JpxImage<"u",su={jpeg2000:"","jpeg-lossless":"","jpeg-baseline":"",rle:""};class yR{#e;#t=new uR(10);#n=!1;constructor(r,a){this.#e=r}decode(r,a,c){this.#n||(this.#n=!0,this.#t.onworkstart=this.ondecodestart,this.#t.onworkitem=this.ondecodeditem,this.#t.onwork=this.ondecoded,this.#t.onworkend=this.ondecodeend,this.#t.onerror=this.onerror,this.#t.onabort=this.onabort);let h=new fR(this.#e,{buffer:r,meta:a},c);this.#t.addWorkerTask(h)}abort(){this.#t.abort()}ondecodestart(r){}ondecodeditem(r){}ondecoded(r){}ondecodeend(r){}onerror(r){}onabort(r){}}class vR{#e;#t;constructor(r,a){this.#e=r,this.#t=a}#n=0;decode(r,a,c){++this.#n;let h=null,m=null;if(this.#e==="jpeg-lossless"){if(!pR)throw new Error("No JPEG Lossless decoder provided");let v=a.bitsAllocated/8,S=new Uint8Array(r);h=new jpeg.lossless.Decoder;let _=h.decode(S.buffer,0,S.buffer.byteLength,v);a.bitsAllocated===8?m=a.isSigned?new Int8Array(_.buffer):new Uint8Array(_.buffer):a.bitsAllocated===16&&(m=a.isSigned?new Int16Array(_.buffer):new Uint16Array(_.buffer))}else if(this.#e==="jpeg-baseline"){if(!mR)throw new Error("No JPEG Baseline decoder provided");h=new JpegImage,h.parse(r),m=h.getData(h.width,h.height)}else if(this.#e==="jpeg2000"){if(!gR)throw new Error("No JPEG 2000 decoder provided");h=new JpxImage,h.parse(r),m=h.tiles[0].items}else this.#e==="rle"&&(h=new dwvdecoder.RleDecoder,m=h.decode(r,a.bitsAllocated,a.isSigned,a.sliceSize,a.samplesPerPixel,a.planarConfiguration));this.ondecodeditem({data:[m],index:c.index,numberOfItems:c.numberOfItems,itemNumber:c.itemNumber}),this.#n===this.#t&&(this.ondecoded({}),this.ondecodeend({}))}abort(){this.onabort({}),this.ondecodeend({})}ondecodestart(r){}ondecodeditem(r){}ondecoded(r){}ondecodeend(r){}onerror(r){}onabort(r){}}class SR{#e=!1;#t=null;constructor(r,a){su!==void 0&&su[r]!==void 0?this.#t=new yR(su[r],a):this.#t=new vR(r,a)}decode(r,a,c){this.#e||(this.#e=!0,this.#t.ondecodestart=this.ondecodestart,this.#t.ondecodeditem=this.ondecodeditem,this.#t.ondecoded=this.ondecoded,this.#t.ondecodeend=this.ondecodeend,this.#t.onerror=this.onerror,this.#t.onabort=this.onabort),this.#t.decode(r,a,c)}abort(){this.#t.abort()}ondecodestart(r){}ondecodeditem(r){}ondecoded(r){}ondecodeend(r){}onerror(r){}onabort(r){}}let Cr={NumericValue:"0040A30A",FloatingPointValue:"0040A161",RationalNumeratorValue:"0040A162",RationalDenominatorValue:"0040A163",MeasurementUnitsCodeSequence:"004008EA"};class F_{numericValue;floatingPointValue;rationalNumeratorValue;rationalDenominatorValue;measurementUnitsCode;toString(){return this.numericValue+" "+this.measurementUnitsCode.toString()}}function bR(u){let r={};return u.measurementUnitsCode!==void 0&&(r.MeasurementUnitsCodeSequence={value:[Fo(u.measurementUnitsCode)]}),u.floatingPointValue!==void 0&&(r.FloatingPointValue=u.floatingPointValue),u.rationalNumeratorValue!==void 0&&(r.RationalNumeratorValue=u.rationalNumeratorValue),u.rationalDenominatorValue!==void 0&&(r.RationalDenominatorValue=u.rationalDenominatorValue),u.numericValue!==void 0&&(r.NumericValue=u.numericValue),r}let au={MeasuredValueSequence:"0040A300",NumericValueQualifierCodeSequence:"0040A301"};class k_{measuredValue;numericValueQualifierCode;toString(){let r=this.measuredValue.toString();return this.numericValueQualifierCode!==void 0&&(r+=" "+this.numericValueQualifierCode.toString()),r}}function _R(u){let r={};return u.measuredValue!==void 0&&(r.MeasuredValueSequence={value:[bR(u.measuredValue)]}),u.numericValueQualifierCode!==void 0&&(r.NumericValueQualifierCodeSequence={value:[Fo(u.numericValueQualifierCode)]}),r}let lu={ReferencedSOPClassUID:"00081150",ReferencedSOPInstanceUID:"00081155"};class L_{referencedSOPClassUID;referencedSOPInstanceUID;toString(){return this.referencedSOPInstanceUID+" (class: "+this.referencedSOPClassUID+")"}}function N_(u){let r=new L_;return u[lu.ReferencedSOPClassUID]!==void 0&&(r.referencedSOPClassUID=u[lu.ReferencedSOPClassUID].value[0]),u[lu.ReferencedSOPInstanceUID]!==void 0&&(r.referencedSOPInstanceUID=u[lu.ReferencedSOPInstanceUID].value[0]),r}function V_(u){let r={};return u.referencedSOPClassUID!==void 0&&(r.ReferencedSOPClassUID=u.referencedSOPClassUID),u.referencedSOPInstanceUID!==void 0&&(r.ReferencedSOPInstanceUID=u.referencedSOPInstanceUID),r}let xa={ReferencedFrameNumber:"00081160",ReferencedSOPSequence:"00081199",ReferencedSegmentNumber:"0062000B"};class B_{referencedSOPSequence;referencedFrameNumber;referencedSegmentNumber;fiducialUID;toString(){return this.referencedSOPSequence.toString()}}function DR(u){let r={};return u.referencedFrameNumber!==void 0&&(r.ReferencedFrameNumber=u.referencedFrameNumber),u.referencedSOPSequence!==void 0&&(r.ReferencedSOPSequence={value:[V_(u.referencedSOPSequence)]}),u.referencedSegmentNumber!==void 0&&(r.ReferencedSegmentNumber=u.referencedSegmentNumber),r}let qo={PixelOriginInterpretation:"00480301",GraphicData:"00700022",GraphicType:"00700023",FiducialUID:"0070031A"},Cg="POINT",cu="MULTIPOINT",Jl="POLYLINE",U_="CIRCLE",q_="ELLIPSE";class du{graphicData;graphicType;pixelOriginInterpretation;fiducialUID;toString(){return this.graphicType+" {"+this.graphicData+"}"}}function CR(u){let r={};return u.pixelOriginInterpretation!==void 0&&(r.PixelOriginInterpretation=u.pixelOriginInterpretation),u.graphicData!==void 0&&(r.GraphicData=u.graphicData),u.graphicType!==void 0&&(r.GraphicType=u.graphicType),u.fiducialUID!==void 0&&(r.FiducialUID=u.fiducialUID),r}let Go={GraphicData:"00700022",GraphicType:"00700023",ReferencedFrameofReferenceUID:"30060024",FiducialUID:"0070031A"};class G_{graphicData;graphicType;referencedFrameofReferenceUID;fiducialUID;toString(){return this.graphicType+"{"+this.graphicData+"}"}}function wR(u){let r={};return u.graphicData!==void 0&&(r.GraphicData=u.graphicData),u.graphicType!==void 0&&(r.GraphicType=u.graphicType),u.referencedFrameofReferenceUID!==void 0&&(r.ReferencedFrameofReferenceUID=u.referencedFrameofReferenceUID),u.fiducialUID!==void 0&&(r.FiducialUID=u.fiducialUID),r}let rr={ReferencedSOPSequence:"00081199",RelationshipType:"0040A010",ValueType:"0040A040",ConceptNameCodeSequence:"0040A043",ConceptCodeSequence:"0040A168",ContentSequence:"0040A730",DateTime:"0040A120",Date:"0040A121",Time:"0040A122",UID:"0040A124",PersonName:"0040A123",TextValue:"0040A160",ContinuityOfContent:"0040A050"},wg="CONTAINS",Hi="HAS PROPERTIES",j_="SELECTED FROM",Ht={text:"TEXT",num:"NUM",code:"CODE",date:"DATE",time:"TIME",datetime:"DATETIME",uidref:"UIDREF",pname:"PNAME",composite:"COMPOSITE",image:"IMAGE",waveform:"WAVEFORM",scoord:"SCOORD",scoord3d:"SCOORD3D",tcoord:"TCOORD",container:"CONTAINER",table:"TABLE"},z_={TEXT:"TextValue",DATE:"Date",TIME:"Time",DATETIME:"DateTime",UIDREF:"UID",PNAME:"PersonName",CONTAINER:"ContinuityOfContent"};class Qi{valueType;conceptNameCode;relationshipType;contentSequence;value;constructor(r){this.valueType=r}toString(r){r===void 0&&(r="");let a="";if(this.relationshipType!==void 0&&(a+="("+this.relationshipType+") "),a+=this.valueType+": ",this.conceptNameCode!==void 0&&(a+=this.conceptNameCode.toString()),a+=" = "+this.value.toString(),this.contentSequence!==void 0)for(let c of this.contentSequence)a+=`
`+r+"- "+c.toString(r+"  ");return a}}function uu(u){let r="";u[rr.ValueType]!==void 0&&(r=u[rr.ValueType].value[0]);let a=new Qi(r);if(u[rr.RelationshipType]!==void 0&&(a.relationshipType=u[rr.RelationshipType].value[0]),u[rr.ConceptNameCodeSequence]!==void 0&&(a.conceptNameCode=wa(u[rr.ConceptNameCodeSequence].value[0])),r===Ht.code)a.value=wa(u[rr.ConceptCodeSequence].value[0]);else if(r===Ht.num)a.value=function(c){let h=new k_;return c[au.MeasuredValueSequence]!==void 0&&(h.measuredValue=function(m){let v=new F_;return m[Cr.NumericValue]!==void 0&&(v.numericValue=m[Cr.NumericValue].value[0]),m[Cr.FloatingPointValue]!==void 0&&(v.floatingPointValue=m[Cr.FloatingPointValue].value[0]),m[Cr.RationalNumeratorValue]!==void 0&&(v.rationalNumeratorValue=m[Cr.RationalNumeratorValue].value[0]),m[Cr.RationalDenominatorValue]!==void 0&&(v.rationalDenominatorValue=m[Cr.RationalDenominatorValue].value[0]),m[Cr.MeasurementUnitsCodeSequence]!==void 0&&(v.measurementUnitsCode=wa(m[Cr.MeasurementUnitsCodeSequence].value[0])),v}(c[au.MeasuredValueSequence].value[0])),c[au.NumericValueQualifierCodeSequence]!==void 0&&(h.numericValueQualifierCode=wa(c[au.NumericValueQualifierCodeSequence].value[0])),h}(u);else if(r===Ht.image)a.value=function(c){let h=new B_;return c[xa.ReferencedFrameNumber]!==void 0&&(h.referencedFrameNumber=c[xa.ReferencedFrameNumber].value[0]),c[xa.ReferencedSOPSequence]!==void 0&&(h.referencedSOPSequence=N_(c[xa.ReferencedSOPSequence].value[0])),c[xa.ReferencedSegmentNumber]!==void 0&&(h.referencedSegmentNumber=c[xa.ReferencedSegmentNumber].value[0]),h}(u);else if(r===Ht.composite)a.value=N_(u[rr.ReferencedSOPSequence].value[0]);else if(r===Ht.scoord)a.value=function(c){let h=new du;return c[qo.GraphicData]!==void 0&&(h.graphicData=c[qo.GraphicData].value),c[qo.GraphicType]!==void 0&&(h.graphicType=c[qo.GraphicType].value[0]),c[qo.PixelOriginInterpretation]!==void 0&&(h.pixelOriginInterpretation=c[qo.PixelOriginInterpretation].value[0]),c[qo.FiducialUID]!==void 0&&(h.fiducialUID=c[qo.FiducialUID].value[0]),h}(u);else if(r===Ht.scoord3d)a.value=function(c){let h=new G_;return c[Go.GraphicData]!==void 0&&(h.graphicData=c[Go.GraphicData].value),c[Go.GraphicType]!==void 0&&(h.graphicType=c[Go.GraphicType].value[0]),c[Go.ReferencedFrameofReferenceUID]!==void 0&&(h.referencedFrameofReferenceUID=c[Go.ReferencedFrameofReferenceUID].value[0]),c[Go.FiducialUID]!==void 0&&(h.fiducialUID=c[Go.FiducialUID].value[0]),h}(u);else{let c=z_[r];c!==void 0?a.value=u[rr[c]].value[0]:console.warn("Unsupported input ValueType: "+r)}if(u[rr.ContentSequence]!==void 0){a.contentSequence=[];for(let c of u[rr.ContentSequence].value)a.contentSequence.push(uu(c))}return a}function Ig(u){let r={};if(u.relationshipType!==void 0&&(r.RelationshipType=u.relationshipType),u.valueType!==void 0&&(r.ValueType=u.valueType),u.conceptNameCode!==void 0&&(r.ConceptNameCodeSequence={value:[Fo(u.conceptNameCode)]}),u.valueType==="CODE")r.ConceptCodeSequence={value:[Fo(u.value)]};else if(u.valueType===Ht.num)r=we(we({},r),_R(u.value));else if(u.valueType===Ht.image)r=we(we({},r),DR(u.value));else if(u.valueType===Ht.composite)r=we(we({},r),V_(u.value));else if(u.valueType===Ht.scoord)r=we(we({},r),CR(u.value));else if(u.valueType===Ht.scoord3d)r=we(we({},r),wR(u.value));else{let a=z_[u.valueType];a!==void 0?r[a]=u.value:console.warn("Unsupported output ValueType: "+u.valueType)}if(u.contentSequence!==void 0){r.ContentSequence={value:[]};for(let a of u.contentSequence)r.ContentSequence.value.push(Ig(a))}return r}function IR(u,r,a){let c=function(S){let _=cg[S],E;return _!==void 0&&(E=Ci(_.key,_.scheme)),E}(u);if(c===void 0)return;let h=new Qi(Ht.num);h.relationshipType=wg,h.conceptNameCode=c;let m=new F_;m.numericValue=r,m.measurementUnitsCode=function(S){let _=dg[S],E;return _!==void 0?E=Ci(_,"UCUM"):_===void 0&&(E=Ci("1","UCUM")),E}(a);let v=new k_;return v.measuredValue=m,h.value=v,h}class hu{#e;getWarning(){return this.#e}checkElements(r){this.#e=void 0;let a=uu(r);return a.conceptNameCode!==void 0?a.conceptNameCode.value!==Hb().value&&(this.#e="Not a measurement group"):this.#e="No root concept name code",this.#e}#t(r){let a=new Es;a.mathShape=function(c){let h=c.graphicData.length;if(h%2!=0)throw new Error("Expecting even number of coordinates in scroord data");let m=[];for(let E=0;E<h;E+=2)m.push(new V(parseFloat(c.graphicData[E]),parseFloat(c.graphicData[E+1])));let v=!1,S=m.length;if(S>2){let E=m[0],I=m[S-1];v=E.equals(I)}let _;if(c.graphicType===Cg){if(m.length!==1)throw new Error("Expecting 1 point for point");_=m[0]}else if(c.graphicType===U_){if(m.length!==2)throw new Error("Expecting 2 points for circles");let E=m[0],I=m[1].getDistance(E);_=new Bo(E,I)}else if(c.graphicType===q_){if(m.length!==4)throw new Error("Expecting 4 points for ellipses");let E=m[0].getDistance(m[1])/2,I=m[2].getDistance(m[3])/2,R=new V(m[0].getX()+E,m[0].getY());_=new Vo(R,E,I)}else if(c.graphicType===Jl)if(v)if(m.length===5){let E=new sn(m[0],m[1]),I=new sn(m[1],m[2]),R=new sn(m[2],m[3]),P=new sn(m[3],m[4]);_=mg(E,I)&&mg(I,R)&&mg(R,P)?new Lo(m[0],m[2]):new zi(m.slice(0,-1))}else _=new zi(m.slice(0,-1));else m.length===2?_=new sn(m[0],m[1]):m.length===3&&(_=new No([m[0],m[1],m[2]]));return _}(r.value),a.id=Qd(),a.textExpr="";for(let c of r.contentSequence){if(c.valueType===Ht.image&&c.relationshipType===j_&&_s(c.conceptNameCode,Wb())&&(a.referenceSopUID=c.value.referencedSOPSequence.referencedSOPInstanceUID),c.valueType===Ht.uidref&&c.relationshipType===Hi&&_s(c.conceptNameCode,$b())&&(a.id=c.value),c.valueType===Ht.text&&c.relationshipType===Hi&&_s(c.conceptNameCode,Yb())&&(a.textExpr=c.value,c.contentSequence!==void 0))for(let h of c.contentSequence)h.valueType===Ht.scoord&&h.relationshipType===Hi&&_s(h.conceptNameCode,Xd())&&(a.labelPosition=new V(h.value.graphicData[0],h.value.graphicData[1]));if(c.valueType===Ht.text&&c.relationshipType===Hi&&_s(c.conceptNameCode,Xb())&&(a.colour=c.value),c.valueType===Ht.scoord&&c.relationshipType===Hi&&_s(c.conceptNameCode,Xd())&&c.value.graphicType===cu){let h=[];for(let m=0;m<c.value.graphicData.length;m+=2)h.push(new V(c.value.graphicData[m],c.value.graphicData[m+1]));a.referencePoints=h}if(c.valueType===Ht.scoord3d&&c.relationshipType===Hi&&_s(c.conceptNameCode,Qb())&&c.value.graphicType===cu){let h=c.value.graphicData,m=[],v=Math.floor(h.length/3);for(let S=0;S<v;++S){let _=3*S;m.push(new $(h[_],h[_+1],h[_+2]))}a.planePoints=m}if(c.valueType===Ht.num&&c.relationshipType===wg){let h=N5(c.conceptNameCode);if(h===void 0)continue;let m=c.value.measuredValue,v=V5(m.measurementUnitsCode);a.quantification===void 0&&(a.quantification={}),a.quantification[h]={value:m.numericValue,unit:v}}}return a}create(r){let a=[],c=uu(r);for(let S of c.contentSequence)S.valueType===Ht.scoord&&a.push(this.#t(S));let h=new Kd(a),m=function(S){let _,E=r[S];return E!==void 0&&(_=E.value[0]),_};h.setMetaValue("StudyInstanceUID",m("0020000D")),h.setMetaValue("Modality",m("00080060")),h.setMetaValue("PatientName",m("00100010")),h.setMetaValue("PatientID",m("00100020")),h.setMetaValue("PatientBirthDate",m("00100030")),h.setMetaValue("PatientSex",m("00100040"));let v=r["00081115"];if(v!==void 0){let S=v.value[0]["0020000E"];S!==void 0&&h.setMetaValue("ReferencedSeriesSequence",{value:[{SeriesInstanceUID:S.value[0]}]})}return h}#n(r){let a=new Qi(Ht.scoord);a.relationshipType=wg,r.mathShape instanceof sn?a.conceptNameCode=Ci("121055","DCM"):a.conceptNameCode=Ci("111030","DCM"),a.value=function(I){let R=new du;if(I instanceof V)R.graphicData=[I.getX().toString(),I.getY().toString()],R.graphicType=Cg;else if(I instanceof sn)R.graphicData=[I.getBegin().getX().toString(),I.getBegin().getY().toString(),I.getEnd().getX().toString(),I.getEnd().getY().toString()],R.graphicType=Jl;else if(I instanceof No){R.graphicData=[];for(let P=0;P<3;++P)R.graphicData.push(I.getPoint(P).getX().toString()),R.graphicData.push(I.getPoint(P).getY().toString());R.graphicType=Jl}else if(I instanceof zi){R.graphicData=[];for(let U=0;U<I.getLength();++U)R.graphicData.push(I.getPoint(U).getX().toString()),R.graphicData.push(I.getPoint(U).getY().toString());let P=I.getPoint(0);R.graphicData.push(P.getX().toString()),R.graphicData.push(P.getY().toString()),R.graphicType=Jl}else if(I instanceof Bo){let P=I.getCenter(),U=new V(P.getX()+I.getRadius(),P.getY());R.graphicData=[P.getX().toString(),P.getY().toString(),U.getX().toString(),U.getY().toString()],R.graphicType=U_}else if(I instanceof Vo){let P=I.getCenter(),U=I.getA(),H=I.getB();R.graphicData=[(P.getX()-U).toString(),P.getY().toString(),(P.getX()+U).toString(),P.getY().toString(),P.getX().toString(),(P.getY()-H).toString(),P.getX().toString(),(P.getY()+H).toString()],R.graphicType=q_}else if(I instanceof Lo){let P=I.getBegin(),U=I.getEnd();R.graphicData=[P.getX().toString(),P.getY().toString(),P.getX().toString(),U.getY().toString(),U.getX().toString(),U.getY().toString(),U.getX().toString(),P.getY().toString(),P.getX().toString(),P.getY().toString()],R.graphicType=Jl}return R}(r.mathShape);let c=[],h=new Qi(Ht.image);h.relationshipType=j_,h.conceptNameCode=Wb();let m=new L_;m.referencedSOPClassUID="",m.referencedSOPInstanceUID=r.referenceSopUID;let v=new B_;v.referencedSOPSequence=m,h.value=v,c.push(h);let S=new Qi(Ht.uidref);S.relationshipType=Hi,S.conceptNameCode=$b(),S.value=r.id,c.push(S);let _=new Qi(Ht.text);if(_.relationshipType=Hi,_.conceptNameCode=Yb(),_.value=r.textExpr,r.labelPosition!==void 0){let I=new Qi(Ht.scoord);I.relationshipType=Hi,I.conceptNameCode=Xd();let R=new du;R.graphicType=Cg;let P=[r.labelPosition.getX().toString(),r.labelPosition.getY().toString()];R.graphicData=P,I.value=R,_.contentSequence=[I]}c.push(_);let E=new Qi(Ht.text);if(E.relationshipType=Hi,E.conceptNameCode=Xb(),E.value=r.colour,c.push(E),r.referencePoints!==void 0){let I=new Qi(Ht.scoord);I.relationshipType=Hi,I.conceptNameCode=Xd();let R=new du;R.graphicType=cu;let P=[];for(let U of r.referencePoints)P.push(U.getX().toString()),P.push(U.getY().toString());R.graphicData=P,I.value=R,c.push(I)}if(r.planePoints!==void 0){let I=new Qi(Ht.scoord3d);I.relationshipType=Hi,I.conceptNameCode=Qb();let R=new G_;R.graphicType=cu;let P=[];for(let U of r.planePoints)P.push(U.getX().toString()),P.push(U.getY().toString()),P.push(U.getZ().toString());R.graphicData=P,I.value=R,c.push(I)}if(r.quantification!==void 0)for(let I in r.quantification){let R=IR(I,r.quantification[I].value,r.quantification[I].unit);R!==void 0&&c.push(R)}return a.contentSequence=c,a}toDicom(r,a){let c=r.getMeta();c.TransferSyntaxUID="1.2.840.10008.1.2.1",c.SOPClassUID="1.2.840.10008.5.1.4.1.1.88.11",c.MediaStorageSOPClassUID="1.2.840.10008.5.1.4.1.1.88.11",c.CompletionFlag="PARTIAL",c.VerificationFlag="UNVERIFIED";let h=new Date;c.ContentDate=Rb(Ab(h)),c.ContentTime=Ob(Mb(h));let m=[];for(let v of r.getList())m.push(this.#n(v));if(m.length!==0){let v=new Qi(Ht.container);v.conceptNameCode=Hb(),v.contentSequence=m,c=we(we({},c),Ig(v))}return a!==void 0&&function(v,S){let _=Object.keys(S);for(let E of _)v[E]!==void 0&&p.trace("Overwritting tag: "+E),v[E]=S[E]}(c,a),Yd(c)}}class Eg{meta;image;annotationGroup;constructor(r){this.meta=r}}class ER{#e={};#t=-1;#n=new ii;getNextDataId(){return++this.#t,this.#t.toString()}getDataIds(){return Object.keys(this.#e)}reset(){this.#e={}}get(r){return this.#e[r]}getDataIdsFromSopUids(r){let a=[];if(r===void 0||r.length===0)return a;let c=Object.keys(this.#e);for(let h of c)this.#e[h].image!==void 0&&this.#e[h].image.containsImageUids(r)&&a.push(h);return a}setImage(r,a){this.#e[r].image=a,this.#i({type:"dataimageset",value:[a],dataid:r}),a.addEventListener("imagecontentchange",this.#r(r)),a.addEventListener("imagegeometrychange",this.#r(r))}add(r,a){if(this.#e[r]!==void 0)throw new Error("Data id already used in storage: "+r);this.#e[r]=a,this.#i({type:"dataadd",dataid:r}),a.image!==void 0&&(a.image.addEventListener("imagecontentchange",this.#r(r)),a.image.addEventListener("imagegeometrychange",this.#r(r))),a.annotationGroup!==void 0&&(a.annotationGroup.addEventListener("annotationadd",this.#r(r)),a.annotationGroup.addEventListener("annotationupdate",this.#r(r)),a.annotationGroup.addEventListener("annotationremove",this.#r(r)))}remove(r){if(this.#e[r]!==void 0){let a=this.#e[r].image;a!==void 0&&(a.removeEventListener("imagecontentchange",this.#r(r)),a.removeEventListener("imagegeometrychange",this.#r(r)));let c=this.#e[r].annotationGroup;c!==void 0&&(c.removeEventListener("annotationadd",this.#r(r)),c.removeEventListener("annotationupdate",this.#r(r)),c.removeEventListener("annotationremove",this.#r(r))),delete this.#e[r],this.#i({type:"dataremove",dataid:r})}}update(r,a){if(this.#e[r]===void 0)throw new Error("Cannot find data to update: "+r);let c=this.#e[r];c.image!==void 0&&a.image!==void 0&&c.image.appendSlice(a.image);let h="";h=a.meta["00020010"]!==void 0?"00200013":"imageUid",c.meta=function(m,v,S,_){let E={};if(!S)throw new Error("Cannot merge object with an undefined id key: "+S);if(!Object.prototype.hasOwnProperty.call(m,S))throw new Error("Id key not found in first object while merging: "+S+", obj: "+m);if(!Object.prototype.hasOwnProperty.call(v,S))throw new Error("Id key not found in second object while merging: "+S+", obj: "+v);let I=!1;if(Object.prototype.hasOwnProperty.call(m[S],"merged")&&m[S].merged&&(I=!0),!Object.prototype.hasOwnProperty.call(m[S],_))throw new Error("Id value not found in first object while merging: "+S+", valueKey: "+_+", ojb: "+m);if(!Object.prototype.hasOwnProperty.call(v[S],_))throw new Error("Id value not found in second object while merging: "+S+", valueKey: "+_+", ojb: "+v);let R=m[S][_],P=v[S][_][0];if(E[S]=m[S],I){for(let te=0;te<R.length;++te)if(R[te]===P)throw new Error("The first object already contains id2: "+P+", id1: "+R);E[S][_].push(P)}else{if(R=R[0],R===P)throw new Error("Cannot merge object with same ids: "+R+", id2: "+P);E[S][_].push(P),E[S].merged=!0}let U=Object.keys(m),H=Object.keys(v).filter(function(te){return U.indexOf(te)<0}),J=U.concat(H);for(let te=0;te<J.length;++te){let ge=J[te];if(ge!==S){let ie,se,ae,re,Ce;if(Object.prototype.hasOwnProperty.call(m,ge)&&(ie=m[ge],Object.prototype.hasOwnProperty.call(ie,_)&&(se=ie[_])),Object.prototype.hasOwnProperty.call(v,ge)&&(ae=v[ge],Object.prototype.hasOwnProperty.call(ae,_)&&(re=ae[_])),ie!==void 0?Ce=ie:ae!==void 0&&(Ce=ae),!$t(se,re))if(I){if(Array.isArray(se)){Ce[_]={};for(let Ie=0;Ie<R.length;++Ie)Ce[_][R[Ie]]=se}else Ce[_]=se;Ce[_]===void 0&&(Ce[_]={}),Ce[_][P]=re}else{let Ie={};Ie[R]=se,Ie[P]=re,Ce[_]=Ie}E[ge]=Ce}}return E}(c.meta,a.meta,h,"value"),this.#i({type:"dataupdate",dataid:r})}addEventListener(r,a){this.#n.add(r,a)}removeEventListener(r,a){this.#n.remove(r,a)}#i=r=>{this.#n.fireEvent(r)};#r(r){return a=>{a.dataid=r,this.#i(a)}}}class TR{#e;setOptions(r){this.#e=r}#t=null;#n=[];#i=[];#r=[];#o=[];#s(r){let a,c=r["00080060"];if(c!==void 0){let h=c.value[0];h==="SEG"?a=new ug:h==="SR"&&(a=new hu)}return a===void 0&&r["7FE00010"]!==void 0&&(a=new qb),a}#a(r,a){let c=this.#n[r].getDicomElements(),h=this.#o[r];if(h!==void 0)try{let m=new Eg(c);h instanceof hu?m.annotationGroup=h.create(c):m.image=h.create(c,this.#i[r],this.#e.numberOfFiles),this.onloaditem({data:m,source:a,warn:h.getWarning()})}catch(m){this.onerror({error:m,source:a}),this.onloadend({source:a})}}#c(r,a){this.onprogress({lengthComputable:!0,loaded:100,total:100,index:r,source:a}),this.#a(r,a),this.onload({source:a}),this.onloadend({source:a})}#l(r,a,c){let h=this.#n[r],m={bitsAllocated:h.getDicomElements()["00280100"].value[0],isSigned:h.getDicomElements()["00280103"].value[0]===1},v=h.getDicomElements()["00280011"],S=h.getDicomElements()["00280010"];v!==void 0&&S!==void 0&&(m.sliceSize=v.value[0]*S.value[0]);let _=h.getDicomElements()["00280002"];_!==void 0&&(m.samplesPerPixel=_.value[0]);let E=h.getDicomElements()["00280006"];E!==void 0&&(m.planarConfiguration=E.value[0]);let I=a.length;this.#t===null&&(this.#t=new SR(c,I),this.#t.ondecodeditem=R=>{this.#u(R),R.itemNumber+1===R.numberOfItems&&(this.onload(R),this.onloadend(R))},this.#t.onerror=this.onerror,this.#t.onabort=this.onabort);for(let R=0;R<I;++R)this.#t.decode(a[R],m,{itemNumber:R,numberOfItems:I,index:r})}#u(r){this.onprogress({lengthComputable:!0,loaded:r.itemNumber+1,total:r.numberOfItems,index:r.index,source:origin});let a=r.index,c=r.data[0];if(r.numberOfItems!==1){if(this.#r[a]===void 0){this.#r[a]=c.length;let h=r.numberOfItems*this.#r[a];try{this.#i[a]=new c.constructor(h)}catch(m){if(m instanceof RangeError){let v=Math.floor(Math.log(h)/Math.log(2));p.error("Cannot allocate "+c.constructor.name+" of size: "+h+" (>2^"+v+") for decompressed data.")}return this.#t.abort(),this.onerror({error:m,source:origin}),void this.onloadend({source:origin})}}c.length!==this.#r[a]&&p.warn("Unsupported varying decompressed data size: "+c.length+" != "+this.#r[a]),this.#i[a].set(c,this.#r[a]*r.itemNumber)}else this.#i[a]=c;r.itemNumber===0&&this.#a(a,origin)}#d(r,a){this.#a(r,a),this.onload({source:a}),this.onloadend({source:a})}#f(r,a){let c=this.#n[r],h=c.getDicomElements()["7FE00010"].value;c.getDicomElements()["7FE00010"].value=[],this.#i[r]=h[0];let m=function(v){let S;return $p(v)?S="jpeg2000":Qp(v)?S="jpeg-baseline":Wp(v)?S="jpeg-lossless":bb(v)&&(S="rle"),S}(c.getDicomElements()["00020010"].value[0]);m!==void 0?this.#l(r,h,m):this.#c(r,a)}convert(r,a,c){this.onloadstart({source:a,index:c});let h=new Yp,m;this.#e.defaultCharacterSet!==void 0&&h.setDefaultCharacterSet(this.#e.defaultCharacterSet);try{h.parse(r),m=this.#s(h.getDicomElements()),m!==void 0&&m.checkElements(h.getDicomElements())}catch(v){return this.onerror({error:v,source:a}),void this.onloadend({source:a})}this.#n[c]=h,this.#o[c]=m,m instanceof hu?this.#d(c,a):this.#f(c,a)}abort(){this.#t&&this.#t.abort()}onloadstart(r){}onloaditem(r){}onprogress(r){}onload(r){}onloadend(r){}onerror(r){}onabort(r){}}class Tg{#e=null;#t=null;#n=0;#i=0;#r;getDefaultCharacterSet(){return this.#r}setDefaultCharacterSet(r){this.#r=r}#o(r){this.#e=r,this.#n=0,this.#i=0,this.#a()}#s(r){this.#t=r}#a(){this.#t=null}#c=r=>{this.#n++,this.#n===this.#e.length&&this.onload({source:this.#e})};#l=r=>{this.#i++,this.#i===this.#e.length&&this.onloadend({source:this.#e})};load(r){if(r===void 0||r.length===0)return;this.#o(r),this.onloadstart({source:r});let a=new Dg(this.onprogress);a.setNToLoad(r.length),a.setNumberOfDimensions(1);let c=[];for(let S=0;S<Aa.length;++S)c.push(new Aa[S]);let h=r[0],m=null,v=!1;for(let S=0;S<c.length;++S)if(m=c[S],m.canLoadMemory(h)){v=!0,m.setOptions({numberOfFiles:r.length,defaultCharacterSet:this.getDefaultCharacterSet()}),m.onprogress=a.getUndefinedMonoProgressHandler(0),m.onloaditem=this.onloaditem,m.onload=this.#c,m.onloadend=this.#l,m.onerror=this.onerror,m.onabort=this.onabort,this.#s(m);break}if(!v)throw new Error("No loader found for data: "+h.filename);for(let S=0;S<r.length;++S){if(h=r[S],!m.canLoadMemory(h))throw new Error("Input data of different type: "+h.filename);m.load(h.data,h.filename,S)}}abort(){this.#t&&this.#t.isLoading()&&this.#t.abort()}onloadstart(r){}onprogress(r){}onloaditem(r){}onload(r){}onloadend(r){}onerror(r){}onabort(r){}}function H_(u){let r=u.data.length,a=new Uint8Array(r/4*3),c=0;for(let h=0;h<r;h+=4)a[c]=u.data[h],a[c+1]=u.data[h+1],a[c+2]=u.data[h+2],c+=3;return a}function Q_(u,r,a,c,h,m){let v=new Oo([u,r,1]),S=new Po([1,1,1]),_=new $(0,0,a),E=new Ca(_,v,S),I=new Ds(E,c,[m]);I.setPhotometricInterpretation("RGB");let R={BitsStored:8};return h!==void 0&&(R.numberOfFiles=h),I.setMeta(R),I}var xR=s(654),AR=s.n(xR);let Aa=[class{#e={};#t=!1;setOptions(u){this.#e=u}isLoading(){return this.#t}#n=new TR;load(u,r,a){this.#t||(this.#n.setOptions(this.#e),this.#n.onloadstart=this.onloadstart,this.#n.onprogress=this.onprogress,this.#n.onloaditem=this.onloaditem,this.#n.onload=this.onload,this.#n.onloadend=c=>{this.#t=!1,this.onloadend(c)},this.#n.onerror=c=>{c.source=r,this.onerror(c)},this.#n.onabort=this.onabort),this.#t=!0,this.#n.convert(u,r,a)}abort(){this.#t=!1,this.#n.abort()}canLoadFile(u){let r=he(u.name);return r===null||r==="dcm"}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="dicom")return!0;if(r.requestHeaders!==void 0){let S=function(E){return E.name==="Accept"},_=r.requestHeaders.find(S);if(_!==void 0){let E="application/dicom";return W(_.value,E)&&_.value[E.length]!=="+"}}}let a=Kl(u),c=he(a.pathname),h=c===null,m=c==="dcm",v=a.searchParams.get("contentType");return v!=null?v==="application/dicom":h||m}canLoadMemory(u){let r=u["Content-Type"];if(r!==void 0&&r.startsWith("application/dicom"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Zr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}load(u,r,a){this.#e=!0,this.onloadstart({source:r});try{this.onprogress({lengthComputable:!0,loaded:100,total:100,index:a,source:r});let c={data:u,source:r};this.onloaditem(c),this.onload(c)}catch(c){this.onerror({error:c,source:r})}finally{this.#e=!1,this.onloadend({source:r})}}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return he(u.name)==="json"}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="json")return!0;if(r.requestHeaders!==void 0){let a=function(h){return h.name==="Accept"},c=r.requestHeaders.find(a);if(c!==void 0)return W(c.value,"application/json")||W(c.value,"application/dicom+json")}}return he(Kl(u).pathname)==="json"}canLoadMemory(u){let r=u["Content-Type"];if(r!==void 0&&r.startsWith("application/json"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Zr.Text}loadUrlAs(){return 0}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}load(u,r,a){this.onloadstart({source:r}),this.#e=!0;let c=new Tg;c.onprogress=h=>{h.loaded=50+h.loaded/2,h.index=a,this.onprogress(h)},c.onloaditem=this.onloaditem,c.onload=this.onload,c.onloadend=h=>{this.#e=!1,this.onloadend(h)},c.onerror=this.onerror,c.onabort=this.onabort,c.load(function(h){let m=new Uint8Array(h),v=[];if(m.length===0)return v;let S=Wn(new Uint8Array([13,10,13,10])),_=Vn(m,S,0);if(_===void 0)throw new Error("Can't find the end of the first multipart header");let E=Dt(m.slice(0,_)).split(`\r
`),I;for(let H=0;H<E.length;++H)if(E[H][0]==="-"&&E[H][1]==="-"){I=E[H];break}if(I===void 0)throw new Error("Can't find the boundary between multi-parts");let R=Wn(Ge(I)),P=I.length,U=Vn(m,R,0);for(;_!==void 0;){let H={},J=Dt(m.slice(U+P,_)).split(`\r
`);for(let ie=0;ie<J.length;++ie){let se=J[ie],ae=se.indexOf(":");if(ae!==-1){let re=se.substring(0,ae).trim(),Ce=se.substring(ae+1).trim();H[re]=Ce}}if(U=Vn(m,R,_),U===void 0)break;let te=_+4,ge=U-2;H.data=te<ge?m.slice(te,ge).buffer:new Uint8Array,v.push(H),_=Vn(m,S,U+P)}return v}(u))}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return!1}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="multipart")return!0;if(r.requestHeaders!==void 0){let a=function(h){return h.name==="Accept"},c=r.requestHeaders.find(a);if(c!==void 0)return W(c.value,"multipart/related")}}return!1}canLoadMemory(u){return!1}loadFileAs(){return Zr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return!0}#t(u,r){let a=r;a&&a!=="jpg"||(a="jpeg");let c=new Blob([u],{type:"image/"+a});return window.URL.createObjectURL(c)}load(u,r,a){this.#e=!1;let c=new Image;if(c.onload=()=>{try{if(!this.#e){this.onprogress({lengthComputable:!0,loaded:100,total:100,index:a,source:r});let h=function(m,v,S){let _=m.width,E=m.height,I=document.createElement("canvas");I.width=_,I.height=E;let R=I.getContext("2d");R.drawImage(m,0,0);let P=R.getImageData(0,0,_,E),U={};typeof v=="string"?U.origin={value:v}:(U.fileName={value:v.name},U.fileType={value:v.type},U.fileLastModifiedDate={value:v.lastModified}),U.imageWidth={value:_},U.imageHeight={value:E};let H=S||0;return U.imageUid={value:H},{data:{image:Q_(_,E,H,H_(P),1,H.toString()),info:U},source:v}}(c,r,a);this.onloaditem(h),this.onload(h)}}catch(h){this.onerror({error:h,source:r})}finally{this.onloadend({source:r})}},typeof u=="string")c.src=u;else if(typeof r=="string"){let h=r.split(".").pop().toLowerCase();c.src=this.#t(u,h)}}abort(){this.#e=!0,this.onabort({}),this.onloadend({})}canLoadFile(u){return u.type!==void 0&&u.type.match("image.*")!==null}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="rawimage")return!0;if(r.requestHeaders!==void 0){let v=function(_){return _.name==="Accept"},S=r.requestHeaders.find(v);if(S!==void 0)return W(S.value,"image/")}}let a=Kl(u),c=he(a.pathname),h=c==="jpeg"||c==="jpg"||c==="png"||c==="gif",m=a.searchParams.get("contentType");return m!=null?m==="image/jpeg"||m==="image/png"||m==="image/gif":h}canLoadMemory(u){if(u.filename!==void 0){let r=new File(["from memory"],u.filename);return this.canLoadFile(r)}return!1}loadFileAs(){return Zr.DataURL}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{setOptions(u){}isLoading(){return!0}#e(u,r){let a=new Uint8Array(u),c="";for(let h=0;h<a.byteLength;++h)c+=String.fromCharCode(a[h]);return"data:video/"+r+";base64,"+window.btoa(c)}load(u,r,a){let c=document.createElement("video");if(typeof r=="string"){let h=r.split(".").pop().toLowerCase();c.src=this.#e(u,h)}else c.src=u;c.onloadedmetadata=h=>{try{(function(m,v,S,_,E,I,R){let P=m.videoWidth,U=m.videoHeight,H=Math.ceil(30*m.duration),J={};typeof I=="string"?J.origin={value:I}:(J.fileName={value:I.name},J.fileType={value:I.type},J.fileLastModifiedDate={value:I.lastModified}),J.imageWidth={value:P},J.imageHeight={value:U},J.numberOfFrames={value:H},J.imageUid={value:0};let te=document.createElement("canvas");te.width=P,te.height=U;let ge=te.getContext("2d");m.addEventListener("seeked",function re(Ce){(function(){_({lengthComputable:!0,loaded:ie,total:H,index:R,source:I}),ge.drawImage(m,0,0);let Ie=H_(ge.getImageData(0,0,P,U));ie===0?(se=Q_(P,U,1,Ie,H,R.toString()),v({data:{image:se,info:J},source:I})):se.appendFrameBuffer(Ie,ie),++ie})(),ae+=1/30,ae<=Ce.target.duration?this.currentTime=ae:(S({source:I}),E({source:I}),m.removeEventListener("seeked",re))},!1);let ie=0,se=null,ae=0;m.currentTime=ae})(h.target,this.onloaditem,this.onload,this.onprogress,this.onloadend,r,a)}catch(m){this.onerror({error:m,source:r}),this.onloadend({source:r})}}}abort(){this.onabort({}),this.onloadend({})}canLoadFile(u){return u.type!==void 0&&u.type.match("video.*")!==null}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="rawvideo")return!0;if(r.requestHeaders!==void 0){let c=function(m){return m.name==="Accept"},h=r.requestHeaders.find(c);if(h!==void 0)return W(h.value,"video/")}}let a=he(Kl(u).pathname);return a==="mp4"||a==="ogg"||a==="webm"}canLoadMemory(u){if(u.filename!==void 0){let r=new File(["from memory"],u.filename);return this.canLoadFile(r)}return!1}loadFileAs(){return Zr.DataURL}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}},class{#e=!1;setOptions(u){}isLoading(){return this.#e}#t="";#n=[];#i=null;#r(u,r,a){this.#n.push({filename:this.#t,data:u});let c=100*this.#n.length/this.#i.length;if(this.onprogress({lengthComputable:!0,loaded:c/2,total:100,index:a,item:{loaded:c,total:100,source:r}}),this.#n.length<this.#i.length){let h=this.#n.length;this.#t=this.#i[h].name,this.#i[h].async("arrayBuffer").then(m=>{this.#r(m,r,a)})}else{let h=new Tg;h.onprogress=m=>{m.loaded=50+m.loaded/2,m.index=a,this.onprogress(m)},h.onloaditem=this.onloaditem,h.onload=this.onload,h.onloadend=m=>{this.#e=!1,this.onloadend(m)},h.onerror=this.onerror,h.onabort=this.onabort,h.load(this.#n)}}load(u,r,a){this.onloadstart({source:r}),this.#e=!0,AR().loadAsync(u).then(c=>{this.#n=[],this.#i=c.file(/.*\.dcm/);let h=this.#n.length;this.#t=this.#i[h].name,this.#i[h].async("arrayBuffer").then(m=>{this.#r(m,r,a)})})}abort(){this.#e=!1,this.onabort({}),this.onloadend({})}canLoadFile(u){return he(u.name)==="zip"}canLoadUrl(u,r){if(r!==void 0){if(r.forceLoader!==void 0&&r.forceLoader==="zip")return!0;if(r.requestHeaders!==void 0){let a=function(h){return h.name==="Accept"},c=r.requestHeaders.find(a);if(c!==void 0)return W(c.value,"application/zip")}}return he(Kl(u).pathname)==="zip"}canLoadMemory(u){let r=u["Content-Type"];if(r!==void 0&&r.startsWith("application/zip"))return!0;if(u.filename!==void 0){let a=new File(["from memory"],u.filename);return this.canLoadFile(a)}return!1}loadFileAs(){return Zr.ArrayBuffer}loadUrlAs(){return 1}onloadstart(u){}onprogress(u){}onloaditem(u){}onload(u){}onloadend(u){}onerror(u){}onabort(u){}}],Zr={Text:0,ArrayBuffer:1,DataURL:2};class W_{#e=null;#t=[];#n=null;#i=0;#r=0;#o;getDefaultCharacterSet(){return this.#o}setDefaultCharacterSet(r){this.#o=r}#s(r){this.#e=r,this.#i=0,this.#r=0,this.#c(),this.#u()}#a(r){this.#t.push(r)}#c(){this.#t=[]}#l(r){this.#n=r}#u(){this.#n=null}#d=r=>{this.#i++,this.#i===this.#e.length&&this.onload({source:this.#e})};#f=r=>{this.#r++,this.#r===this.#e.length&&this.onloadend({source:this.#e})};#h(r,a){return c=>{c.source=a,r(c)}}#m(r,a,c){return h=>{r.load(h.target.result,a,c)}}load(r){if(r===void 0||r.length===0)return;this.#s(r),this.onloadstart({source:r});let a=new Dg(this.onprogress);a.setNToLoad(r.length);let c=[];for(let S=0;S<Aa.length;++S)c.push(new Aa[S]);let h=r[0],m=null,v=!1;for(let S=0;S<c.length;++S)if(m=c[S],m.canLoadFile(h)){v=!0,m.setOptions({numberOfFiles:r.length,defaultCharacterSet:this.getDefaultCharacterSet()}),m.onprogress=a.getUndefinedMonoProgressHandler(1),m.onloaditem=this.onloaditem,m.onload=this.#d,m.onloadend=this.#f,m.onerror=this.onerror,m.onabort=this.onabort,this.#l(m);break}if(!v)throw new Error("No loader found for file: "+h.name);for(let S=0;S<r.length;++S){if(h=r[S],!m.canLoadFile(h))throw new Error("Input file of different type: "+h);let _=new FileReader;this.#a(_),_.onprogress=this.#h(a.getMonoProgressHandler(S,0),h),_.onload=this.#m(m,h,S);let E=this.#h(this.onerror,h);_.onerror=R=>{this.#f(),E(R)};let I=this.#h(this.onabort,h);_.onabort=R=>{this.#f(),I(R)},m.loadFileAs()===Zr.Text?_.readAsText(h):m.loadFileAs()===Zr.DataURL?_.readAsDataURL(h):m.loadFileAs()===Zr.ArrayBuffer&&_.readAsArrayBuffer(h)}}abort(){for(let r=0;r<this.#t.length;++r)this.#t[r].readyState===1&&this.#t[r].abort();this.#n&&this.#n.isLoading()&&this.#n.abort()}onloadstart(r){}onprogress(r){}onloaditem(r){}onload(r){}onloadend(r){}onerror(r){}onabort(r){}}class MR{#e;#t={};constructor(r){this.#e=r}loadFiles(r,a){r[0].name.split(".").pop().toLowerCase()==="json"?this.#r(r[0],a):this.#n(r,a)}loadURLs(r,a,c){r[0].split(".").pop().toLowerCase()==="json"?this.#o(r[0],a,c):this.#i(r,a,c)}loadImageObject(r,a){let c=new Tg;this.#s(r,c,"image",a)}getLoadingDataIds(){return Object.keys(this.#t)}abort(r){this.#t[r]!==void 0&&(this.#t[r].loader.abort(),delete this.#t[r])}#n(r,a){let c=new W_;c.setDefaultCharacterSet(this.#e),this.#s(r,c,"image",a)}#i(r,a,c){let h=new P_;h.setDefaultCharacterSet(this.#e),this.#s(r,h,"image",a,c)}#r(r,a){let c=new W_;this.#s([r],c,"state",a)}#o(r,a,c){let h=new P_;this.#s([r],h,"state",a,c)}#s(r,a,c,h,m){let v={loadtype:c,dataid:h};a.onloadstart=S=>{this.#t[h]={loader:a,isFirstItem:!0},this.#a(this.onloadstart,v)(S)},a.onprogress=this.#a(this.onprogress,v),a.onloaditem=S=>{let _={loadtype:c,dataid:h};this.#t[h]!==void 0&&(_.isfirstitem=this.#t[h].isFirstItem),this.#a(this.onloaditem,_)(S),this.#t[h]!==void 0&&this.#t[h].isFirstItem&&(this.#t[h].isFirstItem=!1)},a.onload=this.#a(this.onload,v),a.onloadend=S=>{delete this.#t[h],this.#a(this.onloadend,v)(S)},a.onerror=this.#a(this.onerror,v),a.onabort=this.#a(this.onabort,v);try{a.load(r,m)}catch(S){return this.onerror({error:S,dataid:h}),void this.onloadend({dataid:h})}}#a(r,a){return function(c){let h=Object.keys(a);for(let m=0;m<h.length;++m){let v=h[m];c[v]=a[v]}r(c)}}onloadstart(r){}onprogress(r){}onload(r){}onloaditem(r){}onloadend(r){}onerror(r){}onabort(r){}}function RR(u){return function(r){return Number(r).toPrecision(u)}}function $_(u){let r="";for(let a=0;a<u;++a)a!==0&&(r+=", "),r+="{v"+a+"}";return r}function xg(u,r){let a=u;for(let c=0;c<r.length;++c)a=a.replace("{v"+c+"}",r[c]);return a}class Y_{#e;#t;#n;#i=[];#r;#o=[];#s;#a=new ii;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c;let h=Object.keys(this.#n);for(let m=0;m<h.length;++m){let v=this.#n[h[m]];for(let S=0;S<v.length;++S){let _=v[S].event;_!==void 0&&(this.#i.includes(_)||this.#i.push(_))}}this.addAppListeners()}reset(){this.#o=[],this.#s=void 0}addItemMeta(r){let a;if(r["00020010"]!==void 0)a=r["00080018"]!==void 0?r["00080018"].value[0]:r.length,this.#o[a]=function(c,h){let m=[],v,S=c["00080060"];if(S===void 0)return m;v=S.value[0];let _=h[v]||h["*"];if(!_)return m;for(let I=0;I<_.length;++I){let R=JSON.parse(JSON.stringify(_[I])),P=R.tags;if(P!==void 0&&P.length!==0){let U=[];for(let H=0;H<P.length;++H)c[P[H]]!==void 0?U.push(c[P[H]].value):U.push("");R.format!==void 0&&R.format!==null||(R.format=$_(U.length)),R.value=xg(R.format,U).trim()}m.push(R)}let E=c["00200020"];if(E!==void 0&&E.value.length===2){let I=E.value[0],R=E.value[1];m.push({pos:"cr",value:I,format:"{v0}"}),m.push({pos:"cl",value:Hp(I),format:"{v0}"}),m.push({pos:"bc",value:R,format:"{v0}"}),m.push({pos:"tc",value:Hp(R),format:"{v0}"})}return m}(r,this.#n);else{let c=Object.keys(r);for(let h=0;h<c.length;++h){let m=r[c[h]];if(c[h]==="imageUid"){a=m.value;break}}this.#o[a]=function(h,m){let v=[],S=m.DOM;if(!S)return v;let _=Object.keys(h);for(let E=0;E<S.length;++E){let I=JSON.parse(JSON.stringify(S[E])),R=I.tags;if(R!==void 0&&R.length!==0){let P=[];for(let U=0;U<R.length;++U)for(let H=0;H<_.length;++H)R[U]===_[H]&&P.push(h[_[H]].value);I.format!==void 0&&I.format!==null||(I.format=$_(P.length)),I.value=xg(I.format,P).trim()}v.push(I)}return v}(r,this.#n)}this.#s=a}#c=r=>{r.dataid===this.#t&&r.data!==void 0&&r.data.imageUid!==void 0&&this.#s!==r.data.imageUid&&(this.#s=r.data.imageUid,this.#l(r))};#l=r=>{if(r.dataid!==this.#t)return;let a=this.#o[this.#s];if(a!==void 0){for(let c=0;c<a.length;++c){let h;if(a[c].tags!==void 0)r.type==="positionchange"&&(h=a[c].value);else if(a[c].event!==void 0&&a[c].event===r.type){let m=a[c].format,v=r.value;if(a[c].precision!==void 0){let S=null;S=a[c].precision==="round"?Math.round:RR(a[c].precision),v=v.map(S)}h=xg(m,v)}h!==void 0&&(a[c].value=h)}this.#u({type:"valuechange",data:a})}else console.warn("No slice overlay data for: "+this.#s)};isListening(){return this.#r}addAppListeners(){this.#e.addEventListener("positionchange",this.#c);for(let r=0;r<this.#i.length;++r)this.#e.addEventListener(this.#i[r],this.#l);this.#r=!0}removeAppListeners(){this.#e.removeEventListener("positionchange",this.#c);for(let r=0;r<this.#i.length;++r)this.#e.removeEventListener(this.#i[r],this.#l);this.#r=!1}addEventListener(r,a){this.#a.add(r,a)}removeEventListener(r,a){this.#a.remove(r,a)}#u(r){this.#a.fireEvent(r)}}class X_{divId;orientation;colourMap;opacity;wlPresetName;windowCenter;windowWidth;constructor(r){this.divId=r}}class OR{options;constructor(r){this.options=r}}class PR{dataViewConfigs;tools;binders;viewOnFirstLoadItem;defaultCharacterSet;overlayConfig;rootDocument;constructor(r){this.dataViewConfigs=r}}class FR{#e=null;#t=null;#n=null;#i=null;#r=null;#o=null;#s=new Jd;#a={};#c=new ii;getData(r){return this.#t.get(r)}getImage(r){let a;return this.getData(r)!==void 0&&(a=this.getData(r).image),a}setImage(r,a){this.#t.setImage(r,a)}addData(r){let a=this.#t.getNextDataId();return this.#t.add(a,r),a}getMetaData(r){let a;return this.#t.get(r)!==void 0&&(a=this.#t.get(r).meta),a}getDataIds(){return this.#t.getDataIds()}getDataIdsFromSopUids(r){return this.#t.getDataIdsFromSopUids(r)}canScroll(){return this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().canScroll()}canWindowLevel(){return this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().canWindowLevel()}getAddedScale(){return this.#r.getActiveLayerGroup().getAddedScale()}getBaseScale(){return this.#r.getActiveLayerGroup().getBaseScale()}getOffset(){return this.#r.getActiveLayerGroup().getOffset()}getToolboxController(){return this.#n}getActiveLayerGroup(){return this.#r.getActiveLayerGroup()}setActiveLayerGroup(r){this.#r.setActiveLayerGroup(r)}getViewLayersByDataId(r){return this.#r.getViewLayersByDataId(r)}getViewLayers(r){return this.#r.getViewLayers(r)}getDrawLayersByDataId(r){return this.#r.getDrawLayersByDataId(r)}getDrawLayers(r){return this.#r.getDrawLayers(r)}getLayerGroupByDivId(r){return this.#r.getLayerGroupByDivId(r)}getNumberOfLayerGroups(){return this.#r.getNumberOfLayerGroups()}getStyle(){return this.#s}addToUndoStack=r=>{this.#o!==null&&this.#o.add(r)};removeFromUndoStack=r=>{let a=!1;return this.#o!==null&&(a=this.#o.remove(r)),a};init(r){if(this.#e=r,this.#e.viewOnFirstLoadItem===void 0&&(this.#e.viewOnFirstLoadItem=!0),this.#e.dataViewConfigs===void 0&&(this.#e.dataViewConfigs={}),this.#e.rootDocument===void 0&&(this.#e.rootDocument=document),this.#o=new R_,this.#o.addEventListener("undoadd",this.#d),this.#o.addEventListener("undo",this.#d),this.#o.addEventListener("redo",this.#d),this.#e.tools!==void 0){let a={},c=Object.keys(this.#e.tools);for(let h=0;h<c.length;++h){let m=c[h],v=lR[m];if(v===void 0&&(v=D_[m]),v!==void 0){if(a[m]=new v(this),a[m].addEventListener!==void 0){let _=a[m].getEventNames();for(let E=0;E<_.length;++E)a[m].addEventListener(_[E],this.#d)}let S=this.#e.tools[m];if(S.options!==void 0&&S.options.length!==0){let _,E="raw";if(a[m].getOptionsType!==void 0&&(E=a[m].getOptionsType()),E==="instance"||E==="factory"){_={};for(let I=0;I<S.options.length;++I){let R=S.options[I],P=R;E==="factory"&&(P+="Factory");let U=m.charAt(0).toLowerCase()+m.slice(1),H,J=Zl[U];J!==void 0&&(H=J[P]),H===void 0&&(J=bg[U],J!==void 0&&(H=J[P])),H!==void 0?_[R]=H:p.warn("Could not find option class for: "+R)}}else _=S.options;a[m].setOptions(_)}}else p.warn("Could not initialise unknown tool: "+m)}this.#n=new O_(a)}this.#i=new MR(this.#e.defaultCharacterSet),this.#i.onloadstart=this.#f,this.#i.onprogress=this.#h,this.#i.onloaditem=this.#m,this.#i.onload=this.#p,this.#i.onloadend=this.#y,this.#i.onerror=this.#v,this.#i.onabort=this.#S,this.#t=new ER,this.#t.addEventListener("dataadd",this.#d),this.#t.addEventListener("dataremove",this.#d),this.#t.addEventListener("dataimageset",this.#d),this.#t.addEventListener("dataupdate",this.#d),this.#t.addEventListener("imagecontentchange",this.#d),this.#t.addEventListener("imagegeometrychange",this.#d),this.#t.addEventListener("annotationadd",this.#d),this.#t.addEventListener("annotationupdate",this.#d),this.#t.addEventListener("annotationremove",this.#d),this.#t.addEventListener("annotationgroupeditablechange",this.#d),this.#r=new cR,this.#e.binders!==void 0&&this.#r.setBinders(this.#e.binders)}reset(){this.#r.empty(),this.#a={},this.#o&&(this.#o=new R_,this.#o.addEventListener("undoadd",this.#d),this.#o.addEventListener("undo",this.#d),this.#o.addEventListener("redo",this.#d))}resetLayout(){this.#r.reset(),this.#r.draw()}addEventListener(r,a){this.#c.add(r,a)}removeEventListener(r,a){this.#c.remove(r,a)}loadFiles=r=>{let a=this.#t.getNextDataId();r.length!==0?this.#i.loadFiles(r,a):p.warn("Ignoring empty input file list.")};loadURLs=(r,a)=>{let c=this.#t.getNextDataId();r.length!==0?this.#i.loadURLs(r,c,a):p.warn("Ignoring empty input url list.")};loadFromUri=(r,a)=>{let c=function(m){let v=M_(m);return Object.keys(v).length===0?null:v.query}(r),h=()=>{this.removeEventListener("loadend",h),this.loadURLs([c.state])};c&&c.input!==void 0&&(c.state!==void 0&&this.addEventListener("loadend",h),function(m,v,S){m.type&&m.type==="manifest"?function(_,E){let I="";_.input[0]==="/"&&(I=window.location.protocol+"//"+window.location.host),I+=_.input;let R=new XMLHttpRequest;R.open("GET",decodeURIComponent(I),!0),R.responseType="document",R.onload=function(P){E(function(U,H){let J=[],te=U.getElementsByTagName("wado_query")[0].getAttribute("wadoURL")+"?requestType=WADO&contentType=application/dicom&",ge=U.getElementsByTagName("Patient");ge.length>1&&p.warn("More than one patient, loading first one.");let ie=ge[0].getElementsByTagName("Study");ie.length>1&&p.warn("More than one study, loading first one.");let se=ie[0].getAttribute("StudyInstanceUID"),ae=ie[0].getElementsByTagName("Series");ae.length>1&&p.warn("More than one series, loading first one.");let re=ae[0].getAttribute("SeriesInstanceUID"),Ce=ae[0].getElementsByTagName("Instance"),Ie=Ce.length;H<Ie&&(Ie=H);for(let xe=0;xe<Ie;++xe){let ke=te+"&studyUID="+se+"&seriesUID="+re+"&objectUID="+Ce[xe].getAttribute("SOPInstanceUID");J.push(ke)}return J}(P.target.responseXML,_.nslices))},R.onerror=function(P){p.warn("RequestError while receiving manifest: "+P.target.status)},R.send(null)}(m,v):v(function(_,E){let I=[],R="key";E&&(R=E);let P=decodeURIComponent(_),U=M_(P);if(Object.keys(U).length===0)I.push(P);else{let H=Object.keys(U.query),J=null;for(let te=0;te<H.length;++te)if(U.query[H[te]]instanceof Array){J=H[te];break}if(J){let te=U.query[J],ge=U.base;ge!==""&&J!=="file"&&(ge+="?");let ie,se=!1;for(let ae=0;ae<H.length;++ae)H[ae]!==J&&(se&&(ge+="&"),ge+=H[ae]+"="+U.query[H[ae]],se=!0);for(let ae=0;ae<te.length;++ae)ie=ge,se&&(ie+="&"),R==="key"&&(ie+=J+"="),ie+=te[ae],I.push(ie)}else I.push(P)}return I}(m.input,m.dwvReplaceMode),S)}(c,this.loadURLs,a))};loadImageObject=r=>{let a=this.#t.getNextDataId();this.#i.loadImageObject(r,a)};abortAllLoads(){let r=this.#i.getLoadingDataIds();for(let a of r)this.abortLoad(a)}abortLoad(r){this.#i.abort(r),this.#t.remove(r),this.#r.removeLayersByDataId(r)}fitToContainer(){this.#r.fitToContainer()}initWLDisplay(){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().initialise()}setImageSmoothing(r){this.#r.setImageSmoothing(r),this.#r.draw()}getViewConfigs(r,a){if(this.#e.dataViewConfigs===null||this.#e.dataViewConfigs===void 0)throw new Error("No available data view configuration");let c=[];return this.#e.dataViewConfigs[r]!==void 0?c=this.#e.dataViewConfigs[r]:a||this.#e.dataViewConfigs["*"]===void 0||(c=this.#e.dataViewConfigs["*"]),c}getViewConfig(r,a,c){return this.getViewConfigs(r,c).find(function(h){return h.divId===a})}getDataViewConfigs(){return this.#e.dataViewConfigs}setDataViewConfigs(r){this.#r.empty(),this.#e.dataViewConfigs=r,this.#l(r)}addDataViewConfig(r,a){let c=this.#e.dataViewConfigs;if(c[r]===void 0&&(c[r]=[]),c[r].findIndex(function(h){return h.divId===a.divId})!==-1)throw new Error("Duplicate view config for data "+r+" and div "+a.divId);this.#e.dataViewConfigs[r].push(a),this.#r.getLayerGroupByDivId(a.divId)===void 0&&this.#u(a),this.#t.get(r)!==void 0&&this.render(r,[a])}removeDataViewConfig(r,a){let c=this.#e.dataViewConfigs;if(c[r]===void 0)return;let h=c[r].findIndex(function(m){return m.divId===a});if(h!==-1&&(c[r].splice(h,1),c[r].length===0&&delete c[r],this.#t.get(r)!==void 0)){let m=this.#r.getLayerGroupByDivId(a);if(m!==void 0){let v=m.getViewLayersByDataId(r);v.length===1&&m.removeLayer(v[0]);let S=m.getDrawLayersByDataId(r);if(S.length===1&&m.removeLayer(S[0]),v.length===0&&S.length===0)throw new Error("Expected one layer, got none");m.getNumberOfLayers()===0&&this.#r.removeLayerGroup(m)}}}updateDataViewConfig(r,a,c){let h=this.#e.dataViewConfigs;if(h[r]===void 0)throw new Error("No config for dataId: "+r);let m=h[r].findIndex(function(_){return _.divId===a});if(m===-1)throw new Error("No config for dataId: "+r+" and divId: "+a);let v=h[r][m];for(let _ in c)v[_]=c[_];let S=this.#r.getLayerGroupByDivId(v.divId);if(S!==void 0){let _=S.getViewLayersByDataId(r);_.length===1&&S.removeLayer(_[0]);let E=S.getDrawLayersByDataId(r);if(E.length===1&&S.removeLayer(E[0]),_.length===0&&E.length===0)throw new Error("Expected one layer, got none")}this.#t.get(r)!==void 0&&this.render(r,[v])}#l(r){let a=Object.keys(r),c=[];for(let h=0;h<a.length;++h){let m=r[a[h]];for(let v=0;v<m.length;++v){let S=m[v];c.includes(S.divId)||(this.#u(S),c.push(S.divId))}}}#u(r){let a=this.#e.rootDocument.getElementById(r.divId),c=this.#r.addLayerGroup(a);this.#b(c)}setLayerGroupsBinders(r){let a=[];for(let c=0;c<r.length;++c)x_[r[c]]!==void 0&&a.push(new x_[r[c]]);this.#r.setBinders(a)}render(r,a){if(r==null)throw new Error("Cannot render without data id");let c=this.getData(r).image!==void 0,h=this.getData(r).annotationGroup!==void 0;if(this.#r.getNumberOfLayerGroups()===0&&this.#l(this.#e.dataViewConfigs),a===void 0&&(a=this.getViewConfigs(r)),a.length!==0)for(let m=0;m<a.length;++m){let v=a[m],S=this.#r.getLayerGroupByDivId(v.divId);if(!S)throw new Error("No layer group for "+v.divId);this.#t.get(r)!==void 0&&(c&&S.getViewLayersByDataId(r).length===0?this.#_(r,v):h&&S.getDrawLayersByDataId(r).length===0&&this.addDrawLayer(r,v)),S.draw()}else p.info("Not rendering data: "+r+" (no data view config)")}zoom(r,a,c){let h=this.#r.getActiveLayerGroup(),m=h.getActiveViewLayer().getViewController().getCurrentScrollPosition(),v=new $(a,c,m);h.addScale(r,v),h.draw()}translate(r,a){let c=this.#r.getActiveLayerGroup();c.addTranslation({x:r,y:a,z:0}),c.draw()}setOpacity(r){let a=this.#r.getActiveLayerGroup().getActiveViewLayer();a.setOpacity(r),a.draw()}setDrawings(r,a,c){let h=this.#r.getActiveLayerGroup().getActiveViewLayer(),m=h.getDataId(),v=h.getViewController(),S=function(E,I){let R=[],P=fe().Node.create(E).getChildren(S_);for(let U=0,H=P.length;U<H;++U){let J=P[U].getChildren();for(let te=0,ge=J.length;te<ge;++te){let ie=new Es,se=J[0];ie.id=se.id();let ae=se.getChildren(ko)[0];if(ie.colour=ae.stroke(),se.name()==="line-group"){let re=ae.points();ie.mathShape=new V(re[0],re[1]),ie.referencePoints=[new V(re[2],re[3])]}else if(se.name()==="ruler-group"){let re=ae.points();ie.mathShape=new sn(new V(re[0],re[1]),new V(re[2],re[3]))}else if(se.name()==="rectangle-group")ie.mathShape=new Lo(new V(ae.x(),ae.y()),new V(ae.x()+ae.width(),ae.y()+ae.height()));else if(se.name()==="roi-group"){let re=ae.points(),Ce=[];for(let Ie=0;Ie<re.length;Ie+=2)Ce.push(new V(re[Ie],re[Ie+1]));ie.mathShape=new zi(Ce)}else if(se.name()==="freeHand-group"){p.warn("Converting freehand into ROI shape");let re=ae.points(),Ce=[];for(let Ie=0;Ie<re.length;Ie+=2)Ce.push(new V(re[Ie],re[Ie+1]));ie.mathShape=new zi(Ce)}else if(se.name()==="protractor-group"){let re=ae.points();ie.mathShape=new No([new V(re[0],re[1]),new V(re[2],re[3]),new V(re[4],re[5])])}else if(se.name()==="ellipse-group"){let re=ae.absolutePosition();ie.mathShape=new Vo(new V(re.x,re.y),ae.radiusX(),ae.radiusY())}else if(se.name()==="circle-group"){let re=ae.absolutePosition();ie.mathShape=new Bo(new V(re.x,re.y),ae.radius())}if(I){let re=I[se.id()];ie.textExpr=re.meta.textExpr,ie.quantification=re.meta.quantification}R.push(ie)}}return R}(r,a),_=this.createAnnotationData(m);for(let E of S)E.setViewController(v),_.annotationGroup.add(E);this.#t.add(c,_),this.render(c)}applyJsonState(r,a){let c=new dR(a);c.apply(this,c.fromJSON(r))}onResize=()=>{this.fitToContainer()};onKeydown=r=>{this.#d(r)};defaultOnKeydown=r=>{if(r.ctrlKey){if(r.shiftKey){let a=this.#r.getActiveLayerGroup(),c=a.getActiveViewLayer().getViewController();r.key==="ArrowLeft"?c.moreThanOne(3)&&c.decrementIndex(3):r.key==="ArrowUp"?a.canScroll()&&c.incrementScrollIndex():r.key==="ArrowRight"?a.moreThanOne(3)&&c.incrementIndex(3):r.key==="ArrowDown"&&a.canScroll()&&c.decrementScrollIndex()}else if(r.key==="y")this.#o.redo();else if(r.key==="z")this.#o.undo();else if(r.key===" ")for(let a=0;a<this.#r.getNumberOfLayerGroups();++a)this.#r.getLayerGroup(a).setShowCrosshair(!this.#r.getLayerGroup(a).getShowCrosshair())}};resetDisplay(){this.resetLayout(),this.initWLDisplay()}resetZoom(){this.resetLayout()}setColourMap(r){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().setColourMap(r)}setWindowLevelPreset(r){this.#r.getActiveLayerGroup().getActiveViewLayer().getViewController().setWindowLevelPreset(r)}setTool(r){for(let a=0;a<this.#r.getNumberOfLayerGroups();++a){let c=this.#r.getLayerGroup(a),h;h=r!=="Draw"&&r!=="Livewire"&&r!=="Floodfill"||c.getActiveDrawLayer()===void 0?c.getActiveViewLayer():c.getActiveDrawLayer(),h!==void 0&&this.#n.bindLayerGroup(c,h)}this.#n.setSelectedTool(r)}setToolFeatures(r){this.#n.setToolFeatures(r)}undo(){this.#o.undo()}redo(){this.#o.redo()}getStackSize(){return this.#o.getStackSize()}getCurrentStackIndex(){return this.#o.getCurrentStackIndex()}getOverlayData(r){let a;return this.#a!==void 0&&(a=this.#a[r]),a}toggleOverlayListeners(r){let a=this.getOverlayData(r);a!==void 0&&(a.isListening()?a.removeAppListeners():a.addAppListeners())}createAnnotationData(r){let a=this.getData(r).image.getMeta(),c=new Eg({});return c.annotationGroup=new Kd,c.annotationGroup.setMetaValue("Modality","SR"),c.annotationGroup.setMetaValue("PatientID",a.PatientID),c.annotationGroup.setMetaValue("StudyInstanceUID",a.StudyInstanceUID),c.annotationGroup.setMetaValue("ReferencedSeriesSequence",{value:[{SeriesInstanceUID:a.SeriesInstanceUID}]}),c}addAndRenderAnnotationData(r,a,c){let h=this.addData(r),m=this.getViewConfigs(c).find(S=>S.divId===a);if(m===void 0)throw new Error("No reference data view config for draw");let v=new X_(a);v.orientation=m.orientation,this.addDataViewConfig(h,v),this.render(h)}#d=r=>{this.#c.fireEvent(r)};#f=r=>{this.#e.overlayConfig!==void 0&&(this.#a[r.dataid]=new Y_(this,r.dataid,this.#e.overlayConfig)),r.type="loadstart",this.#d(r)};#h=r=>{r.type="loadprogress",this.#d(r)};#m=r=>{r.data===void 0&&p.error("Missing loaditem event data."),r.loadtype===void 0&&p.error("Missing loaditem event load type.");let a=r.isfirstitem,c=null;r.loadtype==="image"?(a?this.#t.add(r.dataid,r.data):this.#t.update(r.dataid,r.data),c=r.data.meta):r.loadtype==="state"&&(this.applyJsonState(r.data,r.dataid),c="state"),this.#d({type:"loaditem",data:c,source:r.source,loadtype:r.loadtype,dataid:r.dataid,isfirstitem:r.isfirstitem,warn:r.warn}),this.#a!==void 0&&this.#a[r.dataid]!==void 0&&this.#a[r.dataid].addItemMeta(c),r.loadtype==="image"&&this.getViewConfigs(r.dataid).length!==0&&a&&this.#e.viewOnFirstLoadItem&&this.render(r.dataid)};#p=r=>{r.type="load",this.#d(r)};#y=r=>{r.type="loadend",this.#d(r)};#v=r=>{r.type===void 0&&(r.type="error"),this.#d(r)};#S=r=>{r.type===void 0&&(r.type="abort"),this.#d(r)};#b(r){r.addEventListener("zoomchange",this.#d),r.addEventListener("offsetchange",this.#d),r.addEventListener("renderstart",this.#d),r.addEventListener("renderend",this.#d);for(let a=0;a<Ia.length;++a)r.addEventListener(Ia[a],this.#d);this.#n&&this.#n.hasTool("Draw")&&(r.addEventListener("drawcreate",this.#d),r.addEventListener("drawdelete",this.#d)),r.addEventListener("wlchange",a=>{let c=iu(a.srclayerid).groupDivId,h=this.getViewConfig(a.dataid,c,!0);h!==void 0&&(h.windowCenter=void 0,h.windowWidth=void 0,h.wlPresetName=void 0,a.value.length===3&&(h.windowCenter=a.value[0],h.windowWidth=a.value[1],h.wlPresetName=a.value[2]))}),r.addEventListener("opacitychange",a=>{let c=iu(a.srclayerid).groupDivId,h=this.getViewConfig(a.dataid,c,!0);h!==void 0&&(h.opacity=a.value[0])}),r.addEventListener("colourmapchange",a=>{let c=iu(a.srclayerid).groupDivId,h=this.getViewConfig(a.dataid,c,!0);h!==void 0&&(h.colourMap=a.value[0])})}#_(r,a){let c=this.#t.get(r);if(!c)throw new Error("Cannot initialise layer with missing data, id: "+r);let h=this.#r.getLayerGroupByDivId(a.divId);if(!h)throw new Error("Cannot initialise layer with missing group, id: "+a.divId);let m=c.image.getGeometry();this.#r.unbindLayerGroups();let v=new f_().create(c.meta,c.image),S=Vb(m.getOrientation(),Fb(a.orientation));v.setOrientation(S),c.image.getMeta().Modality==="SEG"&&v.setAlphaFunction(function(te){return te[0]===0&&te[1]===0&&te[2]===0?0:255});let _=h.getNumberOfViewLayers()===0,E=1;a.opacity!==void 0?E=a.opacity:_||(E=.5);let I=h.addViewLayer();I.setView(v,r);let R=m.getSize(S).get2D(),P=m.getSpacing(S).get2D();I.initialise(R,P,E);let U=I.getViewController();if(a.wlPresetName!==void 0)U.setWindowLevelPreset(a.wlPresetName);else if(a.windowCenter!==void 0&&a.windowWidth!==void 0){let te=new g(a.windowCenter,a.windowWidth);U.setWindowLevel(te)}a.colourMap!==void 0?U.setColourMap(a.colourMap):_||(c.image.getMeta().Modality==="PT"?U.setColourMap("hot"):U.setColourMap("rainbow")),this.#t.addEventListener("dataimageset",I.onimageset);let H=[U.getCurrentIndex().getValues(),U.getCurrentPosition().getValues()];h.updateLayersToPositionChange({value:H,srclayerid:I.getId()}),this.#r.fitToContainer(),I.setOffset(h.getOffset());let J=this.#g(m.getOrientation(),a.orientation);if(this.#D(J,I),_)I.setScale(h.getScale());else{let te=h.getBaseViewLayer();I.initScale(h.getScale(),te.getAbsoluteZoomOffset())}this.#r.bindLayerGroups(),this.#n&&this.#n.bindLayerGroup(h,I),this.#d({type:"viewlayeradd",layerid:I.getId(),layergroupid:h.getDivId(),dataid:r}),_&&this.#n&&this.#n.init()}addDrawLayer(r,a){let c=this.#r.getLayerGroupByDivId(a.divId);if(!c)throw new Error("Cannot initialise layer with missing group, id: "+a.divId);let h=this.#t.get(r);if(!h)throw new Error("Cannot initialise layer with missing data, id: "+r);let m=h.annotationGroup.getMetaValue("ReferencedSeriesSequence").value[0].SeriesInstanceUID,v=c.searchViewLayers({SeriesInstanceUID:m});if(v.length===0)return void console.warn("No loaded data that matches the measurement reference series UID");let S=v[0],_=S.getDataId();this.#r.unbindLayerGroups();let E=S.getViewController();h.annotationGroup.setViewController(E);let I=this.#t.get(_);if(!I)throw new Error("Cannot initialise layer without reference data, id: "+_);let R=I.image.getGeometry(),P=Vb(R.getOrientation(),Fb(a.orientation)),U=R.getSize(P).get2D(),H=R.getSpacing(P).get2D(),J=c.addDrawLayer();J.initialise(U,H,S.getId());let te=new hg(R,P);J.setPlaneHelper(te);let ge=[E.getCurrentIndex().getValues(),E.getCurrentPosition().getValues()];c.updateLayersToPositionChange({value:ge,srclayerid:J.getId()}),this.#r.fitToContainer(),J.setOffset(c.getOffset());let ie=this.#g(R.getOrientation(),a.orientation);this.#D(ie,J),J.initScale(c.getScale(),S.getAbsoluteZoomOffset()),J.setAnnotationGroup(h.annotationGroup,r,this.addToUndoStack),J.setCurrentPosition(E.getCurrentPosition(),E.getCurrentIndex()),this.#r.bindLayerGroups(),this.#n&&this.#n.bindLayerGroup(c,J),this.#d({type:"drawlayeradd",layerid:J.getId(),layergroupid:c.getDivId(),dataid:r})}#g(r,a){let c=kb(r.asOneAndZeros());if(c===void 0)throw new Error("Unsupported undefined orientation code");let h=a===void 0,m=!h&&a===Dr.Axial,v=!h&&a===Dr.Coronal,S=!h&&a===Dr.Sagittal,_={x:!1,y:!1},E={x:!1,y:!1,z:!1};return c==="LPS"?(v||S)&&(E.z=!0,_.y=!0):c==="LAI"?h||m?_.y=!0:v?E.z=!0:S&&(E.z=!0,_.x=!0):c==="RPI"?h||m?_.x=!0:v?(E.z=!0,_.x=!0):S&&(E.z=!0):c==="RAS"?(_.x=!0,_.y=!0,(v||S)&&(E.z=!0)):c==="LSA"?(_.y=!0,h||v?E.z=!0:m?E.y=!0:S&&(_.x=!0,E.y=!0,E.z=!0)):c==="RSP"?h||v?(_.x=!0,_.y=!0,E.x=!0,E.z=!0):m?(_.x=!0,E.x=!0):S&&(_.y=!0,E.z=!0):c==="RIA"?(_.x=!0,h||v?E.x=!0:m?(_.y=!0,E.x=!0,E.y=!0):S&&(E.y=!0)):c==="PSL"?(E.z=!0,(h||S||v)&&(_.y=!0)):c==="PIR"?(E.z=!0,(m||v)&&(_.x=!0)):c==="ASR"?(_.x=!0,_.y=!0,(h||S||v)&&(E.z=!0)):c==="AIL"?h||S?(_.x=!0,E.z=!0):m?_.y=!0:v&&(E.z=!0):p.warn("Unsupported orientation code: "+c+", display could be incorrect"),{scale:E,offset:_}}#D(r,a){r.offset.x&&a.addFlipOffsetX(),r.offset.y&&a.addFlipOffsetY(),r.scale.x&&a.flipScaleX(),r.scale.y&&a.flipScaleY(),r.scale.z&&a.flipScaleZ()}}class Ag{#e;#t;constructor(r){this.#e=r;let a=r.getMeta();a.custom===void 0&&(a.custom={}),a.custom.segments===void 0&&(a.custom.segments=[]),this.#t=a.custom.segments}#n(r){return this.#t.findIndex(function(a){return a.number===r})}hasSegment(r){return this.#n(r)!==-1}getNumberOfSegments(){return this.#t.length}maskHasSegments(r){let a=[],c=[];for(let m=0;m<r.length;++m){let v=this.getSegment(r[m]);v!==void 0?v.displayValue!==void 0?a.push(v.displayValue):a.push(v.displayRGBValue):(p.warn("Unknown segment in maskHasSegments: "+r[m]),c.push(m))}let h=this.#e.hasValues(a);for(let m=0;m<c.length;++m)h.splice(c[m],0,!1);return h}getSegment(r){let a,c=this.#n(r);return c!==-1&&(a=this.#t[c]),a}addSegment(r){this.#n(r.number)===-1?this.#t.push(r):p.warn("Not adding segment, it is allready in the segments list: "+r.number)}removeSegment(r){let a=this.#n(r);a!==-1?this.#t.splice(a,1):p.warn("Cannot remove segment, it is not in the segments list: "+r)}updateSegment(r){let a=this.#n(r.number);a!==-1?this.#t[a]=r:p.warn("Cannot update segment, it is not in the segments list: "+r.number)}}class kR{#e;#t;#n;#i;constructor(r,a,c){this.#e=r,this.#t=a,this.#n=c!==void 0&&c,a.displayRGBValue!==void 0?this.#i=r.getOffsets(a.displayRGBValue):this.#i=r.getOffsets(a.displayValue)}getName(){return"Delete-segment"}isValid(){return this.#e.getMeta().custom.segments.some(r=>r.number===this.#t.number)}execute(){this.#i.length!==0&&(this.#t.displayRGBValue!==void 0?this.#e.setAtOffsets(this.#i,N):this.#e.setAtOffsets(this.#i,0)),new Ag(this.#e).removeSegment(this.#t.number),this.#n||this.onExecute({type:"masksegmentdelete",segmentnumber:this.#t.number})}undo(){this.#i.length!==0&&(this.#t.displayRGBValue!==void 0?this.#e.setAtOffsets(this.#i,this.#t.displayRGBValue):this.#e.setAtOffsets(this.#i,this.#t.displayValue)),new Ag(this.#e).addSegment(this.#t),this.onUndo({type:"masksegmentredraw",segmentnumber:this.#t.number})}onExecute(r){}onUndo(r){}}class LR{#e;#t;#n;#i;#r;#o;constructor(r,a,c,h){this.#e=r,this.#t=a,this.#n=c,this.#r=h!==void 0&&h,a.displayRGBValue!==void 0?this.#i=a.displayRGBValue:this.#i=a.displayValue,this.#o=r.getOffsets(this.#i)}getName(){return"Change-segment-colour"}isValid(){return this.#o.length!==0}execute(){this.#e.setAtOffsets(this.#o,this.#n),typeof this.#n=="number"?this.#t.displayValue=this.#n:this.#t.displayRGBValue=this.#n,this.#r||this.onExecute({type:"changemasksegmentcolour",segmentnumber:this.#t.number,value:[this.#n]})}undo(){this.#e.setAtOffsets(this.#o,this.#i),typeof this.#i=="number"?this.#t.displayValue=this.#i:this.#t.displayRGBValue=this.#i,this.onUndo({type:"changemasksegmentcolour",segmentnumber:this.#t.number,value:[this.#i]})}onExecute(r){}onUndo(r){}}class NR{#e=[];#t;#n(r){return this.#e.findIndex(function(a){return a.number===r})}isHidden(r){return this.#n(r)!==-1}addToHidden(r){this.isHidden(r.number)?p.warn("Not hidding segment, it is allready in the hidden list: "+r.number):(this.#e.push(r),this.#t=r.displayValue!==void 0)}removeFromHidden(r){let a=this.#n(r);a!==-1?this.#e.splice(a,1):p.warn("Cannot remove segment, it is not in the hidden list: "+r)}getAlphaFunc(){let r=[];this.#t?r[0]=0:r[0]={r:0,g:0,b:0};for(let c of this.#e)this.#t?r.push(c.displayValue):r.push(c.displayRGBValue);let a;return a=this.#t?function(c){for(let h=0;h<r.length;++h)if(c===r[h])return 0;return 255}:function(c){for(let h=0;h<r.length;++h)if(c[0]===r[h].r&&c[1]===r[h].g&&c[2]===r[h].b)return 0;return 255},a}}class VR{x;y}class BR{x;y;z}return l}()})});function Lg(n,e){return Object.is(n,e)}var zn=null,rc=!1,Ng=1,mi=Symbol("SIGNAL");function Ct(n){let e=zn;return zn=n,e}function J_(){return zn}function YR(){return rc}var Ts={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Vg(n){if(rc)throw new Error("");if(zn===null)return;zn.consumerOnSignalRead(n);let e=zn.nextProducerIndex++;if(gu(zn),e<zn.producerNode.length&&zn.producerNode[e]!==n&&oc(zn)){let t=zn.producerNode[e];pu(t,zn.producerIndexOfThis[e])}zn.producerNode[e]!==n&&(zn.producerNode[e]=n,zn.producerIndexOfThis[e]=oc(zn)?iD(n,zn,e):0),zn.producerLastReadVersion[e]=n.version}function XR(){Ng++}function Bg(n){if(!(oc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ng)){if(!n.producerMustRecompute(n)&&!ac(n)){Fg(n);return}n.producerRecomputeValue(n),Fg(n)}}function eD(n){if(n.liveConsumerNode===void 0)return;let e=rc;rc=!0;try{for(let t of n.liveConsumerNode)t.dirty||nD(t)}finally{rc=e}}function tD(){return zn?.consumerAllowSignalWrites!==!1}function nD(n){n.dirty=!0,eD(n),n.consumerMarkedDirty?.(n)}function Fg(n){n.dirty=!1,n.lastCleanEpoch=Ng}function Ra(n){return n&&(n.nextProducerIndex=0),Ct(n)}function sc(n,e){if(Ct(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(oc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)pu(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ac(n){gu(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(Bg(t),i!==t.version))return!0}return!1}function Oa(n){if(gu(n),oc(n))for(let e=0;e<n.producerNode.length;e++)pu(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function iD(n,e,t){if(rD(n),n.liveConsumerNode.length===0&&oD(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=iD(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function pu(n,e){if(rD(n),n.liveConsumerNode.length===1&&oD(n))for(let i=0;i<n.producerNode.length;i++)pu(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];gu(o),o.producerIndexOfThis[i]=e}}function oc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function gu(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function rD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function oD(n){return n.producerNode!==void 0}function Ug(n){let e=Object.create(ZR);e.computation=n;let t=()=>{if(Bg(e),Vg(e),e.value===mu)throw e.error;return e.value};return t[mi]=e,t}var Og=Symbol("UNSET"),Pg=Symbol("COMPUTING"),mu=Symbol("ERRORED"),ZR=Bt(we({},Ts),{value:Og,dirty:!0,error:null,equal:Lg,producerMustRecompute(n){return n.value===Og||n.value===Pg},producerRecomputeValue(n){if(n.value===Pg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Pg;let t=Ra(n),i;try{i=n.computation()}catch(o){i=mu,n.error=o}finally{sc(n,t)}if(e!==Og&&e!==mu&&i!==mu&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function KR(){throw new Error}var sD=KR;function aD(){sD()}function lD(n){sD=n}var JR=null;function cD(n){let e=Object.create(uD);e.value=n;let t=()=>(Vg(e),e.value);return t[mi]=e,t}function qg(n,e){tD()||aD(),n.equal(n.value,e)||(n.value=e,eO(n))}function dD(n,e){tD()||aD(),qg(n,e(n.value))}var uD=Bt(we({},Ts),{equal:Lg,value:void 0});function eO(n){n.version++,XR(),eD(n),JR?.()}function hD(n,e,t){let i=Object.create(tO);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;let o=f=>{i.cleanupFn=f};function s(f){return f.fn===null&&f.schedule===null}function l(f){s(f)||(Oa(f),f.cleanupFn(),f.fn=null,f.schedule=null,f.cleanupFn=kg)}let d=()=>{if(i.fn===null)return;if(YR())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!ac(i))return;i.hasRun=!0;let f=Ra(i);try{i.cleanupFn(),i.cleanupFn=kg,i.fn(o)}finally{sc(i,f)}};return i.ref={notify:()=>nD(i),run:d,cleanup:()=>i.cleanupFn(),destroy:()=>l(i),[mi]:i},i.ref}var kg=()=>{},tO=Bt(we({},Ts),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:kg});function ze(n){return typeof n=="function"}function yu(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vu=yu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,o)=>`${o+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(ze(i))try{i()}catch(s){e=s instanceof vu?s.errors:[s]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let s of o)try{fD(s)}catch(l){e=e??[],l instanceof vu?e=[...e,...l.errors]:e.push(l)}}if(e)throw new vu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)fD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xs(t,e)}remove(e){let{_finalizers:t}=this;t&&xs(t,e),e instanceof n&&e._removeParent(this)}};Yt.EMPTY=(()=>{let n=new Yt;return n.closed=!0,n})();var Gg=Yt.EMPTY;function Su(n){return n instanceof Yt||n&&"closed"in n&&ze(n.remove)&&ze(n.add)&&ze(n.unsubscribe)}function fD(n){ze(n)?n():n.unsubscribe()}var sr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Pa={setTimeout(n,e,...t){let{delegate:i}=Pa;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Pa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function bu(n){Pa.setTimeout(()=>{let{onUnhandledError:e}=sr;if(e)e(n);else throw n})}function Kr(){}var mD=jg("C",void 0,void 0);function pD(n){return jg("E",void 0,n)}function gD(n){return jg("N",n,void 0)}function jg(n,e,t){return{kind:n,value:e,error:t}}var As=null;function Fa(n){if(sr.useDeprecatedSynchronousErrorHandling){let e=!As;if(e&&(As={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=As;if(As=null,t)throw i}}else n()}function yD(n){sr.useDeprecatedSynchronousErrorHandling&&As&&(As.errorThrown=!0,As.error=n)}var Ms=class extends Yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Su(e)&&e.add(this)):this.destination=rO}static create(e,t,i){return new Jr(e,t,i)}next(e){this.isStopped?Hg(gD(e),this):this._next(e)}error(e){this.isStopped?Hg(pD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hg(mD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nO=Function.prototype.bind;function zg(n,e){return nO.call(n,e)}var Qg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){_u(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){_u(i)}else _u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_u(t)}}},Jr=class extends Ms{constructor(e,t,i){super();let o;if(ze(e)||!e)o={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&sr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&zg(e.next,s),error:e.error&&zg(e.error,s),complete:e.complete&&zg(e.complete,s)}):o=e}this.destination=new Qg(o)}};function _u(n){sr.useDeprecatedSynchronousErrorHandling?yD(n):bu(n)}function iO(n){throw n}function Hg(n,e){let{onStoppedNotification:t}=sr;t&&Pa.setTimeout(()=>t(n,e))}var rO={closed:!0,next:Kr,error:iO,complete:Kr};var ka=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ar(n){return n}function vD(n){return n.length===0?ar:n.length===1?n[0]:function(t){return n.reduce((i,o)=>o(i),t)}}var Ke=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,o){let s=sO(t)?t:new Jr(t,i,o);return Fa(()=>{let{operator:l,source:d}=this;s.add(l?l.call(s,d):d?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=SD(i),new i((o,s)=>{let l=new Jr({next:d=>{try{t(d)}catch(f){s(f),l.unsubscribe()}},error:s,complete:o});this.subscribe(l)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[ka](){return this}pipe(...t){return vD(t)(this)}toPromise(t){return t=SD(t),new t((i,o)=>{let s;this.subscribe(l=>s=l,l=>o(l),()=>i(s))})}}return n.create=e=>new n(e),n})();function SD(n){var e;return(e=n??sr.Promise)!==null&&e!==void 0?e:Promise}function oO(n){return n&&ze(n.next)&&ze(n.error)&&ze(n.complete)}function sO(n){return n&&n instanceof Ms||oO(n)&&Su(n)}function Wg(n){return ze(n?.lift)}function dt(n){return e=>{if(Wg(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ft(n,e,t,i,o){return new $g(n,e,t,i,o)}var $g=class extends Ms{constructor(e,t,i,o,s,l){super(e),this.onFinalize=s,this.shouldUnsubscribe=l,this._next=t?function(d){try{t(d)}catch(f){e.error(f)}}:super._next,this._error=o?function(d){try{o(d)}catch(f){e.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function bD(){return dt((n,e)=>{let t=null;n._refCount++;let i=ft(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,s=t;t=null,o&&(!s||o===s)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Rs=class extends Ke{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Wg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yt;let t=this.getSubject();e.add(this.source.subscribe(ft(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yt.EMPTY)}return e}refCount(){return bD()(this)}};var _D=yu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class n extends Ke{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Du(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new _D}next(t){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:o,observers:s}=this;return i||o?Gg:(this.currentObservers=null,s.push(t),new Yt(()=>{this.currentObservers=null,xs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:o,isStopped:s}=this;i?t.error(o):s&&t.complete()}asObservable(){let t=new Ke;return t.source=this,t}}return n.create=(e,t)=>new Du(e,t),n})(),Du=class extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Gg}};var Ri=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var lc={now(){return(lc.delegate||Date).now()},delegate:void 0};var Os=class extends Oe{constructor(e=1/0,t=1/0,i=lc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:s,_windowTime:l}=this;t||(i.push(e),!o&&i.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:o}=this,s=o.slice();for(let l=0;l<s.length&&!e.closed;l+=i?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:o}=this,s=(o?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!o){let l=t.now(),d=0;for(let f=1;f<i.length&&i[f]<=l;f+=2)d=f;d&&i.splice(0,d+1)}}};var Cu=class extends Yt{constructor(e,t){super()}schedule(e,t=0){return this}};var cc={setInterval(n,e,...t){let{delegate:i}=cc;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=cc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wu=class extends Cu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return cc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&cc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,o;try{this.work(e)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xs(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var La=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};La.now=lc.now;var Iu=class extends La{constructor(e,t=La.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var Ps=new Iu(wu),DD=Ps;var Fs=new Ke(n=>n.complete());function Eu(n){return n&&ze(n.schedule)}function Yg(n){return n[n.length-1]}function Tu(n){return ze(Yg(n))?n.pop():void 0}function wr(n){return Eu(Yg(n))?n.pop():void 0}function CD(n,e){return typeof Yg(n)=="number"?n.pop():e}function ID(n,e,t,i){function o(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function d(g){try{p(i.next(g))}catch(y){l(y)}}function f(g){try{p(i.throw(g))}catch(y){l(y)}}function p(g){g.done?s(g.value):o(g.value).then(d,f)}p((i=i.apply(n,e||[])).next())})}function wD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ks(n){return this instanceof ks?(this.v=n,this):new ks(n)}function ED(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),o[Symbol.asyncIterator]=function(){return this},o;function l(b){return function(C){return Promise.resolve(C).then(b,y)}}function d(b,C){i[b]&&(o[b]=function(w){return new Promise(function(x,M){s.push([b,w,x,M])>1||f(b,w)})},C&&(o[b]=C(o[b])))}function f(b,C){try{p(i[b](C))}catch(w){D(s[0][3],w)}}function p(b){b.value instanceof ks?Promise.resolve(b.value.v).then(g,y):D(s[0][2],b)}function g(b){f("next",b)}function y(b){f("throw",b)}function D(b,C){b(C),s.shift(),s.length&&f(s[0][0],s[0][1])}}function TD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wD=="function"?wD(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(l){return new Promise(function(d,f){l=n[s](l),o(d,f,l.done,l.value)})}}function o(s,l,d,f){Promise.resolve(f).then(function(p){s({value:p,done:d})},l)}}var Na=n=>n&&typeof n.length=="number"&&typeof n!="function";function xu(n){return ze(n?.then)}function Au(n){return ze(n[ka])}function Mu(n){return Symbol.asyncIterator&&ze(n?.[Symbol.asyncIterator])}function Ru(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ou=aO();function Pu(n){return ze(n?.[Ou])}function Fu(n){return ED(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:o}=yield ks(t.read());if(o)return yield ks(void 0);yield yield ks(i)}}finally{t.releaseLock()}})}function ku(n){return ze(n?.getReader)}function kt(n){if(n instanceof Ke)return n;if(n!=null){if(Au(n))return lO(n);if(Na(n))return cO(n);if(xu(n))return dO(n);if(Mu(n))return xD(n);if(Pu(n))return uO(n);if(ku(n))return hO(n)}throw Ru(n)}function lO(n){return new Ke(e=>{let t=n[ka]();if(ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cO(n){return new Ke(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function dO(n){return new Ke(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,bu)})}function uO(n){return new Ke(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function xD(n){return new Ke(e=>{fO(n,e).catch(t=>e.error(t))})}function hO(n){return xD(Fu(n))}function fO(n,e){var t,i,o,s;return ID(this,void 0,void 0,function*(){try{for(t=TD(n);i=yield t.next(),!i.done;){let l=i.value;if(e.next(l),e.closed)return}}catch(l){o={error:l}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(o)throw o.error}}e.complete()})}function wi(n,e,t,i=0,o=!1){let s=e.schedule(function(){t(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!o)return s}function Lu(n,e=0){return dt((t,i)=>{t.subscribe(ft(i,o=>wi(i,n,()=>i.next(o),e),()=>wi(i,n,()=>i.complete(),e),o=>wi(i,n,()=>i.error(o),e)))})}function Nu(n,e=0){return dt((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function AD(n,e){return kt(n).pipe(Nu(e),Lu(e))}function MD(n,e){return kt(n).pipe(Nu(e),Lu(e))}function RD(n,e){return new Ke(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function OD(n,e){return new Ke(t=>{let i;return wi(t,e,()=>{i=n[Ou](),wi(t,e,()=>{let o,s;try{({value:o,done:s}=i.next())}catch(l){t.error(l);return}s?t.complete():t.next(o)},0,!0)}),()=>ze(i?.return)&&i.return()})}function Vu(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ke(t=>{wi(t,e,()=>{let i=n[Symbol.asyncIterator]();wi(t,e,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function PD(n,e){return Vu(Fu(n),e)}function FD(n,e){if(n!=null){if(Au(n))return AD(n,e);if(Na(n))return RD(n,e);if(xu(n))return MD(n,e);if(Mu(n))return Vu(n,e);if(Pu(n))return OD(n,e);if(ku(n))return PD(n,e)}throw Ru(n)}function pi(n,e){return e?FD(n,e):kt(n)}function dn(...n){let e=wr(n);return pi(n,e)}function dc(n,e){let t=ze(n)?n:()=>n,i=o=>o.error(t());return new Ke(e?o=>e.schedule(i,0,o):i)}function Va(n){return!!n&&(n instanceof Ke||ze(n.lift)&&ze(n.subscribe))}function kD(n){return n instanceof Date&&!isNaN(n)}function mt(n,e){return dt((t,i)=>{let o=0;t.subscribe(ft(i,s=>{i.next(n.call(e,s,o++))}))})}var{isArray:mO}=Array;function pO(n,e){return mO(e)?n(...e):n(e)}function Ba(n){return mt(e=>pO(n,e))}var{isArray:gO}=Array,{getPrototypeOf:yO,prototype:vO,keys:SO}=Object;function Bu(n){if(n.length===1){let e=n[0];if(gO(e))return{args:e,keys:null};if(bO(e)){let t=SO(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function bO(n){return n&&typeof n=="object"&&yO(n)===vO}function Uu(n,e){return n.reduce((t,i,o)=>(t[i]=e[o],t),{})}function Ls(...n){let e=wr(n),t=Tu(n),{args:i,keys:o}=Bu(n);if(i.length===0)return pi([],e);let s=new Ke(_O(i,e,o?l=>Uu(o,l):ar));return t?s.pipe(Ba(t)):s}function _O(n,e,t=ar){return i=>{LD(e,()=>{let{length:o}=n,s=new Array(o),l=o,d=o;for(let f=0;f<o;f++)LD(e,()=>{let p=pi(n[f],e),g=!1;p.subscribe(ft(i,y=>{s[f]=y,g||(g=!0,d--),d||i.next(t(s.slice()))},()=>{--l||i.complete()}))},i)},i)}}function LD(n,e,t){n?wi(t,n,e):e()}function ND(n,e,t,i,o,s,l,d){let f=[],p=0,g=0,y=!1,D=()=>{y&&!f.length&&!p&&e.complete()},b=w=>p<i?C(w):f.push(w),C=w=>{s&&e.next(w),p++;let x=!1;kt(t(w,g++)).subscribe(ft(e,M=>{o?.(M),s?b(M):e.next(M)},()=>{x=!0},void 0,()=>{if(x)try{for(p--;f.length&&p<i;){let M=f.shift();l?wi(e,l,()=>C(M)):C(M)}D()}catch(M){e.error(M)}}))};return n.subscribe(ft(e,b,()=>{y=!0,D()})),()=>{d?.()}}function Ir(n,e,t=1/0){return ze(e)?Ir((i,o)=>mt((s,l)=>e(i,s,o,l))(kt(n(i,o))),t):(typeof e=="number"&&(t=e),dt((i,o)=>ND(i,o,n,t)))}function qu(n=1/0){return Ir(ar,n)}function VD(){return qu(1)}function Er(...n){return VD()(pi(n,wr(n)))}function jo(n){return new Ke(e=>{kt(n()).subscribe(e)})}function uc(...n){let e=Tu(n),{args:t,keys:i}=Bu(n),o=new Ke(s=>{let{length:l}=t;if(!l){s.complete();return}let d=new Array(l),f=l,p=l;for(let g=0;g<l;g++){let y=!1;kt(t[g]).subscribe(ft(s,D=>{y||(y=!0,p--),d[g]=D},()=>f--,void 0,()=>{(!f||!y)&&(p||s.next(i?Uu(i,d):d),s.complete())}))}});return e?o.pipe(Ba(e)):o}var DO=["addListener","removeListener"],CO=["addEventListener","removeEventListener"],wO=["on","off"];function Tr(n,e,t,i){if(ze(t)&&(i=t,t=void 0),i)return Tr(n,e,t).pipe(Ba(i));let[o,s]=TO(n)?CO.map(l=>d=>n[l](e,d,t)):IO(n)?DO.map(BD(n,e)):EO(n)?wO.map(BD(n,e)):[];if(!o&&Na(n))return Ir(l=>Tr(l,e,t))(kt(n));if(!o)throw new TypeError("Invalid event target");return new Ke(l=>{let d=(...f)=>l.next(1<f.length?f:f[0]);return o(d),()=>s(d)})}function BD(n,e){return t=>i=>n[t](e,i)}function IO(n){return ze(n.addListener)&&ze(n.removeListener)}function EO(n){return ze(n.on)&&ze(n.off)}function TO(n){return ze(n.addEventListener)&&ze(n.removeEventListener)}function Gu(n=0,e,t=DD){let i=-1;return e!=null&&(Eu(e)?t=e:i=e),new Ke(o=>{let s=kD(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){o.closed||(o.next(l++),0<=i?this.schedule(void 0,i):o.complete())},s)})}function Ii(...n){let e=wr(n),t=CD(n,1/0),i=n;return i.length?i.length===1?kt(i[0]):qu(t)(pi(i,e)):Fs}var Ns=new Ke(Kr);function yn(n,e){return dt((t,i)=>{let o=0;t.subscribe(ft(i,s=>n.call(e,s,o++)&&i.next(s)))})}function UD(n){return dt((e,t)=>{let i=!1,o=null,s=null,l=!1,d=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let p=o;o=null,t.next(p)}l&&t.complete()},f=()=>{s=null,l&&t.complete()};e.subscribe(ft(t,p=>{i=!0,o=p,s||kt(n(p)).subscribe(s=ft(t,d,f))},()=>{l=!0,(!i||!s||s.closed)&&t.complete()}))})}function ju(n,e=Ps){return UD(()=>Gu(n,e))}function zu(n){return dt((e,t)=>{let i=null,o=!1,s;i=e.subscribe(ft(t,void 0,void 0,l=>{s=kt(n(l,zu(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Xg(n,e){return ze(e)?Ir(n,e,1):Ir(n,1)}function qD(n){return new Ke(e=>n.subscribe(e))}var xO={connector:()=>new Oe};function Hu(n,e=xO){let{connector:t}=e;return dt((i,o)=>{let s=t();kt(n(qD(s))).subscribe(o),o.add(i.subscribe(s))})}function Qu(n,e=Ps){return dt((t,i)=>{let o=null,s=null,l=null,d=()=>{if(o){o.unsubscribe(),o=null;let p=s;s=null,i.next(p)}};function f(){let p=l+n,g=e.now();if(g<p){o=this.schedule(void 0,p-g),i.add(o);return}d()}t.subscribe(ft(i,p=>{s=p,l=e.now(),o||(o=e.schedule(f,n),i.add(o))},()=>{d(),i.complete()},void 0,()=>{s=o=null}))})}function Un(n){return n<=0?()=>Fs:dt((e,t)=>{let i=0;e.subscribe(ft(t,o=>{++i<=n&&(t.next(o),n<=i&&t.complete())}))})}function GD(){return dt((n,e)=>{n.subscribe(ft(e,Kr))})}function jD(n){return mt(()=>n)}function Zg(n,e){return e?t=>Er(e.pipe(Un(1),GD()),t.pipe(Zg(n))):Ir((t,i)=>kt(n(t,i)).pipe(Un(1),jD(t)))}function Kg(n,e=Ps){let t=Gu(n,e);return Zg(()=>t)}function Wu(n,e=ar){return n=n??AO,dt((t,i)=>{let o,s=!0;t.subscribe(ft(i,l=>{let d=e(l);(s||!n(o,d))&&(s=!1,o=d,i.next(l))}))})}function AO(n,e){return n===e}function $u(n){return dt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function zD(n,e){let t=ze(n)?n:()=>n;return ze(e)?Hu(e,{connector:t}):i=>new Rs(i,t)}function Yu(){return dt((n,e)=>{let t,i=!1;n.subscribe(ft(e,o=>{let s=t;t=o,i&&e.next([s,o]),i=!0}))})}function Jg(n){return n?e=>Hu(n)(e):e=>zD(new Oe)(e)}function hc(n={}){let{connector:e=()=>new Oe,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:o=!0}=n;return s=>{let l,d,f,p=0,g=!1,y=!1,D=()=>{d?.unsubscribe(),d=void 0},b=()=>{D(),l=f=void 0,g=y=!1},C=()=>{let w=l;b(),w?.unsubscribe()};return dt((w,x)=>{p++,!y&&!g&&D();let M=f=f??e();x.add(()=>{p--,p===0&&!y&&!g&&(d=e0(C,o))}),M.subscribe(x),!l&&p>0&&(l=new Jr({next:F=>M.next(F),error:F=>{y=!0,D(),d=e0(b,t,F),M.error(F)},complete:()=>{g=!0,D(),d=e0(b,i),M.complete()}}),kt(w).subscribe(l))})(s)}}function e0(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Jr({next:()=>{i.unsubscribe(),n()}});return kt(e(...t)).subscribe(i)}function Xu(n,e,t){let i,o=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n:i=n??1/0,hc({connector:()=>new Os(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function fc(n){return yn((e,t)=>n<=t)}function xr(...n){let e=wr(n);return dt((t,i)=>{(e?Er(n,t,e):Er(n,t)).subscribe(i)})}function zo(n,e){return dt((t,i)=>{let o=null,s=0,l=!1,d=()=>l&&!o&&i.complete();t.subscribe(ft(i,f=>{o?.unsubscribe();let p=0,g=s++;kt(n(f,g)).subscribe(o=ft(i,y=>i.next(e?e(f,y,g,p++):y),()=>{o=null,d()}))},()=>{l=!0,d()}))})}function Xn(n){return dt((e,t)=>{kt(n).subscribe(ft(t,()=>t.complete(),Kr)),!t.closed&&e.subscribe(t)})}function eo(n,e,t){let i=ze(n)||e||t?{next:n,error:e,complete:t}:n;return i?dt((o,s)=>{var l;(l=i.subscribe)===null||l===void 0||l.call(i);let d=!0;o.subscribe(ft(s,f=>{var p;(p=i.next)===null||p===void 0||p.call(i,f),s.next(f)},()=>{var f;d=!1,(f=i.complete)===null||f===void 0||f.call(i),s.complete()},f=>{var p;d=!1,(p=i.error)===null||p===void 0||p.call(i,f),s.error(f)},()=>{var f,p;d&&((f=i.unsubscribe)===null||f===void 0||f.call(i)),(p=i.finalize)===null||p===void 0||p.call(i)}))}):ar}var F2="https://g.co/ng/security#xss",Ae=class extends Error{code;constructor(e,t){super(C1(e,t)),this.code=e}};function C1(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Tc(n){return{toString:n}.toString()}var Zu="__parameters__";function MO(n){return function(...t){if(n){let i=n(...t);for(let o in i)this[o]=i[o]}}}function k2(n,e,t){return Tc(()=>{let i=MO(e);function o(...s){if(this instanceof o)return i.apply(this,s),this;let l=new o(...s);return d.annotation=l,d;function d(f,p,g){let y=f.hasOwnProperty(Zu)?f[Zu]:Object.defineProperty(f,Zu,{value:[]})[Zu];for(;y.length<=g;)y.push(null);return(y[g]=y[g]||[]).push(l),f}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var f0=globalThis;function hn(n){for(let e in n)if(n[e]===hn)return e;throw Error("Could not find renamed property on target object.")}function RO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Oi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Oi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function m0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var OO=hn({__forward_ref__:hn});function Pr(n){return n.__forward_ref__=Pr,n.toString=function(){return Oi(this())},n}function Jn(n){return L2(n)?n():n}function L2(n){return typeof n=="function"&&n.hasOwnProperty(OO)&&n.__forward_ref__===Pr}function Ee(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qe(n){return{providers:n.providers||[],imports:n.imports||[]}}function w1(n){return HD(n,N2)||HD(n,V2)}function HD(n,e){return n.hasOwnProperty(e)?n[e]:null}function PO(n){let e=n&&(n[N2]||n[V2]);return e||null}function QD(n){return n&&(n.hasOwnProperty(WD)||n.hasOwnProperty(FO))?n[WD]:null}var N2=hn({\u0275prov:hn}),WD=hn({\u0275inj:hn}),V2=hn({ngInjectableDef:hn}),FO=hn({ngInjectorDef:hn}),_e=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Ee({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function B2(n){return n&&!!n.\u0275providers}var kO=hn({\u0275cmp:hn}),LO=hn({\u0275dir:hn}),NO=hn({\u0275pipe:hn});var dh=hn({\u0275fac:hn}),gc=hn({__NG_ELEMENT_ID__:hn}),$D=hn({__NG_ENV_ID__:hn});function I1(n){return typeof n=="string"?n:n==null?"":String(n)}function VO(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():I1(n)}function BO(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Ae(-200,n)}function E1(n,e){throw new Ae(-201,!1)}var Mt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Mt||{}),p0;function U2(){return p0}function Wi(n){let e=p0;return p0=n,e}function q2(n,e,t){let i=w1(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Mt.Optional)return null;if(e!==void 0)return e;E1(n,"Injector")}var UO={},yc=UO,g0="__NG_DI_FLAG__",uh="ngTempTokenPath",qO="ngTokenPath",GO=/\n/gm,jO="\u0275",YD="__source",za;function zO(){return za}function Ho(n){let e=za;return za=n,e}function HO(n,e=Mt.Default){if(za===void 0)throw new Ae(-203,!1);return za===null?q2(n,void 0,e):za.get(n,e&Mt.Optional?null:void 0,e)}function Je(n,e=Mt.Default){return(U2()||HO)(Jn(n),e)}function L(n,e=Mt.Default){return Je(n,Nh(e))}function Nh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function y0(n){let e=[];for(let t=0;t<n.length;t++){let i=Jn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new Ae(900,!1);let o,s=Mt.Default;for(let l=0;l<i.length;l++){let d=i[l],f=QO(d);typeof f=="number"?f===-1?o=d.token:s|=f:o=d}e.push(Je(o,s))}else e.push(Je(i))}return e}function G2(n,e){return n[g0]=e,n.prototype[g0]=e,n}function QO(n){return n[g0]}function WO(n,e,t,i){let o=n[uh];throw e[YD]&&o.unshift(e[YD]),n.message=$O(`
`+n.message,o,t,i),n[qO]=o,n[uh]=null,n}function $O(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==jO?n.slice(2):n;let o=Oi(e);if(Array.isArray(e))o=e.map(Oi).join(" -> ");else if(typeof e=="object"){let s=[];for(let l in e)if(e.hasOwnProperty(l)){let d=e[l];s.push(l+":"+(typeof d=="string"?JSON.stringify(d):Oi(d)))}o=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${n.replace(GO,`
  `)}`}var xc=G2(k2("Optional"),8);var T1=G2(k2("SkipSelf"),4);function Qa(n,e){let t=n.hasOwnProperty(dh);return t?n[dh]:null}function YO(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let o=n[i],s=e[i];if(t&&(o=t(o),s=t(s)),s!==o)return!1}return!0}function XO(n){return n.flat(Number.POSITIVE_INFINITY)}function x1(n,e){n.forEach(t=>Array.isArray(t)?x1(t,e):e(t))}function j2(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function ZO(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function KO(n,e,t,i){let o=n.length;if(o==e)n.push(t,i);else if(o===1)n.push(i,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let s=o-2;n[o]=n[s],o--}n[e]=t,n[e+1]=i}}function A1(n,e,t){let i=Ac(n,e);return i>=0?n[i|1]=t:(i=~i,KO(n,i,e,t)),i}function t0(n,e){let t=Ac(n,e);if(t>=0)return n[t|1]}function Ac(n,e){return JO(n,e,1)}function JO(n,e,t){let i=0,o=n.length>>t;for(;o!==i;){let s=i+(o-i>>1),l=n[s<<t];if(e===l)return s<<t;l>e?o=s:i=s+1}return~(o<<t)}var to={},gi=[],vc=new _e(""),z2=new _e("",-1),H2=new _e(""),fh=class{get(e,t=yc){if(t===yc){let i=new Error(`NullInjectorError: No provider for ${Oi(e)}!`);throw i.name="NullInjectorError",i}return t}};function Us(n){return n[kO]||null}function M1(n){return n[LO]||null}function Q2(n){return n[NO]||null}function eP(n){let e=Us(n)||M1(n)||Q2(n);return e!==null?e.standalone:!1}function Vh(n){return{\u0275providers:n}}function tP(...n){return{\u0275providers:W2(!0,n),\u0275fromNgModule:!0}}function W2(n,...e){let t=[],i=new Set,o,s=l=>{t.push(l)};return x1(e,l=>{let d=l;v0(d,s,[],i)&&(o||=[],o.push(d))}),o!==void 0&&$2(o,s),t}function $2(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:o}=n[t];R1(o,s=>{e(s,i)})}}function v0(n,e,t,i){if(n=Jn(n),!n)return!1;let o=null,s=QD(n),l=!s&&Us(n);if(!s&&!l){let f=n.ngModule;if(s=QD(f),s)o=f;else return!1}else{if(l&&!l.standalone)return!1;o=n}let d=i.has(o);if(l){if(d)return!1;if(i.add(o),l.dependencies){let f=typeof l.dependencies=="function"?l.dependencies():l.dependencies;for(let p of f)v0(p,e,t,i)}}else if(s){if(s.imports!=null&&!d){i.add(o);let p;try{x1(s.imports,g=>{v0(g,e,t,i)&&(p||=[],p.push(g))})}finally{}p!==void 0&&$2(p,e)}if(!d){let p=Qa(o)||(()=>new o);e({provide:o,useFactory:p,deps:gi},o),e({provide:H2,useValue:o,multi:!0},o),e({provide:vc,useValue:()=>Je(o),multi:!0},o)}let f=s.providers;if(f!=null&&!d){let p=n;R1(f,g=>{e(g,p)})}}else return!1;return o!==n&&n.providers!==void 0}function R1(n,e){for(let t of n)B2(t)&&(t=t.\u0275providers),Array.isArray(t)?R1(t,e):e(t)}var nP=hn({provide:String,useValue:hn});function Y2(n){return n!==null&&typeof n=="object"&&nP in n}function iP(n){return!!(n&&n.useExisting)}function rP(n){return!!(n&&n.useFactory)}function Wa(n){return typeof n=="function"}function oP(n){return!!n.useClass}var Bh=new _e(""),ih={},sP={},n0;function Uh(){return n0===void 0&&(n0=new fh),n0}var Fi=class{},Sc=class extends Fi{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,b0(e,l=>this.processProvider(l)),this.records.set(z2,Ua(void 0,this)),o.has("environment")&&this.records.set(Fi,Ua(void 0,this));let s=this.records.get(Bh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(H2,gi,Mt.Self))}destroy(){mc(this),this._destroyed=!0;let e=Ct(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ct(e)}}onDestroy(e){return mc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){mc(this);let t=Ho(this),i=Wi(void 0),o;try{return e()}finally{Ho(t),Wi(i)}}get(e,t=yc,i=Mt.Default){if(mc(this),e.hasOwnProperty($D))return e[$D](this);i=Nh(i);let o,s=Ho(this),l=Wi(void 0);try{if(!(i&Mt.SkipSelf)){let f=this.records.get(e);if(f===void 0){let p=uP(e)&&w1(e);p&&this.injectableDefInScope(p)?f=Ua(S0(e),ih):f=null,this.records.set(e,f)}if(f!=null)return this.hydrate(e,f)}let d=i&Mt.Self?Uh():this.parent;return t=i&Mt.Optional&&t===yc?null:t,d.get(e,t)}catch(d){if(d.name==="NullInjectorError"){if((d[uh]=d[uh]||[]).unshift(Oi(e)),s)throw d;return WO(d,e,"R3InjectorError",this.source)}else throw d}finally{Wi(l),Ho(s)}}resolveInjectorInitializers(){let e=Ct(null),t=Ho(this),i=Wi(void 0),o;try{let s=this.get(vc,gi,Mt.Self);for(let l of s)l()}finally{Ho(t),Wi(i),Ct(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Oi(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Jn(e);let t=Wa(e)?e:Jn(e&&e.provide),i=lP(e);if(!Wa(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Ua(void 0,ih,!0),o.factory=()=>y0(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=Ct(null);try{return t.value===ih&&(t.value=sP,t.value=t.factory()),typeof t.value=="object"&&t.value&&dP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ct(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Jn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function S0(n){let e=w1(n),t=e!==null?e.factory:Qa(n);if(t!==null)return t;if(n instanceof _e)throw new Ae(204,!1);if(n instanceof Function)return aP(n);throw new Ae(204,!1)}function aP(n){if(n.length>0)throw new Ae(204,!1);let t=PO(n);return t!==null?()=>t.factory(n):()=>new n}function lP(n){if(Y2(n))return Ua(void 0,n.useValue);{let e=X2(n);return Ua(e,ih)}}function X2(n,e,t){let i;if(Wa(n)){let o=Jn(n);return Qa(o)||S0(o)}else if(Y2(n))i=()=>Jn(n.useValue);else if(rP(n))i=()=>n.useFactory(...y0(n.deps||[]));else if(iP(n))i=()=>Je(Jn(n.useExisting));else{let o=Jn(n&&(n.useClass||n.provide));if(cP(n))i=()=>new o(...y0(n.deps));else return Qa(o)||S0(o)}return i}function mc(n){if(n.destroyed)throw new Ae(205,!1)}function Ua(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function cP(n){return!!n.deps}function dP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function uP(n){return typeof n=="function"||typeof n=="object"&&n instanceof _e}function b0(n,e){for(let t of n)Array.isArray(t)?b0(t,e):t&&B2(t)?b0(t.\u0275providers,e):e(t)}function Z2(n,e){n instanceof Sc&&mc(n);let t,i=Ho(n),o=Wi(void 0);try{return e()}finally{Ho(i),Wi(o)}}function K2(){return U2()!==void 0||zO()!=null}function qh(n){if(!K2())throw new Ae(-203,!1)}function hP(n){return typeof n=="function"}var ao=0,rt=1,$e=2,li=3,dr=4,Ti=5,$a=6,mh=7,si=8,Ya=9,Wo=10,Mn=11,bc=12,XD=13,el=14,ki=15,qs=16,qa=17,no=18,Gh=19,J2=20,Qo=21,rh=22,Gs=23,Pi=24,yi=25,eC=1;var js=7,ph=8,Xa=9,ai=10,gh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(gh||{});function Vs(n){return Array.isArray(n)&&typeof n[eC]=="object"}function lo(n){return Array.isArray(n)&&n[eC]===!0}function O1(n){return(n.flags&4)!==0}function jh(n){return n.componentOffset>-1}function zh(n){return(n.flags&1)===1}function $o(n){return!!n.template}function _0(n){return(n[$e]&512)!==0}var D0=class{previousValue;currentValue;firstChange;constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function tC(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}var ci=(()=>{let n=()=>nC;return n.ngInherit=!0,n})();function nC(n){return n.type.prototype.ngOnChanges&&(n.setInput=mP),fP}function fP(){let n=rC(this),e=n?.current;if(e){let t=n.previous;if(t===to)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function mP(n,e,t,i,o){let s=this.declaredInputs[i],l=rC(n)||pP(n,{previous:to,current:null}),d=l.current||(l.current={}),f=l.previous,p=f[s];d[s]=new D0(p&&p.currentValue,t,f===to),tC(n,e,o,t)}var iC="__ngSimpleChanges__";function rC(n){return n[iC]||null}function pP(n,e){return n[iC]=e}var ZD=null;var Ar=function(n,e,t){ZD?.(n,e,t)},gP="svg",yP="math";function Rr(n){for(;Array.isArray(n);)n=n[ao];return n}function oC(n,e){return Rr(e[n])}function $i(n,e){return Rr(e[n.index])}function P1(n,e){return n.data[e]}function vP(n,e){return n[e]}function Ks(n,e){let t=e[n];return Vs(t)?t:t[ao]}function SP(n){return(n[$e]&4)===4}function F1(n){return(n[$e]&128)===128}function bP(n){return lo(n[li])}function Yo(n,e){return e==null?null:n[e]}function sC(n){n[qa]=0}function k1(n){n[$e]&1024||(n[$e]|=1024,F1(n)&&Mc(n))}function _P(n,e){for(;n>0;)e=e[el],n--;return e}function Hh(n){return!!(n[$e]&9216||n[Pi]?.dirty)}function C0(n){n[Wo].changeDetectionScheduler?.notify(9),n[$e]&64&&(n[$e]|=1024),Hh(n)&&Mc(n)}function Mc(n){n[Wo].changeDetectionScheduler?.notify(0);let e=zs(n);for(;e!==null&&!(e[$e]&8192||(e[$e]|=8192,!F1(e)));)e=zs(e)}function aC(n,e){if((n[$e]&256)===256)throw new Ae(911,!1);n[Qo]===null&&(n[Qo]=[]),n[Qo].push(e)}function DP(n,e){if(n[Qo]===null)return;let t=n[Qo].indexOf(e);t!==-1&&n[Qo].splice(t,1)}function zs(n){let e=n[li];return lo(e)?e[li]:e}var St={lFrame:pC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var w0=!1;function CP(){return St.lFrame.elementDepthCount}function wP(){St.lFrame.elementDepthCount++}function IP(){St.lFrame.elementDepthCount--}function lC(){return St.bindingsEnabled}function cC(){return St.skipHydrationRootTNode!==null}function EP(n){return St.skipHydrationRootTNode===n}function TP(){St.skipHydrationRootTNode=null}function It(){return St.lFrame.lView}function On(){return St.lFrame.tView}function Js(n){return St.lFrame.contextLView=n,n[si]}function ea(n){return St.lFrame.contextLView=null,n}function di(){let n=dC();for(;n!==null&&n.type===64;)n=n.parent;return n}function dC(){return St.lFrame.currentTNode}function xP(){let n=St.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ta(n,e){let t=St.lFrame;t.currentTNode=n,t.isParent=e}function L1(){return St.lFrame.isParent}function N1(){St.lFrame.isParent=!1}function AP(){return St.lFrame.contextLView}function uC(){return w0}function yh(n){let e=w0;return w0=n,e}function MP(n){return St.lFrame.bindingIndex=n}function tl(){return St.lFrame.bindingIndex++}function hC(n){let e=St.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function RP(){return St.lFrame.inI18n}function OP(n,e){let t=St.lFrame;t.bindingIndex=t.bindingRootIndex=n,I0(e)}function PP(){return St.lFrame.currentDirectiveIndex}function I0(n){St.lFrame.currentDirectiveIndex=n}function FP(n){let e=St.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function V1(){return St.lFrame.currentQueryIndex}function Qh(n){St.lFrame.currentQueryIndex=n}function kP(n){let e=n[rt];return e.type===2?e.declTNode:e.type===1?n[Ti]:null}function fC(n,e,t){if(t&Mt.SkipSelf){let o=e,s=n;for(;o=o.parent,o===null&&!(t&Mt.Host);)if(o=kP(s),o===null||(s=s[el],o.type&10))break;if(o===null)return!1;e=o,n=s}let i=St.lFrame=mC();return i.currentTNode=e,i.lView=n,!0}function B1(n){let e=mC(),t=n[rt];St.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mC(){let n=St.lFrame,e=n===null?null:n.child;return e===null?pC(n):e}function pC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function gC(){let n=St.lFrame;return St.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var yC=gC;function U1(){let n=gC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function LP(n){return(St.lFrame.contextLView=_P(n,St.lFrame.contextLView))[si]}function Jo(){return St.lFrame.selectedIndex}function Hs(n){St.lFrame.selectedIndex=n}function Wh(){let n=St.lFrame;return P1(n.tView,n.selectedIndex)}function NP(){return St.lFrame.currentNamespace}var vC=!0;function $h(){return vC}function Yh(n){vC=n}function VP(n,e,t){let{ngOnChanges:i,ngOnInit:o,ngDoCheck:s}=e.type.prototype;if(i){let l=nC(e);(t.preOrderHooks??=[]).push(n,l),(t.preOrderCheckHooks??=[]).push(n,l)}o&&(t.preOrderHooks??=[]).push(0-n,o),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Xh(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:l,ngAfterContentChecked:d,ngAfterViewInit:f,ngAfterViewChecked:p,ngOnDestroy:g}=s;l&&(n.contentHooks??=[]).push(-t,l),d&&((n.contentHooks??=[]).push(t,d),(n.contentCheckHooks??=[]).push(t,d)),f&&(n.viewHooks??=[]).push(-t,f),p&&((n.viewHooks??=[]).push(t,p),(n.viewCheckHooks??=[]).push(t,p)),g!=null&&(n.destroyHooks??=[]).push(t,g)}}function oh(n,e,t){SC(n,e,3,t)}function sh(n,e,t,i){(n[$e]&3)===t&&SC(n,e,t,i)}function i0(n,e){let t=n[$e];(t&3)===e&&(t&=16383,t+=1,n[$e]=t)}function SC(n,e,t,i){let o=i!==void 0?n[qa]&65535:0,s=i??-1,l=e.length-1,d=0;for(let f=o;f<l;f++)if(typeof e[f+1]=="number"){if(d=e[f],i!=null&&d>=i)break}else e[f]<0&&(n[qa]+=65536),(d<s||s==-1)&&(BP(n,t,e,f),n[qa]=(n[qa]&4294901760)+f+2),f++}function KD(n,e){Ar(4,n,e);let t=Ct(null);try{e.call(n)}finally{Ct(t),Ar(5,n,e)}}function BP(n,e,t,i){let o=t[i]<0,s=t[i+1],l=o?-t[i]:t[i],d=n[l];o?n[$e]>>14<n[qa]>>16&&(n[$e]&3)===e&&(n[$e]+=16384,KD(d,s)):KD(d,s)}var Ha=-1,Qs=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,i){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=i}};function UP(n){return n instanceof Qs}function qP(n){return(n.flags&8)!==0}function GP(n){return(n.flags&16)!==0}function E0(n,e,t){let i=0;for(;i<t.length;){let o=t[i];if(typeof o=="number"){if(o!==0)break;i++;let s=t[i++],l=t[i++],d=t[i++];n.setAttribute(e,l,d,s)}else{let s=o,l=t[++i];jP(s)?n.setProperty(e,s,l):n.setAttribute(e,s,l),i++}}return i}function bC(n){return n===3||n===4||n===6}function jP(n){return n.charCodeAt(0)===64}function _c(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let o=e[i];typeof o=="number"?t=o:t===0||(t===-1||t===2?JD(n,t,o,null,e[++i]):JD(n,t,o,null,null))}}return n}function JD(n,e,t,i,o){let s=0,l=n.length;if(e===-1)l=-1;else for(;s<n.length;){let d=n[s++];if(typeof d=="number"){if(d===e){l=-1;break}else if(d>e){l=s-1;break}}}for(;s<n.length;){let d=n[s];if(typeof d=="number")break;if(d===t){if(i===null){o!==null&&(n[s+1]=o);return}else if(i===n[s+1]){n[s+2]=o;return}}s++,i!==null&&s++,o!==null&&s++}l!==-1&&(n.splice(l,0,e),s=l+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),o!==null&&n.splice(s++,0,o)}var r0={},T0=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Nh(i);let o=this.injector.get(e,r0,i);return o!==r0||t===r0?o:this.parentInjector.get(e,t,i)}};function _C(n){return n!==Ha}function vh(n){return n&32767}function zP(n){return n>>16}function Sh(n,e){let t=zP(n),i=e;for(;t>0;)i=i[el],t--;return i}var x0=!0;function e2(n){let e=x0;return x0=n,e}var HP=256,DC=HP-1,CC=5,QP=0,Mr={};function WP(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(gc)&&(i=t[gc]),i==null&&(i=t[gc]=QP++);let o=i&DC,s=1<<o;e.data[n+(o>>CC)]|=s}function bh(n,e){let t=wC(n,e);if(t!==-1)return t;let i=e[rt];i.firstCreatePass&&(n.injectorIndex=e.length,o0(i.data,n),o0(e,null),o0(i.blueprint,null));let o=q1(n,e),s=n.injectorIndex;if(_C(o)){let l=vh(o),d=Sh(o,e),f=d[rt].data;for(let p=0;p<8;p++)e[s+p]=d[l+p]|f[l+p]}return e[s+8]=o,s}function o0(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function q1(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,o=e;for(;o!==null;){if(i=AC(o),i===null)return Ha;if(t++,o=o[el],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return Ha}function A0(n,e,t){WP(n,e,t)}function $P(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,o=0;for(;o<i;){let s=t[o];if(bC(s))break;if(s===0)o=o+2;else if(typeof s=="number")for(o++;o<i&&typeof t[o]=="string";)o++;else{if(s===e)return t[o+1];o=o+2}}}return null}function IC(n,e,t){if(t&Mt.Optional||n!==void 0)return n;E1(e,"NodeInjector")}function EC(n,e,t,i){if(t&Mt.Optional&&i===void 0&&(i=null),!(t&(Mt.Self|Mt.Host))){let o=n[Ya],s=Wi(void 0);try{return o?o.get(e,i,t&Mt.Optional):q2(e,i,t&Mt.Optional)}finally{Wi(s)}}return IC(i,e,t)}function TC(n,e,t,i=Mt.Default,o){if(n!==null){if(e[$e]&2048&&!(i&Mt.Self)){let l=KP(n,e,t,i,Mr);if(l!==Mr)return l}let s=xC(n,e,t,i,Mr);if(s!==Mr)return s}return EC(e,t,i,o)}function xC(n,e,t,i,o){let s=XP(t);if(typeof s=="function"){if(!fC(e,n,i))return i&Mt.Host?IC(o,t,i):EC(e,t,i,o);try{let l;if(l=s(i),l==null&&!(i&Mt.Optional))E1(t);else return l}finally{yC()}}else if(typeof s=="number"){let l=null,d=wC(n,e),f=Ha,p=i&Mt.Host?e[ki][Ti]:null;for((d===-1||i&Mt.SkipSelf)&&(f=d===-1?q1(n,e):e[d+8],f===Ha||!n2(i,!1)?d=-1:(l=e[rt],d=vh(f),e=Sh(f,e)));d!==-1;){let g=e[rt];if(t2(s,d,g.data)){let y=YP(d,e,t,l,i,p);if(y!==Mr)return y}f=e[d+8],f!==Ha&&n2(i,e[rt].data[d+8]===p)&&t2(s,d,e)?(l=g,d=vh(f),e=Sh(f,e)):d=-1}}return o}function YP(n,e,t,i,o,s){let l=e[rt],d=l.data[n+8],f=i==null?jh(d)&&x0:i!=l&&(d.type&3)!==0,p=o&Mt.Host&&s===d,g=ah(d,l,t,f,p);return g!==null?Ws(e,l,g,d):Mr}function ah(n,e,t,i,o){let s=n.providerIndexes,l=e.data,d=s&1048575,f=n.directiveStart,p=n.directiveEnd,g=s>>20,y=i?d:d+g,D=o?d+g:p;for(let b=y;b<D;b++){let C=l[b];if(b<f&&t===C||b>=f&&C.type===t)return b}if(o){let b=l[f];if(b&&$o(b)&&b.type===t)return f}return null}function Ws(n,e,t,i){let o=n[t],s=e.data;if(UP(o)){let l=o;l.resolving&&BO(VO(s[t]));let d=e2(l.canSeeViewProviders);l.resolving=!0;let f,p=l.injectImpl?Wi(l.injectImpl):null,g=fC(n,i,Mt.Default);try{o=n[t]=l.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&VP(t,s[t],e)}finally{p!==null&&Wi(p),e2(d),l.resolving=!1,yC()}}return o}function XP(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(gc)?n[gc]:void 0;return typeof e=="number"?e>=0?e&DC:ZP:e}function t2(n,e,t){let i=1<<n;return!!(t[e+(n>>CC)]&i)}function n2(n,e){return!(n&Mt.Self)&&!(n&Mt.Host&&e)}var Bs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return TC(this._tNode,this._lView,e,Nh(i),t)}};function ZP(){return new Bs(di(),It())}function qn(n){return Tc(()=>{let e=n.prototype.constructor,t=e[dh]||M0(e),i=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==i;){let s=o[dh]||M0(o);if(s&&s!==t)return s;o=Object.getPrototypeOf(o)}return s=>new s})}function M0(n){return L2(n)?()=>{let e=M0(Jn(n));return e&&e()}:Qa(n)}function KP(n,e,t,i,o){let s=n,l=e;for(;s!==null&&l!==null&&l[$e]&2048&&!(l[$e]&512);){let d=xC(s,l,t,i|Mt.Self,Mr);if(d!==Mr)return d;let f=s.parent;if(!f){let p=l[J2];if(p){let g=p.get(t,Mr,i);if(g!==Mr)return g}f=AC(l),l=l[el]}s=f}return o}function AC(n){let e=n[rt],t=e.type;return t===2?e.declTNode:t===1?n[Ti]:null}function MC(n){return $P(di(),n)}function i2(n,e=null,t=null,i){let o=JP(n,e,t,i);return o.resolveInjectorInitializers(),o}function JP(n,e=null,t=null,i,o=new Set){let s=[t||gi,tP(n)];return i=i||(typeof n=="object"?void 0:Oi(n)),new Sc(s,e||Uh(),i||null,o)}var Lt=class n{static THROW_IF_NOT_FOUND=yc;static NULL=new fh;static create(e,t){if(Array.isArray(e))return i2({name:""},t,e,"");{let i=e.name??"";return i2({name:i},e.parent,e.providers,i)}}static \u0275prov=Ee({token:n,providedIn:"any",factory:()=>Je(z2)});static __NG_ELEMENT_ID__=-1};var io=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>MC(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},e3=new _e("");e3.__NG_ELEMENT_ID__=n=>{let e=di();if(e===null)throw new Ae(204,!1);if(e.type&2)return e.value;if(n&Mt.Optional)return null;throw new Ae(204,!1)};var RC=!1,Rc=(()=>{class n{static __NG_ELEMENT_ID__=t3;static __NG_ENV_ID__=t=>t}return n})(),_h=class extends Rc{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return aC(this._lView,e),()=>DP(this._lView,e)}};function t3(){return new _h(It())}var $s=class{},Zh=new _e("",{providedIn:"root",factory:()=>!1});var OC=new _e(""),PC=new _e(""),Oc=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ri(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})();var R0=class extends Oe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,K2()&&(this.destroyRef=L(Rc,{optional:!0})??void 0,this.pendingTasks=L(Oc,{optional:!0})??void 0)}emit(e){let t=Ct(null);try{super.next(e)}finally{Ct(t)}}subscribe(e,t,i){let o=e,s=t||(()=>null),l=i;if(e&&typeof e=="object"){let f=e;o=f.next?.bind(f),s=f.error?.bind(f),l=f.complete?.bind(f)}this.__isAsync&&(s=this.wrapInTimeout(s),o&&(o=this.wrapInTimeout(o)),l&&(l=this.wrapInTimeout(l)));let d=super.subscribe({next:o,error:s,complete:l});return e instanceof Yt&&e.add(d),d}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},wt=R0;function Dc(...n){}function FC(n){let e,t;function i(){n=Dc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function r2(n){return queueMicrotask(()=>n()),()=>{n=Dc}}var G1="isAngularZone",Dh=G1+"_ID",n3=0,Ue=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new wt(!1);onMicrotaskEmpty=new wt(!1);onStable=new wt(!1);onError=new wt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:s=RC}=e;if(typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();let l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!o&&i,l.shouldCoalesceRunChangeDetection=o,l.callbackScheduled=!1,l.scheduleInRootZone=s,o3(l)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(G1)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Ae(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,o){let s=this._inner,l=s.scheduleEventTask("NgZoneEvent: "+o,e,i3,Dc,Dc);try{return s.runTask(l,t,i)}finally{s.cancelTask(l)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},i3={};function j1(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function r3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){FC(()=>{n.callbackScheduled=!1,O0(n),n.isCheckStableRunning=!0,j1(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),O0(n)}function o3(n){let e=()=>{r3(n)},t=n3++;n._inner=n._inner.fork({name:"angular",properties:{[G1]:!0,[Dh]:t,[Dh+t]:!0},onInvokeTask:(i,o,s,l,d,f)=>{if(s3(f))return i.invokeTask(s,l,d,f);try{return o2(n),i.invokeTask(s,l,d,f)}finally{(n.shouldCoalesceEventChangeDetection&&l.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),s2(n)}},onInvoke:(i,o,s,l,d,f,p)=>{try{return o2(n),i.invoke(s,l,d,f,p)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!a3(f)&&e(),s2(n)}},onHasTask:(i,o,s,l)=>{i.hasTask(s,l),o===s&&(l.change=="microTask"?(n._hasPendingMicrotasks=l.microTask,O0(n),j1(n)):l.change=="macroTask"&&(n.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,o,s,l)=>(i.handleError(s,l),n.runOutsideAngular(()=>n.onError.emit(l)),!1)})}function O0(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function o2(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function s2(n){n._nesting--,j1(n)}var P0=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new wt;onMicrotaskEmpty=new wt;onStable=new wt;onError=new wt;run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,o){return e.apply(t,i)}};function s3(n){return kC(n,"__ignore_ng_zone__")}function a3(n){return kC(n,"__scheduler_tick__")}function kC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ei=class{_console=console;handleError(e){this._console.error("ERROR",e)}},l3=new _e("",{providedIn:"root",factory:()=>{let n=L(Ue),e=L(Ei);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function c3(){return nl(di(),It())}function nl(n,e){return new Xe($i(n,e))}var Xe=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=c3}return n})();function LC(n){return n instanceof Xe?n.nativeElement:n}function d3(){return this._results[Symbol.iterator]()}var Ch=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Oe}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=XO(e);(this._changesDetected=!YO(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=d3};function NC(n){return(n.flags&128)===128}var VC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(VC||{}),BC=new Map,u3=0;function h3(){return u3++}function f3(n){BC.set(n[Gh],n)}function F0(n){BC.delete(n[Gh])}var a2="__ngContext__";function Xo(n,e){Vs(e)?(n[a2]=e[Gh],f3(e)):n[a2]=e}function UC(n){return GC(n[bc])}function qC(n){return GC(n[dr])}function GC(n){for(;n!==null&&!lo(n);)n=n[dr];return n}var k0;function jC(n){k0=n}function m3(){if(k0!==void 0)return k0;if(typeof document<"u")return document;throw new Ae(210,!1)}var Pc=new _e("",{providedIn:"root",factory:()=>p3}),p3="ng",z1=new _e(""),ur=new _e("",{providedIn:"platform",factory:()=>"unknown"});var Zn=new _e(""),Fc=new _e("",{providedIn:"root",factory:()=>m3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var g3="h",y3="b";var zC=!1,v3=new _e("",{providedIn:"root",factory:()=>zC});var H1=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(H1||{}),Kh=new _e(""),l2=new Set;function Li(n){l2.has(n)||(l2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ga=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ga||{}),HC=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),S3=[Ga.EarlyRead,Ga.Write,Ga.MixedReadWrite,Ga.Read],b3=(()=>{class n{ngZone=L(Ue);scheduler=L($s);errorHandler=L(Ei,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(Kh,{optional:!0})}execute(){this.executing=!0;for(let t of S3)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[t]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>i.hooks[t](i.pipelinedValue),i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(8),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(7))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,i){return i?.run(H1.AFTER_NEXT_RENDER,t)??t()}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),L0=class{impl;hooks;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,i,o,s=null){this.impl=e,this.hooks=t,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function kc(n,e){!e?.injector&&qh(kc);let t=e?.injector??L(Lt);return Li("NgAfterRender"),QC(n,t,e,!1)}function Fr(n,e){!e?.injector&&qh(Fr);let t=e?.injector??L(Lt);return Li("NgAfterNextRender"),QC(n,t,e,!0)}function _3(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function QC(n,e,t,i){let o=e.get(HC);o.impl??=e.get(b3);let s=e.get(Kh,null,{optional:!0}),l=t?.phase??Ga.MixedReadWrite,d=t?.manualCleanup!==!0?e.get(Rc):null,f=new L0(o.impl,_3(n,l),i,d,s?.snapshot(null));return o.impl.register(f),f}var D3=()=>null;function Q1(n,e,t=!1){return D3(n,e,t)}var Or=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Or||{}),Ku;function C3(){if(Ku===void 0&&(Ku=null,f0.trustedTypes))try{Ku=f0.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ku}function Jh(n){return C3()?.createHTML(n)||n}var ro=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${F2})`}},N0=class extends ro{getTypeName(){return"HTML"}},V0=class extends ro{getTypeName(){return"Style"}},B0=class extends ro{getTypeName(){return"Script"}},U0=class extends ro{getTypeName(){return"URL"}},q0=class extends ro{getTypeName(){return"ResourceURL"}};function co(n){return n instanceof ro?n.changingThisBreaksApplicationSecurity:n}function il(n,e){let t=w3(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${F2})`)}return t===e}function w3(n){return n instanceof ro&&n.getTypeName()||null}function WC(n){return new N0(n)}function $C(n){return new V0(n)}function YC(n){return new B0(n)}function XC(n){return new U0(n)}function ZC(n){return new q0(n)}function I3(n){let e=new j0(n);return E3()?new G0(e):e}var G0=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Jh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},j0=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Jh(e),t}};function E3(){try{return!!new window.DOMParser().parseFromString(Jh(""),"text/html")}catch{return!1}}var T3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function W1(n){return n=String(n),n.match(T3)?n:"unsafe:"+n}function uo(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Lc(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var KC=uo("area,br,col,hr,img,wbr"),JC=uo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ew=uo("rp,rt"),x3=Lc(ew,JC),A3=Lc(JC,uo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),M3=Lc(ew,uo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),c2=Lc(KC,A3,M3,x3),tw=uo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),R3=uo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),O3=uo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),P3=Lc(tw,R3,O3),F3=uo("script,style,template"),z0=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,i=!0,o=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){o.push(t),t=N3(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=L3(t);if(s){t=s;break}t=o.pop()}}return this.buf.join("")}startElement(e){let t=d2(e).toLowerCase();if(!c2.hasOwnProperty(t))return this.sanitizedSomething=!0,!F3.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let o=0;o<i.length;o++){let s=i.item(o),l=s.name,d=l.toLowerCase();if(!P3.hasOwnProperty(d)){this.sanitizedSomething=!0;continue}let f=s.value;tw[d]&&(f=W1(f)),this.buf.push(" ",l,'="',u2(f),'"')}return this.buf.push(">"),!0}endElement(e){let t=d2(e).toLowerCase();c2.hasOwnProperty(t)&&!KC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(u2(e))}};function k3(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function L3(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw nw(e);return e}function N3(n){let e=n.firstChild;if(e&&k3(n,e))throw nw(e);return e}function d2(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function nw(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var V3=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,B3=/([^\#-~ |!])/g;function u2(n){return n.replace(/&/g,"&amp;").replace(V3,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(B3,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ju;function iw(n,e){let t=null;try{Ju=Ju||I3(n);let i=e?String(e):"";t=Ju.getInertBodyElement(i);let o=5,s=i;do{if(o===0)throw new Error("Failed to sanitize html because the input is unstable");o--,i=s,s=t.innerHTML,t=Ju.getInertBodyElement(i)}while(i!==s);let d=new z0().sanitizeChildren(h2(t)||t);return Jh(d)}finally{if(t){let i=h2(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function h2(n){return"content"in n&&U3(n)?n.content:null}function U3(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var xi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xi||{});var q3=/^>|^->|<!--|-->|--!>|<!-$/g,G3=/(<|>)/g,j3="\u200B$1\u200B";function z3(n){return n.replace(q3,e=>e.replace(G3,j3))}var Zo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Zo||{}),oo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(oo||{}),H3;function $1(n,e){return H3(n,e)}function ja(n,e,t,i,o){if(i!=null){let s,l=!1;lo(i)?s=i:Vs(i)&&(l=!0,i=i[ao]);let d=Rr(i);n===0&&t!==null?o==null?lw(e,t,d):wh(e,t,d,o||null,!0):n===1&&t!==null?wh(e,t,d,o||null,!0):n===2?o4(e,d,l):n===3&&e.destroyNode(d),s!=null&&a4(e,n,s,t,o)}}function Q3(n,e){return n.createText(e)}function W3(n,e,t){n.setValue(e,t)}function $3(n,e){return n.createComment(z3(e))}function rw(n,e,t){return n.createElement(e,t)}function Y3(n,e){ow(n,e),e[ao]=null,e[Ti]=null}function X3(n,e,t,i,o,s){i[ao]=o,i[Ti]=e,nf(n,i,t,1,o,s)}function ow(n,e){e[Wo].changeDetectionScheduler?.notify(10),nf(n,e,e[Mn],2,null,null)}function Z3(n){let e=n[bc];if(!e)return s0(n[rt],n);for(;e;){let t=null;if(Vs(e))t=e[bc];else{let i=e[ai];i&&(t=i)}if(!t){for(;e&&!e[dr]&&e!==n;)Vs(e)&&s0(e[rt],e),e=e[li];e===null&&(e=n),Vs(e)&&s0(e[rt],e),t=e&&e[dr]}e=t}}function K3(n,e,t,i){let o=ai+i,s=t.length;i>0&&(t[o-1][dr]=e),i<s-ai?(e[dr]=t[o],j2(t,ai+i,e)):(t.push(e),e[dr]=null),e[li]=t;let l=e[qs];l!==null&&t!==l&&sw(l,e);let d=e[no];d!==null&&d.insertView(n),C0(e),e[$e]|=128}function sw(n,e){let t=n[Xa],i=e[li];if(Vs(i))n[$e]|=gh.HasTransplantedViews;else{let o=i[li][ki];e[ki]!==o&&(n[$e]|=gh.HasTransplantedViews)}t===null?n[Xa]=[e]:t.push(e)}function Y1(n,e){let t=n[Xa],i=t.indexOf(e);t.splice(i,1)}function Cc(n,e){if(n.length<=ai)return;let t=ai+e,i=n[t];if(i){let o=i[qs];o!==null&&o!==n&&Y1(o,i),e>0&&(n[t-1][dr]=i[dr]);let s=hh(n,ai+e);Y3(i[rt],i);let l=s[no];l!==null&&l.detachView(s[rt]),i[li]=null,i[dr]=null,i[$e]&=-129}return i}function ef(n,e){if(!(e[$e]&256)){let t=e[Mn];t.destroyNode&&nf(n,e,t,3,null,null),Z3(e)}}function s0(n,e){if(e[$e]&256)return;let t=Ct(null);try{e[$e]&=-129,e[$e]|=256,e[Pi]&&Oa(e[Pi]),e4(n,e),J3(n,e),e[rt].type===1&&e[Mn].destroy();let i=e[qs];if(i!==null&&lo(e[li])){i!==e[li]&&Y1(i,e);let o=e[no];o!==null&&o.detachView(n)}F0(e)}finally{Ct(t)}}function J3(n,e){let t=n.cleanup,i=e[mh];if(t!==null)for(let l=0;l<t.length-1;l+=2)if(typeof t[l]=="string"){let d=t[l+3];d>=0?i[d]():i[-d].unsubscribe(),l+=2}else{let d=i[t[l+1]];t[l].call(d)}i!==null&&(e[mh]=null);let o=e[Qo];if(o!==null){e[Qo]=null;for(let l=0;l<o.length;l++){let d=o[l];d()}}let s=e[Gs];if(s!==null){e[Gs]=null;for(let l of s)l.destroy()}}function e4(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let o=e[t[i]];if(!(o instanceof Qs)){let s=t[i+1];if(Array.isArray(s))for(let l=0;l<s.length;l+=2){let d=o[s[l]],f=s[l+1];Ar(4,d,f);try{f.call(d)}finally{Ar(5,d,f)}}else{Ar(4,o,s);try{s.call(o)}finally{Ar(5,o,s)}}}}}function aw(n,e,t){return t4(n,e.parent,t)}function t4(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[ao];{let{componentOffset:o}=i;if(o>-1){let{encapsulation:s}=n.data[i.directiveStart+o];if(s===Or.None||s===Or.Emulated)return null}return $i(i,t)}}function wh(n,e,t,i,o){n.insertBefore(e,t,i,o)}function lw(n,e,t){n.appendChild(e,t)}function f2(n,e,t,i,o){i!==null?wh(n,e,t,i,o):lw(n,e,t)}function cw(n,e){return n.parentNode(e)}function n4(n,e){return n.nextSibling(e)}function dw(n,e,t){return r4(n,e,t)}function i4(n,e,t){return n.type&40?$i(n,t):null}var r4=i4,m2;function tf(n,e,t,i){let o=aw(n,i,e),s=e[Mn],l=i.parent||e[Ti],d=dw(l,i,e);if(o!=null)if(Array.isArray(t))for(let f=0;f<t.length;f++)f2(s,o,t[f],d,!1);else f2(s,o,t,d,!1);m2!==void 0&&m2(s,i,e,t,o)}function pc(n,e){if(e!==null){let t=e.type;if(t&3)return $i(e,n);if(t&4)return H0(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return pc(n,i);{let o=n[e.index];return lo(o)?H0(-1,o):Rr(o)}}else{if(t&128)return pc(n,e.next);if(t&32)return $1(e,n)()||Rr(n[e.index]);{let i=uw(n,e);if(i!==null){if(Array.isArray(i))return i[0];let o=zs(n[ki]);return pc(o,i)}else return pc(n,e.next)}}}return null}function uw(n,e){if(e!==null){let i=n[ki][Ti],o=e.projection;return i.projection[o]}return null}function H0(n,e){let t=ai+n+1;if(t<e.length){let i=e[t],o=i[rt].firstChild;if(o!==null)return pc(i,o)}return e[js]}function o4(n,e,t){n.removeChild(null,e,t)}function X1(n,e,t,i,o,s,l){for(;t!=null;){if(t.type===128){t=t.next;continue}let d=i[t.index],f=t.type;if(l&&e===0&&(d&&Xo(Rr(d),i),t.flags|=2),(t.flags&32)!==32)if(f&8)X1(n,e,t.child,i,o,s,!1),ja(e,n,o,d,s);else if(f&32){let p=$1(t,i),g;for(;g=p();)ja(e,n,o,g,s);ja(e,n,o,d,s)}else f&16?hw(n,e,i,t,o,s):ja(e,n,o,d,s);t=l?t.projectionNext:t.next}}function nf(n,e,t,i,o,s){X1(t,i,n.firstChild,e,o,s,!1)}function s4(n,e,t){let i=e[Mn],o=aw(n,t,e),s=t.parent||e[Ti],l=dw(s,t,e);hw(i,0,e,t,o,l)}function hw(n,e,t,i,o,s){let l=t[ki],f=l[Ti].projection[i.projection];if(Array.isArray(f))for(let p=0;p<f.length;p++){let g=f[p];ja(e,n,o,g,s)}else{let p=f,g=l[li];NC(i)&&(p.flags|=128),X1(n,e,p,g,o,s,!0)}}function a4(n,e,t,i,o){let s=t[js],l=Rr(t);s!==l&&ja(e,n,i,s,o);for(let d=ai;d<t.length;d++){let f=t[d];nf(f[rt],f,n,e,i,s)}}function l4(n,e,t,i,o){if(e)o?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:oo.DashCase;o==null?n.removeStyle(t,i,s):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),s|=oo.Important),n.setStyle(t,i,o,s))}}function c4(n,e,t){n.setAttribute(e,"style",t)}function fw(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function mw(n,e,t){let{mergedAttrs:i,classes:o,styles:s}=t;i!==null&&E0(n,e,i),o!==null&&fw(n,e,o),s!==null&&c4(n,e,s)}function d4(n,e,t){let i=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let s=e.length;if(o+s===i||n.charCodeAt(o+s)<=32)return o}t=o+1}}var pw="ng-template";function u4(n,e,t,i){let o=0;if(i){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&d4(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Z1(n))return!1;if(o=e.indexOf(1,o),o>-1){let s;for(;++o<e.length&&typeof(s=e[o])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Z1(n){return n.type===4&&n.value!==pw}function h4(n,e,t){let i=n.type===4&&!t?pw:n.value;return e===i}function f4(n,e,t){let i=4,o=n.attrs,s=o!==null?g4(o):0,l=!1;for(let d=0;d<e.length;d++){let f=e[d];if(typeof f=="number"){if(!l&&!lr(i)&&!lr(f))return!1;if(l&&lr(f))continue;l=!1,i=f|i&1;continue}if(!l)if(i&4){if(i=2|i&1,f!==""&&!h4(n,f,t)||f===""&&e.length===1){if(lr(i))return!1;l=!0}}else if(i&8){if(o===null||!u4(n,o,f,t)){if(lr(i))return!1;l=!0}}else{let p=e[++d],g=m4(f,o,Z1(n),t);if(g===-1){if(lr(i))return!1;l=!0;continue}if(p!==""){let y;if(g>s?y="":y=o[g+1].toLowerCase(),i&2&&p!==y){if(lr(i))return!1;l=!0}}}}return lr(i)||l}function lr(n){return(n&1)===0}function m4(n,e,t,i){if(e===null)return-1;let o=0;if(i||!t){let s=!1;for(;o<e.length;){let l=e[o];if(l===n)return o;if(l===3||l===6)s=!0;else if(l===1||l===2){let d=e[++o];for(;typeof d=="string";)d=e[++o];continue}else{if(l===4)break;if(l===0){o+=4;continue}}o+=s?1:2}return-1}else return y4(e,n)}function gw(n,e,t=!1){for(let i=0;i<e.length;i++)if(f4(n,e[i],t))return!0;return!1}function p4(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function g4(n){for(let e=0;e<n.length;e++){let t=n[e];if(bC(t))return e}return n.length}function y4(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function v4(n,e){e:for(let t=0;t<e.length;t++){let i=e[t];if(n.length===i.length){for(let o=0;o<n.length;o++)if(n[o]!==i[o])continue e;return!0}}return!1}function p2(n,e){return n?":not("+e.trim()+")":e}function S4(n){let e=n[0],t=1,i=2,o="",s=!1;for(;t<n.length;){let l=n[t];if(typeof l=="string")if(i&2){let d=n[++t];o+="["+l+(d.length>0?'="'+d+'"':"")+"]"}else i&8?o+="."+l:i&4&&(o+=" "+l);else o!==""&&!lr(l)&&(e+=p2(s,o),o=""),i=l,s=s||!lr(i);t++}return o!==""&&(e+=p2(s,o)),e}function b4(n){return n.map(S4).join(",")}function _4(n){let e=[],t=[],i=1,o=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")o===2?s!==""&&e.push(s,n[++i]):o===8&&t.push(s);else{if(!lr(o))break;o=s}i++}return{attrs:e,classes:t}}var kr={};function qe(n=1){yw(On(),It(),Jo()+n,!1)}function yw(n,e,t,i){if(!i)if((e[$e]&3)===3){let s=n.preOrderCheckHooks;s!==null&&oh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&sh(e,s,0,t)}Hs(t)}function bn(n,e=Mt.Default){let t=It();if(t===null)return Je(n,e);let i=di();return TC(i,t,Jn(n),e)}function vw(n,e,t,i,o,s){let l=Ct(null);try{let d=null;o&Zo.SignalBased&&(d=e[i][mi]),d!==null&&d.transformFn!==void 0&&(s=d.transformFn(s)),o&Zo.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),n.setInput!==null?n.setInput(e,d,s,t,i):tC(e,d,i,s)}finally{Ct(l)}}function D4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let o=t[i];if(o<0)Hs(~o);else{let s=o,l=t[++i],d=t[++i];OP(l,s);let f=e[s];d(2,f)}}}finally{Hs(-1)}}function rf(n,e,t,i,o,s,l,d,f,p,g){let y=e.blueprint.slice();return y[ao]=o,y[$e]=i|4|128|8|64|1024,(p!==null||n&&n[$e]&2048)&&(y[$e]|=2048),sC(y),y[li]=y[el]=n,y[si]=t,y[Wo]=l||n&&n[Wo],y[Mn]=d||n&&n[Mn],y[Ya]=f||n&&n[Ya]||null,y[Ti]=s,y[Gh]=h3(),y[$a]=g,y[J2]=p,y[ki]=e.type==2?n[ki]:y,y}function rl(n,e,t,i,o){let s=n.data[e];if(s===null)s=C4(n,e,t,i,o),RP()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=o;let l=xP();s.injectorIndex=l===null?-1:l.injectorIndex}return ta(s,!0),s}function C4(n,e,t,i,o){let s=dC(),l=L1(),d=l?s:s&&s.parent,f=n.data[e]=A4(n,d,t,e,i,o);return n.firstChild===null&&(n.firstChild=f),s!==null&&(l?s.child==null&&f.parent!==null&&(s.child=f):s.next===null&&(s.next=f,f.prev=s)),f}function Sw(n,e,t,i){if(t===0)return-1;let o=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return o}function bw(n,e,t,i,o){let s=Jo(),l=i&2;try{Hs(-1),l&&e.length>yi&&yw(n,e,yi,!1),Ar(l?2:0,o),t(i,o)}finally{Hs(s),Ar(l?3:1,o)}}function K1(n,e,t){if(O1(e)){let i=Ct(null);try{let o=e.directiveStart,s=e.directiveEnd;for(let l=o;l<s;l++){let d=n.data[l];if(d.contentQueries){let f=t[l];d.contentQueries(1,f,l)}}}finally{Ct(i)}}}function J1(n,e,t){lC()&&(k4(n,e,t,$i(t,e)),(t.flags&64)===64&&Cw(n,e,t))}function ey(n,e,t=$i){let i=e.localNames;if(i!==null){let o=e.index+1;for(let s=0;s<i.length;s+=2){let l=i[s+1],d=l===-1?t(e,n):n[l];n[o++]=d}}}function _w(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ty(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ty(n,e,t,i,o,s,l,d,f,p,g){let y=yi+i,D=y+o,b=w4(y,D),C=typeof p=="function"?p():p;return b[rt]={type:n,blueprint:b,template:t,queries:null,viewQuery:d,declTNode:e,data:b.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:D,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof l=="function"?l():l,firstChild:null,schemas:f,consts:C,incompleteFirstPass:!1,ssrId:g}}function w4(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:kr);return t}function I4(n,e,t,i){let s=i.get(v3,zC)||t===Or.ShadowDom,l=n.selectRootElement(e,s);return E4(l),l}function E4(n){T4(n)}var T4=()=>null;function x4(n,e,t,i){let o=Tw(e);o.push(t),n.firstCreatePass&&xw(n).push(i,o.length-1)}function A4(n,e,t,i,o,s){let l=e?e.injectorIndex:-1,d=0;return cC()&&(d|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:l,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:d,providerIndexes:0,value:o,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function g2(n,e,t,i,o){for(let s in e){if(!e.hasOwnProperty(s))continue;let l=e[s];if(l===void 0)continue;i??={};let d,f=Zo.None;Array.isArray(l)?(d=l[0],f=l[1]):d=l;let p=s;if(o!==null){if(!o.hasOwnProperty(s))continue;p=o[s]}n===0?y2(i,t,p,d,f):y2(i,t,p,d)}return i}function y2(n,e,t,i,o){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],o!==void 0&&s.push(o)}function M4(n,e,t){let i=e.directiveStart,o=e.directiveEnd,s=n.data,l=e.attrs,d=[],f=null,p=null;for(let g=i;g<o;g++){let y=s[g],D=t?t.get(y):null,b=D?D.inputs:null,C=D?D.outputs:null;f=g2(0,y.inputs,g,f,b),p=g2(1,y.outputs,g,p,C);let w=f!==null&&l!==null&&!Z1(e)?Q4(f,g,l):null;d.push(w)}f!==null&&(f.hasOwnProperty("class")&&(e.flags|=8),f.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=d,e.inputs=f,e.outputs=p}function R4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ny(n,e,t,i,o,s,l,d){let f=$i(e,t),p=e.inputs,g;!d&&p!=null&&(g=p[i])?(ry(n,t,g,i,o),jh(e)&&O4(t,e.index)):e.type&3?(i=R4(i),o=l!=null?l(o,e.value||"",i):o,s.setProperty(f,i,o)):e.type&12}function O4(n,e){let t=Ks(e,n);t[$e]&16||(t[$e]|=64)}function iy(n,e,t,i){if(lC()){let o=i===null?null:{"":-1},s=N4(n,t),l,d;s===null?l=d=null:[l,d]=s,l!==null&&Dw(n,e,t,l,o,d),o&&V4(t,i,o)}t.mergedAttrs=_c(t.mergedAttrs,t.attrs)}function Dw(n,e,t,i,o,s){for(let p=0;p<i.length;p++)A0(bh(t,e),n,i[p].type);U4(t,n.data.length,i.length);for(let p=0;p<i.length;p++){let g=i[p];g.providersResolver&&g.providersResolver(g)}let l=!1,d=!1,f=Sw(n,e,i.length,null);for(let p=0;p<i.length;p++){let g=i[p];t.mergedAttrs=_c(t.mergedAttrs,g.hostAttrs),q4(n,t,e,f,g),B4(f,g,o),g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let y=g.type.prototype;!l&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!d&&(y.ngOnChanges||y.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),d=!0),f++}M4(n,t,s)}function P4(n,e,t,i,o){let s=o.hostBindings;if(s){let l=n.hostBindingOpCodes;l===null&&(l=n.hostBindingOpCodes=[]);let d=~e.index;F4(l)!=d&&l.push(d),l.push(t,i,s)}}function F4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function k4(n,e,t,i){let o=t.directiveStart,s=t.directiveEnd;jh(t)&&G4(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||bh(t,e),Xo(i,e);let l=t.initialInputs;for(let d=o;d<s;d++){let f=n.data[d],p=Ws(e,n,d,t);if(Xo(p,e),l!==null&&H4(e,d-o,p,f,t,l),$o(f)){let g=Ks(t.index,e);g[si]=Ws(e,n,d,t)}}}function Cw(n,e,t){let i=t.directiveStart,o=t.directiveEnd,s=t.index,l=PP();try{Hs(s);for(let d=i;d<o;d++){let f=n.data[d],p=e[d];I0(d),(f.hostBindings!==null||f.hostVars!==0||f.hostAttrs!==null)&&L4(f,p)}}finally{Hs(-1),I0(l)}}function L4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function N4(n,e){let t=n.directiveRegistry,i=null,o=null;if(t)for(let s=0;s<t.length;s++){let l=t[s];if(gw(e,l.selectors,!1))if(i||(i=[]),$o(l))if(l.findHostDirectiveDefs!==null){let d=[];o=o||new Map,l.findHostDirectiveDefs(l,d,o),i.unshift(...d,l);let f=d.length;Q0(n,e,f)}else i.unshift(l),Q0(n,e,0);else o=o||new Map,l.findHostDirectiveDefs?.(l,i,o),i.push(l)}return i===null?null:[i,o]}function Q0(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function V4(n,e,t){if(e){let i=n.localNames=[];for(let o=0;o<e.length;o+=2){let s=t[e[o+1]];if(s==null)throw new Ae(-301,!1);i.push(e[o],s)}}}function B4(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;$o(e)&&(t[""]=n)}}function U4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function q4(n,e,t,i,o){n.data[i]=o;let s=o.factory||(o.factory=Qa(o.type,!0)),l=new Qs(s,$o(o),bn);n.blueprint[i]=l,t[i]=l,P4(n,e,i,Sw(n,t,o.hostVars,kr),o)}function ww(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function G4(n,e,t){let i=$i(e,n),o=_w(t),s=n[Wo].rendererFactory,l=of(n,rf(n,o,null,ww(t),i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=l}function j4(n,e,t,i,o,s){let l=$i(n,e);z4(e[Mn],l,s,n.value,t,i,o)}function z4(n,e,t,i,o,s,l){if(s==null)n.removeAttribute(e,o,t);else{let d=l==null?I1(s):l(s,i||"",o);n.setAttribute(e,o,d,t)}}function H4(n,e,t,i,o,s){let l=s[e];if(l!==null)for(let d=0;d<l.length;){let f=l[d++],p=l[d++],g=l[d++],y=l[d++];vw(i,t,f,p,g,y)}}function Q4(n,e,t){let i=null,o=0;for(;o<t.length;){let s=t[o];if(s===0){o+=4;continue}else if(s===5){o+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let l=n[s];for(let d=0;d<l.length;d+=3)if(l[d]===e){i.push(s,l[d+1],l[d+2],t[o+1]);break}}o+=2}return i}function Iw(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Ew(n,e){let t=n.contentQueries;if(t!==null){let i=Ct(null);try{for(let o=0;o<t.length;o+=2){let s=t[o],l=t[o+1];if(l!==-1){let d=n.data[l];Qh(s),d.contentQueries(2,e[l],l)}}}finally{Ct(i)}}}function of(n,e){return n[bc]?n[XD][dr]=e:n[bc]=e,n[XD]=e,e}function W0(n,e,t){Qh(0);let i=Ct(null);try{e(n,t)}finally{Ct(i)}}function Tw(n){return n[mh]??=[]}function xw(n){return n.cleanup??=[]}function Aw(n,e){let t=n[Ya],i=t?t.get(Ei,null):null;i&&i.handleError(e)}function ry(n,e,t,i,o){for(let s=0;s<t.length;){let l=t[s++],d=t[s++],f=t[s++],p=e[l],g=n.data[l];vw(g,p,i,d,f,o)}}function W4(n,e,t){let i=oC(e,n);W3(n[Mn],i,t)}function $4(n,e){let t=Ks(e,n),i=t[rt];Y4(i,t);let o=t[ao];o!==null&&t[$a]===null&&(t[$a]=Q1(o,t[Ya])),oy(i,t,t[si])}function Y4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function oy(n,e,t){B1(e);try{let i=n.viewQuery;i!==null&&W0(1,i,t);let o=n.template;o!==null&&bw(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[no]?.finishViewCreation(n),n.staticContentQueries&&Ew(n,e),n.staticViewQueries&&W0(2,n.viewQuery,t);let s=n.components;s!==null&&X4(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[$e]&=-5,U1()}}function X4(n,e){for(let t=0;t<e.length;t++)$4(n,e[t])}function Nc(n,e,t,i){let o=Ct(null);try{let s=e.tView,d=n[$e]&4096?4096:16,f=rf(n,s,t,d,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),p=n[e.index];f[qs]=p;let g=n[no];return g!==null&&(f[no]=g.createEmbeddedView(s)),oy(s,f,t),f}finally{Ct(o)}}function Mw(n,e){let t=ai+e;if(t<n.length)return n[t]}function Za(n,e){return!e||e.firstChild===null||NC(n)}function Vc(n,e,t,i=!0){let o=e[rt];if(K3(o,e,n,t),i){let l=H0(t,n),d=e[Mn],f=cw(d,n[js]);f!==null&&X3(o,n[Ti],d,e,f,l)}let s=e[$a];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Rw(n,e){let t=Cc(n,e);return t!==void 0&&ef(t[rt],t),t}function Ih(n,e,t,i,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&i.push(Rr(s)),lo(s)&&Z4(s,i);let l=t.type;if(l&8)Ih(n,e,t.child,i);else if(l&32){let d=$1(t,e),f;for(;f=d();)i.push(f)}else if(l&16){let d=uw(e,t);if(Array.isArray(d))i.push(...d);else{let f=zs(e[ki]);Ih(f[rt],f,d,i,!0)}}t=o?t.projectionNext:t.next}return i}function Z4(n,e){for(let t=ai;t<n.length;t++){let i=n[t],o=i[rt].firstChild;o!==null&&Ih(i[rt],i,o,e)}n[js]!==n[ao]&&e.push(n[js])}var Ow=[];function K4(n){return n[Pi]??J4(n)}function J4(n){let e=Ow.pop()??Object.create(tF);return e.lView=n,e}function eF(n){n.lView[Pi]!==n&&(n.lView=null,Ow.push(n))}var tF=Bt(we({},Ts),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Mc(n.lView)},consumerOnSignalRead(){this.lView[Pi]=this}});function nF(n){let e=n[Pi]??Object.create(iF);return e.lView=n,e}var iF=Bt(we({},Ts),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=zs(n.lView);for(;e&&!Pw(e[rt]);)e=zs(e);e&&k1(e)},consumerOnSignalRead(){this.lView[Pi]=this}});function Pw(n){return n.type!==2}function Fw(n){if(n[Gs]===null)return;let e=!0;for(;e;){let t=!1;for(let i of n[Gs])i.dirty&&(t=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=t&&!!(n[$e]&8192)}}var rF=100;function kw(n,e=!0,t=0){let o=n[Wo].rendererFactory,s=!1;s||o.begin?.();try{oF(n,t)}catch(l){throw e&&Aw(n,l),l}finally{s||o.end?.()}}function oF(n,e){let t=uC();try{yh(!0),$0(n,e);let i=0;for(;Hh(n);){if(i===rF)throw new Ae(103,!1);i++,$0(n,1)}}finally{yh(t)}}function sF(n,e,t,i){let o=e[$e];if((o&256)===256)return;let s=!1,l=!1;B1(e);let d=!0,f=null,p=null;s||(Pw(n)?(p=K4(e),f=Ra(p)):J_()===null?(d=!1,p=nF(e),f=Ra(p)):e[Pi]&&(Oa(e[Pi]),e[Pi]=null));try{sC(e),MP(n.bindingStartIndex),t!==null&&bw(n,e,t,2,i);let g=(o&3)===3;if(!s)if(g){let b=n.preOrderCheckHooks;b!==null&&oh(e,b,null)}else{let b=n.preOrderHooks;b!==null&&sh(e,b,0,null),i0(e,0)}if(l||aF(e),Fw(e),Lw(e,0),n.contentQueries!==null&&Ew(n,e),!s)if(g){let b=n.contentCheckHooks;b!==null&&oh(e,b)}else{let b=n.contentHooks;b!==null&&sh(e,b,1),i0(e,1)}D4(n,e);let y=n.components;y!==null&&Vw(e,y,0);let D=n.viewQuery;if(D!==null&&W0(2,D,i),!s)if(g){let b=n.viewCheckHooks;b!==null&&oh(e,b)}else{let b=n.viewHooks;b!==null&&sh(e,b,2),i0(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[rh]){for(let b of e[rh])b();e[rh]=null}s||(e[$e]&=-73)}catch(g){throw s||Mc(e),g}finally{p!==null&&(sc(p,f),d&&eF(p)),U1()}}function Lw(n,e){for(let t=UC(n);t!==null;t=qC(t))for(let i=ai;i<t.length;i++){let o=t[i];Nw(o,e)}}function aF(n){for(let e=UC(n);e!==null;e=qC(e)){if(!(e[$e]&gh.HasTransplantedViews))continue;let t=e[Xa];for(let i=0;i<t.length;i++){let o=t[i];k1(o)}}}function lF(n,e,t){let i=Ks(e,n);Nw(i,t)}function Nw(n,e){F1(n)&&$0(n,e)}function $0(n,e){let i=n[rt],o=n[$e],s=n[Pi],l=!!(e===0&&o&16);if(l||=!!(o&64&&e===0),l||=!!(o&1024),l||=!!(s?.dirty&&ac(s)),l||=!1,s&&(s.dirty=!1),n[$e]&=-9217,l)sF(i,n,i.template,n[si]);else if(o&8192){Fw(n),Lw(n,1);let d=i.components;d!==null&&Vw(n,d,1)}}function Vw(n,e,t){for(let i=0;i<e.length;i++)lF(n,e[i],t)}function sy(n,e){let t=uC()?64:1088;for(n[Wo].changeDetectionScheduler?.notify(e);n;){n[$e]|=t;let i=zs(n);if(_0(n)&&!i)return n;n=i}return null}var Ys=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[rt];return Ih(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i}get context(){return this._lView[si]}get dirty(){return!!(this._lView[$e]&9280)||!!this._lView[Pi]?.dirty}set context(e){this._lView[si]=e}get destroyed(){return(this._lView[$e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[li];if(lo(e)){let t=e[ph],i=t?t.indexOf(this):-1;i>-1&&(Cc(e,i),hh(t,i))}this._attachedToViewContainer=!1}ef(this._lView[rt],this._lView)}onDestroy(e){aC(this._lView,e)}markForCheck(){sy(this._cdRefInjectingView||this._lView,4)}markForRefresh(){k1(this._cdRefInjectingView||this._lView)}detach(){this._lView[$e]&=-129}reattach(){C0(this._lView),this._lView[$e]|=128}detectChanges(){this._lView[$e]|=1024,kw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=_0(this._lView),t=this._lView[qs];t!==null&&!e&&Y1(t,this._lView),ow(this._lView[rt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=e;let t=_0(this._lView),i=this._lView[qs];i!==null&&!t&&sw(i,this._lView),C0(this._lView)}},Rn=(()=>{class n{static __NG_ELEMENT_ID__=uF}return n})(),cF=Rn,dF=class extends cF{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let o=Nc(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Ys(o)}};function uF(){return sf(di(),It())}function sf(n,e){return n.type&4?new dF(e,n,nl(n,e)):null}var nX=new RegExp(`^(\\d+)*(${y3}|${g3})*(.*)`);var hF=()=>null;function Ka(n,e){return hF(n,e)}var Y0=class{},Eh=class{},X0=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Oi(e)}.`)}},wc=class{static NULL=new X0},Ko=class{};var fF=(()=>{class n{static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>null})}return n})();function Th(n,e,t){let i=t?n.styles:null,o=t?n.classes:null,s=0;if(e!==null)for(let l=0;l<e.length;l++){let d=e[l];if(typeof d=="number")s=d;else if(s==1)o=m0(o,d);else if(s==2){let f=d,p=e[++l];i=m0(i,f+": "+p+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=o:n.classesWithoutHost=o}var Z0=class extends wc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Us(e);return new Ic(t,this.ngModule)}};function v2(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let o=n[i];if(o===void 0)continue;let s=Array.isArray(o),l=s?o[0]:o,d=s?o[1]:Zo.None;e?t.push({propName:l,templateName:i,isSignal:(d&Zo.SignalBased)!==0}):t.push({propName:l,templateName:i})}return t}function mF(n){let e=n.toLowerCase();return e==="svg"?gP:e==="math"?yP:null}var Ic=class extends Eh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,i=v2(e.inputs,!0);if(t!==null)for(let o of i)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return i}get outputs(){return v2(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=b4(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,o){let s=Ct(null);try{o=o||this.ngModule;let l=o instanceof Fi?o:o?.injector;l&&this.componentDef.getStandaloneInjector!==null&&(l=this.componentDef.getStandaloneInjector(l)||l);let d=l?new T0(e,l):e,f=d.get(Ko,null);if(f===null)throw new Ae(407,!1);let p=d.get(fF,null),g=d.get($s,null),y={rendererFactory:f,sanitizer:p,changeDetectionScheduler:g},D=f.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",C=i?I4(D,i,this.componentDef.encapsulation,d):rw(D,b,mF(b)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let x=null;C!==null&&(x=Q1(C,d,!0));let M=ty(0,null,null,1,0,null,null,null,null,null,null),F=rf(null,M,null,w,null,null,y,D,d,null,x);B1(F);let k,N,q=null;try{let Q=this.componentDef,z,Y=null;Q.findHostDirectiveDefs?(z=[],Y=new Map,Q.findHostDirectiveDefs(Q,z,Y),z.push(Q)):z=[Q];let ne=pF(F,C);q=gF(ne,C,Q,z,F,y,D),N=P1(M,yi),C&&SF(D,Q,C,i),t!==void 0&&bF(N,this.ngContentSelectors,t),k=vF(q,Q,z,Y,F,[_F]),oy(M,F,null)}catch(Q){throw q!==null&&F0(q),F0(F),Q}finally{U1()}return new K0(this.componentType,k,nl(N,F),F,N)}finally{Ct(s)}}},K0=class extends Y0{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,i,o,s){super(),this.location=i,this._rootLView=o,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Ys(o,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,o;if(i!==null&&(o=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;ry(s[rt],s,o,e,t),this.previousInputValues.set(e,t);let l=Ks(this._tNode.index,s);sy(l,1)}}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function pF(n,e){let t=n[rt],i=yi;return n[i]=e,rl(t,i,2,"#host",null)}function gF(n,e,t,i,o,s,l){let d=o[rt];yF(i,n,e,l);let f=null;e!==null&&(f=Q1(e,o[Ya]));let p=s.rendererFactory.createRenderer(e,t),g=rf(o,_w(t),null,ww(t),o[n.index],n,s,p,null,null,f);return d.firstCreatePass&&Q0(d,n,i.length-1),of(o,g),o[n.index]=g}function yF(n,e,t,i){for(let o of n)e.mergedAttrs=_c(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(Th(e,e.mergedAttrs,!0),t!==null&&mw(i,t,e))}function vF(n,e,t,i,o,s){let l=di(),d=o[rt],f=$i(l,o);Dw(d,o,l,t,null,i);for(let g=0;g<t.length;g++){let y=l.directiveStart+g,D=Ws(o,d,y,l);Xo(D,o)}Cw(d,o,l),f&&Xo(f,o);let p=Ws(o,d,l.directiveStart+l.componentOffset,l);if(n[si]=o[si]=p,s!==null)for(let g of s)g(p,e);return K1(d,l,o),p}function SF(n,e,t,i){if(i)E0(n,t,["ng-version","19.0.1"]);else{let{attrs:o,classes:s}=_4(e.selectors[0]);o&&E0(n,t,o),s&&s.length>0&&fw(n,t,s.join(" "))}}function bF(n,e,t){let i=n.projection=[];for(let o=0;o<e.length;o++){let s=t[o];i.push(s!=null&&s.length?Array.from(s):null)}}function _F(){let n=di();Xh(It()[rt],n)}var ei=(()=>{class n{static __NG_ELEMENT_ID__=DF}return n})();function DF(){let n=di();return Uw(n,It())}var CF=ei,Bw=class extends CF{_lContainer;_hostTNode;_hostLView;constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return nl(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){let e=q1(this._hostTNode,this._hostLView);if(_C(e)){let t=Sh(e,this._hostLView),i=vh(e),o=t[rt].data[i+8];return new Bs(o,t)}else return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=S2(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-ai}createEmbeddedView(e,t,i){let o,s;typeof i=="number"?o=i:i!=null&&(o=i.index,s=i.injector);let l=Ka(this._lContainer,e.ssrId),d=e.createEmbeddedViewImpl(t||{},s,l);return this.insertImpl(d,o,Za(this._hostTNode,l)),d}createComponent(e,t,i,o,s){let l=e&&!hP(e),d;if(l)d=t;else{let C=t||{};d=C.index,i=C.injector,o=C.projectableNodes,s=C.environmentInjector||C.ngModuleRef}let f=l?e:new Ic(Us(e)),p=i||this.parentInjector;if(!s&&f.ngModule==null){let w=(l?p:this.parentInjector).get(Fi,null);w&&(s=w)}let g=Us(f.componentType??{}),y=Ka(this._lContainer,g?.id??null),D=y?.firstChild??null,b=f.create(p,o,D,s);return this.insertImpl(b.hostView,d,Za(this._hostTNode,y)),b}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let o=e._lView;if(bP(o)){let d=this.indexOf(e);if(d!==-1)this.detach(d);else{let f=o[li],p=new Bw(f,f[Ti],f[li]);p.detach(p.indexOf(e))}}let s=this._adjustIndex(t),l=this._lContainer;return Vc(l,o,s,i),e.attachToViewContainerRef(),j2(a0(l),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=S2(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=Cc(this._lContainer,t);i&&(hh(a0(this._lContainer),t),ef(i[rt],i))}detach(e){let t=this._adjustIndex(e,-1),i=Cc(this._lContainer,t);return i&&hh(a0(this._lContainer),t)!=null?new Ys(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function S2(n){return n[ph]}function a0(n){return n[ph]||(n[ph]=[])}function Uw(n,e){let t,i=e[n.index];return lo(i)?t=i:(t=Iw(i,e,null,n),e[n.index]=t,of(e,t)),IF(t,e,n,i),new Bw(t,n,e)}function wF(n,e){let t=n[Mn],i=t.createComment(""),o=$i(e,n),s=cw(t,o);return wh(t,s,i,n4(t,o),!1),i}var IF=xF,EF=()=>!1;function TF(n,e,t){return EF(n,e,t)}function xF(n,e,t,i){if(n[js])return;let o;t.type&8?o=Rr(i):o=wF(e,t),n[js]=o}var J0=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},e1=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,o=[];for(let s=0;s<i;s++){let l=t.getByIndex(s),d=this.queries[l.indexInDeclarationView];o.push(d.clone())}return new n(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)ly(e,t).matches!==null&&this.queries[t].setDirty()}},xh=class{flags;read;predicate;constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=FF(e):this.predicate=e}},t1=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let o=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,o);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},n1=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){let s=i[o];this.matchTNodeWithReadOption(e,t,AF(t,s)),this.matchTNodeWithReadOption(e,t,ah(t,e,s,!1,!1))}else i===Rn?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ah(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let o=this.metadata.read;if(o!==null)if(o===Xe||o===ei||o===Rn&&t.type&4)this.addMatch(t.index,-2);else{let s=ah(t,e,o,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function AF(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function MF(n,e){return n.type&11?nl(n,e):n.type&4?sf(n,e):null}function RF(n,e,t,i){return t===-1?MF(e,n):t===-2?OF(n,e,i):Ws(n,n[rt],t,e)}function OF(n,e,t){if(t===Xe)return nl(e,n);if(t===Rn)return sf(e,n);if(t===ei)return Uw(e,n)}function qw(n,e,t,i){let o=e[no].queries[i];if(o.matches===null){let s=n.data,l=t.matches,d=[];for(let f=0;l!==null&&f<l.length;f+=2){let p=l[f];if(p<0)d.push(null);else{let g=s[p];d.push(RF(e,g,l[f+1],t.metadata.read))}}o.matches=d}return o.matches}function i1(n,e,t,i){let o=n.queries.getByIndex(t),s=o.matches;if(s!==null){let l=qw(n,e,o,t);for(let d=0;d<s.length;d+=2){let f=s[d];if(f>0)i.push(l[d/2]);else{let p=s[d+1],g=e[-f];for(let y=ai;y<g.length;y++){let D=g[y];D[qs]===D[li]&&i1(D[rt],D,p,i)}if(g[Xa]!==null){let y=g[Xa];for(let D=0;D<y.length;D++){let b=y[D];i1(b[rt],b,p,i)}}}}}return i}function ay(n,e){return n[no].queries[e].queryList}function Gw(n,e,t){let i=new Ch((t&4)===4);return x4(n,e,i,i.destroy),(e[no]??=new e1).queries.push(new J0(i))-1}function PF(n,e,t){let i=On();return i.firstCreatePass&&(zw(i,new xh(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),Gw(i,It(),e)}function jw(n,e,t,i){let o=On();if(o.firstCreatePass){let s=di();zw(o,new xh(e,t,i),s.index),kF(o,n),(t&2)===2&&(o.staticContentQueries=!0)}return Gw(o,It(),t)}function FF(n){return n.split(",").map(e=>e.trim())}function zw(n,e,t){n.queries===null&&(n.queries=new t1),n.queries.track(new n1(e,t))}function kF(n,e){let t=n.contentQueries||(n.contentQueries=[]),i=t.length?t[t.length-1]:-1;e!==i&&t.push(n.queries.length-1,e)}function ly(n,e){return n.queries.getByIndex(e)}function Hw(n,e){let t=n[rt],i=ly(t,e);return i.crossesNgTemplate?i1(t,n,e,[]):qw(t,n,i,e)}function af(n){return typeof n=="function"&&n[mi]!==void 0}function Lr(n,e){Li("NgSignals");let t=cD(n),i=t[mi];return e?.equal&&(i.equal=e.equal),t.set=o=>qg(i,o),t.update=o=>dD(i,o),t.asReadonly=LF.bind(t),t}function LF(){let n=this[mi];if(n.readonlyFn===void 0){let e=()=>this();e[mi]=n,n.readonlyFn=e}return n.readonlyFn}function Qw(n,e,t){let i,o=Ug(()=>{i._dirtyCounter();let s=UF(i,n);if(e&&s===void 0)throw new Ae(-951,!1);return s});return i=o[mi],i._dirtyCounter=Lr(0),i._flatValue=void 0,o}function NF(n){return Qw(!0,!1,n)}function VF(n){return Qw(!0,!0,n)}function BF(n,e){let t=n[mi];t._lView=It(),t._queryIndex=e,t._queryList=ay(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(i=>i+1))}function UF(n,e){let t=n._lView,i=n._queryIndex;if(t===void 0||i===void 0||t[$e]&4)return e?void 0:gi;let o=ay(t,i),s=Hw(t,i);return o.reset(s,LC),e?o.first:o._changesDetected||n._flatValue===void 0?n._flatValue=o.toArray():n._flatValue}function b2(n,e){return NF(e)}function qF(n,e){return VF(e)}var Ww=(b2.required=qF,b2);var so=class{};var Ah=class extends so{injector;componentFactoryResolver=new Z0(this);instance=null;constructor(e){super();let t=new Sc([...e.providers,{provide:so,useValue:this},{provide:wc,useValue:this.componentFactoryResolver}],e.parent||Uh(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function GF(n,e,t=null){return new Ah({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var jF=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=W2(!1,t.type),o=i.length>0?GF([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ee({token:n,providedIn:"environment",factory:()=>new n(Je(Fi))})}return n})();function ot(n){return Tc(()=>{let e=$w(n),t=Bt(we({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===VC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(jF).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Or.Emulated,styles:n.styles||gi,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Li("NgStandalone"),Yw(t);let i=n.dependencies;return t.directiveDefs=D2(i,!1),t.pipeDefs=D2(i,!0),t.id=QF(t),t})}function zF(n){return Us(n)||M1(n)}function HF(n){return n!==null}function We(n){return Tc(()=>({type:n.type,bootstrap:n.bootstrap||gi,declarations:n.declarations||gi,imports:n.imports||gi,exports:n.exports||gi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _2(n,e){if(n==null)return to;let t={};for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],s,l,d=Zo.None;Array.isArray(o)?(d=o[0],s=o[1],l=o[2]??s):(s=o,l=o),e?(t[s]=d!==Zo.None?[i,d]:i,e[s]=l):t[s]=i}return t}function Ne(n){return Tc(()=>{let e=$w(n);return Yw(e),e})}function $w(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||to,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||gi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_2(n.inputs,e),outputs:_2(n.outputs),debugInfo:null}}function Yw(n){n.features?.forEach(e=>e(n))}function D2(n,e){if(!n)return null;let t=e?Q2:zF;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(HF)}function QF(n){let e=0,t=typeof n.consts=="function"?"":n.consts,i=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of i.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function WF(n){return Object.getPrototypeOf(n.prototype).constructor}function Gt(n){let e=WF(n.type),t=!0,i=[n];for(;e;){let o;if($o(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ae(903,!1);o=e.\u0275dir}if(o){if(t){i.push(o);let l=n;l.inputs=eh(n.inputs),l.inputTransforms=eh(n.inputTransforms),l.declaredInputs=eh(n.declaredInputs),l.outputs=eh(n.outputs);let d=o.hostBindings;d&&KF(n,d);let f=o.viewQuery,p=o.contentQueries;if(f&&XF(n,f),p&&ZF(n,p),$F(n,o),RO(n.outputs,o.outputs),$o(o)&&o.data.animation){let g=n.data;g.animation=(g.animation||[]).concat(o.data.animation)}}let s=o.features;if(s)for(let l=0;l<s.length;l++){let d=s[l];d&&d.ngInherit&&d(n),d===Gt&&(t=!1)}}e=Object.getPrototypeOf(e)}YF(i)}function $F(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function YF(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let o=n[i];o.hostVars=e+=o.hostVars,o.hostAttrs=_c(o.hostAttrs,t=_c(t,o.hostAttrs))}}function eh(n){return n===to?{}:n===gi?[]:n}function XF(n,e){let t=n.viewQuery;t?n.viewQuery=(i,o)=>{e(i,o),t(i,o)}:n.viewQuery=e}function ZF(n,e){let t=n.contentQueries;t?n.contentQueries=(i,o,s)=>{e(i,o,s),t(i,o,s)}:n.contentQueries=e}function KF(n,e){let t=n.hostBindings;t?n.hostBindings=(i,o)=>{e(i,o),t(i,o)}:n.hostBindings=e}function Xw(n){let e=t=>{let i=Array.isArray(n);t.hostDirectives===null?(t.findHostDirectiveDefs=Zw,t.hostDirectives=i?n.map(r1):[n]):i?t.hostDirectives.unshift(...n.map(r1)):t.hostDirectives.unshift(n)};return e.ngInherit=!0,e}function Zw(n,e,t){if(n.hostDirectives!==null)for(let i of n.hostDirectives)if(typeof i=="function"){let o=i();for(let s of o)C2(r1(s),e,t)}else C2(i,e,t)}function C2(n,e,t){let i=M1(n.directive);JF(i.declaredInputs,n.inputs),Zw(i,e,t),t.set(i,n),e.push(i)}function r1(n){return typeof n=="function"?{directive:Jn(n),inputs:to,outputs:to}:{directive:Jn(n.directive),inputs:w2(n.inputs),outputs:w2(n.outputs)}}function w2(n){if(n===void 0||n.length===0)return to;let e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function JF(n,e){for(let t in e)if(e.hasOwnProperty(t)){let i=e[t],o=n[t];n[i]=o}}function Xt(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)&&o[3]&&(t[i]=o[3])}n.inputTransforms=t}function Kw(n){return tk(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function ek(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function tk(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function es(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function nk(n){return(n.flags&32)===32}function ik(n,e,t,i,o,s,l,d,f){let p=e.consts,g=rl(e,n,4,l||null,d||null);iy(e,t,g,Yo(p,f)),Xh(e,g);let y=g.tView=ty(2,g,i,o,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,p,null);return e.queries!==null&&(e.queries.template(e,g),y.queries=e.queries.embeddedTView(g)),g}function Mh(n,e,t,i,o,s,l,d,f,p){let g=t+yi,y=e.firstCreatePass?ik(g,e,n,i,o,s,l,d,f):e.data[g];ta(y,!1);let D=rk(e,n,y,t);$h()&&tf(e,n,D,y),Xo(D,n);let b=Iw(D,n,D,y);return n[g]=b,of(n,b),TF(b,y,n),zh(y)&&J1(e,n,y),f!=null&&ey(n,y,p),y}function ut(n,e,t,i,o,s,l,d){let f=It(),p=On(),g=Yo(p.consts,s);return Mh(f,p,n,e,t,i,o,g,l,d),ut}var rk=ok;function ok(n,e,t,i){return Yh(!0),e[Mn].createComment("")}var Jw=new _e("");function Bc(n){return!!n&&typeof n.then=="function"}function eI(n){return!!n&&typeof n.subscribe=="function"}var cy=new _e("");var tI=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i});appInits=L(cy,{optional:!0})??[];injector=L(Lt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let s=Z2(this.injector,o);if(Bc(s))t.push(s);else if(eI(s)){let l=new Promise((d,f)=>{s.subscribe({complete:d,error:f})});t.push(l)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),t.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),nI=(()=>{class n{static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new Rh})}return n})(),Rh=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let i=this.queues.get(t);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},sk=new _e("");function ak(){lD(()=>{throw new Ae(600,!1)})}function lk(n){return n.isBoundToModule}var ck=10;function dk(n,e,t){try{let i=t();return Bc(i)?i.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Yi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(l3);afterRenderManager=L(HC);zonelessEnabled=L(Zh);rootEffectScheduler=L(nI);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Oe;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=L(Oc).hasPendingTasks.pipe(mt(t=>!t));constructor(){L(Kh,{optional:!0})}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{t.unsubscribe()})}_injector=L(Fi);get injector(){return this._injector}bootstrap(t,i){let o=t instanceof Eh;if(!this._injector.get(tI).done){let D=!o&&eP(t),b=!1;throw new Ae(405,b)}let l;o?l=t:l=this._injector.get(wc).resolveComponentFactory(t),this.componentTypes.push(l.componentType);let d=lk(l)?void 0:this._injector.get(so),f=i||l.selector,p=l.create(Lt.NULL,[],f,d),g=p.location.nativeElement,y=p.injector.get(Jw,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),lh(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),p}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let i=this.tracingSnapshot;this.tracingSnapshot=null,i.run(H1.CHANGE_DETECTION,this._tick);return}if(this._runningTick)throw new Ae(101,!1);let t=Ct(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ct(t),this.afterTick.next()}};synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ko,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<ck;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o,notifyErrorHandler:s}of this.allViews)uk(o,s,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Hh(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;lh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(sk,[]).forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>lh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Ae(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function uk(n,e,t,i){if(!t&&!Hh(n))return;kw(n,e,t&&!i?0:1)}function fn(n,e,t,i){let o=It(),s=tl();if(es(o,s,e)){let l=On(),d=Wh();j4(d,o,n,e,t,i)}return fn}function iI(n,e,t,i){return es(n,tl(),t)?e+I1(t)+i:kr}function th(n,e){return n<<17|e<<2}function Xs(n){return n>>17&32767}function hk(n){return(n&2)==2}function fk(n,e){return n&131071|e<<17}function o1(n){return n|2}function Ja(n){return(n&131068)>>2}function l0(n,e){return n&-131069|e<<2}function mk(n){return(n&1)===1}function s1(n){return n|1}function pk(n,e,t,i,o,s){let l=s?e.classBindings:e.styleBindings,d=Xs(l),f=Ja(l);n[i]=t;let p=!1,g;if(Array.isArray(t)){let y=t;g=y[1],(g===null||Ac(y,g)>0)&&(p=!0)}else g=t;if(o)if(f!==0){let D=Xs(n[d+1]);n[i+1]=th(D,d),D!==0&&(n[D+1]=l0(n[D+1],i)),n[d+1]=fk(n[d+1],i)}else n[i+1]=th(d,0),d!==0&&(n[d+1]=l0(n[d+1],i)),d=i;else n[i+1]=th(f,0),d===0?d=i:n[f+1]=l0(n[f+1],i),f=i;p&&(n[i+1]=o1(n[i+1])),I2(n,g,i,!0),I2(n,g,i,!1),gk(e,g,n,i,s),l=th(d,f),s?e.classBindings=l:e.styleBindings=l}function gk(n,e,t,i,o){let s=o?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ac(s,e)>=0&&(t[i+1]=s1(t[i+1]))}function I2(n,e,t,i){let o=n[t+1],s=e===null,l=i?Xs(o):Ja(o),d=!1;for(;l!==0&&(d===!1||s);){let f=n[l],p=n[l+1];yk(f,e)&&(d=!0,n[l+1]=i?s1(p):o1(p)),l=i?Xs(p):Ja(p)}d&&(n[t+1]=i?o1(o):s1(o))}function yk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ac(n,e)>=0:!1}var cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vk(n){return n.substring(cr.key,cr.keyEnd)}function Sk(n){return bk(n),rI(n,oI(n,0,cr.textEnd))}function rI(n,e){let t=cr.textEnd;return t===e?-1:(e=cr.keyEnd=_k(n,cr.key=e,t),oI(n,e,t))}function bk(n){cr.key=0,cr.keyEnd=0,cr.value=0,cr.valueEnd=0,cr.textEnd=n.length}function oI(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function _k(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ft(n,e,t){let i=It(),o=tl();if(es(i,o,e)){let s=On(),l=Wh();ny(s,l,i,n,e,i[Mn],t,!1)}return Ft}function a1(n,e,t,i,o){let s=e.inputs,l=o?"class":"style";ry(n,t,s[l],l,i)}function Nr(n,e,t){return sI(n,e,t,!1),Nr}function Ut(n,e){return sI(n,e,null,!0),Ut}function ts(n){Ck(Ak,Dk,n,!0)}function Dk(n,e){for(let t=Sk(e);t>=0;t=rI(e,t))A1(n,vk(e),!0)}function sI(n,e,t,i){let o=It(),s=On(),l=hC(2);if(s.firstUpdatePass&&lI(s,n,l,i),e!==kr&&es(o,l,e)){let d=s.data[Jo()];cI(s,d,o,o[Mn],n,o[l+1]=Rk(e,t),i,l)}}function Ck(n,e,t,i){let o=On(),s=hC(2);o.firstUpdatePass&&lI(o,null,s,i);let l=It();if(t!==kr&&es(l,s,t)){let d=o.data[Jo()];if(dI(d,i)&&!aI(o,s)){let f=i?d.classesWithoutHost:d.stylesWithoutHost;f!==null&&(t=m0(f,t||"")),a1(o,d,l,t,i)}else Mk(o,d,l,l[Mn],l[s+1],l[s+1]=xk(n,e,t),i,s)}}function aI(n,e){return e>=n.expandoStartIndex}function lI(n,e,t,i){let o=n.data;if(o[t+1]===null){let s=o[Jo()],l=aI(n,t);dI(s,i)&&e===null&&!l&&(e=!1),e=wk(o,s,e,i),pk(o,s,e,t,l,i)}}function wk(n,e,t,i){let o=FP(n),s=i?e.residualClasses:e.residualStyles;if(o===null)(i?e.classBindings:e.styleBindings)===0&&(t=c0(null,n,e,t,i),t=Ec(t,e.attrs,i),s=null);else{let l=e.directiveStylingLast;if(l===-1||n[l]!==o)if(t=c0(o,n,e,t,i),s===null){let f=Ik(n,e,i);f!==void 0&&Array.isArray(f)&&(f=c0(null,n,e,f[1],i),f=Ec(f,e.attrs,i),Ek(n,e,i,f))}else s=Tk(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function Ik(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ja(i)!==0)return n[Xs(i)]}function Ek(n,e,t,i){let o=t?e.classBindings:e.styleBindings;n[Xs(o)]=i}function Tk(n,e,t){let i,o=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<o;s++){let l=n[s].hostAttrs;i=Ec(i,l,t)}return Ec(i,e.attrs,t)}function c0(n,e,t,i,o){let s=null,l=t.directiveEnd,d=t.directiveStylingLast;for(d===-1?d=t.directiveStart:d++;d<l&&(s=e[d],i=Ec(i,s.hostAttrs,o),s!==n);)d++;return n!==null&&(t.directiveStylingLast=d),i}function Ec(n,e,t){let i=t?1:2,o=-1;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];typeof l=="number"?o=l:o===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),A1(n,l,t?!0:e[++s]))}return n===void 0?null:n}function xk(n,e,t){if(t==null||t==="")return gi;let i=[],o=co(t);if(Array.isArray(o))for(let s=0;s<o.length;s++)n(i,o[s],!0);else if(typeof o=="object")for(let s in o)o.hasOwnProperty(s)&&n(i,s,o[s]);else typeof o=="string"&&e(i,o);return i}function Ak(n,e,t){let i=String(e);i!==""&&!i.includes(" ")&&A1(n,i,t)}function Mk(n,e,t,i,o,s,l,d){o===kr&&(o=gi);let f=0,p=0,g=0<o.length?o[0]:null,y=0<s.length?s[0]:null;for(;g!==null||y!==null;){let D=f<o.length?o[f+1]:void 0,b=p<s.length?s[p+1]:void 0,C=null,w;g===y?(f+=2,p+=2,D!==b&&(C=y,w=b)):y===null||g!==null&&g<y?(f+=2,C=g):(p+=2,C=y,w=b),C!==null&&cI(n,e,t,i,C,w,l,d),g=f<o.length?o[f]:null,y=p<s.length?s[p]:null}}function cI(n,e,t,i,o,s,l,d){if(!(e.type&3))return;let f=n.data,p=f[d+1],g=mk(p)?E2(f,e,t,o,Ja(p),l):void 0;if(!Oh(g)){Oh(s)||hk(p)&&(s=E2(f,null,t,o,d,l));let y=oC(Jo(),t);l4(i,l,y,o,s)}}function E2(n,e,t,i,o,s){let l=e===null,d;for(;o>0;){let f=n[o],p=Array.isArray(f),g=p?f[1]:f,y=g===null,D=t[o+1];D===kr&&(D=y?gi:void 0);let b=y?t0(D,i):g===i?D:void 0;if(p&&!Oh(b)&&(b=t0(f,i)),Oh(b)&&(d=b,l))return d;let C=n[o+1];o=l?Xs(C):Ja(C)}if(e!==null){let f=s?e.residualClasses:e.residualStyles;f!=null&&(d=t0(f,i))}return d}function Oh(n){return n!==void 0}function Rk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Oi(co(n)))),n}function dI(n,e){return(n.flags&(e?8:16))!==0}var l1=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),o=Math.max(e,t),s=this.detach(o);if(o-i>1){let l=this.detach(i);this.attach(i,s),this.attach(o,l)}else this.attach(i,s)}move(e,t){this.attach(t,this.detach(e))}};function d0(n,e,t,i,o){return n===t&&Object.is(e,i)?1:Object.is(o(n,e),o(t,i))?-1:0}function Ok(n,e,t){let i,o,s=0,l=n.length-1,d=void 0;if(Array.isArray(e)){let f=e.length-1;for(;s<=l&&s<=f;){let p=n.at(s),g=e[s],y=d0(s,p,s,g,t);if(y!==0){y<0&&n.updateValue(s,g),s++;continue}let D=n.at(l),b=e[f],C=d0(l,D,f,b,t);if(C!==0){C<0&&n.updateValue(l,b),l--,f--;continue}let w=t(s,p),x=t(l,D),M=t(s,g);if(Object.is(M,x)){let F=t(f,b);Object.is(F,w)?(n.swap(s,l),n.updateValue(l,b),f--,l--):n.move(l,s),n.updateValue(s,g),s++;continue}if(i??=new Ph,o??=x2(n,s,l,t),c1(n,i,s,M))n.updateValue(s,g),s++,l++;else if(o.has(M))i.set(w,n.detach(s)),l--;else{let F=n.create(s,e[s]);n.attach(s,F),s++,l++}}for(;s<=f;)T2(n,i,t,s,e[s]),s++}else if(e!=null){let f=e[Symbol.iterator](),p=f.next();for(;!p.done&&s<=l;){let g=n.at(s),y=p.value,D=d0(s,g,s,y,t);if(D!==0)D<0&&n.updateValue(s,y),s++,p=f.next();else{i??=new Ph,o??=x2(n,s,l,t);let b=t(s,y);if(c1(n,i,s,b))n.updateValue(s,y),s++,l++,p=f.next();else if(!o.has(b))n.attach(s,n.create(s,y)),s++,l++,p=f.next();else{let C=t(s,g);i.set(C,n.detach(s)),l--}}}for(;!p.done;)T2(n,i,t,n.length,p.value),p=f.next()}for(;s<=l;)n.destroy(n.detach(l--));i?.forEach(f=>{n.destroy(f)})}function c1(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function T2(n,e,t,i,o){if(c1(n,e,i,t(i,o)))n.updateValue(i,o);else{let s=n.create(i,o);n.attach(i,s)}}function x2(n,e,t,i){let o=new Set;for(let s=e;s<=t;s++)o.add(i(s,n.at(s)));return o}var Ph=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(i);)i=o.get(i);o.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let o=this._vMap;for(;o.has(i);)i=o.get(i),e(i,t)}}};function jt(n,e){Li("NgControlFlow");let t=It(),i=tl(),o=t[i]!==kr?t[i]:-1,s=o!==-1?Fh(t,yi+o):void 0,l=0;if(es(t,i,n)){let d=Ct(null);try{if(s!==void 0&&Rw(s,l),n!==-1){let f=yi+n,p=Fh(t,f),g=f1(t[rt],f),y=Ka(p,g.tView.ssrId),D=Nc(t,g,e,{dehydratedView:y});Vc(p,D,l,Za(g,y))}}finally{Ct(d)}}else if(s!==void 0){let d=Mw(s,l);d!==void 0&&(d[si]=e)}}var d1=class{lContainer;$implicit;$index;constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-ai}};function uI(n){return n}var u1=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function hI(n,e,t,i,o,s,l,d,f,p,g,y,D){Li("NgControlFlow");let b=It(),C=On(),w=f!==void 0,x=It(),M=d?l.bind(x[ki][si]):l,F=new u1(w,M);x[yi+n]=F,Mh(b,C,n+1,e,t,i,o,Yo(C.consts,s)),w&&Mh(b,C,n+2,f,p,g,y,Yo(C.consts,D))}var h1=class extends l1{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i}get length(){return this.lContainer.length-ai}at(e){return this.getLView(e)[si].$implicit}attach(e,t){let i=t[$a];this.needsIndexUpdate||=e!==this.length,Vc(this.lContainer,t,e,Za(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Pk(this.lContainer,e)}create(e,t){let i=Ka(this.lContainer,this.templateTNode.tView.ssrId),o=Nc(this.hostLView,this.templateTNode,new d1(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),o}destroy(e){ef(e[rt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[si].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[si].$index=e}getLView(e){return Fk(this.lContainer,e)}};function fI(n){let e=Ct(null),t=Jo();try{let i=It(),o=i[rt],s=i[t],l=t+1,d=Fh(i,l);if(s.liveCollection===void 0){let p=f1(o,l);s.liveCollection=new h1(d,i,p)}else s.liveCollection.reset();let f=s.liveCollection;if(Ok(f,n,s.trackByFn),f.updateIndexes(),s.hasEmptyBlock){let p=tl(),g=f.length===0;if(es(i,p,g)){let y=t+2,D=Fh(i,y);if(g){let b=f1(o,y),C=Ka(D,b.tView.ssrId),w=Nc(i,b,void 0,{dehydratedView:C});Vc(D,w,0,Za(b,C))}else Rw(D,0)}}}finally{Ct(e)}}function Fh(n,e){return n[e]}function Pk(n,e){return Cc(n,e)}function Fk(n,e){return Mw(n,e)}function f1(n,e){return P1(n,e)}function kk(n,e,t,i,o,s){let l=e.consts,d=Yo(l,o),f=rl(e,n,2,i,d);return iy(e,t,f,Yo(l,s)),f.attrs!==null&&Th(f,f.attrs,!1),f.mergedAttrs!==null&&Th(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function Me(n,e,t,i){let o=It(),s=On(),l=yi+n,d=o[Mn],f=s.firstCreatePass?kk(l,s,o,e,t,i):s.data[l],p=Lk(s,o,f,d,e,n);o[l]=p;let g=zh(f);return ta(f,!0),mw(d,p,f),!nk(f)&&$h()&&tf(s,o,p,f),CP()===0&&Xo(p,o),wP(),g&&(J1(s,o,f),K1(s,f,o)),i!==null&&ey(o,f),Me}function Fe(){let n=di();L1()?N1():(n=n.parent,ta(n,!1));let e=n;EP(e)&&TP(),IP();let t=On();return t.firstCreatePass&&(Xh(t,n),O1(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&qP(e)&&a1(t,e,It(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GP(e)&&a1(t,e,It(),e.stylesWithoutHost,!1),Fe}function Ot(n,e,t,i){return Me(n,e,t,i),Fe(),Ot}var Lk=(n,e,t,i,o,s)=>(Yh(!0),rw(i,o,NP()));function Nk(n,e,t,i,o){let s=e.consts,l=Yo(s,i),d=rl(e,n,8,"ng-container",l);l!==null&&Th(d,l,!0);let f=Yo(s,o);return iy(e,t,d,f),e.queries!==null&&e.queries.elementStart(e,d),d}function na(n,e,t){let i=It(),o=On(),s=n+yi,l=o.firstCreatePass?Nk(s,o,i,e,t):o.data[s];ta(l,!0);let d=Vk(o,i,l,n);return i[s]=d,$h()&&tf(o,i,d,l),Xo(d,i),zh(l)&&(J1(o,i,l),K1(o,l,i)),t!=null&&ey(i,l),na}function ia(){let n=di(),e=On();return L1()?N1():(n=n.parent,ta(n,!1)),e.firstCreatePass&&(Xh(e,n),O1(n)&&e.queries.elementEnd(n)),ia}function vi(n,e,t){return na(n,e,t),ia(),vi}var Vk=(n,e,t,i)=>(Yh(!0),$3(e[Mn],""));function ra(){return It()}function ho(n,e,t){let i=It(),o=tl();if(es(i,o,e)){let s=On(),l=Wh();ny(s,l,i,n,e,i[Mn],t,!0)}return ho}var kh="en-US";var Bk=kh;function Uk(n){typeof n=="string"&&(Bk=n.toLowerCase().replace(/_/g,"-"))}var qk=(n,e,t)=>{};function nn(n,e,t,i){let o=It(),s=On(),l=di();return jk(s,o,o[Mn],l,n,e,i),nn}function Gk(n,e,t,i){let o=n.cleanup;if(o!=null)for(let s=0;s<o.length-1;s+=2){let l=o[s];if(l===t&&o[s+1]===i){let d=e[mh],f=o[s+2];return d.length>f?d[f]:null}typeof l=="string"&&(s+=2)}return null}function jk(n,e,t,i,o,s,l){let d=zh(i),p=n.firstCreatePass&&xw(n),g=e[si],y=Tw(e),D=!0;if(i.type&3||l){let w=$i(i,e),x=l?l(w):w,M=y.length,F=l?N=>l(Rr(N[i.index])):i.index,k=null;if(!l&&d&&(k=Gk(n,e,o,i.index)),k!==null){let N=k.__ngLastListenerFn__||k;N.__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,D=!1}else{s=M2(i,e,g,s),qk(w,o,s);let N=t.listen(x,o,s);y.push(s,N),p&&p.push(o,F,M,M+1)}}else s=M2(i,e,g,s);let b=i.outputs,C;if(D&&b!==null&&(C=b[o])){let w=C.length;if(w)for(let x=0;x<w;x+=2){let M=C[x],F=C[x+1],q=e[M][F].subscribe(s),Q=y.length;y.push(s,q),p&&p.push(o,i.index,Q,-(Q+1))}}}function A2(n,e,t,i){let o=Ct(null);try{return Ar(6,e,t),t(i)!==!1}catch(s){return Aw(n,s),!1}finally{Ar(7,e,t),Ct(o)}}function M2(n,e,t,i){return function o(s){if(s===Function)return i;let l=n.componentOffset>-1?Ks(n.index,e):e;sy(l,5);let d=A2(e,t,i,s),f=o.__ngNextListenerFn__;for(;f;)d=A2(e,t,f,s)&&d,f=f.__ngNextListenerFn__;return d}}function mn(n=1){return LP(n)}function zk(n,e){let t=null,i=p4(n);for(let o=0;o<e.length;o++){let s=e[o];if(s==="*"){t=o;continue}if(i===null?gw(n,s,!0):v4(i,s))return o}return t}function ti(n){let e=It()[ki][Ti];if(!e.projection){let t=n?n.length:1,i=e.projection=ZO(t,null),o=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let l=n?zk(s,n):0;l!==null&&(o[l]?o[l].projectionNext=s:i[l]=s,o[l]=s)}s=s.next}}}function Zt(n,e=0,t,i,o,s){let l=It(),d=On(),f=i?n+1:null;f!==null&&Mh(l,d,f,i,o,s,null,t);let p=rl(d,yi+n,16,null,t||null);p.projection===null&&(p.projection=e),N1();let y=!l[$a]||cC();l[ki][Ti].projection[p.projection]===null&&f!==null?Hk(l,d,f):y&&(p.flags&32)!==32&&s4(d,l,p)}function Hk(n,e,t){let i=yi+t,o=e.data[i],s=n[i],l=Ka(s,o.tView.ssrId),d=Nc(n,o,void 0,{dehydratedView:l});Vc(s,d,0,Za(o,l))}function Uc(n,e,t){return mI(n,"",e,"",t),Uc}function mI(n,e,t,i,o){let s=It(),l=iI(s,e,t,i);if(l!==kr){let d=On(),f=Wh();ny(d,f,s,n,l,s[Mn],o,!1)}return mI}function Gn(n,e,t,i){jw(n,e,t,i)}function pn(n,e,t){PF(n,e,t)}function at(n){let e=It(),t=On(),i=V1();Qh(i+1);let o=ly(t,i);if(n.dirty&&SP(e)===((o.metadata.flags&2)===2)){if(o.matches===null)n.reset([]);else{let s=Hw(e,i);n.reset(s,LC),n.notifyOnChanges()}return!0}return!1}function lt(){return ay(It(),V1())}function pI(n,e,t,i,o){BF(e,jw(n,t,i,o))}function gI(n=1){Qh(V1()+n)}function qc(n){let e=AP();return vP(e,yi+n)}function _n(n,e=""){let t=It(),i=On(),o=n+yi,s=i.firstCreatePass?rl(i,o,1,e,null):i.data[o],l=Qk(i,t,s,e,n);t[o]=l,$h()&&tf(i,t,l,s),ta(s,!1)}var Qk=(n,e,t,i,o)=>(Yh(!0),Q3(e[Mn],i));function fo(n){return Vr("",n,""),fo}function Vr(n,e,t){let i=It(),o=iI(i,n,e,t);return o!==kr&&W4(i,Jo(),o),Vr}function Wk(n,e,t){let i=On();if(i.firstCreatePass){let o=$o(n);m1(t,i.data,i.blueprint,o,!0),m1(e,i.data,i.blueprint,o,!1)}}function m1(n,e,t,i,o){if(n=Jn(n),Array.isArray(n))for(let s=0;s<n.length;s++)m1(n[s],e,t,i,o);else{let s=On(),l=It(),d=di(),f=Wa(n)?n:Jn(n.provide),p=X2(n),g=d.providerIndexes&1048575,y=d.directiveStart,D=d.providerIndexes>>20;if(Wa(n)||!n.multi){let b=new Qs(p,o,bn),C=h0(f,e,o?g:g+D,y);C===-1?(A0(bh(d,l),s,f),u0(s,n,e.length),e.push(f),d.directiveStart++,d.directiveEnd++,o&&(d.providerIndexes+=1048576),t.push(b),l.push(b)):(t[C]=b,l[C]=b)}else{let b=h0(f,e,g+D,y),C=h0(f,e,g,g+D),w=b>=0&&t[b],x=C>=0&&t[C];if(o&&!x||!o&&!w){A0(bh(d,l),s,f);let M=Xk(o?Yk:$k,t.length,o,i,p);!o&&x&&(t[C].providerFactory=M),u0(s,n,e.length,0),e.push(f),d.directiveStart++,d.directiveEnd++,o&&(d.providerIndexes+=1048576),t.push(M),l.push(M)}else{let M=yI(t[o?C:b],p,!o&&i);u0(s,n,b>-1?b:C,M)}!o&&i&&x&&t[C].componentProviders++}}}function u0(n,e,t,i){let o=Wa(e),s=oP(e);if(o||s){let f=(s?Jn(e.useClass):e).prototype.ngOnDestroy;if(f){let p=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let g=p.indexOf(t);g===-1?p.push(t,[i,f]):p[g+1].push(i,f)}else p.push(t,f)}}}function yI(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function h0(n,e,t,i){for(let o=t;o<i;o++)if(e[o]===n)return o;return-1}function $k(n,e,t,i){return p1(this.multi,[])}function Yk(n,e,t,i){let o=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,d=Ws(t,t[rt],this.providerFactory.index,i);s=d.slice(0,l),p1(o,s);for(let f=l;f<d.length;f++)s.push(d[f])}else s=[],p1(o,s);return s}function p1(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function Xk(n,e,t,i,o){let s=new Qs(n,t,bn);return s.multi=[],s.index=e,s.componentProviders=0,yI(s,o,i&&!t),s}function Kt(n,e=[]){return t=>{t.providersResolver=(i,o)=>Wk(i,o?o(n):n,e)}}function vI(n,e){return sf(n,e)}var Zs=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},SI=new Zs("19.0.1");var Zk=(()=>{class n{zone=L(Ue);changeDetectionScheduler=L($s);applicationRef=L(Yi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Kk=new _e("",{factory:()=>!1});function bI({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ue(Bt(we({},DI()),{scheduleInRootZone:t})),[{provide:Ue,useFactory:n},{provide:vc,multi:!0,useFactory:()=>{let i=L(Zk,{optional:!0});return()=>i.initialize()}},{provide:vc,multi:!0,useFactory:()=>{let i=L(Jk);return()=>{i.initialize()}}},e===!0?{provide:OC,useValue:!0}:[],{provide:PC,useValue:t??RC}]}function _I(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=bI({ngZoneFactory:()=>{let o=DI(n);return o.scheduleInRootZone=t,o.shouldCoalesceEventChangeDetection&&Li("NgZone_CoalesceEvent"),new Ue(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Vh([{provide:Kk,useValue:!0},{provide:Zh,useValue:!1},i])}function DI(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Jk=(()=>{class n{subscription=new Yt;initialized=!1;zone=L(Ue);pendingTasks=L(Oc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ue.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ue.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var eL=(()=>{class n{appRef=L(Yi);taskService=L(Oc);ngZone=L(Ue);zonelessEnabled=L(Zh);tracing=L(Kh,{optional:!0});disableScheduling=L(OC,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Yt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(PC,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof P0||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let i=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 13:{this.appRef.dirtyFlags|=16,i=!0;break}case 14:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{i=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let o=this.useMicrotaskScheduler?r2:FC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,r2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tL(){return typeof $localize<"u"&&$localize.locale||kh}var lf=new _e("",{providedIn:"root",factory:()=>L(lf,Mt.Optional|Mt.SkipSelf)||tL()});var g1=new _e("");function nh(n){return!n.moduleRef}function nL(n){let e=nh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ue);return t.run(()=>{nh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Ei,null),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:s=>{i.handleError(s)}})}),nh(n)){let s=()=>e.destroy(),l=n.platformInjector.get(g1);l.add(s),e.onDestroy(()=>{o.unsubscribe(),l.delete(s)})}else{let s=()=>n.moduleRef.destroy(),l=n.platformInjector.get(g1);l.add(s),n.moduleRef.onDestroy(()=>{lh(n.allPlatformModules,n.moduleRef),o.unsubscribe(),l.delete(s)})}return dk(i,t,()=>{let s=e.get(tI);return s.runInitializers(),s.donePromise.then(()=>{let l=e.get(lf,kh);if(Uk(l||kh),nh(n)){let d=e.get(Yi);return n.rootComponent!==void 0&&d.bootstrap(n.rootComponent),d}else return iL(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function iL(n,e){let t=n.injector.get(Yi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Ae(-403,!1);e.push(n)}var ch=null;function rL(n=[],e){return Lt.create({name:e,providers:[{provide:Bh,useValue:"platform"},{provide:g1,useValue:new Set([()=>ch=null])},...n]})}function oL(n=[]){if(ch)return ch;let e=rL(n);return ch=e,ak(),sL(e),e}function sL(n){let e=n.get(z1,null);Z2(n,()=>{e?.forEach(t=>t())})}function CI(){return!1}var wn=(()=>{class n{static __NG_ELEMENT_ID__=aL}return n})();function aL(n){return lL(di(),It(),(n&16)===16)}function lL(n,e,t){if(jh(n)&&!t){let i=Ks(n.index,e);return new Ys(i,i)}else if(n.type&175){let i=e[ki];return new Ys(i,e)}return null}var y1=class{constructor(){}supports(e){return Kw(e)}create(e){return new v1(e)}},cL=(n,e)=>e,v1=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||cL}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,o=0,s=null;for(;t||i;){let l=!i||t&&t.currentIndex<R2(i,o,s)?t:i,d=R2(l,o,s),f=l.currentIndex;if(l===i)o--,i=i._nextRemoved;else if(t=t._next,l.previousIndex==null)o++;else{s||(s=[]);let p=d-o,g=f-o;if(p!=g){for(let D=0;D<p;D++){let b=D<s.length?s[D]:s[D]=0,C=b+D;g<=C&&C<p&&(s[D]=b+1)}let y=l.previousIndex;s[y]=g-p}}d!==f&&e(l,d,f)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Kw(e))throw new Ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,o,s,l;if(Array.isArray(e)){this.length=e.length;for(let d=0;d<this.length;d++)s=e[d],l=this._trackByFn(d,s),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,s,l,d),i=!0):(i&&(t=this._verifyReinsertion(t,s,l,d)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else o=0,ek(e,d=>{l=this._trackByFn(o,d),t===null||!Object.is(t.trackById,l)?(t=this._mismatch(t,d,l,o),i=!0):(i&&(t=this._verifyReinsertion(t,d,l,o)),Object.is(t.item,d)||this._addIdentityChange(t,d)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,o){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,o)):e=this._addAfter(new S1(t,i),s,o)),e}_verifyReinsertion(e,t,i,o){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,s=e._nextRemoved;return o===null?this._removalsHead=s:o._nextRemoved=s,s===null?this._removalsTail=o:s._prevRemoved=o,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lh),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},S1=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},b1=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Lh=class{map=new Map;put(e){let t=e.trackById,i=this.map.get(t);i||(i=new b1,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,o=this.map.get(i);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function R2(n,e,t){let i=n.previousIndex;if(i===null)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+e+o}function O2(){return new Br([new y1])}var Br=(()=>{class n{factories;static \u0275prov=Ee({token:n,providedIn:"root",factory:O2});constructor(t){this.factories=t}static create(t,i){if(i!=null){let o=i.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||O2()),deps:[[n,new T1,new xc]]}}find(t){let i=this.factories.find(o=>o.supports(t));if(i!=null)return i;throw new Ae(901,!1)}}return n})();function wI(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,o=oL(i),s=[bI({}),{provide:$s,useExisting:eL},...t||[]],l=new Ah({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return nL({r3Injector:l.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}}function ht(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ni(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function mo(n,e){Li("NgSignals");let t=Ug(n);return e?.equal&&(t[mi].equal=e.equal),t}function Xi(n){let e=Ct(null);try{return n()}finally{Ct(e)}}var II=(()=>{class n{view;node;constructor(t,i){this.view=t,this.node=i}static __NG_ELEMENT_ID__=dL}return n})();function dL(){return new II(It(),di())}var uL=!1,hL=(()=>{class n extends Rh{pendingTasks=L(Oc);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=Ee({token:n,providedIn:"root",factory:()=>new n})}return n})(),_1=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,i,o,s,l){this.scheduler=e,this.effectFn=t,this.zone=i,this.injector=s,this.watcher=hD(d=>this.runEffect(d),()=>this.schedule(),l),this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Ei,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function fL(){}function mL(n,e){Li("NgSignals"),!e?.injector&&qh(fL);let t=e?.injector??L(Lt),i=e?.manualCleanup!==!0?t.get(Rc):null,o=new _1(t.get(hL),n,typeof Zone>"u"?null:Zone.current,i,t,e?.allowSignalWrites??!1),s=t.get(wn,null,{optional:!0});return!s||!(s._lView[$e]&8)?o.watcher.notify():(s._lView[rh]??=[]).push(o.watcher.notify),o}var pL=uL;var D1=class{[mi];constructor(e){this[mi]=e}destroy(){this[mi].destroy()}};function cf(n,e){if(pL)return mL(n,e);Li("NgSignals"),!e?.injector&&qh(cf);let t=e?.injector??L(Lt),i=e?.manualCleanup!==!0?t.get(Rc):null,o,s=t.get(II,null,{optional:!0}),l=t.get($s);return s!==null&&!e?.forceRoot?(o=vL(s.view,l,n),i instanceof _h&&i._lView===s.view&&(i=null)):o=SL(n,t.get(nI),l),o.injector=t,i!==null&&(o.onDestroyFn=i.onDestroy(()=>o.destroy())),new D1(o)}var EI=Bt(we({},Ts),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,onDestroyFn:Dc,run(){if(this.dirty=!1,this.hasRun&&!ac(this))return;this.hasRun=!0;let n=i=>(this.cleanupFns??=[]).push(i),e=Ra(this),t=yh(!1);try{this.maybeCleanup(),this.fn(n)}finally{yh(t),sc(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),gL=Bt(we({},EI),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Oa(this),this.onDestroyFn(),this.maybeCleanup()}}),yL=Bt(we({},EI),{consumerMarkedDirty(){this.view[$e]|=8192,Mc(this.view),this.notifier.notify(14)},destroy(){Oa(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Gs]?.delete(this)}});function vL(n,e,t){let i=Object.create(yL);return i.view=n,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=t,n[Gs]??=new Set,n[Gs].add(i),i.consumerMarkedDirty(i),i}function SL(n,e,t){let i=Object.create(gL);return i.fn=n,i.scheduler=e,i.notifier=t,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.schedule(i),i.notifier.notify(13),i}function df(n,e){let t=Us(n),i=e.elementInjector||Uh();return new Ic(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var OI=null;function ol(){return OI}function PI(n){OI??=n}var uf=class{};var bt=new _e(""),FI=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:()=>L(bL),providedIn:"platform"})}return n})();var bL=(()=>{class n extends FI{_location;_history;_doc=L(bt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ol().getBaseHref(this._doc)}onPopState(t){let i=ol().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=ol().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,o){this._history.pushState(t,i,o)}replaceState(t,i,o){this._history.replaceState(t,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function kI(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function TI(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function oa(n){return n&&n[0]!=="?"?"?"+n:n}var hy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:()=>L(DL),providedIn:"root"})}return n})(),_L=new _e(""),DL=(()=>{class n extends hy{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,i){super(),this._platformLocation=t,this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(bt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kI(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+oa(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,s){let l=this.prepareExternalUrl(o+oa(s));this._platformLocation.pushState(t,i,l)}replaceState(t,i,o,s){let l=this.prepareExternalUrl(o+oa(s));this._platformLocation.replaceState(t,i,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(i){return new(i||n)(Je(FI),Je(_L,8))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fy=(()=>{class n{_subject=new Oe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=IL(TI(xI(i))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+oa(i))}normalize(t){return n.stripTrailingSlash(wL(this._basePath,xI(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._locationStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oa(i)),o)}replaceState(t,i="",o=null){this._locationStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oa(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i??void 0,complete:o??void 0})}static normalizeQueryParams=oa;static joinWithSlash=kI;static stripTrailingSlash=TI;static \u0275fac=function(i){return new(i||n)(Je(hy))};static \u0275prov=Ee({token:n,factory:()=>CL(),providedIn:"root"})}return n})();function CL(){return new fy(Je(hy))}function wL(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function xI(n){return n.replace(/\/index.html$/,"")}function IL(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function LI(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[o,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===e)return decodeURIComponent(s)}return null}var dy=class{$implicit;ngForOf;index;count;constructor(e,t,i,o){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},NI=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,i,o){this._viewContainer=t,this._template=i,this._differs=o}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((o,s,l)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new dy(o.item,this._ngForOf,-1,-1),l===null?void 0:l);else if(l==null)i.remove(s===null?void 0:s);else if(s!==null){let d=i.get(s);i.move(d,l),AI(d,o)}});for(let o=0,s=i.length;o<s;o++){let d=i.get(o).context;d.index=o,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);AI(s,o)})}static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(bn(ei),bn(Rn),bn(Br))};static \u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function AI(n,e){n.context.$implicit=e.item}var VI=(()=>{class n{_viewContainer;_context=new uy;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,i){this._viewContainer=t,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){MI("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){MI("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,i){return!0}static \u0275fac=function(i){return new(i||n)(bn(ei),bn(Rn))};static \u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),uy=class{$implicit=null;ngIf=null};function MI(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Oi(e)}'.`)}var BI=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let o=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,o,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,i,o)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,o):!1,get:(t,i,o)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,o)}})}static \u0275fac=function(i){return new(i||n)(bn(ei))};static \u0275dir=Ne({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[ci]})}return n})();var my=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})(),py="browser",EL="server";function Gc(n){return n===py}function gy(n){return n===EL}var hf=class{};var vy=class{};var sl=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let o=t.slice(0,i),s=t.slice(i+1).trim();this.addHeaderEntry(o,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.addHeaderEntry(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let l=this.headers.get(t);if(!l)return;l=l.filter(d=>s.indexOf(d)===-1),l.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}break}}addHeaderEntry(e,t){let i=e.toLowerCase();this.maybeSetNormalizedName(e,i),this.headers.has(i)?this.headers.get(i).push(t):this.headers.set(i,[t])}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),o=e.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Sy=class{encodeKey(e){return UI(e)}encodeValue(e){return UI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function xL(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let s=o.indexOf("="),[l,d]=s==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,s)),e.decodeValue(o.slice(s+1))],f=t.get(l)||[];f.push(d),t.set(l,f)}),t}var AL=/%(\d[a-f0-9])/gi,ML={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function UI(n){return encodeURIComponent(n).replace(AL,(e,t)=>ML[t]??e)}function ff(n){return`${n}`}var ns=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Sy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=xL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],o=Array.isArray(i)?i.map(ff):[ff(i)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let o=e[i];Array.isArray(o)?o.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ff(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],o=i.indexOf(ff(e.value));o!==-1&&i.splice(o,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var by=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function RL(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function qI(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function GI(n){return typeof Blob<"u"&&n instanceof Blob}function jI(n){return typeof FormData<"u"&&n instanceof FormData}function OL(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var jc=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,i,o){this.url=t,this.method=e.toUpperCase();let s;if(RL(this.method)||o?(this.body=i!==void 0?i:null,s=o):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new sl,this.context??=new by,!this.params)this.params=new ns,this.urlWithParams=t;else{let l=this.params.toString();if(l.length===0)this.urlWithParams=t;else{let d=t.indexOf("?"),f=d===-1?"?":d<t.length-1?"&":"";this.urlWithParams=t+f+l}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||qI(this.body)||GI(this.body)||jI(this.body)||OL(this.body)?this.body:this.body instanceof ns?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jI(this.body)?null:GI(this.body)?this.body.type||null:qI(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ns?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,s=e.transferCache??this.transferCache,l=e.body!==void 0?e.body:this.body,d=e.withCredentials??this.withCredentials,f=e.reportProgress??this.reportProgress,p=e.headers||this.headers,g=e.params||this.params,y=e.context??this.context;return e.setHeaders!==void 0&&(p=Object.keys(e.setHeaders).reduce((D,b)=>D.set(b,e.setHeaders[b]),p)),e.setParams&&(g=Object.keys(e.setParams).reduce((D,b)=>D.set(b,e.setParams[b]),g)),new n(t,i,l,{params:g,headers:p,context:y,reportProgress:f,responseType:o,withCredentials:d,transferCache:s})}},zI=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(zI||{}),_y=class{headers;status;statusText;url;ok;type;constructor(e,t=200,i="OK"){this.headers=e.headers||new sl,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Dy=class n extends _y{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=zI.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};function yy(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var HI=(()=>{class n{handler;constructor(t){this.handler=t}request(t,i,o={}){let s;if(t instanceof jc)s=t;else{let f;o.headers instanceof sl?f=o.headers:f=new sl(o.headers);let p;o.params&&(o.params instanceof ns?p=o.params:p=new ns({fromObject:o.params})),s=new jc(t,i,o.body!==void 0?o.body:null,{headers:f,context:o.context,params:p,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let l=dn(s).pipe(Xg(f=>this.handler.handle(f)));if(t instanceof jc||o.observe==="events")return l;let d=l.pipe(yn(f=>f instanceof Dy));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe(mt(f=>{if(f.body!==null&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe(mt(f=>{if(f.body!==null&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe(mt(f=>{if(f.body!==null&&typeof f.body!="string")throw new Error("Response is not a string.");return f.body}));case"json":default:return d.pipe(mt(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new ns().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,yy(o,i))}post(t,i,o={}){return this.request("POST",t,yy(o,i))}put(t,i,o={}){return this.request("PUT",t,yy(o,i))}static \u0275fac=function(i){return new(i||n)(Je(vy))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();var wy=class extends uf{supportsDOMEvents=!0},Iy=class n extends wy{static makeCurrent(){PI(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=kL();return t==null?null:LL(t)}resetBaseElement(){zc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return LI(document.cookie,e)}},zc=null;function kL(){return zc=zc||document.querySelector("base"),zc?zc.getAttribute("href"):null}function LL(n){return new URL(n,document.baseURI).pathname}var NL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),Ey=new _e(""),XI=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,i){this._zone=i,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new Ae(5101,!1);return this._eventNameToPlugin.set(t,i),i}static \u0275fac=function(i){return new(i||n)(Je(Ey),Je(Ue))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),mf=class{_doc;constructor(e){this._doc=e}manager},Ty="ng-app-id";function QI(n){for(let e of n)e.remove()}function WI(n,e){let t=e.createElement("style");return t.textContent=n,t}function VL(n,e,t){let i=n.head?.querySelectorAll(`style[${Ty}="${e}"]`);if(i)for(let o of i)o.textContent&&(o.removeAttribute(Ty),t.set(o.textContent,{usage:0,elements:[o]}))}function xy(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ZI=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,i,o,s={}){this.doc=t,this.appId=i,this.nonce=o,this.isServer=gy(s),VL(t,i,this.inline),this.hosts.add(t.head)}addStyles(t,i){for(let o of t)this.addUsage(o,this.inline,WI);i?.forEach(o=>this.addUsage(o,this.external,xy))}removeStyles(t,i){for(let o of t)this.removeUsage(o,this.inline);i?.forEach(o=>this.removeUsage(o,this.external))}addUsage(t,i,o){let s=i.get(t);s?s.usage++:i.set(t,{usage:1,elements:[...this.hosts].map(l=>this.addElement(l,o(t,this.doc)))})}removeUsage(t,i){let o=i.get(t);o&&(o.usage--,o.usage<=0&&(QI(o.elements),i.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])QI(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[i,{elements:o}]of this.inline)o.push(this.addElement(t,WI(i,this.doc)));for(let[i,{elements:o}]of this.external)o.push(this.addElement(t,xy(i,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(Ty,this.appId),t.appendChild(i)}static \u0275fac=function(i){return new(i||n)(Je(bt),Je(Pc),Je(Fc,8),Je(ur))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),Cy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},My=/%COMP%/g,KI="%COMP%",BL=`_nghost-${KI}`,UL=`_ngcontent-${KI}`,qL=!0,GL=new _e("",{providedIn:"root",factory:()=>qL});function jL(n){return UL.replace(My,n)}function zL(n){return BL.replace(My,n)}function JI(n,e){return e.map(t=>t.replace(My,n))}var pf=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,i,o,s,l,d,f,p=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=l,this.platformId=d,this.ngZone=f,this.nonce=p,this.platformIsServer=gy(d),this.defaultRenderer=new Hc(t,l,f,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Or.ShadowDom&&(i=Bt(we({},i),{encapsulation:Or.Emulated}));let o=this.getOrCreateRenderer(t,i);return o instanceof gf?o.applyToHost(t):o instanceof Qc&&o.applyStyles(),o}getOrCreateRenderer(t,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let l=this.doc,d=this.ngZone,f=this.eventManager,p=this.sharedStylesHost,g=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case Or.Emulated:s=new gf(f,p,i,this.appId,g,l,d,y);break;case Or.ShadowDom:return new Ay(f,p,t,i,l,d,this.nonce,y);default:s=new Qc(f,p,i,g,l,d,y);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static \u0275fac=function(i){return new(i||n)(Je(XI),Je(ZI),Je(Pc),Je(GL),Je(bt),Je(ur),Je(Ue),Je(Fc))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),Hc=class{eventManager;doc;ngZone;platformIsServer;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,i,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Cy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($I(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&($I(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ae(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,o){if(o){t=o+":"+t;let s=Cy[o];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let o=Cy[i];o?e.removeAttributeNS(o,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,o){o&(oo.DashCase|oo.Important)?e.style.setProperty(t,i,o&oo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&oo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=ol().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function $I(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ay=class extends Hc{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,i,o,s,l,d,f){super(e,s,l,f),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let p=JI(o.id,o.styles);for(let y of p){let D=document.createElement("style");d&&D.setAttribute("nonce",d),D.textContent=y,this.shadowRoot.appendChild(D)}let g=o.getExternalStyles?.();if(g)for(let y of g){let D=xy(y,s);d&&D.setAttribute("nonce",d),this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Qc=class extends Hc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,i,o,s,l,d,f){super(e,s,l,d),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=f?JI(f,i.styles):i.styles,this.styleUrls=i.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},gf=class extends Qc{contentAttr;hostAttr;constructor(e,t,i,o,s,l,d,f){let p=o+"-"+i.id;super(e,t,i,s,l,d,f,p),this.contentAttr=jL(p),this.hostAttr=zL(p)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},HL=(()=>{class n extends mf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}static \u0275fac=function(i){return new(i||n)(Je(bt))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),YI=["alt","control","meta","shift"],QL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},WL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},$L=(()=>{class n extends mf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,o){let s=n.parseEventName(i),l=n.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ol().onAndCancel(t,s.domEventName,l))}static parseEventName(t){let i=t.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=n._normalizeKey(i.pop()),l="",d=i.indexOf("code");if(d>-1&&(i.splice(d,1),l="code."),YI.forEach(p=>{let g=i.indexOf(p);g>-1&&(i.splice(g,1),l+=p+".")}),l+=s,i.length!=0||s.length===0)return null;let f={};return f.domEventName=o,f.fullKey=l,f}static matchEventFullKeyCode(t,i){let o=QL[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(o=t.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),YI.forEach(l=>{if(l!==o){let d=WL[l];d(t)&&(s+=l+".")}}),s+=o,s===i)}static eventCallback(t,i,o){return s=>{n.matchEventFullKeyCode(s,t)&&o.runGuarded(()=>i(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(i){return new(i||n)(Je(bt))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();function eE(n,e){return wI(we({rootComponent:n},YL(e)))}function YL(n){return{appProviders:[...e8,...n?.providers??[]],platformProviders:JL}}function XL(){Iy.makeCurrent()}function ZL(){return new Ei}function KL(){return jC(document),document}var JL=[{provide:ur,useValue:py},{provide:z1,useValue:XL,multi:!0},{provide:bt,useFactory:KL,deps:[]}];var e8=[{provide:Bh,useValue:"root"},{provide:Ei,useFactory:ZL,deps:[]},{provide:Ey,useClass:HL,multi:!0,deps:[bt,Ue,ur]},{provide:Ey,useClass:$L,multi:!0,deps:[bt]},pf,ZI,XI,{provide:Ko,useExisting:pf},{provide:hf,useClass:NL,deps:[]},[]];var Ry=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:function(i){let o=null;return i?o=new(i||n):o=Je(t8),o},providedIn:"root"})}return n})(),t8=(()=>{class n extends Ry{_doc;constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case xi.NONE:return i;case xi.HTML:return il(i,"HTML")?co(i):iw(this._doc,String(i)).toString();case xi.STYLE:return il(i,"Style")?co(i):i;case xi.SCRIPT:if(il(i,"Script"))return co(i);throw new Ae(5200,!1);case xi.URL:return il(i,"URL")?co(i):W1(String(i));case xi.RESOURCE_URL:if(il(i,"ResourceURL"))return co(i);throw new Ae(5201,!1);default:throw new Ae(5202,!1)}}bypassSecurityTrustHtml(t){return WC(t)}bypassSecurityTrustStyle(t){return $C(t)}bypassSecurityTrustScript(t){return YC(t)}bypassSecurityTrustUrl(t){return XC(t)}bypassSecurityTrustResourceUrl(t){return ZC(t)}static \u0275fac=function(i){return new(i||n)(Je(bt))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var $c="Service workers are disabled or not supported by this browser";function i8(n){return jo(()=>dc(new Error(n)))}var al=class{serviceWorker;worker;registration;events;constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=i8($c);else{let i=Tr(e,"controllerchange").pipe(mt(()=>e.controller)),o=jo(()=>dn(e.controller)),s=Er(o,i);this.worker=s.pipe(yn(g=>!!g)),this.registration=this.worker.pipe(zo(()=>e.getRegistration()));let p=Tr(e,"message").pipe(mt(g=>g.data)).pipe(yn(g=>g&&g.type)).pipe(Jg());p.connect(),this.events=p}}postMessage(e,t){return this.worker.pipe(Un(1),eo(i=>{i.postMessage(we({action:e},t))})).toPromise().then(()=>{})}postMessageWithOperation(e,t,i){let o=this.waitForOperationCompleted(i),s=this.postMessage(e,t);return Promise.all([s,o]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let t;return typeof e=="string"?t=i=>i.type===e:t=i=>e.includes(i.type),this.events.pipe(yn(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Un(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(yn(t=>t.nonce===e),Un(1),mt(t=>{if(t.result!==void 0)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},r8=(()=>{class n{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new Oe;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=Ns,this.notificationClicks=Ns,this.subscription=Ns;return}this.messages=this.sw.eventsOfType("PUSH").pipe(mt(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(mt(o=>o.data)),this.pushManager=this.sw.registration.pipe(mt(o=>o.pushManager));let i=this.pushManager.pipe(zo(o=>o.getSubscription()));this.subscription=Ii(i,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error($c));let i={userVisibleOnly:!0},o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let l=0;l<o.length;l++)s[l]=o.charCodeAt(l);return i.applicationServerKey=s,this.pushManager.pipe(zo(l=>l.subscribe(i)),Un(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error($c));let t=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Un(1),zo(t)).toPromise()}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||n)(Je(al))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),o8=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Ns,this.unrecoverable=Ns;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($c));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error($c));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||n)(Je(al))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();var tE=new _e("");function s8(n,e,t,i){return()=>{if(!(Gc(i)&&"serviceWorker"in navigator&&t.enabled!==!1))return;let o=n.get(Ue),s=n.get(Yi);o.runOutsideAngular(()=>{let d=navigator.serviceWorker,f=()=>d.controller?.postMessage({action:"INITIALIZE"});d.addEventListener("controllerchange",f),s.onDestroy(()=>{d.removeEventListener("controllerchange",f)})});let l;if(typeof t.registrationStrategy=="function")l=t.registrationStrategy();else{let[d,...f]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(d){case"registerImmediately":l=dn(null);break;case"registerWithDelay":l=nE(+f[0]||0);break;case"registerWhenStable":let p=pi(n.get(Yi).whenStable());l=f[0]?Ii(p,nE(+f[0])):p;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}o.runOutsideAngular(()=>l.pipe(Un(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(d=>console.error("Service worker registration failed with:",d))))}}function nE(n){return dn(null).pipe(Kg(n))}function a8(n,e){return new al(Gc(e)&&n.enabled!==!1?navigator.serviceWorker:void 0)}var Wc=class{enabled;scope;registrationStrategy};function iE(n,e={}){return Vh([r8,o8,{provide:tE,useValue:n},{provide:Wc,useValue:e},{provide:al,useFactory:a8,deps:[Wc,ur]},{provide:cy,useFactory:s8,deps:[Lt,tE,Wc,ur],multi:!0}])}var st=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(st||{}),Ur="*";function rE(n,e){return{type:st.Trigger,name:n,definitions:e,options:{}}}function oE(n,e=null){return{type:st.Animate,styles:e,timings:n}}function sE(n,e=null){return{type:st.Sequence,steps:n,options:e}}function ll(n){return{type:st.Style,styles:n,offset:null}}function aE(n,e,t){return{type:st.State,name:n,styles:e,options:t}}function lE(n,e,t=null){return{type:st.Transition,expr:n,animation:e,options:t}}var is=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Yc=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,i=0,o=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++i==s&&this._onDestroy()}),l.onStart(()=>{++o==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let o=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(o)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},yf="!";function cE(n){return new Ae(3e3,!1)}function l8(){return new Ae(3100,!1)}function c8(){return new Ae(3101,!1)}function d8(n){return new Ae(3001,!1)}function u8(n){return new Ae(3003,!1)}function h8(n){return new Ae(3004,!1)}function f8(n,e){return new Ae(3005,!1)}function m8(){return new Ae(3006,!1)}function p8(){return new Ae(3007,!1)}function g8(n,e){return new Ae(3008,!1)}function y8(n){return new Ae(3002,!1)}function v8(n,e,t,i,o){return new Ae(3010,!1)}function S8(){return new Ae(3011,!1)}function b8(){return new Ae(3012,!1)}function _8(){return new Ae(3200,!1)}function D8(){return new Ae(3202,!1)}function C8(){return new Ae(3013,!1)}function w8(n){return new Ae(3014,!1)}function I8(n){return new Ae(3015,!1)}function E8(n){return new Ae(3016,!1)}function T8(n,e){return new Ae(3404,!1)}function x8(n){return new Ae(3502,!1)}function A8(n){return new Ae(3503,!1)}function M8(){return new Ae(3300,!1)}function R8(n){return new Ae(3504,!1)}function O8(n){return new Ae(3301,!1)}function P8(n,e){return new Ae(3302,!1)}function F8(n){return new Ae(3303,!1)}function k8(n,e){return new Ae(3400,!1)}function L8(n){return new Ae(3401,!1)}function N8(n){return new Ae(3402,!1)}function V8(n,e){return new Ae(3505,!1)}function rs(n){switch(n.length){case 0:return new is;case 1:return n[0];default:return new Yc(n)}}function CE(n,e,t=new Map,i=new Map){let o=[],s=[],l=-1,d=null;if(e.forEach(f=>{let p=f.get("offset"),g=p==l,y=g&&d||new Map;f.forEach((D,b)=>{let C=b,w=D;if(b!=="offset")switch(C=n.normalizePropertyName(C,o),w){case yf:w=t.get(b);break;case Ur:w=i.get(b);break;default:w=n.normalizeStyleValue(b,C,w,o);break}y.set(C,w)}),g||s.push(y),d=y,l=p}),o.length)throw x8(o);return s}function Jy(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Oy(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Oy(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Oy(t,"destroy",n)));break}}function Oy(n,e,t){let i=t.totalTime,o=!!t.disabled,s=ev(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,o),l=n._data;return l!=null&&(s._data=l),s}function ev(n,e,t,i,o="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:o,totalTime:s,disabled:!!l}}function Bi(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function dE(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var B8=typeof document>"u"?null:document.documentElement;function tv(n){let e=n.parentNode||n.host||null;return e===B8?null:e}function U8(n){return n.substring(1,6)=="ebkit"}var sa=null,uE=!1;function q8(n){sa||(sa=G8()||{},uE=sa.style?"WebkitAppearance"in sa.style:!1);let e=!0;return sa.style&&!U8(n)&&(e=n in sa.style,!e&&uE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in sa.style)),e}function G8(){return typeof document<"u"?document.body:null}function wE(n,e){for(;e;){if(e===n)return!0;e=tv(e)}return!1}function IE(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var nv=(()=>{class n{validateStyleProperty(t){return q8(t)}containsElement(t,i){return wE(t,i)}getParentElement(t){return tv(t)}query(t,i,o){return IE(t,i,o)}computeStyle(t,i,o){return o||""}animate(t,i,o,s,l,d=[],f){return new is(o,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})(),ca=class{static NOOP=new nv},da=class{};var j8=1e3,EE="{{",z8="}}",TE="ng-enter",Vy="ng-leave",vf="ng-trigger",Cf=".ng-trigger",hE="ng-animating",By=".ng-animating";function po(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Uy(parseFloat(e[1]),e[2])}function Uy(n,e){switch(e){case"s":return n*j8;default:return n}}function wf(n,e,t){return n.hasOwnProperty("duration")?n:H8(n,e,t)}function H8(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,s=0,l="";if(typeof n=="string"){let d=n.match(i);if(d===null)return e.push(cE(n)),{duration:0,delay:0,easing:""};o=Uy(parseFloat(d[1]),d[2]);let f=d[3];f!=null&&(s=Uy(parseFloat(f),d[4]));let p=d[5];p&&(l=p)}else o=n;if(!t){let d=!1,f=e.length;o<0&&(e.push(l8()),d=!0),s<0&&(e.push(c8()),d=!0),d&&e.splice(f,0,cE(n))}return{duration:o,delay:s,easing:l}}function Q8(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function qr(n,e,t){e.forEach((i,o)=>{let s=iv(o);t&&!t.has(o)&&t.set(o,n.style[s]),n.style[s]=i})}function la(n,e){e.forEach((t,i)=>{let o=iv(i);n.style[o]=""})}function Xc(n){return Array.isArray(n)?n.length==1?n[0]:sE(n):n}function W8(n,e,t){let i=e.params||{},o=xE(n);o.length&&o.forEach(s=>{i.hasOwnProperty(s)||t.push(d8(s))})}var qy=new RegExp(`${EE}\\s*(.+?)\\s*${z8}`,"g");function xE(n){let e=[];if(typeof n=="string"){let t;for(;t=qy.exec(n);)e.push(t[1]);qy.lastIndex=0}return e}function Kc(n,e,t){let i=`${n}`,o=i.replace(qy,(s,l)=>{let d=e[l];return d==null&&(t.push(u8(l)),d=""),d.toString()});return o==i?n:o}var $8=/-+([a-z0-9])/g;function iv(n){return n.replace($8,(...e)=>e[1].toUpperCase())}function Y8(n,e){return n===0||e===0}function X8(n,e,t){if(t.size&&e.length){let i=e[0],o=[];if(t.forEach((s,l)=>{i.has(l)||o.push(l),i.set(l,s)}),o.length)for(let s=1;s<e.length;s++){let l=e[s];o.forEach(d=>l.set(d,rv(n,d)))}}return e}function Vi(n,e,t){switch(e.type){case st.Trigger:return n.visitTrigger(e,t);case st.State:return n.visitState(e,t);case st.Transition:return n.visitTransition(e,t);case st.Sequence:return n.visitSequence(e,t);case st.Group:return n.visitGroup(e,t);case st.Animate:return n.visitAnimate(e,t);case st.Keyframes:return n.visitKeyframes(e,t);case st.Style:return n.visitStyle(e,t);case st.Reference:return n.visitReference(e,t);case st.AnimateChild:return n.visitAnimateChild(e,t);case st.AnimateRef:return n.visitAnimateRef(e,t);case st.Query:return n.visitQuery(e,t);case st.Stagger:return n.visitStagger(e,t);default:throw h8(e.type)}}function rv(n,e){return window.getComputedStyle(n)[e]}var Z8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),If=class extends da{normalizePropertyName(e,t){return iv(e)}normalizeStyleValue(e,t,i,o){let s="",l=i.toString().trim();if(Z8.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&d[1].length==0&&o.push(f8(e,i))}return l+s}};var Ef="*";function K8(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>J8(i,t,e)):t.push(n),t}function J8(n,e,t){if(n[0]==":"){let f=e6(n,t);if(typeof f=="function"){e.push(f);return}n=f}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(I8(n)),e;let o=i[1],s=i[2],l=i[3];e.push(fE(o,l));let d=o==Ef&&l==Ef;s[0]=="<"&&!d&&e.push(fE(l,o))}function e6(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(E8(n)),"* => *"}}var Sf=new Set(["true","1"]),bf=new Set(["false","0"]);function fE(n,e){let t=Sf.has(n)||bf.has(n),i=Sf.has(e)||bf.has(e);return(o,s)=>{let l=n==Ef||n==o,d=e==Ef||e==s;return!l&&t&&typeof o=="boolean"&&(l=o?Sf.has(n):bf.has(n)),!d&&i&&typeof s=="boolean"&&(d=s?Sf.has(e):bf.has(e)),l&&d}}var AE=":self",t6=new RegExp(`s*${AE}s*,?`,"g");function ME(n,e,t,i){return new Gy(n).build(e,t,i)}var mE="",Gy=class{_driver;constructor(e){this._driver=e}build(e,t,i){let o=new jy(t);return this._resetContextStyleTimingState(o),Vi(this,Xc(e),o)}_resetContextStyleTimingState(e){e.currentQuerySelector=mE,e.collectedStyles=new Map,e.collectedStyles.set(mE,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,o=t.depCount=0,s=[],l=[];return e.name.charAt(0)=="@"&&t.errors.push(m8()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),d.type==st.State){let f=d,p=f.name;p.toString().split(/\s*,\s*/).forEach(g=>{f.name=g,s.push(this.visitState(f,t))}),f.name=p}else if(d.type==st.Transition){let f=this.visitTransition(d,t);i+=f.queryCount,o+=f.depCount,l.push(f)}else t.errors.push(p8())}),{type:st.Trigger,name:e.name,states:s,transitions:l,queryCount:i,depCount:o,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,l=o||{};i.styles.forEach(d=>{d instanceof Map&&d.forEach(f=>{xE(f).forEach(p=>{l.hasOwnProperty(p)||s.add(p)})})}),s.size&&t.errors.push(g8(e.name,[...s.values()]))}return{type:st.State,name:e.name,style:i,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Vi(this,Xc(e.animation),t),o=K8(e.expr,t.errors);return{type:st.Transition,matchers:o,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:aa(e.options)}}visitSequence(e,t){return{type:st.Sequence,steps:e.steps.map(i=>Vi(this,i,t)),options:aa(e.options)}}visitGroup(e,t){let i=t.currentTime,o=0,s=e.steps.map(l=>{t.currentTime=i;let d=Vi(this,l,t);return o=Math.max(o,t.currentTime),d});return t.currentTime=o,{type:st.Group,steps:s,options:aa(e.options)}}visitAnimate(e,t){let i=o6(e.timings,t.errors);t.currentAnimateTimings=i;let o,s=e.styles?e.styles:ll({});if(s.type==st.Keyframes)o=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;let p={};i.easing&&(p.easing=i.easing),l=ll(p)}t.currentTime+=i.duration+i.delay;let f=this.visitStyle(l,t);f.isEmptyStep=d,o=f}return t.currentAnimateTimings=null,{type:st.Animate,timings:i,style:o,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of o)typeof d=="string"?d===Ur?i.push(d):t.errors.push(y8(d)):i.push(new Map(Object.entries(d)));let s=!1,l=null;return i.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!s)){for(let f of d.values())if(f.toString().indexOf(EE)>=0){s=!0;break}}}),{type:st.Style,styles:i,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,o=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(l=>{typeof l!="string"&&l.forEach((d,f)=>{let p=t.collectedStyles.get(t.currentQuerySelector),g=p.get(f),y=!0;g&&(s!=o&&s>=g.startTime&&o<=g.endTime&&(t.errors.push(v8(f,g.startTime,g.endTime,s,o)),y=!1),s=g.startTime),y&&p.set(f,{startTime:s,endTime:o}),t.options&&W8(d,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:st.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(S8()),i;let o=1,s=0,l=[],d=!1,f=!1,p=0,g=e.steps.map(M=>{let F=this._makeStyleAst(M,t),k=F.offset!=null?F.offset:r6(F.styles),N=0;return k!=null&&(s++,N=F.offset=k),f=f||N<0||N>1,d=d||N<p,p=N,l.push(N),F});f&&t.errors.push(b8()),d&&t.errors.push(_8());let y=e.steps.length,D=0;s>0&&s<y?t.errors.push(D8()):s==0&&(D=o/(y-1));let b=y-1,C=t.currentTime,w=t.currentAnimateTimings,x=w.duration;return g.forEach((M,F)=>{let k=D>0?F==b?1:D*F:l[F],N=k*x;t.currentTime=C+w.delay+N,w.duration=N,this._validateStyleAst(M,t),M.offset=k,i.styles.push(M)}),i}visitReference(e,t){return{type:st.Reference,animation:Vi(this,Xc(e.animation),t),options:aa(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:st.AnimateChild,options:aa(e.options)}}visitAnimateRef(e,t){return{type:st.AnimateRef,animation:this.visitReference(e.animation,t),options:aa(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;let[s,l]=n6(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Bi(t.collectedStyles,t.currentQuerySelector,new Map);let d=Vi(this,Xc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:st.Query,selector:s,limit:o.limit||0,optional:!!o.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:aa(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(C8());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:wf(e.timings,t.errors,!0);return{type:st.Stagger,animation:Vi(this,Xc(e.animation),t),timings:i,options:null}}};function n6(n){let e=!!n.split(/\s*,\s*/).find(t=>t==AE);return e&&(n=n.replace(t6,"")),n=n.replace(/@\*/g,Cf).replace(/@\w+/g,t=>Cf+"-"+t.slice(1)).replace(/:animating/g,By),[n,e]}function i6(n){return n?we({},n):null}var jy=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function r6(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function o6(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=wf(n,e).duration;return Py(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Py(0,0,"");return s.dynamic=!0,s.strValue=t,s}let o=wf(t,e);return Py(o.duration,o.delay,o.easing)}function aa(n){return n?(n=we({},n),n.params&&(n.params=i6(n.params))):n={},n}function Py(n,e,t){return{duration:n,delay:e,easing:t}}function ov(n,e,t,i,o,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:o,delay:s,totalTime:o+s,easing:l,subTimeline:d}}var Jc=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},s6=1,a6=":enter",l6=new RegExp(a6,"g"),c6=":leave",d6=new RegExp(c6,"g");function RE(n,e,t,i,o,s=new Map,l=new Map,d,f,p=[]){return new zy().buildKeyframes(n,e,t,i,o,s,l,d,f,p)}var zy=class{buildKeyframes(e,t,i,o,s,l,d,f,p,g=[]){p=p||new Jc;let y=new Hy(e,t,p,o,s,g,[]);y.options=f;let D=f.delay?po(f.delay):0;y.currentTimeline.delayNextStep(D),y.currentTimeline.setStyles([l],null,y.errors,f),Vi(this,i,y);let b=y.timelines.filter(C=>C.containsAnimation());if(b.length&&d.size){let C;for(let w=b.length-1;w>=0;w--){let x=b[w];if(x.element===t){C=x;break}}C&&!C.allowOnlyTimelineStyles()&&C.setStyles([d],null,y.errors,f)}return b.length?b.map(C=>C.buildKeyframes()):[ov(t,[],[],[],0,D,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let o=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(i,o,o.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let o of e){let s=o?.delay;if(s){let l=typeof s=="number"?s:po(Kc(s,o?.params??{},t.errors));i.delayNextStep(l)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,l=i.duration!=null?po(i.duration):null,d=i.delay!=null?po(i.delay):null;return l!==0&&e.forEach(f=>{let p=t.appendInstructionToTimeline(f,l,d);s=Math.max(s,p.duration+p.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Vi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,o=t,s=e.options;if(s&&(s.params||s.delay)&&(o=t.createSubContext(s),o.transformIntoNewTimeline(),s.delay!=null)){o.previousNode.type==st.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Tf);let l=po(s.delay);o.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Vi(this,l,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],o=t.currentTimeline.currentTime,s=e.options&&e.options.delay?po(e.options.delay):0;e.steps.forEach(l=>{let d=t.createSubContext(e.options);s&&d.delayNextStep(s),Vi(this,l,d),o=Math.max(o,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,o=t.params?Kc(i,t.params,t.errors):i;return wf(o,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),o.snapshotCurrentStyles());let s=e.style;s.type==st.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,o=t.currentAnimateTimings;!o&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=o&&o.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,o=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(f=>{let p=f.offset||0;d.forwardTime(p*s),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(o+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,o=e.options||{},s=o.delay?po(o.delay):0;s&&(t.previousNode.type===st.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Tf);let l=i,d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((p,g)=>{t.currentQueryIndex=g;let y=t.createSubContext(e.options,p);s&&y.delayNextStep(s),p===t.element&&(f=y.currentTimeline),Vi(this,e.animation,y),y.currentTimeline.applyStylesToKeyframe();let D=y.currentTimeline.currentTime;l=Math.max(l,D)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,o=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1),f=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime;break}let g=t.currentTimeline;f&&g.delayNextStep(f);let y=g.currentTime;Vi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=o.currentTime-y+(o.startTime-i.currentTimeline.startTime)}},Tf={},Hy=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Tf;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,o,s,l,d,f){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=s,this.errors=l,this.timelines=d,this.currentTimeline=f||new xf(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,o=this.options;i.duration!=null&&(o.duration=po(i.duration)),i.delay!=null&&(o.delay=po(i.delay));let s=i.params;if(s){let l=o.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=Kc(s[d],l,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(o=>{i[o]=t[o]})}}return e}createSubContext(e=null,t,i){let o=t||this.element,s=new n(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Tf,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let o={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new Qy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(s),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,o,s,l){let d=[];if(o&&d.push(this.element),e.length>0){e=e.replace(l6,"."+this._enterClassName),e=e.replace(d6,"."+this._leaveClassName);let f=i!=1,p=this._driver.query(this.element,e,f);i!==0&&(p=i<0?p.slice(p.length+i,p.length):p.slice(0,i)),d.push(...p)}return!s&&d.length==0&&l.push(w8(t)),d}},xf=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,o){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=o,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=s6,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ur),this._currentKeyframe.set(t,Ur);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,o){t&&this._previousKeyframe.set("easing",t);let s=o&&o.params||{},l=u6(e,this._globalTimelineStyles);for(let[d,f]of l){let p=Kc(f,s,i);this._pendingStyles.set(d,p),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Ur),this._updateStyle(d,p)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let o=this._styleSummary.get(i);(!o||t.time>o.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((d,f)=>{let p=new Map([...this._backFill,...d]);p.forEach((g,y)=>{g===yf?e.add(y):g===Ur&&t.add(y)}),i||p.set("offset",f/this.duration),o.push(p)});let s=[...e.values()],l=[...t.values()];if(i){let d=o[0],f=new Map(d);d.set("offset",0),f.set("offset",1),o=[d,f]}return ov(this.element,o,s,l,this.duration,this.startTime,this.easing,!1)}},Qy=class extends xf{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,o,s,l,d=!1){super(e,t,l.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],l=i+t,d=t/l,f=new Map(e[0]);f.set("offset",0),s.push(f);let p=new Map(e[0]);p.set("offset",pE(d)),s.push(p);let g=e.length-1;for(let y=1;y<=g;y++){let D=new Map(e[y]),b=D.get("offset"),C=t+b*i;D.set("offset",pE(C/l)),s.push(D)}i=l,t=0,o="",e=s}return ov(this.element,e,this.preStyleProps,this.postStyleProps,i,t,o,!0)}};function pE(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function u6(n,e){let t=new Map,i;return n.forEach(o=>{if(o==="*"){i??=e.keys();for(let s of i)t.set(s,Ur)}else for(let[s,l]of o)t.set(s,l)}),t}function gE(n,e,t,i,o,s,l,d,f,p,g,y,D){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:s,toState:i,toStyles:l,timelines:d,queriedElements:f,preStyleProps:p,postStyleProps:g,totalTime:y,errors:D}}var Fy={},Af=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,o){return h6(this.ast.matchers,e,t,i,o)}buildStyles(e,t,i){let o=this._stateStyles.get("*");return e!==void 0&&(o=this._stateStyles.get(e?.toString())||o),o?o.buildStyles(t,i):new Map}build(e,t,i,o,s,l,d,f,p,g){let y=[],D=this.ast.options&&this.ast.options.params||Fy,b=d&&d.params||Fy,C=this.buildStyles(i,b,y),w=f&&f.params||Fy,x=this.buildStyles(o,w,y),M=new Set,F=new Map,k=new Map,N=o==="void",q={params:OE(w,D),delay:this.ast.options?.delay},Q=g?[]:RE(e,t,this.ast.animation,s,l,C,x,q,p,y),z=0;return Q.forEach(Y=>{z=Math.max(Y.duration+Y.delay,z)}),y.length?gE(t,this._triggerName,i,o,N,C,x,[],[],F,k,z,y):(Q.forEach(Y=>{let ne=Y.element,O=Bi(F,ne,new Set);Y.preStyleProps.forEach(T=>O.add(T));let j=Bi(k,ne,new Set);Y.postStyleProps.forEach(T=>j.add(T)),ne!==t&&M.add(ne)}),gE(t,this._triggerName,i,o,N,C,x,Q,[...M.values()],F,k,z))}};function h6(n,e,t,i,o){return n.some(s=>s(e,t,i,o))}function OE(n,e){let t=we({},e);return Object.entries(n).forEach(([i,o])=>{o!=null&&(t[i]=o)}),t}var Wy=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,o=OE(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((l,d)=>{l&&(l=Kc(l,o,t));let f=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,f,l,t),i.set(d,l)})}),i}};function f6(n,e,t){return new $y(n,e,t)}var $y=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(o=>{let s=o.options&&o.options.params||{};this.states.set(o.name,new Wy(o.style,s,i))}),yE(this.states,"true","1"),yE(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new Af(e,o,this.states))}),this.fallbackTransition=m6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,o){return this.transitionFactories.find(l=>l.match(e,t,i,o))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function m6(n,e,t){let i=[(l,d)=>!0],o={type:st.Sequence,steps:[],options:null},s={type:st.Transition,animation:o,matchers:i,options:null,queryCount:0,depCount:0};return new Af(n,s,e)}function yE(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var p6=new Jc,Yy=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],o=[],s=ME(this._driver,t,i,o);if(i.length)throw A8(i);o.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,i){let o=e.element,s=CE(this._normalizer,e.keyframes,t,i);return this._driver.animate(o,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let o=[],s=this._animations.get(e),l,d=new Map;if(s?(l=RE(this._driver,t,s,TE,Vy,new Map,new Map,i,p6,o),l.forEach(g=>{let y=Bi(d,g.element,new Map);g.postStyleProps.forEach(D=>y.set(D,null))})):(o.push(M8()),l=[]),o.length)throw R8(o);d.forEach((g,y)=>{g.forEach((D,b)=>{g.set(b,this._driver.computeStyle(y,b,Ur))})});let f=l.map(g=>{let y=d.get(g.element);return this._buildPlayer(g,new Map,y)}),p=rs(f);return this._playersById.set(e,p),p.onDestroy(()=>this.destroy(e)),this.players.push(p),p}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw O8(e);return t}listen(e,t,i,o){let s=ev(t,"","","");return Jy(this._getPlayer(e),i,s,o),()=>{}}command(e,t,i,o){if(i=="register"){this.register(e,o[0]);return}if(i=="create"){let l=o[0]||{};this.create(e,t,l);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e);break}}},vE="ng-animate-queued",g6=".ng-animate-queued",ky="ng-animate-disabled",y6=".ng-animate-disabled",v6="ng-star-inserted",S6=".ng-star-inserted",b6=[],PE={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},hr="__ng_removed",ed=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),o=i?e.value:e;if(this.value=C6(o),i){let s=e,{value:l}=s,d=ic(s,["value"]);this.options=d}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(o=>{i[o]==null&&(i[o]=t[o])})}}},Zc="void",Ly=new ed(Zc),Xy=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Zi(t,this._hostClassName)}listen(e,t,i,o){if(!this._triggers.has(t))throw P8(i,t);if(i==null||i.length==0)throw F8(t);if(!w6(i))throw k8(i,t);let s=Bi(this._elementListeners,e,[]),l={name:t,phase:i,callback:o};s.push(l);let d=Bi(this._engine.statesByElement,e,new Map);return d.has(t)||(Zi(e,vf),Zi(e,vf+"-"+t),d.set(t,Ly)),()=>{this._engine.afterFlush(()=>{let f=s.indexOf(l);f>=0&&s.splice(f,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw L8(e);return t}trigger(e,t,i,o=!0){let s=this._getTrigger(t),l=new td(this.id,t,e),d=this._engine.statesByElement.get(e);d||(Zi(e,vf),Zi(e,vf+"-"+t),this._engine.statesByElement.set(e,d=new Map));let f=d.get(t),p=new ed(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&p.absorbOptions(f.options),d.set(t,p),f||(f=Ly),!(p.value===Zc)&&f.value===p.value){if(!T6(f.params,p.params)){let w=[],x=s.matchStyles(f.value,f.params,w),M=s.matchStyles(p.value,p.params,w);w.length?this._engine.reportError(w):this._engine.afterFlush(()=>{la(e,x),qr(e,M)})}return}let D=Bi(this._engine.playersByElement,e,[]);D.forEach(w=>{w.namespaceId==this.id&&w.triggerName==t&&w.queued&&w.destroy()});let b=s.matchTransition(f.value,p.value,e,p.params),C=!1;if(!b){if(!o)return;b=s.fallbackTransition,C=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:b,fromState:f,toState:p,player:l,isFallbackTransition:C}),C||(Zi(e,vE),l.onStart(()=>{cl(e,vE)})),l.onDone(()=>{let w=this.players.indexOf(l);w>=0&&this.players.splice(w,1);let x=this._engine.playersByElement.get(e);if(x){let M=x.indexOf(l);M>=0&&x.splice(M,1)}}),this.players.push(l),D.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,Cf,!0);i.forEach(o=>{if(o[hr])return;let s=this._engine.fetchNamespacesByElement(o);s.size?s.forEach(l=>l.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,i,o){let s=this._engine.statesByElement.get(e),l=new Map;if(s){let d=[];if(s.forEach((f,p)=>{if(l.set(p,f.value),this._triggers.has(p)){let g=this.trigger(e,p,Zc,o);g&&d.push(g)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),i&&rs(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let o=new Set;t.forEach(s=>{let l=s.name;if(o.has(l))return;o.add(l);let f=this._triggers.get(l).fallbackTransition,p=i.get(l)||Ly,g=new ed(Zc),y=new td(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:f,fromState:p,toState:g,player:y,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)o=!0;else{let l=e;for(;l=l.parentNode;)if(i.statesByElement.get(l)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[hr];(!s||s===PE)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Zi(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let o=i.player;if(o.destroyed)return;let s=i.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==i.triggerName){let f=ev(s,i.triggerName,i.fromState.value,i.toState.value);f._data=e,Jy(i.player,d.phase,f,d.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(i)}),this._queue=[],t.sort((i,o)=>{let s=i.transition.ast.depCount,l=o.transition.ast.depCount;return s==0||l==0?s-l:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Zy=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new Xy(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,o=this.namespacesByHostElement;if(i.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){let f=o.get(d);if(f){let p=i.indexOf(f);i.splice(p+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||i.unshift(e)}else i.push(e);return o.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let o=this._namespaceLookup[e];o&&o.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let o of i.values())if(o.namespaceId){let s=this._fetchNamespace(o.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,o){if(_f(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,o),!0}return!1}insertNode(e,t,i,o){if(!_f(t))return;let s=t[hr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){let l=this._fetchNamespace(e);l&&l.insertNode(t,i)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Zi(e,ky)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),cl(e,ky))}removeNode(e,t,i){if(_f(t)){let o=e?this._fetchNamespace(e):null;o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,o,s){this.collectedLeaveElements.push(t),t[hr]={namespaceId:e,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,o,s){return _f(t)?this._fetchNamespace(e).listen(t,i,o,s):()=>{}}_buildInstruction(e,t,i,o,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,o,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Cf,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,By,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return rs(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[hr];if(t&&t.setForRemoval){if(e[hr]=PE,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ky)&&this.markElementAsDisabled(e,!1),this.driver.query(e,y6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let o=this.collectedEnterElements[i];Zi(o,v6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let o=this.collectedLeaveElements[i];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?rs(t).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(e){throw N8(e)}_flushAnimations(e,t){let i=new Jc,o=[],s=new Map,l=[],d=new Map,f=new Map,p=new Map,g=new Set;this.disabledNodes.forEach(V=>{g.add(V);let $=this.driver.query(V,g6,!0);for(let ce=0;ce<$.length;ce++)g.add($[ce])});let y=this.bodyNode,D=Array.from(this.statesByElement.keys()),b=_E(D,this.collectedEnterElements),C=new Map,w=0;b.forEach((V,$)=>{let ce=TE+w++;C.set($,ce),V.forEach(X=>Zi(X,ce))});let x=[],M=new Set,F=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){let $=this.collectedLeaveElements[V],ce=$[hr];ce&&ce.setForRemoval&&(x.push($),M.add($),ce.hasAnimation?this.driver.query($,S6,!0).forEach(X=>M.add(X)):F.add($))}let k=new Map,N=_E(D,Array.from(M));N.forEach((V,$)=>{let ce=Vy+w++;k.set($,ce),V.forEach(X=>Zi(X,ce))}),e.push(()=>{b.forEach((V,$)=>{let ce=C.get($);V.forEach(X=>cl(X,ce))}),N.forEach((V,$)=>{let ce=k.get($);V.forEach(X=>cl(X,ce))}),x.forEach(V=>{this.processLeaveNode(V)})});let q=[],Q=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(t).forEach(ce=>{let X=ce.player,W=ce.element;if(q.push(X),this.collectedEnterElements.length){let Ye=W[hr];if(Ye&&Ye.setForMove){if(Ye.previousTriggersValues&&Ye.previousTriggersValues.has(ce.triggerName)){let $t=Ye.previousTriggersValues.get(ce.triggerName),Dt=this.statesByElement.get(ce.element);if(Dt&&Dt.has(ce.triggerName)){let Vn=Dt.get(ce.triggerName);Vn.value=$t,Dt.set(ce.triggerName,Vn)}}X.destroy();return}}let De=!y||!this.driver.containsElement(y,W),ye=k.get(W),he=C.get(W),Ge=this._buildInstruction(ce,i,he,ye,De);if(Ge.errors&&Ge.errors.length){Q.push(Ge);return}if(De){X.onStart(()=>la(W,Ge.fromStyles)),X.onDestroy(()=>qr(W,Ge.toStyles)),o.push(X);return}if(ce.isFallbackTransition){X.onStart(()=>la(W,Ge.fromStyles)),X.onDestroy(()=>qr(W,Ge.toStyles)),o.push(X);return}let cn=[];Ge.timelines.forEach(Ye=>{Ye.stretchStartingKeyframe=!0,this.disabledNodes.has(Ye.element)||cn.push(Ye)}),Ge.timelines=cn,i.append(W,Ge.timelines);let yt={instruction:Ge,player:X,element:W};l.push(yt),Ge.queriedElements.forEach(Ye=>Bi(d,Ye,[]).push(X)),Ge.preStyleProps.forEach((Ye,$t)=>{if(Ye.size){let Dt=f.get($t);Dt||f.set($t,Dt=new Set),Ye.forEach((Vn,Wn)=>Dt.add(Wn))}}),Ge.postStyleProps.forEach((Ye,$t)=>{let Dt=p.get($t);Dt||p.set($t,Dt=new Set),Ye.forEach((Vn,Wn)=>Dt.add(Wn))})});if(Q.length){let V=[];Q.forEach($=>{V.push(V8($.triggerName,$.errors))}),q.forEach($=>$.destroy()),this.reportError(V)}let z=new Map,Y=new Map;l.forEach(V=>{let $=V.element;i.has($)&&(Y.set($,$),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,z))}),o.forEach(V=>{let $=V.element;this._getPreviousPlayers($,!1,V.namespaceId,V.triggerName,null).forEach(X=>{Bi(z,$,[]).push(X),X.destroy()})});let ne=x.filter(V=>DE(V,f,p)),O=new Map;bE(O,this.driver,F,p,Ur).forEach(V=>{DE(V,f,p)&&ne.push(V)});let T=new Map;b.forEach((V,$)=>{bE(T,this.driver,new Set(V),f,yf)}),ne.forEach(V=>{let $=O.get(V),ce=T.get(V);O.set(V,new Map([...$?.entries()??[],...ce?.entries()??[]]))});let K=[],pe=[],oe={};l.forEach(V=>{let{element:$,player:ce,instruction:X}=V;if(i.has($)){if(g.has($)){ce.onDestroy(()=>qr($,X.toStyles)),ce.disabled=!0,ce.overrideTotalTime(X.totalTime),o.push(ce);return}let W=oe;if(Y.size>1){let ye=$,he=[];for(;ye=ye.parentNode;){let Ge=Y.get(ye);if(Ge){W=Ge;break}he.push(ye)}he.forEach(Ge=>Y.set(Ge,W))}let De=this._buildAnimation(ce.namespaceId,X,z,s,T,O);if(ce.setRealPlayer(De),W===oe)K.push(ce);else{let ye=this.playersByElement.get(W);ye&&ye.length&&(ce.parentPlayer=rs(ye)),o.push(ce)}}else la($,X.fromStyles),ce.onDestroy(()=>qr($,X.toStyles)),pe.push(ce),g.has($)&&o.push(ce)}),pe.forEach(V=>{let $=s.get(V.element);if($&&$.length){let ce=rs($);V.setRealPlayer(ce)}}),o.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<x.length;V++){let $=x[V],ce=$[hr];if(cl($,Vy),ce&&ce.hasAnimation)continue;let X=[];if(d.size){let De=d.get($);De&&De.length&&X.push(...De);let ye=this.driver.query($,By,!0);for(let he=0;he<ye.length;he++){let Ge=d.get(ye[he]);Ge&&Ge.length&&X.push(...Ge)}}let W=X.filter(De=>!De.destroyed);W.length?I6(this,$,W):this.processLeaveNode($)}return x.length=0,K.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();let $=this.players.indexOf(V);this.players.splice($,1)}),V.play()}),K}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,o,s){let l=[];if(t){let d=this.playersByQueriedElement.get(e);d&&(l=d)}else{let d=this.playersByElement.get(e);if(d){let f=!s||s==Zc;d.forEach(p=>{p.queued||!f&&p.triggerName!=o||l.push(p)})}}return(i||o)&&(l=l.filter(d=>!(i&&i!=d.namespaceId||o&&o!=d.triggerName))),l}_beforeAnimationBuild(e,t,i){let o=t.triggerName,s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:o;for(let f of t.timelines){let p=f.element,g=p!==s,y=Bi(i,p,[]);this._getPreviousPlayers(p,g,l,d,t.toState).forEach(b=>{let C=b.getRealPlayer();C.beforeDestroy&&C.beforeDestroy(),b.destroy(),y.push(b)})}la(s,t.fromStyles)}_buildAnimation(e,t,i,o,s,l){let d=t.triggerName,f=t.element,p=[],g=new Set,y=new Set,D=t.timelines.map(C=>{let w=C.element;g.add(w);let x=w[hr];if(x&&x.removedBeforeQueried)return new is(C.duration,C.delay);let M=w!==f,F=E6((i.get(w)||b6).map(z=>z.getRealPlayer())).filter(z=>{let Y=z;return Y.element?Y.element===w:!1}),k=s.get(w),N=l.get(w),q=CE(this._normalizer,C.keyframes,k,N),Q=this._buildPlayer(C,q,F);if(C.subTimeline&&o&&y.add(w),M){let z=new td(e,d,w);z.setRealPlayer(Q),p.push(z)}return Q});p.forEach(C=>{Bi(this.playersByQueriedElement,C.element,[]).push(C),C.onDone(()=>D6(this.playersByQueriedElement,C.element,C))}),g.forEach(C=>Zi(C,hE));let b=rs(D);return b.onDestroy(()=>{g.forEach(C=>cl(C,hE)),qr(f,t.toStyles)}),y.forEach(C=>{Bi(o,C,[]).push(b)}),b}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new is(e.duration,e.delay)}},td=class{namespaceId;triggerName;element;_player=new is;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(o=>Jy(e,i,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function D6(n,e,t){let i=n.get(e);if(i){if(i.length){let o=i.indexOf(t);i.splice(o,1)}i.length==0&&n.delete(e)}return i}function C6(n){return n??null}function _f(n){return n&&n.nodeType===1}function w6(n){return n=="start"||n=="done"}function SE(n,e){let t=n.style.display;return n.style.display=e??"none",t}function bE(n,e,t,i,o){let s=[];t.forEach(f=>s.push(SE(f)));let l=[];i.forEach((f,p)=>{let g=new Map;f.forEach(y=>{let D=e.computeStyle(p,y,o);g.set(y,D),(!D||D.length==0)&&(p[hr]=_6,l.push(p))}),n.set(p,g)});let d=0;return t.forEach(f=>SE(f,s[d++])),l}function _E(n,e){let t=new Map;if(n.forEach(d=>t.set(d,[])),e.length==0)return t;let i=1,o=new Set(e),s=new Map;function l(d){if(!d)return i;let f=s.get(d);if(f)return f;let p=d.parentNode;return t.has(p)?f=p:o.has(p)?f=i:f=l(p),s.set(d,f),f}return e.forEach(d=>{let f=l(d);f!==i&&t.get(f).push(d)}),t}function Zi(n,e){n.classList?.add(e)}function cl(n,e){n.classList?.remove(e)}function I6(n,e,t){rs(t).onDone(()=>n.processLeaveNode(e))}function E6(n){let e=[];return FE(n,e),e}function FE(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Yc?FE(i.players,e):e.push(i)}}function T6(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let o=0;o<t.length;o++){let s=t[o];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function DE(n,e,t){let i=t.get(n);if(!i)return!1;let o=e.get(n);return o?i.forEach(s=>o.add(s)):e.set(n,i),t.delete(n),!0}var dl=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new Zy(e.body,t,i),this._timelineEngine=new Yy(e.body,t,i),this._transitionEngine.onRemovalComplete=(o,s)=>this.onRemovalComplete(o,s)}registerTrigger(e,t,i,o,s){let l=e+"-"+o,d=this._triggerCache[l];if(!d){let f=[],p=[],g=ME(this._driver,s,f,p);if(f.length)throw T8(o,f);p.length&&void 0,d=f6(o,g,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,o,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,o){this._transitionEngine.insertNode(e,t,i,o)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,o){if(i.charAt(0)=="@"){let[s,l]=dE(i),d=o;this._timelineEngine.command(s,t,l,d)}else this._transitionEngine.trigger(e,t,i,o)}listen(e,t,i,o,s){if(i.charAt(0)=="@"){let[l,d]=dE(i);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,i,o,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function x6(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Ny(e[0]),e.length>1&&(i=Ny(e[e.length-1]))):e instanceof Map&&(t=Ny(e)),t||i?new A6(n,t,i):null}var A6=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,o){this._element=t,this._startStyles=i,this._endStyles=o;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&qr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qr(this._element,this._initialStyles),this._endStyles&&(qr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(la(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(la(this._element,this._endStyles),this._endStyles=null),qr(this._element,this._initialStyles),this._state=3)}}return n})();function Ny(n){let e=null;return n.forEach((t,i)=>{M6(i)&&(e=e||new Map,e.set(i,t))}),e}function M6(n){return n==="display"||n==="position"}var Mf=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,o){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=o,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,o)=>{o!=="offset"&&e.set(o,this._finished?i:rv(this.element,o))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Rf=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return wE(e,t)}getParentElement(e){return tv(e)}query(e,t,i){return IE(e,t,i)}computeStyle(e,t,i){return rv(e,t)}animate(e,t,i,o,s,l=[]){let d=o==0?"both":"forwards",f={duration:i,delay:o,fill:d};s&&(f.easing=s);let p=new Map,g=l.filter(b=>b instanceof Mf);Y8(i,o)&&g.forEach(b=>{b.currentSnapshot.forEach((C,w)=>p.set(w,C))});let y=Q8(t).map(b=>new Map(b));y=X8(e,y,p);let D=x6(e,y);return new Mf(e,y,f,D)}};var Df="@",kE="@.disabled",Of=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,o){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=o}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,o=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,o){this.delegate.setAttribute(e,t,i,o)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,o){this.delegate.setStyle(e,t,i,o)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==Df&&t==kE?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Ky=class extends Of{factory;constructor(e,t,i,o,s){super(t,i,o,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==Df?t.charAt(1)=="."&&t==kE?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==Df){let o=R6(e),s=t.slice(1),l="";return s.charAt(0)!=Df&&([s,l]=O6(s)),this.engine.listen(this.namespaceId,o,s,l,d=>{let f=d._data||-1;this.factory.scheduleListenerCallback(f,i,d)})}return this.delegate.listen(e,t,i)}};function R6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function O6(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Pf=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(o,s)=>{s?.removeChild(null,o)}}createRenderer(e,t){let i="",o=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let p=this._rendererCache,g=p.get(o);if(!g){let y=()=>p.delete(o);g=new Of(i,o,this.engine,y),p.set(o,g)}return g}let s=t.id,l=t.id+"-"+this._currentId;this._currentId++,this.engine.register(l,e);let d=p=>{Array.isArray(p)?p.forEach(d):this.engine.registerTrigger(s,l,e,p.name,p)};return t.data.animation.forEach(d),new Ky(this,l,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(s=>{let[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),o.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var F6=(()=>{class n extends dl{constructor(t,i,o){super(t,i,o)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(Je(bt),Je(ca),Je(da))};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();function k6(){return new If}function L6(n,e,t){return new Pf(n,e,t)}var LE=[{provide:da,useFactory:k6},{provide:dl,useClass:F6},{provide:Ko,useFactory:L6,deps:[pf,dl,Ue]}],N6=[{provide:ca,useFactory:()=>new Rf},{provide:Zn,useValue:"BrowserAnimations"},...LE],vZ=[{provide:ca,useClass:nv},{provide:Zn,useValue:"NoopAnimations"},...LE];function NE(){return Li("NgEagerAnimations"),[...N6]}var VE={providers:[_I({eventCoalescing:!0}),NE(),iE("ngsw-worker.js",{enabled:!CI(),registrationStrategy:"registerWhenStable:30000"})]};var Nn=$R(uA(),1);function Tl(n){return n!=null&&`${n}`!="false"}function wd(n,e=0){return hS(n)?Number(n):arguments.length===2?e:0}function hS(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function xl(n){return Array.isArray(n)?n:[n]}function Ln(n){return n==null?"":typeof n=="string"?n:`${n}px`}function tr(n){return n instanceof Xe?n.nativeElement:n}var mS;try{mS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mS=!1}var Wt=(()=>{class n{_platformId=L(ur);isBrowser=this._platformId?Gc(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||mS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Al,hA=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function pS(){if(Al)return Al;if(typeof document!="object"||!document)return Al=new Set(hA),Al;let n=document.createElement("input");return Al=new Set(hA.filter(e=>(n.setAttribute("type",e),n.type===e))),Al}var Id;function PB(){if(Id==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Id=!0}))}finally{Id=Id||!1}return Id}function ms(n){return PB()?n:!!n.capture}var vr=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(vr||{}),Km,ga;function Jm(){if(ga==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return ga=!1,ga;if("scrollBehavior"in document.documentElement.style)ga=!0;else{let n=Element.prototype.scrollTo;n?ga=!/\{\s*\[native code\]\s*\}/.test(n.toString()):ga=!1}}return ga}function Ml(){if(typeof document!="object"||!document)return vr.NORMAL;if(Km==null){let n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),Km=vr.NORMAL,n.scrollLeft===0&&(n.scrollLeft=1,Km=n.scrollLeft===0?vr.NEGATED:vr.INVERTED),n.remove()}return Km}var fS;function FB(){if(fS==null){let n=typeof document<"u"?document.head:null;fS=!!(n&&(n.createShadowRoot||n.attachShadow))}return fS}function fA(n){if(FB()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ed(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Sr(n){return n.composedPath?n.composedPath()[0]:n.target}function gS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var kB=new _e("cdk-dir-doc",{providedIn:"root",factory:LB});function LB(){return L(bt)}var NB=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function VB(n){let e=n?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?NB.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Si=(()=>{class n{value="ltr";change=new wt;constructor(){let t=L(kB,{optional:!0});if(t){let i=t.body?t.body.dir:null,o=t.documentElement?t.documentElement.dir:null;this.value=VB(i||o||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ps=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})();var ep=class{};function np(n){return n&&typeof n.connect=="function"&&!(n instanceof Rs)}var Rl=function(n){return n[n.REPLACED=0]="REPLACED",n[n.INSERTED=1]="INSERTED",n[n.MOVED=2]="MOVED",n[n.REMOVED=3]="REMOVED",n}(Rl||{}),Td=new _e("_ViewRepeater"),Ol=class{applyChanges(e,t,i,o,s){e.forEachOperation((l,d,f)=>{let p,g;if(l.previousIndex==null){let y=i(l,d,f);p=t.createEmbeddedView(y.templateRef,y.context,y.index),g=Rl.INSERTED}else f==null?(t.remove(d),g=Rl.REMOVED):(p=t.get(d),t.move(p,f),g=Rl.MOVED);s&&s({context:p?.context,operation:g,record:l})})}detach(){}};var tp=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new Oe;constructor(e=!1,t,i=!0,o){this._multiple=e,this._emitChanges=i,this.compareWith=o,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);let t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(this._getConcreteValue(s,i))).forEach(s=>this._unmarkSelected(s));let o=this._hasQueuedChanges();return this._emitChangeEvent(),o}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,t){if(this.compareWith){t=t??this._selection;for(let i of t)if(this.compareWith(e,i))return i;return e}else return e}};var BB=20,yS=(()=>{class n{_ngZone=L(Ue);_platform=L(Wt);_document=L(bt,{optional:!0});constructor(){}_scrolled=new Oe;_globalSubscription=null;_scrolledCount=0;scrollContainers=new Map;register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){let i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=BB){return this._platform.isBrowser?new Ke(i=>{this._globalSubscription||this._addGlobalListener();let o=t>0?this._scrolled.pipe(ju(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){let o=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(yn(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(t){let i=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let o=tr(i),s=t.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let t=this._getWindow();return Tr(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pA=(()=>{class n{elementRef=L(Xe);scrollDispatcher=L(yS);ngZone=L(Ue);dir=L(Si,{optional:!0});_destroyed=new Oe;_elementScrolled=new Ke(t=>this.ngZone.runOutsideAngular(()=>Tr(this.elementRef.nativeElement,"scroll").pipe(Xn(this._destroyed)).subscribe(t)));constructor(){}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){let i=this.elementRef.nativeElement,o=this.dir&&this.dir.value=="rtl";t.left==null&&(t.left=o?t.end:t.start),t.right==null&&(t.right=o?t.start:t.end),t.bottom!=null&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),o&&Ml()!=vr.NORMAL?(t.left!=null&&(t.right=i.scrollWidth-i.clientWidth-t.left),Ml()==vr.INVERTED?t.left=t.right:Ml()==vr.NEGATED&&(t.left=t.right?-t.right:t.right)):t.right!=null&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){let i=this.elementRef.nativeElement;Jm()?i.scrollTo(t):(t.top!=null&&(i.scrollTop=t.top),t.left!=null&&(i.scrollLeft=t.left))}measureScrollOffset(t){let i="left",o="right",s=this.elementRef.nativeElement;if(t=="top")return s.scrollTop;if(t=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let l=this.dir&&this.dir.value=="rtl";return t=="start"?t=l?o:i:t=="end"&&(t=l?i:o),l&&Ml()==vr.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:l&&Ml()==vr.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return n})(),UB=20,xd=(()=>{class n{_platform=L(Wt);_viewportSize;_change=new Oe;_changeListener=t=>{this._change.next(t)};_document=L(bt,{optional:!0});constructor(){L(Ue).runOutsideAngular(()=>{if(this._platform.isBrowser){let i=this._getWindow();i.addEventListener("resize",this._changeListener),i.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){let t=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let t=this._document,i=this._getWindow(),o=t.documentElement,s=o.getBoundingClientRect(),l=-s.top||t.body.scrollTop||i.scrollY||o.scrollTop||0,d=-s.left||t.body.scrollLeft||i.scrollX||o.scrollLeft||0;return{top:l,left:d}}change(t=UB){return t>0?this._change.pipe(ju(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})(),Ad=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[ps,mA,ps,mA]})}return n})();var Md=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Pl=class extends Md{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,i,o,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.projectableNodes=s}},Fl=class extends Md{templateRef;viewContainerRef;context;injector;constructor(e,t,i,o){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=o}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},vS=class extends Md{element;constructor(e){super(),this.element=e instanceof Xe?e.nativeElement:e}},kl=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Pl)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Fl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof vS)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var ip=class extends kl{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,i,o,s){super(),this.outletElement=e,this._appRef=i,this._defaultInjector=o,this._document=s}attachComponentPortal(e){let t;if(e.viewContainerRef){let i=e.injector||e.viewContainerRef.injector,o=i.get(so,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:i,ngModuleRef:o,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else t=df(e.component,{elementInjector:e.injector||this._defaultInjector||Lt.NULL,environmentInjector:this._appRef.injector,projectableNodes:e.projectableNodes||void 0}),this._appRef.attachView(t.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(t.hostView),t.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(o=>this.outletElement.appendChild(o)),i.detectChanges(),this.setDisposeFn(()=>{let o=t.indexOf(i);o!==-1&&t.remove(o)}),this._attachedPortal=e,i}attachDomPortal=e=>{let t=e.element;t.parentNode;let i=this._document.createComment("dom-portal");t.parentNode.insertBefore(i,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(t,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Rd=(()=>{class n extends kl{_moduleRef=L(so,{optional:!0});_document=L(bt);_viewContainerRef=L(ei);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new wt;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let i=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,o=i.createComponent(t.component,{index:i.length,injector:t.injector||i.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=t=>{let i=t.element;i.parentNode;let o=this._document.createComment("dom-portal");t.setAttachedHost(this),i.parentNode.insertBefore(o,i),this._getRootNode().appendChild(i),this._attachedPortal=t,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(i,o)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Gt]})}return n})();var ya=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})();var rp=new WeakMap,Gi=(()=>{class n{_appRef;_injector=L(Lt);_environmentInjector=L(Fi);load(t){let i=this._appRef=this._appRef||this._injector.get(Yi),o=rp.get(i);o||(o={loaders:new Set,refs:[]},rp.set(i,o),i.onDestroy(()=>{rp.get(i)?.refs.forEach(s=>s.destroy()),rp.delete(i)})),o.loaders.has(t)||(o.loaders.add(t),o.refs.push(df(t,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),SS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,o){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return n})();function op(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var GB=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({providers:[GB]})}return n})();var gA=new Set,va,jB=(()=>{class n{_platform=L(Wt);_nonce=L(Fc,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):HB}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&zB(t,this._nonce),this._matchMedia(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zB(n,e){if(!gA.has(n))try{va||(va=document.createElement("style"),e&&va.setAttribute("nonce",e),va.setAttribute("type","text/css"),document.head.appendChild(va)),va.sheet&&(va.sheet.insertRule(`@media ${n} {body{ }}`,0),gA.add(n))}catch(t){console.error(t)}}function HB(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var vA=(()=>{class n{_mediaMatcher=L(jB);_zone=L(Ue);_queries=new Map;_destroySubject=new Oe;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return yA(xl(t)).some(o=>this._registerQuery(o).mql.matches)}observe(t){let o=yA(xl(t)).map(l=>this._registerQuery(l).observable),s=Ls(o);return s=Er(s.pipe(Un(1)),s.pipe(fc(1),Qu(0))),s.pipe(mt(l=>{let d={matches:!1,breakpoints:{}};return l.forEach(({matches:f,query:p})=>{d.matches=d.matches||f,d.breakpoints[p]=f}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);let i=this._mediaMatcher.matchMedia(t),s={observable:new Ke(l=>{let d=f=>this._zone.run(()=>l.next(f));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(xr(i),mt(({matches:l})=>({query:t,matches:l})),Xn(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yA(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}var CS=(()=>{class n{_platform=L(Wt);constructor(){}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return WB(t)&&getComputedStyle(t).visibility==="visible"}isTabbable(t){if(!this._platform.isBrowser)return!1;let i=QB(tU(t));if(i&&(SA(i)===-1||!this.isVisible(i)))return!1;let o=t.nodeName.toLowerCase(),s=SA(t);return t.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!JB(t)?!1:o==="audio"?t.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||t.hasAttribute("controls"):t.tabIndex>=0}isFocusable(t,i){return eU(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function QB(n){try{return n.frameElement}catch{return null}}function WB(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function $B(n){let e=n.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function YB(n){return ZB(n)&&n.type=="hidden"}function XB(n){return KB(n)&&n.hasAttribute("href")}function ZB(n){return n.nodeName.toLowerCase()=="input"}function KB(n){return n.nodeName.toLowerCase()=="a"}function DA(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let e=n.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function SA(n){if(!DA(n))return null;let e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function JB(n){let e=n.nodeName.toLowerCase(),t=e==="input"&&n.type;return t==="text"||t==="password"||e==="select"||e==="textarea"}function eU(n){return YB(n)?!1:$B(n)||XB(n)||n.hasAttribute("contenteditable")||DA(n)}function tU(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var DS=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_enabled=!0;constructor(e,t,i,o,s=!1,l){this._element=e,this._checker=t,this._ngZone=i,this._document=o,this._injector=l,s||this.attachAnchors()}destroy(){let e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){let i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){let t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=0;i<t.length;i++){let o=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(o)return o}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let t=e.children;for(let i=t.length-1;i>=0;i--){let o=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(o)return o}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?Fr(e,{injector:this._injector}):setTimeout(e)}},CA=(()=>{class n{_checker=L(CS);_ngZone=L(Ue);_document=L(bt);_injector=L(Lt);constructor(){L(Gi).load(SS)}create(t,i=!1){return new DS(t,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wS(n){return n.buttons===0||n.detail===0}function IS(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var nU=new _e("cdk-input-modality-detector-options"),iU={ignoreKeys:[18,17,224,91,16]},wA=650,Ll=ms({passive:!0,capture:!0}),rU=(()=>{class n{_platform=L(Wt);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new Ri(null);_options;_lastTouchMs=0;_onKeydown=t=>{this._options?.ignoreKeys?.some(i=>i===t.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Sr(t))};_onMousedown=t=>{Date.now()-this._lastTouchMs<wA||(this._modality.next(wS(t)?"keyboard":"mouse"),this._mostRecentTarget=Sr(t))};_onTouchstart=t=>{if(IS(t)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Sr(t)};constructor(){let t=L(Ue),i=L(bt),o=L(nU,{optional:!0});this._options=we(we({},iU),o),this.modalityDetected=this._modality.pipe(fc(1)),this.modalityChanged=this.modalityDetected.pipe(Wu()),this._platform.isBrowser&&t.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Ll),i.addEventListener("mousedown",this._onMousedown,Ll),i.addEventListener("touchstart",this._onTouchstart,Ll)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ll),document.removeEventListener("mousedown",this._onMousedown,Ll),document.removeEventListener("touchstart",this._onTouchstart,Ll))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var lp=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(lp||{}),oU=new _e("cdk-focus-monitor-default-options"),ap=ms({passive:!0,capture:!0}),cp=(()=>{class n{_ngZone=L(Ue);_platform=L(Wt);_inputModalityDetector=L(rU);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=L(bt,{optional:!0});_stopInputModalityDetector=new Oe;constructor(){let t=L(oU,{optional:!0});this._detectionMode=t?.detectionMode||lp.IMMEDIATE}_rootNodeFocusAndBlurListener=t=>{let i=Sr(t);for(let o=i;o;o=o.parentElement)t.type==="focus"?this._onFocus(t,o):this._onBlur(t,o)};monitor(t,i=!1){let o=tr(t);if(!this._platform.isBrowser||o.nodeType!==1)return dn();let s=fA(o)||this._getDocument(),l=this._elementInfo.get(o);if(l)return i&&(l.checkChildren=!0),l.subject;let d={checkChildren:i,subject:new Oe,rootNode:s};return this._elementInfo.set(o,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(t){let i=tr(t),o=this._elementInfo.get(i);o&&(o.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(o))}focusVia(t,i,o){let s=tr(t),l=this._getDocument().activeElement;s===l?this._getClosestElementsInfo(s).forEach(([d,f])=>this._originChanged(d,i,f)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===lp.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused",i==="touch"),t.classList.toggle("cdk-keyboard-focused",i==="keyboard"),t.classList.toggle("cdk-mouse-focused",i==="mouse"),t.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=t,this._originFromTouchInteraction=t==="touch"&&i,this._detectionMode===lp.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?wA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(t,i){let o=this._elementInfo.get(i),s=Sr(t);!o||!o.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),o)}_onBlur(t,i){let o=this._elementInfo.get(i);!o||o.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(o,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;let i=t.rootNode,o=this._rootNodeFocusListenerCount.get(i)||0;o||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,ap),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,ap)}),this._rootNodeFocusListenerCount.set(i,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Xn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){let i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let o=this._rootNodeFocusListenerCount.get(i);o>1?this._rootNodeFocusListenerCount.set(i,o-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ap),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ap),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,o){this._setClasses(t,i),this._emitOrigin(o,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){let i=[];return this._elementInfo.forEach((o,s)=>{(s===t||o.checkChildren&&s.contains(t))&&i.push([s,o])}),i}_isLastInteractionFromInputLabel(t){let{_mostRecentTarget:i,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!i||i===t||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA"||t.disabled)return!1;let s=t.labels;if(s){for(let l=0;l<s.length;l++)if(s[l].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Sa=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Sa||{}),bA="cdk-high-contrast-black-on-white",_A="cdk-high-contrast-white-on-black",bS="cdk-high-contrast-active",ES=(()=>{class n{_platform=L(Wt);_hasCheckedHighContrastMode;_document=L(bt);_breakpointSubscription;constructor(){this._breakpointSubscription=L(vA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Sa.NONE;let t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);let i=this._document.defaultView||window,o=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Sa.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Sa.BLACK_ON_WHITE}return Sa.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let t=this._document.body.classList;t.remove(bS,bA,_A),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Sa.BLACK_ON_WHITE?t.add(bS,bA):i===Sa.WHITE_ON_BLACK&&t.add(bS,_A)}}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),IA=(()=>{class n{constructor(){L(ES)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[sp]})}return n})(),_S={},hi=(()=>{class n{_appId=L(Pc);getId(t){return this._appId!=="ng"&&(t+=this._appId),_S.hasOwnProperty(t)||(_S[t]=0),`${t}${_S[t]++}`}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var EA=Jm(),TS=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(e,t){this._viewportRuler=e,this._document=t}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ln(-this._previousScrollPosition.left),e.style.top=Ln(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,t=this._document.body,i=e.style,o=t.style,s=i.scrollBehavior||"",l=o.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),EA&&(i.scrollBehavior=o.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),EA&&(i.scrollBehavior=s,o.scrollBehavior=l)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}};var xS=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(e,t,i,o){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(yn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},dp=class{enable(){}disable(){}attach(){}};function AS(n,e){return e.some(t=>{let i=n.bottom<t.top,o=n.top>t.bottom,s=n.right<t.left,l=n.left>t.right;return i||o||s||l})}function TA(n,e){return e.some(t=>{let i=n.top<t.top,o=n.bottom>t.bottom,s=n.left<t.left,l=n.right>t.right;return i||o||s||l})}var MS=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(e,t,i,o){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=o}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:o}=this._viewportRuler.getViewportSize();AS(t,[{width:i,height:o,bottom:o,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sU=(()=>{class n{_scrollDispatcher=L(yS);_viewportRuler=L(xd);_ngZone=L(Ue);_document=L(bt);constructor(){}noop=()=>new dp;close=t=>new xS(this._scrollDispatcher,this._ngZone,this._viewportRuler,t);block=()=>new TS(this._viewportRuler,this._document);reposition=t=>new MS(this._scrollDispatcher,this._viewportRuler,this._ngZone,t);static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Od=class{positionStrategy;scrollStrategy=new dp;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(e){if(e){let t=Object.keys(e);for(let i of t)e[i]!==void 0&&(this[i]=e[i])}}};var RS=class{connectionPair;scrollableViewProperties;constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}};var PA=(()=>{class n{_attachedOverlays=[];_document=L(bt);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){let i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),aU=(()=>{class n extends PA{_ngZone=L(Ue,{optional:!0});add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}_keydownListener=t=>{let i=this._attachedOverlays;for(let o=i.length-1;o>-1;o--)if(i[o]._keydownEvents.observers.length>0){let s=i[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(t)):s.next(t);break}};static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lU=(()=>{class n extends PA{_platform=L(Wt);_ngZone=L(Ue,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(t){if(super.add(t),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=t=>{this._pointerDownEventTarget=Sr(t)};_clickListener=t=>{let i=Sr(t),o=t.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let l=s.length-1;l>-1;l--){let d=s[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(xA(d.overlayElement,i)||xA(d.overlayElement,o))break;let f=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(t)):f.next(t)}};static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xA(n,e){let t=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var FA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return n})(),up=(()=>{class n{_platform=L(Wt);_containerElement;_document=L(bt);_styleLoader=L(Gi);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let t="cdk-overlay-container";if(this._platform.isBrowser||gS()){let o=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let i=this._document.createElement("div");i.classList.add(t),gS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load(FA)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Nl=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_backdropElement=null;_backdropTimeout;_backdropClick=new Oe;_attachments=new Oe;_detachments=new Oe;_positionStrategy;_scrollStrategy;_locationChanges=Yt.EMPTY;_backdropClickHandler=e=>this._backdropClick.next(e);_backdropTransitionendHandler=e=>{this._disposeBackdrop(e.target)};_previousHostParent;_keydownEvents=new Oe;_outsidePointerEvents=new Oe;_renders=new Oe;_afterRenderRef;_afterNextRenderRef;constructor(e,t,i,o,s,l,d,f,p,g=!1,y){this._portalOutlet=e,this._host=t,this._pane=i,this._config=o,this._ngZone=s,this._keyboardDispatcher=l,this._document=d,this._location=f,this._outsideClickDispatcher=p,this._animationsDisabled=g,this._injector=y,o.scrollStrategy&&(this._scrollStrategy=o.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=o.positionStrategy,this._afterRenderRef=Xi(()=>kc(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=Fr(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof t?.onDestroy=="function"&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=we(we({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Bt(we({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ln(this._config.width),e.height=Ln(this._config.height),e.minWidth=Ln(this._config.minWidth),e.minHeight=Ln(this._config.minHeight),e.maxWidth=Ln(this._config.maxWidth),e.maxHeight=Ln(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){let o=xl(t||[]).filter(s=>!!s);o.length&&(i?e.classList.add(...o):e.classList.remove(...o))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Xn(Ii(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},AA="cdk-overlay-connected-position-bounding-box",cU=/([A-Za-z%]+)$/,OS=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new Oe;_resizeSubscription=Yt.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(e,t,i,o,s){this._viewportRuler=t,this._document=i,this._platform=o,this._overlayContainer=s,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(AA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,t=this._overlayRect,i=this._viewportRect,o=this._containerRect,s=[],l;for(let d of this._preferredPositions){let f=this._getOriginPoint(e,o,d),p=this._getOverlayPoint(f,t,d),g=this._getOverlayFit(p,t,i,d);if(g.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(d,f);return}if(this._canFitWithFlexibleDimensions(g,p,i)){s.push({position:d,origin:f,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(f,d)});continue}(!l||l.overlayFit.visibleArea<g.visibleArea)&&(l={overlayFit:g,overlayPoint:p,originPoint:f,position:d,overlayRect:t})}if(s.length){let d=null,f=-1;for(let p of s){let g=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);g>f&&(f=g,d=p)}this._isPushed=!1,this._applyPosition(d.position,d.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(l.position,l.originPoint);return}this._applyPosition(l.position,l.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ba(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(AA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let o;if(i.originX=="center")o=e.left+e.width/2;else{let l=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;o=i.originX=="start"?l:d}t.left<0&&(o-=t.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,t.top<0&&(s-=t.top),{x:o,y:s}}_getOverlayPoint(e,t,i){let o;i.overlayX=="center"?o=-t.width/2:i.overlayX==="start"?o=this._isRtl()?-t.width:0:o=this._isRtl()?0:-t.width;let s;return i.overlayY=="center"?s=-t.height/2:s=i.overlayY=="top"?0:-t.height,{x:e.x+o,y:e.y+s}}_getOverlayFit(e,t,i,o){let s=RA(t),{x:l,y:d}=e,f=this._getOffset(o,"x"),p=this._getOffset(o,"y");f&&(l+=f),p&&(d+=p);let g=0-l,y=l+s.width-i.width,D=0-d,b=d+s.height-i.height,C=this._subtractOverflows(s.width,g,y),w=this._subtractOverflows(s.height,D,b),x=C*w;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:w===s.height,fitsInViewportHorizontally:C==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){let o=i.bottom-t.y,s=i.right-t.x,l=MA(this._overlayRef.getConfig().minHeight),d=MA(this._overlayRef.getConfig().minWidth),f=e.fitsInViewportVertically||l!=null&&l<=o,p=e.fitsInViewportHorizontally||d!=null&&d<=s;return f&&p}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let o=RA(t),s=this._viewportRect,l=Math.max(e.x+o.width-s.width,0),d=Math.max(e.y+o.height-s.height,0),f=Math.max(s.top-i.top-e.y,0),p=Math.max(s.left-i.left-e.x,0),g=0,y=0;return o.width<=s.width?g=p||-l:g=e.x<this._viewportMargin?s.left-i.left-e.x:0,o.height<=s.height?y=f||-d:y=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:g,y},{x:e.x+g,y:e.y+y}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!dU(this._lastScrollVisibility,i)){let o=new RS(e,i);this._positionChanges.next(o)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let t=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,o=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${o}`}_calculateBoundingBoxRect(e,t){let i=this._viewportRect,o=this._isRtl(),s,l,d;if(t.overlayY==="top")l=e.y,s=i.height-l+this._viewportMargin;else if(t.overlayY==="bottom")d=i.height-e.y+this._viewportMargin*2,s=i.height-d+this._viewportMargin;else{let b=Math.min(i.bottom-e.y+i.top,e.y),C=this._lastBoundingBoxSize.height;s=b*2,l=e.y-b,s>C&&!this._isInitialRender&&!this._growAfterOpen&&(l=e.y-C/2)}let f=t.overlayX==="start"&&!o||t.overlayX==="end"&&o,p=t.overlayX==="end"&&!o||t.overlayX==="start"&&o,g,y,D;if(p)D=i.width-e.x+this._viewportMargin*2,g=e.x-this._viewportMargin;else if(f)y=e.x,g=i.right-e.x;else{let b=Math.min(i.right-e.x+i.left,e.x),C=this._lastBoundingBoxSize.width;g=b*2,y=e.x-b,g>C&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-C/2)}return{top:l,left:y,bottom:d,right:D,width:g,height:s}}_setBoundingBoxStyles(e,t){let i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let o={};if(this._hasExactPosition())o.top=o.left="0",o.bottom=o.right=o.maxHeight=o.maxWidth="",o.width=o.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,l=this._overlayRef.getConfig().maxWidth;o.height=Ln(i.height),o.top=Ln(i.top),o.bottom=Ln(i.bottom),o.width=Ln(i.width),o.left=Ln(i.left),o.right=Ln(i.right),t.overlayX==="center"?o.alignItems="center":o.alignItems=t.overlayX==="end"?"flex-end":"flex-start",t.overlayY==="center"?o.justifyContent="center":o.justifyContent=t.overlayY==="bottom"?"flex-end":"flex-start",s&&(o.maxHeight=Ln(s)),l&&(o.maxWidth=Ln(l))}this._lastBoundingBoxSize=i,ba(this._boundingBox.style,o)}_resetBoundingBoxStyles(){ba(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ba(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){let i={},o=this._hasExactPosition(),s=this._hasFlexibleDimensions,l=this._overlayRef.getConfig();if(o){let g=this._viewportRuler.getViewportScrollPosition();ba(i,this._getExactOverlayY(t,e,g)),ba(i,this._getExactOverlayX(t,e,g))}else i.position="static";let d="",f=this._getOffset(t,"x"),p=this._getOffset(t,"y");f&&(d+=`translateX(${f}px) `),p&&(d+=`translateY(${p}px)`),i.transform=d.trim(),l.maxHeight&&(o?i.maxHeight=Ln(l.maxHeight):s&&(i.maxHeight="")),l.maxWidth&&(o?i.maxWidth=Ln(l.maxWidth):s&&(i.maxWidth="")),ba(this._pane.style,i)}_getExactOverlayY(e,t,i){let o={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let l=this._document.documentElement.clientHeight;o.bottom=`${l-(s.y+this._overlayRect.height)}px`}else o.top=Ln(s.y);return o}_getExactOverlayX(e,t,i){let o={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let l;if(this._isRtl()?l=e.overlayX==="end"?"left":"right":l=e.overlayX==="end"?"right":"left",l==="right"){let d=this._document.documentElement.clientWidth;o.right=`${d-(s.x+this._overlayRect.width)}px`}else o.left=Ln(s.x);return o}_getScrollVisibility(){let e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(o=>o.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:TA(e,i),isOriginOutsideView:AS(e,i),isOverlayClipped:TA(t,i),isOverlayOutsideView:AS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,o)=>i-Math.max(o,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return t==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&xl(e).forEach(t=>{t!==""&&this._appliedPanelClasses.indexOf(t)===-1&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Xe)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}};function ba(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function MA(n){if(typeof n!="number"&&n!=null){let[e,t]=n.split(cU);return!t||t==="px"?parseFloat(e):null}return n||null}function RA(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}function dU(n,e){return n===e?!0:n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}var OA="cdk-global-overlay-wrapper",PS=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(e){let t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(OA),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:o,height:s,maxWidth:l,maxHeight:d}=i,f=(o==="100%"||o==="100vw")&&(!l||l==="100%"||l==="100vw"),p=(s==="100%"||s==="100vh")&&(!d||d==="100%"||d==="100vh"),g=this._xPosition,y=this._xOffset,D=this._overlayRef.getConfig().direction==="rtl",b="",C="",w="";f?w="flex-start":g==="center"?(w="center",D?C=y:b=y):D?g==="left"||g==="end"?(w="flex-end",b=y):(g==="right"||g==="start")&&(w="flex-start",C=y):g==="left"||g==="start"?(w="flex-start",b=y):(g==="right"||g==="end")&&(w="flex-end",C=y),e.position=this._cssPosition,e.marginLeft=f?"0":b,e.marginTop=p?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=f?"0":C,t.justifyContent=w,t.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(OA),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uU=(()=>{class n{_viewportRuler=L(xd);_document=L(bt);_platform=L(Wt);_overlayContainer=L(up);constructor(){}global(){return new PS}flexibleConnectedTo(t){return new OS(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xo=(()=>{class n{scrollStrategies=L(sU);_overlayContainer=L(up);_positionBuilder=L(uU);_keyboardDispatcher=L(aU);_injector=L(Lt);_ngZone=L(Ue);_document=L(bt);_directionality=L(Si);_location=L(fy);_outsideClickDispatcher=L(lU);_animationsModuleType=L(Zn,{optional:!0});_idGenerator=L(hi);_appRef;_styleLoader=L(Gi);constructor(){}create(t){this._styleLoader.load(FA);let i=this._createHostElement(),o=this._createPaneElement(i),s=this._createPortalOutlet(o),l=new Od(t);return l.direction=l.direction||this._directionality.value,new Nl(s,i,o,l,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Fi))}position(){return this._positionBuilder}_createPaneElement(t){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){let t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Yi)),new ip(t,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hU=new _e("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=L(xo);return()=>n.scrollStrategies.reposition()}});function fU(n){return()=>n.scrollStrategies.reposition()}var mU={provide:hU,deps:[xo],useFactory:fU},hp=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({providers:[xo,mU],imports:[ps,ya,Ad,Ad]})}return n})();function pU(n,e){}var gs=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var LS=(()=>{class n extends kl{_elementRef=L(Xe);_focusTrapFactory=L(CA);_config;_interactivityChecker=L(CS);_ngZone=L(Ue);_overlayRef=L(Nl);_focusMonitor=L(cp);_platform=L(Wt);_document=L(bt,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=L(wn);_injector=L(Lt);_isDestroyed=!1;constructor(){super(),this._config=L(gs,{optional:!0})||new gs,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){let i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}attachDomPortal=t=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(t);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let o=()=>{t.removeEventListener("blur",o),t.removeEventListener("mousedown",o),t.removeAttribute("tabindex")};t.addEventListener("blur",o),t.addEventListener("mousedown",o)})),t.focus(i)}_focusByCssSelector(t,i){let o=this._elementRef.nativeElement.querySelector(t);o&&this._forceFocus(o,i)}_trapFocus(){this._isDestroyed||Fr(()=>{let t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let t=this._config.restoreFocus,i=null;if(typeof t=="string"?i=this._document.querySelector(t):typeof t=="boolean"?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&typeof i.focus=="function"){let o=Ed(),s=this._elementRef.nativeElement;(!o||o===this._document.body||o===s||s.contains(o))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let t=this._elementRef.nativeElement,i=Ed();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Ed()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,o){if(i&1&&pn(Rd,7),i&2){let s;at(s=lt())&&(o._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,o){i&2&&fn("id",o._config.id||null)("role",o._config.role)("aria-modal",o._config.ariaModal)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null)},features:[Gt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,o){i&1&&ut(0,pU,0,0,"ng-template",0)},dependencies:[Rd],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})(),Pd=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new Oe;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(e,t){this.overlayRef=e,this.config=t,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!op(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{t.closeOnOverlayDetachments!==!1&&this.close()})}close(e,t){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},gU=new _e("DialogScrollStrategy",{providedIn:"root",factory:()=>{let n=L(xo);return()=>n.scrollStrategies.block()}}),yU=new _e("DialogData"),vU=new _e("DefaultDialogConfig");var NS=(()=>{class n{_overlay=L(xo);_injector=L(Lt);_defaultOptions=L(vU,{optional:!0});_parentDialog=L(n,{optional:!0,skipSelf:!0});_overlayContainer=L(up);_idGenerator=L(hi);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Oe;_afterOpenedAtThisLevel=new Oe;_ariaHiddenElements=new Map;_scrollStrategy=L(gU);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=jo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xr(void 0)));constructor(){}open(t,i){let o=this._defaultOptions||new gs;i=we(we({},o),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),l=this._overlay.create(s),d=new Pd(l,i),f=this._attachContainer(l,d,i);return d.containerInstance=f,this._attachDialogContent(t,d,f,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(d),d.closed.subscribe(()=>this._removeOpenDialog(d,!0)),this.afterOpened.next(d),d}closeAll(){FS(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){FS(this._openDialogsAtThisLevel,t=>{t.config.closeOnDestroy===!1&&this._removeOpenDialog(t,!1)}),FS(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){let i=new Od({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,o){let s=o.injector||o.viewContainerRef?.injector,l=[{provide:gs,useValue:o},{provide:Pd,useValue:i},{provide:Nl,useValue:t}],d;o.container?typeof o.container=="function"?d=o.container:(d=o.container.type,l.push(...o.container.providers(o))):d=LS;let f=new Pl(d,o.viewContainerRef,Lt.create({parent:s||this._injector,providers:l}));return t.attach(f).instance}_attachDialogContent(t,i,o,s){if(t instanceof Rn){let l=this._createInjector(s,i,o,void 0),d={$implicit:s.data,dialogRef:i};s.templateContext&&(d=we(we({},d),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),o.attachTemplatePortal(new Fl(t,null,d,l))}else{let l=this._createInjector(s,i,o,this._injector),d=o.attachComponentPortal(new Pl(t,s.viewContainerRef,l));i.componentRef=d,i.componentInstance=d.instance}}_createInjector(t,i,o,s){let l=t.injector||t.viewContainerRef?.injector,d=[{provide:yU,useValue:t.data},{provide:Pd,useValue:i}];return t.providers&&(typeof t.providers=="function"?d.push(...t.providers(i,t,o)):d.push(...t.providers)),t.direction&&(!l||!l.get(Si,null,{optional:!0}))&&d.push({provide:Si,useValue:{value:t.direction,change:dn()}}),Lt.create({parent:l||s,providers:d})}_removeOpenDialog(t,i){let o=this.openDialogs.indexOf(t);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,l)=>{s?l.setAttribute("aria-hidden",s):l.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let t=this._overlayContainer.getContainerElement();if(t.parentElement){let i=t.parentElement.children;for(let o=i.length-1;o>-1;o--){let s=i[o];s!==t&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function FS(n,e){let t=n.length;for(;t--;)e(n[t])}var kA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({providers:[NS],imports:[hp,ya,IA,ya]})}return n})();var qA=(()=>{class n{static STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)";static DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)";static ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)";static SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)"}return n})(),GA=(()=>{class n{static COMPLEX="375ms";static ENTERING="225ms";static EXITING="195ms"}return n})();var on=(()=>{class n{constructor(){L(ES)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[ps,ps]})}return n})(),fp=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(e,t,i,o,s){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=i,this._parentForm=o,this._stateChanges=s}updateErrorState(){let e=this.errorState,t=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,o=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(o,t)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}};var jA=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Vl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,o){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return n})();var bi=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(bi||{}),VS=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=bi.HIDDEN;constructor(e,t,i,o=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=o}fadeOut(){this._renderer.fadeOutRipple(this)}},LA=ms({passive:!0,capture:!0}),BS=class{_events=new Map;addHandler(e,t,i,o){let s=this._events.get(t);if(s){let l=s.get(i);l?l.add(o):s.set(i,new Set([o]))}else this._events.set(t,new Map([[i,new Set([o])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,LA)})}removeHandler(e,t,i){let o=this._events.get(e);if(!o)return;let s=o.get(t);s&&(s.delete(i),s.size===0&&o.delete(t),o.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,LA)))}_delegateEventHandler=e=>{let t=Sr(e);t&&this._events.get(e.type)?.forEach((i,o)=>{(o===t||o.contains(t))&&i.forEach(s=>s.handleEvent(e))})}},NA={enterDuration:225,exitDuration:150},SU=800,VA=ms({passive:!0,capture:!0}),BA=["mousedown","touchstart"],UA=["mouseup","mouseleave","touchend","touchcancel"],bU=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return n})(),US=class n{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new BS;constructor(e,t,i,o,s){this._target=e,this._ngZone=t,this._platform=o,o.isBrowser&&(this._containerElement=tr(i)),s&&s.get(Gi).load(bU)}fadeInRipple(e,t,i={}){let o=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=we(we({},NA),i.animation);i.centered&&(e=o.left+o.width/2,t=o.top+o.height/2);let l=i.radius||_U(e,t,o),d=e-o.left,f=t-o.top,p=s.enterDuration,g=document.createElement("div");g.classList.add("mat-ripple-element"),g.style.left=`${d-l}px`,g.style.top=`${f-l}px`,g.style.height=`${l*2}px`,g.style.width=`${l*2}px`,i.color!=null&&(g.style.backgroundColor=i.color),g.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(g);let y=window.getComputedStyle(g),D=y.transitionProperty,b=y.transitionDuration,C=D==="none"||b==="0s"||b==="0s, 0s"||o.width===0&&o.height===0,w=new VS(this,g,i,C);g.style.transform="scale3d(1, 1, 1)",w.state=bi.FADING_IN,i.persistent||(this._mostRecentTransientRipple=w);let x=null;return!C&&(p||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{x&&(x.fallbackTimer=null),clearTimeout(k),this._finishRippleTransition(w)},F=()=>this._destroyRipple(w),k=setTimeout(F,p+100);g.addEventListener("transitionend",M),g.addEventListener("transitioncancel",F),x={onTransitionEnd:M,onTransitionCancel:F,fallbackTimer:k}}),this._activeRipples.set(w,x),(C||!p)&&this._finishRippleTransition(w),w}fadeOutRipple(e){if(e.state===bi.FADING_OUT||e.state===bi.HIDDEN)return;let t=e.element,i=we(we({},NA),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=bi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=tr(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,BA.forEach(i=>{n._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{UA.forEach(t=>{this._triggerElement.addEventListener(t,this,VA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===bi.FADING_IN?this._startFadeOutTransition(e):e.state===bi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=bi.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=bi.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),t.fallbackTimer!==null&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){let t=wS(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+SU;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!IS(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===bi.VISIBLE||e.config.terminateOnPointerUp&&e.state===bi.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(BA.forEach(t=>n._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(UA.forEach(t=>e.removeEventListener(t,this,VA)),this._pointerUpEventsRegistered=!1))}};function _U(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),o=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+o*o)}var qS=new _e("mat-ripple-global-options"),Fd=(()=>{class n{_elementRef=L(Xe);_animationMode=L(Zn,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let t=L(Ue),i=L(Wt),o=L(qS,{optional:!0}),s=L(Lt);this._globalOptions=o||{},this._rippleRenderer=new US(this,t,this._elementRef,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:we(we(we({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,o){return typeof t=="number"?this._rippleRenderer.fadeInRipple(t,i,we(we({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,we(we({},this.rippleConfig),t))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,o){i&2&&Ut("mat-ripple-unbounded",o.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return n})(),Bl=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,on]})}return n})(),zA=(()=>{class n{_animationMode=L(Zn,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,o){i&2&&Ut("mat-pseudo-checkbox-indeterminate",o.state==="indeterminate")("mat-pseudo-checkbox-checked",o.state==="checked")("mat-pseudo-checkbox-disabled",o.disabled)("mat-pseudo-checkbox-minimal",o.appearance==="minimal")("mat-pseudo-checkbox-full",o.appearance==="full")("_mat-animation-noopable",o._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,o){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return n})();function DU(n,e){}var pp=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!0;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},GS="mdc-dialog--open",HA="mdc-dialog--opening",QA="mdc-dialog--closing",CU=150,wU=75,IU=(()=>{class n extends LS{_animationMode=L(Zn,{optional:!0});_animationStateChanged=new wt;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?$A(this._config.enterAnimationDuration)??CU:0;_exitAnimationDuration=this._animationsEnabled?$A(this._config.exitAnimationDuration)??wU:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(WA,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(HA,GS)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(GS),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(GS),this._animationsEnabled?(this._hostElement.style.setProperty(WA,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(QA)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(HA,QA)}_waitForAnimationToComplete(t,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(t){let i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275cmp=ot({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,o){i&2&&(ho("id",o._config.id),fn("aria-modal",o._config.ariaModal)("role",o._config.role)("aria-labelledby",o._config.ariaLabel?null:o._ariaLabelledByQueue[0])("aria-label",o._config.ariaLabel)("aria-describedby",o._config.ariaDescribedBy||null),Ut("_mat-animation-noopable",!o._animationsEnabled)("mat-mdc-dialog-container-with-actions",o._actionSectionCount>0))},features:[Gt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,o){i&1&&(Me(0,"div",0)(1,"div",1),ut(2,DU,0,0,"ng-template",2),Fe()())},dependencies:[Rd],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})(),WA="--mat-dialog-transition-duration";function $A(n){return n==null?null:typeof n=="number"?n:n.endsWith("ms")?wd(n.substring(0,n.length-2)):n.endsWith("s")?wd(n.substring(0,n.length-1))*1e3:n==="0"?0:null}var mp=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(mp||{}),Ul=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new Oe;_beforeClosed=new Oe;_result;_closeFallbackTimeout;_state=mp.OPEN;_closeInteractionType;constructor(e,t,i){this._ref=e,this._containerInstance=i,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(yn(o=>o.state==="opened"),Un(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(yn(o=>o.state==="closed"),Un(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ii(this.backdropClick(),this.keydownEvents().pipe(yn(o=>o.keyCode===27&&!this.disableClose&&!op(o)))).subscribe(o=>{this.disableClose||(o.preventDefault(),EU(this,o.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(yn(t=>t.state==="closing"),Un(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=mp.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=mp.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function EU(n,e,t){return n._closeInteractionType=e,n.close(t)}var jS=new _e("MatMdcDialogData"),TU=new _e("mat-mdc-dialog-default-options"),xU=new _e("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let n=L(xo);return()=>n.scrollStrategies.block()}});var gp=(()=>{class n{_overlay=L(xo);_defaultOptions=L(TU,{optional:!0});_scrollStrategy=L(xU);_parentDialog=L(n,{optional:!0,skipSelf:!0});_idGenerator=L(hi);_dialog=L(NS);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new Oe;_afterOpenedAtThisLevel=new Oe;dialogConfigClass=pp;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=jo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(xr(void 0)));constructor(){this._dialogRefConstructor=Ul,this._dialogContainerType=IU,this._dialogDataToken=jS}open(t,i){let o;i=we(we({},this._defaultOptions||new pp),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(t,Bt(we({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:gs,useValue:i}]},templateContext:()=>({dialogRef:o}),providers:(l,d,f)=>(o=new this._dialogRefConstructor(l,i,f),o.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:d.data},{provide:this._dialogRefConstructor,useValue:o}])}));return o.componentRef=s.componentRef,o.componentInstance=s.componentInstance,this.openDialogs.push(o),this.afterOpened.next(o),o.afterClosed().subscribe(()=>{let l=this.openDialogs.indexOf(o);l>-1&&(this.openDialogs.splice(l,1),this.openDialogs.length||this._getAfterAllClosed().next())}),o}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var AU=(()=>{class n{_dialogRef=L(Ul,{optional:!0});_elementRef=L(Xe);_dialog=L(gp);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=MU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n})}return n})(),YA=(()=>{class n extends AU{id=L(hi).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,o){i&2&&ho("id",o.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[Gt]})}return n})(),XA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[Xw([pA])]})}return n})();function MU(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}var ZA=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({providers:[gp],imports:[kA,hp,ya,on,on]})}return n})();var OU=new _e("MAT_SORT_DEFAULT_OPTIONS"),KA=(()=>{class n{_defaultOptions;_initializedStream=new Os(1);sortables=new Map;_stateChanges=new Oe;active;start="asc";get direction(){return this._direction}set direction(t){this._direction=t}_direction="";disableClear;disabled=!1;sortChange=new wt;initialized=this._initializedStream;constructor(t){this._defaultOptions=t}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let i=t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear,o=PU(t.start||this.start,i),s=o.indexOf(this.direction)+1;return s>=o.length&&(s=0),o[s]}ngOnInit(){this._initializedStream.next()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete(),this._initializedStream.complete()}static \u0275fac=function(i){return new(i||n)(bn(OU,8))};static \u0275dir=Ne({type:n,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{active:[0,"matSortActive","active"],start:[0,"matSortStart","start"],direction:[0,"matSortDirection","direction"],disableClear:[2,"matSortDisableClear","disableClear",ht],disabled:[2,"matSortDisabled","disabled",ht]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[Xt,ci]})}return n})();function PU(n,e){let t=["asc","desc"];return n=="desc"&&t.reverse(),e||t.push(""),t}var yne=GA.ENTERING+" "+qA.STANDARD_CURVE;var kU=[[["caption"]],[["colgroup"],["col"]],"*"],LU=["caption","colgroup, col","*"];function NU(n,e){n&1&&Zt(0,2)}function VU(n,e){n&1&&(Me(0,"thead",0),vi(1,1),Fe(),Me(2,"tbody",0),vi(3,2)(4,3),Fe(),Me(5,"tfoot",0),vi(6,4),Fe())}function BU(n,e){n&1&&vi(0,1)(1,2)(2,3)(3,4)}var br=new _e("CDK_TABLE");var Dp=(()=>{class n{template=L(Rn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkCellDef",""]]})}return n})(),Cp=(()=>{class n{template=L(Rn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkHeaderCellDef",""]]})}return n})(),tM=(()=>{class n{template=L(Rn);constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkFooterCellDef",""]]})}return n})(),ql=(()=>{class n{_table=L(br,{optional:!0});_hasStickyChanged=!1;get name(){return this._name}set name(t){this._setNameInput(t)}_name;get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}_sticky=!1;get stickyEnd(){return this._stickyEnd}set stickyEnd(t){t!==this._stickyEnd&&(this._stickyEnd=t,this._hasStickyChanged=!0)}_stickyEnd=!1;cell;headerCell;footerCell;cssClassFriendlyName;_columnCssClassName;constructor(){}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(t){t&&(this._name=t,this.cssClassFriendlyName=t.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(i,o,s){if(i&1&&(Gn(s,Dp,5),Gn(s,Cp,5),Gn(s,tM,5)),i&2){let l;at(l=lt())&&(o.cell=l.first),at(l=lt())&&(o.headerCell=l.first),at(l=lt())&&(o.footerCell=l.first)}},inputs:{name:[0,"cdkColumnDef","name"],sticky:[2,"sticky","sticky",ht],stickyEnd:[2,"stickyEnd","stickyEnd",ht]},features:[Kt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Xt]})}return n})(),vp=class{constructor(e,t){t.nativeElement.classList.add(...e._columnCssClassName)}},nM=(()=>{class n extends vp{constructor(){super(L(ql),L(Xe))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Gt]})}return n})();var iM=(()=>{class n extends vp{constructor(){let t=L(ql),i=L(Xe);super(t,i);let o=t._table?._getCellRole();o&&i.nativeElement.setAttribute("role",o)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Gt]})}return n})(),Sp=class{tasks=[];endTasks=[]},bp=new _e("_COALESCED_STYLE_SCHEDULER"),HS=(()=>{class n{_currentSchedule=null;_ngZone=L(Ue);constructor(){}schedule(t){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(t)}scheduleEnd(t){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(t)}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new Sp,this._ngZone.runOutsideAngular(()=>queueMicrotask(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let t=this._currentSchedule;this._currentSchedule=new Sp;for(let i of t.tasks)i();for(let i of t.endTasks)i()}this._currentSchedule=null})))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac})}return n})();var QS=(()=>{class n{template=L(Rn);_differs=L(Br);columns;_columnsDiffer;constructor(){}ngOnChanges(t){if(!this._columnsDiffer){let i=t.columns&&t.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(t){return this instanceof kd?t.headerCell.template:this instanceof WS?t.footerCell.template:t.cell.template}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,features:[ci]})}return n})(),kd=(()=>{class n extends QS{_table=L(br,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(L(Rn),L(Br))}ngOnChanges(t){super.ngOnChanges(t)}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[0,"cdkHeaderRowDef","columns"],sticky:[2,"cdkHeaderRowDefSticky","sticky",ht]},features:[Xt,Gt,ci]})}return n})(),WS=(()=>{class n extends QS{_table=L(br,{optional:!0});_hasStickyChanged=!1;get sticky(){return this._sticky}set sticky(t){t!==this._sticky&&(this._sticky=t,this._hasStickyChanged=!0)}_sticky=!1;constructor(){super(L(Rn),L(Br))}ngOnChanges(t){super.ngOnChanges(t)}hasStickyChanged(){let t=this._hasStickyChanged;return this.resetStickyChanged(),t}resetStickyChanged(){this._hasStickyChanged=!1}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[0,"cdkFooterRowDef","columns"],sticky:[2,"cdkFooterRowDefSticky","sticky",ht]},features:[Xt,Gt,ci]})}return n})(),wp=(()=>{class n extends QS{_table=L(br,{optional:!0});when;constructor(){super(L(Rn),L(Br))}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:[0,"cdkRowDefColumns","columns"],when:[0,"cdkRowDefWhen","when"]},features:[Gt]})}return n})(),_a=(()=>{class n{_viewContainer=L(ei);cells;context;static mostRecentCellOutlet=null;constructor(){n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","cdkCellOutlet",""]]})}return n})(),$S=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,o){i&1&&vi(0,0)},dependencies:[_a],encapsulation:2})}return n})();var YS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,o){i&1&&vi(0,0)},dependencies:[_a],encapsulation:2})}return n})(),rM=(()=>{class n{templateRef=L(Rn);_contentClassName="cdk-no-data-row";constructor(){}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["ng-template","cdkNoDataRow",""]]})}return n})(),JA=["top","bottom","left","right"],zS=class{_isNativeHtmlTable;_stickCellCss;direction;_coalescedStyleScheduler;_isBrowser;_needsPositionStickyOnElement;_positionListener;_elemSizeCache=new WeakMap;_resizeObserver=globalThis?.ResizeObserver?new globalThis.ResizeObserver(e=>this._updateCachedSizes(e)):null;_updatedStickyColumnsParamsToReplay=[];_stickyColumnsReplayTimeout=null;_cachedCellWidths=[];_borderCellCss;constructor(e,t,i,o,s=!0,l=!0,d){this._isNativeHtmlTable=e,this._stickCellCss=t,this.direction=i,this._coalescedStyleScheduler=o,this._isBrowser=s,this._needsPositionStickyOnElement=l,this._positionListener=d,this._borderCellCss={top:`${t}-border-elem-top`,bottom:`${t}-border-elem-bottom`,left:`${t}-border-elem-left`,right:`${t}-border-elem-right`}}clearStickyPositioning(e,t){(t.includes("left")||t.includes("right"))&&this._removeFromStickyColumnReplayQueue(e);let i=[];for(let o of e)if(o.nodeType===o.ELEMENT_NODE){i.push(o);for(let s=0;s<o.children.length;s++)i.push(o.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(let o of i)this._removeStickyStyle(o,t)})}updateStickyColumns(e,t,i,o=!0,s=!0){if(s&&this._updateStickyColumnReplayQueue({rows:[...e],stickyStartStates:[...t],stickyEndStates:[...i]}),!e.length||!this._isBrowser||!(t.some(l=>l)||i.some(l=>l))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let l=e[0],d=l.children.length,f=this._getCellWidths(l,o),p=this._getStickyStartColumnPositions(f,t),g=this._getStickyEndColumnPositions(f,i),y=t.lastIndexOf(!0),D=i.indexOf(!0),b=this.direction==="rtl",C=b?"right":"left",w=b?"left":"right";for(let x of e)for(let M=0;M<d;M++){let F=x.children[M];t[M]&&this._addStickyStyle(F,C,p[M],M===y),i[M]&&this._addStickyStyle(F,w,g[M],M===D)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:y===-1?[]:f.slice(0,y+1).map((x,M)=>t[M]?x:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:D===-1?[]:f.slice(D).map((x,M)=>i[M+D]?x:null).reverse()}))})}stickRows(e,t,i){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let o=i==="bottom"?e.slice().reverse():e,s=i==="bottom"?t.slice().reverse():t,l=[],d=[],f=[];for(let g=0,y=0;g<o.length;g++){if(!s[g])continue;l[g]=y;let D=o[g];f[g]=this._isNativeHtmlTable?Array.from(D.children):[D];let b=this._retrieveElementSize(D).height;y+=b,d[g]=b}let p=s.lastIndexOf(!0);for(let g=0;g<o.length;g++){if(!s[g])continue;let y=l[g],D=g===p;for(let b of f[g])this._addStickyStyle(b,i,y,D)}i==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:d,offsets:l,elements:f}):this._positionListener?.stickyFooterRowsUpdated({sizes:d,offsets:l,elements:f})})}updateStickyFooterContainer(e,t){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let i=e.querySelector("tfoot");i&&(t.some(o=>!o)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1))})}_removeStickyStyle(e,t){for(let o of t)e.style[o]="",e.classList.remove(this._borderCellCss[o]);JA.some(o=>t.indexOf(o)===-1&&e.style[o])?e.style.zIndex=this._getCalculatedZIndex(e):(e.style.zIndex="",this._needsPositionStickyOnElement&&(e.style.position=""),e.classList.remove(this._stickCellCss))}_addStickyStyle(e,t,i,o){e.classList.add(this._stickCellCss),o&&e.classList.add(this._borderCellCss[t]),e.style[t]=`${i}px`,e.style.zIndex=this._getCalculatedZIndex(e),this._needsPositionStickyOnElement&&(e.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(e){let t={top:100,bottom:10,left:1,right:1},i=0;for(let o of JA)e.style[o]&&(i+=t[o]);return i?`${i}`:""}_getCellWidths(e,t=!0){if(!t&&this._cachedCellWidths.length)return this._cachedCellWidths;let i=[],o=e.children;for(let s=0;s<o.length;s++){let l=o[s];i.push(this._retrieveElementSize(l).width)}return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(e,t){let i=[],o=0;for(let s=0;s<e.length;s++)t[s]&&(i[s]=o,o+=e[s]);return i}_getStickyEndColumnPositions(e,t){let i=[],o=0;for(let s=e.length;s>0;s--)t[s]&&(i[s]=o,o+=e[s]);return i}_retrieveElementSize(e){let t=this._elemSizeCache.get(e);if(t)return t;let i=e.getBoundingClientRect(),o={width:i.width,height:i.height};return this._resizeObserver&&(this._elemSizeCache.set(e,o),this._resizeObserver.observe(e,{box:"border-box"})),o}_updateStickyColumnReplayQueue(e){this._removeFromStickyColumnReplayQueue(e.rows),!this._stickyColumnsReplayTimeout&&this._updatedStickyColumnsParamsToReplay.push(e)}_removeFromStickyColumnReplayQueue(e){let t=new Set(e);for(let i of this._updatedStickyColumnsParamsToReplay)i.rows=i.rows.filter(o=>!t.has(o));this._updatedStickyColumnsParamsToReplay=this._updatedStickyColumnsParamsToReplay.filter(i=>!!i.rows.length)}_updateCachedSizes(e){let t=!1;for(let i of e){let o=i.borderBoxSize?.length?{width:i.borderBoxSize[0].inlineSize,height:i.borderBoxSize[0].blockSize}:{width:i.contentRect.width,height:i.contentRect.height};o.width!==this._elemSizeCache.get(i.target)?.width&&UU(i.target)&&(t=!0),this._elemSizeCache.set(i.target,o)}t&&this._updatedStickyColumnsParamsToReplay.length&&(this._stickyColumnsReplayTimeout&&clearTimeout(this._stickyColumnsReplayTimeout),this._stickyColumnsReplayTimeout=setTimeout(()=>{for(let i of this._updatedStickyColumnsParamsToReplay)this.updateStickyColumns(i.rows,i.stickyStartStates,i.stickyEndStates,!0,!1);this._updatedStickyColumnsParamsToReplay=[],this._stickyColumnsReplayTimeout=null},0))}};function UU(n){return["cdk-cell","cdk-header-cell","cdk-footer-cell"].some(e=>n.classList.contains(e))}var _p=new _e("CDK_SPL");var XS=(()=>{class n{viewContainer=L(ei);elementRef=L(Xe);constructor(){let t=L(br);t._rowOutlet=this,t._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","rowOutlet",""]]})}return n})(),ZS=(()=>{class n{viewContainer=L(ei);elementRef=L(Xe);constructor(){let t=L(br);t._headerRowOutlet=this,t._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","headerRowOutlet",""]]})}return n})(),KS=(()=>{class n{viewContainer=L(ei);elementRef=L(Xe);constructor(){let t=L(br);t._footerRowOutlet=this,t._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","footerRowOutlet",""]]})}return n})(),JS=(()=>{class n{viewContainer=L(ei);elementRef=L(Xe);constructor(){let t=L(br);t._noDataRowOutlet=this,t._outletAssigned()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["","noDataRowOutlet",""]]})}return n})();var eb=(()=>{class n{_differs=L(Br);_changeDetectorRef=L(wn);_elementRef=L(Xe);_dir=L(Si,{optional:!0});_platform=L(Wt);_viewRepeater=L(Td);_coalescedStyleScheduler=L(bp);_viewportRuler=L(xd);_stickyPositioningListener=L(_p,{optional:!0,skipSelf:!0});_document=L(bt);_data;_onDestroy=new Oe;_renderRows;_renderChangeSubscription;_columnDefsByName=new Map;_rowDefs;_headerRowDefs;_footerRowDefs;_dataDiffer;_defaultRowDef;_customColumnDefs=new Set;_customRowDefs=new Set;_customHeaderRowDefs=new Set;_customFooterRowDefs=new Set;_customNoDataRow;_headerRowDefChanged=!0;_footerRowDefChanged=!0;_stickyColumnStylesNeedReset=!0;_forceRecalculateCellWidths=!0;_cachedRenderRowsMap=new Map;_isNativeHtmlTable;_stickyStyler;stickyCssClass="cdk-table-sticky";needsPositionStickyOnElement=!0;_isServer;_isShowingNoDataRow=!1;_hasAllOutlets=!1;_hasInitialized=!1;_getCellRole(){if(this._cellRoleInternal===void 0){let t=this._elementRef.nativeElement.getAttribute("role");return t==="grid"||t==="treegrid"?"gridcell":"cell"}return this._cellRoleInternal}_cellRoleInternal=void 0;get trackBy(){return this._trackByFn}set trackBy(t){this._trackByFn=t}_trackByFn;get dataSource(){return this._dataSource}set dataSource(t){this._dataSource!==t&&this._switchDataSource(t)}_dataSource;get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(t){this._multiTemplateDataRows=t,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}_multiTemplateDataRows=!1;get fixedLayout(){return this._fixedLayout}set fixedLayout(t){this._fixedLayout=t,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}_fixedLayout=!1;contentChanged=new wt;viewChange=new Ri({start:0,end:Number.MAX_VALUE});_rowOutlet;_headerRowOutlet;_footerRowOutlet;_noDataRowOutlet;_contentColumnDefs;_contentRowDefs;_contentHeaderRowDefs;_contentFooterRowDefs;_noDataRow;_injector=L(Lt);constructor(){L(new io("role"),{optional:!0})||this._elementRef.nativeElement.setAttribute("role","table"),this._isServer=!this._platform.isBrowser,this._isNativeHtmlTable=this._elementRef.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((t,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Xn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(t=>{t?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),np(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let t=this._dataDiffer.diff(this._renderRows);if(!t){this._updateNoDataRow(),this.contentChanged.next();return}let i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(t,i,(o,s,l)=>this._getEmbeddedViewArgs(o.item,l),o=>o.item.data,o=>{o.operation===Rl.INSERTED&&o.context&&this._renderCellTemplateForItem(o.record.item.rowDef,o.context)}),this._updateRowIndexContext(),t.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);s.context.$implicit=o.item.data}),this._updateNoDataRow(),Fr(()=>{this.updateStickyColumnStyles()},{injector:this._injector}),this.contentChanged.next()}addColumnDef(t){this._customColumnDefs.add(t)}removeColumnDef(t){this._customColumnDefs.delete(t)}addRowDef(t){this._customRowDefs.add(t)}removeRowDef(t){this._customRowDefs.delete(t)}addHeaderRowDef(t){this._customHeaderRowDefs.add(t),this._headerRowDefChanged=!0}removeHeaderRowDef(t){this._customHeaderRowDefs.delete(t),this._headerRowDefChanged=!0}addFooterRowDef(t){this._customFooterRowDefs.add(t),this._footerRowDefChanged=!0}removeFooterRowDef(t){this._customFooterRowDefs.delete(t),this._footerRowDefChanged=!0}setNoDataRow(t){this._customNoDataRow=t}updateStickyHeaderRowStyles(){let t=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let o=eM(this._headerRowOutlet,"thead");o&&(o.style.display=t.length?"":"none")}let i=this._headerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["top"]),this._stickyStyler.stickRows(t,i,"top"),this._headerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyFooterRowStyles(){let t=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let o=eM(this._footerRowOutlet,"tfoot");o&&(o.style.display=t.length?"":"none")}let i=this._footerRowDefs.map(o=>o.sticky);this._stickyStyler.clearStickyPositioning(t,["bottom"]),this._stickyStyler.stickRows(t,i,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,i),this._footerRowDefs.forEach(o=>o.resetStickyChanged())}updateStickyColumnStyles(){let t=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),o=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...t,...i,...o],["left","right"]),this._stickyColumnStylesNeedReset=!1),t.forEach((s,l)=>{this._addStickyColumnStyles([s],this._headerRowDefs[l])}),this._rowDefs.forEach(s=>{let l=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&l.push(i[d]);this._addStickyColumnStyles(l,s)}),o.forEach((s,l)=>{this._addStickyColumnStyles([s],this._footerRowDefs[l])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let t=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let o=0;o<this._data.length;o++){let s=this._data[o],l=this._getRenderRowsForData(s,o,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<l.length;d++){let f=l[d],p=this._cachedRenderRowsMap.get(f.data);p.has(f.rowDef)?p.get(f.rowDef).push(f):p.set(f.rowDef,[f]),t.push(f)}}return t}_getRenderRowsForData(t,i,o){return this._getRowDefs(t,i).map(l=>{let d=o&&o.has(l)?o.get(l):[];if(d.length){let f=d.shift();return f.dataIndex=i,f}else return{data:t,rowDef:l,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),yp(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=yp(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=yp(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=yp(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let t=this._rowDefs.filter(i=>!i.when);!this.multiTemplateDataRows&&t.length>1,this._defaultRowDef=t[0]}_renderUpdatedColumns(){let t=(l,d)=>{let f=!!d.getColumnsDiff();return l||f},i=this._rowDefs.reduce(t,!1);i&&this._forceRenderDataRows();let o=this._headerRowDefs.reduce(t,!1);o&&this._forceRenderHeaderRows();let s=this._footerRowDefs.reduce(t,!1);return s&&this._forceRenderFooterRows(),i||o||s}_switchDataSource(t){this._data=[],np(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),t||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=t}_observeRenderChanges(){if(!this.dataSource)return;let t;np(this.dataSource)?t=this.dataSource.connect(this):Va(this.dataSource)?t=this.dataSource:Array.isArray(this.dataSource)&&(t=dn(this.dataSource)),this._renderChangeSubscription=t.pipe(Xn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((t,i)=>this._renderRow(this._headerRowOutlet,t,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((t,i)=>this._renderRow(this._footerRowOutlet,t,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(t,i){let o=Array.from(i.columns||[]).map(d=>{let f=this._columnDefsByName.get(d);return f}),s=o.map(d=>d.sticky),l=o.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(t,s,l,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(t){let i=[];for(let o=0;o<t.viewContainer.length;o++){let s=t.viewContainer.get(o);i.push(s.rootNodes[0])}return i}_getRowDefs(t,i){if(this._rowDefs.length==1)return[this._rowDefs[0]];let o=[];if(this.multiTemplateDataRows)o=this._rowDefs.filter(s=>!s.when||s.when(i,t));else{let s=this._rowDefs.find(l=>l.when&&l.when(i,t))||this._defaultRowDef;s&&o.push(s)}return o.length,o}_getEmbeddedViewArgs(t,i){let o=t.rowDef,s={$implicit:t.data};return{templateRef:o.template,context:s,index:i}}_renderRow(t,i,o,s={}){let l=t.viewContainer.createEmbeddedView(i.template,s,o);return this._renderCellTemplateForItem(i,s),l}_renderCellTemplateForItem(t,i){for(let o of this._getCellTemplates(t))_a.mostRecentCellOutlet&&_a.mostRecentCellOutlet._viewContainer.createEmbeddedView(o,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let t=this._rowOutlet.viewContainer;for(let i=0,o=t.length;i<o;i++){let l=t.get(i).context;l.count=o,l.first=i===0,l.last=i===o-1,l.even=i%2===0,l.odd=!l.even,this.multiTemplateDataRows?(l.dataIndex=this._renderRows[i].dataIndex,l.renderIndex=i):l.index=this._renderRows[i].dataIndex}}_getCellTemplates(t){return!t||!t.columns?[]:Array.from(t.columns,i=>{let o=this._columnDefsByName.get(i);return t.extractCellTemplate(o)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let t=(i,o)=>i||o.hasStickyChanged();this._headerRowDefs.reduce(t,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(t,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(t,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let t=this._dir?this._dir.value:"ltr";this._stickyStyler=new zS(this._isNativeHtmlTable,this.stickyCssClass,t,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:dn()).pipe(Xn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(t){return t.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){let t=this._customNoDataRow||this._noDataRow;if(!t)return;let i=this._rowOutlet.viewContainer.length===0;if(i===this._isShowingNoDataRow)return;let o=this._noDataRowOutlet.viewContainer;if(i){let s=o.createEmbeddedView(t.templateRef),l=s.rootNodes[0];s.rootNodes.length===1&&l?.nodeType===this._document.ELEMENT_NODE&&(l.setAttribute("role","row"),l.classList.add(t._contentClassName))}else o.clear();this._isShowingNoDataRow=i,this._changeDetectorRef.markForCheck()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(i,o,s){if(i&1&&(Gn(s,rM,5),Gn(s,ql,5),Gn(s,wp,5),Gn(s,kd,5),Gn(s,WS,5)),i&2){let l;at(l=lt())&&(o._noDataRow=l.first),at(l=lt())&&(o._contentColumnDefs=l),at(l=lt())&&(o._contentRowDefs=l),at(l=lt())&&(o._contentHeaderRowDefs=l),at(l=lt())&&(o._contentFooterRowDefs=l)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(i,o){i&2&&Ut("cdk-table-fixed-layout",o.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[2,"multiTemplateDataRows","multiTemplateDataRows",ht],fixedLayout:[2,"fixedLayout","fixedLayout",ht]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[Kt([{provide:br,useExisting:n},{provide:Td,useClass:Ol},{provide:bp,useClass:HS},{provide:_p,useValue:null}]),Xt],ngContentSelectors:LU,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,o){i&1&&(ti(kU),Zt(0),Zt(1,1),ut(2,NU,1,0)(3,VU,7,0)(4,BU,4,0)),i&2&&(qe(2),jt(o._isServer?2:-1),qe(),jt(o._isNativeHtmlTable?3:4))},dependencies:[ZS,XS,JS,KS],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}return n})();function yp(n,e){return n.concat(Array.from(e))}function eM(n,e){let t=e.toUpperCase(),i=n.viewContainer.element.nativeElement;for(;i;){let o=i.nodeType===1?i.nodeName:null;if(o===t)return i;if(o==="TABLE")break;i=i.parentNode}return null}var oM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[Ad]})}return n})();var qU=[[["caption"]],[["colgroup"],["col"]],"*"],GU=["caption","colgroup, col","*"];function jU(n,e){n&1&&Zt(0,2)}function zU(n,e){n&1&&(Me(0,"thead",0),vi(1,1),Fe(),Me(2,"tbody",2),vi(3,3)(4,4),Fe(),Me(5,"tfoot",0),vi(6,5),Fe())}function HU(n,e){n&1&&vi(0,1)(1,3)(2,4)(3,5)}var sM=(()=>{class n extends eb{stickyCssClass="mat-mdc-table-sticky";needsPositionStickyOnElement=!1;static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275cmp=ot({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(i,o){i&2&&Ut("mdc-table-fixed-layout",o.fixedLayout)},exportAs:["matTable"],features:[Kt([{provide:eb,useExisting:n},{provide:br,useExisting:n},{provide:bp,useClass:HS},{provide:Td,useClass:Ol},{provide:_p,useValue:null}]),Gt],ngContentSelectors:GU,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(i,o){i&1&&(ti(qU),Zt(0),Zt(1,1),ut(2,jU,1,0)(3,zU,7,0)(4,HU,4,0)),i&2&&(qe(2),jt(o._isServer?2:-1),qe(),jt(o._isNativeHtmlTable?3:4))},dependencies:[ZS,XS,JS,KS],styles:[".mat-mdc-table-sticky{position:sticky !important}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{min-width:100%;border:0;border-spacing:0;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color, var(--mat-sys-surface))}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell{text-align:right}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-header-headline-font, var(--mat-sys-title-small-font, Roboto, sans-serif));line-height:var(--mat-table-header-headline-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-table-header-headline-size, var(--mat-sys-title-small-size, 14px));font-weight:var(--mat-table-header-headline-weight, var(--mat-sys-title-small-weight, 500))}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-row-item-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-row-item-label-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-row-item-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mat-table-footer-supporting-text-font, var(--mat-sys-body-medium-font, Roboto, sans-serif));line-height:var(--mat-table-footer-supporting-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-table-footer-supporting-text-size, var(--mat-sys-body-medium-size, 14px));font-weight:var(--mat-table-footer-supporting-text-weight, var(--mat-sys-body-medium-weight));letter-spacing:var(--mat-table-footer-supporting-text-tracking, var(--mat-sys-body-medium-tracking))}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking, var(--mat-sys-title-small-tracking));font-weight:inherit;line-height:inherit;box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mat-mdc-header-cell{text-align:right}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, var(--mat-sys-outline, rgba(0, 0, 0, 0.12)));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking));line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking, var(--mat-sys-body-medium-tracking))}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}return n})(),aM=(()=>{class n extends Dp{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","matCellDef",""]],features:[Kt([{provide:Dp,useExisting:n}]),Gt]})}return n})(),lM=(()=>{class n extends Cp{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","matHeaderCellDef",""]],features:[Kt([{provide:Cp,useExisting:n}]),Gt]})}return n})();var cM=(()=>{class n extends ql{get name(){return this._name}set name(t){this._setNameInput(t)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","matColumnDef",""]],inputs:{name:[0,"matColumnDef","name"]},features:[Kt([{provide:ql,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),Gt]})}return n})(),dM=(()=>{class n extends nM{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[Gt]})}return n})();var uM=(()=>{class n extends iM{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[Gt]})}return n})();var hM=(()=>{class n extends kd{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[0,"matHeaderRowDef","columns"],sticky:[2,"matHeaderRowDefSticky","sticky",ht]},features:[Kt([{provide:kd,useExisting:n}]),Xt,Gt]})}return n})();var fM=(()=>{class n extends wp{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275dir=Ne({type:n,selectors:[["","matRowDef",""]],inputs:{columns:[0,"matRowDefColumns","columns"],when:[0,"matRowDefWhen","when"]},features:[Kt([{provide:wp,useExisting:n}]),Gt]})}return n})(),mM=(()=>{class n extends $S{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275cmp=ot({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[Kt([{provide:$S,useExisting:n}]),Gt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,o){i&1&&vi(0,0)},dependencies:[_a],encapsulation:2})}return n})();var pM=(()=>{class n extends YS{static \u0275fac=(()=>{let t;return function(o){return(t||(t=qn(n)))(o||n)}})();static \u0275cmp=ot({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[Kt([{provide:YS,useExisting:n}]),Gt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(i,o){i&1&&vi(0,0)},dependencies:[_a],encapsulation:2})}return n})();var gM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,oM,on]})}return n})(),QU=9007199254740991,Ip=class extends ep{_data;_renderData=new Ri([]);_filter=new Ri("");_internalPageChanges=new Oe;_renderChangesSubscription=null;filteredData;get data(){return this._data.value}set data(e){e=Array.isArray(e)?e:[],this._data.next(e),this._renderChangesSubscription||this._filterData(e)}get filter(){return this._filter.value}set filter(e){this._filter.next(e),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(e){this._sort=e,this._updateChangeSubscription()}_sort;get paginator(){return this._paginator}set paginator(e){this._paginator=e,this._updateChangeSubscription()}_paginator;sortingDataAccessor=(e,t)=>{let i=e[t];if(hS(i)){let o=Number(i);return o<QU?o:i}return i};sortData=(e,t)=>{let i=t.active,o=t.direction;return!i||o==""?e:e.sort((s,l)=>{let d=this.sortingDataAccessor(s,i),f=this.sortingDataAccessor(l,i),p=typeof d,g=typeof f;p!==g&&(p==="number"&&(d+=""),g==="number"&&(f+=""));let y=0;return d!=null&&f!=null?d>f?y=1:d<f&&(y=-1):d!=null?y=1:f!=null&&(y=-1),y*(o=="asc"?1:-1)})};filterPredicate=(e,t)=>{let i=Object.keys(e).reduce((s,l)=>s+e[l]+"\u25EC","").toLowerCase(),o=t.trim().toLowerCase();return i.indexOf(o)!=-1};constructor(e=[]){super(),this._data=new Ri(e),this._updateChangeSubscription()}_updateChangeSubscription(){let e=this._sort?Ii(this._sort.sortChange,this._sort.initialized):dn(null),t=this._paginator?Ii(this._paginator.page,this._internalPageChanges,this._paginator.initialized):dn(null),i=this._data,o=Ls([i,this._filter]).pipe(mt(([d])=>this._filterData(d))),s=Ls([o,e]).pipe(mt(([d])=>this._orderData(d))),l=Ls([s,t]).pipe(mt(([d])=>this._pageData(d)));this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=l.subscribe(d=>this._renderData.next(d))}_filterData(e){return this.filteredData=this.filter==null||this.filter===""?e:e.filter(t=>this.filterPredicate(t,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(e){return this.sort?this.sortData(e.slice(),this.sort):e}_pageData(e){if(!this.paginator)return e;let t=this.paginator.pageIndex*this.paginator.pageSize;return e.slice(t,t+this.paginator.pageSize)}_updatePaginator(e){Promise.resolve().then(()=>{let t=this.paginator;if(t&&(t.length=e,t.pageIndex>0)){let i=Math.ceil(t.length/t.pageSize)-1||0,o=Math.min(t.pageIndex,i);o!==t.pageIndex&&(t.pageIndex=o,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){this._renderChangesSubscription?.unsubscribe(),this._renderChangesSubscription=null}};var Lp=new _e("");function ys(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function CM(n){return n!=null&&typeof n.length=="number"}var wM=new _e(""),IM=new _e(""),$U=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Tp=class{static min(e){return YU(e)}static max(e){return XU(e)}static required(e){return ZU(e)}static requiredTrue(e){return KU(e)}static email(e){return JU(e)}static minLength(e){return eq(e)}static maxLength(e){return tq(e)}static pattern(e){return nq(e)}static nullValidator(e){return EM(e)}static compose(e){return OM(e)}static composeAsync(e){return PM(e)}};function YU(n){return e=>{if(ys(e.value)||ys(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function XU(n){return e=>{if(ys(e.value)||ys(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function ZU(n){return ys(n.value)?{required:!0}:null}function KU(n){return n.value===!0?null:{required:!0}}function JU(n){return ys(n.value)||$U.test(n.value)?null:{email:!0}}function eq(n){return e=>ys(e.value)||!CM(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function tq(n){return e=>CM(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function nq(n){if(!n)return EM;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(ys(i.value))return null;let o=i.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}function EM(n){return null}function TM(n){return n!=null}function xM(n){return Bc(n)?pi(n):n}function AM(n){let e={};return n.forEach(t=>{e=t!=null?we(we({},e),t):e}),Object.keys(e).length===0?null:e}function MM(n,e){return e.map(t=>t(n))}function iq(n){return!n.validate}function RM(n){return n.map(e=>iq(e)?e:t=>e.validate(t))}function OM(n){if(!n)return null;let e=n.filter(TM);return e.length==0?null:function(t){return AM(MM(t,e))}}function ob(n){return n!=null?OM(RM(n)):null}function PM(n){if(!n)return null;let e=n.filter(TM);return e.length==0?null:function(t){let i=MM(t,e).map(xM);return uc(i).pipe(mt(AM))}}function sb(n){return n!=null?PM(RM(n)):null}function yM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function FM(n){return n._rawValidators}function kM(n){return n._rawAsyncValidators}function tb(n){return n?Array.isArray(n)?n:[n]:[]}function xp(n,e){return Array.isArray(n)?n.includes(e):n===e}function vM(n,e){let t=tb(e);return tb(n).forEach(o=>{xp(t,o)||t.push(o)}),t}function SM(n,e){return tb(e).filter(t=>!xp(n,t))}var Ap=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ob(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},zl=class extends Ap{name;get formDirective(){return null}get path(){return null}},Mp=class extends Ap{_parent=null;name=null;valueAccessor=null};var rq={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},gie=Bt(we({},rq),{"[class.ng-submitted]":"isSubmitted"});var Ld="VALID",Ep="INVALID",Gl="PENDING",Nd="DISABLED",vs=class{},Rp=class extends vs{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Bd=class extends vs{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ud=class extends vs{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},jl=class extends vs{status;source;constructor(e,t){super(),this.status=e,this.source=t}},nb=class extends vs{source;constructor(e){super(),this.source=e}},ib=class extends vs{source;constructor(e){super(),this.source=e}};function LM(n){return(Np(n)?n.validators:n)||null}function oq(n){return Array.isArray(n)?ob(n):n||null}function NM(n,e){return(Np(e)?e.asyncValidators:n)||null}function sq(n){return Array.isArray(n)?sb(n):n||null}function Np(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function aq(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ae(1e3,"");if(!i[t])throw new Ae(1001,"")}function lq(n,e,t){n._forEachChild((i,o)=>{if(t[o]===void 0)throw new Ae(1002,"")})}var Op=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Xi(this.statusReactive)}set status(e){Xi(()=>this.statusReactive.set(e))}_status=mo(()=>this.statusReactive());statusReactive=Lr(void 0);get valid(){return this.status===Ld}get invalid(){return this.status===Ep}get pending(){return this.status==Gl}get disabled(){return this.status===Nd}get enabled(){return this.status!==Nd}errors;get pristine(){return Xi(this.pristineReactive)}set pristine(e){Xi(()=>this.pristineReactive.set(e))}_pristine=mo(()=>this.pristineReactive());pristineReactive=Lr(!0);get dirty(){return!this.pristine}get touched(){return Xi(this.touchedReactive)}set touched(e){Xi(()=>this.touchedReactive.set(e))}_touched=mo(()=>this.touchedReactive());touchedReactive=Lr(!1);get untouched(){return!this.touched}_events=new Oe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SM(e,this._rawAsyncValidators))}hasValidator(e){return xp(this._rawValidators,e)}hasAsyncValidator(e){return xp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Bt(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Ud(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new Ud(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Bt(we({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new Bd(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new Bd(!0,i))}markAsPending(e={}){this.status=Gl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new jl(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Bt(we({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nd,this.errors=null,this._forEachChild(o=>{o.disable(Bt(we({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rp(this.value,i)),this._events.next(new jl(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Bt(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ld,this._forEachChild(i=>{i.enable(Bt(we({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Bt(we({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ld||this.status===Gl)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rp(this.value,t)),this._events.next(new jl(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Bt(we({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nd:Ld}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Gl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=xM(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new jl(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new wt,this.statusChanges=new wt}_calculateStatus(){return this._allControlsDisabled()?Nd:this.errors?Ep:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gl)?Gl:this._anyControlsHaveStatus(Ep)?Ep:Ld}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new Bd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ud(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=oq(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sq(this._rawAsyncValidators)}},Pp=class extends Op{constructor(e,t,i){super(LM(t),NM(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lq(this,!0,e),Object.keys(e).forEach(i=>{aq(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let o=this.controls[i];o&&o.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,o)=>{i.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,o)=>((i.enabled||this.disabled)&&(t[o]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((o,s)=>{i=t(i,o,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var ab=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>lb}),lb="always";function rb(n,e,t=lb){cb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),dq(n,e),hq(n,e),uq(n,e),cq(n,e)}function bM(n,e,t=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),kp(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Fp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function cq(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function cb(n,e){let t=FM(n);e.validator!==null?n.setValidators(yM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=kM(n);e.asyncValidator!==null?n.setAsyncValidators(yM(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();Fp(e._rawValidators,o),Fp(e._rawAsyncValidators,o)}function kp(n,e){let t=!1;if(n!==null){if(e.validator!==null){let o=FM(n);if(Array.isArray(o)&&o.length>0){let s=o.filter(l=>l!==e.validator);s.length!==o.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let o=kM(n);if(Array.isArray(o)&&o.length>0){let s=o.filter(l=>l!==e.asyncValidator);s.length!==o.length&&(t=!0,n.setAsyncValidators(s))}}}let i=()=>{};return Fp(e._rawValidators,i),Fp(e._rawAsyncValidators,i),t}function dq(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&VM(n,e)})}function uq(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&VM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function VM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function hq(n,e){let t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function BM(n,e){n==null,cb(n,e)}function fq(n,e){return kp(n,e)}function UM(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function mq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var pq={provide:zl,useExisting:Pr(()=>db)},Vd=Promise.resolve(),db=(()=>{class n extends zl{callSetDisabledState;get submitted(){return Xi(this.submittedReactive)}_submitted=mo(()=>this.submittedReactive());submittedReactive=Lr(!1);_directives=new Set;form;ngSubmit=new wt;options;constructor(t,i,o){super(),this.callSetDisabledState=o,this.form=new Pp({},ob(t),sb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Vd.then(()=>{let i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),rb(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Vd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Vd.then(()=>{let i=this._findContainer(t.path),o=new Pp({});BM(o,t),i.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Vd.then(()=>{let i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Vd.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),UM(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(i){return new(i||n)(bn(wM,10),bn(IM,10),bn(ab,8))};static \u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&nn("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kt([pq]),Gt]})}return n})();function _M(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var gq=class extends Op{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,i){super(LM(t),NM(i,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Np(t)&&(t.nonNullable||t.initialValueIsDefault)&&(DM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_M(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_M(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yq=n=>n instanceof gq;var vq={provide:zl,useExisting:Pr(()=>ub)},ub=(()=>{class n extends zl{callSetDisabledState;get submitted(){return Xi(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=mo(()=>this._submittedReactive());_submittedReactive=Lr(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new wt;constructor(t,i,o){super(),this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let i=this.form.get(t.path);return rb(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){bM(t.control||null,t,!1),mq(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this._submittedReactive.set(!0),UM(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new nb(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new ib(this.form))}_updateDomValue(){this.directives.forEach(t=>{let i=t.control,o=this.form.get(t.path);i!==o&&(bM(i||null,t),yq(o)&&(rb(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let i=this.form.get(t.path);BM(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let i=this.form.get(t.path);i&&fq(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){cb(this.form,this),this._oldForm&&kp(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||n)(bn(wM,10),bn(IM,10),bn(ab,8))};static \u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(i,o){i&1&&nn("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Kt([vq]),Gt,ci]})}return n})();var Sq=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})();var qM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ab,useValue:t.callSetDisabledState??lb}]}}static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[Sq]})}return n})();var bq=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,o){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return n})(),GM=ms({passive:!0}),jM=(()=>{class n{_platform=L(Wt);_ngZone=L(Ue);_styleLoader=L(Gi);_monitoredElements=new Map;constructor(){}monitor(t){if(!this._platform.isBrowser)return Fs;this._styleLoader.load(bq);let i=tr(t),o=this._monitoredElements.get(i);if(o)return o.subject;let s=new Oe,l="cdk-text-field-autofilled",d=f=>{f.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(l)?(i.classList.add(l),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!0}))):f.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(l)&&(i.classList.remove(l),this._ngZone.run(()=>s.next({target:f.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,GM),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,GM)}}),s}stopMonitoring(t){let i=tr(t),o=this._monitoredElements.get(i);o&&(o.unlisten(),o.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var zM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({})}return n})();var hb=class{_box;_destroyed=new Oe;_resizeSubject=new Oe;_resizeObserver;_elementObservables=new Map;constructor(e){this._box=e,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Ke(t=>{let i=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(yn(t=>t.some(i=>i.target===e)),Xu({bufferSize:1,refCount:!0}),Xn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},HM=(()=>{class n{_observers=new Map;_ngZone=L(Ue);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,t]of this._observers)t.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(t,i){let o=i?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new hb(o)),this._observers.get(o).observe(t)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _q=["notch"],Dq=["matFormFieldNotchedOutline",""],Cq=["*"],wq=["textField"],Iq=["iconPrefixContainer"],Eq=["textPrefixContainer"],Tq=["iconSuffixContainer"],xq=["textSuffixContainer"],Aq=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Mq=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Rq(n,e){n&1&&Ot(0,"span",21)}function Oq(n,e){if(n&1&&(Me(0,"label",20),Zt(1,1),ut(2,Rq,1,0,"span",21),Fe()),n&2){let t=mn(2);Ft("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),fn("for",t._control.disableAutomaticLabeling?null:t._control.id),qe(2),jt(!t.hideRequiredMarker&&t._control.required?2:-1)}}function Pq(n,e){if(n&1&&ut(0,Oq,3,5,"label",20),n&2){let t=mn();jt(t._hasFloatingLabel()?0:-1)}}function Fq(n,e){n&1&&Ot(0,"div",7)}function kq(n,e){}function Lq(n,e){if(n&1&&ut(0,kq,0,0,"ng-template",13),n&2){mn(2);let t=qc(1);Ft("ngTemplateOutlet",t)}}function Nq(n,e){if(n&1&&(Me(0,"div",9),ut(1,Lq,1,1,null,13),Fe()),n&2){let t=mn();Ft("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),qe(),jt(t._forceDisplayInfixLabel()?-1:1)}}function Vq(n,e){n&1&&(Me(0,"div",10,2),Zt(2,2),Fe())}function Bq(n,e){n&1&&(Me(0,"div",11,3),Zt(2,3),Fe())}function Uq(n,e){}function qq(n,e){if(n&1&&ut(0,Uq,0,0,"ng-template",13),n&2){mn();let t=qc(1);Ft("ngTemplateOutlet",t)}}function Gq(n,e){n&1&&(Me(0,"div",14,4),Zt(2,4),Fe())}function jq(n,e){n&1&&(Me(0,"div",15,5),Zt(2,5),Fe())}function zq(n,e){n&1&&Ot(0,"div",16)}function Hq(n,e){if(n&1&&(Me(0,"div",18),Zt(1,6),Fe()),n&2){let t=mn();Ft("@transitionMessages",t._subscriptAnimationState)}}function Qq(n,e){if(n&1&&(Me(0,"mat-hint",22),_n(1),Fe()),n&2){let t=mn(2);Ft("id",t._hintLabelId),qe(),fo(t.hintLabel)}}function Wq(n,e){if(n&1&&(Me(0,"div",19),ut(1,Qq,2,2,"mat-hint",22),Zt(2,7),Ot(3,"div",23),Zt(4,8),Fe()),n&2){let t=mn();Ft("@transitionMessages",t._subscriptAnimationState),qe(),jt(t.hintLabel?1:-1)}}var QM=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["mat-label"]]})}return n})(),$q=new _e("MatError");var WM=(()=>{class n{align="start";id=L(hi).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,o){i&2&&(ho("id",o.id),fn("align",null),Ut("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"}})}return n})(),Yq=new _e("MatPrefix");var Xq=new _e("MatSuffix");var e5=new _e("FloatingLabelParent"),$M=(()=>{class n{_elementRef=L(Xe);get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=L(HM);_ngZone=L(Ue);_parent=L(e5);_resizeSubscription=new Yt;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return Zq(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,o){i&2&&Ut("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return n})();function Zq(n){let e=n;if(e.offsetParent!==null)return e.scrollWidth;let t=e.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);let i=t.scrollWidth;return t.remove(),i}var YM="mdc-line-ripple--active",Vp="mdc-line-ripple--deactivating",XM=(()=>{class n{_elementRef=L(Xe);constructor(){L(Ue).runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let t=this._elementRef.nativeElement.classList;t.remove(Vp),t.add(YM)}deactivate(){this._elementRef.nativeElement.classList.add(Vp)}_handleTransitionEnd=t=>{let i=this._elementRef.nativeElement.classList,o=i.contains(Vp);t.propertyName==="opacity"&&o&&i.remove(YM,Vp)};ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return n})(),ZM=(()=>{class n{_elementRef=L(Xe);_ngZone=L(Ue);open=!1;_notch;constructor(){}ngAfterViewInit(){let t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){!this.open||!t?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,o){if(i&1&&pn(_q,5),i&2){let s;at(s=lt())&&(o._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,o){i&2&&Ut("mdc-notched-outline--notched",o.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:Dq,ngContentSelectors:Cq,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,o){i&1&&(ti(),Ot(0,"div",1),Me(1,"div",2,0),Zt(3),Fe(),Ot(4,"div",3))},encapsulation:2,changeDetection:0})}return n})(),Kq={transitionMessages:rE("transitionMessages",[aE("enter",ll({opacity:1,transform:"translateY(0%)"})),lE("void => enter",[ll({opacity:0,transform:"translateY(-5px)"}),oE("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},fb=(()=>{class n{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n})}return n})();var mb=new _e("MatFormField"),Jq=new _e("MAT_FORM_FIELD_DEFAULT_OPTIONS"),KM="fill",eG="auto",JM="fixed",tG="translateY(-50%)",t5=(()=>{class n{_elementRef=L(Xe);_changeDetectorRef=L(wn);_dir=L(Si);_platform=L(Wt);_idGenerator=L(hi);_defaults=L(Jq,{optional:!0});_animationMode=L(Zn,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=Ww(QM);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Tl(t)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||eG}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(t){let i=this._appearance,o=t||this._defaults?.appearance||KM;this._appearance=o,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=KM;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||JM}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||JM}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}_destroyed=new Oe;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=L(Lt);constructor(){let t=this._defaults;t&&(t.appearance&&(this.appearance=t.appearance),this._hideRequiredMarker=!!t?.hideRequiredMarker,t.color&&(this.color=t.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=mo(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(t){let i=this._control,o="mat-mdc-form-field-type-";t&&this._elementRef.nativeElement.classList.remove(o+t.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(o+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(xr([void 0,void 0]),mt(()=>[i.errorState,i.userAriaDescribedBy]),Yu(),yn(([[s,l],[d,f]])=>s!==d||l!==f)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(Xn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ii(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),kc(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Xn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=mo(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(t){let i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&t.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,o=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),o&&t.push(o.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let t=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){t.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let i=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,l=this._textSuffixContainer?.nativeElement,d=i?.getBoundingClientRect().width??0,f=o?.getBoundingClientRect().width??0,p=s?.getBoundingClientRect().width??0,g=l?.getBoundingClientRect().width??0,y=this._dir.value==="rtl"?"-1":"1",D=`${d+f}px`,C=`calc(${y} * (${D} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;t.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${tG} translateX(${C})
    )`;let w=d+f+p+g;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${w}px)`)}_isAttachedToDom(){let t=this._elementRef.nativeElement;if(t.getRootNode){let i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-form-field"]],contentQueries:function(i,o,s){if(i&1&&(pI(s,o._labelChild,QM,5),Gn(s,fb,5),Gn(s,Yq,5),Gn(s,Xq,5),Gn(s,$q,5),Gn(s,WM,5)),i&2){gI();let l;at(l=lt())&&(o._formFieldControl=l.first),at(l=lt())&&(o._prefixChildren=l),at(l=lt())&&(o._suffixChildren=l),at(l=lt())&&(o._errorChildren=l),at(l=lt())&&(o._hintChildren=l)}},viewQuery:function(i,o){if(i&1&&(pn(wq,5),pn(Iq,5),pn(Eq,5),pn(Tq,5),pn(xq,5),pn($M,5),pn(ZM,5),pn(XM,5)),i&2){let s;at(s=lt())&&(o._textField=s.first),at(s=lt())&&(o._iconPrefixContainer=s.first),at(s=lt())&&(o._textPrefixContainer=s.first),at(s=lt())&&(o._iconSuffixContainer=s.first),at(s=lt())&&(o._textSuffixContainer=s.first),at(s=lt())&&(o._floatingLabel=s.first),at(s=lt())&&(o._notchedOutline=s.first),at(s=lt())&&(o._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,o){i&2&&Ut("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Kt([{provide:mb,useExisting:n},{provide:e5,useExisting:n}])],ngContentSelectors:Mq,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,o){if(i&1){let s=ra();ti(Aq),ut(0,Pq,1,1,"ng-template",null,0,vI),Me(2,"div",6,1),nn("click",function(d){return Js(s),ea(o._control.onContainerClick(d))}),ut(4,Fq,1,0,"div",7),Me(5,"div",8),ut(6,Nq,2,2,"div",9)(7,Vq,3,0,"div",10)(8,Bq,3,0,"div",11),Me(9,"div",12),ut(10,qq,1,1,null,13),Zt(11),Fe(),ut(12,Gq,3,0,"div",14)(13,jq,3,0,"div",15),Fe(),ut(14,zq,1,0,"div",16),Fe(),Me(15,"div",17),ut(16,Hq,2,1,"div",18)(17,Wq,5,2,"div",19),Fe()}if(i&2){let s;qe(2),Ut("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),qe(2),jt(!o._hasOutline()&&!o._control.disabled?4:-1),qe(2),jt(o._hasOutline()?6:-1),qe(),jt(o._hasIconPrefix?7:-1),qe(),jt(o._hasTextPrefix?8:-1),qe(2),jt(!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),qe(2),jt(o._hasTextSuffix?12:-1),qe(),jt(o._hasIconSuffix?13:-1),qe(),jt(o._hasOutline()?-1:14),qe(),Ut("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),qe(),jt((s=o._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[$M,ZM,BI,XM,WM],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Kq.transitionMessages]},changeDetection:0})}return n})(),qd=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,sp,on]})}return n})();var iG=new _e("MAT_INPUT_VALUE_ACCESSOR"),rG=["button","checkbox","file","hidden","image","radio","range","reset","submit"],oG=new _e("MAT_INPUT_CONFIG"),n5=(()=>{class n{_elementRef=L(Xe);_platform=L(Wt);ngControl=L(Mp,{optional:!0,self:!0});_autofillMonitor=L(jM);_ngZone=L(Ue);_formField=L(mb,{optional:!0});_uid=L(hi).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_webkitBlinkWheelListenerAttached=!1;_config=L(oG,{optional:!0});_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new Oe;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(t){this._disabled=Tl(t),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(t){this._id=t||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator(Tp.required)??!1}set required(t){this._required=Tl(t)}_required;get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&pS().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(t){t!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(t):this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Tl(t)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>pS().has(t));constructor(){let t=L(db,{optional:!0}),i=L(ub,{optional:!0}),o=L(jA),s=L(iG,{optional:!0,self:!0}),l=this._elementRef.nativeElement,d=l.nodeName.toLowerCase();s?af(s.value)?this._signalBasedValueAccessor=s:this._inputValueAccessor=s:this._inputValueAccessor=l,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{l.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new fp(o,this.ngControl,i,t,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=d==="select",this._isTextarea=d==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=l.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&cf(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){if(t!==this.focused){if(!this._isNativeSelect&&t&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=t,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){let t=this._getPlaceholder();if(t!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){rG.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(t){let i=this._elementRef.nativeElement,o=i.getAttribute("aria-describedby"),s;if(o){let l=this._formFieldDescribedBy||t;s=t.concat(o.split(" ").filter(d=>d&&!l.includes(d)))}else s=t;this._formFieldDescribedBy=t,s.length?i.setAttribute("aria-describedby",s.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_iOSKeyupListener=t=>{let i=t.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,o){i&1&&nn("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),i&2&&(ho("id",o.id)("disabled",o.disabled&&!o.disabledInteractive)("required",o.required),fn("name",o.name||null)("readonly",o._getReadonlyAttribute())("aria-disabled",o.disabled&&o.disabledInteractive?"true":null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),Ut("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mat-mdc-input-disabled-interactive",o.disabledInteractive)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ht]},exportAs:["matInput"],features:[Kt([{provide:fb,useExisting:n}]),Xt,ci]})}return n})(),i5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,qd,qd,zM,on]})}return n})();var aG=["knob"],lG=["valueIndicatorContainer"];function cG(n,e){if(n&1&&(Me(0,"div",2,1)(2,"div",5)(3,"span",6),_n(4),Fe()()()),n&2){let t=mn();qe(4),fo(t.valueIndicatorText)}}var dG=["trackActive"],uG=["*"];function hG(n,e){if(n&1&&Ot(0,"div"),n&2){let t=e.$implicit,i=e.$index,o=mn(3);ts(t===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Nr("transform",o._calcTickMarkTransform(i))}}function fG(n,e){if(n&1&&hI(0,hG,1,4,"div",8,uI),n&2){let t=mn(2);fI(t._tickMarks)}}function mG(n,e){if(n&1&&(Me(0,"div",6,1),ut(2,fG,2,0),Fe()),n&2){let t=mn();qe(2),jt(t._cachedWidth?2:-1)}}function pG(n,e){if(n&1&&Ot(0,"mat-slider-visual-thumb",7),n&2){let t=mn();Ft("discrete",t.discrete)("thumbPosition",1)("valueIndicatorText",t.startValueIndicatorText)}}var nt=function(n){return n[n.START=1]="START",n[n.END=2]="END",n}(nt||{}),Hl=function(n){return n[n.ACTIVE=0]="ACTIVE",n[n.INACTIVE=1]="INACTIVE",n}(Hl||{}),pb=new _e("_MatSlider"),r5=new _e("_MatSliderThumb"),gG=new _e("_MatSliderRangeThumb"),o5=new _e("_MatSliderVisualThumb");var yG=(()=>{class n{_cdr=L(wn);_ngZone=L(Ue);_slider=L(pb);discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=L(Xe).nativeElement;_platform=L(Wt);constructor(){}ngAfterViewInit(){let t=this._slider._getInput(this.thumbPosition);t&&(this._ripple.radius=24,this._sliderInput=t,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl;i.addEventListener("pointermove",this._onPointerMove),i.addEventListener("pointerdown",this._onDragStart),i.addEventListener("pointerup",this._onDragEnd),i.addEventListener("pointerleave",this._onMouseLeave),i.addEventListener("focus",this._onFocus),i.addEventListener("blur",this._onBlur)}))}ngOnDestroy(){let t=this._sliderInputEl;t&&(t.removeEventListener("pointermove",this._onPointerMove),t.removeEventListener("pointerdown",this._onDragStart),t.removeEventListener("pointerup",this._onDragEnd),t.removeEventListener("pointerleave",this._onMouseLeave),t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur))}_onPointerMove=t=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),o=this._slider._isCursorOnSliderThumb(t,i);this._isHovered=o,o?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=t=>{t.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(t){return t?.state===bi.FADING_IN||t?.state===bi.VISIBLE}_showRipple(t,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===nt.START?nt.END:nt.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:t,centered:!0,persistent:!0})}_hideRipple(t){if(t?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===nt.START?nt.END:nt.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,o){if(i&1&&(pn(Fd,5),pn(aG,5),pn(lG,5)),i&2){let s;at(s=lt())&&(o._ripple=s.first),at(s=lt())&&(o._knob=s.first),at(s=lt())&&(o._valueIndicatorContainer=s.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[Kt([{provide:o5,useExisting:n}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,o){i&1&&(ut(0,cG,5,1,"div",2),Ot(1,"div",3,0)(3,"div",4)),i&2&&(jt(o.discrete?0:-1),qe(3),Ft("matRippleDisabled",!0))},dependencies:[Fd],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return n})(),s5=(()=>{class n{_ngZone=L(Ue);_cdr=L(wn);_elementRef=L(Xe);_dir=L(Si,{optional:!0});_globalRippleOptions=L(qS,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(t){this._disabled=t;let i=this._getInput(nt.END),o=this._getInput(nt.START);i&&(i.disabled=this._disabled),o&&(o.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(t){this._discrete=t,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(t){let i=isNaN(t)?this._min:t;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(t){let i=this._min;this._min=t,this._isRange?this._updateMinRange({old:i,new:t}):this._updateMinNonRange(t),this._onMinMaxOrStepChange()}_updateMinRange(t){let i=this._getInput(nt.END),o=this._getInput(nt.START),s=i.value,l=o.value;o.min=t.new,i.min=Math.max(t.new,o.value),o.max=Math.min(i.max,i.value),o._updateWidthInactive(),i._updateWidthInactive(),t.new<t.old?this._onTranslateXChangeBySideEffect(i,o):this._onTranslateXChangeBySideEffect(o,i),s!==i.value&&this._onValueChange(i),l!==o.value&&this._onValueChange(o)}_updateMinNonRange(t){let i=this._getInput(nt.END);if(i){let o=i.value;i.min=t,i._updateThumbUIByValue(),this._updateTrackUI(i),o!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(t){let i=isNaN(t)?this._max:t;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(t){let i=this._max;this._max=t,this._isRange?this._updateMaxRange({old:i,new:t}):this._updateMaxNonRange(t),this._onMinMaxOrStepChange()}_updateMaxRange(t){let i=this._getInput(nt.END),o=this._getInput(nt.START),s=i.value,l=o.value;i.max=t.new,o.max=Math.min(t.new,i.value),i.min=o.value,i._updateWidthInactive(),o._updateWidthInactive(),t.new>t.old?this._onTranslateXChangeBySideEffect(o,i):this._onTranslateXChangeBySideEffect(i,o),s!==i.value&&this._onValueChange(i),l!==o.value&&this._onValueChange(o)}_updateMaxNonRange(t){let i=this._getInput(nt.END);if(i){let o=i.value;i.max=t,i._updateThumbUIByValue(),this._updateTrackUI(i),o!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(t){let i=isNaN(t)?this._step:t;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(t){this._step=t,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let t=this._getInput(nt.END),i=this._getInput(nt.START),o=t.value,s=i.value,l=i.value;t.min=this._min,i.max=this._max,t.step=this._step,i.step=this._step,this._platform.SAFARI&&(t.value=t.value,i.value=i.value),t.min=Math.max(this._min,i.value),i.max=Math.min(this._max,t.value),i._updateWidthInactive(),t._updateWidthInactive(),t.value<l?this._onTranslateXChangeBySideEffect(i,t):this._onTranslateXChangeBySideEffect(t,i),o!==t.value&&this._onValueChange(t),s!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let t=this._getInput(nt.END);if(t){let i=t.value;t.step=this._step,this._platform.SAFARI&&(t.value=t.value),t._updateThumbUIByValue(),i!==t.value&&this._onValueChange(t)}}displayWith=t=>`${t}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=L(Wt);constructor(){L(Gi).load(Vl);let t=L(Zn,{optional:!0});this._noopAnimations=t==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let t=this._getInput(nt.END),i=this._getInput(nt.START);this._isRange=!!t&&!!i,this._cdr.detectChanges();let o=this._getThumb(nt.END);this._rippleRadius=o._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(t,i):this._initUINonRange(t),this._updateTrackUI(t),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(t){t.initProps(),t.initUI(),this._updateValueIndicatorUI(t),this._hasViewInitialized=!0,t._updateThumbUIByValue()}_initUIRange(t,i){t.initProps(),t.initUI(),i.initProps(),i.initUI(),t._updateMinMax(),i._updateMinMax(),t._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,t._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let t=this._getInput(nt.END),i=this._getInput(nt.START);t._setIsLeftThumb(),i._setIsLeftThumb(),t.translateX=t._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),t._updateStaticStyles(),i._updateStaticStyles(),t._updateWidthInactive(),i._updateWidthInactive(),t._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(nt.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(nt.START)._isActive||this._getThumb(nt.END)._isActive}_getValue(t=nt.END){let i=this._getInput(t);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(nt.START)?._skipUIUpdate||this._getInput(nt.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(t){let i=this._trackActive.nativeElement.style;i.left=t.left,i.right=t.right,i.transformOrigin=t.transformOrigin,i.transform=t.transform}_calcTickMarkTransform(t){return`translateX(${t*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(t){this._hasViewInitialized&&(this._updateThumbUI(t),this._updateTrackUI(t),this._updateOverlappingThumbUI(t))}_onTranslateXChangeBySideEffect(t,i){this._hasViewInitialized&&(t._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(t){this._hasViewInitialized&&(this._updateValueIndicatorUI(t),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let t=this._getInput(nt.END),i=this._getInput(nt.START);t._updateThumbUIByValue(),i._updateThumbUIByValue(),t._updateStaticStyles(),i._updateStaticStyles(),t._updateMinMax(),i._updateMinMax(),t._updateWidthInactive(),i._updateWidthInactive()}else{let t=this._getInput(nt.END);t&&t._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let t=this._getInput(nt.START),i=this._getInput(nt.END);return!t||!i?!1:i.translateX-t.translateX<20}_updateOverlappingThumbClassNames(t){let i=t.getSibling(),o=this._getThumb(t.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),o._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(t){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(t))}_updateThumbUI(t){if(this._skipUpdate())return;let i=this._getThumb(t.thumbPosition===nt.END?nt.END:nt.START);i._hostElement.style.transform=`translateX(${t.translateX}px)`}_updateValueIndicatorUI(t){if(this._skipUpdate())return;let i=this.displayWith(t.value);if(this._hasViewInitialized?t._valuetext.set(i):t._hostElement.setAttribute("aria-valuetext",i),this.discrete){t.thumbPosition===nt.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let o=this._getThumb(t.thumbPosition);i.length<3?o._hostElement.classList.add("mdc-slider__thumb--short-value"):o._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let t=this._getInput(nt.END),i=this._getInput(nt.START);t&&this._updateValueIndicatorUI(t),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let t=this._step&&this._step>0?this._step:1,o=(Math.floor(this.max/t)*t-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*o-6}_updateTrackUI(t){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(t):this._updateTrackUINonRange(t))}_updateTrackUIRange(t){let i=t.getSibling();if(!i||!this._cachedWidth)return;let o=Math.abs(i.translateX-t.translateX)/this._cachedWidth;t._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${o})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${o})`})}_updateTrackUINonRange(t){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-t.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${t.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let t=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(t):this._updateTickMarkUINonRange(t),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(t){let i=this._getValue(),o=Math.max(Math.round((i-this.min)/t),0),s=Math.max(Math.round((this.max-i)/t),0);this._isRtl?o++:s++,this._tickMarks=Array(o).fill(Hl.ACTIVE).concat(Array(s).fill(Hl.INACTIVE))}_updateTickMarkUIRange(t){let i=this._getValue(),o=this._getValue(nt.START),s=Math.max(Math.round((o-this.min)/t),0),l=Math.max(Math.round((i-o)/t)+1,0),d=Math.max(Math.round((this.max-i)/t),0);this._tickMarks=Array(s).fill(Hl.INACTIVE).concat(Array(l).fill(Hl.ACTIVE),Array(d).fill(Hl.INACTIVE))}_getInput(t){if(t===nt.END&&this._input)return this._input;if(this._inputs?.length)return t===nt.START?this._inputs.first:this._inputs.last}_getThumb(t){return t===nt.END?this._thumbs?.last:this._thumbs?.first}_setTransition(t){this._hasAnimation=!this._platform.IOS&&t&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(t,i){let o=i.width/2,s=i.x+o,l=i.y+o,d=t.clientX-s,f=t.clientY-l;return Math.pow(d,2)+Math.pow(f,2)<Math.pow(o,2)}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-slider"]],contentQueries:function(i,o,s){if(i&1&&(Gn(s,r5,5),Gn(s,gG,4)),i&2){let l;at(l=lt())&&(o._input=l.first),at(l=lt())&&(o._inputs=l)}},viewQuery:function(i,o){if(i&1&&(pn(dG,5),pn(o5,5)),i&2){let s;at(s=lt())&&(o._trackActive=s.first),at(s=lt())&&(o._thumbs=s)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,o){i&2&&(ts("mat-"+(o.color||"primary")),Ut("mdc-slider--range",o._isRange)("mdc-slider--disabled",o.disabled)("mdc-slider--discrete",o.discrete)("mdc-slider--tick-marks",o.showTickMarks)("_mat-animation-noopable",o._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",ht],discrete:[2,"discrete","discrete",ht],showTickMarks:[2,"showTickMarks","showTickMarks",ht],min:[2,"min","min",Ni],color:"color",disableRipple:[2,"disableRipple","disableRipple",ht],max:[2,"max","max",Ni],step:[2,"step","step",Ni],displayWith:"displayWith"},exportAs:["matSlider"],features:[Kt([{provide:pb,useExisting:n}]),Xt],ngContentSelectors:uG,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,o){i&1&&(ti(),Zt(0),Me(1,"div",2),Ot(2,"div",3),Me(3,"div",4),Ot(4,"div",5,0),Fe(),ut(6,mG,3,1,"div",6),Fe(),ut(7,pG,1,3,"mat-slider-visual-thumb",7),Ot(8,"mat-slider-visual-thumb",7)),i&2&&(qe(6),jt(o.showTickMarks?6:-1),qe(),jt(o._isRange?7:-1),qe(),Ft("discrete",o.discrete)("thumbPosition",2)("valueIndicatorText",o.endValueIndicatorText))},dependencies:[yG],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return n})();var vG={provide:Lp,useExisting:Pr(()=>gb),multi:!0};var gb=(()=>{class n{_ngZone=L(Ue);_elementRef=L(Xe);_cdr=L(wn);_slider=L(pb);get value(){return Ni(this._hostElement.value,0)}set value(t){t=isNaN(t)?0:t;let i=t+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(t){this._hostElement.value=t,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new wt;dragStart=new wt;dragEnd=new wt;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(t){this._translateX=t}_translateX;thumbPosition=nt.END;get min(){return Ni(this._hostElement.min,0)}set min(t){this._hostElement.min=t+"",this._cdr.detectChanges()}get max(){return Ni(this._hostElement.max,0)}set max(t){this._hostElement.max=t+"",this._cdr.detectChanges()}get step(){return Ni(this._hostElement.step,0)}set step(t){this._hostElement.step=t+"",this._cdr.detectChanges()}get disabled(){return ht(this._hostElement.disabled)}set disabled(t){this._hostElement.disabled=t,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=Lr("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(t){this._isFocused=t}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new Oe;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;_platform=L(Wt);constructor(){this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(t){if(!(this.disabled||t.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(t,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(t,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(t),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(t){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(t)},0)}_fixValue(t){let i=t.clientX-this._slider._cachedLeft,o=this._slider._cachedWidth,s=this._slider.step===0?1:this._slider.step,l=Math.floor((this._slider.max-this._slider.min)/s),d=this._slider._isRtl?1-i/o:i/o,p=Math.round(d*l)/l*(this._slider.max-this._slider.min)+this._slider.min,g=Math.round(p/s)*s,y=this.value;if(g===y){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation});return}this.value=g,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation})}_onPointerMove(t){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(t)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(t){let i=this._tickMarkOffset,o=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(t,o),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(t){return t.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(t){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(t)}_updateThumbUIByPointerEvent(t,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(t)),this._updateThumbUI(i)}_updateThumbUI(t){this._slider._setTransition(!!t?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(t){(this._isControlInitialized||t!==null)&&(this.value=t)}registerOnChange(t){this._onChangeFn=t,this._isControlInitialized=!0}registerOnTouched(t){this._onTouchedFn=t}setDisabledState(t){this.disabled=t}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,o){i&1&&nn("change",function(){return o._onChange()})("input",function(){return o._onInput()})("blur",function(){return o._onBlur()})("focus",function(){return o._onFocus()}),i&2&&fn("aria-valuetext",o._valuetext())},inputs:{value:[2,"value","value",Ni]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[Kt([vG,{provide:r5,useExisting:n}]),Xt]})}return n})();var a5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,Bl]})}return n})();var l5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,Bl,on]})}return n})();var bG=["button"],_G=["*"];function DG(n,e){if(n&1&&(Me(0,"div",2),Ot(1,"mat-pseudo-checkbox",6),Fe()),n&2){let t=mn();qe(),Ft("disabled",t.disabled)}}var c5=new _e("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:CG});function CG(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var d5=new _e("MatButtonToggleGroup"),wG={provide:Lp,useExisting:Pr(()=>yb),multi:!0},Bp=class{source;value;constructor(e,t){this.source=e,this.value=t}},yb=(()=>{class n{_changeDetector=L(wn);_dir=L(Si,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(t){this._name=t,this._markButtonsForCheck()}_name=L(hi).getId("mat-button-toggle-group-");vertical;get value(){let t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(i=>i.value):t[0]?t[0].value:void 0}set value(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}valueChange=new wt;get selected(){let t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}get multiple(){return this._multiple}set multiple(t){this._multiple=t,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new wt;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(t){this._hideMultipleSelectionIndicator=t,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let t=L(c5,{optional:!0});this.appearance=t&&t.appearance?t.appearance:"standard",this.hideSingleSelectionIndicator=t?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=t?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new tp(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(t=>t.checked)),this.multiple||this._initializeTabIndex()}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_keydown(t){if(this.multiple||this.disabled)return;let o=t.target.id,s=this._buttonToggles.toArray().findIndex(d=>d.buttonId===o),l=null;switch(t.keyCode){case 32:case 13:l=this._buttonToggles.get(s)||null;break;case 38:l=this._getNextButton(s,-1);break;case 37:l=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:l=this._getNextButton(s,1);break;case 39:l=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}l&&(t.preventDefault(),l._onButtonClick(),l.focus())}_emitChangeEvent(t){let i=new Bp(t,this.value);this._rawValue=i.value,this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(t,i,o=!1,s=!1){!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(t):this._selectionModel.deselect(t):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(t,o)):this._updateModelValue(t,o)}_isSelected(t){return this._selectionModel&&this._selectionModel.isSelected(t)}_isPrechecked(t){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>t.value!=null&&i===t.value):t.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(t=>{t.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let t=0;t<this._buttonToggles.length;t++){let i=this._buttonToggles.get(t);if(!i.disabled){i.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(t,i){let o=this._buttonToggles;for(let s=1;s<=o.length;s++){let l=(t+i*s+o.length)%o.length,d=o.get(l);if(d&&!d.disabled)return d}return null}_setSelectionByValue(t){this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(i=>this._selectValue(i))):(this._clearSelection(),this._selectValue(t)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(t=>{t.checked=!1,this.multiple||(t.tabIndex=-1)})}_selectValue(t){let i=this._buttonToggles.find(o=>o.value!=null&&o.value===t);i&&(i.checked=!0,this._selectionModel.select(i),this.multiple||(i.tabIndex=0))}_updateModelValue(t,i){i&&this._emitChangeEvent(t),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(t=>t._markForCheck())}static \u0275fac=function(i){return new(i||n)};static \u0275dir=Ne({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(i,o,s){if(i&1&&Gn(s,Up,5),i&2){let l;at(l=lt())&&(o._buttonToggles=l)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(i,o){i&1&&nn("keydown",function(l){return o._keydown(l)}),i&2&&(fn("role",o.multiple?"group":"radiogroup")("aria-disabled",o.disabled),Ut("mat-button-toggle-vertical",o.vertical)("mat-button-toggle-group-appearance-standard",o.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",ht],value:"value",multiple:[2,"multiple","multiple",ht],disabled:[2,"disabled","disabled",ht],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ht],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ht],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",ht]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[Kt([wG,{provide:d5,useExisting:n}]),Xt]})}return n})(),Up=(()=>{class n{_changeDetectorRef=L(wn);_elementRef=L(Xe);_focusMonitor=L(cp);_idGenerator=L(hi);_animationMode=L(Zn,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(t){this._tabIndex=t,this._markForCheck()}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(t){this._appearance=t}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(t){t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(t){this._disabled=t}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t}_disabledInteractive;change=new wt;constructor(){L(Gi).load(Vl);let t=L(d5,{optional:!0}),i=L(new io("tabindex"),{optional:!0}),o=L(c5,{optional:!0}),s=Number(i);this.tabIndex=s||s===0?s:null,this.buttonToggleGroup=t,this.appearance=o&&o.appearance?o.appearance:"standard",this.disabledInteractive=o?.disabledInteractive??!1}ngOnInit(){let t=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}focus(t){this._buttonElement.nativeElement.focus(t)}_onButtonClick(){if(this.disabled)return;let t=this.isSingleSelector()?!0:!this._checked;if(t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let i=this.buttonToggleGroup._buttonToggles.find(o=>o.tabIndex===0);i&&(i.tabIndex=-1),this.tabIndex=0}this.change.emit(new Bp(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(i,o){if(i&1&&pn(bG,5),i&2){let s;at(s=lt())&&(o._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(i,o){i&1&&nn("focus",function(){return o.focus()}),i&2&&(fn("aria-label",null)("aria-labelledby",null)("id",o.id)("name",null),Ut("mat-button-toggle-standalone",!o.buttonToggleGroup)("mat-button-toggle-checked",o.checked)("mat-button-toggle-disabled",o.disabled)("mat-button-toggle-disabled-interactive",o.disabledInteractive)("mat-button-toggle-appearance-standard",o.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",ht],appearance:"appearance",checked:[2,"checked","checked",ht],disabled:[2,"disabled","disabled",ht],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ht]},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Xt],ngContentSelectors:_G,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(i,o){if(i&1){let s=ra();ti(),Me(0,"button",1,0),nn("click",function(){return Js(s),ea(o._onButtonClick())}),ut(2,DG,2,1,"div",2),Me(3,"span",3),Zt(4),Fe()(),Ot(5,"span",4)(6,"span",5)}if(i&2){let s=qc(1);Ft("id",o.buttonId)("disabled",o.disabled&&!o.disabledInteractive||null),fn("role",o.isSingleSelector()?"radio":"button")("tabindex",o.disabled&&!o.disabledInteractive?-1:o.tabIndex)("aria-pressed",o.isSingleSelector()?null:o.checked)("aria-checked",o.isSingleSelector()?o.checked:null)("name",o._getButtonName())("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby)("aria-disabled",o.disabled&&o.disabledInteractive?"true":null),qe(2),jt(o.buttonToggleGroup&&(!o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideSingleSelectionIndicator||o.buttonToggleGroup.multiple&&!o.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),qe(4),Ft("matRippleTrigger",s)("matRippleDisabled",o.disableRipple||o.disabled)}},dependencies:[Fd,zA],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}"],encapsulation:2,changeDetection:0})}return n})(),u5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,Bl,Up,on]})}return n})();var EG=["*"],qp;function TG(){if(qp===void 0&&(qp=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(qp=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return qp}function Gd(n){return TG()?.createHTML(n)||n}function h5(n){return Error(`Unable to find icon with the name "${n}"`)}function xG(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function f5(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function m5(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var Ao=class{url;svgText;options;svgElement;constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},AG=(()=>{class n{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(t,i,o,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._document=o}addSvgIcon(t,i,o){return this.addSvgIconInNamespace("",t,i,o)}addSvgIconLiteral(t,i,o){return this.addSvgIconLiteralInNamespace("",t,i,o)}addSvgIconInNamespace(t,i,o,s){return this._addSvgIconConfig(t,i,new Ao(o,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,o,s){let l=this._sanitizer.sanitize(xi.HTML,o);if(!l)throw m5(o);let d=Gd(l);return this._addSvgIconConfig(t,i,new Ao("",d,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,o){return this._addSvgIconSetConfig(t,new Ao(i,null,o))}addSvgIconSetLiteralInNamespace(t,i,o){let s=this._sanitizer.sanitize(xi.HTML,i);if(!s)throw m5(i);let l=Gd(s);return this._addSvgIconSetConfig(t,new Ao("",l,o))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){let i=this._sanitizer.sanitize(xi.RESOURCE_URL,t);if(!i)throw f5(t);let o=this._cachedIconsByUrl.get(i);return o?dn(Gp(o)):this._loadSvgIconFromConfig(new Ao(t,null)).pipe(eo(s=>this._cachedIconsByUrl.set(i,s)),mt(s=>Gp(s)))}getNamedSvgIcon(t,i=""){let o=p5(i,t),s=this._svgIconConfigs.get(o);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(o,s),this._getSvgFromConfig(s);let l=this._iconSetConfigs.get(i);return l?this._getSvgFromIconSetConfigs(t,l):dc(h5(o))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?dn(Gp(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(mt(i=>Gp(i)))}_getSvgFromIconSetConfigs(t,i){let o=this._extractIconWithNameFromAnySet(t,i);if(o)return dn(o);let s=i.filter(l=>!l.svgText).map(l=>this._loadSvgIconSetFromConfig(l).pipe(zu(d=>{let p=`Loading icon set URL: ${this._sanitizer.sanitize(xi.RESOURCE_URL,l.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(p)),dn(null)})));return uc(s).pipe(mt(()=>{let l=this._extractIconWithNameFromAnySet(t,i);if(!l)throw h5(t);return l}))}_extractIconWithNameFromAnySet(t,i){for(let o=i.length-1;o>=0;o--){let s=i[o];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){let l=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(l,t,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(eo(i=>t.svgText=i),mt(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?dn(null):this._fetchIcon(t).pipe(eo(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,o){let s=t.querySelector(`[id="${i}"]`);if(!s)return null;let l=s.cloneNode(!0);if(l.removeAttribute("id"),l.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(l,o);if(l.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(l),o);let d=this._svgElementFromString(Gd("<svg></svg>"));return d.appendChild(l),this._setSvgAttributes(d,o)}_svgElementFromString(t){let i=this._document.createElement("DIV");i.innerHTML=t;let o=i.querySelector("svg");if(!o)throw Error("<svg> tag not found");return o}_toSvgElement(t){let i=this._svgElementFromString(Gd("<svg></svg>")),o=t.attributes;for(let s=0;s<o.length;s++){let{name:l,value:d}=o[s];l!=="id"&&i.setAttribute(l,d)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){let{url:i,options:o}=t,s=o?.withCredentials??!1;if(!this._httpClient)throw xG();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let l=this._sanitizer.sanitize(xi.RESOURCE_URL,i);if(!l)throw f5(i);let d=this._inProgressUrlFetches.get(l);if(d)return d;let f=this._httpClient.get(l,{responseType:"text",withCredentials:s}).pipe(mt(p=>Gd(p)),$u(()=>this._inProgressUrlFetches.delete(l)),hc());return this._inProgressUrlFetches.set(l,f),f}_addSvgIconConfig(t,i,o){return this._svgIconConfigs.set(p5(t,i),o),this}_addSvgIconSetConfig(t,i){let o=this._iconSetConfigs.get(t);return o?o.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){let i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let o=0;o<this._resolvers.length;o++){let s=this._resolvers[o](i,t);if(s)return MG(s)?new Ao(s.url,null,s.options):new Ao(s,null)}}static \u0275fac=function(i){return new(i||n)(Je(HI,8),Je(Ry),Je(bt,8),Je(Ei))};static \u0275prov=Ee({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gp(n){return n.cloneNode(!0)}function p5(n,e){return n+":"+e}function MG(n){return!!(n.url&&n.options)}var RG=new _e("MAT_ICON_DEFAULT_OPTIONS"),OG=new _e("mat-icon-location",{providedIn:"root",factory:PG});function PG(){let n=L(bt),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var g5=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],FG=g5.map(n=>`[${n}]`).join(", "),kG=/^url\(['"]?#(.*?)['"]?\)$/,y5=(()=>{class n{_elementRef=L(Xe);_iconRegistry=L(AG);_location=L(OG);_errorHandler=L(Ei);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){let i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){let i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=Yt.EMPTY;constructor(){let t=L(new io("aria-hidden"),{optional:!0}),i=L(RG,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];let i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let t=this._elementsWithExternalReferences;if(t&&t.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){let t=this._elementRef.nativeElement,i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let o=t.childNodes[i];(o.nodeType!==1||o.nodeName.toLowerCase()==="svg")&&o.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(o=>o.length>0);this._previousFontSetClass.forEach(o=>t.classList.remove(o)),i.forEach(o=>t.classList.add(o)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return typeof t=="string"?t.trim().split(" ")[0]:t}_prependPathToReferences(t){let i=this._elementsWithExternalReferences;i&&i.forEach((o,s)=>{o.forEach(l=>{s.setAttribute(l.name,`url('${t}#${l.value}')`)})})}_cacheChildrenWithExternalReferences(t){let i=t.querySelectorAll(FG),o=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)g5.forEach(l=>{let d=i[s],f=d.getAttribute(l),p=f?f.match(kG):null;if(p){let g=o.get(d);g||(g=[],o.set(d,g)),g.push({name:l,value:p[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){let[i,o]=this._splitIconName(t);i&&(this._svgNamespace=i),o&&(this._svgName=o),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(o,i).pipe(Un(1)).subscribe(s=>this._setSvgElement(s),s=>{let l=`Error retrieving icon ${i}:${o}! ${s.message}`;this._errorHandler.handleError(new Error(l))})}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,o){i&2&&(fn("data-mat-icon-type",o._usingFontIcon()?"font":"svg")("data-mat-icon-name",o._svgName||o.fontIcon)("data-mat-icon-namespace",o._svgNamespace||o.fontSet)("fontIcon",o._usingFontIcon()?o.fontIcon:null),ts(o.color?"mat-"+o.color:""),Ut("mat-icon-inline",o.inline)("mat-icon-no-color",o.color!=="primary"&&o.color!=="accent"&&o.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",ht],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Xt],ngContentSelectors:EG,decls:1,vars:0,template:function(i,o){i&1&&(ti(),Zt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),v5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on,on]})}return n})();function NG(n,e){n&1&&Ot(0,"div",2)}var VG=new _e("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var b5=(()=>{class n{_elementRef=L(Xe);_ngZone=L(Ue);_changeDetectorRef=L(wn);_animationMode=L(Zn,{optional:!0});constructor(){let t=L(VG,{optional:!0});this._isNoopAnimation=this._animationMode==="NoopAnimations",t&&(t.color&&(this.color=this._defaultColor=t.color),this.mode=t.mode||this.mode)}_isNoopAnimation=!1;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;_defaultColor="primary";get value(){return this._value}set value(t){this._value=S5(t||0),this._changeDetectorRef.markForCheck()}_value=0;get bufferValue(){return this._bufferValue||0}set bufferValue(t){this._bufferValue=S5(t||0),this._changeDetectorRef.markForCheck()}_bufferValue=0;animationEnd=new wt;get mode(){return this._mode}set mode(t){this._mode=t,this._changeDetectorRef.markForCheck()}_mode="determinate";ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}_transitionendHandler=t=>{this.animationEnd.observers.length===0||!t.target||!t.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))};static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(i,o){i&2&&(fn("aria-valuenow",o._isIndeterminate()?null:o.value)("mode",o.mode),ts("mat-"+o.color),Ut("_mat-animation-noopable",o._isNoopAnimation)("mdc-linear-progress--animation-ready",!o._isNoopAnimation)("mdc-linear-progress--indeterminate",o._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",Ni],bufferValue:[2,"bufferValue","bufferValue",Ni],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Xt],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(i,o){i&1&&(Me(0,"div",0),Ot(1,"div",1),ut(2,NG,1,0,"div",2),Fe(),Me(3,"div",3),Ot(4,"span",4),Fe(),Me(5,"div",5),Ot(6,"span",4),Fe()),i&2&&(qe(),Nr("flex-basis",o._getBufferBarFlexBasis()),qe(),jt(o.mode==="buffer"?2:-1),qe(),Nr("transform",o._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height, 4px),var(--mdc-linear-progress-active-indicator-height, 4px))}@media(forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-sys-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height, 4px)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height, 4px);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-sys-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-sys-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height, 4px) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0})}return n})();function S5(n,e=0,t=100){return Math.max(e,Math.min(t,n))}var _5=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=We({type:n});static \u0275inj=Qe({imports:[on]})}return n})();function UG(n,e){n&1&&(Me(0,"th",13),_n(1," Name "),Fe())}function qG(n,e){if(n&1&&(Me(0,"td",14),_n(1),Fe()),n&2){let t=e.$implicit;qe(),Vr(" ",t.name," ")}}function GG(n,e){n&1&&(Me(0,"th",13),_n(1," Value "),Fe())}function jG(n,e){if(n&1&&(Me(0,"td",14),_n(1),Fe()),n&2){let t=e.$implicit;qe(),Vr(" ",t.value," ")}}function zG(n,e){n&1&&Ot(0,"tr",15)}function HG(n,e){n&1&&Ot(0,"tr",16)}function QG(n,e){if(n&1){let t=ra();Me(0,"mat-button-toggle",13),nn("click",function(){let o=Js(t).$implicit,s=mn();return ea(s.onChangeTool(o))}),Me(1,"mat-icon"),_n(2),Fe()()}if(n&2){let t=e.$implicit,i=mn();Uc("value",t),Uc("title",t),Ft("disabled",!i.dataLoaded||!i.canRunTool(t)),qe(2),fo(i.getToolIcon(t))}}function WG(n,e){if(n&1&&(Me(0,"div",14)(1,"p"),_n(2,"Powered by "),Me(3,"a",15),_n(4,"dwv"),Fe(),_n(5),Me(6,"a",16),_n(7,"Angular"),Fe(),_n(8),Fe()()),n&2){let t=mn();qe(5),Vr(" ",t.versions.dwv," and "),qe(3),Vr(" ",t.versions.angular," ")}}var $G=(()=>{class n{_fullMetaData;min;max;instanceNumber=0;instanceNumbers;keys;set data(t){this._fullMetaData=t,this.keys=Object.keys(this._fullMetaData);let i=this._fullMetaData["00200013"];if(typeof i<"u"){let o=i.value;typeof o=="string"&&(o=[o]),this.instanceNumbers=o.map(Number),this.instanceNumbers.sort((s,l)=>s-l),this.min=0,this.max=this.instanceNumbers.length-1,this.instanceNumber=this.instanceNumbers[this.min]}this.setDataSource(this.instanceNumber)}sort;displayedColumns=["name","value"];dataSource;setDataSource(t){this.instanceNumber=t;let i=this.getMetaArray(t),o="";this.dataSource&&(o=this.dataSource.filter),this.dataSource=new Ip(i),this.dataSource.sort=this.sort,this.dataSource.filter=o}onkeyup(t){t.target instanceof HTMLInputElement&&this.applyFilter(t.target.value)}applyFilter(t){t=t.trim(),t=t.toLowerCase(),this.dataSource.filter=t}onsliderchange(t){let i=parseInt(t.target.value,10);this.setDataSource(this.instanceNumbers[i])}getMetaArray(t){let i;return this.isDicomMeta(this._fullMetaData)?i=this.getDicomTagReducer(this._fullMetaData,t,""):i=this.getTagReducer(this._fullMetaData),this.keys.reduce(i,[])}isDicomMeta(t){return typeof t["00020010"]<"u"}getTagReducer(t){return function(i,o){return i.push({name:o,value:t[o].value}),i}}getDicomTagReducer(t,i,o){return(s,l)=>{let d=(0,Nn.getTagFromKey)(l),f=d.getNameFromDictionary();typeof f>"u"&&(f="x"+d.getKey());let p=f,g=t[l];if(g.vr==="SQ"){s.push({name:(o?o+" ":"")+p,value:""});for(let y=0;y<g.value.length;++y){let D=g.value[y],C=Object.keys(D).reduce(this.getDicomTagReducer(D,i,o+"["+y+"]"),[]);s=s.concat(C)}}else{let y;typeof g.value.slice>"u"&&typeof g.value[i]<"u"&&(y=g.value[i]),p==="InstanceNumber"&&(y=i.toString()),g.vr[0]==="O"&&g.value.length>10&&(y=g.value.slice(0,10).toString()+"... (len:"+g.value.length+")"),typeof y>"u"&&(y=g.value.toString()),s.push({name:(o?o+" ":"")+p,value:y})}return s}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=ot({type:n,selectors:[["dwv-tags-table"]],viewQuery:function(i,o){if(i&1&&pn(KA,7),i&2){let s;at(s=lt())&&(o.sort=s.first)}},inputs:{data:"data"},decls:17,vars:7,consts:[[1,"searchfield"],["matInput","","placeholder","Filter",1,"searchinput",3,"keyup"],["id","instanceslider","step","1","showTickMarks","true","matTooltip","Instance number",1,"instanceslider",3,"min","max"],["matSliderThumb","",1,"instanceinput",3,"input"],["for","instanceslider","matTooltip","Instance number",1,"instancelabel"],[1,"container","mat-elevation-z8"],["mat-table","","matSort","",1,"mat-elevation-z4",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","value"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,o){i&1&&(Me(0,"div")(1,"mat-form-field",0)(2,"input",1),nn("keyup",function(l){return o.onkeyup(l)}),Fe()(),Me(3,"mat-slider",2)(4,"input",3),nn("input",function(l){return o.onsliderchange(l)}),Fe()(),Me(5,"label",4),_n(6),Fe(),Me(7,"section",5)(8,"table",6),na(9,7),ut(10,UG,2,0,"th",8)(11,qG,2,1,"td",9),ia(),na(12,10),ut(13,GG,2,0,"th",8)(14,jG,2,1,"td",9),ia(),ut(15,zG,1,0,"tr",11)(16,HG,1,0,"tr",12),Fe()()()),i&2&&(qe(3),Ft("min",o.min)("max",o.max),qe(3),fo(o.instanceNumber),qe(2),Ft("dataSource",o.dataSource),qe(7),Ft("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),qe(),Ft("matRowDefColumns",o.displayedColumns))},dependencies:[qM,i5,n5,t5,qd,gM,sM,lM,hM,cM,aM,fM,dM,uM,mM,pM,a5,s5,gb],styles:[".instanceslider[_ngcontent-%COMP%]{width:25%;margin:10px}.instancelabel[_ngcontent-%COMP%]{margin-left:15px}.searchfield[_ngcontent-%COMP%]{padding-right:20px;width:50%}.searchinput[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]{height:400px;overflow:auto}"]})}return n})();var YG=(()=>{class n{dialogRef;data;constructor(t,i){this.dialogRef=t,this.data=i}static \u0275fac=function(i){return new(i||n)(bn(Ul),bn(jS))};static \u0275cmp=ot({type:n,selectors:[["dwv-tags-dialog"]],decls:4,vars:2,consts:[["mat-dialog-title",""],[3,"data"]],template:function(i,o){i&1&&(Me(0,"h1",0),_n(1),Fe(),Me(2,"mat-dialog-content"),Ot(3,"dwv-tags-table",1),Fe()),i&2&&(qe(),fo(o.data.title),qe(2),Ft("data",o.data.value))},dependencies:[YA,XA,$G],encapsulation:2})}return n})();Nn.decoderScripts.jpeg2000="assets/dwv/decoders/pdfjs/decode-jpeg2000.js";Nn.decoderScripts["jpeg-lossless"]="assets/dwv/decoders/rii-mango/decode-jpegloss.js";Nn.decoderScripts["jpeg-baseline"]="assets/dwv/decoders/pdfjs/decode-jpegbaseline.js";Nn.decoderScripts.rle="assets/dwv/decoders/dwv/decode-rle.js";var D5=(()=>{class n{dialog;showLegend=!1;uri;urls;versions={dwv:(0,Nn.getDwvVersion)(),angular:SI.full};tools={Scroll:new Nn.ToolConfig,ZoomAndPan:new Nn.ToolConfig,WindowLevel:new Nn.ToolConfig,Draw:new Nn.ToolConfig(["Ruler"])};toolNames=Object.keys(this.tools);selectedTool="Select Tool";loadProgress=0;dataLoaded=!1;dwvApp;metaData;orientation;dropboxDivId="dropBox";dropboxClassName="dropBox";borderClassName="dropBoxBorder";hoverClassName="hover";constructor(t){this.dialog=t}ngOnInit(){this.dwvApp=new Nn.App;let i={"*":[new Nn.ViewConfig("layerGroup0")]},o=new Nn.AppOptions(i);o.tools=this.tools,this.dwvApp.init(o);let s=0,l=0,d=0,f=!1;this.dwvApp.addEventListener("loadstart",()=>{this.dataLoaded=!1,s=0,l=0,d=0,f=!0,this.showDropbox(!1)}),this.dwvApp.addEventListener("loadprogress",p=>{this.loadProgress=p.loaded}),this.dwvApp.addEventListener("renderend",()=>{if(f){f=!1;let p="ZoomAndPan";this.dwvApp.canScroll()&&(p="Scroll"),this.onChangeTool(p)}}),this.dwvApp.addEventListener("load",p=>{this.metaData=this.dwvApp.getMetaData(p.dataid),this.dataLoaded=!0}),this.dwvApp.addEventListener("loadend",()=>{l&&(this.loadProgress=0,alert("Received errors during load. Check log for details."),s||this.showDropbox(!0)),d&&(this.loadProgress=0,alert("Load was aborted."),this.showDropbox(!0))}),this.dwvApp.addEventListener("loaditem",()=>{++s}),this.dwvApp.addEventListener("loaderror",p=>{console.error(p.error),++l}),this.dwvApp.addEventListener("loadabort",()=>{++d}),this.dwvApp.addEventListener("keydown",p=>{this.dwvApp.defaultOnKeydown(p)}),window.addEventListener("resize",this.dwvApp.onResize),this.uri!==void 0?this.dwvApp.loadFromUri(this.uri):this.urls!==void 0?this.dwvApp.loadURLs(this.urls):this.setupDropbox()}getToolIcon=t=>{let i;return t==="Scroll"?i="menu":t==="ZoomAndPan"?i="search":t==="WindowLevel"?i="contrast":t==="Draw"&&(i="straighten"),i};onChangeTool=t=>{this.dwvApp&&(this.selectedTool=t,this.dwvApp.setTool(t),t==="Draw"&&typeof this.tools.Draw.options<"u"&&this.onChangeShape(this.tools.Draw.options[0]))};canRunTool=t=>{let i;return t==="Scroll"?i=this.dwvApp.canScroll():t==="WindowLevel"?i=this.dwvApp.canWindowLevel():i=!0,i};onSingleToogleChange=t=>{t.source.buttonToggleGroup.value=""};toggleOrientation=()=>{typeof this.orientation<"u"?this.orientation==="axial"?this.orientation="coronal":this.orientation==="coronal"?this.orientation="sagittal":this.orientation==="sagittal"&&(this.orientation="axial"):this.orientation="coronal";let t=new Nn.ViewConfig("layerGroup0");t.orientation=this.orientation;let i={"*":[t]};this.dwvApp.setDataViewConfigs(i);let o=this.dwvApp.getDataIds();for(let s of o)this.dwvApp.render(s)};onChangeShape=t=>{this.dwvApp&&this.selectedTool==="Draw"&&this.dwvApp.setToolFeatures({shapeName:t})};onReset=()=>{this.dwvApp&&this.dwvApp.resetDisplay()};openTagsDialog=()=>{this.dialog.open(YG,{data:{title:"DICOM Tags",value:this.metaData}})};setupDropbox=()=>{this.showDropbox(!0)};defaultHandleDragEvent=t=>{t.stopPropagation(),t.preventDefault()};onBoxDragOver=t=>{this.defaultHandleDragEvent(t);let i=document.getElementById(this.dropboxDivId);i&&i.className.indexOf(this.hoverClassName)===-1&&(i.className+=" "+this.hoverClassName)};onBoxDragLeave=t=>{this.defaultHandleDragEvent(t);let i=document.getElementById(this.dropboxDivId);i&&i.className.indexOf(this.hoverClassName)!==-1&&(i.className=i.className.replace(" "+this.hoverClassName,""))};onDrop=t=>{if(this.defaultHandleDragEvent(t),t.dataTransfer){let i=Array.from(t.dataTransfer.files);this.dwvApp.loadFiles(i)}};onInputFile=t=>{let i=t.target;if(i&&i.files){let o=Array.from(i.files);this.dwvApp.loadFiles(o)}};showDropbox=t=>{let i=document.getElementById(this.dropboxDivId);if(!i)return;let o=document.getElementById("layerGroup0");if(t){if(i.className=this.dropboxClassName+" "+this.borderClassName,i.innerHTML===""){let s=document.createElement("p");s.appendChild(document.createTextNode("Drag and drop data here or "));let l=document.createElement("input");l.onchange=this.onInputFile,l.type="file",l.multiple=!0,l.id="input-file",l.style.display="none";let d=document.createElement("label");d.htmlFor="input-file";let f=document.createElement("a");f.appendChild(document.createTextNode("click here")),f.id="input-file-link",d.appendChild(f),s.appendChild(l),s.appendChild(d),i.appendChild(s)}i.setAttribute("style","display:initial"),o&&(o.removeEventListener("dragover",this.defaultHandleDragEvent),o.removeEventListener("dragleave",this.defaultHandleDragEvent),o.removeEventListener("drop",this.onDrop)),i.addEventListener("dragover",this.onBoxDragOver),i.addEventListener("dragleave",this.onBoxDragLeave),i.addEventListener("drop",this.onDrop)}else i.className=this.dropboxClassName,i.innerHTML="",i.setAttribute("style","display:none"),i.removeEventListener("dragover",this.onBoxDragOver),i.removeEventListener("dragleave",this.onBoxDragLeave),i.removeEventListener("drop",this.onDrop),o&&(o.addEventListener("dragover",this.defaultHandleDragEvent),o.addEventListener("dragleave",this.defaultHandleDragEvent),o.addEventListener("drop",this.onDrop))};static \u0275fac=function(i){return new(i||n)(bn(gp))};static \u0275cmp=ot({type:n,selectors:[["dwv-angular"]],inputs:{showLegend:"showLegend",uri:"uri",urls:"urls"},decls:20,vars:7,consts:[["id","dwv"],["mode","determinate",3,"value"],[1,"button-row"],["name","tool",3,"disabled"],["color","primary",3,"value","title","disabled","click",4,"ngFor","ngForOf"],["name","reset",3,"change","disabled"],["color","primary","title","Reset",3,"click"],["color","primary","title","Toggle Orientation",3,"click"],["name","tags",3,"change","disabled"],["color","primary","title","Tags",3,"click"],["id","layerGroup0",1,"layerGroup"],["id","dropBox"],["class","legend mat-small",4,"ngIf"],["color","primary",3,"click","value","title","disabled"],[1,"legend","mat-small"],["href","https://github.com/ivmartel/dwv"],["href","https://github.com/angular/angular"]],template:function(i,o){i&1&&(Me(0,"div",0),Ot(1,"mat-progress-bar",1),Me(2,"div",2)(3,"mat-button-toggle-group",3),ut(4,QG,3,4,"mat-button-toggle",4),Fe(),Me(5,"mat-button-toggle-group",5),nn("change",function(l){return o.onSingleToogleChange(l)}),Me(6,"mat-button-toggle",6),nn("click",function(){return o.onReset()}),Me(7,"mat-icon"),_n(8,"refresh"),Fe()()(),Me(9,"mat-button-toggle-group",5),nn("change",function(l){return o.onSingleToogleChange(l)}),Me(10,"mat-button-toggle",7),nn("click",function(){return o.toggleOrientation()}),Me(11,"mat-icon"),_n(12,"cameraswitch"),Fe()()(),Me(13,"mat-button-toggle-group",8),nn("change",function(l){return o.onSingleToogleChange(l)}),Me(14,"mat-button-toggle",9),nn("click",function(){return o.openTagsDialog()}),Me(15,"mat-icon"),_n(16,"library_books"),Fe()()()(),Me(17,"div",10),Ot(18,"div",11),Fe(),ut(19,WG,9,2,"div",12),Fe()),i&2&&(qe(),Uc("value",o.loadProgress),qe(2),Ft("disabled",!o.dataLoaded),qe(),Ft("ngForOf",o.toolNames),qe(),Ft("disabled",!o.dataLoaded),qe(4),Ft("disabled",!o.dataLoaded),qe(4),Ft("disabled",!o.dataLoaded),qe(6),Ft("ngIf",o.showLegend))},dependencies:[my,NI,VI,l5,u5,yb,Up,ZA,v5,y5,_5,b5],styles:[`#dwv{height:90%}.legend{text-align:center;font-size:8pt;margin:1em}.layerGroup{position:relative;padding:0;display:flex;justify-content:center;height:90%}.layer{position:absolute;pointer-events:none}.dropBox{margin:auto;text-align:center;vertical-align:middle;width:50%;height:75%}
`],encapsulation:2})}return n})();var jp=class n{title="dwv-angular-app";uri;ngOnInit(){window.location.search!==""&&(this.uri=window.location.href)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ot({type:n,selectors:[["app-root"]],decls:1,vars:2,consts:[[3,"showLegend","uri"]],template:function(t,i){t&1&&Ot(0,"dwv-angular",0),t&2&&Ft("showLegend",!0)("uri",i.uri)},dependencies:[D5],encapsulation:2})};eE(jp,VE).catch(n=>console.error(n));
