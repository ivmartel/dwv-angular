<div id="dwv">
  <mat-progress-bar mode="determinate" value="{{ loadProgress }}"></mat-progress-bar>
  <div class="header">
    @for (tool of toolNames; track tool) {
      <div class="toolbar-item">
        @if (selectedTool === tool) {
          <button value="{{ tool }}"
            matButton="tonal"
            title="{{ tool }}"
            (click)="onChangeTool(tool)"
            [disabled]="!dataLoaded || !canRunTool(tool)">
            <mat-icon>{{ getToolIcon(tool) }}</mat-icon>
          </button>
        } @else {
          <button value="{{ tool }}"
            matButton="filled"
            title="{{ tool }}"
            (click)="onChangeTool(tool)"
            [disabled]="!dataLoaded || !canRunTool(tool)">
            <mat-icon>{{ getToolIcon(tool) }}</mat-icon>
          </button>
        }
        @if (tool === 'WindowLevel') {
          <div class="select-wrapper">
            <button value="WindowLevelPresets"
              matButton="filled"
              title="WindowLevel presets"
              [disabled]="!dataLoaded || !canRunTool('WindowLevel')">
              <mat-icon>keyboard_arrow_down</mat-icon>
            </button>
            <select
              name="WindowLevelPresetsSelect"
              title="Window level presets select"
              [(ngModel)]="selectedPreset"
              [disabled]="!dataLoaded || !canRunTool('WindowLevel')">
              @for (preset of presetNames; track preset) {
                <option
                  [value]="preset">
                  {{ preset }}
                </option>
              }
            </select>
          </div>
        } @else if (tool === 'Draw') {
          <div class="select-wrapper">
            <button value="DrawShapes"
              matButton="filled"
              title="Draw shapes"
              [disabled]="!dataLoaded || !canRunTool('Draw')">
              <mat-icon>keyboard_arrow_down</mat-icon>
            </button>
            <select
              name="DrawShapesSelect"
              title="Draw shapes select"
              [(ngModel)]="selectedShape"
              [disabled]="!dataLoaded || !canRunTool('Draw')">
              @for (shape of shapeNames; track shape) {
                <option
                  [value]="shape">
                  {{ shape }}
                </option>
              }
            </select>
          </div>
        }
      </div>
    }
    <div class="toolbar-item">
      <button color="primary" matButton="filled"
        title="Reset"
        (click)="onReset()"
        [disabled]="!dataLoaded" selected="true">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>

    <div class="toolbar-item">
      <button color="primary" matButton="filled"
        title="Toggle Orientation"
        (click)="toggleOrientation()"
        [disabled]="!dataLoaded">
        <mat-icon>cameraswitch</mat-icon>
      </button>
    </div>

    <div class="toolbar-item">
      <button color="primary" matButton="filled"
        title="Tags"
        (click)="openTagsDialog()"
        [disabled]="!dataLoaded">
        <mat-icon>library_books</mat-icon>
      </button>
    </div>
  </div>
  <div class="content">
    <div id="layerGroup0" class="layerGroup">
      <div id="dropBox"></div>
    </div>
  </div>
  @if (showLegend) {
    <div class="footer mat-small">
      <p>Powered by
        <a href="https://github.com/ivmartel/dwv">dwv</a>
        {{ versions.dwv }}
        and
        <a href="https://github.com/angular/angular">Angular</a>
        {{ versions.angular }}
      </p>
    </div>
  }
</div>
